{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u3010\u5efa\u8bbe\u4e2d\u3011 \u00b6 \u613f\u4e2d\u56fd\u9752\u5e74\u90fd\u6446\u8131\u51b7\u6c14\uff0c\u53ea\u662f\u5411\u4e0a\u8d70\uff0c\u4e0d\u5fc5\u542c\u81ea\u66b4\u81ea\u5f03\u8005\u6d41\u7684\u8bdd\uff0c\u80fd\u505a\u4e8b\u7684\u505a\u4e8b\uff0c\u80fd\u53d1\u58f0\u7684\u53d1\u58f0\uff0c\u6709\u4e00\u5206\u70ed\uff0c\u53d1\u4e00\u5206\u5149\uff0c\u5c31\u4ee4\u8424\u706b\u4e00\u822c\uff0c\u4e5f\u53ef\u4ee5\u5728\u9ed1\u6697\u91cc\u53d1\u4e00\u70b9\u5149\uff0c\u4e0d\u5fc5\u7b49\u5f85\u70ac\u706b\uff0c\u6b64\u540e\u5982\u7adf\u6ca1\u6709\u70ac\u706b\uff0c\u6211\u4fbf\u662f\u552f\u4e00\u7684\u5149 \u7528\u4e8e\u4e71\u4e03\u516b\u7cdf\u7684\u7b14\u8bb0\u6574\u7406 \u77ed\u671f\u6574\u7406\uff0c\u4e0d\u6c42\u7f8e\u89c2\uff0c\u53ea\u6c42\u5168\u9762 \u5199\u7eb8\u8d28\u592a\u9ebb\u70e6\u4e86\uff0c\u7535\u5b50\u7248\u65b9\u4fbf\u67e5\u770b \u70c2\u7cdf\u95ee\u9898 \u6ce8\uff1amkdocs \u7684\u56fe\u7247\u63d2\u5165\u65b9\u5f0f\u4e25\u683c\u6309\u7167 \u5b98\u65b9\u6587\u6863 \u624d\u80fd\u663e\u793a 1 ![ Screenshot ]( img/screenshot.png ) \u89e3\u6551\u6211\u7684\u70c2\u7cdf mathjax","title":"\u9996\u9875"},{"location":"#_1","text":"\u613f\u4e2d\u56fd\u9752\u5e74\u90fd\u6446\u8131\u51b7\u6c14\uff0c\u53ea\u662f\u5411\u4e0a\u8d70\uff0c\u4e0d\u5fc5\u542c\u81ea\u66b4\u81ea\u5f03\u8005\u6d41\u7684\u8bdd\uff0c\u80fd\u505a\u4e8b\u7684\u505a\u4e8b\uff0c\u80fd\u53d1\u58f0\u7684\u53d1\u58f0\uff0c\u6709\u4e00\u5206\u70ed\uff0c\u53d1\u4e00\u5206\u5149\uff0c\u5c31\u4ee4\u8424\u706b\u4e00\u822c\uff0c\u4e5f\u53ef\u4ee5\u5728\u9ed1\u6697\u91cc\u53d1\u4e00\u70b9\u5149\uff0c\u4e0d\u5fc5\u7b49\u5f85\u70ac\u706b\uff0c\u6b64\u540e\u5982\u7adf\u6ca1\u6709\u70ac\u706b\uff0c\u6211\u4fbf\u662f\u552f\u4e00\u7684\u5149 \u7528\u4e8e\u4e71\u4e03\u516b\u7cdf\u7684\u7b14\u8bb0\u6574\u7406 \u77ed\u671f\u6574\u7406\uff0c\u4e0d\u6c42\u7f8e\u89c2\uff0c\u53ea\u6c42\u5168\u9762 \u5199\u7eb8\u8d28\u592a\u9ebb\u70e6\u4e86\uff0c\u7535\u5b50\u7248\u65b9\u4fbf\u67e5\u770b \u70c2\u7cdf\u95ee\u9898 \u6ce8\uff1amkdocs \u7684\u56fe\u7247\u63d2\u5165\u65b9\u5f0f\u4e25\u683c\u6309\u7167 \u5b98\u65b9\u6587\u6863 \u624d\u80fd\u663e\u793a 1 ![ Screenshot ]( img/screenshot.png ) \u89e3\u6551\u6211\u7684\u70c2\u7cdf mathjax","title":"\u3010\u5efa\u8bbe\u4e2d\u3011"},{"location":"CSAPP/CSAPP-PartOne-1/","text":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011PartOne \u7a0b\u5e8f\u7ed3\u6784\u548c\u6267\u884c\u4e4b \u4fe1\u606f\u7684\u8868\u793a\u548c\u5904\u7406 \u00b6 \u3010\u5199\u5728\u524d\u9762\u3011 \u00b6 \u95ee\u9898 \u00b6 \u4fe1\u606f\u8868\u793a\u548c\u5904\u7406 \u4f4d\u3001\u6574\u6570 \u5de7\u7528\u65e0\u7b26\u53f7\u6570\uff1a\u5411\u4e0b\u8ba1\u6570\uff0c\u770b\u4e0d\u61c2 \u4fe1\u606f\u8868\u793a\u548c\u5904\u7406 \u4f4d\u3001\u6574\u6570 \u5927\u5c0f\u7aef\u4e3e\u4f8b\uff0c0xfffffea0\u7684\u503c\u7684\u8ba1\u7b97 \u4e94\u6bb5\u5f0f\u6307\u4ee4\u6d41\u6c34\u7ebf \u53c2\u8003 \u00b6 \u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840(\u4e00)\uff1a\u7a0b\u5e8f\u7684\u8868\u793a\u3001\u8f6c\u6362\u4e0e\u94fe\u63a5 \u8881\u6625\u98ce \u7b2c\u4e00\u5468 \u8ba1\u7b97\u673a\u7cfb\u7edf\u6982\u8ff0 \u8ba1\u7b97\u673a\u5c42\u6b21\u7ed3\u6784 \u7b2c\u4e8c\u5468 \u6570\u636e\u7684\u8868\u793a\u548c\u5b58\u50a8 \u6570\u5236\u548c\u7f16\u7801 \u5b9a\u70b9\u6570\u7684\u7f16\u7801\u8868\u793a C\u8bed\u8a00\u4e2d\u7684\u6574\u6570\u3010\u90e8\u5206\u672a\u603b\u7ed3\u3011 \u6d6e\u70b9\u6570\u7684\u7f16\u7801\u8868\u793a \u975e\u6570\u503c\u6570\u636e\u7684\u7f16\u7801\u8868\u793a \u3010\u672a\u603b\u7ed3\u3011 \u6570\u636e\u5bbd\u5ea6\u548c\u5b58\u50a8\u5bb9\u91cf\u7684\u5355\u4f4d\u3010\u672a\u603b\u7ed3\u3011 \u6570\u636e\u5b58\u50a8\u65f6\u7684\u5b57\u8282\u6392\u5217\u3010\u672a\u603b\u7ed3\u3011 \u7b2c\u4e09\u5468 \u8fd0\u7b97\u7535\u8def\u57fa\u7840 CSAPP\u8bfe\u672c \u7f51\u8bfe\u95ee\u9898 \u00b6 \u8003\u5bdf\u5c06\u539f\u6765\u76844\u4f4d\u8868\u793a\u6269\u5145\u4e3a8\u4f4d\u8868\u793a \u6cd51\uff1a\u5148\u5c06\u539f\u6765\u76844\u4f4d\u6269\u5145\u4e3a8\u4f4d\u7684\u539f\u7801\u8868\u793a\u4e3a\uff1a10001000\uff0c\u7136\u540e\u518d\u5c06\u539f\u7801\u8f6c\u6362\u4e3a\u8865\u7801-\u53d6\u53cd\u52a0\u4e00\u5f97\uff1a11111000 \u6cd52\uff1a\u76f4\u63a5\u6309\u7b26\u53f7\u4f4d(\u8be5\u9898\u4e2d\u7b26\u53f7\u4f4d\u4e3a1)\u6269\u5145\u5de6\u8fb9\u7684\u5176\u4f594\u4f4d\uff0c\u5f97\uff1a11111000 \u610f\u601d\u65f6\u6d6e\u70b9\u6570\u4e0d\u4f1a\u51fa\u73b0\u6ea2\u51fa\u95ee\u9898\uff0c\u4e86\u89e3\u6d6e\u70b9\u6570\u76f8\u4e58\u7684\u8fc7\u7a0b a. \u4fe1\u606f\u7684\u7f16\u7801\u4e0e\u5b58\u50a8 \u00b6 a-1 \u6570\u5236 \u00b6 \u201c\u8f6c\u6362\u201d\u7684\u6982\u5ff5\u5728\u6570\u636e\u8868\u793a\u4e2d\u7684\u53cd\u6620 \u673a\u5668\u7ea7\u6570\u636e \u6570\u503c\u6570\u636e \u6574\u6570(\u5b9a\u70b9\u6570\uff0c\u5b9a\u70b9\u8fd0\u7b97\u6307\u4ee4) - \u65e0\u7b26\u53f7\u6574\u6570\u3001\u6709\u7b26\u53f7\u6574\u6570 \u5b9e\u6570(\u6d6e\u70b9\u6570\uff0c\u6d6e\u70b9\u8fd0\u7b97\u6307\u4ee4) - \u6d6e\u70b9\u6570 \u8868\u793a\u7684\u4e09\u8981\u7d20\uff1a \u8fdb\u4f4d\u8ba1\u6570\u5236 \u5b9a/\u6d6e\u70b9\u8868\u793a(\u89e3\u51b3\u5c0f\u6570\u70b9\u95ee\u9898) \u5b9a\u70b9\u6570\u7684\u7f16\u7801(\u89e3\u51b3\u6b63\u8d1f\u53f7\u95ee\u9898) - \u5982\u4f55\u7528\u4e8c\u8fdb\u5236\u7f16\u7801\uff1a\u539f\u7801\u3001\u8865\u7801\u3001\u79fb\u7801\u3001\u53cd\u7801(\u5f88\u5c11\u7528) \u975e\u6570\u503c\u6570\u636e \u903b\u8f91\u6570\uff0c\u5305\u62ec\u4f4d\u4e32 \u897f\u6587\u5b57\u7b26\u548c\u6c49\u5b57 \u6570\u503c\u6570\u636e\u4e2d\u7684\u5c0f\u6570\u70b9\u7684\u8868\u793a \u7ea6\u5b9a\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e \u5b9a\u70b9\u6570Fixed Point Number\uff1a\u5c0f\u6570\u70b9\u4f4d\u7f6e\u7ea6\u5b9a\u5728\u56fa\u5b9a\u4f4d\u7f6e\u7684\u6570 \u5f62\u5f0f\u8fc7\u4e8e\u50f5\u786c\uff0c\u51b3\u5b9a\u4e86\u56fa\u5b9a\u4f4d\u6570\u7684\u6574\u6570\u548c\u5c0f\u6570\u90e8\u5206\uff0c\u4e0d\u5229\u4e8e\u540c\u65f6\u8868\u8fbe\u7279\u522b\u5927\u7684\u6570\u6216\u8005\u7279\u522b\u5c0f\u7684\u6570 \u6d6e\u70b9\u6570Floating Point Number\uff1a\u5c0f\u6570\u70b9\u4f4d\u7f6e\u7ea6\u5b9a\u4e3a\u53ef\u6d6e\u52a8\u7684\u6570 \u662f\u4e00\u79cd \u6570\u5b57\u8868\u793a\u65b9\u5f0f \uff0c\u7c7b\u4f3c\u4e8e\u79d1\u5b66\u8ba1\u6570\u6cd5 \u5b9a\u70b9\u5c0f\u6570\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u5c3e\u6570\u90e8\u5206 \u5b9a\u70b9\u6574\u6570\u7528\u6765\u8868\u793a(\u5e26\u7b26\u53f7/\u65e0\u7b26\u53f7)\u6574\u6570 \u5728\u8ba1\u7b97\u673a\u5185\u90e8\uff0c\u4efb\u4f55\u5b9e\u6570\u90fd\u53ef\u4ee5\u7528\u4e24\u4e2a\u5b9a\u70b9\u6570(\u5b9a\u70b9\u5c0f\u6570-\u6307\u5b9a\u6709\u6548\u6570\u5b57+\u5b9a\u70b9\u6574\u6570-\u6307\u5b9a\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e)\u6765\u8868\u793a \u4e8c\u8fdb\u5236 MSB / LSB \u7528\u4e8c\u8fdb\u5236\u7f16\u7801\u7684\u539f\u56e0 \u7269\u7406\u5668\u4ef6\u3001\u4fbf\u4e8e\u8ba1\u7b97\u673a\u5b58\u50a8 \u7f16\u7801\u3001\u8ba1\u6570\u3001\u7b97\u672f\u8fd0\u7b97\u89c4\u5219\u7b80\u5355 \u652f\u6301\u903b\u8f91\u8fd0\u7b97 \u5341\u516d\u8fdb\u5236 \u5f15\u5165\u516b\u8fdb\u5236\u548c\u5341\u516d\u8fdb\u5236\u7684\u539f\u56e0\uff1a(1)\u662f\u4e8c\u8fdb\u5236\u7684\u7b80\u4fbf\u8868\u793a\uff0c\u4fbf\u4e8e\u9605\u8bfb\u548c\u4e66\u5199\uff0c\u663e\u793a\u65f6\u53ef\u7f29\u77ed\u957f\u5ea6\uff1b(2)\u4ed6\u4eec\u4e4b\u95f4\u5bf9\u5e94\u7b80\u5355\uff0c\u8f6c\u6362\u5bb9\u6613 \u8fdb\u5236\u8f6c\u6362 10\u8fdb\u5236\u8f6ck\u8fdb\u5236 \u6cd5\u2460\uff1a\u5148\u5c06\u5341\u8fdb\u5236\u6570\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u6570\uff0c\u518d\u5c06\u4e8c\u8fdb\u5236\u8f6c\u5316\u4e3a16\u62168\u8fdb\u5236)\uff0c\u8f6c\u6210\u4e8c\u8fdb\u5236\u4e5f\u8981\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5 \u6cd5\u2461\uff1a\u4e0d\u901a\u8fc7\u4e8c\u8fdb\u5236\uff0c\u76f4\u63a5\u8f6c\u6362 \u6574\u6570\uff1a\u9664\u6cd5-\u9664\u57fa\u53d6\u4f59\u6cd5 \u5341\u8fdb\u5236\u6570\u6574\u6570\u90e8\u5206\u4e0d\u65ad\u9664\u4ee5\u57fa\u6570k(2\u30018\u621616) \uff0c\u5e76\u8bb0\u4e0b\u4f59\u6570\uff0c\u76f4\u5230\u5546\u4e3a0\u4e3a\u6b62 \u4e0a\u53f3\u4e0b\u5de6(\u6700\u4e0a\u9762\u7684\u4f59\u6570\u4f4d\u4e8e\u53f3\u8fb9/\u4f4e\u4f4d\uff0c\u6700\u4e0b\u9762\u7684\u4f59\u6570\u4f4d\u4e8e\u5de6\u8fb9/\u9ad8\u4f4d) \u5c0f\u6570\uff1a\u4e58\u6cd5-\u4e58\u57fa\u53d6\u6574\u6cd5\uff0c\u4e58\u4ee5\u57fa\u6570k\uff0c\u8bb0\u5f55\u6574\u6570\u90e8\u5206\uff0c\u76f4\u5230\u5c0f\u6570\u90e8\u5206\u4e3a0\u4e3a\u6b62\uff0c\u4e0a\u5de6\u4e0b\u53f3 \u73b0\u5b9e\u4e2d\u7684\u7cbe\u786e\u503c\u53ef\u80fd\u65e0\u6cd5\u75280\u548c1\u503c\u8868\u793a \u5e38\u8bc6\u9700\u8c28\u8bb0 \u6574\u6570\u90e8\u5206\u7684\u8f6c\u6362\uff1a1\u30012\u30014\u30018\u300116\u300132\u300164\u3001128\u3001256\u3001512\u30011024\u30012048\u30014096\u30018192\u300116384\u300132768\u300165536 \u5c0f\u6570\u90e8\u5206\u7684\u8f6c\u6362\uff1a0.5\u30010.25\u30010.125\u30010.0625 k\u8fdb\u5236\u8f6c10\u8fdb\u5236 \u6309\u6743\u5c55\u5f00 \u7f16\u7801\uff1a\u8ba1\u7b97\u673a\u5185\u7684\u6570\u503c\u8868\u793a \u9700\u8003\u8651\u7684\u95ee\u9898\uff1a\u7f16\u7801\u7684\u957f\u5ea6\uff1b\u6570\u7684\u7b26\u53f7\uff1b\u6570\u7684\u8fd0\u7b97 a-2 \u3010\u975e\u6570\u503c\u6570\u636e\u3011\u975e\u6570\u503c\u6570\u636e\u7684\u7f16\u7801\u8868\u793a \u00b6 \u903b\u8f91\u6570\u636e\u7684\u7f16\u7801\u8868\u793a \u897f\u6587\u5b57\u7b26\u7684\u7f16\u7801\u8868\u793a \u5e38\u7528\u7f16\u7801\u4e3a7\u4f4dASCII\u7801 \u6570\u5b57\u3001\u5b57\u6bcd\u3001\u7a7a\u683c\u3001\u56de\u8f66\u3001\u6362\u884c \u6c49\u5b57\u53ca\u56fd\u9645\u5b57\u7b26\u7684\u7f16\u7801\u8868\u793a \u7f16\u7801\u5f62\u5f0f \u8f93\u5165\u7801 \u5185\u7801 \u5b57\u6a21\u70b9\u9635\u6216\u8f6e\u5ed3\u63cf\u8ff0 GB2312-80\u5b57\u7b26\u96c6 \u591a\u5a92\u4f53\u4fe1\u606f\u7684\u8868\u793a \u591a\u5a92\u4f53\u4fe1\u606f\u7528\u4e00\u4e2a\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\u6765\u63cf\u8ff0\uff0c\u5176\u4e2d\u7684\u57fa\u672c\u6570\u636e\u6216\u8005\u662f\u6570\u503c\u6570\u636e\uff0c\u6216\u8005\u662f\u75280/1\u7f16\u7801\u7684\u975e\u6570\u503c\u6570\u636e a-3 \u6570\u636e\u5bbd\u5ea6\u548c\u5b58\u50a8\u5bb9\u91cf\u7684\u5355\u4f4d \u00b6 \u6570\u636e\u7684\u57fa\u672c\u5bbd\u5ea6 \u4f4d / \u6bd4\u7279bit \u5b57\u8282 a-4 \u6570\u636e\u5b58\u50a8\u65f6\u7684\u5b57\u8282\u6392\u5217 \u00b6 \u53d8\u91cf\u7684\u5730\u5740\u662f\u5176 \u6700\u5c0f\u5730\u5740 \uff0c\u5373\u82e5int\u578b\u53d8\u91cfx\u7684\u5b58\u653e\u5730\u5740\u662f100\uff0c\u5219\u8868\u793ax\u5b58\u653e\u5728100#~103# \u6709\u591a\u4e2a\u5b57\u8282\u7684\u5b57(word)\uff0c\u5176\u5404\u4e2a\u5b57\u8282\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u653e\u7684\u987a\u5e8f \u5927\u7aef\u5e8f/\u5927\u5c3e\u5e8f Big Endian\uff1aLSB\u7684\u5b57\u8282\u5730\u5740\u6700\u9ad8\uff0cMIPS / Sun / PPC Mac / Internet \u5c0f\u7aef\u5e8f/\u5c0f\u5c3e\u5e8f Little Endian\uff1aLSB\u7684\u5b57\u8282\u5730\u5740\u6700\u4f4e\uff0cIntel 80x86 / \u8fd0\u884cAndroid \u7684ARM \u5904\u7406\u5668 / iOS / Windows \u53cc\u7aef\u5e8f Bi-Endian a-5 \u8fd0\u7b97\u7535\u8def\u57fa\u7840\u3010\u4e0d\u5728\u8003\u70b9\u5185 \u4e14 \u5de5\u5927ppt\u672a\u8bb2\u3011 \u00b6 \u6570\u5b57\u903b\u8f91\u7535\u8def\u57fa\u7840 + \u4eceC\u8868\u8fbe\u5f0f\u5230\u903b\u8f91\u7535\u8def + C\u8bed\u8a00\u4e2d\u7684\u5404\u7c7b\u8fd0\u7b97 #### \u6570\u5b57\u903b\u8f91\u7535\u8def\u57fa\u7840 \u4f4d\u7ea7\u8fd0\u7b97\uff1a\u5e03\u5c14\u4ee3\u6570 #### \u4eceC\u8868\u8fbe\u5f0f(\u9ad8\u7ea7\u8bed\u8a00)\u5230\u903b\u8f91\u7535\u8def #### C\u8bed\u8a00\u4e2d\u7684\u5404\u7c7b\u8fd0\u7b97 - \u4f4d\u7ea7\u8fd0\u7b97 - \u79fb\u4f4d\u8ba1\u7b97 - \u903b\u8f91\u8fd0\u7b97 - \u5f02\u6216 - \u4f4d\u6269\u5c55\u548c\u4f4d\u622a\u65ad b. \u3010\u6570\u503c\u6570\u636e\u3011\u6574\u6570\u7684\u8868\u793a\u4e0e\u8fd0\u7b97 \u00b6 b-1 \u5b9a\u70b9\u6570\u7684\u7f16\u7801-\u673a\u5668\u6570\u3001\u539f\u7801\u3001\u53cd\u7801\u3001\u8865\u7801\u3001\u79fb\u7801\u7684\u533a\u522b\u4ee5\u53ca\u8054\u7cfb \u00b6 \u673a\u5668\u6570 \u6982\u5ff5\uff1a\u75280\u548c1\u7f16\u7801\u7684\u8ba1\u7b97\u673a\u5185\u90e8\u76840/1\u5e8f\u5217 \u771f\u503c\uff1a\u771f\u6b63\u7684\u503c\uff0c\u5373\u73b0\u5b9e\u4e2d\u5e26\u6b63\u8d1f\u53f7\u7684\u6570 \u6570\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u8868\u793a\u5f62\u5f0f / \u673a\u5668\u80fd\u8bc6\u522b\u7684\u5f62\u5f0f \u5e26\u7b26\u53f7 \uff1a\u6700\u9ad8\u4f4d0\u8868\u793a\u975e\u8d1f\u6570\uff0c1\u8868\u793a\u8d1f\u6570 \u4f8b\u5b50\uff1a\u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u52191\u8868\u793a\u4e3a[00000001]\uff0c-1\u8868\u793a\u4e3a[10000001]\uff0c\u5176\u4e2d00000001\u548c10000001\u662f\u673a\u5668\u6570 \u539f\u7801 Sign and Magnitude \u5c31\u662f\u673a\u5668\u6570 \u7b26\u53f7(\u6700\u9ad8\u4f4d)+\u7edd\u5bf9\u503c \u6574\u6570\u91c7\u7528 \u8865\u7801 \u8868\u793a\uff0c\u6d6e\u70b9\u6570\u7684\u5c3e\u6570\u7528 \u539f\u7801\u5b9a\u70b9\u5c0f\u6570 \u8868\u793a \u53cd\u7801 \u8868\u793a \u6b63\u6570\u7684\u53cd\u7801\u662f\u5176\u672c\u8eab \u8d1f\u6570\u7684\u53cd\u7801\u662f\u7b26\u53f7\u4f4d\u4e0d\u53d8\uff0c\u5176\u4ed6\u4f4d\u53d6\u53cd \u4f8b\u5b50 \u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u5219[+1]=[00000001]\u539f=[00000001]\u53cd\uff1b[-1]=[10000001]\u539f=[11111110]\u53cd \u8865\u7801 \u6a21\u8fd0\u7b97 [X]\u8865 = 2^n + X ( -2^n \\leq X < 2^n, mod 2^n) [X]\u8865 = 2^n + X ( -2^n \\leq X < 2^n, mod 2^n) \u8868\u793a \u6b63\u6570\u7684\u8865\u7801\u662f\u5176\u672c\u8eab \u8d1f\u6570\u7684\u8865\u7801\u5728\u53cd\u7801\u7684\u57fa\u7840\u4e0a+1 \u8d1f\u6570\u7684\u8865\u7801 = \u5c06\u5176 \u5bf9\u5e94\u6b63\u6570\u7684\u8865\u7801 \u5404\u4f4d\u53d6\u53cd\u3001\u672b\u4f4d\u52a0\u4e00 \u8d1f\u6570\u7684\u8865\u7801 = \u5176\u5bf9\u5e94\u7684\u6b63\u6570\u7684\u8865\u7801\uff0c\u4ece\u53f3\u5411\u5de6\u9047\u5230\u7684\u7b2c\u4e00\u4e2a1\u7684\u524d\u9762\u5404\u4f4d\u53d6\u53cd \u5176\u5b9e\u4e5f\u662f \u8d1f\u6570A[\u8865]=\u6a21-\u7edd\u5bf9\u503c(A) \u5bf9\u4e8e\u67d0\u4e00\u786e\u5b9a\u7684\u6a21\uff0c\u67d0\u6570\u51cf\u53bb\u5c0f\u4e8e\u6a21\u7684\u53e6\u4e00\u6570\uff0c\u603b\u53ef\u4ee5\u7528\u8be5\u6570\u52a0\u4e0a\u53e6\u4e00\u6570\u8d1f\u6570\u7684\u8865\u7801\u6765\u4ee3\u66ff - \u52a0\u6cd5\u4ee3\u66ff\u51cf\u6cd5 \u4f8b\u5b50 \u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u5219[+1]=[00000001]=[00000001]\u539f=[00000001]\u53cd=[00000001]\u8865\uff1b[-1]=[10000001]\u539f=[11111110]\u53cd=[11111111]\u8865 \u6c42\u7279\u6b8a\u6570\u7684\u8865\u7801 \u5047\u5b9a\u673a\u5668\u6570\u6709n\u4f4d [-2^{(n-1)}]\u8865 = 2^n - 2^{(n-1)} = 10...0(n-1\u4e2a0) (mod 2^n) [-2^{(n-1)}]\u8865 = 2^n - 2^{(n-1)} = 10...0(n-1\u4e2a0) (mod 2^n) [-1]\u8865 = 2^n - 0...01 = 11...1(n\u4e2a1) (mod 2^n) [-1]\u8865 = 2^n - 0...01 = 11...1(n\u4e2a1) (mod 2^n) [+0]\u8865 = [-0]\u8865 = 00...0(n\u4e2a0) [+0]\u8865 = [-0]\u8865 = 00...0(n\u4e2a0) \u51fa\u73b0\u65f6\u671f\uff1a\u539f\u7801 < \u53cd\u7801 < \u8865\u7801 \u6709\u4e86\u539f\u7801\u4e3a\u4ec0\u4e48\u8fd8\u51fa\u73b0\u4e86\u53cd\u7801\uff1f \u8ba1\u7b97\u673a\u8fa8\u522b\u548c\u5904\u7406\u7b26\u53f7\u4f4d\u56f0\u96be\uff0c\u4e0d\u5229\u4e8e\u786c\u4ef6\u8bbe\u8ba1 \u4f7f\u7528\u539f\u7801\u52a0\u51cf\u8fd0\u7b97\u65b9\u5f0f\u4e0d\u7edf\u4e00(\u7279\u522b\u5f53a<b\u65f6\uff0c\u5b9e\u73b0a-b\u6bd4\u8f83\u56f0\u96be)\uff0c\u4e14\u9700\u8981\u989d\u5916\u5bf9\u7b26\u53f7\u4f4d\u8fdb\u884c\u5904\u7406(\u540c\u53f7\u6570\u76f8\u51cf\u548c\u5f02\u53f7\u6570\u76f8\u52a0\u65f6\u9700\u8981\u5224\u65ad\u7edd\u5bf9\u503c\u5927\u5c0f\u548c\u6700\u7ec8\u7b26\u53f7) \u8ba1\u7b97\u673a\u53ea\u9700\u8981\u5b9e\u73b0\u52a0\u6cd5\uff0c\u628a\u51cf\u4e00\u4e2a\u6570\u53d8\u4e3a\u52a0\u4e0a\u8fd9\u4e2a\u6570\u7684\u8d1f\u6570\uff1a1-1=1+(-1)\uff0c\u5373\u8ba9\u7b26\u53f7\u4f4d\u53c2\u4e0e\u8fd0\u7b97 \u6309\u7167\u6b63\u5e38\u7684\u52a0\u6cd5\u89c4\u5219\uff0c\u539f\u7801\u7684\u65b9\u5f0f\u65e0\u6cd5\u5b9e\u73b0\u6b63\u6570\u548c\u8d1f\u6570\u7684\u52a0\u6cd5\uff0c\u4e00\u5957\u7528\u4e8e\u6b63\u6570+\u6b63\u6570\uff0c\u4e00\u5957\u7528\u4e8e\u6b63\u6570+\u8d1f\u6570\uff0c\u5219\u9700\u8981\u4e3a\u52a0\u6cd5\u8fd0\u7b97 \u505a\u4e24\u79cd\u7535\u8def \u539f\u7801\u5b9e\u73b01+(-1)\u7684\u8fc7\u7a0b\u4f1a\u51fa\u73b0\u9519\u8bef 1 1+(-1)=[00000001]\u539f+[10000001]\u539f=[10000010]\u539f\uff0c\u503c\u4e3a-2 \u7528\u53cd\u7801\u8ba1\u7b97\u51cf\u6cd5\uff1a \u53cd\u7801\u5b9e\u73b01+(-1)\u7684\u8fc7\u7a0b\uff0c\u7ed3\u679c\u6b63\u786e 1 2 1+(-1)=[00000001]\u53cd+[11111110]\u53cd=[11111111]\u53cd=[10000000]\u539f=-0(\u8d85\u8fc7\u7684\u90e8\u5206\u622a\u65ad\uff0c\u53cd\u7801\u9700\u8981\u5316\u6210\u539f\u7801\u624d\u80fd\u77e5\u9053\u5177\u4f53\u7684\u503c) 2+(-1)=[00000010]\u53cd+[11111110]\u53cd=[00000000]\u53cd=[00000000]\u539f=0(\u7528\u8865\u7801\u53ef\u4ee5\u89e3\u51b3) \u89e3\u51b3\u4e86\u539f\u7801\u7684\u90e8\u5206\u52a0\u6cd5\u95ee\u9898\uff0c\u6709\u4e9b\u4f7f\u7528\u53cd\u7801\u7684\u52a0\u6cd5\u4e5f\u4e0d\u6210\u7acb\uff0c\u53cd\u7801\u53ea\u662f\u4e3a\u4e86\u8fc7\u6e21\u5f15\u51fa\u8865\u7801(\u662f\u4e00\u4e2a\u53d1\u73b0\u95ee\u9898\u89e3\u51b3\u95ee\u9898\u7684\u8fc7\u7a0b) \u4e3a\u4ec0\u4e48\u4f1a\u51fa\u73b0\u8865\u7801\uff1f \u8865\u7801\u8fd0\u7b97\u7cfb\u7edf\u662f\u6a21\u8fd0\u7b97\u7cfb\u7edf\uff0c\u89e3\u51b3\u4e86\u539f\u7801\u5e26\u6765\u7684\u52a0\u6cd5\u95ee\u9898\uff0c\u53ef\u4ee5\u5c06\u52a0\u6cd5\u8fd0\u7b97\u89c4\u5219\u6269\u5c55\u5230\u6574\u4e2a\u6574\u6570\u96c6\uff0c\u4ece\u800c \u7528\u4e00\u5957\u7535\u8def\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5168\u90e8\u6574\u6570\u7684\u52a0\u6cd5 \u8865\u7801\u5b9e\u73b01+(-1)\u548c2+(-1)\u7684\u95ee\u9898 1 2 1+(-1)=[00000001]\u8865+[11111111]\u8865=[00000000]\u8865=[00000000]\u539f=0(\u8d85\u8fc7\u7684\u90e8\u5206\u622a\u65ad\uff0c\u8865\u7801\u9700\u8981\u5316\u6210\u539f\u7801\u624d\u80fd\u77e5\u9053\u5177\u4f53\u7684\u503c) 2+(-1)=[00000010]\u8865+[11111111]\u53cd=[00000001]\u8865=[00000001]\u539f=1(\u8865\u7801\u6c42\u539f\u7801\uff1a\u91c7\u7528\u9006\u63a8\u6cd5\uff0c\u5148\u628a\u8865\u7801\u53d8\u4e3a\u53cd\u7801\uff0c\u7136\u540e\u5728\u628a\u53cd\u7801\u53d8\u4e3a\u539f\u7801 / \u6216\u8005\u5bf9\u7ed3\u679c\u6c42\u8865) \u8865\u7801\u7684\u8fd0\u7b97\uff1a \u7b26\u53f7\u4f4d\u4e0e\u6570\u503c\u90e8\u5206\u4e00\u8d77\u53c2\u52a0\u8fd0\u7b97 \u820d\u53bb\u8d85\u51fa\u5b57\u957f\u7684\u8fdb\u4f4d \u7528\u8865\u7801\u8fd0\u7b97\uff0c\u7ed3\u679c\u4e5f\u4e3a\u8865\u7801 \u5728\u8f6c\u6362\u4e3a\u771f\u503c(\u771f\u6b63\u7684\u503c\uff0c\u5e26\u7b26\u53f7)\u65f6\uff0c\u82e5\u7b26\u53f7\u4f4d\u4e3a0\uff0c\u6570\u4f4d\u4e0d\u53d8\uff1b\u82e5\u7b26\u53f7\u4f4d\u4e3a1\uff0c\u5e94\u5c06\u7ed3\u679c\u6c42\u8865\u624d\u662f\u5176\u771f\u503c \u89e3\u51b3\u4e86+0\u548c-0\u53ca\u5176\u7f16\u7801\u7684\u95ee\u9898(\u4e0d\u5229\u4e8e\u7a0b\u5e8f\u5458\u7f16\u7a0b)\uff0c0\u5e26\u7b26\u53f7\u662f\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\u7684\uff0c \u800c\u4e14\u7528 [0000 0000]\u539f \u548c [1000 0000]\u539f \u4e24\u4e2a\u7f16\u7801\u8868\u793a \u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u8865\u7801\u4e2d\uff1a\u7528 [00000000]\u8865 \u8868\u793a0\uff0c\u7528 [10000000]\u8865 \u8868\u793a-128 1 (-1)+(-127)=[10000001]\u539f+[11111111]\u539f=[11111111]\u8865+[10000001]\u8865=[10000000]\u8865=-128 \u5728\u8be5\u6761\u4ef6\u4e0b\uff0c\u539f\u3001\u53cd\u7801\u7684\u8303\u56f4\u662f-127~127(\u56e0\u4e3a\u7b2c\u4e00\u4f4d\u662f\u7b26\u53f7\u4f4d)\uff0c\u6240\u4ee5-128\u5e76\u6ca1\u6709\u539f\u7801\u548c\u53cd\u7801\u7684\u8868\u793a \u4f7f\u7528\u8865\u7801\uff0c\u53d6\u503c\u8303\u56f4\u6269\u5927\u5230[-128,127]\uff0c\u56e0\u4e3a0\u53ea\u9700\u8981\u4e00\u4e2a\u7f16\u7801\uff0c\u6240\u4ee5\u591a\u51fa\u6765\u4e00\u4e2a\u7f16\u7801\u8868\u793a-128(\u6bd4\u539f\u7801\u591a\u8868\u793a\u4e00\u4e2a\u6700\u5c0f\u8d1f\u6570) \u53d8\u5f62\u8865\u7801(4's complement)\u7684\u8868\u793a \u53d8\u5f62(4's)\u8865\u7801\uff1a\u53cc\u7b26\u53f7\uff0c\u7528\u4e8e\u5b58\u653e\u53ef\u80fd\u6ea2\u51fa\u7684\u4e2d\u95f4\u7ed3\u679c \u79fb\u7801 Excess(biased) notion \u5c06\u6bcf\u4e00\u4e2a\u6570\u503c\u52a0\u4e0a\u4e00\u4e2a\u504f\u7f6e\u5e38\u6570(Excess / bias) \u5f53\u7f16\u7801\u4f4d\u6570\u4e3an\u65f6\uff0cbias\u53d6 2^{(n-1)} 2^{(n-1)} \u6216 2^{(n-1)}-1 2^{(n-1)}-1 (\u5982IEEE 754) \u5f53bias\u4e3a 2^{(n-1)} 2^{(n-1)} \u65f6\uff0c\u79fb\u7801\u548c\u8865\u7801\u4ec5\u7b2c\u4e00\u4f4d\u4e0d\u540c \u79fb\u7801\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u6307\u6570(\u9636\u7801)\uff0c\u539f\u56e0\u662f\u4fbf\u4e8e\u6d6e\u70b9\u6570\u52a0\u51cf\u8fd0\u7b97\u65f6\u7684\u5bf9\u9636\u64cd\u4f5c(\u6bd4\u8f83\u5927\u5c0f-\u9700\u8981\u5c06\u9636\u7edf\u4e00) \u5047\u8bbe\u4e00\u4e2a\u9636\u4e3a\u8d1f\u6570\uff0c\u4e00\u4e2a\u9636\u4e3a\u6b63\u6570\uff0c\u901a\u8fc7\u79fb\u7801\u5c06\u4e24\u8005\u63a7\u5236\u5728\u6b63\u6570\u8303\u56f4\u8fdb\u884c\u6bd4\u8f83\u66f4\u65b9\u4fbf \u53c2\u8003\u8d44\u6599 - http://www.ruanyifeng.com/blog/2009/08/twos_complement.html - https://blog.csdn.net/ch717828/article/details/103315407 - \u6982\u5ff5\u89e3\u6790 - https://blog.csdn.net/zl10086111/article/details/80907428 - \u7528\u949f\u8868\u7c7b\u6bd4\u53cd\u7801\u548c\u8865\u7801\u4e3a\u4ec0\u4e48\u6210\u7acb\u7684\u539f\u7406 - :rainbow:\u7406\u89e3\u4e0a\u9762\u90a3\u4e00\u6bb5\u5df2\u7ecf\u80fd\u57fa\u672c\u89e3\u51b3\u6211\u7684\u95ee\u9898\uff0c\u4ee5\u4e0b\u53c2\u8003\u4f5c\u4e3a\u50a8\u5907\uff0c\u592a\u56f0\u4e86\uff0c\u9003\u03b5=\u03b5=\u03b5=\u250f(\u309c\u30ed\u309c;)\u251b - https://www.zhihu.com/question/20159860 - \u539f\u7801\u3001\u53cd\u7801\u3001\u8865\u7801\u7684\u4ea7\u751f\u3001\u5e94\u7528\u4ee5\u53ca\u4f18\u7f3a\u70b9\u6709\u54ea\u4e9b\uff1f - https://www.zhihu.com/question/352057791/answer/882175484 - https://www.jianshu.com/p/ffc97c4d2306 b-2 \u5e26\u7b26\u53f7\u6574\u6570/\u65e0\u7b26\u53f7\u6574\u6570 \u00b6 \u65e0\u7b26\u53f7\u6574\u6570Unsigned integer \u673a\u5668\u4e2d\u5b57\u7684\u4f4d\u6392\u5e8f2\u79cd \u6ca1\u6709\u7b26\u53f7\u4f4d \u80fd\u8868\u793a\u7684\u6700\u5927\u503c\u5927\u4e8e\u4f4d\u6570\u76f8\u540c\u7684\u5e26\u7b26\u53f7\u6574\u6570\u7684\u6700\u5927\u503c C\u8bed\u8a00\uff1a\u5728\u6570\u540e\u9762\u52a0\u4e00\u4e2au\u6216\u8005U\uff0cunsigned int/short/long \u5e26\u7b26\u53f7\u6574\u6570Signed integer MSB\u8868\u793a\u6570\u7b26 \u4e09\u79cd\u5b9a\u70b9\u7f16\u7801\u65b9\u5f0f \u539f\u7801\uff1a\u5b9a\u70b9\u5c0f\u6570\uff0c\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u5c3e\u6570 \u79fb\u7801\uff1a\u5b9a\u70b9\u6574\u6570\uff0c\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u9636(\u6307\u6570) \u8865\u7801\uff1a50\u5e74\u4ee3\u4ee5\u6765\uff0c\u6240\u6709\u7684\u8ba1\u7b97\u673a\u90fd\u7528\u8865\u7801\u6765\u8868\u793a\u5e26\u7b26\u53f7\u6574\u6570 C\u8bed\u8a00\uff1aint/short/long\uff1b\u540c\u65f6\u6709\u65e0\u7b26\u53f7\u6570\u548c\u5e26\u7b26\u53f7\u6570\uff0c\u5f3a\u5236\u5c06\u5e26\u7b26\u53f7\u6574\u6570\u8f6c\u6362\u4e3a\u65e0\u7b26\u53f7\u6574\u6570 C\u8bed\u8a00\u4e2dC90\u548cC99\u7684\u533a\u522b \u6709\u7b26\u53f7\u6570\u548c\u65e0\u7b26\u53f7\u6570\u300c\u8f6c\u6362\u300d\u7684\u57fa\u672c\u539f\u5219 \u00b6 \u4f4d\u6a21\u5f0f\u4e0d\u53d8 \u91cd\u65b0\u89e3\u8bfb\uff08\u6309\u76ee\u6807\u7f16\u7801\u7c7b\u578b\u7684\u89c4\u5219\u89e3\u8bfb\uff09 \u4f1a\u6709\u610f\u5916\u526f\u4f5c\u7528: \u6570\u503c\u88ab \\pm 2^{w} \\pm 2^{w} \u8868\u8fbe\u5f0f\u542b\u65e0\u7b26\u53f7\u6570\u548c\u6709\u7b26\u53f7\u6570\u65f6 \u6709\u7b26\u53f7\u6570\u88ab\u8f6c\u6362\u6210\u65e0\u7b26\u53f7\u6570\uff08\u5982int\u8f6c\u6210unsigned int\uff09 \u6709\u7b26\u53f7\u6570\u548c\u65e0\u7b26\u53f7\u6570\u300c\u6269\u5c55\u3001\u622a\u65ad\u300d\u7684\u57fa\u672c\u539f\u5219 \u00b6 \u6269\u5c55(\u4f8b\u5982\u4eceshort int\u5230int\u7684\u8f6c\u6362) - \u65e0\u7b26\u53f7\u6570: \u586b\u51450 - \u6709\u7b26\u53f7\u6570:\u7b26\u53f7\u6269\u5c55 - \u7ed3\u679c\u90fd\u662f\u660e\u786e\u7684\u9884\u671f\u503c \u622a\u65ad(\u4f8b\u5982\u4eceunsigned \u5230unsigned short\u7684\u8f6c\u6362) - \u65e0\u8bba\u6709/\u65e0\u7b26\u53f7\u6570:\u591a\u51fa\u7684\u4f4d\u5747\u88ab\u622a\u65ad - \u7ed3\u679c\u91cd\u65b0\u89e3\u8bfb - \u65e0\u7b26\u53f7\u6570: \u76f8\u5f53\u4e8e\u6c42\u6a21\u8fd0\u7b97 - \u6709\u7b26\u53f7\u6570: \u4e0e\u6c42\u6a21\u8fd0\u7b97\u76f8\u4f3c - \u6709\u7b26\u53f7\u6570\u622a\u65ad\u4ee5\u540e\uff0c\u6700\u9ad8\u4f4d\u8981\u8f6c\u6362\u4e3a\u7b26\u53f7\u4f4d - \u5bf9\u4e8e\u5c0f\u6574\u6570\uff0c\u7ed3\u679c\u662f\u660e\u786e\u7684\u9884\u671f\u503c b-3 \u6574\u6570\u7684\u52a0\u51cf\u8fd0\u7b97 \u00b6 \u6307\u9488\u3001\u5730\u5740\u7b49\u901a\u5e38\u88ab\u8bf4\u660e\u4e3a\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u56e0\u800c\u5728\u8fdb\u884c\u6307\u9488\u6216\u5730\u5740\u8fd0\u7b97\u65f6\uff0c\u9700\u8981\u8fdb\u884c\u65e0\u7b26\u53f7\u6574\u6570\u7684\u52a0\u51cf\u8fd0\u7b97 \u8fd0\u7b97\u7535\u8def\u79f0\u4e3a\uff1a\u6574\u6570\u52a0\u51cf\u8fd0\u7b97\u90e8\u4ef6\uff0c\u57fa\u4e8e \u5e26\u6807\u5fd7\u52a0\u6cd5\u5668 \u5b9e\u73b0 \u8ba1\u7b97\u673a\u4e2d\u7684\u52a0\u6cd5\u5668\uff0c\u53ea\u6709n\u4f4d\uff0c\u6240\u4ee5\u662f\u4e00\u79cd n^2 n^2 \u8fd0\u7b97\u7cfb\u7edf \u8865\u7801\u52a0\u51cf\u8fd0\u7b97\u5668 \u00b6 \u8865\u7801\u52a0\u51cf\u8fd0\u7b97\u516c\u5f0f [A+B]\u8865 = [A]\u8865 + [B]\u8865 (mod 2^n) [A+B]\u8865 = [A]\u8865 + [B]\u8865 (mod 2^n) [A-B]\u8865 = [A]\u8865 + [-B]\u8865 (mod 2^n) [A-B]\u8865 = [A]\u8865 + [-B]\u8865 (mod 2^n) \u52a0\u51cf\u6cd5\u8fd0\u7b97\u7edf\u4e00\u91c7\u7528\u52a0\u6cd5 \u5b9e\u73b0\u51cf\u6cd5\u4e3b\u8981\u5728\u4e8e\u6c42 [-B]\u8865 = \\overline{B} + 1 [-B]\u8865 = \\overline{B} + 1 \u7b26\u53f7\u4f4d(\u6700\u9ad8\u6709\u6548\u4f4dMSB)\u548c\u6570\u503c\u4f4d\u4e00\u8d77\u53c2\u4e0e\u8fd0\u7b97 \u76f4\u63a5\u7528Adder\u5b9e\u73b0\u4e24\u4e2a\u6570\u7684\u52a0\u8fd0\u7b97 \u91c7\u7528\u6a21\u8fd0\u7b97\u7cfb\u7edf\uff1a\u5c06\u8fd0\u7b97\u7ed3\u679c\u9ad8\u4f4d\u4e22\u5f03\uff0c\u4fdd\u7559\u4f4en\u4f4d\uff0c\u76f8\u5f53\u4e8e\u53d6\u6a21 2^n 2^n \u6240\u6709\u8fd0\u7b97\u7535\u8def\u7684\u6838\u5fc3 \u8ba1\u7b97\u673a\u4e2d\u6240\u6709\u8fd0\u7b97\u90fd\u57fa\u4e8e\u52a0\u6cd5\u5668\u5b9e\u73b0 \u52a0\u6cd5\u5668\u4e0d\u77e5\u9053\u6240\u8fd0\u7b97\u7684\u662f\u65e0\u7b26\u53f7\u6570\u8fd8\u662f\u5e26\u7b26\u53f7\u6570\uff0c\u53ea\u8ba401\u5e8f\u5217 \u52a0\u6cd5\u5668\u4e0d\u5224\u5b9a\u5bf9\u9519\uff0c\u603b\u662f\u53d6\u4f4en\u4f4d\u4f5c\u4e3a\u7ed3\u679csum\uff0c\u5e76\u751f\u6210\u6761\u4ef6\u6807\u5fd7(Flag)\u4fe1\u606f [ \u6761\u4ef6\u6807\u5fd7\u4f4d / \u6761\u4ef6\u7801CC ] ZF \uff1a\u96f6\u6807\u5fd7\uff0c\u82e5sum\u4f4d0\uff0c\u52191\uff0c\u5426\u52190 OF \uff1a\u6ea2\u51fa\u6807\u5fd7\uff0c\u82e5A\u4e0eB\u2019\u540c\u53f7\u4f46\u4e0esum\u4e0d\u540c\u53f7\uff0c\u52191\uff0c\u5426\u52190 CF \uff1a\u505a\u52a0\u8fd0\u7b97\u65f6\uff0cCF\u8868\u793a\u8fdb\u4f4d\uff1b\u505a\u51cf\u8fd0\u7b97\u65f6\uff0cCF\u8868\u793a\u501f\u4f4d\u3002\u82e5\u5728\u52a0\u6cd5\u4e2d\u6709\u8fdb\u4f4d\uff0c\u5219Cout=1\u800cSub=0\uff1b\u82e5\u5728\u51cf\u6cd5\u4e2d\u6709\u501f\u4f4d\uff0c\u5219Cout=0\u800cSub=1 SF \uff1a\u7b26\u53f7\u6807\u5fd7\uff0csum\u7684\u7b26\u53f7 \u751f\u6210\u5e76\u4fdd\u5b58\u6761\u4ef6\u6807\u5fd7\u662f\u4e3a\u4e86\u5728 \u5206\u652f\u6307\u4ee4(\u6761\u4ef6\u8f6c\u79fb\u6307\u4ee4) \u4e2d\u88ab\u7528\u4f5c\u662f\u5426\u8f6c\u79fb\u6267\u884c\u7684\u6761\u4ef6 \u6761\u4ef6\u6807\u5fd7\u5728\u8fd0\u7b97\u7535\u8def\u4e2d\u4ea7\u751f\uff0c\u88ab\u8bb0\u5f55\u5230\u4e13\u95e8\u7684\u5bc4\u5b58\u5668\u4e2d\uff0c\u901a\u5e38\u79f0\u4e3a \u7a0b\u5e8f/\u72b6\u6001\u5b57\u5bc4\u5b58\u5668\u6216\u6807\u5fd7\u5bc4\u5b58\u5668 \uff0c\u6bcf\u4e2a\u6807\u5fd7\u5bf9\u5e94\u6807\u5fd7\u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a\u6807\u5fd7\u4f4d\uff0c\u5982IA-32\u4e2d\u7684EFLAGS\u5bc4\u5b58\u5668 n\u4f4d\u5e26\u6807\u5fd7\u52a0\u6cd5\u5668 \u4e3a\u4ec0\u4e48\u65e0\u6cd5\u5224\u65ad\u6ea2\u51fa\uff1f \u4e3a\u4ec0\u4e48cin\u662fsub\uff1f \u6574\u6570\u52a0\u6cd5\u4e3e\u4f8b \u6574\u6570\u51cf\u6cd5\u4e3e\u4f8b \u65e0\u7b26\u53f7\u6574\u6570\u52a0\u6cd5\u6ea2\u51fa\u5224\u65ad\u7a0b\u5e8f \u53d1\u751f\u6ea2\u51fa\u65f6\uff0c\u4e00\u5b9a\u6ee1\u8db3 result<x && result<y \uff0c\u5426\u5219\u82e5 x+y-2^n \u2265 x\uff0c\u5219y\u22652^n x+y-2^n \u2265 x\uff0c\u5219y\u22652^n \uff0c\u4e0d\u53ef\u80fd 1 2 3 4 int uadd_ok ( unsigned x , unsigned y ){ unsigned sum = x + y ; return sum >= x ; } \u5e26\u7b26\u53f7\u6574\u6570\u52a0\u6cd5\u6ea2\u51fa\u5224\u65ad\u7a0b\u5e8f 1 2 3 4 5 6 7 int tadd_ok ( int x , int y ) { int sum = x + y ; int neg_over = x < 0 && y < 0 && sum >= 0 ; int pos_over = x >= 0 && y >= 0 && sum < 0 ; return ! neg_over && ! pos_over ; } \u65e0\u7b26\u53f7\u51cf\u7684\u6ea2\u51fa\u5224\u65ad\u51fd\u6570 \u5e26\u7b26\u53f7\u51cf\u7684\u6ea2\u51fa\u5224\u65ad\u51fd\u6570 1 2 3 4 5 6 7 8 9 10 11 /* WARNING: This code is buggy.\u3000*/ int tsub_ok ( int x , int y ){ return tadd + ok ( x , - y ); } // \u5f53x=0\uff0cy=0x80000000\u65f6\uff0c\u8be5\u51fd\u6570\u5224\u65ad\u5931\u8bef // \u56e0\u4e3a y = -2^(31) // 0 - [-2^(31) ] = 2 ^ (31) \u6ee1\u8db3\u6b63\u6ea2\u51fa\u7684\u6761\u4ef6 // \u4f46\u662f\u5982\u679cx\u548cy\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165tadd_ok\u51fd\u6570\u4e2d\u65f6 // y\u7ecf\u8fc7\u53d6\uff0d\u4e4b\u540e \u4ecd\u7136\u4e3a -2^(31) // \u6240\u4ee5 x \u548c -y\u76f8\u52a0\u7684\u65f6\u5019\uff0c\u662f\u4e24\u4e2a\u5f02\u53f7\u6570\u76f8\u52a0\uff0c\u4e0d\u4f1a\u5224\u65ad\u4e3a\u6ea2\u51fa \u5982\u4f55\u6539\u8fdb\u5462\uff1f b-4 \u6574\u6570\u4e58\u6cd5\u8fd0\u7b97 \u00b6 \u6574\u6570\u4e58\u6cd5\u8fd0\u7b97 \u9ad8\u7ea7\u8bed\u8a00\u4e2d\u4e24\u4e2an\u4f4d\u6574\u6570\u76f8\u4e58\u5f97\u5230\u7684\u7ed3\u679c\u901a\u5e38\u4e5f\u662f\u4e00\u4e2an\u4f4d\u6574\u6570(\u53d6\u4f4en\u4f4d) \u4ee5\u4e0b\u662f\u81ea\u5df1\u603b\u7ed3\u7684\u7528\u4e8c\u8fdb\u5236\u65b9\u6cd5\u8ba1\u7b97\u4e58\u6cd5\u4e5f\u4e0d\u77e5\u9053\u5bf9\u4e0d\u5bf9 \u65e0\u7b26\u53f7\u4e58\u6cd5\uff1a\u6b63\u5e38\u5341\u8fdb\u5236\u4e58\u6cd5\uff0c\u5f53\u8d85\u957f\u5219\u622a\u65ad \u5e26\u7b26\u53f7\u4e58\u6cd5 \u8d85\u957f\uff0c\u622a\u65ad \u4e0d\u591f\u957f\uff0c\u9700\u8fdb\u884c\u7b26\u53f7\u6269\u5c55\uff0c\u7b26\u53f7\u901a\u8fc7\u4e00\u5f00\u59cb\u7ed9\u7684\u4e24\u4e2a\u6570\u503c\u8fdb\u884c\u5224\u65ad \u9ad8\u7ea7\u8bed\u8a00\u4e2d\uff0c\u7a0b\u5e8f\u5458\u5224\u65ad\u8fd4\u56de\u503cz\u662f\u6b63\u786e\u7684\u8bed\u53e5 !x || z / x == y 1 2 3 4 int mul ( int x , int y ){ int z = x * y ; return z ; } \u5728\u7f16\u8bd1\u5668\u5c42\u9762\uff0c\u5f53 -2{n-1} \\leq x*y \\le 2{n-1} (\u4e0d\u6ea2\u51fa) -2{n-1} \\leq x*y \\le 2{n-1} (\u4e0d\u6ea2\u51fa) \u4e58\u79ef\u662f\u6b63\u786e\u5224\u65ad\u65b9\u5f0f\u4e3a \u65e0\u7b26\u53f7\uff1a\u4e58\u79ef\u7684\u9ad8n\u4f4d\u4e3a\u51680\uff0c\u5219\u4e0d\u6ea2\u51fa \u6709\u7b26\u53f7\uff1a\u4e58\u79ef\u7684\u9ad8n\u4f4d\u4e3a\u51680\u6216\u51681\u5e76\u7b49\u4e8e\u4f4en\u4f4d\u7684\u6700\u9ad8\u4f4d / \u5373\u4e58\u79ef\u7684\u9ad8n+1\u4f4d\u4e3a\u51680\u6216\u51681 \u786c\u4ef6 \u4e0d\u5224\u65ad \u6ea2\u51fa(\u4e58\u6cd5\u6307\u4ee4\u4e0d\u751f\u6210\u6ea2\u51fa\u6807\u5fd7)\uff0c\u4ec5\u4fdd\u75592n\u4f4d\u4e58\u79ef\uff0c\u4f9b\u8f6f\u4ef6\u4f7f\u7528\u548c\u5224\u65ad\u662f\u5426\u6ea2\u51fa \u6307\u4ee4\uff1a\u5206 \u65e0\u7b26\u53f7 \u6570\u4e58\u6307\u4ee4\u3001 \u5e26\u7b26\u53f7 \u6574\u6570\u4e58\u6307\u4ee4 \u5728\u65e0\u7b26\u53f7\u4e58\u548c\u5e26\u7b26\u53f7\u4e58\u4e2d\uff0c\u5c3d\u7ba1\u4f4d\u7ea7\u8868\u793a\u76f8\u540c\uff0c\u4f46\u662f2n\u4f4d\u7684\u4e58\u79ef\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u8981\u533a\u5206(\u4e0d\u540c\u4e8e\u52a0\u6cd5) \u6574\u6570\u4e58\u6cd5\u6ea2\u51fa\u6f0f\u6d1e 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /*\u590d\u5236\u6570\u7ec4\u5230\u5806\u4e2d\uff0ccount\u4e3a\u6570\u7ec4\u5143\u7d20\u4e2a\u6570*/ int copy_array ( int * array , int count ){ int i ; /*\u5728\u5806\u533a\u7533\u8bf7\u4e00\u5757\u5185\u5b58*/ int * myarray = ( int * ) malloc ( count * sizeof ( int )); if ( myarray == NULL ) return -1 ; for ( i = 0 ; i < count ; i ++ ) myarray [ i ] = array [ i ]; return count ; } // \u5f53\u53c2\u6570count\u5f88\u5927\u65f6\uff0ccount*sizeof(int)\u4f1a\u6ea2\u51fa // count = 2^(30) + 1\u65f6\uff0ccount*sizeof(int) = [ 2^(30) + 1]* 2^2 mod 2^(32) = [ 2^(32) + 4] mod 2^(32) // \u5bfc\u81f4\u7a0b\u5e8f\u4ec5\u4ec5\u53ea\u7ed9\u51fd\u6570\u5206\u914d\u4e864\u4e2a\u5b57\u8282\u7684\u5185\u5b58 // \u5f53\u6570\u7ec4\u590d\u5236\u7684\u65f6\u5019\uff0c\u5806heap\u4e2d\u7684\u5927\u91cf\u6570\u636e\u88ab\u7834\u574f // \u653b\u51fb\u8005\u53ef\u6784\u9020\u7279\u6b8a\u53c2\u6570\u6765\u89e6\u53d1\u6574\u6570\u6ea2\u51fa\uff0c // \u4ee5\u4e00\u6bb5\u9884\u8bbe\u4fe1\u606f\u8986\u76d6\u4e00\u4e2a\u5df2\u5206\u914d\u7684\u5806\u7f13\u51b2\u533a\uff0c // \u9020\u6210\u8fdc\u7a0b\u670d\u52a1\u5668\u5d29\u6e83\u6216\u8005\u6539\u53d8\u5185\u5b58\u6570\u636e\u5e76\u6267\u884c\u4efb\u610f\u4ee3\u7801 \u53d8\u91cf\u4e0e\u5e38\u6570\u4e4b\u95f4\u7684\u4e58\u8fd0\u7b97 \u4e58\u6cd5\u8fd0\u7b97\u6bd4\u79fb\u4f4d\u548c\u52a0\u6cd5\u7b49\u8fd0\u7b97\u6240\u7528\u65f6\u95f4\u957f\uff0c\u7f16\u8bd1\u5668\u5728\u5904\u7406\u53d8\u91cf\u4e0e\u5e38\u6570\u76f8\u4e58\u65f6\uff0c\u5f80\u5f80\u4ee5\u79fb\u4f4d\u3001\u52a0\u6cd5\u3001\u51cf\u6cd5\u7684\u7ec4\u5408\u8fd0\u7b97\u6765\u4ee3\u66ff\u4e58\u6cd5\u8fd0\u7b97\u3002\u5982x*20 = (x << 4) + (x << 2)\uff0c\u56e0\u4e3a20 = 16 + 4 = 2^4 + 2^2\u3002\u5728\u4e58\u79ef\u6ea2\u51fa\u65f6\uff0c\u5229\u7528\u79fb\u4f4d\u548c\u52a0\u51cf\u8fd0\u7b97\u7ec4\u5408\u7684\u65b9\u5f0f\u5f97\u5230\u7684\u7ed3\u679c\u548c\u91c7\u7528\u76f4\u63a5\u76f8\u4e58\u7684\u7ed3\u679c\u662f\u4e00\u6837\u7684 b-5 \u6574\u6570\u9664\u6cd5\u8fd0\u7b97 \u00b6 \u6574\u6570\u7684\u9664\u8fd0\u7b97 \u5bf9\u4e8e\u5e26\u7b26\u53f7\u6574\u6570\uff0cn\u4f4d\u6574\u6570\u9664\u4ee5n\u4f4d\u6574\u6570 - -2^{n-1} / (-1) = 2^{n-1} -2^{n-1} / (-1) = 2^{n-1} \u4f1a\u53d1\u751f\u6ea2\u51fa\uff0c\u56e0\u4e3a\u5047\u8bbe\u572832\u4f4d\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5927\u80fd\u8868\u793a\u7684\u6574\u6570\u662f 2^{31}-1 2^{31}-1 - \u5176\u4f59\u60c5\u51b5\u4e0d\u4f1a\u53d1\u751f\u6ea2\u51fa\uff0c\u56e0\u4e3a\u5546\u7684\u7edd\u5bf9\u503c\u4e0d\u53ef\u80fd\u6bd4\u88ab\u9664\u6570\u7684\u7edd\u5bf9\u503c\u5927 - \u56e0\u4e3a\u6574\u6570\u9664\u6cd5\u7684\u5546\u4e5f\u662f\u6574\u6570\uff0c\u6240\u4ee5\u5728\u4e0d\u80fd\u6574\u9664\u7684\u65f6\u5019\u901a\u5e38\u6309\u7167\u671d0\u65b9\u5411\u820d\u5165 - \u6b63\u6570\u5546\u53d6\u6bd4\u81ea\u8eab\u5c0f\u7684\u6700\u63a5\u8fd1\u6574\u6570(Floor\uff0c\u5730\u677f) - \u8d1f\u6570\u5546\u53d6\u6bd4\u81ea\u8eab\u5927\u7684\u6700\u63a5\u8fd1\u6574\u6570(Ceiling\uff0c\u5929\u677f) - \u6574\u96640\u7684\u7ed3\u679c\u65e0\u6cd5\u7528\u4e00\u4e2a\u673a\u5668\u6570\u8868\u793a\uff0c\u6240\u4ee5\u5f53\u9664\u6570\u4e3a0\u65f6\uff0c\u4f1a\u53d1\u751f \u5f02\u5e38 \uff0c\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u5904\u7406 - \u672a\u53d1\u751f\u9664\u6cd5\u6ea2\u51fa / \u6d6e\u70b9\u5f02\u5e38 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ```c++ // CASE 1 int a = 0x80000000; int b = a / -1; printf(\"%d\\n\",b); // \u8fd0\u884c\u7ed3\u679c\u4e3a-2147483648 // \u56e0\u4e3a\u9664\u4ee5-1\u88ab\u4f18\u5316\u6210\u53d6\u8d1f\u6307\u4ee4 // \u76f8\u5f53\u4e8e\u628a0x80000000\u53d6\u8d1f\u540e\u7684\u673a\u5668\u7801\u4ecd\u7136\u662f 1000+28\u4e2a0 // \u8d1f\u6570\u5373\u4e3a -2^(31) // \u6545\u672a\u53d1\u751f\u9664\u6cd5\u6ea2\u51fa // CASE 2 int a = 0x80000000; int b = -1; int c = a / b; printf(\"%d\\n\",c); // \u8fd0\u884c\u7ed3\u679c\u4e3a\u201cFloating point exception\u201d\uff0c\u5373CPU\u68c0\u6d4b\u5230\u4e86\u5f02\u5e38 ``` \u53d8\u91cf\u4e0e\u5e38\u6570\u4e4b\u95f4\u7684\u9664\u8fd0\u7b97 \u7531\u4e8e\u8ba1\u7b97\u673a\u4e2d\u9664\u6cd5\u8fd0\u7b97\u6bd4\u8f83\u590d\u6742\uff0c\u800c\u4e14\u4e0d\u80fd\u7528\u6d41\u6c34\u7ebf\u65b9\u5f0f\u5b9e\u73b0\uff0c\u4e14\u9700\u8981\u6bd4\u4e58\u6cd5\u6307\u4ee4\u8fd8\u8981\u957f\u7684\u65f6\u949f\u5468\u671f\u3002\u6240\u4ee5\u7f16\u8bd1\u5668\u5728\u5904\u7406 \u4e00\u4e2a\u53d8\u91cf\u4e0e\u4e00\u4e2a2\u7684\u5e42\u6b21\u5f62\u5f0f\u7684\u6574\u6570\u76f8\u9664 \u65f6\uff0c\u5e38\u91c7\u7528 \u53f3\u79fb\u8fd0\u7b97 (\u65e0\u7b26\u53f7\uff1a\u903b\u8f91\u53f3\u79fb\uff1b\u5e26\u7b26\u53f7\uff1a\u7b97\u672f\u53f3\u79fb)\u6765\u5b9e\u73b0 \u7b97\u672f\u5de6\u3001\u53f3\u79fb\u548c\u903b\u8f91\u5de6\u3001\u53f3\u79fb 1. \u7b97\u672f\u5de6\u79fb < < \uff1a\u4f9d\u6b21\u5de6\u79fb\u4e00\u4f4d\uff0c\u5c3e\u90e8\u88650\uff0c\u6700\u9ad8\u7684\u7b26\u53f7\u4f4d\u4fdd\u6301\u4e0d\u53d8 2. \u7b97\u672f\u53f3\u79fb>>\uff1a\u4f9d\u6b21\u53f3\u79fb\u4e00\u4f4d\uff0c\u5c3e\u90e8\u4e22\u5931\uff0c\u7b26\u53f7\u4f4d\u53f3\u79fb\u540e\uff0c\u539f\u4f4d\u7f6e\u4e0a**\u8865\u7b26\u53f7\u4f4d**\uff0c\u5373\u6b63\u6570\u88650\uff0c\u8d1f\u6570\u88651 > \u7b97\u672f\u8fd0\u7b97 > > 1. \u5de6\u79fb\uff1a\u65e0\u8bba\u6709/\u65e0\u7b26\u53f7\u6570\uff0c\u90fd\u53ef\u4ee5\u7528\u903b\u8f91\u5de6\u79fb\u5b9e\u73b0\u4e58\u4ee5$2^k$ > 2. \u53f3\u79fb\uff1a > - **\u65e0\u7b26\u53f7\u6570\uff1a\u903b\u8f91\u53f3\u79fb**\uff0c\u9664\u4ee5$2^k$\uff08\u9664\u6cd5+\u54110\u820d\u5165\uff09 > - **\u6709\u7b26\u53f7\u6570\uff1a\u7b97\u672f\u53f3\u79fb** > - \u6b63\u6574\u6570:\u9664\u4ee5 $2^k$ (\u9664\u6cd5 + \u54110\u820d\u5165) > - \u8d1f\u6574\u6570:\u9664\u4ee5 $2^k$ (\u9664\u6cd5 + \u82e5\u4e0d\u7ea0\u504f\u5219\u662f\u8fdc\u79bb0\u820d\u5165)\uff0c\u6240\u4ee5\u6700\u540e\u8fd8\u8981\u4f7f\u7528\u504f\u7f6e(+1 < >>\uff1a\u6700\u9ad8\u4f4d\u88650\uff0c\u6700\u4f4e\u4f4d\u4e22\u5931 \u80fd\u6574\u9664\u76f4\u63a5\u53f3\u79fb \u4e0d\u80fd\u6574\u9664\u65f6\uff0c\u5219\u53f3\u79fb\u79fb\u51fa\u7684\u4f4d\u4e2d\u6709\u975e0\uff0c\u91c7\u7528 \u671d\u96f6\u820d\u5165 (\u622a\u65ad) \u65e0\u7b26\u53f7\u6570 \u3001 \u5e26\u7b26\u53f7\u6b63\u6574\u6570 - \u5730\u677f\uff1a\u79fb\u9664\u7684\u4f4e\u4f4d\u76f4\u63a5 \u820d\u5f03 \u5e26\u7b26\u53f7\u8d1f\u6574\u6570 - \u5929\u677f\uff1a\u52a0\u504f\u79fb\u91cf 2^k -1 2^k -1 \uff0c\u7136\u540e\u518d\u53f3\u79fbk\u4f4d\uff0c\u4f4e\u4f4d\u622a\u65ad(k\uff1a\u53f3\u79fb\u4f4d\u6570) \u5b9e\u8df5\u662f\u68c0\u9a8c\u771f\u7406\u7684\u552f\u4e00\u6807\u51c6 \u539f\u7406\u89e3\u6790 \u5982\u679c\u4ec5\u4ec5\u662f\u7b97\u672f\u53f3\u79fb>>\uff0c\u5219\u5f97\u5230 \\lfloor x / 2^k \\rfloor \\lfloor x / 2^k \\rfloor \uff0c\u6240\u4ee5\u662f\u8fdc\u79bb0\u7684\u820d\u5165\u65b9\u5411\uff0c\u4e3a\u4e86\u4f7f\u5f97\u662f\u54110\u65b9\u5411\u7684\u820d\u5165\uff0c\u5219\u6309 \\lceil (x+2^k-1)/2^k \\rceil \\lceil (x+2^k-1)/2^k \\rceil \u8ba1\u7b97\uff0c\u5373 (x + (1 << k ) -1) >> k (x + (1 << k ) -1) >> k \u4e3e\u4f8b\uff1a\u5047\u8bbex\u4e3a\u4e00\u4e2aint\u578b\u53d8\u91cf\uff0c\u8bf7\u7ed9\u51fa\u4e00\u4e2a\u7528\u6765\u8ba1\u7b97x/32\u7684\u503c\u7684\u51fd\u6570div32\u3002\u8981\u6c42\u4e0d\u80fd\u4f7f\u7528\u9664\u6cd5\u3001\u4e58\u6cd5\u3001\u6a21\u8fd0\u7b97\u3001\u6bd4\u8f83\u8fd0\u7b97\u3001\u5faa\u73af\u8bed\u53e5\u548c\u6761\u4ef6\u8bed\u53e5\uff0c\u53ef\u4ee5\u4f7f\u7528\u53f3\u79fb\u3001\u52a0\u6cd5\u4ee5\u53ca\u4efb\u4f55\u6309\u4f4d\u8fd0\u7b97 \u9664\u4ee532\uff0c\u76f8\u5f53\u4e8e\u53f3\u79fb5\u4f4d \u6b63\u6570\u76f4\u63a5\u53f3\u79fb \u8d1f\u6570\u9700\u8981\u52a0\u504f\u79fb\u91cf31 \u8bbe\u504f\u79fb\u91cf\u4e3ab\uff0c\u5219x\u4e3a\u6b63\u65f6\uff0cb=0\uff1bx\u4e3a\u8d1f\u65f6\uff0cb=31\uff0c\u5373(x>=0 ? x : (x+31))>>5 1 2 3 4 5 6 int div32 ( int x ){ /*\u6839\u636ex\u7684\u7b26\u53f7\u5f97\u5230\u504f\u79fb\u91cfb*/ /* 00000000 & 00011111 | 11111111(\u53f3\u79fb\u8865\u7b26\u53f7\u4f4d) & 00011111 */ int b = ( x >> 31 ) & 0x1F ; return ( x + b ) >> 5 ; } c. \u3010\u6570\u503c\u6570\u636e\u3011\u6d6e\u70b9\u6570\u7684\u8868\u793a\u4e0e\u8fd0\u7b97 \u00b6 \u4e3a\u4ec0\u4e48\u9700\u8981\u6d6e\u70b9\u6570\uff1f\u6d6e\u70b9\u6570\u662f\u5982\u4f55\u6d6e\u52a8\u7684\uff1f \u5b9a\u70b9\u6570\u7684\u8303\u56f4\u5b58\u5728\u7f3a\u9677\uff0c\u6bd4\u5982\u6570\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u5927\u90e8\u5206\u4f4d\u90fd\u662f0\uff0c\u5219\u4e0d\u80fd\u5145\u5206\u8fd0\u7528\u5b58\u50a8\u5355\u5143 \u5c0f\u6570\u7684\u5b58\u50a8\u548c\u8ba1\u7b97\u9700\u8981\u8003\u8651\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e\u548c\u5bf9\u9f50\u95ee\u9898 how a point floats? How much memory allocation needs an average point number? For the fixed point number, the computer allocates a fixed amount for fractional part, as for currency where you know how much precision you need, and the other fixed amount of bits for the integral part. If you have small numbers you need more space for the fractional part of the number, and for big numbers you want less for the fractional and more for the integral part. Here comes the floating point ability to float on the needs. A floating-point number sees the both parts as one number, which is put in one chunk of bits, named mantissa, and the rest of bits are for sign and for the exponent. The exponent tells where the floating-point is in this number \u53c2\u8003\u8d44\u6599 - [\u962e\u4e00\u5cf0-\u6d6e\u70b9\u6570\u7684\u4e8c\u8fdb\u5236\u8868\u793a](http://www.ruanyifeng.com/blog/2010/06/ieee_floating-point_representation.html) - what is a floating point number - https://www.zhihu.com/question/19848808 - https://www.quora.com/What-is-a-floating-point-numberhttps://www.webopedia.com/TERM/F/floating_point_number.html - https://stevenpcurtis.medium.com/what-is-a-floating-point-number-6991f2f85a28 - \u9488\u5bf9\u521d\u5b66\u8005\u7406\u89e3 - https://www.webopedia.com/TERM/F/floating_point_number.html c-1 \u6d6e\u70b9\u6570\u7684\u7f16\u7801\u8868\u793a \u00b6 \u5b9e\u6570\u7c7b\u578b\uff1a\u5355\u7cbe\u5ea6\u6d6e\u70b9(C\u8bed\u8a00:32\u4f4d)\u3001\u53cc\u7cbe\u5ea6\u6d6e\u70b9(C\u8bed\u8a00:64\u4f4d)\u3001\u6269\u5c55\u7cbe\u5ea6\u6d6e\u70b9(C\u8bed\u8a00:80/96\u4f4d) \u7c7b\u6bd4\u79d1\u5b66\u8ba1\u6570\u6cd5(Scientific Notation) Normalized \u89c4\u683c\u5316\u5f62\u5f0f - \u552f\u4e00 Unnormalized \u975e\u89c4\u683c\u5316 - \u4e0d\u552f\u4e00 \u4e8c\u8fdb\u5236\u5b9e\u6570 32\u4f4d\u6d6e\u70b9\u6570\u683c\u5f0f\u7684\u89c4\u683c\u5316\u6570\u7684\u8868\u793a \u00b10.1xxx * 2^E 2^E \uff0c\u4f46\u901a\u5e38\u89c4\u5b9a\u89c4\u683c\u5316\u6570\u7684\u5c0f\u6570\u70b9\u524d\u4e3a1\uff0c\u00b11.xxx * R^{Exponent} R^{Exponent} \uff0cR\u662f\u57fa(\u53ef\u4ee5\u662f2/4/8/16\uff0c\u7ea6\u5b9a\u4fe1\u606f\uff0c\u65e0\u9700\u663e\u5f0f\u8868\u793a) \u7b2c0\u4f4d\u6570\u7b26S \u7b2c1~8\u4f4d\u4e3a8\u4f4d\u79fb\u7801\u8868\u793a\u9636\u7801E(\u5047\u8bbe\u4e00\u822c\u7684\u504f\u7f6e\u5e38\u6570\u4e3a128=2^7) \u7b2c9~31\u4f4d\u4e3a24\u4f4d\u4e8c\u8fdb\u5236\u539f\u7801\u5c0f\u6570\u8868\u793a\u7684\u5c3e\u6570M \u539f\u7801\u5177\u6709 \u5bf9\u79f0\u6027 \u56e0\u4e3a\u89c4\u683c\u5316\u5c3e\u6570\u7684\u5c0f\u6570\u70b9\u540e \u7b2c\u4e00\u4f4d\u603b\u662f1 \uff0c\u6545\u89c4\u5b9a\u7b2c\u4e00\u4f4d\u9ed8\u8ba4\u76841\u4e0d\u660e\u663e\u8868\u793a\u51fa\u6765(\u8282\u7701\u5b58\u50a8\u7a7a\u95f4)\uff0c\u8fd9\u6837\u53ef\u752823\u4e2a\u6570\u4f4d\u8868\u793a24\u4f4d\u5c3e\u6570 \u6700\u5927\u6b63\u6570\uff1a 0.11...1 \u00d7 2^{11...1} = [ 1-2^{-24} ] \u00d7 2 ^ {127} 0.11...1 \u00d7 2^{11...1} = [ 1-2^{-24} ] \u00d7 2 ^ {127} \u5c0f\u6570\u70b9\u540e\u9762\u7684\u7b2c\u4e00\u4e2a1\u4e0d\u8868\u793a 8\u4e2a1\uff0c\u537311111111 = 255 = 127 + 128(\u504f\u7f6e\u5e38\u6570) \u3010e = E + Bias / E = e - Bias\u3011\uff0c\u6240\u4ee5\u4e0d\u52a0\u504f\u7f6e\u5e38\u6570\u80fd\u8868\u793a\u7684\u6700\u5927\u6570\u4e3a127 \u6700\u5c0f\u6b63\u6570\uff1a 0.10...0 \u00d7 2^{00...0} = [ 1 / 2 ] \u00d7 2 ^ {-128} 0.10...0 \u00d7 2^{00...0} = [ 1 / 2 ] \u00d7 2 ^ {-128} 8\u4e2a0\uff0c\u537300000000 = 0 = 128 + (-128) \u56e0\u4e3a\u539f\u7801\u5bf9\u79f0\uff0c\u6545\u5176\u8868\u793a\u8303\u56f4\u5173\u4e8e\u539f\u70b9\u5bf9\u79f0 \u673a\u56680\uff1a\u5c3e\u6570\u4e3a0\u6216\u843d\u5728\u4e0b\u6ea2\u533a\u4e2d\u7684\u6570(\u88ab\u820d\u5165) \u6d6e\u70b9\u6570\u8303\u56f4\u6bd4\u5b9a\u70b9\u6570\u5927\uff0c\u4f46\u6570\u7684\u4e2a\u6570\u6ca1\u53d8\u591a(\u56e0\u4e3a32\u4f4d\u7684\u7f16\u7801\uff0c\u7f16\u7801\u4e2a\u6570\u53ea\u80fd\u662f2\u768432\u6b21\u65b9\uff0c\u548c\u6574\u6570)\uff0c\u6545\u6570\u4e4b\u95f4\u66f4\u7a00\u758f\u4e14\u4e0d\u5747\u5300 IEEE 754\u6807\u51c6 Single Precision(\u5355\u7cbe\u5ea6) v = (-1)^s \u00d7 M \u00d7 2^E v = (-1)^s \u00d7 M \u00d7 2^E Sign bit \uff1a1\u8868\u793anegative\uff1b0\u8868\u793apositive Exponent(\u9636\u7801) \u9636\u7801 \u8868\u793a\u9636\u7684\u7f16\u7801\uff0c \u9636\u6216\u6307\u6570 \u8868\u793a\u9636\u7801\u7684\u503c E = Exp - Bias E\u662f\u6700\u521d\u7684\u6307\u6570\u7684\u503c\uff0cBias\u662f\u504f\u7f6e\u5e38\u6570\uff0cExp\u662f\u9636 SP \u89c4\u683c\u5316 \u9636\u7801\u8303\u56f4\u4e3a00000001(-126 = 1-127) ~ 11111110(127 = 254 - 127) \u51680\u548c\u51681\u7528\u6765\u8868\u793a\u7279\u6b8a\u503c bias\u4e3a127(single 2^7-1 2^7-1 )\uff0c1023(double 2^10-1 2^10-1 ) \u4e3a\u4ec0\u4e48bias\u9009\u62e9127\uff1f \u82e5\u7528128\uff0c\u5219\u9636\u7801\u8303\u56f4\u4e3a 00000001(-127)~11111110(126)\uff0c\u5219\u8868\u793a\u5c0f\u6570\u90e8\u5206\u591a\u4e86\u4e00\u4f4d\uff0c\u4f46\u662f\u8868\u793a\u6574\u6570\u90e8\u5206\u5c11\u4e86\u4e00\u4f4d\uff0c\u6240\u4ee5\u5c11\u4e86\u5f88\u591a\u53ef\u8868\u793a\u7684\u8303\u56f4\uff0c\u56e0\u4e3a\u5c0f\u6570\u7684\u4e00\u4f4d\u53d8\u5316\u8303\u56f4\u6bd4\u6574\u6570\u7684\u4e00\u4f4d\u53d8\u5316\u8303\u56f4\u5c11\uff0c\u5982\u7cbe\u5ea6\u75310.1 -> 0.01\uff0c\u591a\u8868\u793a\u4e860.01~0.1\u4e4b\u95f4\u7684\u5c0f\u6570\uff0c\u4f46\u662f\u5982\u679c\u7cbe\u5ea6\u75311 -> 10\uff0c\u5219\u4e0d\u4ec5\u53ef\u4ee5\u8868\u793a\u75311~10\u4e4b\u95f4\u7684\u5c0f\u6570\uff0c\u800c\u4e14\u8fd8\u80fd\u8868\u793a\u4e4b\u95f4\u7684\u5c0f\u6570 ( \u4e2a\u4eba\u60f3\u6cd5\uff0c\u4e5f\u8bb8\u8868\u8ff0\u4e0d\u7cbe\uff0c\u610f\u4f1a\u610f\u601d) Significand(\u90e8\u5206\u5c3e\u6570) \u89c4\u683c\u5316\u5c3e\u6570\u6700\u9ad8\u4f4d\u603b\u662f1\uff0c\u6240\u4ee5\u9690\u542b\u8868\u793a\uff0c\u77011\u4f4d\uff1a1 + 23bits(single)\uff0c1 + 52bits(double) frac = 0...0 (M = 1.0)\u65f6\uff0c\u4e3a\u6700\u5c0f\u503c\uff1bfrac = 1...1(M = 2.0 - \u03b5)\u65f6\uff0c\u4e3a\u6700\u5927\u503c SP: (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 127} (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 127} DP: (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 1023} (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 1023} \u7279\u6b8a\u6570\u7684\u8868\u793a \u503c \u673a\u5668\u6570\u8868\u793a exponent significand sign \u76f8\u5173\u64cd\u4f5c 0 +0: 0 00000000 0~0(23bits) / -0: 1 00000000 0~0(23bits) all zeros all zeros both cases \u00b1 valid +\u221e / -\u221e +\u221e: 0 11111111 0~0(23bits) / -\u221e: 1 11111111 0~0(23bits) all ones(11111111B = 255) all zeros 5.0 / 0 = +\u221e; -5.0 / 0 = -\u221e; 5 + (+\u221e) = +\u221e; (+\u221e) + (+\u221e) = +\u221e; 5 -(+\u221e) = -\u221e; (-\u221e) - (+\u221e) = -\u221e \u975e\u6570 NaN(Not a Number) 255 nonzero sqrt(-4.0)=NaN; 0/0=NaN; op(NaN,x)=NaN; +\u221e+(-\u221e)=NaN; +\u221e-(+\u221e)=NaN; \u221e/\u221e=NaN \u975e\u89c4\u683c\u5316\u6570 Denorms 0 nonzero \u89c4\u683c\u5316\u6570 Norms 1-254(exp\u22600...0\u4e14exp\u22601...1) \u4efb\u610f\u5c0f\u6570\u70b9\u524d\u9690\u542b1 \u6d6e\u70b9\u6570\u96640\u7684\u7ed3\u679c\u662f \u00b1\u221e\uff0c\u800c\u4e0d\u662f\u6ea2\u51fa\u5f02\u5e38(\u6574\u6570\u96640\u4e3a\u5f02\u5e38)\uff0c\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u5229\u7528\u00b1\u221e\u4f5c\u6bd4\u8f83\uff0c\u4f8b\u5982 X/0 > Y \u53ef\u4f5c\u4e3a\u6709\u6548\u6bd4\u8f83\uff1f\uff1f\uff1f \u4e3a\u4ec0\u4e48\u53ef\u4ee5\u4f5c\u4e3a\u6709\u6548\u6bd4\u8f83 NaNs\u53ef\u4ee5\u5e2e\u52a9\u8c03\u8bd5\u7a0b\u5e8f\u548c\u5224\u65ad\u539f\u56e0\uff0c\u800c\u4e0d\u4f1a\u8ba9\u7a0b\u5e8f\u51fa\u73b0\u5f02\u5e38\u800c\u65e0\u6cd5\u6267\u884c\u548c\u5f97\u4e0d\u5230\u7ed3\u679c\uff0c\u4e5f\u65e0\u6cd5\u67e5\u627e\u539f\u56e0 \u975e\u89c4\u683c\u5316\u6570(Denorms)\u7684\u8868\u793a \u6761\u4ef6\u662fexp = 0...0 \u9636\u7801\u503c\uff1a E = 1 - Bias(instead of E = 0 - Bias) \u76f8\u5f53\u4e8e\u6307\u6570\u6052\u4e3a-126\u4e86(\u5728\u5355\u7cbe\u5ea6\u4e2d) \u539f\u56e0\uff1a\u4f7f\u5f97\u6700\u5927\u975e\u89c4\u683c\u5316\u6570\u548c\u6700\u5c0f\u89c4\u683c\u5316\u6570\u4e4b\u95f4\u53ef\u4ee5\u5e73\u6ed1\u8f6c\u6362\uff0c\u8865\u507f\u975e\u89c4\u683c\u5316\u6570\u7684\u5c3e\u6570\u6ca1\u6709\u9690\u542b\u7684\u5f00\u5934\u76841 \u5047\u8bbe\u6b63\u6570\uff0c\u5219\u89c4\u683c\u5316\u6570\u80fd\u8868\u793a\u7684\u6700\u5c0f\u6b63\u6570\u4e3a 2^{-126} = 1.0...0 \u00d7 2^{-126} 2^{-126} = 1.0...0 \u00d7 2^{-126} \uff0c0 00000001 0~0(23bits) [2^{-126},2^{-125}] [2^{-126},2^{-125}] \u7684\u533a\u95f4\u957f\u5ea6\u4e3a 2^{-126} 2^{-126} \uff0c\u800c [2^{-125},2^{-126}] [2^{-125},2^{-126}] \u7684\u533a\u95f4\u957f\u5ea6\u4e3a 2^{-125} 2^{-125} \uff0c\u662f\u524d\u8005\u7684\u533a\u95f4\u957f\u5ea6\u7684\u4e24\u500d\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u533a\u95f4\u90fd\u53ef\u4ee5\u8868\u793a 2^{23} 2^{23} \u4e2a\u6570\uff0c\u6240\u4ee5\u6570\u7684\u95f4\u8ddd\u4e5f\u662f\u524d\u8005\u6570\u7684\u95f4\u8ddd\u7684\u4e24\u500d -> \u6d6e\u70b9\u6570\u5f80\u6570\u8f74\u6b63\u65b9\u5411\u4e0a\u6570\u7684\u95f4\u8ddd\u8d8a\u5927\uff0c\u8d8a\u7a00\u758f\uff0c\u8d8a\u79bb\u539f\u70b9\u8fd1\u7684\u6570\uff0c\u7cbe\u5ea6\u8d8a\u597d \u673a\u5668\u6570\u8f6c\u6362\u4e3a\u771f\u503c \u771f\u503c\u8f6c\u6362\u4e3a\u673a\u5668\u6570 \u6d6e\u70b9\u6570\u7cbe\u5ea6\uff1a\u5f53\u8f93\u5165\u6570\u636e\u662f\u4e00\u4e2a\u4e0d\u53ef\u8868\u793a\u6570\u65f6\uff0c\u673a\u5668\u5c06\u5176\u8f6c\u6362\u4e3a\u6700\u90bb\u8fd1\u7684\u53ef\u8868\u793a\u6570 c-2 \u6d6e\u70b9\u6570\u7684\u8fd0\u7b97 \u00b6 \u57fa\u672c\u601d\u60f3\uff1a 1. \u8ba1\u7b97\u7cbe\u786e\u7ed3\u679c 2. \u53d8\u6362\u5230\u6307\u5b9a\u683c\u5f0f - \u53ef\u80fd\u6ea2\u51fa\uff1a\u9636\u7801(Exponent)\u592a\u5927 - \u5c0f\u6570\u90e8\u5206\u53ef\u80fd\u9700\u8981\u820d\u5165 \u8bbe\u4e24\u4e2a\u89c4\u683c\u5316\u6d6e\u70b9\u6570\u5206\u522b\u4e3a\uff1a A = Ma*2^{Ea},B =Mb*2^{Eb} A = Ma*2^{Ea},B =Mb*2^{Eb} A \\pm B = (Ma \\pm Mb*2^{-(Ea-Eb)})*2^{Ea},\u5047\u8bbeEa \\geq Eb A \\pm B = (Ma \\pm Mb*2^{-(Ea-Eb)})*2^{Ea},\u5047\u8bbeEa \\geq Eb A*B = (Ma * Mb)*2^{Ea+Eb} A*B = (Ma * Mb)*2^{Ea+Eb} A / B = (Ma / Mb)*2^{Ea-Eb} A / B = (Ma / Mb)*2^{Ea-Eb} \u4e0a\u8ff0\u8fd0\u7b97\u7ed3\u679c\u53ef\u80fd\u51fa\u73b0\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5: \u9636\u7801\u4e0a\u6ea2\uff1a\u4e00\u4e2a\u6b63\u6307\u6570\u8d85\u8fc7\u4e86\u6700\u5927\u5141\u8bb8\u503c=\u3009+\u221e/-\u221e/\u6ea2\u51fa SP\u6700\u5927\u6307\u6570\u4e3a127 \u9636\u7801\u4e0b\u6ea2\uff1a\u4e00\u4e2a\u8d1f\u6307\u6570\u8d85\u8fc7\u4e86\u6700\u5c0f\u5141\u8bb8\u503c=\u3009+0/-0 SP\u6700\u5c0f\u6307\u6570\u4e3a-126 \u5c3e\u6570\u6ea2\u51fa\uff1a\u6700\u9ad8\u6709\u6548\u4f4d\u6709\u8fdb\u4f4d=\u3009\u53f3\u89c4 \u5c3e\u6570\u6ea2\u51fa\uff0c\u7ed3\u679c\u4e0d\u4e00\u5b9a\u6ea2\u51fa 1.5+1.5=\uff1f \u975e\u89c4\u683c\u5316\u5c3e\u6570\uff1a\u6570\u503c\u90e8\u5206\u9ad8\u4f4d\u4e3a0 =\u3009\u5de6\u89c4 1.5-1.0=\uff1f \u53f3\u89c4\u6216\u5bf9\u9636\u65f6\uff0c\u53f3\u6bb5\u6709\u6548\u4f4d\u4e22\u5931=\u3009\u5c3e\u6570\u820d\u5165 \u8fd0\u7b97\u8fc7\u7a0b\u4e2d\u6dfb\u52a0\u4fdd\u62a4\u4f4d IEEE\u5efa\u8bae\u5b9e\u73b0\u65f6\u4e3a\u6bcf\u79cd\u5f02\u5e38\u60c5\u51b5\u63d0\u4f9b\u4e00\u4e2a \u81ea\u9677\u5141\u8bb8\u4f4d \u3002\u82e5\u67d0\u5f02\u5e38\u5bf9\u5e94\u7684\u4f4d\u4e3a1\uff0c\u5219\u53d1\u751f\u76f8\u5e94\u5f02\u5e38\u65f6\uff0c\u5c31\u8c03\u7528\u4e00\u4e2a\u7279\u5b9a\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u6267\u884c IEEE 754 \u6807\u51c6\u89c4\u5b9a\u7684\u4e94\u79cd\u5f02\u5e38\u60c5\u51b5\uff1a \u65e0\u6548\u8fd0\u7b97\uff08\u65e0\u610f\u4e49\uff09 \u8fd0\u7b97\u65f6\u6709\u4e00\u4e2a\u6570\u662f\u975e\u6709\u9650\u6570\uff0c\u5982\uff1a\u52a0/ \u51cf\u221e\u30010 x \u221e\u3001\u221e/\u221e\u7b49 \u7ed3\u679c\u65e0\u6548\uff0c\u5982\uff1a\u6e90\u64cd\u4f5c\u6570\u662fNaN\u30010/0\u3001x REM 0\u3001\u221eREM y \u7b49 \u9664\u4ee50\uff08\u5373\uff1a\u65e0\u7a77\u5927\uff09 \u6570\u592a\u5927\uff08\u9636\u4e0a\u6ea2\uff09: \u5bf9\u4e8eSP\uff0c\u6307\u9636\u7801E >1111 1110 \uff08\u6307\u6570\u5927\u4e8e127\uff09 \u6570\u592a\u5c0f\uff08\u9636\u4e0b\u6ea2\uff09: \u5bf9\u4e8eSP\uff0c\u6307\u9636\u7801E < 0000 0001\uff08\u6307\u6570\u5c0f\u4e8e-126\uff09 \u7ed3\u679c\u4e0d\u7cbe\u786e\uff08\u820d\u5165\u65f6\u5f15\u8d77\uff09\uff0c\u4f8b\u5982\u2153\u30011/10\u7b49\u4e0d\u80fd\u7cbe\u786e\u8868\u793a\u6210\u6d6e\u70b9\u6570 \u4e0a\u8ff0\u60c5\u51b5\u786c\u4ef6\u53ef\u4ee5\u6355\u6349\u5230\uff0c\u56e0\u6b64\u8fd9\u4e9b\u5f02\u5e38\u53ef\u8bbe\u5b9a\u8ba9\u786c\u4ef6\u5904\u7406\uff0c\u4e5f\u53ef\u8bbe\u5b9a\u8ba9\u8f6f\u4ef6\u5904\u7406\u3002\u8ba9\u786c\u4ef6\u5904\u7406\u65f6\uff0c\u79f0\u4e3a \u786c\u4ef6\u9677\u9631 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include <stdio.h> int main (){ // case 1 int a = 1 , b = 0 ; printf ( \"division by zero: %d \\n \" , a / b ); // \u6574\u6570\u96640\u4f1a\u53d1\u751f\u5f02\u5e38 // case 2 double x = 1.0 , y = -1.0 , z = 0.0 ; printf ( \"division by zero: %f %f \\n \" , x / z , y / z ); // \u7ed3\u679c\u4e3a 1.#INFOO -1.#INFOO // \u6d6e\u70b9\u6570\u96640\u4e0d\u4f1a\u51fa\u73b0\u5f02\u5e38 // \u56e0\u4e3a\u5728\u6d6e\u70b9\u8fd0\u7b97\u4e2d\uff0c\u4e00\u4e2a\u6709\u9650\u6570\u9664\u4ee50\uff0c\u7ed3\u679c\u4e3a\u6b63\u65e0\u7a77\u5927(\u8d1f\u65e0\u7a77\u5927) return 0 ; } \u6d6e\u70b9\u6570\u52a0/\u51cf\u8fd0\u7b97 \u00b6 \u57fa\u672c\u8981\u70b9\uff1a (\u5047\u5b9a\uff1a Xm Xm \u3001 Ym Ym \u5206\u522b\u662f X X \u548c Y Y \u7684\u5c3e\u6570\uff0c Xe Xe \u548c Ye Ye \u5206\u522b\u662f X X \u548c Y Y \u7684\u9636\u7801) \u6c42\u9636\u5dee\uff1a \\Delta e = Xe-Ye \\Delta e = Xe-Ye (\u82e5 Ye > Xe Ye > Xe \uff0c\u5219\u7ed3\u679c\u7684\u9636\u7801\u4e3a Ye Ye ) \u5bf9\u9636\uff1a\u5c06 Xm Xm \u53f3\u79fb \\Delta e \\Delta e \u4f4d\uff0c\u5c3e\u6570\u53d8\u4e3a Xm*2^{Xe-Ye} Xm*2^{Xe-Ye} (\u4fdd\u7559\u53f3\u79fb\u90e8\u5206 \u9644\u52a0\u4f4d ) \u76ee\u7684\u662f\u4f7f\u4e24\u6570 \u9636\u7801\u76f8\u7b49 \u5c0f\u9636\u5411\u5927\u9636\u770b\u9f50\uff0c\u9636\u5c0f\u7684\u90a3\u4e2a\u6570\u7684\u5c3e\u6570\u53f3\u79fb\uff0c\u53f3\u79fb\u4f4d\u6570\u7b49\u4e8e\u4e24\u4e2a\u9636\u7801\u5dee\u7684\u7edd\u5bf9\u503c IEEE 754\u5c3e\u6570\u53f3\u79fb\u65f6\uff0c\u8981\u5c06\u9690\u542b\u7684\u201c1\u201d\u79fb\u5230\u5c0f\u6570\u90e8\u5206\uff0c\u9ad8\u4f4d\u88650\uff0c\u79fb\u51fa\u7684\u4f4e\u4f4d\u4fdd\u7559\u5230\u7279\u5b9a\u7684 \u201c\u9644\u52a0\u4f4d\u201d \u4e0a \u5c3e\u6570\u76f8\u51cf\uff1a Xm*2^{Xe-Ye} \\pm Ym Xm*2^{Xe-Ye} \\pm Ym \u89c4\u683c\u5316 \u5f53\u5c3e\u6570\u9ad8\u4f4d\u4f4d0\uff0c\u9700 \u5de6\u89c4 \uff1a\u5c3e\u6570\u5de6\u79fb\u4e00\u6b21\uff0c\u9636\u7801\u51cf1\uff0c\u76f4\u5230MSB\u4e3a1 :s \u6bcf\u6b21\u9636\u7801\u51cf1\u540e\u8981\u5224\u65ad\u9636\u7801\u662f\u5426\u4e0b\u6ea2(\u6bd4\u6700\u5c0f\u53ef\u8868\u793a\u7684\u9636\u7801\u8fd8\u8981\u5c0f) \u5f53\u5c3e\u6570\u6700\u9ad8\u4f4d\u6709\u8fdb\u4f4d\uff0c\u9700 \u53f3\u89c4 \uff1a\u5c3e\u6570\u53f3\u79fb\u4e00\u6b21\uff0c\u9636\u7801\u52a01\uff0c\u76f4\u5230MSB\u4e3a1 :s \u6bcf\u6b21\u9636\u7801\u52a01\u540e\u8981\u5224\u65ad\u9636\u7801\u662f\u5426\u4e0a\u6ea2(\u6bd4\u6700\u5927\u53ef\u8868\u793a\u7684\u9636\u7801\u8fd8\u8981\u5927) IEEE 754 \u52a0\u51cf\u8fd0\u7b97\u53f3\u89c4\u65f6\u6700\u591a\u53ea\u9700\u4e00\u6b21\uff0c\u56e0\u4e3a\u5373\u4f7f\u662f\u4e24\u4e2a\u6700\u5927\u7684\u5c3e\u6570\u76f8\u52a0(\u4e00\u5f00\u59cb\u7684\u89c4\u8303\u5f62\u5f0f\u5373\u4e3a1.xxx)\uff0c\u5f97\u5230\u7684\u548c\u6700\u591a\u4e3a11.xxx\uff0c\u5373\u5c3e\u6570\u7684\u6574\u6570\u90e8\u5206\u6700\u591a\u6709\u4e24\u4f4d\uff0c\u5373\u4e0d\u4f1a\u8fbe\u52304\u3002\u7ed3\u679c\u4fdd\u7559\u4e00\u4e2a\u9690\u542b\u7684\u201c1\u201d\u540e\uff0c\u6700\u591a\u53ea\u6709\u4e00\u4f4d\u88ab\u53f3\u79fb\u5230\u5c0f\u6570\u90e8\u5206 \u9636\u7801\u6ea2\u51fa\u5f02\u5e38\u5904\u7406\uff1a\u9636\u7801\u4e0a\u6ea2\uff0c\u5219\u7ed3\u679c\u6ea2\u51fa\uff1b\u9636\u7801\u4e0b\u6ea2\uff0c\u5219\u7ed3\u679c\u4e3a0 \u5982\u679c\u5c3e\u6570\u6bd4\u89c4\u5b9a\u4f4d\u6570\u957f(\u6709\u9644\u52a0\u4f4d)\uff0c\u5219\u9700\u8003\u8651\u820d\u5165(\u6709\u591a\u79cd\u820d\u5165\u65b9\u5f0f) \u82e5 \u8fd0\u7b97\u7ed3\u679c\u5c3e\u6570 \u662f0\uff0c\u8bf4\u660e\u7ed3\u679c\u4e5f\u5e94\u8be5\u4e3a0\uff0c\u5219\u9700\u8981\u5c06\u9636\u7801\u4e5f\u7f6e\u4e3a0 \u6d6e\u70b9\u4e58\u6cd5 \u00b6 (-1)^{s1}*M1*2^{E1} \u00d7 (-1)^{s2}*M2*2^{E2} (-1)^{s1}*M1*2^{E1} \u00d7 (-1)^{s2}*M2*2^{E2} \uff0c\u7cbe\u786e\u7ed3\u679c (-1)^s*M*2^E (-1)^s*M*2^E \u5982\u4e0b\uff1a - \u7b26\u53f7s\uff1a\u4f9d\u636es1\u548cs2 - \u5c3e\u6570M\uff1a M1\u00d7M2 M1\u00d7M2 - \u9636\u7801E\uff1a E1+E2 E1+E2 \u4fee\u6b63 \u5982M \u2265 2\uff0c\u5c06M\u53f3\u79fb(1\u4f4d)\uff0cE\u52a01 \u5982 E \u8d85\u51fa\u8303\u56f4\uff0c\u5219\u6ea2\u51fa \u5c06 M \u820d\u5165\uff0c\u4ee5\u7b26\u5408\u5c0f\u6570\u90e8\u5206\u7684\u7cbe\u5ea6\u8981\u6c42 \u5b9e\u73b0 \u4e3b\u8981\u95ee\u9898\uff1a\u5b9e\u73b0\u5c3e\u6570(Significand)\u7684\u4e58 \u6d6e\u70b9\u6570\u820d\u5165 \u00b6 \u9644\u52a0\u4f4d(Extra Bits) IEEE754\u89c4\u5b9a: \u4e2d\u95f4\u7ed3\u679c\u987b\u5728\u53f3\u8fb9\u52a02\u4e2a\u9644\u52a0\u4f4d\uff08guard & round\uff09 Guard (\u4fdd\u62a4\u4f4d)\uff1a\u5728significand\u53f3\u8fb9\u7684\u4f4d Round (\u820d\u5165\u4f4d)\uff1a\u5728\u4fdd\u62a4\u4f4d\u53f3\u8fb9\u7684\u4f4d \u4f5c\u7528\uff1a\u7528\u4ee5\u4fdd\u62a4\u5bf9\u9636\u65f6 \u53f3\u79fb\u7684\u4f4d \u6216\u8fd0\u7b97\u7684 \u4e2d\u95f4\u7ed3\u679c \uff0c\u5982\u679c\u4e0d\u5728\u540e\u9762\u52a0\u9644\u52a0\u4f4d\uff0c\u5219\u8fd9\u4e9b\u7cbe\u5ea6\u4e4b\u5916\u7684\u6570\u5c31\u4f1a\u88ab\u65e0\u60c5\u820d\u53bb\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u5f71\u54cd \u5904\u7406\uff1a\u2460\u5de6\u89c4\u65f6\u88ab\u79fb\u5230significand\u4e2d; \u2461\u4f5c\u4e3a\u820d\u5165\u7684\u4f9d\u636e Rounding Digits(\u820d\u5165\u4f4d) IEEE\u6709\u56db\u79cd\u820d\u5165\u65b9\u5f0f \u5c31\u8fd1\u820d\u5165 \u5411\u5076\u6570\u820d\u5165\u7684\u610f\u601d\u662f\uff1a\u5f53\u6070\u597d\u5728\u4e24\u4e2a\u53ef\u80fd\u7684\u6570\u503c\u6b63\u4e2d\u95f4\u65f6\u598210\uff0c\u820d\u5165\u540e\u4f7f\u5f97 \u6700\u4f4e\u6709\u6548\u4f4d \u7684\u6570\u7801\u4e3a\u5076\u6570 \u201c\u5076\u6570\u201d\uff1a\u6700\u4f4e\u6709\u6548\u4f4d\u503c\u4e3a0 \u201c\u4e2d\u95f4\u503c\u201d\uff1a\u820d\u5165\u4f4d\u7f6e\u53f3\u4fa7\u7684\u4f4d\u90fd\u662f0\uff0c\u5373\u5f62\u5982\uff1a \u00d7\u00d7\u00d7100..._{2} \u00d7\u00d7\u00d7100..._{2} Z1\u548cZ2\u4e3a10\uff0c\u4e14Z1\u548cZ2\u524d\u7684\u4e00\u4f4d\u6570\u4e3a0\uff0c\u5219\u65e0\u9700\u8fdb\u4f4d Z1\u548cZ2\u4e3a10\uff0c\u4e14Z1\u548cZ2\u524d\u7684\u4e00\u4f4d\u6570\u4e3a1\uff0c\u5219\u9700\u5f80\u524d\u8fdb\u4e00\u4f4d \u5c31\u8fd1\u820d\u5165\u7684\u65b9\u5f0f\u5f97\u5230\u7684\u5e73\u5747\u8bef\u5dee\u6700\u5c0f \u6d6e\u70b9\u6570\u6bd4\u8f83 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include <stdio.h> int main () { float a ; double b ; a = 123456.789e4 ; b = 123456.789e4 ; printf ( \"%f/n%f/n\" , a , b ); // \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a // 1234567936.000000 // 1234567890.000000 // float\u53ef\u7cbe\u786e\u8868\u793a**7\u4e2a**\u5341\u8fdb\u5236\u6709\u6548\u4f4d\u6570????\uff0c // \u540e\u9762\u7684\u6570\u4f4d\u662f\u820d\u5165\u540e\u7684\u7ed3\u679c\uff0c\u820d\u5165\u540e\u7684\u503c\u53ef\u80fd\u4f1a\u66f4\u5927\uff0c\u4e5f\u53ef\u80fd\u4f1a\u66f4\u5c0f } \u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570float\u578b\u7684\u8868\u793a\u8303\u56f4\u591a\u5927? \u6700\u5927\u7684\u6570\u636e: +1.11\u20261\u00d72^{127} +1.11\u20261\u00d72^{127} \uff0c\u7ea6 +3.4\u00d710^{38} +3.4\u00d710^{38} \u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570double\u578b\u7ea6 +1.8\u00d710^{308} +1.8\u00d710^{308} C\u8bed\u8a00\u4e2d\u7684\u6d6e\u70b9\u6570\u7c7b\u578b\uff1afloat / double\uff0c\u5206\u522b\u5bf9\u5e94IEEE 754\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u683c\u5f0f\u548c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u683c\u5f0f \u4eceint\u8f6c\u6362\u4e3afloat\u65f6\uff0c\u4e0d\u4f1a\u53d1\u751f\u6ea2\u51fa\uff0c\u4f46\u53ef\u80fd\u6709\u6570\u636e\u88ab\u820d\u5165 \u4eceint\u6216float\u8f6c\u6362\u4e3adouble\u65f6\uff0c\u56e0\u4e3adouble\u7684\u6709\u6548\u4f4d\u6570\u66f4\u591a\uff0c\u6545\u80fd\u4fdd\u7559\u7cbe\u786e\u503c \u4ecedouble\u8f6c\u6362\u4e3afloat\u548cint\u65f6\uff0c\u53ef\u80fd\u53d1\u751f\u6ea2\u51fa\uff0c\u6b64\u5916\uff0c\u7531\u4e8e\u6709\u6548\u4f4d\u6570\u53d8\u5c11\uff0c\u6545\u53ef\u80fd\u88ab\u820d\u5165 \u4ecefloat \u6216double\u8f6c\u6362\u4e3aint\u65f6\uff0c\u56e0\u4e3aint\u6ca1\u6709\u5c0f\u6570\u90e8\u5206\uff0c\u6240\u4ee5\u6570\u636e\u53ef\u80fd\u4f1a\u54110\u65b9\u5411\u88ab\u622a\u65ad \u539f\u7c7b\u578b \u7ed3\u679c\u7c7b\u578b \u53ef\u80fd\u53d1\u751f\u6ea2\u51fa \u53ef\u80fd\u53d1\u751f\u820d\u5165 \u539f\u56e0 int float \u00d7 \u221a float\u7684\u8868\u793a\u8303\u56f4\u6bd4int\u7684\u8868\u793a\u8303\u56f4\u5927\uff1f\uff0c\u6240\u4ee5\u4e0d\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u56e0\u4e3aint\u662f\u75311\u4f4d\u7b26\u53f7\u4f4d\u548c31\u4f4d\u6570\u636e\u90e8\u5206\u7ec4\u6210\uff0c\u800cfloat\u6700\u591a\u53ea\u670924\u4f4d(1\u4f4d\u9690\u542b\u548c23\u4f4d\u5c3e\u6570)\uff0c\u6240\u4ee531\u4f4d\u8f6c\u5316\u4e3a24\u4f4d\u65f6\u4f1a\u53d1\u751f\u820d\u5165 int / float double \u00d7 \u00d7 double\u7684\u6709\u6548\u4f4d\u657053\u4f4d\u66f4\u591a\uff0c\u6545\u80fd\u4fdd\u7559\u7cbe\u786e\u503c double int / float \u221a \u221a double\u8868\u793a\u8303\u56f4\u66f4\u5927\uff0c\u8f6c\u6362\u4e3a\u8868\u793a\u8303\u56f4\u5c0f\u7684\u6570\u636e\u7c7b\u578b\u5219\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u7531\u4e8e\u6709\u6548\u4f4d\u6570\u53d8\u5c11\uff0c\u6545\u53ef\u80fd\u88ab\u820d\u5165 float / double int ? ? int\u6ca1\u6709\u5c0f\u6570\u90e8\u5206\uff0c\u6240\u4ee5\u6570\u636e\u53ef\u80fd\u4f1a\u54110\u65b9\u5411\u88ab\u622a\u65ad 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // Assume neither d nor f is NaN int x ; float f ; double d ; x == ( int )( float ) x // no 24\u4f4d\u5c3e\u6570 x == ( int )( double ) x // yes 53\u4f4d\u5c3e\u6570 f == ( float )( double ) f // yes \u589e\u52a0\u7cbe\u5ea6 d == ( float ) d // no \u635f\u5931\u7cbe\u5ea6 f == - ( - f ) // yes \u4ec5\u4ec5\u6539\u53d8\u7b26\u53f7\u4f4d 2 / 3 == 2 / 3.0 // no d < 0.0 \u21d2 (( d * 2 ) < 0.0 ) // yes d > f \u21d2 - f > - d // yes d * d >= 0.0 // yes x * x >= 0 // no ( d + f ) - d == f // no \u5f53d\u5f88\u5927\uff0cf\u5f88\u5c0f\u7684\u65f6\u5019\uff0cf\u4f1a\u88ab\u5403\u6389\uff0c\u56e0\u4e3a\u5bf9\u9636\u7684\u65f6\u5019f\u7684\u7cbe\u5ea6\u4f1a\u635f\u5931 \u6d6e\u70b9\u6570\u52a0\u6cd5\u7ed3\u5408\u5f8b\u4e0d\u6b63\u786e \u56e0\u4e3a x = \u2013 1.5 \u00d7 10^{38}, y = 1.5 \u00d7 10^{38}, z = 1.0 x = \u2013 1.5 \u00d7 10^{38}, y = 1.5 \u00d7 10^{38}, z = 1.0 \u5219 (x+y)+z = (\u20131.5 \u00d7 10^{38} + 1.5 \u00d7 10^{38} )+1.0 = 1.0 (x+y)+z = (\u20131.5 \u00d7 10^{38} + 1.5 \u00d7 10^{38} )+1.0 = 1.0 \u4e0d\u7b49\u4e8e x + (y + z) = \u20131.5 \u00d7 10^{38} + (1.5 \u00d7 10^{38}+1.0) = 0.0 x + (y + z) = \u20131.5 \u00d7 10^{38} + (1.5 \u00d7 10^{38}+1.0) = 0.0 \u6d6e\u70b9\u6570\u548c\u5b9e\u6570\u8fd0\u7b97\u4e0d\u540c\uff1a\u7ed3\u5408\u6027\u3001\u5206\u914d\u6027\u6709\u51b2\u7a81 \u4e0d\u80fd\u9047\u5230\u5c0f\u6570\u5c31\u7528\u6d6e\u70b9\u6570\u8868\u793a\uff0c\u6709\u4e9b\u60c5\u51b5\u4e0b(\u5982\u9700\u8981\u5c06\u4e00\u4e2a\u6574\u6570\u53d8\u91cf\u4e58\u4ee5\u4e00\u4e2a\u786e\u5b9a\u7684\u5c0f\u6570\u5e38\u91cf)\uff0c\u53ef\u5148\u7528\u4e00\u4e2a\u786e\u5b9a\u7684\u5b9a\u70b9\u6574\u6570\u5e38\u91cf\u4e0e\u6574\u6570\u53d8\u91cf\u76f8\u4e58\uff0c\u7136\u540e\u518d\u901a\u8fc7\u79fb\u4f4d\u8fd0\u7b97\u6765\u786e\u5b9a\u5c0f\u6570\u70b9 \u6709\u6ca1\u6709\u4ec0\u4e48\u4f8b\u5b50\uff0c\u5149\u770b\u6587\u5b57\u770b\u4e0d\u61c2\u54c7 \u6211\u7684\u7406\u89e3\uff1a\u6d6e\u70b9\u6570\u7684\u8fd0\u7b97\u6bd4\u8f83\u9ebb\u70e6\uff0c\u76f8\u6bd4\u4e4b\u4e0b\u6574\u6570\u76f8\u4e58\u8fd0\u7b97\u7b80\u5355\uff0c\u6240\u4ee5\u5728\u53ef\u4ee5\u7528\u5b9a\u70b9\u6574\u6570\u8fd0\u7b97\u7684\u65f6\u5019\u53ef\u4ee5\u4f18\u5148\u9009\u62e9\u5b9a\u70b9\u6574\u6570\u7684\u8fd0\u7b97\uff0c\u7136\u540e\u518d\u8003\u8651\u8f6c\u4e3a\u6d6e\u70b9\u6570\u683c\u5f0f \u5185\u5b58\u3001\u6307\u9488\u3001\u5b57\u7b26\u4e32\u8868\u793a \u3010\u4e0d\u5728\u8003\u7eb2\u5185\uff0c\u5728\u5de5\u5927ppt\u5185\u3011 \u00b6","title":"\u3010\u8003\u7814\u5411\u3011\u7a0b\u5e8f\u7ed3\u6784\u548c\u6267\u884c-\u4fe1\u606f\u7684\u8868\u793a\u548c\u5904\u7406"},{"location":"CSAPP/CSAPP-PartOne-1/#partone","text":"","title":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011PartOne \u7a0b\u5e8f\u7ed3\u6784\u548c\u6267\u884c\u4e4b\u4fe1\u606f\u7684\u8868\u793a\u548c\u5904\u7406"},{"location":"CSAPP/CSAPP-PartOne-1/#_1","text":"","title":"\u3010\u5199\u5728\u524d\u9762\u3011"},{"location":"CSAPP/CSAPP-PartOne-1/#_2","text":"\u4fe1\u606f\u8868\u793a\u548c\u5904\u7406 \u4f4d\u3001\u6574\u6570 \u5de7\u7528\u65e0\u7b26\u53f7\u6570\uff1a\u5411\u4e0b\u8ba1\u6570\uff0c\u770b\u4e0d\u61c2 \u4fe1\u606f\u8868\u793a\u548c\u5904\u7406 \u4f4d\u3001\u6574\u6570 \u5927\u5c0f\u7aef\u4e3e\u4f8b\uff0c0xfffffea0\u7684\u503c\u7684\u8ba1\u7b97 \u4e94\u6bb5\u5f0f\u6307\u4ee4\u6d41\u6c34\u7ebf","title":"\u95ee\u9898"},{"location":"CSAPP/CSAPP-PartOne-1/#_3","text":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840(\u4e00)\uff1a\u7a0b\u5e8f\u7684\u8868\u793a\u3001\u8f6c\u6362\u4e0e\u94fe\u63a5 \u8881\u6625\u98ce \u7b2c\u4e00\u5468 \u8ba1\u7b97\u673a\u7cfb\u7edf\u6982\u8ff0 \u8ba1\u7b97\u673a\u5c42\u6b21\u7ed3\u6784 \u7b2c\u4e8c\u5468 \u6570\u636e\u7684\u8868\u793a\u548c\u5b58\u50a8 \u6570\u5236\u548c\u7f16\u7801 \u5b9a\u70b9\u6570\u7684\u7f16\u7801\u8868\u793a C\u8bed\u8a00\u4e2d\u7684\u6574\u6570\u3010\u90e8\u5206\u672a\u603b\u7ed3\u3011 \u6d6e\u70b9\u6570\u7684\u7f16\u7801\u8868\u793a \u975e\u6570\u503c\u6570\u636e\u7684\u7f16\u7801\u8868\u793a \u3010\u672a\u603b\u7ed3\u3011 \u6570\u636e\u5bbd\u5ea6\u548c\u5b58\u50a8\u5bb9\u91cf\u7684\u5355\u4f4d\u3010\u672a\u603b\u7ed3\u3011 \u6570\u636e\u5b58\u50a8\u65f6\u7684\u5b57\u8282\u6392\u5217\u3010\u672a\u603b\u7ed3\u3011 \u7b2c\u4e09\u5468 \u8fd0\u7b97\u7535\u8def\u57fa\u7840 CSAPP\u8bfe\u672c","title":"\u53c2\u8003"},{"location":"CSAPP/CSAPP-PartOne-1/#_4","text":"\u8003\u5bdf\u5c06\u539f\u6765\u76844\u4f4d\u8868\u793a\u6269\u5145\u4e3a8\u4f4d\u8868\u793a \u6cd51\uff1a\u5148\u5c06\u539f\u6765\u76844\u4f4d\u6269\u5145\u4e3a8\u4f4d\u7684\u539f\u7801\u8868\u793a\u4e3a\uff1a10001000\uff0c\u7136\u540e\u518d\u5c06\u539f\u7801\u8f6c\u6362\u4e3a\u8865\u7801-\u53d6\u53cd\u52a0\u4e00\u5f97\uff1a11111000 \u6cd52\uff1a\u76f4\u63a5\u6309\u7b26\u53f7\u4f4d(\u8be5\u9898\u4e2d\u7b26\u53f7\u4f4d\u4e3a1)\u6269\u5145\u5de6\u8fb9\u7684\u5176\u4f594\u4f4d\uff0c\u5f97\uff1a11111000 \u610f\u601d\u65f6\u6d6e\u70b9\u6570\u4e0d\u4f1a\u51fa\u73b0\u6ea2\u51fa\u95ee\u9898\uff0c\u4e86\u89e3\u6d6e\u70b9\u6570\u76f8\u4e58\u7684\u8fc7\u7a0b","title":"\u7f51\u8bfe\u95ee\u9898"},{"location":"CSAPP/CSAPP-PartOne-1/#a","text":"","title":"a. \u4fe1\u606f\u7684\u7f16\u7801\u4e0e\u5b58\u50a8"},{"location":"CSAPP/CSAPP-PartOne-1/#a-1","text":"\u201c\u8f6c\u6362\u201d\u7684\u6982\u5ff5\u5728\u6570\u636e\u8868\u793a\u4e2d\u7684\u53cd\u6620 \u673a\u5668\u7ea7\u6570\u636e \u6570\u503c\u6570\u636e \u6574\u6570(\u5b9a\u70b9\u6570\uff0c\u5b9a\u70b9\u8fd0\u7b97\u6307\u4ee4) - \u65e0\u7b26\u53f7\u6574\u6570\u3001\u6709\u7b26\u53f7\u6574\u6570 \u5b9e\u6570(\u6d6e\u70b9\u6570\uff0c\u6d6e\u70b9\u8fd0\u7b97\u6307\u4ee4) - \u6d6e\u70b9\u6570 \u8868\u793a\u7684\u4e09\u8981\u7d20\uff1a \u8fdb\u4f4d\u8ba1\u6570\u5236 \u5b9a/\u6d6e\u70b9\u8868\u793a(\u89e3\u51b3\u5c0f\u6570\u70b9\u95ee\u9898) \u5b9a\u70b9\u6570\u7684\u7f16\u7801(\u89e3\u51b3\u6b63\u8d1f\u53f7\u95ee\u9898) - \u5982\u4f55\u7528\u4e8c\u8fdb\u5236\u7f16\u7801\uff1a\u539f\u7801\u3001\u8865\u7801\u3001\u79fb\u7801\u3001\u53cd\u7801(\u5f88\u5c11\u7528) \u975e\u6570\u503c\u6570\u636e \u903b\u8f91\u6570\uff0c\u5305\u62ec\u4f4d\u4e32 \u897f\u6587\u5b57\u7b26\u548c\u6c49\u5b57 \u6570\u503c\u6570\u636e\u4e2d\u7684\u5c0f\u6570\u70b9\u7684\u8868\u793a \u7ea6\u5b9a\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e \u5b9a\u70b9\u6570Fixed Point Number\uff1a\u5c0f\u6570\u70b9\u4f4d\u7f6e\u7ea6\u5b9a\u5728\u56fa\u5b9a\u4f4d\u7f6e\u7684\u6570 \u5f62\u5f0f\u8fc7\u4e8e\u50f5\u786c\uff0c\u51b3\u5b9a\u4e86\u56fa\u5b9a\u4f4d\u6570\u7684\u6574\u6570\u548c\u5c0f\u6570\u90e8\u5206\uff0c\u4e0d\u5229\u4e8e\u540c\u65f6\u8868\u8fbe\u7279\u522b\u5927\u7684\u6570\u6216\u8005\u7279\u522b\u5c0f\u7684\u6570 \u6d6e\u70b9\u6570Floating Point Number\uff1a\u5c0f\u6570\u70b9\u4f4d\u7f6e\u7ea6\u5b9a\u4e3a\u53ef\u6d6e\u52a8\u7684\u6570 \u662f\u4e00\u79cd \u6570\u5b57\u8868\u793a\u65b9\u5f0f \uff0c\u7c7b\u4f3c\u4e8e\u79d1\u5b66\u8ba1\u6570\u6cd5 \u5b9a\u70b9\u5c0f\u6570\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u5c3e\u6570\u90e8\u5206 \u5b9a\u70b9\u6574\u6570\u7528\u6765\u8868\u793a(\u5e26\u7b26\u53f7/\u65e0\u7b26\u53f7)\u6574\u6570 \u5728\u8ba1\u7b97\u673a\u5185\u90e8\uff0c\u4efb\u4f55\u5b9e\u6570\u90fd\u53ef\u4ee5\u7528\u4e24\u4e2a\u5b9a\u70b9\u6570(\u5b9a\u70b9\u5c0f\u6570-\u6307\u5b9a\u6709\u6548\u6570\u5b57+\u5b9a\u70b9\u6574\u6570-\u6307\u5b9a\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e)\u6765\u8868\u793a \u4e8c\u8fdb\u5236 MSB / LSB \u7528\u4e8c\u8fdb\u5236\u7f16\u7801\u7684\u539f\u56e0 \u7269\u7406\u5668\u4ef6\u3001\u4fbf\u4e8e\u8ba1\u7b97\u673a\u5b58\u50a8 \u7f16\u7801\u3001\u8ba1\u6570\u3001\u7b97\u672f\u8fd0\u7b97\u89c4\u5219\u7b80\u5355 \u652f\u6301\u903b\u8f91\u8fd0\u7b97 \u5341\u516d\u8fdb\u5236 \u5f15\u5165\u516b\u8fdb\u5236\u548c\u5341\u516d\u8fdb\u5236\u7684\u539f\u56e0\uff1a(1)\u662f\u4e8c\u8fdb\u5236\u7684\u7b80\u4fbf\u8868\u793a\uff0c\u4fbf\u4e8e\u9605\u8bfb\u548c\u4e66\u5199\uff0c\u663e\u793a\u65f6\u53ef\u7f29\u77ed\u957f\u5ea6\uff1b(2)\u4ed6\u4eec\u4e4b\u95f4\u5bf9\u5e94\u7b80\u5355\uff0c\u8f6c\u6362\u5bb9\u6613 \u8fdb\u5236\u8f6c\u6362 10\u8fdb\u5236\u8f6ck\u8fdb\u5236 \u6cd5\u2460\uff1a\u5148\u5c06\u5341\u8fdb\u5236\u6570\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u6570\uff0c\u518d\u5c06\u4e8c\u8fdb\u5236\u8f6c\u5316\u4e3a16\u62168\u8fdb\u5236)\uff0c\u8f6c\u6210\u4e8c\u8fdb\u5236\u4e5f\u8981\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5 \u6cd5\u2461\uff1a\u4e0d\u901a\u8fc7\u4e8c\u8fdb\u5236\uff0c\u76f4\u63a5\u8f6c\u6362 \u6574\u6570\uff1a\u9664\u6cd5-\u9664\u57fa\u53d6\u4f59\u6cd5 \u5341\u8fdb\u5236\u6570\u6574\u6570\u90e8\u5206\u4e0d\u65ad\u9664\u4ee5\u57fa\u6570k(2\u30018\u621616) \uff0c\u5e76\u8bb0\u4e0b\u4f59\u6570\uff0c\u76f4\u5230\u5546\u4e3a0\u4e3a\u6b62 \u4e0a\u53f3\u4e0b\u5de6(\u6700\u4e0a\u9762\u7684\u4f59\u6570\u4f4d\u4e8e\u53f3\u8fb9/\u4f4e\u4f4d\uff0c\u6700\u4e0b\u9762\u7684\u4f59\u6570\u4f4d\u4e8e\u5de6\u8fb9/\u9ad8\u4f4d) \u5c0f\u6570\uff1a\u4e58\u6cd5-\u4e58\u57fa\u53d6\u6574\u6cd5\uff0c\u4e58\u4ee5\u57fa\u6570k\uff0c\u8bb0\u5f55\u6574\u6570\u90e8\u5206\uff0c\u76f4\u5230\u5c0f\u6570\u90e8\u5206\u4e3a0\u4e3a\u6b62\uff0c\u4e0a\u5de6\u4e0b\u53f3 \u73b0\u5b9e\u4e2d\u7684\u7cbe\u786e\u503c\u53ef\u80fd\u65e0\u6cd5\u75280\u548c1\u503c\u8868\u793a \u5e38\u8bc6\u9700\u8c28\u8bb0 \u6574\u6570\u90e8\u5206\u7684\u8f6c\u6362\uff1a1\u30012\u30014\u30018\u300116\u300132\u300164\u3001128\u3001256\u3001512\u30011024\u30012048\u30014096\u30018192\u300116384\u300132768\u300165536 \u5c0f\u6570\u90e8\u5206\u7684\u8f6c\u6362\uff1a0.5\u30010.25\u30010.125\u30010.0625 k\u8fdb\u5236\u8f6c10\u8fdb\u5236 \u6309\u6743\u5c55\u5f00 \u7f16\u7801\uff1a\u8ba1\u7b97\u673a\u5185\u7684\u6570\u503c\u8868\u793a \u9700\u8003\u8651\u7684\u95ee\u9898\uff1a\u7f16\u7801\u7684\u957f\u5ea6\uff1b\u6570\u7684\u7b26\u53f7\uff1b\u6570\u7684\u8fd0\u7b97","title":"a-1 \u6570\u5236"},{"location":"CSAPP/CSAPP-PartOne-1/#a-2","text":"\u903b\u8f91\u6570\u636e\u7684\u7f16\u7801\u8868\u793a \u897f\u6587\u5b57\u7b26\u7684\u7f16\u7801\u8868\u793a \u5e38\u7528\u7f16\u7801\u4e3a7\u4f4dASCII\u7801 \u6570\u5b57\u3001\u5b57\u6bcd\u3001\u7a7a\u683c\u3001\u56de\u8f66\u3001\u6362\u884c \u6c49\u5b57\u53ca\u56fd\u9645\u5b57\u7b26\u7684\u7f16\u7801\u8868\u793a \u7f16\u7801\u5f62\u5f0f \u8f93\u5165\u7801 \u5185\u7801 \u5b57\u6a21\u70b9\u9635\u6216\u8f6e\u5ed3\u63cf\u8ff0 GB2312-80\u5b57\u7b26\u96c6 \u591a\u5a92\u4f53\u4fe1\u606f\u7684\u8868\u793a \u591a\u5a92\u4f53\u4fe1\u606f\u7528\u4e00\u4e2a\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\u6765\u63cf\u8ff0\uff0c\u5176\u4e2d\u7684\u57fa\u672c\u6570\u636e\u6216\u8005\u662f\u6570\u503c\u6570\u636e\uff0c\u6216\u8005\u662f\u75280/1\u7f16\u7801\u7684\u975e\u6570\u503c\u6570\u636e","title":"a-2 \u3010\u975e\u6570\u503c\u6570\u636e\u3011\u975e\u6570\u503c\u6570\u636e\u7684\u7f16\u7801\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-1/#a-3","text":"\u6570\u636e\u7684\u57fa\u672c\u5bbd\u5ea6 \u4f4d / \u6bd4\u7279bit \u5b57\u8282","title":"a-3 \u6570\u636e\u5bbd\u5ea6\u548c\u5b58\u50a8\u5bb9\u91cf\u7684\u5355\u4f4d"},{"location":"CSAPP/CSAPP-PartOne-1/#a-4","text":"\u53d8\u91cf\u7684\u5730\u5740\u662f\u5176 \u6700\u5c0f\u5730\u5740 \uff0c\u5373\u82e5int\u578b\u53d8\u91cfx\u7684\u5b58\u653e\u5730\u5740\u662f100\uff0c\u5219\u8868\u793ax\u5b58\u653e\u5728100#~103# \u6709\u591a\u4e2a\u5b57\u8282\u7684\u5b57(word)\uff0c\u5176\u5404\u4e2a\u5b57\u8282\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u653e\u7684\u987a\u5e8f \u5927\u7aef\u5e8f/\u5927\u5c3e\u5e8f Big Endian\uff1aLSB\u7684\u5b57\u8282\u5730\u5740\u6700\u9ad8\uff0cMIPS / Sun / PPC Mac / Internet \u5c0f\u7aef\u5e8f/\u5c0f\u5c3e\u5e8f Little Endian\uff1aLSB\u7684\u5b57\u8282\u5730\u5740\u6700\u4f4e\uff0cIntel 80x86 / \u8fd0\u884cAndroid \u7684ARM \u5904\u7406\u5668 / iOS / Windows \u53cc\u7aef\u5e8f Bi-Endian","title":"a-4 \u6570\u636e\u5b58\u50a8\u65f6\u7684\u5b57\u8282\u6392\u5217"},{"location":"CSAPP/CSAPP-PartOne-1/#a-5-ppt","text":"\u6570\u5b57\u903b\u8f91\u7535\u8def\u57fa\u7840 + \u4eceC\u8868\u8fbe\u5f0f\u5230\u903b\u8f91\u7535\u8def + C\u8bed\u8a00\u4e2d\u7684\u5404\u7c7b\u8fd0\u7b97 #### \u6570\u5b57\u903b\u8f91\u7535\u8def\u57fa\u7840 \u4f4d\u7ea7\u8fd0\u7b97\uff1a\u5e03\u5c14\u4ee3\u6570 #### \u4eceC\u8868\u8fbe\u5f0f(\u9ad8\u7ea7\u8bed\u8a00)\u5230\u903b\u8f91\u7535\u8def #### C\u8bed\u8a00\u4e2d\u7684\u5404\u7c7b\u8fd0\u7b97 - \u4f4d\u7ea7\u8fd0\u7b97 - \u79fb\u4f4d\u8ba1\u7b97 - \u903b\u8f91\u8fd0\u7b97 - \u5f02\u6216 - \u4f4d\u6269\u5c55\u548c\u4f4d\u622a\u65ad","title":"a-5 \u8fd0\u7b97\u7535\u8def\u57fa\u7840\u3010\u4e0d\u5728\u8003\u70b9\u5185 \u4e14 \u5de5\u5927ppt\u672a\u8bb2\u3011"},{"location":"CSAPP/CSAPP-PartOne-1/#b","text":"","title":"b. \u3010\u6570\u503c\u6570\u636e\u3011\u6574\u6570\u7684\u8868\u793a\u4e0e\u8fd0\u7b97"},{"location":"CSAPP/CSAPP-PartOne-1/#b-1-","text":"\u673a\u5668\u6570 \u6982\u5ff5\uff1a\u75280\u548c1\u7f16\u7801\u7684\u8ba1\u7b97\u673a\u5185\u90e8\u76840/1\u5e8f\u5217 \u771f\u503c\uff1a\u771f\u6b63\u7684\u503c\uff0c\u5373\u73b0\u5b9e\u4e2d\u5e26\u6b63\u8d1f\u53f7\u7684\u6570 \u6570\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u8868\u793a\u5f62\u5f0f / \u673a\u5668\u80fd\u8bc6\u522b\u7684\u5f62\u5f0f \u5e26\u7b26\u53f7 \uff1a\u6700\u9ad8\u4f4d0\u8868\u793a\u975e\u8d1f\u6570\uff0c1\u8868\u793a\u8d1f\u6570 \u4f8b\u5b50\uff1a\u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u52191\u8868\u793a\u4e3a[00000001]\uff0c-1\u8868\u793a\u4e3a[10000001]\uff0c\u5176\u4e2d00000001\u548c10000001\u662f\u673a\u5668\u6570 \u539f\u7801 Sign and Magnitude \u5c31\u662f\u673a\u5668\u6570 \u7b26\u53f7(\u6700\u9ad8\u4f4d)+\u7edd\u5bf9\u503c \u6574\u6570\u91c7\u7528 \u8865\u7801 \u8868\u793a\uff0c\u6d6e\u70b9\u6570\u7684\u5c3e\u6570\u7528 \u539f\u7801\u5b9a\u70b9\u5c0f\u6570 \u8868\u793a \u53cd\u7801 \u8868\u793a \u6b63\u6570\u7684\u53cd\u7801\u662f\u5176\u672c\u8eab \u8d1f\u6570\u7684\u53cd\u7801\u662f\u7b26\u53f7\u4f4d\u4e0d\u53d8\uff0c\u5176\u4ed6\u4f4d\u53d6\u53cd \u4f8b\u5b50 \u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u5219[+1]=[00000001]\u539f=[00000001]\u53cd\uff1b[-1]=[10000001]\u539f=[11111110]\u53cd \u8865\u7801 \u6a21\u8fd0\u7b97 [X]\u8865 = 2^n + X ( -2^n \\leq X < 2^n, mod 2^n) [X]\u8865 = 2^n + X ( -2^n \\leq X < 2^n, mod 2^n) \u8868\u793a \u6b63\u6570\u7684\u8865\u7801\u662f\u5176\u672c\u8eab \u8d1f\u6570\u7684\u8865\u7801\u5728\u53cd\u7801\u7684\u57fa\u7840\u4e0a+1 \u8d1f\u6570\u7684\u8865\u7801 = \u5c06\u5176 \u5bf9\u5e94\u6b63\u6570\u7684\u8865\u7801 \u5404\u4f4d\u53d6\u53cd\u3001\u672b\u4f4d\u52a0\u4e00 \u8d1f\u6570\u7684\u8865\u7801 = \u5176\u5bf9\u5e94\u7684\u6b63\u6570\u7684\u8865\u7801\uff0c\u4ece\u53f3\u5411\u5de6\u9047\u5230\u7684\u7b2c\u4e00\u4e2a1\u7684\u524d\u9762\u5404\u4f4d\u53d6\u53cd \u5176\u5b9e\u4e5f\u662f \u8d1f\u6570A[\u8865]=\u6a21-\u7edd\u5bf9\u503c(A) \u5bf9\u4e8e\u67d0\u4e00\u786e\u5b9a\u7684\u6a21\uff0c\u67d0\u6570\u51cf\u53bb\u5c0f\u4e8e\u6a21\u7684\u53e6\u4e00\u6570\uff0c\u603b\u53ef\u4ee5\u7528\u8be5\u6570\u52a0\u4e0a\u53e6\u4e00\u6570\u8d1f\u6570\u7684\u8865\u7801\u6765\u4ee3\u66ff - \u52a0\u6cd5\u4ee3\u66ff\u51cf\u6cd5 \u4f8b\u5b50 \u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u5219[+1]=[00000001]=[00000001]\u539f=[00000001]\u53cd=[00000001]\u8865\uff1b[-1]=[10000001]\u539f=[11111110]\u53cd=[11111111]\u8865 \u6c42\u7279\u6b8a\u6570\u7684\u8865\u7801 \u5047\u5b9a\u673a\u5668\u6570\u6709n\u4f4d [-2^{(n-1)}]\u8865 = 2^n - 2^{(n-1)} = 10...0(n-1\u4e2a0) (mod 2^n) [-2^{(n-1)}]\u8865 = 2^n - 2^{(n-1)} = 10...0(n-1\u4e2a0) (mod 2^n) [-1]\u8865 = 2^n - 0...01 = 11...1(n\u4e2a1) (mod 2^n) [-1]\u8865 = 2^n - 0...01 = 11...1(n\u4e2a1) (mod 2^n) [+0]\u8865 = [-0]\u8865 = 00...0(n\u4e2a0) [+0]\u8865 = [-0]\u8865 = 00...0(n\u4e2a0) \u51fa\u73b0\u65f6\u671f\uff1a\u539f\u7801 < \u53cd\u7801 < \u8865\u7801 \u6709\u4e86\u539f\u7801\u4e3a\u4ec0\u4e48\u8fd8\u51fa\u73b0\u4e86\u53cd\u7801\uff1f \u8ba1\u7b97\u673a\u8fa8\u522b\u548c\u5904\u7406\u7b26\u53f7\u4f4d\u56f0\u96be\uff0c\u4e0d\u5229\u4e8e\u786c\u4ef6\u8bbe\u8ba1 \u4f7f\u7528\u539f\u7801\u52a0\u51cf\u8fd0\u7b97\u65b9\u5f0f\u4e0d\u7edf\u4e00(\u7279\u522b\u5f53a<b\u65f6\uff0c\u5b9e\u73b0a-b\u6bd4\u8f83\u56f0\u96be)\uff0c\u4e14\u9700\u8981\u989d\u5916\u5bf9\u7b26\u53f7\u4f4d\u8fdb\u884c\u5904\u7406(\u540c\u53f7\u6570\u76f8\u51cf\u548c\u5f02\u53f7\u6570\u76f8\u52a0\u65f6\u9700\u8981\u5224\u65ad\u7edd\u5bf9\u503c\u5927\u5c0f\u548c\u6700\u7ec8\u7b26\u53f7) \u8ba1\u7b97\u673a\u53ea\u9700\u8981\u5b9e\u73b0\u52a0\u6cd5\uff0c\u628a\u51cf\u4e00\u4e2a\u6570\u53d8\u4e3a\u52a0\u4e0a\u8fd9\u4e2a\u6570\u7684\u8d1f\u6570\uff1a1-1=1+(-1)\uff0c\u5373\u8ba9\u7b26\u53f7\u4f4d\u53c2\u4e0e\u8fd0\u7b97 \u6309\u7167\u6b63\u5e38\u7684\u52a0\u6cd5\u89c4\u5219\uff0c\u539f\u7801\u7684\u65b9\u5f0f\u65e0\u6cd5\u5b9e\u73b0\u6b63\u6570\u548c\u8d1f\u6570\u7684\u52a0\u6cd5\uff0c\u4e00\u5957\u7528\u4e8e\u6b63\u6570+\u6b63\u6570\uff0c\u4e00\u5957\u7528\u4e8e\u6b63\u6570+\u8d1f\u6570\uff0c\u5219\u9700\u8981\u4e3a\u52a0\u6cd5\u8fd0\u7b97 \u505a\u4e24\u79cd\u7535\u8def \u539f\u7801\u5b9e\u73b01+(-1)\u7684\u8fc7\u7a0b\u4f1a\u51fa\u73b0\u9519\u8bef 1 1+(-1)=[00000001]\u539f+[10000001]\u539f=[10000010]\u539f\uff0c\u503c\u4e3a-2 \u7528\u53cd\u7801\u8ba1\u7b97\u51cf\u6cd5\uff1a \u53cd\u7801\u5b9e\u73b01+(-1)\u7684\u8fc7\u7a0b\uff0c\u7ed3\u679c\u6b63\u786e 1 2 1+(-1)=[00000001]\u53cd+[11111110]\u53cd=[11111111]\u53cd=[10000000]\u539f=-0(\u8d85\u8fc7\u7684\u90e8\u5206\u622a\u65ad\uff0c\u53cd\u7801\u9700\u8981\u5316\u6210\u539f\u7801\u624d\u80fd\u77e5\u9053\u5177\u4f53\u7684\u503c) 2+(-1)=[00000010]\u53cd+[11111110]\u53cd=[00000000]\u53cd=[00000000]\u539f=0(\u7528\u8865\u7801\u53ef\u4ee5\u89e3\u51b3) \u89e3\u51b3\u4e86\u539f\u7801\u7684\u90e8\u5206\u52a0\u6cd5\u95ee\u9898\uff0c\u6709\u4e9b\u4f7f\u7528\u53cd\u7801\u7684\u52a0\u6cd5\u4e5f\u4e0d\u6210\u7acb\uff0c\u53cd\u7801\u53ea\u662f\u4e3a\u4e86\u8fc7\u6e21\u5f15\u51fa\u8865\u7801(\u662f\u4e00\u4e2a\u53d1\u73b0\u95ee\u9898\u89e3\u51b3\u95ee\u9898\u7684\u8fc7\u7a0b) \u4e3a\u4ec0\u4e48\u4f1a\u51fa\u73b0\u8865\u7801\uff1f \u8865\u7801\u8fd0\u7b97\u7cfb\u7edf\u662f\u6a21\u8fd0\u7b97\u7cfb\u7edf\uff0c\u89e3\u51b3\u4e86\u539f\u7801\u5e26\u6765\u7684\u52a0\u6cd5\u95ee\u9898\uff0c\u53ef\u4ee5\u5c06\u52a0\u6cd5\u8fd0\u7b97\u89c4\u5219\u6269\u5c55\u5230\u6574\u4e2a\u6574\u6570\u96c6\uff0c\u4ece\u800c \u7528\u4e00\u5957\u7535\u8def\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5168\u90e8\u6574\u6570\u7684\u52a0\u6cd5 \u8865\u7801\u5b9e\u73b01+(-1)\u548c2+(-1)\u7684\u95ee\u9898 1 2 1+(-1)=[00000001]\u8865+[11111111]\u8865=[00000000]\u8865=[00000000]\u539f=0(\u8d85\u8fc7\u7684\u90e8\u5206\u622a\u65ad\uff0c\u8865\u7801\u9700\u8981\u5316\u6210\u539f\u7801\u624d\u80fd\u77e5\u9053\u5177\u4f53\u7684\u503c) 2+(-1)=[00000010]\u8865+[11111111]\u53cd=[00000001]\u8865=[00000001]\u539f=1(\u8865\u7801\u6c42\u539f\u7801\uff1a\u91c7\u7528\u9006\u63a8\u6cd5\uff0c\u5148\u628a\u8865\u7801\u53d8\u4e3a\u53cd\u7801\uff0c\u7136\u540e\u5728\u628a\u53cd\u7801\u53d8\u4e3a\u539f\u7801 / \u6216\u8005\u5bf9\u7ed3\u679c\u6c42\u8865) \u8865\u7801\u7684\u8fd0\u7b97\uff1a \u7b26\u53f7\u4f4d\u4e0e\u6570\u503c\u90e8\u5206\u4e00\u8d77\u53c2\u52a0\u8fd0\u7b97 \u820d\u53bb\u8d85\u51fa\u5b57\u957f\u7684\u8fdb\u4f4d \u7528\u8865\u7801\u8fd0\u7b97\uff0c\u7ed3\u679c\u4e5f\u4e3a\u8865\u7801 \u5728\u8f6c\u6362\u4e3a\u771f\u503c(\u771f\u6b63\u7684\u503c\uff0c\u5e26\u7b26\u53f7)\u65f6\uff0c\u82e5\u7b26\u53f7\u4f4d\u4e3a0\uff0c\u6570\u4f4d\u4e0d\u53d8\uff1b\u82e5\u7b26\u53f7\u4f4d\u4e3a1\uff0c\u5e94\u5c06\u7ed3\u679c\u6c42\u8865\u624d\u662f\u5176\u771f\u503c \u89e3\u51b3\u4e86+0\u548c-0\u53ca\u5176\u7f16\u7801\u7684\u95ee\u9898(\u4e0d\u5229\u4e8e\u7a0b\u5e8f\u5458\u7f16\u7a0b)\uff0c0\u5e26\u7b26\u53f7\u662f\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\u7684\uff0c \u800c\u4e14\u7528 [0000 0000]\u539f \u548c [1000 0000]\u539f \u4e24\u4e2a\u7f16\u7801\u8868\u793a \u5047\u8bbe\u673a\u5668\u5b57\u957f\u4e3a8\u4f4d\uff0c\u8865\u7801\u4e2d\uff1a\u7528 [00000000]\u8865 \u8868\u793a0\uff0c\u7528 [10000000]\u8865 \u8868\u793a-128 1 (-1)+(-127)=[10000001]\u539f+[11111111]\u539f=[11111111]\u8865+[10000001]\u8865=[10000000]\u8865=-128 \u5728\u8be5\u6761\u4ef6\u4e0b\uff0c\u539f\u3001\u53cd\u7801\u7684\u8303\u56f4\u662f-127~127(\u56e0\u4e3a\u7b2c\u4e00\u4f4d\u662f\u7b26\u53f7\u4f4d)\uff0c\u6240\u4ee5-128\u5e76\u6ca1\u6709\u539f\u7801\u548c\u53cd\u7801\u7684\u8868\u793a \u4f7f\u7528\u8865\u7801\uff0c\u53d6\u503c\u8303\u56f4\u6269\u5927\u5230[-128,127]\uff0c\u56e0\u4e3a0\u53ea\u9700\u8981\u4e00\u4e2a\u7f16\u7801\uff0c\u6240\u4ee5\u591a\u51fa\u6765\u4e00\u4e2a\u7f16\u7801\u8868\u793a-128(\u6bd4\u539f\u7801\u591a\u8868\u793a\u4e00\u4e2a\u6700\u5c0f\u8d1f\u6570) \u53d8\u5f62\u8865\u7801(4's complement)\u7684\u8868\u793a \u53d8\u5f62(4's)\u8865\u7801\uff1a\u53cc\u7b26\u53f7\uff0c\u7528\u4e8e\u5b58\u653e\u53ef\u80fd\u6ea2\u51fa\u7684\u4e2d\u95f4\u7ed3\u679c \u79fb\u7801 Excess(biased) notion \u5c06\u6bcf\u4e00\u4e2a\u6570\u503c\u52a0\u4e0a\u4e00\u4e2a\u504f\u7f6e\u5e38\u6570(Excess / bias) \u5f53\u7f16\u7801\u4f4d\u6570\u4e3an\u65f6\uff0cbias\u53d6 2^{(n-1)} 2^{(n-1)} \u6216 2^{(n-1)}-1 2^{(n-1)}-1 (\u5982IEEE 754) \u5f53bias\u4e3a 2^{(n-1)} 2^{(n-1)} \u65f6\uff0c\u79fb\u7801\u548c\u8865\u7801\u4ec5\u7b2c\u4e00\u4f4d\u4e0d\u540c \u79fb\u7801\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u6307\u6570(\u9636\u7801)\uff0c\u539f\u56e0\u662f\u4fbf\u4e8e\u6d6e\u70b9\u6570\u52a0\u51cf\u8fd0\u7b97\u65f6\u7684\u5bf9\u9636\u64cd\u4f5c(\u6bd4\u8f83\u5927\u5c0f-\u9700\u8981\u5c06\u9636\u7edf\u4e00) \u5047\u8bbe\u4e00\u4e2a\u9636\u4e3a\u8d1f\u6570\uff0c\u4e00\u4e2a\u9636\u4e3a\u6b63\u6570\uff0c\u901a\u8fc7\u79fb\u7801\u5c06\u4e24\u8005\u63a7\u5236\u5728\u6b63\u6570\u8303\u56f4\u8fdb\u884c\u6bd4\u8f83\u66f4\u65b9\u4fbf \u53c2\u8003\u8d44\u6599 - http://www.ruanyifeng.com/blog/2009/08/twos_complement.html - https://blog.csdn.net/ch717828/article/details/103315407 - \u6982\u5ff5\u89e3\u6790 - https://blog.csdn.net/zl10086111/article/details/80907428 - \u7528\u949f\u8868\u7c7b\u6bd4\u53cd\u7801\u548c\u8865\u7801\u4e3a\u4ec0\u4e48\u6210\u7acb\u7684\u539f\u7406 - :rainbow:\u7406\u89e3\u4e0a\u9762\u90a3\u4e00\u6bb5\u5df2\u7ecf\u80fd\u57fa\u672c\u89e3\u51b3\u6211\u7684\u95ee\u9898\uff0c\u4ee5\u4e0b\u53c2\u8003\u4f5c\u4e3a\u50a8\u5907\uff0c\u592a\u56f0\u4e86\uff0c\u9003\u03b5=\u03b5=\u03b5=\u250f(\u309c\u30ed\u309c;)\u251b - https://www.zhihu.com/question/20159860 - \u539f\u7801\u3001\u53cd\u7801\u3001\u8865\u7801\u7684\u4ea7\u751f\u3001\u5e94\u7528\u4ee5\u53ca\u4f18\u7f3a\u70b9\u6709\u54ea\u4e9b\uff1f - https://www.zhihu.com/question/352057791/answer/882175484 - https://www.jianshu.com/p/ffc97c4d2306","title":"b-1 \u5b9a\u70b9\u6570\u7684\u7f16\u7801-\u673a\u5668\u6570\u3001\u539f\u7801\u3001\u53cd\u7801\u3001\u8865\u7801\u3001\u79fb\u7801\u7684\u533a\u522b\u4ee5\u53ca\u8054\u7cfb"},{"location":"CSAPP/CSAPP-PartOne-1/#b-2","text":"\u65e0\u7b26\u53f7\u6574\u6570Unsigned integer \u673a\u5668\u4e2d\u5b57\u7684\u4f4d\u6392\u5e8f2\u79cd \u6ca1\u6709\u7b26\u53f7\u4f4d \u80fd\u8868\u793a\u7684\u6700\u5927\u503c\u5927\u4e8e\u4f4d\u6570\u76f8\u540c\u7684\u5e26\u7b26\u53f7\u6574\u6570\u7684\u6700\u5927\u503c C\u8bed\u8a00\uff1a\u5728\u6570\u540e\u9762\u52a0\u4e00\u4e2au\u6216\u8005U\uff0cunsigned int/short/long \u5e26\u7b26\u53f7\u6574\u6570Signed integer MSB\u8868\u793a\u6570\u7b26 \u4e09\u79cd\u5b9a\u70b9\u7f16\u7801\u65b9\u5f0f \u539f\u7801\uff1a\u5b9a\u70b9\u5c0f\u6570\uff0c\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u5c3e\u6570 \u79fb\u7801\uff1a\u5b9a\u70b9\u6574\u6570\uff0c\u7528\u6765\u8868\u793a\u6d6e\u70b9\u6570\u7684\u9636(\u6307\u6570) \u8865\u7801\uff1a50\u5e74\u4ee3\u4ee5\u6765\uff0c\u6240\u6709\u7684\u8ba1\u7b97\u673a\u90fd\u7528\u8865\u7801\u6765\u8868\u793a\u5e26\u7b26\u53f7\u6574\u6570 C\u8bed\u8a00\uff1aint/short/long\uff1b\u540c\u65f6\u6709\u65e0\u7b26\u53f7\u6570\u548c\u5e26\u7b26\u53f7\u6570\uff0c\u5f3a\u5236\u5c06\u5e26\u7b26\u53f7\u6574\u6570\u8f6c\u6362\u4e3a\u65e0\u7b26\u53f7\u6574\u6570 C\u8bed\u8a00\u4e2dC90\u548cC99\u7684\u533a\u522b","title":"b-2 \u5e26\u7b26\u53f7\u6574\u6570/\u65e0\u7b26\u53f7\u6574\u6570"},{"location":"CSAPP/CSAPP-PartOne-1/#_5","text":"\u4f4d\u6a21\u5f0f\u4e0d\u53d8 \u91cd\u65b0\u89e3\u8bfb\uff08\u6309\u76ee\u6807\u7f16\u7801\u7c7b\u578b\u7684\u89c4\u5219\u89e3\u8bfb\uff09 \u4f1a\u6709\u610f\u5916\u526f\u4f5c\u7528: \u6570\u503c\u88ab \\pm 2^{w} \\pm 2^{w} \u8868\u8fbe\u5f0f\u542b\u65e0\u7b26\u53f7\u6570\u548c\u6709\u7b26\u53f7\u6570\u65f6 \u6709\u7b26\u53f7\u6570\u88ab\u8f6c\u6362\u6210\u65e0\u7b26\u53f7\u6570\uff08\u5982int\u8f6c\u6210unsigned int\uff09","title":"\u6709\u7b26\u53f7\u6570\u548c\u65e0\u7b26\u53f7\u6570\u300c\u8f6c\u6362\u300d\u7684\u57fa\u672c\u539f\u5219"},{"location":"CSAPP/CSAPP-PartOne-1/#_6","text":"\u6269\u5c55(\u4f8b\u5982\u4eceshort int\u5230int\u7684\u8f6c\u6362) - \u65e0\u7b26\u53f7\u6570: \u586b\u51450 - \u6709\u7b26\u53f7\u6570:\u7b26\u53f7\u6269\u5c55 - \u7ed3\u679c\u90fd\u662f\u660e\u786e\u7684\u9884\u671f\u503c \u622a\u65ad(\u4f8b\u5982\u4eceunsigned \u5230unsigned short\u7684\u8f6c\u6362) - \u65e0\u8bba\u6709/\u65e0\u7b26\u53f7\u6570:\u591a\u51fa\u7684\u4f4d\u5747\u88ab\u622a\u65ad - \u7ed3\u679c\u91cd\u65b0\u89e3\u8bfb - \u65e0\u7b26\u53f7\u6570: \u76f8\u5f53\u4e8e\u6c42\u6a21\u8fd0\u7b97 - \u6709\u7b26\u53f7\u6570: \u4e0e\u6c42\u6a21\u8fd0\u7b97\u76f8\u4f3c - \u6709\u7b26\u53f7\u6570\u622a\u65ad\u4ee5\u540e\uff0c\u6700\u9ad8\u4f4d\u8981\u8f6c\u6362\u4e3a\u7b26\u53f7\u4f4d - \u5bf9\u4e8e\u5c0f\u6574\u6570\uff0c\u7ed3\u679c\u662f\u660e\u786e\u7684\u9884\u671f\u503c","title":"\u6709\u7b26\u53f7\u6570\u548c\u65e0\u7b26\u53f7\u6570\u300c\u6269\u5c55\u3001\u622a\u65ad\u300d\u7684\u57fa\u672c\u539f\u5219"},{"location":"CSAPP/CSAPP-PartOne-1/#b-3","text":"\u6307\u9488\u3001\u5730\u5740\u7b49\u901a\u5e38\u88ab\u8bf4\u660e\u4e3a\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u56e0\u800c\u5728\u8fdb\u884c\u6307\u9488\u6216\u5730\u5740\u8fd0\u7b97\u65f6\uff0c\u9700\u8981\u8fdb\u884c\u65e0\u7b26\u53f7\u6574\u6570\u7684\u52a0\u51cf\u8fd0\u7b97 \u8fd0\u7b97\u7535\u8def\u79f0\u4e3a\uff1a\u6574\u6570\u52a0\u51cf\u8fd0\u7b97\u90e8\u4ef6\uff0c\u57fa\u4e8e \u5e26\u6807\u5fd7\u52a0\u6cd5\u5668 \u5b9e\u73b0 \u8ba1\u7b97\u673a\u4e2d\u7684\u52a0\u6cd5\u5668\uff0c\u53ea\u6709n\u4f4d\uff0c\u6240\u4ee5\u662f\u4e00\u79cd n^2 n^2 \u8fd0\u7b97\u7cfb\u7edf","title":"b-3 \u6574\u6570\u7684\u52a0\u51cf\u8fd0\u7b97"},{"location":"CSAPP/CSAPP-PartOne-1/#_7","text":"\u8865\u7801\u52a0\u51cf\u8fd0\u7b97\u516c\u5f0f [A+B]\u8865 = [A]\u8865 + [B]\u8865 (mod 2^n) [A+B]\u8865 = [A]\u8865 + [B]\u8865 (mod 2^n) [A-B]\u8865 = [A]\u8865 + [-B]\u8865 (mod 2^n) [A-B]\u8865 = [A]\u8865 + [-B]\u8865 (mod 2^n) \u52a0\u51cf\u6cd5\u8fd0\u7b97\u7edf\u4e00\u91c7\u7528\u52a0\u6cd5 \u5b9e\u73b0\u51cf\u6cd5\u4e3b\u8981\u5728\u4e8e\u6c42 [-B]\u8865 = \\overline{B} + 1 [-B]\u8865 = \\overline{B} + 1 \u7b26\u53f7\u4f4d(\u6700\u9ad8\u6709\u6548\u4f4dMSB)\u548c\u6570\u503c\u4f4d\u4e00\u8d77\u53c2\u4e0e\u8fd0\u7b97 \u76f4\u63a5\u7528Adder\u5b9e\u73b0\u4e24\u4e2a\u6570\u7684\u52a0\u8fd0\u7b97 \u91c7\u7528\u6a21\u8fd0\u7b97\u7cfb\u7edf\uff1a\u5c06\u8fd0\u7b97\u7ed3\u679c\u9ad8\u4f4d\u4e22\u5f03\uff0c\u4fdd\u7559\u4f4en\u4f4d\uff0c\u76f8\u5f53\u4e8e\u53d6\u6a21 2^n 2^n \u6240\u6709\u8fd0\u7b97\u7535\u8def\u7684\u6838\u5fc3 \u8ba1\u7b97\u673a\u4e2d\u6240\u6709\u8fd0\u7b97\u90fd\u57fa\u4e8e\u52a0\u6cd5\u5668\u5b9e\u73b0 \u52a0\u6cd5\u5668\u4e0d\u77e5\u9053\u6240\u8fd0\u7b97\u7684\u662f\u65e0\u7b26\u53f7\u6570\u8fd8\u662f\u5e26\u7b26\u53f7\u6570\uff0c\u53ea\u8ba401\u5e8f\u5217 \u52a0\u6cd5\u5668\u4e0d\u5224\u5b9a\u5bf9\u9519\uff0c\u603b\u662f\u53d6\u4f4en\u4f4d\u4f5c\u4e3a\u7ed3\u679csum\uff0c\u5e76\u751f\u6210\u6761\u4ef6\u6807\u5fd7(Flag)\u4fe1\u606f [ \u6761\u4ef6\u6807\u5fd7\u4f4d / \u6761\u4ef6\u7801CC ] ZF \uff1a\u96f6\u6807\u5fd7\uff0c\u82e5sum\u4f4d0\uff0c\u52191\uff0c\u5426\u52190 OF \uff1a\u6ea2\u51fa\u6807\u5fd7\uff0c\u82e5A\u4e0eB\u2019\u540c\u53f7\u4f46\u4e0esum\u4e0d\u540c\u53f7\uff0c\u52191\uff0c\u5426\u52190 CF \uff1a\u505a\u52a0\u8fd0\u7b97\u65f6\uff0cCF\u8868\u793a\u8fdb\u4f4d\uff1b\u505a\u51cf\u8fd0\u7b97\u65f6\uff0cCF\u8868\u793a\u501f\u4f4d\u3002\u82e5\u5728\u52a0\u6cd5\u4e2d\u6709\u8fdb\u4f4d\uff0c\u5219Cout=1\u800cSub=0\uff1b\u82e5\u5728\u51cf\u6cd5\u4e2d\u6709\u501f\u4f4d\uff0c\u5219Cout=0\u800cSub=1 SF \uff1a\u7b26\u53f7\u6807\u5fd7\uff0csum\u7684\u7b26\u53f7 \u751f\u6210\u5e76\u4fdd\u5b58\u6761\u4ef6\u6807\u5fd7\u662f\u4e3a\u4e86\u5728 \u5206\u652f\u6307\u4ee4(\u6761\u4ef6\u8f6c\u79fb\u6307\u4ee4) \u4e2d\u88ab\u7528\u4f5c\u662f\u5426\u8f6c\u79fb\u6267\u884c\u7684\u6761\u4ef6 \u6761\u4ef6\u6807\u5fd7\u5728\u8fd0\u7b97\u7535\u8def\u4e2d\u4ea7\u751f\uff0c\u88ab\u8bb0\u5f55\u5230\u4e13\u95e8\u7684\u5bc4\u5b58\u5668\u4e2d\uff0c\u901a\u5e38\u79f0\u4e3a \u7a0b\u5e8f/\u72b6\u6001\u5b57\u5bc4\u5b58\u5668\u6216\u6807\u5fd7\u5bc4\u5b58\u5668 \uff0c\u6bcf\u4e2a\u6807\u5fd7\u5bf9\u5e94\u6807\u5fd7\u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a\u6807\u5fd7\u4f4d\uff0c\u5982IA-32\u4e2d\u7684EFLAGS\u5bc4\u5b58\u5668 n\u4f4d\u5e26\u6807\u5fd7\u52a0\u6cd5\u5668 \u4e3a\u4ec0\u4e48\u65e0\u6cd5\u5224\u65ad\u6ea2\u51fa\uff1f \u4e3a\u4ec0\u4e48cin\u662fsub\uff1f \u6574\u6570\u52a0\u6cd5\u4e3e\u4f8b \u6574\u6570\u51cf\u6cd5\u4e3e\u4f8b \u65e0\u7b26\u53f7\u6574\u6570\u52a0\u6cd5\u6ea2\u51fa\u5224\u65ad\u7a0b\u5e8f \u53d1\u751f\u6ea2\u51fa\u65f6\uff0c\u4e00\u5b9a\u6ee1\u8db3 result<x && result<y \uff0c\u5426\u5219\u82e5 x+y-2^n \u2265 x\uff0c\u5219y\u22652^n x+y-2^n \u2265 x\uff0c\u5219y\u22652^n \uff0c\u4e0d\u53ef\u80fd 1 2 3 4 int uadd_ok ( unsigned x , unsigned y ){ unsigned sum = x + y ; return sum >= x ; } \u5e26\u7b26\u53f7\u6574\u6570\u52a0\u6cd5\u6ea2\u51fa\u5224\u65ad\u7a0b\u5e8f 1 2 3 4 5 6 7 int tadd_ok ( int x , int y ) { int sum = x + y ; int neg_over = x < 0 && y < 0 && sum >= 0 ; int pos_over = x >= 0 && y >= 0 && sum < 0 ; return ! neg_over && ! pos_over ; } \u65e0\u7b26\u53f7\u51cf\u7684\u6ea2\u51fa\u5224\u65ad\u51fd\u6570 \u5e26\u7b26\u53f7\u51cf\u7684\u6ea2\u51fa\u5224\u65ad\u51fd\u6570 1 2 3 4 5 6 7 8 9 10 11 /* WARNING: This code is buggy.\u3000*/ int tsub_ok ( int x , int y ){ return tadd + ok ( x , - y ); } // \u5f53x=0\uff0cy=0x80000000\u65f6\uff0c\u8be5\u51fd\u6570\u5224\u65ad\u5931\u8bef // \u56e0\u4e3a y = -2^(31) // 0 - [-2^(31) ] = 2 ^ (31) \u6ee1\u8db3\u6b63\u6ea2\u51fa\u7684\u6761\u4ef6 // \u4f46\u662f\u5982\u679cx\u548cy\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165tadd_ok\u51fd\u6570\u4e2d\u65f6 // y\u7ecf\u8fc7\u53d6\uff0d\u4e4b\u540e \u4ecd\u7136\u4e3a -2^(31) // \u6240\u4ee5 x \u548c -y\u76f8\u52a0\u7684\u65f6\u5019\uff0c\u662f\u4e24\u4e2a\u5f02\u53f7\u6570\u76f8\u52a0\uff0c\u4e0d\u4f1a\u5224\u65ad\u4e3a\u6ea2\u51fa \u5982\u4f55\u6539\u8fdb\u5462\uff1f","title":"\u8865\u7801\u52a0\u51cf\u8fd0\u7b97\u5668"},{"location":"CSAPP/CSAPP-PartOne-1/#b-4","text":"\u6574\u6570\u4e58\u6cd5\u8fd0\u7b97 \u9ad8\u7ea7\u8bed\u8a00\u4e2d\u4e24\u4e2an\u4f4d\u6574\u6570\u76f8\u4e58\u5f97\u5230\u7684\u7ed3\u679c\u901a\u5e38\u4e5f\u662f\u4e00\u4e2an\u4f4d\u6574\u6570(\u53d6\u4f4en\u4f4d) \u4ee5\u4e0b\u662f\u81ea\u5df1\u603b\u7ed3\u7684\u7528\u4e8c\u8fdb\u5236\u65b9\u6cd5\u8ba1\u7b97\u4e58\u6cd5\u4e5f\u4e0d\u77e5\u9053\u5bf9\u4e0d\u5bf9 \u65e0\u7b26\u53f7\u4e58\u6cd5\uff1a\u6b63\u5e38\u5341\u8fdb\u5236\u4e58\u6cd5\uff0c\u5f53\u8d85\u957f\u5219\u622a\u65ad \u5e26\u7b26\u53f7\u4e58\u6cd5 \u8d85\u957f\uff0c\u622a\u65ad \u4e0d\u591f\u957f\uff0c\u9700\u8fdb\u884c\u7b26\u53f7\u6269\u5c55\uff0c\u7b26\u53f7\u901a\u8fc7\u4e00\u5f00\u59cb\u7ed9\u7684\u4e24\u4e2a\u6570\u503c\u8fdb\u884c\u5224\u65ad \u9ad8\u7ea7\u8bed\u8a00\u4e2d\uff0c\u7a0b\u5e8f\u5458\u5224\u65ad\u8fd4\u56de\u503cz\u662f\u6b63\u786e\u7684\u8bed\u53e5 !x || z / x == y 1 2 3 4 int mul ( int x , int y ){ int z = x * y ; return z ; } \u5728\u7f16\u8bd1\u5668\u5c42\u9762\uff0c\u5f53 -2{n-1} \\leq x*y \\le 2{n-1} (\u4e0d\u6ea2\u51fa) -2{n-1} \\leq x*y \\le 2{n-1} (\u4e0d\u6ea2\u51fa) \u4e58\u79ef\u662f\u6b63\u786e\u5224\u65ad\u65b9\u5f0f\u4e3a \u65e0\u7b26\u53f7\uff1a\u4e58\u79ef\u7684\u9ad8n\u4f4d\u4e3a\u51680\uff0c\u5219\u4e0d\u6ea2\u51fa \u6709\u7b26\u53f7\uff1a\u4e58\u79ef\u7684\u9ad8n\u4f4d\u4e3a\u51680\u6216\u51681\u5e76\u7b49\u4e8e\u4f4en\u4f4d\u7684\u6700\u9ad8\u4f4d / \u5373\u4e58\u79ef\u7684\u9ad8n+1\u4f4d\u4e3a\u51680\u6216\u51681 \u786c\u4ef6 \u4e0d\u5224\u65ad \u6ea2\u51fa(\u4e58\u6cd5\u6307\u4ee4\u4e0d\u751f\u6210\u6ea2\u51fa\u6807\u5fd7)\uff0c\u4ec5\u4fdd\u75592n\u4f4d\u4e58\u79ef\uff0c\u4f9b\u8f6f\u4ef6\u4f7f\u7528\u548c\u5224\u65ad\u662f\u5426\u6ea2\u51fa \u6307\u4ee4\uff1a\u5206 \u65e0\u7b26\u53f7 \u6570\u4e58\u6307\u4ee4\u3001 \u5e26\u7b26\u53f7 \u6574\u6570\u4e58\u6307\u4ee4 \u5728\u65e0\u7b26\u53f7\u4e58\u548c\u5e26\u7b26\u53f7\u4e58\u4e2d\uff0c\u5c3d\u7ba1\u4f4d\u7ea7\u8868\u793a\u76f8\u540c\uff0c\u4f46\u662f2n\u4f4d\u7684\u4e58\u79ef\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u8981\u533a\u5206(\u4e0d\u540c\u4e8e\u52a0\u6cd5) \u6574\u6570\u4e58\u6cd5\u6ea2\u51fa\u6f0f\u6d1e 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /*\u590d\u5236\u6570\u7ec4\u5230\u5806\u4e2d\uff0ccount\u4e3a\u6570\u7ec4\u5143\u7d20\u4e2a\u6570*/ int copy_array ( int * array , int count ){ int i ; /*\u5728\u5806\u533a\u7533\u8bf7\u4e00\u5757\u5185\u5b58*/ int * myarray = ( int * ) malloc ( count * sizeof ( int )); if ( myarray == NULL ) return -1 ; for ( i = 0 ; i < count ; i ++ ) myarray [ i ] = array [ i ]; return count ; } // \u5f53\u53c2\u6570count\u5f88\u5927\u65f6\uff0ccount*sizeof(int)\u4f1a\u6ea2\u51fa // count = 2^(30) + 1\u65f6\uff0ccount*sizeof(int) = [ 2^(30) + 1]* 2^2 mod 2^(32) = [ 2^(32) + 4] mod 2^(32) // \u5bfc\u81f4\u7a0b\u5e8f\u4ec5\u4ec5\u53ea\u7ed9\u51fd\u6570\u5206\u914d\u4e864\u4e2a\u5b57\u8282\u7684\u5185\u5b58 // \u5f53\u6570\u7ec4\u590d\u5236\u7684\u65f6\u5019\uff0c\u5806heap\u4e2d\u7684\u5927\u91cf\u6570\u636e\u88ab\u7834\u574f // \u653b\u51fb\u8005\u53ef\u6784\u9020\u7279\u6b8a\u53c2\u6570\u6765\u89e6\u53d1\u6574\u6570\u6ea2\u51fa\uff0c // \u4ee5\u4e00\u6bb5\u9884\u8bbe\u4fe1\u606f\u8986\u76d6\u4e00\u4e2a\u5df2\u5206\u914d\u7684\u5806\u7f13\u51b2\u533a\uff0c // \u9020\u6210\u8fdc\u7a0b\u670d\u52a1\u5668\u5d29\u6e83\u6216\u8005\u6539\u53d8\u5185\u5b58\u6570\u636e\u5e76\u6267\u884c\u4efb\u610f\u4ee3\u7801 \u53d8\u91cf\u4e0e\u5e38\u6570\u4e4b\u95f4\u7684\u4e58\u8fd0\u7b97 \u4e58\u6cd5\u8fd0\u7b97\u6bd4\u79fb\u4f4d\u548c\u52a0\u6cd5\u7b49\u8fd0\u7b97\u6240\u7528\u65f6\u95f4\u957f\uff0c\u7f16\u8bd1\u5668\u5728\u5904\u7406\u53d8\u91cf\u4e0e\u5e38\u6570\u76f8\u4e58\u65f6\uff0c\u5f80\u5f80\u4ee5\u79fb\u4f4d\u3001\u52a0\u6cd5\u3001\u51cf\u6cd5\u7684\u7ec4\u5408\u8fd0\u7b97\u6765\u4ee3\u66ff\u4e58\u6cd5\u8fd0\u7b97\u3002\u5982x*20 = (x << 4) + (x << 2)\uff0c\u56e0\u4e3a20 = 16 + 4 = 2^4 + 2^2\u3002\u5728\u4e58\u79ef\u6ea2\u51fa\u65f6\uff0c\u5229\u7528\u79fb\u4f4d\u548c\u52a0\u51cf\u8fd0\u7b97\u7ec4\u5408\u7684\u65b9\u5f0f\u5f97\u5230\u7684\u7ed3\u679c\u548c\u91c7\u7528\u76f4\u63a5\u76f8\u4e58\u7684\u7ed3\u679c\u662f\u4e00\u6837\u7684","title":"b-4 \u6574\u6570\u4e58\u6cd5\u8fd0\u7b97"},{"location":"CSAPP/CSAPP-PartOne-1/#b-5","text":"\u6574\u6570\u7684\u9664\u8fd0\u7b97 \u5bf9\u4e8e\u5e26\u7b26\u53f7\u6574\u6570\uff0cn\u4f4d\u6574\u6570\u9664\u4ee5n\u4f4d\u6574\u6570 - -2^{n-1} / (-1) = 2^{n-1} -2^{n-1} / (-1) = 2^{n-1} \u4f1a\u53d1\u751f\u6ea2\u51fa\uff0c\u56e0\u4e3a\u5047\u8bbe\u572832\u4f4d\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5927\u80fd\u8868\u793a\u7684\u6574\u6570\u662f 2^{31}-1 2^{31}-1 - \u5176\u4f59\u60c5\u51b5\u4e0d\u4f1a\u53d1\u751f\u6ea2\u51fa\uff0c\u56e0\u4e3a\u5546\u7684\u7edd\u5bf9\u503c\u4e0d\u53ef\u80fd\u6bd4\u88ab\u9664\u6570\u7684\u7edd\u5bf9\u503c\u5927 - \u56e0\u4e3a\u6574\u6570\u9664\u6cd5\u7684\u5546\u4e5f\u662f\u6574\u6570\uff0c\u6240\u4ee5\u5728\u4e0d\u80fd\u6574\u9664\u7684\u65f6\u5019\u901a\u5e38\u6309\u7167\u671d0\u65b9\u5411\u820d\u5165 - \u6b63\u6570\u5546\u53d6\u6bd4\u81ea\u8eab\u5c0f\u7684\u6700\u63a5\u8fd1\u6574\u6570(Floor\uff0c\u5730\u677f) - \u8d1f\u6570\u5546\u53d6\u6bd4\u81ea\u8eab\u5927\u7684\u6700\u63a5\u8fd1\u6574\u6570(Ceiling\uff0c\u5929\u677f) - \u6574\u96640\u7684\u7ed3\u679c\u65e0\u6cd5\u7528\u4e00\u4e2a\u673a\u5668\u6570\u8868\u793a\uff0c\u6240\u4ee5\u5f53\u9664\u6570\u4e3a0\u65f6\uff0c\u4f1a\u53d1\u751f \u5f02\u5e38 \uff0c\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u5904\u7406 - \u672a\u53d1\u751f\u9664\u6cd5\u6ea2\u51fa / \u6d6e\u70b9\u5f02\u5e38 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ```c++ // CASE 1 int a = 0x80000000; int b = a / -1; printf(\"%d\\n\",b); // \u8fd0\u884c\u7ed3\u679c\u4e3a-2147483648 // \u56e0\u4e3a\u9664\u4ee5-1\u88ab\u4f18\u5316\u6210\u53d6\u8d1f\u6307\u4ee4 // \u76f8\u5f53\u4e8e\u628a0x80000000\u53d6\u8d1f\u540e\u7684\u673a\u5668\u7801\u4ecd\u7136\u662f 1000+28\u4e2a0 // \u8d1f\u6570\u5373\u4e3a -2^(31) // \u6545\u672a\u53d1\u751f\u9664\u6cd5\u6ea2\u51fa // CASE 2 int a = 0x80000000; int b = -1; int c = a / b; printf(\"%d\\n\",c); // \u8fd0\u884c\u7ed3\u679c\u4e3a\u201cFloating point exception\u201d\uff0c\u5373CPU\u68c0\u6d4b\u5230\u4e86\u5f02\u5e38 ``` \u53d8\u91cf\u4e0e\u5e38\u6570\u4e4b\u95f4\u7684\u9664\u8fd0\u7b97 \u7531\u4e8e\u8ba1\u7b97\u673a\u4e2d\u9664\u6cd5\u8fd0\u7b97\u6bd4\u8f83\u590d\u6742\uff0c\u800c\u4e14\u4e0d\u80fd\u7528\u6d41\u6c34\u7ebf\u65b9\u5f0f\u5b9e\u73b0\uff0c\u4e14\u9700\u8981\u6bd4\u4e58\u6cd5\u6307\u4ee4\u8fd8\u8981\u957f\u7684\u65f6\u949f\u5468\u671f\u3002\u6240\u4ee5\u7f16\u8bd1\u5668\u5728\u5904\u7406 \u4e00\u4e2a\u53d8\u91cf\u4e0e\u4e00\u4e2a2\u7684\u5e42\u6b21\u5f62\u5f0f\u7684\u6574\u6570\u76f8\u9664 \u65f6\uff0c\u5e38\u91c7\u7528 \u53f3\u79fb\u8fd0\u7b97 (\u65e0\u7b26\u53f7\uff1a\u903b\u8f91\u53f3\u79fb\uff1b\u5e26\u7b26\u53f7\uff1a\u7b97\u672f\u53f3\u79fb)\u6765\u5b9e\u73b0 \u7b97\u672f\u5de6\u3001\u53f3\u79fb\u548c\u903b\u8f91\u5de6\u3001\u53f3\u79fb 1. \u7b97\u672f\u5de6\u79fb < < \uff1a\u4f9d\u6b21\u5de6\u79fb\u4e00\u4f4d\uff0c\u5c3e\u90e8\u88650\uff0c\u6700\u9ad8\u7684\u7b26\u53f7\u4f4d\u4fdd\u6301\u4e0d\u53d8 2. \u7b97\u672f\u53f3\u79fb>>\uff1a\u4f9d\u6b21\u53f3\u79fb\u4e00\u4f4d\uff0c\u5c3e\u90e8\u4e22\u5931\uff0c\u7b26\u53f7\u4f4d\u53f3\u79fb\u540e\uff0c\u539f\u4f4d\u7f6e\u4e0a**\u8865\u7b26\u53f7\u4f4d**\uff0c\u5373\u6b63\u6570\u88650\uff0c\u8d1f\u6570\u88651 > \u7b97\u672f\u8fd0\u7b97 > > 1. \u5de6\u79fb\uff1a\u65e0\u8bba\u6709/\u65e0\u7b26\u53f7\u6570\uff0c\u90fd\u53ef\u4ee5\u7528\u903b\u8f91\u5de6\u79fb\u5b9e\u73b0\u4e58\u4ee5$2^k$ > 2. \u53f3\u79fb\uff1a > - **\u65e0\u7b26\u53f7\u6570\uff1a\u903b\u8f91\u53f3\u79fb**\uff0c\u9664\u4ee5$2^k$\uff08\u9664\u6cd5+\u54110\u820d\u5165\uff09 > - **\u6709\u7b26\u53f7\u6570\uff1a\u7b97\u672f\u53f3\u79fb** > - \u6b63\u6574\u6570:\u9664\u4ee5 $2^k$ (\u9664\u6cd5 + \u54110\u820d\u5165) > - \u8d1f\u6574\u6570:\u9664\u4ee5 $2^k$ (\u9664\u6cd5 + \u82e5\u4e0d\u7ea0\u504f\u5219\u662f\u8fdc\u79bb0\u820d\u5165)\uff0c\u6240\u4ee5\u6700\u540e\u8fd8\u8981\u4f7f\u7528\u504f\u7f6e(+1 < >>\uff1a\u6700\u9ad8\u4f4d\u88650\uff0c\u6700\u4f4e\u4f4d\u4e22\u5931 \u80fd\u6574\u9664\u76f4\u63a5\u53f3\u79fb \u4e0d\u80fd\u6574\u9664\u65f6\uff0c\u5219\u53f3\u79fb\u79fb\u51fa\u7684\u4f4d\u4e2d\u6709\u975e0\uff0c\u91c7\u7528 \u671d\u96f6\u820d\u5165 (\u622a\u65ad) \u65e0\u7b26\u53f7\u6570 \u3001 \u5e26\u7b26\u53f7\u6b63\u6574\u6570 - \u5730\u677f\uff1a\u79fb\u9664\u7684\u4f4e\u4f4d\u76f4\u63a5 \u820d\u5f03 \u5e26\u7b26\u53f7\u8d1f\u6574\u6570 - \u5929\u677f\uff1a\u52a0\u504f\u79fb\u91cf 2^k -1 2^k -1 \uff0c\u7136\u540e\u518d\u53f3\u79fbk\u4f4d\uff0c\u4f4e\u4f4d\u622a\u65ad(k\uff1a\u53f3\u79fb\u4f4d\u6570) \u5b9e\u8df5\u662f\u68c0\u9a8c\u771f\u7406\u7684\u552f\u4e00\u6807\u51c6 \u539f\u7406\u89e3\u6790 \u5982\u679c\u4ec5\u4ec5\u662f\u7b97\u672f\u53f3\u79fb>>\uff0c\u5219\u5f97\u5230 \\lfloor x / 2^k \\rfloor \\lfloor x / 2^k \\rfloor \uff0c\u6240\u4ee5\u662f\u8fdc\u79bb0\u7684\u820d\u5165\u65b9\u5411\uff0c\u4e3a\u4e86\u4f7f\u5f97\u662f\u54110\u65b9\u5411\u7684\u820d\u5165\uff0c\u5219\u6309 \\lceil (x+2^k-1)/2^k \\rceil \\lceil (x+2^k-1)/2^k \\rceil \u8ba1\u7b97\uff0c\u5373 (x + (1 << k ) -1) >> k (x + (1 << k ) -1) >> k \u4e3e\u4f8b\uff1a\u5047\u8bbex\u4e3a\u4e00\u4e2aint\u578b\u53d8\u91cf\uff0c\u8bf7\u7ed9\u51fa\u4e00\u4e2a\u7528\u6765\u8ba1\u7b97x/32\u7684\u503c\u7684\u51fd\u6570div32\u3002\u8981\u6c42\u4e0d\u80fd\u4f7f\u7528\u9664\u6cd5\u3001\u4e58\u6cd5\u3001\u6a21\u8fd0\u7b97\u3001\u6bd4\u8f83\u8fd0\u7b97\u3001\u5faa\u73af\u8bed\u53e5\u548c\u6761\u4ef6\u8bed\u53e5\uff0c\u53ef\u4ee5\u4f7f\u7528\u53f3\u79fb\u3001\u52a0\u6cd5\u4ee5\u53ca\u4efb\u4f55\u6309\u4f4d\u8fd0\u7b97 \u9664\u4ee532\uff0c\u76f8\u5f53\u4e8e\u53f3\u79fb5\u4f4d \u6b63\u6570\u76f4\u63a5\u53f3\u79fb \u8d1f\u6570\u9700\u8981\u52a0\u504f\u79fb\u91cf31 \u8bbe\u504f\u79fb\u91cf\u4e3ab\uff0c\u5219x\u4e3a\u6b63\u65f6\uff0cb=0\uff1bx\u4e3a\u8d1f\u65f6\uff0cb=31\uff0c\u5373(x>=0 ? x : (x+31))>>5 1 2 3 4 5 6 int div32 ( int x ){ /*\u6839\u636ex\u7684\u7b26\u53f7\u5f97\u5230\u504f\u79fb\u91cfb*/ /* 00000000 & 00011111 | 11111111(\u53f3\u79fb\u8865\u7b26\u53f7\u4f4d) & 00011111 */ int b = ( x >> 31 ) & 0x1F ; return ( x + b ) >> 5 ; }","title":"b-5 \u6574\u6570\u9664\u6cd5\u8fd0\u7b97"},{"location":"CSAPP/CSAPP-PartOne-1/#c","text":"\u4e3a\u4ec0\u4e48\u9700\u8981\u6d6e\u70b9\u6570\uff1f\u6d6e\u70b9\u6570\u662f\u5982\u4f55\u6d6e\u52a8\u7684\uff1f \u5b9a\u70b9\u6570\u7684\u8303\u56f4\u5b58\u5728\u7f3a\u9677\uff0c\u6bd4\u5982\u6570\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u5927\u90e8\u5206\u4f4d\u90fd\u662f0\uff0c\u5219\u4e0d\u80fd\u5145\u5206\u8fd0\u7528\u5b58\u50a8\u5355\u5143 \u5c0f\u6570\u7684\u5b58\u50a8\u548c\u8ba1\u7b97\u9700\u8981\u8003\u8651\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e\u548c\u5bf9\u9f50\u95ee\u9898 how a point floats? How much memory allocation needs an average point number? For the fixed point number, the computer allocates a fixed amount for fractional part, as for currency where you know how much precision you need, and the other fixed amount of bits for the integral part. If you have small numbers you need more space for the fractional part of the number, and for big numbers you want less for the fractional and more for the integral part. Here comes the floating point ability to float on the needs. A floating-point number sees the both parts as one number, which is put in one chunk of bits, named mantissa, and the rest of bits are for sign and for the exponent. The exponent tells where the floating-point is in this number \u53c2\u8003\u8d44\u6599 - [\u962e\u4e00\u5cf0-\u6d6e\u70b9\u6570\u7684\u4e8c\u8fdb\u5236\u8868\u793a](http://www.ruanyifeng.com/blog/2010/06/ieee_floating-point_representation.html) - what is a floating point number - https://www.zhihu.com/question/19848808 - https://www.quora.com/What-is-a-floating-point-numberhttps://www.webopedia.com/TERM/F/floating_point_number.html - https://stevenpcurtis.medium.com/what-is-a-floating-point-number-6991f2f85a28 - \u9488\u5bf9\u521d\u5b66\u8005\u7406\u89e3 - https://www.webopedia.com/TERM/F/floating_point_number.html","title":"c. \u3010\u6570\u503c\u6570\u636e\u3011\u6d6e\u70b9\u6570\u7684\u8868\u793a\u4e0e\u8fd0\u7b97"},{"location":"CSAPP/CSAPP-PartOne-1/#c-1","text":"\u5b9e\u6570\u7c7b\u578b\uff1a\u5355\u7cbe\u5ea6\u6d6e\u70b9(C\u8bed\u8a00:32\u4f4d)\u3001\u53cc\u7cbe\u5ea6\u6d6e\u70b9(C\u8bed\u8a00:64\u4f4d)\u3001\u6269\u5c55\u7cbe\u5ea6\u6d6e\u70b9(C\u8bed\u8a00:80/96\u4f4d) \u7c7b\u6bd4\u79d1\u5b66\u8ba1\u6570\u6cd5(Scientific Notation) Normalized \u89c4\u683c\u5316\u5f62\u5f0f - \u552f\u4e00 Unnormalized \u975e\u89c4\u683c\u5316 - \u4e0d\u552f\u4e00 \u4e8c\u8fdb\u5236\u5b9e\u6570 32\u4f4d\u6d6e\u70b9\u6570\u683c\u5f0f\u7684\u89c4\u683c\u5316\u6570\u7684\u8868\u793a \u00b10.1xxx * 2^E 2^E \uff0c\u4f46\u901a\u5e38\u89c4\u5b9a\u89c4\u683c\u5316\u6570\u7684\u5c0f\u6570\u70b9\u524d\u4e3a1\uff0c\u00b11.xxx * R^{Exponent} R^{Exponent} \uff0cR\u662f\u57fa(\u53ef\u4ee5\u662f2/4/8/16\uff0c\u7ea6\u5b9a\u4fe1\u606f\uff0c\u65e0\u9700\u663e\u5f0f\u8868\u793a) \u7b2c0\u4f4d\u6570\u7b26S \u7b2c1~8\u4f4d\u4e3a8\u4f4d\u79fb\u7801\u8868\u793a\u9636\u7801E(\u5047\u8bbe\u4e00\u822c\u7684\u504f\u7f6e\u5e38\u6570\u4e3a128=2^7) \u7b2c9~31\u4f4d\u4e3a24\u4f4d\u4e8c\u8fdb\u5236\u539f\u7801\u5c0f\u6570\u8868\u793a\u7684\u5c3e\u6570M \u539f\u7801\u5177\u6709 \u5bf9\u79f0\u6027 \u56e0\u4e3a\u89c4\u683c\u5316\u5c3e\u6570\u7684\u5c0f\u6570\u70b9\u540e \u7b2c\u4e00\u4f4d\u603b\u662f1 \uff0c\u6545\u89c4\u5b9a\u7b2c\u4e00\u4f4d\u9ed8\u8ba4\u76841\u4e0d\u660e\u663e\u8868\u793a\u51fa\u6765(\u8282\u7701\u5b58\u50a8\u7a7a\u95f4)\uff0c\u8fd9\u6837\u53ef\u752823\u4e2a\u6570\u4f4d\u8868\u793a24\u4f4d\u5c3e\u6570 \u6700\u5927\u6b63\u6570\uff1a 0.11...1 \u00d7 2^{11...1} = [ 1-2^{-24} ] \u00d7 2 ^ {127} 0.11...1 \u00d7 2^{11...1} = [ 1-2^{-24} ] \u00d7 2 ^ {127} \u5c0f\u6570\u70b9\u540e\u9762\u7684\u7b2c\u4e00\u4e2a1\u4e0d\u8868\u793a 8\u4e2a1\uff0c\u537311111111 = 255 = 127 + 128(\u504f\u7f6e\u5e38\u6570) \u3010e = E + Bias / E = e - Bias\u3011\uff0c\u6240\u4ee5\u4e0d\u52a0\u504f\u7f6e\u5e38\u6570\u80fd\u8868\u793a\u7684\u6700\u5927\u6570\u4e3a127 \u6700\u5c0f\u6b63\u6570\uff1a 0.10...0 \u00d7 2^{00...0} = [ 1 / 2 ] \u00d7 2 ^ {-128} 0.10...0 \u00d7 2^{00...0} = [ 1 / 2 ] \u00d7 2 ^ {-128} 8\u4e2a0\uff0c\u537300000000 = 0 = 128 + (-128) \u56e0\u4e3a\u539f\u7801\u5bf9\u79f0\uff0c\u6545\u5176\u8868\u793a\u8303\u56f4\u5173\u4e8e\u539f\u70b9\u5bf9\u79f0 \u673a\u56680\uff1a\u5c3e\u6570\u4e3a0\u6216\u843d\u5728\u4e0b\u6ea2\u533a\u4e2d\u7684\u6570(\u88ab\u820d\u5165) \u6d6e\u70b9\u6570\u8303\u56f4\u6bd4\u5b9a\u70b9\u6570\u5927\uff0c\u4f46\u6570\u7684\u4e2a\u6570\u6ca1\u53d8\u591a(\u56e0\u4e3a32\u4f4d\u7684\u7f16\u7801\uff0c\u7f16\u7801\u4e2a\u6570\u53ea\u80fd\u662f2\u768432\u6b21\u65b9\uff0c\u548c\u6574\u6570)\uff0c\u6545\u6570\u4e4b\u95f4\u66f4\u7a00\u758f\u4e14\u4e0d\u5747\u5300 IEEE 754\u6807\u51c6 Single Precision(\u5355\u7cbe\u5ea6) v = (-1)^s \u00d7 M \u00d7 2^E v = (-1)^s \u00d7 M \u00d7 2^E Sign bit \uff1a1\u8868\u793anegative\uff1b0\u8868\u793apositive Exponent(\u9636\u7801) \u9636\u7801 \u8868\u793a\u9636\u7684\u7f16\u7801\uff0c \u9636\u6216\u6307\u6570 \u8868\u793a\u9636\u7801\u7684\u503c E = Exp - Bias E\u662f\u6700\u521d\u7684\u6307\u6570\u7684\u503c\uff0cBias\u662f\u504f\u7f6e\u5e38\u6570\uff0cExp\u662f\u9636 SP \u89c4\u683c\u5316 \u9636\u7801\u8303\u56f4\u4e3a00000001(-126 = 1-127) ~ 11111110(127 = 254 - 127) \u51680\u548c\u51681\u7528\u6765\u8868\u793a\u7279\u6b8a\u503c bias\u4e3a127(single 2^7-1 2^7-1 )\uff0c1023(double 2^10-1 2^10-1 ) \u4e3a\u4ec0\u4e48bias\u9009\u62e9127\uff1f \u82e5\u7528128\uff0c\u5219\u9636\u7801\u8303\u56f4\u4e3a 00000001(-127)~11111110(126)\uff0c\u5219\u8868\u793a\u5c0f\u6570\u90e8\u5206\u591a\u4e86\u4e00\u4f4d\uff0c\u4f46\u662f\u8868\u793a\u6574\u6570\u90e8\u5206\u5c11\u4e86\u4e00\u4f4d\uff0c\u6240\u4ee5\u5c11\u4e86\u5f88\u591a\u53ef\u8868\u793a\u7684\u8303\u56f4\uff0c\u56e0\u4e3a\u5c0f\u6570\u7684\u4e00\u4f4d\u53d8\u5316\u8303\u56f4\u6bd4\u6574\u6570\u7684\u4e00\u4f4d\u53d8\u5316\u8303\u56f4\u5c11\uff0c\u5982\u7cbe\u5ea6\u75310.1 -> 0.01\uff0c\u591a\u8868\u793a\u4e860.01~0.1\u4e4b\u95f4\u7684\u5c0f\u6570\uff0c\u4f46\u662f\u5982\u679c\u7cbe\u5ea6\u75311 -> 10\uff0c\u5219\u4e0d\u4ec5\u53ef\u4ee5\u8868\u793a\u75311~10\u4e4b\u95f4\u7684\u5c0f\u6570\uff0c\u800c\u4e14\u8fd8\u80fd\u8868\u793a\u4e4b\u95f4\u7684\u5c0f\u6570 ( \u4e2a\u4eba\u60f3\u6cd5\uff0c\u4e5f\u8bb8\u8868\u8ff0\u4e0d\u7cbe\uff0c\u610f\u4f1a\u610f\u601d) Significand(\u90e8\u5206\u5c3e\u6570) \u89c4\u683c\u5316\u5c3e\u6570\u6700\u9ad8\u4f4d\u603b\u662f1\uff0c\u6240\u4ee5\u9690\u542b\u8868\u793a\uff0c\u77011\u4f4d\uff1a1 + 23bits(single)\uff0c1 + 52bits(double) frac = 0...0 (M = 1.0)\u65f6\uff0c\u4e3a\u6700\u5c0f\u503c\uff1bfrac = 1...1(M = 2.0 - \u03b5)\u65f6\uff0c\u4e3a\u6700\u5927\u503c SP: (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 127} (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 127} DP: (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 1023} (-1)^S \u00d7 (1 + Significand) \u00d7 2^{Exponent - 1023} \u7279\u6b8a\u6570\u7684\u8868\u793a \u503c \u673a\u5668\u6570\u8868\u793a exponent significand sign \u76f8\u5173\u64cd\u4f5c 0 +0: 0 00000000 0~0(23bits) / -0: 1 00000000 0~0(23bits) all zeros all zeros both cases \u00b1 valid +\u221e / -\u221e +\u221e: 0 11111111 0~0(23bits) / -\u221e: 1 11111111 0~0(23bits) all ones(11111111B = 255) all zeros 5.0 / 0 = +\u221e; -5.0 / 0 = -\u221e; 5 + (+\u221e) = +\u221e; (+\u221e) + (+\u221e) = +\u221e; 5 -(+\u221e) = -\u221e; (-\u221e) - (+\u221e) = -\u221e \u975e\u6570 NaN(Not a Number) 255 nonzero sqrt(-4.0)=NaN; 0/0=NaN; op(NaN,x)=NaN; +\u221e+(-\u221e)=NaN; +\u221e-(+\u221e)=NaN; \u221e/\u221e=NaN \u975e\u89c4\u683c\u5316\u6570 Denorms 0 nonzero \u89c4\u683c\u5316\u6570 Norms 1-254(exp\u22600...0\u4e14exp\u22601...1) \u4efb\u610f\u5c0f\u6570\u70b9\u524d\u9690\u542b1 \u6d6e\u70b9\u6570\u96640\u7684\u7ed3\u679c\u662f \u00b1\u221e\uff0c\u800c\u4e0d\u662f\u6ea2\u51fa\u5f02\u5e38(\u6574\u6570\u96640\u4e3a\u5f02\u5e38)\uff0c\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u5229\u7528\u00b1\u221e\u4f5c\u6bd4\u8f83\uff0c\u4f8b\u5982 X/0 > Y \u53ef\u4f5c\u4e3a\u6709\u6548\u6bd4\u8f83\uff1f\uff1f\uff1f \u4e3a\u4ec0\u4e48\u53ef\u4ee5\u4f5c\u4e3a\u6709\u6548\u6bd4\u8f83 NaNs\u53ef\u4ee5\u5e2e\u52a9\u8c03\u8bd5\u7a0b\u5e8f\u548c\u5224\u65ad\u539f\u56e0\uff0c\u800c\u4e0d\u4f1a\u8ba9\u7a0b\u5e8f\u51fa\u73b0\u5f02\u5e38\u800c\u65e0\u6cd5\u6267\u884c\u548c\u5f97\u4e0d\u5230\u7ed3\u679c\uff0c\u4e5f\u65e0\u6cd5\u67e5\u627e\u539f\u56e0 \u975e\u89c4\u683c\u5316\u6570(Denorms)\u7684\u8868\u793a \u6761\u4ef6\u662fexp = 0...0 \u9636\u7801\u503c\uff1a E = 1 - Bias(instead of E = 0 - Bias) \u76f8\u5f53\u4e8e\u6307\u6570\u6052\u4e3a-126\u4e86(\u5728\u5355\u7cbe\u5ea6\u4e2d) \u539f\u56e0\uff1a\u4f7f\u5f97\u6700\u5927\u975e\u89c4\u683c\u5316\u6570\u548c\u6700\u5c0f\u89c4\u683c\u5316\u6570\u4e4b\u95f4\u53ef\u4ee5\u5e73\u6ed1\u8f6c\u6362\uff0c\u8865\u507f\u975e\u89c4\u683c\u5316\u6570\u7684\u5c3e\u6570\u6ca1\u6709\u9690\u542b\u7684\u5f00\u5934\u76841 \u5047\u8bbe\u6b63\u6570\uff0c\u5219\u89c4\u683c\u5316\u6570\u80fd\u8868\u793a\u7684\u6700\u5c0f\u6b63\u6570\u4e3a 2^{-126} = 1.0...0 \u00d7 2^{-126} 2^{-126} = 1.0...0 \u00d7 2^{-126} \uff0c0 00000001 0~0(23bits) [2^{-126},2^{-125}] [2^{-126},2^{-125}] \u7684\u533a\u95f4\u957f\u5ea6\u4e3a 2^{-126} 2^{-126} \uff0c\u800c [2^{-125},2^{-126}] [2^{-125},2^{-126}] \u7684\u533a\u95f4\u957f\u5ea6\u4e3a 2^{-125} 2^{-125} \uff0c\u662f\u524d\u8005\u7684\u533a\u95f4\u957f\u5ea6\u7684\u4e24\u500d\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u533a\u95f4\u90fd\u53ef\u4ee5\u8868\u793a 2^{23} 2^{23} \u4e2a\u6570\uff0c\u6240\u4ee5\u6570\u7684\u95f4\u8ddd\u4e5f\u662f\u524d\u8005\u6570\u7684\u95f4\u8ddd\u7684\u4e24\u500d -> \u6d6e\u70b9\u6570\u5f80\u6570\u8f74\u6b63\u65b9\u5411\u4e0a\u6570\u7684\u95f4\u8ddd\u8d8a\u5927\uff0c\u8d8a\u7a00\u758f\uff0c\u8d8a\u79bb\u539f\u70b9\u8fd1\u7684\u6570\uff0c\u7cbe\u5ea6\u8d8a\u597d \u673a\u5668\u6570\u8f6c\u6362\u4e3a\u771f\u503c \u771f\u503c\u8f6c\u6362\u4e3a\u673a\u5668\u6570 \u6d6e\u70b9\u6570\u7cbe\u5ea6\uff1a\u5f53\u8f93\u5165\u6570\u636e\u662f\u4e00\u4e2a\u4e0d\u53ef\u8868\u793a\u6570\u65f6\uff0c\u673a\u5668\u5c06\u5176\u8f6c\u6362\u4e3a\u6700\u90bb\u8fd1\u7684\u53ef\u8868\u793a\u6570","title":"c-1 \u6d6e\u70b9\u6570\u7684\u7f16\u7801\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-1/#c-2","text":"\u57fa\u672c\u601d\u60f3\uff1a 1. \u8ba1\u7b97\u7cbe\u786e\u7ed3\u679c 2. \u53d8\u6362\u5230\u6307\u5b9a\u683c\u5f0f - \u53ef\u80fd\u6ea2\u51fa\uff1a\u9636\u7801(Exponent)\u592a\u5927 - \u5c0f\u6570\u90e8\u5206\u53ef\u80fd\u9700\u8981\u820d\u5165 \u8bbe\u4e24\u4e2a\u89c4\u683c\u5316\u6d6e\u70b9\u6570\u5206\u522b\u4e3a\uff1a A = Ma*2^{Ea},B =Mb*2^{Eb} A = Ma*2^{Ea},B =Mb*2^{Eb} A \\pm B = (Ma \\pm Mb*2^{-(Ea-Eb)})*2^{Ea},\u5047\u8bbeEa \\geq Eb A \\pm B = (Ma \\pm Mb*2^{-(Ea-Eb)})*2^{Ea},\u5047\u8bbeEa \\geq Eb A*B = (Ma * Mb)*2^{Ea+Eb} A*B = (Ma * Mb)*2^{Ea+Eb} A / B = (Ma / Mb)*2^{Ea-Eb} A / B = (Ma / Mb)*2^{Ea-Eb} \u4e0a\u8ff0\u8fd0\u7b97\u7ed3\u679c\u53ef\u80fd\u51fa\u73b0\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5: \u9636\u7801\u4e0a\u6ea2\uff1a\u4e00\u4e2a\u6b63\u6307\u6570\u8d85\u8fc7\u4e86\u6700\u5927\u5141\u8bb8\u503c=\u3009+\u221e/-\u221e/\u6ea2\u51fa SP\u6700\u5927\u6307\u6570\u4e3a127 \u9636\u7801\u4e0b\u6ea2\uff1a\u4e00\u4e2a\u8d1f\u6307\u6570\u8d85\u8fc7\u4e86\u6700\u5c0f\u5141\u8bb8\u503c=\u3009+0/-0 SP\u6700\u5c0f\u6307\u6570\u4e3a-126 \u5c3e\u6570\u6ea2\u51fa\uff1a\u6700\u9ad8\u6709\u6548\u4f4d\u6709\u8fdb\u4f4d=\u3009\u53f3\u89c4 \u5c3e\u6570\u6ea2\u51fa\uff0c\u7ed3\u679c\u4e0d\u4e00\u5b9a\u6ea2\u51fa 1.5+1.5=\uff1f \u975e\u89c4\u683c\u5316\u5c3e\u6570\uff1a\u6570\u503c\u90e8\u5206\u9ad8\u4f4d\u4e3a0 =\u3009\u5de6\u89c4 1.5-1.0=\uff1f \u53f3\u89c4\u6216\u5bf9\u9636\u65f6\uff0c\u53f3\u6bb5\u6709\u6548\u4f4d\u4e22\u5931=\u3009\u5c3e\u6570\u820d\u5165 \u8fd0\u7b97\u8fc7\u7a0b\u4e2d\u6dfb\u52a0\u4fdd\u62a4\u4f4d IEEE\u5efa\u8bae\u5b9e\u73b0\u65f6\u4e3a\u6bcf\u79cd\u5f02\u5e38\u60c5\u51b5\u63d0\u4f9b\u4e00\u4e2a \u81ea\u9677\u5141\u8bb8\u4f4d \u3002\u82e5\u67d0\u5f02\u5e38\u5bf9\u5e94\u7684\u4f4d\u4e3a1\uff0c\u5219\u53d1\u751f\u76f8\u5e94\u5f02\u5e38\u65f6\uff0c\u5c31\u8c03\u7528\u4e00\u4e2a\u7279\u5b9a\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u6267\u884c IEEE 754 \u6807\u51c6\u89c4\u5b9a\u7684\u4e94\u79cd\u5f02\u5e38\u60c5\u51b5\uff1a \u65e0\u6548\u8fd0\u7b97\uff08\u65e0\u610f\u4e49\uff09 \u8fd0\u7b97\u65f6\u6709\u4e00\u4e2a\u6570\u662f\u975e\u6709\u9650\u6570\uff0c\u5982\uff1a\u52a0/ \u51cf\u221e\u30010 x \u221e\u3001\u221e/\u221e\u7b49 \u7ed3\u679c\u65e0\u6548\uff0c\u5982\uff1a\u6e90\u64cd\u4f5c\u6570\u662fNaN\u30010/0\u3001x REM 0\u3001\u221eREM y \u7b49 \u9664\u4ee50\uff08\u5373\uff1a\u65e0\u7a77\u5927\uff09 \u6570\u592a\u5927\uff08\u9636\u4e0a\u6ea2\uff09: \u5bf9\u4e8eSP\uff0c\u6307\u9636\u7801E >1111 1110 \uff08\u6307\u6570\u5927\u4e8e127\uff09 \u6570\u592a\u5c0f\uff08\u9636\u4e0b\u6ea2\uff09: \u5bf9\u4e8eSP\uff0c\u6307\u9636\u7801E < 0000 0001\uff08\u6307\u6570\u5c0f\u4e8e-126\uff09 \u7ed3\u679c\u4e0d\u7cbe\u786e\uff08\u820d\u5165\u65f6\u5f15\u8d77\uff09\uff0c\u4f8b\u5982\u2153\u30011/10\u7b49\u4e0d\u80fd\u7cbe\u786e\u8868\u793a\u6210\u6d6e\u70b9\u6570 \u4e0a\u8ff0\u60c5\u51b5\u786c\u4ef6\u53ef\u4ee5\u6355\u6349\u5230\uff0c\u56e0\u6b64\u8fd9\u4e9b\u5f02\u5e38\u53ef\u8bbe\u5b9a\u8ba9\u786c\u4ef6\u5904\u7406\uff0c\u4e5f\u53ef\u8bbe\u5b9a\u8ba9\u8f6f\u4ef6\u5904\u7406\u3002\u8ba9\u786c\u4ef6\u5904\u7406\u65f6\uff0c\u79f0\u4e3a \u786c\u4ef6\u9677\u9631 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include <stdio.h> int main (){ // case 1 int a = 1 , b = 0 ; printf ( \"division by zero: %d \\n \" , a / b ); // \u6574\u6570\u96640\u4f1a\u53d1\u751f\u5f02\u5e38 // case 2 double x = 1.0 , y = -1.0 , z = 0.0 ; printf ( \"division by zero: %f %f \\n \" , x / z , y / z ); // \u7ed3\u679c\u4e3a 1.#INFOO -1.#INFOO // \u6d6e\u70b9\u6570\u96640\u4e0d\u4f1a\u51fa\u73b0\u5f02\u5e38 // \u56e0\u4e3a\u5728\u6d6e\u70b9\u8fd0\u7b97\u4e2d\uff0c\u4e00\u4e2a\u6709\u9650\u6570\u9664\u4ee50\uff0c\u7ed3\u679c\u4e3a\u6b63\u65e0\u7a77\u5927(\u8d1f\u65e0\u7a77\u5927) return 0 ; }","title":"c-2 \u6d6e\u70b9\u6570\u7684\u8fd0\u7b97"},{"location":"CSAPP/CSAPP-PartOne-1/#_8","text":"\u57fa\u672c\u8981\u70b9\uff1a (\u5047\u5b9a\uff1a Xm Xm \u3001 Ym Ym \u5206\u522b\u662f X X \u548c Y Y \u7684\u5c3e\u6570\uff0c Xe Xe \u548c Ye Ye \u5206\u522b\u662f X X \u548c Y Y \u7684\u9636\u7801) \u6c42\u9636\u5dee\uff1a \\Delta e = Xe-Ye \\Delta e = Xe-Ye (\u82e5 Ye > Xe Ye > Xe \uff0c\u5219\u7ed3\u679c\u7684\u9636\u7801\u4e3a Ye Ye ) \u5bf9\u9636\uff1a\u5c06 Xm Xm \u53f3\u79fb \\Delta e \\Delta e \u4f4d\uff0c\u5c3e\u6570\u53d8\u4e3a Xm*2^{Xe-Ye} Xm*2^{Xe-Ye} (\u4fdd\u7559\u53f3\u79fb\u90e8\u5206 \u9644\u52a0\u4f4d ) \u76ee\u7684\u662f\u4f7f\u4e24\u6570 \u9636\u7801\u76f8\u7b49 \u5c0f\u9636\u5411\u5927\u9636\u770b\u9f50\uff0c\u9636\u5c0f\u7684\u90a3\u4e2a\u6570\u7684\u5c3e\u6570\u53f3\u79fb\uff0c\u53f3\u79fb\u4f4d\u6570\u7b49\u4e8e\u4e24\u4e2a\u9636\u7801\u5dee\u7684\u7edd\u5bf9\u503c IEEE 754\u5c3e\u6570\u53f3\u79fb\u65f6\uff0c\u8981\u5c06\u9690\u542b\u7684\u201c1\u201d\u79fb\u5230\u5c0f\u6570\u90e8\u5206\uff0c\u9ad8\u4f4d\u88650\uff0c\u79fb\u51fa\u7684\u4f4e\u4f4d\u4fdd\u7559\u5230\u7279\u5b9a\u7684 \u201c\u9644\u52a0\u4f4d\u201d \u4e0a \u5c3e\u6570\u76f8\u51cf\uff1a Xm*2^{Xe-Ye} \\pm Ym Xm*2^{Xe-Ye} \\pm Ym \u89c4\u683c\u5316 \u5f53\u5c3e\u6570\u9ad8\u4f4d\u4f4d0\uff0c\u9700 \u5de6\u89c4 \uff1a\u5c3e\u6570\u5de6\u79fb\u4e00\u6b21\uff0c\u9636\u7801\u51cf1\uff0c\u76f4\u5230MSB\u4e3a1 :s \u6bcf\u6b21\u9636\u7801\u51cf1\u540e\u8981\u5224\u65ad\u9636\u7801\u662f\u5426\u4e0b\u6ea2(\u6bd4\u6700\u5c0f\u53ef\u8868\u793a\u7684\u9636\u7801\u8fd8\u8981\u5c0f) \u5f53\u5c3e\u6570\u6700\u9ad8\u4f4d\u6709\u8fdb\u4f4d\uff0c\u9700 \u53f3\u89c4 \uff1a\u5c3e\u6570\u53f3\u79fb\u4e00\u6b21\uff0c\u9636\u7801\u52a01\uff0c\u76f4\u5230MSB\u4e3a1 :s \u6bcf\u6b21\u9636\u7801\u52a01\u540e\u8981\u5224\u65ad\u9636\u7801\u662f\u5426\u4e0a\u6ea2(\u6bd4\u6700\u5927\u53ef\u8868\u793a\u7684\u9636\u7801\u8fd8\u8981\u5927) IEEE 754 \u52a0\u51cf\u8fd0\u7b97\u53f3\u89c4\u65f6\u6700\u591a\u53ea\u9700\u4e00\u6b21\uff0c\u56e0\u4e3a\u5373\u4f7f\u662f\u4e24\u4e2a\u6700\u5927\u7684\u5c3e\u6570\u76f8\u52a0(\u4e00\u5f00\u59cb\u7684\u89c4\u8303\u5f62\u5f0f\u5373\u4e3a1.xxx)\uff0c\u5f97\u5230\u7684\u548c\u6700\u591a\u4e3a11.xxx\uff0c\u5373\u5c3e\u6570\u7684\u6574\u6570\u90e8\u5206\u6700\u591a\u6709\u4e24\u4f4d\uff0c\u5373\u4e0d\u4f1a\u8fbe\u52304\u3002\u7ed3\u679c\u4fdd\u7559\u4e00\u4e2a\u9690\u542b\u7684\u201c1\u201d\u540e\uff0c\u6700\u591a\u53ea\u6709\u4e00\u4f4d\u88ab\u53f3\u79fb\u5230\u5c0f\u6570\u90e8\u5206 \u9636\u7801\u6ea2\u51fa\u5f02\u5e38\u5904\u7406\uff1a\u9636\u7801\u4e0a\u6ea2\uff0c\u5219\u7ed3\u679c\u6ea2\u51fa\uff1b\u9636\u7801\u4e0b\u6ea2\uff0c\u5219\u7ed3\u679c\u4e3a0 \u5982\u679c\u5c3e\u6570\u6bd4\u89c4\u5b9a\u4f4d\u6570\u957f(\u6709\u9644\u52a0\u4f4d)\uff0c\u5219\u9700\u8003\u8651\u820d\u5165(\u6709\u591a\u79cd\u820d\u5165\u65b9\u5f0f) \u82e5 \u8fd0\u7b97\u7ed3\u679c\u5c3e\u6570 \u662f0\uff0c\u8bf4\u660e\u7ed3\u679c\u4e5f\u5e94\u8be5\u4e3a0\uff0c\u5219\u9700\u8981\u5c06\u9636\u7801\u4e5f\u7f6e\u4e3a0","title":"\u6d6e\u70b9\u6570\u52a0/\u51cf\u8fd0\u7b97"},{"location":"CSAPP/CSAPP-PartOne-1/#_9","text":"(-1)^{s1}*M1*2^{E1} \u00d7 (-1)^{s2}*M2*2^{E2} (-1)^{s1}*M1*2^{E1} \u00d7 (-1)^{s2}*M2*2^{E2} \uff0c\u7cbe\u786e\u7ed3\u679c (-1)^s*M*2^E (-1)^s*M*2^E \u5982\u4e0b\uff1a - \u7b26\u53f7s\uff1a\u4f9d\u636es1\u548cs2 - \u5c3e\u6570M\uff1a M1\u00d7M2 M1\u00d7M2 - \u9636\u7801E\uff1a E1+E2 E1+E2 \u4fee\u6b63 \u5982M \u2265 2\uff0c\u5c06M\u53f3\u79fb(1\u4f4d)\uff0cE\u52a01 \u5982 E \u8d85\u51fa\u8303\u56f4\uff0c\u5219\u6ea2\u51fa \u5c06 M \u820d\u5165\uff0c\u4ee5\u7b26\u5408\u5c0f\u6570\u90e8\u5206\u7684\u7cbe\u5ea6\u8981\u6c42 \u5b9e\u73b0 \u4e3b\u8981\u95ee\u9898\uff1a\u5b9e\u73b0\u5c3e\u6570(Significand)\u7684\u4e58","title":"\u6d6e\u70b9\u4e58\u6cd5"},{"location":"CSAPP/CSAPP-PartOne-1/#_10","text":"\u9644\u52a0\u4f4d(Extra Bits) IEEE754\u89c4\u5b9a: \u4e2d\u95f4\u7ed3\u679c\u987b\u5728\u53f3\u8fb9\u52a02\u4e2a\u9644\u52a0\u4f4d\uff08guard & round\uff09 Guard (\u4fdd\u62a4\u4f4d)\uff1a\u5728significand\u53f3\u8fb9\u7684\u4f4d Round (\u820d\u5165\u4f4d)\uff1a\u5728\u4fdd\u62a4\u4f4d\u53f3\u8fb9\u7684\u4f4d \u4f5c\u7528\uff1a\u7528\u4ee5\u4fdd\u62a4\u5bf9\u9636\u65f6 \u53f3\u79fb\u7684\u4f4d \u6216\u8fd0\u7b97\u7684 \u4e2d\u95f4\u7ed3\u679c \uff0c\u5982\u679c\u4e0d\u5728\u540e\u9762\u52a0\u9644\u52a0\u4f4d\uff0c\u5219\u8fd9\u4e9b\u7cbe\u5ea6\u4e4b\u5916\u7684\u6570\u5c31\u4f1a\u88ab\u65e0\u60c5\u820d\u53bb\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u5f71\u54cd \u5904\u7406\uff1a\u2460\u5de6\u89c4\u65f6\u88ab\u79fb\u5230significand\u4e2d; \u2461\u4f5c\u4e3a\u820d\u5165\u7684\u4f9d\u636e Rounding Digits(\u820d\u5165\u4f4d) IEEE\u6709\u56db\u79cd\u820d\u5165\u65b9\u5f0f \u5c31\u8fd1\u820d\u5165 \u5411\u5076\u6570\u820d\u5165\u7684\u610f\u601d\u662f\uff1a\u5f53\u6070\u597d\u5728\u4e24\u4e2a\u53ef\u80fd\u7684\u6570\u503c\u6b63\u4e2d\u95f4\u65f6\u598210\uff0c\u820d\u5165\u540e\u4f7f\u5f97 \u6700\u4f4e\u6709\u6548\u4f4d \u7684\u6570\u7801\u4e3a\u5076\u6570 \u201c\u5076\u6570\u201d\uff1a\u6700\u4f4e\u6709\u6548\u4f4d\u503c\u4e3a0 \u201c\u4e2d\u95f4\u503c\u201d\uff1a\u820d\u5165\u4f4d\u7f6e\u53f3\u4fa7\u7684\u4f4d\u90fd\u662f0\uff0c\u5373\u5f62\u5982\uff1a \u00d7\u00d7\u00d7100..._{2} \u00d7\u00d7\u00d7100..._{2} Z1\u548cZ2\u4e3a10\uff0c\u4e14Z1\u548cZ2\u524d\u7684\u4e00\u4f4d\u6570\u4e3a0\uff0c\u5219\u65e0\u9700\u8fdb\u4f4d Z1\u548cZ2\u4e3a10\uff0c\u4e14Z1\u548cZ2\u524d\u7684\u4e00\u4f4d\u6570\u4e3a1\uff0c\u5219\u9700\u5f80\u524d\u8fdb\u4e00\u4f4d \u5c31\u8fd1\u820d\u5165\u7684\u65b9\u5f0f\u5f97\u5230\u7684\u5e73\u5747\u8bef\u5dee\u6700\u5c0f","title":"\u6d6e\u70b9\u6570\u820d\u5165"},{"location":"CSAPP/CSAPP-PartOne-1/#_11","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include <stdio.h> int main () { float a ; double b ; a = 123456.789e4 ; b = 123456.789e4 ; printf ( \"%f/n%f/n\" , a , b ); // \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a // 1234567936.000000 // 1234567890.000000 // float\u53ef\u7cbe\u786e\u8868\u793a**7\u4e2a**\u5341\u8fdb\u5236\u6709\u6548\u4f4d\u6570????\uff0c // \u540e\u9762\u7684\u6570\u4f4d\u662f\u820d\u5165\u540e\u7684\u7ed3\u679c\uff0c\u820d\u5165\u540e\u7684\u503c\u53ef\u80fd\u4f1a\u66f4\u5927\uff0c\u4e5f\u53ef\u80fd\u4f1a\u66f4\u5c0f } \u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570float\u578b\u7684\u8868\u793a\u8303\u56f4\u591a\u5927? \u6700\u5927\u7684\u6570\u636e: +1.11\u20261\u00d72^{127} +1.11\u20261\u00d72^{127} \uff0c\u7ea6 +3.4\u00d710^{38} +3.4\u00d710^{38} \u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570double\u578b\u7ea6 +1.8\u00d710^{308} +1.8\u00d710^{308} C\u8bed\u8a00\u4e2d\u7684\u6d6e\u70b9\u6570\u7c7b\u578b\uff1afloat / double\uff0c\u5206\u522b\u5bf9\u5e94IEEE 754\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u683c\u5f0f\u548c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u683c\u5f0f \u4eceint\u8f6c\u6362\u4e3afloat\u65f6\uff0c\u4e0d\u4f1a\u53d1\u751f\u6ea2\u51fa\uff0c\u4f46\u53ef\u80fd\u6709\u6570\u636e\u88ab\u820d\u5165 \u4eceint\u6216float\u8f6c\u6362\u4e3adouble\u65f6\uff0c\u56e0\u4e3adouble\u7684\u6709\u6548\u4f4d\u6570\u66f4\u591a\uff0c\u6545\u80fd\u4fdd\u7559\u7cbe\u786e\u503c \u4ecedouble\u8f6c\u6362\u4e3afloat\u548cint\u65f6\uff0c\u53ef\u80fd\u53d1\u751f\u6ea2\u51fa\uff0c\u6b64\u5916\uff0c\u7531\u4e8e\u6709\u6548\u4f4d\u6570\u53d8\u5c11\uff0c\u6545\u53ef\u80fd\u88ab\u820d\u5165 \u4ecefloat \u6216double\u8f6c\u6362\u4e3aint\u65f6\uff0c\u56e0\u4e3aint\u6ca1\u6709\u5c0f\u6570\u90e8\u5206\uff0c\u6240\u4ee5\u6570\u636e\u53ef\u80fd\u4f1a\u54110\u65b9\u5411\u88ab\u622a\u65ad \u539f\u7c7b\u578b \u7ed3\u679c\u7c7b\u578b \u53ef\u80fd\u53d1\u751f\u6ea2\u51fa \u53ef\u80fd\u53d1\u751f\u820d\u5165 \u539f\u56e0 int float \u00d7 \u221a float\u7684\u8868\u793a\u8303\u56f4\u6bd4int\u7684\u8868\u793a\u8303\u56f4\u5927\uff1f\uff0c\u6240\u4ee5\u4e0d\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u56e0\u4e3aint\u662f\u75311\u4f4d\u7b26\u53f7\u4f4d\u548c31\u4f4d\u6570\u636e\u90e8\u5206\u7ec4\u6210\uff0c\u800cfloat\u6700\u591a\u53ea\u670924\u4f4d(1\u4f4d\u9690\u542b\u548c23\u4f4d\u5c3e\u6570)\uff0c\u6240\u4ee531\u4f4d\u8f6c\u5316\u4e3a24\u4f4d\u65f6\u4f1a\u53d1\u751f\u820d\u5165 int / float double \u00d7 \u00d7 double\u7684\u6709\u6548\u4f4d\u657053\u4f4d\u66f4\u591a\uff0c\u6545\u80fd\u4fdd\u7559\u7cbe\u786e\u503c double int / float \u221a \u221a double\u8868\u793a\u8303\u56f4\u66f4\u5927\uff0c\u8f6c\u6362\u4e3a\u8868\u793a\u8303\u56f4\u5c0f\u7684\u6570\u636e\u7c7b\u578b\u5219\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u7531\u4e8e\u6709\u6548\u4f4d\u6570\u53d8\u5c11\uff0c\u6545\u53ef\u80fd\u88ab\u820d\u5165 float / double int ? ? int\u6ca1\u6709\u5c0f\u6570\u90e8\u5206\uff0c\u6240\u4ee5\u6570\u636e\u53ef\u80fd\u4f1a\u54110\u65b9\u5411\u88ab\u622a\u65ad 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // Assume neither d nor f is NaN int x ; float f ; double d ; x == ( int )( float ) x // no 24\u4f4d\u5c3e\u6570 x == ( int )( double ) x // yes 53\u4f4d\u5c3e\u6570 f == ( float )( double ) f // yes \u589e\u52a0\u7cbe\u5ea6 d == ( float ) d // no \u635f\u5931\u7cbe\u5ea6 f == - ( - f ) // yes \u4ec5\u4ec5\u6539\u53d8\u7b26\u53f7\u4f4d 2 / 3 == 2 / 3.0 // no d < 0.0 \u21d2 (( d * 2 ) < 0.0 ) // yes d > f \u21d2 - f > - d // yes d * d >= 0.0 // yes x * x >= 0 // no ( d + f ) - d == f // no \u5f53d\u5f88\u5927\uff0cf\u5f88\u5c0f\u7684\u65f6\u5019\uff0cf\u4f1a\u88ab\u5403\u6389\uff0c\u56e0\u4e3a\u5bf9\u9636\u7684\u65f6\u5019f\u7684\u7cbe\u5ea6\u4f1a\u635f\u5931 \u6d6e\u70b9\u6570\u52a0\u6cd5\u7ed3\u5408\u5f8b\u4e0d\u6b63\u786e \u56e0\u4e3a x = \u2013 1.5 \u00d7 10^{38}, y = 1.5 \u00d7 10^{38}, z = 1.0 x = \u2013 1.5 \u00d7 10^{38}, y = 1.5 \u00d7 10^{38}, z = 1.0 \u5219 (x+y)+z = (\u20131.5 \u00d7 10^{38} + 1.5 \u00d7 10^{38} )+1.0 = 1.0 (x+y)+z = (\u20131.5 \u00d7 10^{38} + 1.5 \u00d7 10^{38} )+1.0 = 1.0 \u4e0d\u7b49\u4e8e x + (y + z) = \u20131.5 \u00d7 10^{38} + (1.5 \u00d7 10^{38}+1.0) = 0.0 x + (y + z) = \u20131.5 \u00d7 10^{38} + (1.5 \u00d7 10^{38}+1.0) = 0.0 \u6d6e\u70b9\u6570\u548c\u5b9e\u6570\u8fd0\u7b97\u4e0d\u540c\uff1a\u7ed3\u5408\u6027\u3001\u5206\u914d\u6027\u6709\u51b2\u7a81 \u4e0d\u80fd\u9047\u5230\u5c0f\u6570\u5c31\u7528\u6d6e\u70b9\u6570\u8868\u793a\uff0c\u6709\u4e9b\u60c5\u51b5\u4e0b(\u5982\u9700\u8981\u5c06\u4e00\u4e2a\u6574\u6570\u53d8\u91cf\u4e58\u4ee5\u4e00\u4e2a\u786e\u5b9a\u7684\u5c0f\u6570\u5e38\u91cf)\uff0c\u53ef\u5148\u7528\u4e00\u4e2a\u786e\u5b9a\u7684\u5b9a\u70b9\u6574\u6570\u5e38\u91cf\u4e0e\u6574\u6570\u53d8\u91cf\u76f8\u4e58\uff0c\u7136\u540e\u518d\u901a\u8fc7\u79fb\u4f4d\u8fd0\u7b97\u6765\u786e\u5b9a\u5c0f\u6570\u70b9 \u6709\u6ca1\u6709\u4ec0\u4e48\u4f8b\u5b50\uff0c\u5149\u770b\u6587\u5b57\u770b\u4e0d\u61c2\u54c7 \u6211\u7684\u7406\u89e3\uff1a\u6d6e\u70b9\u6570\u7684\u8fd0\u7b97\u6bd4\u8f83\u9ebb\u70e6\uff0c\u76f8\u6bd4\u4e4b\u4e0b\u6574\u6570\u76f8\u4e58\u8fd0\u7b97\u7b80\u5355\uff0c\u6240\u4ee5\u5728\u53ef\u4ee5\u7528\u5b9a\u70b9\u6574\u6570\u8fd0\u7b97\u7684\u65f6\u5019\u53ef\u4ee5\u4f18\u5148\u9009\u62e9\u5b9a\u70b9\u6574\u6570\u7684\u8fd0\u7b97\uff0c\u7136\u540e\u518d\u8003\u8651\u8f6c\u4e3a\u6d6e\u70b9\u6570\u683c\u5f0f","title":"\u6d6e\u70b9\u6570\u6bd4\u8f83"},{"location":"CSAPP/CSAPP-PartOne-1/#ppt","text":"","title":"\u5185\u5b58\u3001\u6307\u9488\u3001\u5b57\u7b26\u4e32\u8868\u793a \u3010\u4e0d\u5728\u8003\u7eb2\u5185\uff0c\u5728\u5de5\u5927ppt\u5185\u3011"},{"location":"CSAPP/CSAPP-PartOne-2/","text":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part One \u7a0b\u5e8f\u7ed3\u6784\u548c\u6267\u884c\u4e4b \u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a Machine-Level Programming \u00b6 IA-32\u6307\u4ee4\u7cfb\u7edf \u00b6 \u6307\u4ee4\u7cfb\u7edf\u6982\u8ff0 \u00b6 \u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u57fa\u672c\u7ec4\u6210 \u00b6 \u5de5\u4f5c\u65b9\u5f0f\uff1a \u5b58\u50a8\u7a0b\u5e8f \u6570\u636e\u548c\u6307\u4ee4\u5b9e\u73b0\u5b58\u653e\u5728\u5b58\u50a8\u5668\u4e2d\uff0c\u5f62\u5f0f\u4e0a\u6ca1\u6709\u5dee\u522b \u6bcf\u6761\u6307\u4ee4\u548c\u6bcf\u4e2a\u6570\u636e\u90fd\u6709\u5730\u5740\u3002\u6307\u4ee4\u6309\u5e8f\u5b58\u653e\uff0c\u6307\u4ee4\u7531OP\u3001ADDR\u5b57\u6bb5\u7ec4\u6210 \u6307\u4ee4\u4e2d\u9700\u7ed9\u51fa\u7684\u4fe1\u606f\uff1a \u64cd\u4f5c\u6027\u8d28(\u64cd\u4f5c\u7801) \u6e90\u64cd\u4f5c\u65701 \u6216/\u548c \u6e90\u64cd\u4f5c\u65702(\u7acb\u5373\u6570\u3001\u5bc4\u5b58\u5668\u7f16\u53f7\u3001 \u5b58\u50a8\u5730\u5740 ) \u76ee\u7684\u64cd\u4f5c\u6570\u5730\u5740(\u5bc4\u5b58\u5668\u7f16\u53f7\u3001 \u5b58\u50a8\u5730\u5740 ) \u5b58\u50a8\u5730\u5740\u7684\u63cf\u8ff0\u4e0e \u64cd\u4f5c\u6570\u7684\u6570\u636e\u7ed3\u6784 \u6709\u5173 \u7a0b\u5e8f\u7531\u6307\u4ee4\u7ec4\u6210\uff0c\u7a0b\u5e8f\u542f\u52a8\u540e\uff0c\u8ba1\u7b97\u673a\u81ea\u52a8\u53d6\u51fa\u6307\u4ee4\u6267\u884c\uff0c\u7a0b\u5e8f\u8d77\u59cb\u5730\u5740\u5728PC\u4e2d \u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u6307\u4ee4\u548c\u6570\u636e\u88ab\u4ece\u5b58\u50a8\u5668\u53d6\u5230CPU\uff0c\u5b58\u653e\u5728CPU\u5185\u7684\u5bc4\u5b58\u5668\u4e2d\uff0c\u6307\u4ee4\u5728IR(\u6307\u4ee4\u5bc4\u5b58\u5668)\u4e2d\uff0c\u6570\u636e\u5728GPR(\u901a\u7528\u5bc4\u5b58\u5668)\u4e2d \u8ba1\u7b97\u673a\u4e2d\u6570\u636e\u5b58\u50a8 \u00b6 \u6307\u4ee4 \u00b6 \u540d\u79f0 \u63cf\u8ff0 \u7c7b\u6bd4 \u673a\u5668\u6307\u4ee4 \u5904\u4e8e\u786c\u4ef6\u548c\u8f6f\u4ef6\u7684\u4ea4\u754c\u9762 \u4e00\u4e2a\u83dc\u8c31\u6307\u5b9a\u7684\u4e00\u4e2a\u5b8c\u6574\u505a\u83dc\u8fc7\u7a0b \u5fae\u6307\u4ee4 \u5fae\u7a0b\u5e8f\u7ea7\u547d\u4ee4\uff0c\u5c5e\u4e8e\u786c\u4ef6\u8303\u7574 \u6d17\u3001\u5207\u3001\u716e\u3001\u7092\u7b49\u505a\u83dc\u201c\u5fae\u8fc7\u7a0b\u201d \u4f2a\u6307\u4ee4 \u7531\u82e5\u5e72\u673a\u5668\u6307\u4ee4\u7ec4\u6210\u7684\u6307\u4ee4\u5e8f\u5217\uff0c\u5c5e\u4e8e\u8f6f\u4ef6\u8303\u7574 \u7531\u591a\u4e2a\u83dc\u8c31\u5408\u6210\u4e00\u4e2a\u201d\u5927\u83dc\u201c\u7684\u8fc7\u7a0b \u6c47\u7f16\u6307\u4ee4 \u673a\u5668\u6307\u4ee4\u7684\u6c47\u7f16\u8868\u793a\u5f62\u5f0f\uff0c\u5373\u7b26\u53f7\u8868\u793a \u673a\u5668\u6307\u4ee4\u548c\u6c47\u7f16\u6307\u4ee4\u4e00\u4e00\u5bf9\u5e94\uff0c\u5b83\u4eec\u90fd\u4e0e\u5177\u4f53\u673a\u5668\u7ed3\u6784\u6709\u5173\uff0c\u90fd\u5c5e\u4e8e \u673a\u5668\u7ea7\u6307\u4ee4 \u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784ISA\uff1aInstruction Set Architecture \u00b6 ISA\u662f\u4e00\u79cd\u89c4\u7ea6\uff08Specification\uff09\uff0c\u5b83\u89c4\u5b9a\u4e86\u5982\u4f55\u4f7f\u7528\u786c\u4ef6 \u53ef\u6267\u884c\u7684\u6307\u4ee4\u7684\u96c6\u5408\uff0c\u5305\u62ec \u6307\u4ee4\u683c\u5f0f \u3001 \u64cd\u4f5c\u79cd\u7c7b \u4ee5\u53ca\u6bcf\u79cd\u64cd\u4f5c\u5bf9\u5e94\u7684\u64cd\u4f5c\u6570\u7684\u76f8\u5e94\u89c4\u5b9a\uff1b \u6307\u4ee4\u53ef\u4ee5\u63a5\u53d7\u7684 \u64cd\u4f5c\u6570\u7684\u7c7b\u578b \uff1b \u64cd\u4f5c\u6570\u6240\u80fd\u5b58\u653e\u7684\u5bc4\u5b58\u5668\u7ec4\u7684\u7ed3\u6784\uff0c\u5305\u62ec\u6bcf\u4e2a \u5bc4\u5b58\u5668\u7684\u540d\u79f0\u3001\u7f16\u53f7\u3001\u957f\u5ea6\u548c\u7528\u9014 \uff1b \u64cd\u4f5c\u6570\u6240\u80fd\u5b58\u653e\u7684 \u5b58\u50a8\u7a7a\u95f4\u7684\u5927\u5c0f\u548c\u7f16\u5740\u65b9\u5f0f \uff1b \u64cd\u4f5c\u6570\u5728\u5b58\u50a8\u7a7a\u95f4\u5b58\u653e\u65f6\u6309\u7167 \u5927\u7aef\u8fd8\u662f\u5c0f\u7aef\u65b9\u5f0f\u5b58\u653e \uff1b \u6307\u4ee4\u83b7\u53d6\u64cd\u4f5c\u6570\u7684\u65b9\u5f0f\uff0c\u5373 \u5bfb\u5740\u65b9\u5f0f \uff1b \u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u7684\u63a7\u5236\u65b9\u5f0f\uff0c\u5305\u62ec \u7a0b\u5e8f\u8ba1\u6570\u5668\u3001\u6761\u4ef6\u7801\u5b9a\u4e49 \u7b49\u3002 ISA\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u4e00\u4e2a \u62bd\u8c61\u5c42 \uff0c\u6ca1\u6709\u5b83\u5219\u8f6f\u4ef6\u65e0\u6cd5\u4f7f\u7528\u8ba1\u7b97\u673a\u786c\u4ef6\uff0c\u4e00\u53f0\u8ba1\u7b97\u673a\u4e0d\u80fd\u79f0\u4e3a\u201c\u901a\u7528\u8ba1\u7b97\u673a\u201d ISA\u548c\u8ba1\u7b97\u673a\u7ec4\u6210\uff08\u5fae\u7ed3\u6784\uff09\u4e4b\u95f4\u7684\u5173\u7cfb \u4e0d\u540cISA\u89c4\u5b9a\u7684\u6307\u4ee4\u96c6\u4e0d\u540c\uff0c\u5982\uff0cIA-32\u3001MIPS\u3001ARM\u7b49 \u8ba1\u7b97\u673a\u7ec4\u6210\u5fc5\u987b\u80fd\u591f \u5b9e\u73b0 ISA\u89c4\u5b9a\u7684\u529f\u80fd\uff0c\u5982\u63d0\u4f9bGPR\u3001\u6807\u5fd7\u3001\u8fd0\u7b97\u7535\u8def\u7b49 \u540c\u4e00\u79cd ISA\u53ef\u4ee5\u6709 \u4e0d\u540c\u7684 \u8ba1\u7b97\u673a\u7ec4\u6210\uff0c\u5982\u4e58\u6cd5\u6307\u4ee4\u53ef\u7528ALU\u6216\u4e58\u6cd5\u5668\u5b9e\u73b0 IA-32 \u00b6 \u4f53\u7cfb\u7ed3\u6784 \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u53ca\u683c\u5f0f b \uff1a8\u4f4d\uff0cbyte w \uff1a16\u4f4d\uff0cword l \uff1a32\u4f4d\uff0cdouble word long double\u5b9e\u9645\u957f\u5ea6\u4e3a80\u4f4d\uff0c\u4f46\u5206\u914d96\u4f4d=12B\uff08\u63094B\u5bf9\u9f50\uff09 IA-32\u5bc4\u5b58\u5668\u7ec4\u7ec7 \u5bc4\u5b58\u5668\u6269\u5c55\u7684\u65b9\u5f0f \u9996\u5148\u67098\u4e2a8\u4f4d\u7684\u5bc4\u5b58\u5668\uff1aAL\u3001BL...\u3001DH \u7136\u540e\u67098\u4e2a16\u4f4d\u7684\u5bc4\u5b58\u5668\uff1aAX\u3001BX...\u3001DI \u7136\u540e\u6269\u5c55\u523032\u4f4d\u673a\u5668\u7684\u65f6\u5019\uff0c\u6709\u4e868\u4e2a32\u4f4d\u7684\u5bc4\u5b58\u5668\uff0c\u524d\u9762\u7684E\u4ee3\u886832\u4f4d\uff1aEAX\u3001EBX...\u3001EDI \u53cd\u6620\u4e86\u4f53\u7cfb\u7ed3\u6784\u53d1\u5c55\u7684\u8f68\u8ff9\uff0c\u5b57\u957f\u4e0d\u65ad\u6269\u5145\uff0c\u6307\u4ee4\u4fdd\u6301\u517c\u5bb9 ST(0)~ST(7)\u662f80\u4f4d\uff0cMM0~MM7\u4f7f\u7528\u5176\u4f4e64\u4f4d IA-32\u7684\u6807\u5fd7\u5bc4\u5b58\u5668 6\u4e2a\u6761\u4ef6\u6807\u5fd7 OF\u3001SF\u3001ZF\u3001CF\u5404\u662f\u4ec0\u4e48\u6807\u5fd7\uff08\u6761\u4ef6\u7801\uff09 AF\uff1a\u8f85\u52a9\u8fdb\u4f4d\u6807\u5fd7\uff08BCD\u7801\u8fd0\u7b97\u65f6\u624d\u6709\u610f\u4e49\uff09 PF\uff1a\u5947\u5076\u6807\u5fd7 3\u4e2a\u63a7\u5236\u6807\u5fd7 DF\uff08Direction Flag\uff09\uff1a\u65b9\u5411\u6807\u5fd7\uff08\u81ea\u52a8\u53d8\u5740\u65b9\u5411\u662f\u589e\u8fd8\u662f\u51cf\uff09 IF\uff08Interrupt Flag\uff09\uff1a\u4e2d\u65ad\u5141\u8bb8\u6807\u5fd7 \uff08\u4ec5\u5bf9\u5916\u90e8\u53ef\u5c4f\u853d\u4e2d\u65ad\u6709\u7528\uff09 TF\uff08Trap Flag\uff09\uff1a\u9677\u9631\u6807\u5fd7\uff08\u662f\u5426\u662f\u5355\u6b65\u8ddf\u8e2a\u72b6\u6001\uff09 IA-32\u7684 \u5bfb\u5740\u65b9\u5f0f (\u5982\u4f55\u6839\u636e\u6307\u4ee4\u6240\u5b9a\u4fe1\u606f\u5f97\u5230\u64cd\u4f5c\u6570\u6216\u64cd\u4f5c\u6570\u5730\u5740) \u64cd\u4f5c\u6570\u6240\u5728\u7684\u4f4d\u7f6e \u6307\u4ee4\u4e2d\uff1a\u7acb\u5373\u5bfb\u5740 \u5bc4\u5b58\u5668\u4e2d\uff1a\u5bc4\u5b58\u5668\u5bfb\u5740 \u5b58\u50a8\u5355\u5143\u4e2d\uff08\u5c5e\u4e8e\u5b58\u50a8\u5668\u64cd\u4f5c\u6570\uff0c\u6309\u5b57\u8282\u7f16\u5740\uff09\uff1a\u5176\u4ed6\u5bfb\u5740\u65b9\u5f0f \u5b58\u50a8\u5668\u64cd\u4f5c\u6570\u7684\u5bfb\u5740\u65b9\u5f0f\u4e0e\u5fae\u5904\u7406\u5668\u7684\u5de5\u4f5c\u6a21\u5f0f\u6709\u5173 \u5b9e\u5730\u5740\u6a21\u5f0f\uff08\u57fa\u672c\u7528\u4e0d\u5230\uff09 \u4e3a\u4e0e8086/8088\u517c\u5bb9\u800c\u8bbe\uff0c\u52a0\u7535\u6216\u590d\u4f4d\u65f6 \u5bfb\u5740\u7a7a\u95f4\u4e3a1MB\uff0c20\u4f4d\u5730\u5740\uff1a(CS)<<4+(IP) \u4fdd\u62a4\u6a21\u5f0f\uff08\u9700\u8981\u638c\u63e1\uff09 \u52a0\u7535\u540e\u8fdb\u5165\uff0c\u91c7\u7528\u865a\u62df\u5b58\u50a8\u7ba1\u7406\uff0c\u591a\u4efb\u52a1\u60c5\u51b5\u4e0b\u9694\u79bb\u3001\u4fdd\u62a4 80286\u4ee5\u4e0a\u5fae\u5904\u7406\u5668\u7684\u5de5\u4f5c\u6a21\u5f0f \u5bfb\u5740\u7a7a\u95f4\u4e3a 2^{32} 2^{32} B\uff0c32\u4f4d\u7ebf\u6027\u5730\u5740\u5206\u6bb5\uff08\u6bb5\u57fa\u5740+\u6bb5\u5185\u504f\u79fb\u91cf\uff09 IA-32\u673a\u5668\u6307\u4ee4\u683c\u5f0f IA-32\u6307\u4ee4\u7c7b\u578b \u00b6 \u4f20\u9001\u6307\u4ee4 \u00b6 \u901a\u7528\u6570\u636e\u4f20\u9001\u6307\u4ee4 \u5730\u5740\u4f20\u9001\u6307\u4ee4 lea\uff1a\u52a0\u8f7d\u6709\u6548\u5730\u5740load effective address \u5982 leal (%edx,%eax),%eax \u7684\u529f\u80fd\u4e3a R[eax]\u2b05R[edx]+R[eax] \uff0c\u610f\u601d\u662f\u628a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u53d6\u51fa\u6765\uff0c\u628a\u8fdb\u884c\u52a0\u6cd5\u8fd0\u7b97\u540e\u7684\u548c\uff0c\u4f5c\u4e3a\u6570\u636e\u88c5\u5165\u5230eax\u4e2d\uff0c\u6267\u884c\u524d\u82e5R[edx]=i\uff0cR[eax]=j\uff0c\u5219\u6307\u4ee4\u6267\u884c\u540eR[eax]=i+j\uff0c\u6b64\u5904\u7684R\u8868\u793a\u5bc4\u5b58\u5668register (%edx,%eax)\uff0cedx\u7684\u5185\u5bb9\uff0c\u76f8\u5f53\u4e8e\u662f\u57fa\u5740\u503c\uff0c\u52a0\u4e0aeax\u7684\u5185\u5bb9\uff0c\u76f8\u5f53\u4e8e\u662f\u53d8\u5740\u503c\uff0c\u57fa\u5740+\u53d8\u5740\uff0c\u4e24\u4e2a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u52a0\u8d77\u6765\u662f\u6709\u6548\u5730\u5740 \u8f93\u5165\u8f93\u51fa\u6307\u4ee4 \u6807\u5fd7\u4f20\u9001\u6307\u4ee4 \u3010\u4f8b\u4e00\u3011\u201c\u5165\u6808\u201d(pushw %ax)\u7684\u89e3\u91ca\u8fc7\u7a0b \u5c06\u901a\u7528\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u9001\u5230\u6808\u9876\u4f4d\u7f6e\u6240\u6307\u7684\u6570\u636e w\u662f16\u4f4d\uff0cax\u662f16\u4f4d\u5bc4\u5b58\u5668 \u63094B\u5bf9\u9f50\uff0c\u6240\u4ee5\u4e00\u4e2a\u6a2a\u683c\u4e3a32\u4f4d\uff0c\u53732\u4e2aax \u5c0f\u7aef\u65b9\u5f0f\uff0c\u6240\u4ee5AL\u5728\u6808\u9876\uff0cLSB\u5728\u4f4e\u5730\u5740 \u6808\u7531\u9ad8\u5730\u5740\u5411\u4f4e\u5730\u5740\u589e\u957f \u8fc7\u7a0b\u4e3a\uff1a 1 2 3 4 5 6 7 8 # \u53d6\u6808\u9876\u6307\u9488sp\u5bc4\u5b58\u5668\u4e2d\u7684\u503c # \u5c06\u6808\u9876\u6307\u9488\u5411\u4e0b\u79fb\u4e00\u4e2aax\u7684\u8ddd\u79bb(2\u4e2a\u5b57\u8282)\uff0c\u5373-2 # \u8ba9sp\u6307\u5411\u65b0\u7684\u6808\u9876 R[sp]\u2b05R[sp]-2 # \u628aax\u4e2d\u7684\u503c\u538b\u6808\uff0c\u610f\u601d\u662f\u5c06ax\u7684\u503c = \u4ee5\u6808\u9876\u6307\u9488sp\u7684\u503c\u4e3a\u5185\u5b58\u5730\u5740\u7684\u90a3\u5757\u5355\u5143\u7684\u6240\u5b58\u7684\u503c # \u5373\u5728\u65b0\u7684\u6808\u9876\u5904\u628aax\u7684\u5185\u5bb9\u653e\u5165 # M\u8868\u793a\u5185\u5b58 memory M[R[sp]]\u2b05R[ax] \u3010\u4f8b\u4e8c\u3011\u201c\u51fa\u6808\u201d(popw %ax) \u5c06\u6808\u9876\u4f4d\u7f6e\u6240\u6307\u7684\u6570\u636e\u9001\u5230\u901a\u7528\u5bc4\u5b58\u5668 \u8fc7\u7a0b\u4e3a\uff1a 1 2 3 4 # \u539f\u6808\u9876\u5904\u6307\u5411\u7684\u4e24\u4e2a\u5b57\u8282\u9001\u5165ax R[ax]\u2b05M[R[sp]] # \u8ba9sp\u6307\u5411\u65b0\u7684\u6808\u9876 R[sp]\u2b05R[sp]+2 \u3010\u4f8b\u4e09\u3011\u4f20\u9001\u6307\u4ee4\u4e3e\u4f8b \u5c06\u4ee5\u4e0bIntel\u683c\u5f0f\u6307\u4ee4\u8f6c\u6362\u4e3aAT&T\u683c\u5f0f\u6307\u4ee4\uff0c\u5e76\u8bf4\u660e\u529f\u80fd\u3002 1 2 3 4 5 6 7 push ebp mov ebp , esp mov edx , DWORD PTR [ ebp + 8 ] mov bl , 255 mov ax , WORD PTR [ ebp + edx * 4 + 8 ] mov WORD PTR [ ebp + 20 ], dx lea eax , [ ecx + edx * 4 + 8 ] push==l== %ebp R[esp]\u2b05R[esp]-4;M[R[esp]]\u2b05R[ebp] mov==l== %esp,%ebp R[ebp]\u2b05R[esp] movl 8(%ebp),%edx R[edx]\u2b05M[R[ebp]+8] movb $255,%bl R[bl]\u2b05255 movw 8(%ebp,%edx,4),%ax R[ax]\u2b05M[R[ebp]+R[edx]*4+8] movw %dx,20(%ebp) M[R[ebp]+20]\u2b05R[dx] lea==l== 8(%ecx,%edx,4),%eax R[eax]\u2b05R[ecx]+R[edx]*4+8 \u5982\u4f55\u5224\u65ad\u7b2c1\uff0c2\uff0c7\u53e5\u662fl\uff0c\u56e0\u4e3a\u9898\u76ee\u4e2d\u90fd\u662fe\uff0c\u6240\u4ee5\u662f \u53cc\u5b57 \u603b\u7ed3\u89c4\u5f8b\uff1a mov\u6307\u4ee4\u9700\u8981\u5728\u7b97\u51fa\u6709\u6548\u5730\u5740\u540e\u52a0\u4e0aM\uff0c\u800clea\u76f4\u63a5\u662f\u6709\u6548\u5730\u5740 push\u7684\u7b2c\u4e8c\u6761\u76f8\u5f53\u4e8emov\u6307\u4ee41 \u3010\u4f8b\u56db\u3011add\u51fd\u6570 1 2 3 4 5 #include <stdio.h> int add ( int i , int j ){ int x = i + j ; return x ; } \u8868\u793a\u4f20\u9001\u6307\u4ee4\uff1b\u52a0\u7c97\u8868\u793a\u64cd\u4f5c\u6570\uff1b\u6a2a\u7ebf\u8868\u793a\u7528RTL\u63cf\u8ff0\u7684\u4f20\u9001\u6307\u4ee4\u7684\u529f\u80fd 80483d4< add >: 80483d4: 55 push %ebp R[sp]\u2b05R[sp]-2;M[R[sp]]\u2b05R[ebp] 80483d5: 89 e5 mov %esp, %ebp R[ebp]\u2b05R[esp] 80483d7: 83 ec 10 sub $0x10, %esp 80483da: 8b 45 0c mov 0xc(%ebp), %eax R[eax]\u2b05M[R[ebp]+12] 80483dd: 8b 55 08 mov 0x8(%ebp), %edx R[edx]\u2b05M[R[ebp]+8] 80483e0: 8d 04 02 lea (%edx,%eax,1), %eax R[eax]\u2b05R[edx]+R[eax]*1 80483e3: 89 45 fc mov %eax, -0x4(%ebp) M[R[ebp]-4]\u2b05R[eax] 80483e6: 8b 45 fc mov -0x4(%ebp), %eax R[eax]\u2b05M[R[ebp]-4] 80483e9: c9 leave 80483ea: c3 ret \u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b \u5468\u800c\u590d\u59cb\uff1a\u6839\u636eEIP\u53d6\u6307\u4ee4\uff1b\u6307\u4ee4\u8bd1\u7801\uff1b\u53d6\u64cd\u4f5c\u6570\uff1b\u6307\u4ee4\u6267\u884c\uff1b\u56de\u5199\u7ed3\u679c\uff1b\u4fee\u6539EIP\u7684\u503c add\u51fd\u6570\u4ece80483d4\u5f00\u59cb\uff0cEIP\u2b050x80483d4 \u53d6\u6307\u4ee4 \u53d6\u6307\u4ee4\u7684\u8fc7\u7a0b\u662f\u628a\u6307\u4ee4\u5730\u5740\u9001\u5230\u5730\u5740\u7ebf\u548c\u5b58\u50a8\u5668\u7684\u8fc7\u7a0b EIP\u4e2d\u6700\u521d\u5b58\u7684\u662f\u51fd\u6570\u5f00\u59cb\u5730\u574080483d4\uff0c\u5c06\u8be5\u503c\u4f20\u8f93\u7ed9 MAR (\u5b58\u50a8\u5730\u5740\u5bc4\u5b58\u5668\uff0cMAR\u4e3a\u4e0b\u4e00\u6b21\u7684\u8bfb\u5199\u6570\u636e\u6307\u5b9a\u4f4d\u7f6e)\uff0c\u518d\u9001\u5230 \u5730\u5740\u7ebf \u4e0a \u6b64\u65f6\u63a7\u5236\u5668\u53d1\u51fa Rd \u8bfb\u547d\u4ee4\uff0c\u9001\u5230\u63a7\u5236\u7ebf\u4e0a\uff0c\u544a\u8bc9\u5b58\u50a8\u5668\u8981\u8bfb\u5730\u5740\u7ebf\u4e0a\u6240\u7ed9\u7684\u5355\u5143\u7684\u5185\u5bb9 \u5b58\u50a8\u5668\u63a5\u6536\u5230\u8bfb\u547d\u4ee4\u548c\u5730\u5740\u540e\uff0c\u5f00\u59cb\u8fdb\u884c\u8bfb\u64cd\u4f5c\uff0c\u9009\u4e2d\u8be5\u5730\u5740\uff0c\u8bfb\u51fa4\u4e2a\u5b57\u82825589e583\uff0c\u628a\u5730\u5740\u4e0a\u7684\u5185\u5bb9\u4f20\u8f93\u5230\u6570\u636e\u7ebf\u4e0a \u6570\u636e\u4f20\u8f93\u5230MDR(\u5b58\u50a8\u6570\u636e\u5bc4\u5b58\u5668\uff0cMDR\u5b58\u50a8\u4ece\u5185\u5b58\u4ea4\u6362\u7684\u6570\u636e)\uff0c\u7136\u540e\u4f20\u7ed9\u6307\u4ee4\u5bc4\u5b58\u5668IR \u6307\u4ee4\u8bd1\u7801 \u6307\u4ee4\u5bc4\u5b58\u5668\u4e2d\u7684\u9ad8\u4f4d\uff0c\u5373op\u5b57\u6bb5\uff0c\u4f1a\u9001\u5230\u63a7\u5236\u5668\uff0c\u5728\u63a7\u5236\u5668\u4e2d\u8fdb\u884c\u8bd1\u7801 55\u8bd1\u7801\u540e\uff0c\u8ba1\u7b97\u673a\u77e5\u9053\u8be5\u6307\u4ee4\u7684\u529f\u80fd\uff0c\u5373\u4e3a R[esp]\u2b05R[esp]-4;M[R[esp]]\u2b05R[ebp] \u8bd1\u7801\u7684\u7ed3\u679c\u4ea7\u751f\u4e86\u5f88\u591a\u63a7\u5236\u4fe1\u53f7\uff0c\u63a7\u5236\u4fe1\u53f7\u63a7\u5236\u673a\u5668\u5b9e\u73b0\u529f\u80fd \u6307\u4ee4\u6267\u884c R[esp]\u2b05R[esp]-4 \uff1aESP\u7684\u521d\u59cb\u5185\u5bb9\u662f bfff0000 \uff0c\u5c06ESP-4\u540e\u7684\u5185\u5bb9\u53d8\u4e3a beeefffc (ESP\u7684\u6700\u521d\u5185\u5bb9\u5b9e\u9645\u4e0a\u662f\u88ab\u9001\u5165ALU\u4e2d\uff0c\u5728ALU\u4e2d\u5b9e\u73b0-4\uff0c\u7ed3\u679c\u518d\u9001\u56deESP\u4e2d) M[R[esp]]\u2b05R[ebp] \uff1a\u6839\u636eesp\u7684\u5185\u5bb9\u53bb\u5b58\u50a8\u5668\u8bbf\u95ee\uff0c\u5c06ebp\u7684\u5185\u5bb9\u5199\u5165\u5bf9\u5e94\u4f4d\u7f6e \u5c06\u5730\u5740\u5148\u9001\u5165MAR\uff0c\u7136\u540e\u518d\u9001\u5165\u5730\u5740\u7ebf\uff0c\u540c\u65f6\u63a7\u5236\u5668\u53d1\u51faWr\u5199\u4fe1\u53f7\u653e\u5230\u63a7\u5236\u7ebf\u4e0a\uff0c\u5e76\u4e14\u8981\u628a\u5199\u7684\u6570\u636e\u5373EBP\u7684\u5185\u5bb9\u653e\u5230MDR\u4e2d\uff0c\u7136\u540e\u9001\u5230\u6570\u636e\u7ebf\u4e0a \u5b58\u50a8\u5668\u6700\u7ec8\u63a5\u6536\u5230\u7684\u6d88\u606f\u662f\uff1a\u63a5\u53d7\u5199\u7684\u63a7\u5236\u4fe1\u53f7\uff0c\u628a\u6570\u636e\u7ebf\u4e0a\u7684 bfff0020 \u503c\u5199\u5165\u5730\u5740 beeefffc \u5904 \u81f3\u6b64push\u6307\u4ee4\u6267\u884c\u5b8c\uff0c\u5bf9EIP(IA32\u4e2d\u7684PC\uff1a\u7a0b\u5e8f\u8ba1\u6570\u5668)\u589e\u91cf\uff0c\u5373\u5728EIP\u4e2d\u52a0\u4e0a\u6307\u4ee4\u7684\u957f\u5ea6\uff0c\u7531\u4e8epush\u6307\u4ee4(55)\u53ea\u6709\u4e00\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5EIP\u7531 80483d4 \u53d8\u5316\u4e3a 80483d5 \uff0c\u5373\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff0c\u5f00\u59cb\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4 \u4f20\u9001\u6307\u4ee4\u5982\u679c\u662f\u5728\u5bc4\u5b58\u5668\u548c\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u4f20\u9001\uff0c\u5219\u53ea\u9700\u8981\u5728\u5bc4\u5b58\u5668\u4e4b\u95f4\u4f20\u8f93\uff1b\u5982\u679c\u6d89\u53ca\u5230\u8bbf\u95ee\u5185\u5b58\uff0c\u5219\u9700\u8981\u603b\u7ebf\u8fdb\u884c\u4f20\u8f93 C\u8bed\u8a00\u8bed\u53e5\u7684\u673a\u5668\u7ea7\u8868\u793a \u00b6 \u53ef\u6267\u884c\u6587\u4ef6\u7684\u5b58\u50a8\u5668\u6620\u50cf \u8fc7\u7a0b(\u51fd\u6570)\u8c03\u7528\u7684\u673a\u5668\u7ea7\u8868\u793a \u00b6 \u8fc7\u7a0b\u8c03\u7528\u7684\u6267\u884c\u6b65\u9aa4 P\u4e3a\u8c03\u7528\u8005\uff0cQ\u4e3a\u88ab\u8c03\u7528\u8005 P\u7684\u8fc7\u7a0b\uff1a P\u5c06\u5165\u53e3\u53c2\u6570(\u5b9e\u53c2)\u653e\u5230Q\u80fd\u8bbf\u95ee\u5230\u7684\u5730\u65b9 CALL\u6307\u4ee4 \uff1aP\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\uff0c\u7136\u540e\u5c06\u63a7\u5236\u8f6c\u79fb\u5230Q Q\u7684\u8fc7\u7a0b\uff1a \u51c6\u5907\u9636\u6bb5\uff1aQ\u4fdd\u5b58P\u7684\u73b0\u573a\uff0c\u5e76\u4e3a\u81ea\u5df1\u7684 \u975e\u9759\u6001\u5c40\u90e8\u53d8\u91cf \u5206\u914d\u7a7a\u95f4 \u5904\u7406\u9636\u6bb5\uff1a\u6267\u884cQ\u7684\u8fc7\u7a0b\u4f53(\u51fd\u6570\u4f53) \u7ed3\u675f\u9636\u6bb5\uff1aQ\u6062\u590dP\u7684\u73b0\u573a\uff0c\u91ca\u653e\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4 \u7ed3\u675f\u9636\u6bb5RET\u6307\u4ee4\uff1aQ\u53d6\u51fa\u8fd4\u56de\u5730\u5740\uff0c\u5c06\u63a7\u5236\u8f6c\u79fb\u5230P \u73b0\u573a\uff1a\u901a\u7528\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u3002\u56e0\u4e3a\u6240\u6709\u8fc7\u7a0b\u5171\u4eab\u4e00\u5957\u901a\u7528\u5bc4\u5b58\u5668 - \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff1aEAX\u3001EDX\u3001ECX\u3002\u5373\u5f53\u8fc7\u7a0bP\u8c03\u7528\u8fc7\u7a0bQ\u65f6\uff0cQ\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e09\u4e2a\u5bc4\u5b58\u5668\uff0c\u4e0d\u7528\u5c06\u4ed6\u4eec\u7684\u503c\u4fdd\u5b58\u5230\u6808\u4e2d\u3002\u5982\u679cP\u5728\u4eceQ\u8fd4\u56de\u540e\u8fd8\u8981\u7528\u8fd9\u4e09\u4e2a\u5bc4\u5b58\u5668\uff0c\u5219P\u5e94\u5728\u8f6c\u5230Q\u4e4b\u524d\u5148\u4fdd\u5b58\uff0c\u5e76\u5728\u4eceQ\u8fd4\u56de\u540e\u5148\u6062\u590d\u5b83\u4eec\u7684\u503c\u518d\u4f7f\u7528\u3002\u4e3a\u4e86\u51cf\u5c11\u51c6\u5907\u548c\u7ed3\u675f\u9636\u6bb5\u7684\u5f00\u9500\uff0c\u5e94\u5148\u4f7f\u7528\u8fd9\u4e09\u4e2a\u5bc4\u5b58\u5668 - \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff1aEBX\u3001ESI\u3001EDI\u3002\u5373Q\u5fc5\u987b\u5148\u5c06\u5b83\u4eec\u7684\u503c\u4fdd\u5b58\u5230\u6808\u4e2d\u518d\u4f7f\u7528\u5b83\u4eec\uff0c\u5e76\u5728\u8fd4\u56deP\u4e4b\u524d\u6062\u590d\u5b83\u4eec\u7684\u503c - EBP\u548cESP\u5206\u522b\u662f\u5e27\u6307\u9488\u5bc4\u5b58\u5668\u548c\u6808\u6307\u9488\u5bc4\u5b58\u5668\uff0c\u5206\u522b\u7528\u6765\u6307\u5411\u5f53\u524d\u6808\u5e27\u7684\u5e95\u90e8\u548c\u9876\u90e8 \u3010\u4f8b\u5b50\u3011 1 2 3 4 5 6 7 8 9 int add ( int x , int y ){ return x + y ; } int caller (){ int t1 = 125 ; int t2 = 80 ; int sum = add ( t1 , t2 ); return sum ; } pushl %ebp \u51c6\u5907\u9636\u6bb5 movl %esp,%ebp \u51c6\u5907\u9636\u6bb5 subl $24,%esp \u51c6\u5907\u9636\u6bb5 movl $125,-12(%ebp) \u5206\u914d\u5c40\u90e8\u53d8\u91cf movl $80,-8(%ebp) \u5206\u914d\u5c40\u90e8\u53d8\u91cf movl -8(%ebp),%eax \u51c6\u5907\u5165\u53e3\u53c2\u6570 movl %eax,4(%esp) \u51c6\u5907\u5165\u53e3\u53c2\u6570 movl -12(%ebp),%eax \u51c6\u5907\u5165\u53e3\u53c2\u6570 movl %eax,(%esp) \u51c6\u5907\u5165\u53e3\u53c2\u6570 call add movl %eax,-4(%ebp) \u51c6\u5907\u8fd4\u56de\u53c2\u6570 movl -4(%ebp),%eax \u51c6\u5907\u8fd4\u56de\u53c2\u6570 leave \u7ed3\u675f\u9636\u6bb5 movl %ebp,%esp; popl %ebp ret \u7ed3\u675f\u9636\u6bb5 \u8be6\u7ec6\u89e3\u6790: \u5728\u8c03\u7528\u8005caller\u7684\u51c6\u5907\u9636\u6bb5\uff0c\u5c06\u539f\u6709\u7684\u6808\u5e95ebp(\u5373\u8c03\u7528caller\u7684\u51fd\u6570\u7684\u6808\u5e27\u6808\u5e95)\u7684\u503c\u5165\u6808\uff1b\u7136\u540e\u5c06\u73b0\u5728\u7684\u6808\u9876esp\u7ed9ebp\uff0c\u5373ebp\u6210\u4e3a\u65b0\u7684\u6808\u5e27\u7684\u6808\u5e95\uff1besp-24\uff0c\u5373\u6808\u9876\u6307\u9488\u5f80\u4f4e\u5730\u5740\u79fb\u52a824\u4e2a\u5b57\u8282\uff0c\u5b9a\u4f4d\u5230\u65b0\u7684\u6808\u9876\uff0c\u81f3\u6b64caller\u7684\u6808\u5e27\u5f62\u6210 int t1=125;int t2=80\u5bf9\u5e94movl $125,-12(%ebp);movl $80,-8(%ebp) \u662f\u5728\u5206\u914d\u5c40\u90e8\u53d8\u91cf\u3002\u5c06ebp-12\u4f4d\u7f6e\u5904\u7684\u5185\u5bb9\u7f6e\u4e3a125\uff0c\u5373t1\u7684\u4f4d\u7f6e\uff1b\u5c06ebp-8\u4f4d\u7f6e\u5904\u7684\u5185\u5bb9\u7f6e\u4e3a80\uff0c\u5373t2\u7684\u4f4d\u7f6e\u3002 \u4e3a\u4ec0\u4e48\u8981\u53cd\u7740\u5b58 \u56e0\u4e3aadd\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u8981\u5728\u8c03\u7528add\u524d\uff0c\u5c06add\u6240\u9700\u8981\u7684\u53c2\u6570\u653e\u5728add\u80fd\u591f\u8bbf\u95ee\u7684\u4f4d\u7f6e\u3002\u53c2\u6570\u538b\u6808\u7684\u987a\u5e8f\u662f\u4ece\u53f3\u5f80\u5de6\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b65\u662f\u5c06t2\u538b\u6808\uff0c movl -8(%ebp),%eax \uff0c\u5373\u628aebp-8\u5904\u5373t2\u5904\u7684\u503c\u8d4b\u7ed9eax\uff0c\u7136\u540e movl %eax,4(%esp) \u662f\u5c06eax\u7684\u503c\u8d4b\u7ed9esp+4(esp\u5f80\u9ad8\u5730\u5740)\u6240\u5728\u4f4d\u7f6e\u7684\u503c\uff1b\u7b2c\u4e8c\u6b65\u5c06t1\u538b\u6808\uff0c movl -12(%ebp),%eax \uff0c\u5373\u628aebp-12\u5904\u5373t1\u5904\u7684\u503c\u8d4b\u7ed9eax\uff0c\u7136\u540e movl %eax,(%esp) \u662f\u5c06eax\u7684\u503c\u8d4b\u7ed9esp\u6240\u5728\u4f4d\u7f6e\u7684\u503c call add\u5373caller\u5148\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\uff0c\u5373call add\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff0c\u7136\u540e\u518d\u8c03\u7528add\u51fd\u6570\uff0c\u5c06\u63a7\u5236\u6743\u79fb\u4ea4\u7ed9add add\u51fd\u6570\u5f00\u59cb\u65f6\uff0c\u5148\u8981 pushl %ebp;movl %esp,%ebp \uff0c\u5373\u4fdd\u5b58caller\u6808\u5e27\u7684\u6307\u5411\u6808\u5e95\u7684ebp\u6307\u9488\u7684\u503c\uff0c\u7136\u540e\u5c06\u73b0\u5728\u7684esp\u7684\u503c\u8d4b\u7ed9ebp\uff0cebp\u5373\u4e3a\u65b0\u6808\u5e27\u7684\u6808\u5e95\uff0c\u5373add\u51fd\u6570\u7684\u6808\u5e95 add\u51fd\u6570\u6267\u884c\u7ed3\u675f\uff0c\u8fd4\u56decaller\u51fd\u6570\u3002add\u51fd\u6570\u7684\u8fd4\u56de\u53c2\u6570\u603b\u50a8\u5b58\u5728eax\u4e2d caller\u51fd\u6570\u8981\u83b7\u5f97add\u51fd\u6570\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u9700\u8981\u5c06eax\u4e2d\u5b58\u7684\u503c\u8d4b\u503c\u7ed9ebp-4\uff0c\u5373\u56fe\u4e2d\u7684sum \u7531\u4e8ecaller\u51fd\u6570\u4e5f\u9700\u8981\u5c06sum\u7ed3\u679c\u8fd4\u56de\u7ed9\u4e0a\u4e00\u4e2a\u8c03\u7528\u5b83\u7684\u51fd\u6570\uff0c\u6240\u4ee5caller\u51fd\u6570\u4e2d\u628asum\u7684\u503c\u4f20\u7ed9\u4e86eax\u5bc4\u5b58\u5668 caller\u51fd\u6570\u6267\u884cleave\u6307\u4ee4\uff0c\u5373\u628aebp\u7684\u503c\u7ed9esp\uff0c\u5373\u9000\u6808\uff0cesp\u5f80\u9ad8\u5730\u5740\u79fb\u52a8\uff0ccaller\u7684\u6808\u5e27\u201c\u6d88\u5931\u201d\uff0cesp\u662f\u4f5c\u4e3a\u8c03\u7528caller\u7684\u51fd\u6570\u7684\u6808\u5e27\u6808\u9876\uff1b\u7136\u540e\u518d\u628a\u6808\u9876\u7684\u539f\u6765\u538b\u6808\u7684\u8c03\u7528caller\u7684\u51fd\u6570\u7684EBP\u503c\u51fa\u6808\uff0cEBP\u4e3a\u8c03\u7528caller\u7684\u51fd\u6570\u7684\u6808\u5e27\u7684\u6808\u5e95\uff0c\u8c03\u7528caller\u51fd\u6570\u7684\u6808\u5e27\u6062\u590d ret\u8868\u793acaller\u51fd\u6570\u8c03\u7528\u7ed3\u675f\uff0c\u56de\u5f52\u5230\u8c03\u7528caller\u51fd\u6570\u7ee7\u7eed\u6267\u884c \u603b\u7ed3\uff1a\u4e00\u4e2aC\u8fc7\u7a0b\u7684\u5927\u81f4\u7ed3\u6784\u5982\u4e0b\uff1a \u51c6\u5907\u9636\u6bb5 \u5f62\u6210\u5e27\u5e95\uff1apush\u6307\u4ee4 \u548c mov\u6307\u4ee4 \u751f\u6210\u6808\u5e27\uff08\u5982\u679c\u9700\u8981\u7684\u8bdd\uff09\uff1asub\u6307\u4ee4 \u6216 and\u6307\u4ee4 \u4fdd\u5b58\u73b0\u573a\uff08\u5982\u679c\u6709\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff09 \uff1amov\u6307\u4ee4 \u8fc7\u7a0b(\u51fd\u6570)\u4f53 \u5206\u914d\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4\uff0c\u5e76\u8d4b\u503c \u5177\u4f53\u5904\u7406\u903b\u8f91\uff0c\u5982\u679c\u9047\u5230\u51fd\u6570\u8c03\u7528\u65f6 \u51c6\u5907\u53c2\u6570\uff1a\u5c06\u5b9e\u53c2\u9001\u6808\u5e27\u5165\u53e3\u53c2\u6570\u5904 CALL\u6307\u4ee4\uff1a\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\u5e76\u8f6c\u88ab\u8c03\u7528\u51fd\u6570 \u5728EAX\u4e2d\u51c6\u5907\u8fd4\u56de\u53c2\u6570 \u7ed3\u675f\u9636\u6bb5 \u9000\u6808\uff1aleave\u6307\u4ee4 \u6216 pop\u6307\u4ee4 \u53d6\u8fd4\u56de\u5730\u5740\u8fd4\u56de\uff1aret\u6307\u4ee4 \u5165\u53e3\u53c2\u6570\u7684\u4f4d\u7f6e \u6309\u5730\u5740\u4f20\u9012\u53c2\u6570\u548c\u6309\u503c\u4f20\u9012\u53c2\u6570 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 // \u7a0b\u5e8f\u4e00 // \u6309\u5730\u5740\u4f20\u9012\u53c2\u6570 #include <stdio.h> int main (){ int a = 15 , b = 22 ; printf ( \"a=%d \\t b=%d \\n \" , a , b ); swap ( & a , & b ); printf ( \"a=%d \\t b=%d \\n \" , a , b ); } void swap ( int * x , int * y ){ int t =* x ; * x =* y ; * y = t ; } // \u7a0b\u5e8f\u4e8c // \u6309\u503c\u4f20\u9012\u53c2\u6570 #include <stdio.h> int main (){ int a = 15 , b = 22 ; printf ( \"a=%d \\t b=%d \\n \" , a , b ); swap ( a , b ); printf ( \"a=%d \\t b=%d \\n \" , a , b ); } void swap ( int x , int y ){ int t = x ; x = y ; y = t ; } \u6309\u5730\u5740\u4f20\u9012\u53c2\u6570 \u6309\u503c\u4f20\u9012\u53c2\u6570 \u9012\u5f52\u8fc7\u7a0b - \u597d\u96be\u7406\u89e3\u54c7\u545c\u545c\u545c \u3010\u4f8b\u4e8c\u3011 \u9009\u62e9\u548c\u5faa\u73af\u8bed\u53e5\u7684\u673a\u5668\u7ea7\u8868\u793a \u00b6 a. \u673a\u5668\u7684\u7ed3\u6784\u4e0e\u8fd0\u884c\uff0c\u6307\u4ee4\u7cfb\u7edf\u7684\u5bfb\u5740\u65b9\u5f0f \u00b6 b. \u57fa\u672c\u6570\u636e\u7c7b\u578b\u4e0e\u64cd\u4f5c\u7684\u673a\u5668\u7ea7\u8868\u793a \u00b6 c. \u57fa\u672c\u7a0b\u5e8f\u7ed3\u6784\u7684\u673a\u5668\u7ea7\u8868\u793a \u00b6 d. \u7f13\u51b2\u5668\u6ea2\u51fa\u539f\u7406\u4e0e\u6f0f\u6d1e\u653b\u9632 \u00b6 3.\u5904\u7406\u5668\u4f53\u7cfb\u7ed3\u6784 \u00b6 a. ISA\u7684\u7ec4\u6210\u4e0e\u8bbe\u8ba1 \u00b6 b. \u987a\u5e8f\u7ed3\u6784CPU\u5b9e\u73b0\u4e0e\u5fae\u64cd\u4f5c \u00b6 c. \u6d41\u6c34\u7ebfCPU\u57fa\u672c\u539f\u7406\u4e0e\u76f8\u5173\u6280\u672f \u00b6 4.\u4f18\u5316\u5b58\u50a8\u6027\u80fd \u00b6 a. \u9762\u5411\u7f16\u8bd1\u5668\u7684\u7a0b\u5e8f\u4f18\u5316\u65b9\u6cd5 \u00b6 b. \u9762\u5411\u6d41\u6c34\u7ebfCPU\u3001\u8d85\u6807\u91cfCPU\u3001\u5411\u91cfCPU\u7684\u7a0b\u5e8f\u4f18\u5316\u65b9\u6cd5 \u00b6 5.\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784 \u00b6 a. \u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784\u4e0e\u5c40\u90e8\u6027\u539f\u7406 \u00b6 b. \u9ad8\u901f\u7f13\u5b58\u6280\u672f\u4e0e\u57fa\u4e8e\u5b58\u50a8\u5668\u7684\u7a0b\u5e8f\u4f18\u5316\u6280\u672f \u00b6","title":"\u3010\u8003\u7814\u5411\u3011\u7a0b\u5e8f\u7ed3\u6784\u548c\u6267\u884c-\u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-2/#part-one-machine-level-programming","text":"","title":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part One \u7a0b\u5e8f\u7ed3\u6784\u548c\u6267\u884c\u4e4b\u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a Machine-Level Programming"},{"location":"CSAPP/CSAPP-PartOne-2/#ia-32","text":"","title":"IA-32\u6307\u4ee4\u7cfb\u7edf"},{"location":"CSAPP/CSAPP-PartOne-2/#_1","text":"","title":"\u6307\u4ee4\u7cfb\u7edf\u6982\u8ff0"},{"location":"CSAPP/CSAPP-PartOne-2/#_2","text":"\u5de5\u4f5c\u65b9\u5f0f\uff1a \u5b58\u50a8\u7a0b\u5e8f \u6570\u636e\u548c\u6307\u4ee4\u5b9e\u73b0\u5b58\u653e\u5728\u5b58\u50a8\u5668\u4e2d\uff0c\u5f62\u5f0f\u4e0a\u6ca1\u6709\u5dee\u522b \u6bcf\u6761\u6307\u4ee4\u548c\u6bcf\u4e2a\u6570\u636e\u90fd\u6709\u5730\u5740\u3002\u6307\u4ee4\u6309\u5e8f\u5b58\u653e\uff0c\u6307\u4ee4\u7531OP\u3001ADDR\u5b57\u6bb5\u7ec4\u6210 \u6307\u4ee4\u4e2d\u9700\u7ed9\u51fa\u7684\u4fe1\u606f\uff1a \u64cd\u4f5c\u6027\u8d28(\u64cd\u4f5c\u7801) \u6e90\u64cd\u4f5c\u65701 \u6216/\u548c \u6e90\u64cd\u4f5c\u65702(\u7acb\u5373\u6570\u3001\u5bc4\u5b58\u5668\u7f16\u53f7\u3001 \u5b58\u50a8\u5730\u5740 ) \u76ee\u7684\u64cd\u4f5c\u6570\u5730\u5740(\u5bc4\u5b58\u5668\u7f16\u53f7\u3001 \u5b58\u50a8\u5730\u5740 ) \u5b58\u50a8\u5730\u5740\u7684\u63cf\u8ff0\u4e0e \u64cd\u4f5c\u6570\u7684\u6570\u636e\u7ed3\u6784 \u6709\u5173 \u7a0b\u5e8f\u7531\u6307\u4ee4\u7ec4\u6210\uff0c\u7a0b\u5e8f\u542f\u52a8\u540e\uff0c\u8ba1\u7b97\u673a\u81ea\u52a8\u53d6\u51fa\u6307\u4ee4\u6267\u884c\uff0c\u7a0b\u5e8f\u8d77\u59cb\u5730\u5740\u5728PC\u4e2d \u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u6307\u4ee4\u548c\u6570\u636e\u88ab\u4ece\u5b58\u50a8\u5668\u53d6\u5230CPU\uff0c\u5b58\u653e\u5728CPU\u5185\u7684\u5bc4\u5b58\u5668\u4e2d\uff0c\u6307\u4ee4\u5728IR(\u6307\u4ee4\u5bc4\u5b58\u5668)\u4e2d\uff0c\u6570\u636e\u5728GPR(\u901a\u7528\u5bc4\u5b58\u5668)\u4e2d","title":"\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u57fa\u672c\u7ec4\u6210"},{"location":"CSAPP/CSAPP-PartOne-2/#_3","text":"","title":"\u8ba1\u7b97\u673a\u4e2d\u6570\u636e\u5b58\u50a8"},{"location":"CSAPP/CSAPP-PartOne-2/#_4","text":"\u540d\u79f0 \u63cf\u8ff0 \u7c7b\u6bd4 \u673a\u5668\u6307\u4ee4 \u5904\u4e8e\u786c\u4ef6\u548c\u8f6f\u4ef6\u7684\u4ea4\u754c\u9762 \u4e00\u4e2a\u83dc\u8c31\u6307\u5b9a\u7684\u4e00\u4e2a\u5b8c\u6574\u505a\u83dc\u8fc7\u7a0b \u5fae\u6307\u4ee4 \u5fae\u7a0b\u5e8f\u7ea7\u547d\u4ee4\uff0c\u5c5e\u4e8e\u786c\u4ef6\u8303\u7574 \u6d17\u3001\u5207\u3001\u716e\u3001\u7092\u7b49\u505a\u83dc\u201c\u5fae\u8fc7\u7a0b\u201d \u4f2a\u6307\u4ee4 \u7531\u82e5\u5e72\u673a\u5668\u6307\u4ee4\u7ec4\u6210\u7684\u6307\u4ee4\u5e8f\u5217\uff0c\u5c5e\u4e8e\u8f6f\u4ef6\u8303\u7574 \u7531\u591a\u4e2a\u83dc\u8c31\u5408\u6210\u4e00\u4e2a\u201d\u5927\u83dc\u201c\u7684\u8fc7\u7a0b \u6c47\u7f16\u6307\u4ee4 \u673a\u5668\u6307\u4ee4\u7684\u6c47\u7f16\u8868\u793a\u5f62\u5f0f\uff0c\u5373\u7b26\u53f7\u8868\u793a \u673a\u5668\u6307\u4ee4\u548c\u6c47\u7f16\u6307\u4ee4\u4e00\u4e00\u5bf9\u5e94\uff0c\u5b83\u4eec\u90fd\u4e0e\u5177\u4f53\u673a\u5668\u7ed3\u6784\u6709\u5173\uff0c\u90fd\u5c5e\u4e8e \u673a\u5668\u7ea7\u6307\u4ee4","title":"\u6307\u4ee4"},{"location":"CSAPP/CSAPP-PartOne-2/#isainstruction-set-architecture","text":"ISA\u662f\u4e00\u79cd\u89c4\u7ea6\uff08Specification\uff09\uff0c\u5b83\u89c4\u5b9a\u4e86\u5982\u4f55\u4f7f\u7528\u786c\u4ef6 \u53ef\u6267\u884c\u7684\u6307\u4ee4\u7684\u96c6\u5408\uff0c\u5305\u62ec \u6307\u4ee4\u683c\u5f0f \u3001 \u64cd\u4f5c\u79cd\u7c7b \u4ee5\u53ca\u6bcf\u79cd\u64cd\u4f5c\u5bf9\u5e94\u7684\u64cd\u4f5c\u6570\u7684\u76f8\u5e94\u89c4\u5b9a\uff1b \u6307\u4ee4\u53ef\u4ee5\u63a5\u53d7\u7684 \u64cd\u4f5c\u6570\u7684\u7c7b\u578b \uff1b \u64cd\u4f5c\u6570\u6240\u80fd\u5b58\u653e\u7684\u5bc4\u5b58\u5668\u7ec4\u7684\u7ed3\u6784\uff0c\u5305\u62ec\u6bcf\u4e2a \u5bc4\u5b58\u5668\u7684\u540d\u79f0\u3001\u7f16\u53f7\u3001\u957f\u5ea6\u548c\u7528\u9014 \uff1b \u64cd\u4f5c\u6570\u6240\u80fd\u5b58\u653e\u7684 \u5b58\u50a8\u7a7a\u95f4\u7684\u5927\u5c0f\u548c\u7f16\u5740\u65b9\u5f0f \uff1b \u64cd\u4f5c\u6570\u5728\u5b58\u50a8\u7a7a\u95f4\u5b58\u653e\u65f6\u6309\u7167 \u5927\u7aef\u8fd8\u662f\u5c0f\u7aef\u65b9\u5f0f\u5b58\u653e \uff1b \u6307\u4ee4\u83b7\u53d6\u64cd\u4f5c\u6570\u7684\u65b9\u5f0f\uff0c\u5373 \u5bfb\u5740\u65b9\u5f0f \uff1b \u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u7684\u63a7\u5236\u65b9\u5f0f\uff0c\u5305\u62ec \u7a0b\u5e8f\u8ba1\u6570\u5668\u3001\u6761\u4ef6\u7801\u5b9a\u4e49 \u7b49\u3002 ISA\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u4e00\u4e2a \u62bd\u8c61\u5c42 \uff0c\u6ca1\u6709\u5b83\u5219\u8f6f\u4ef6\u65e0\u6cd5\u4f7f\u7528\u8ba1\u7b97\u673a\u786c\u4ef6\uff0c\u4e00\u53f0\u8ba1\u7b97\u673a\u4e0d\u80fd\u79f0\u4e3a\u201c\u901a\u7528\u8ba1\u7b97\u673a\u201d ISA\u548c\u8ba1\u7b97\u673a\u7ec4\u6210\uff08\u5fae\u7ed3\u6784\uff09\u4e4b\u95f4\u7684\u5173\u7cfb \u4e0d\u540cISA\u89c4\u5b9a\u7684\u6307\u4ee4\u96c6\u4e0d\u540c\uff0c\u5982\uff0cIA-32\u3001MIPS\u3001ARM\u7b49 \u8ba1\u7b97\u673a\u7ec4\u6210\u5fc5\u987b\u80fd\u591f \u5b9e\u73b0 ISA\u89c4\u5b9a\u7684\u529f\u80fd\uff0c\u5982\u63d0\u4f9bGPR\u3001\u6807\u5fd7\u3001\u8fd0\u7b97\u7535\u8def\u7b49 \u540c\u4e00\u79cd ISA\u53ef\u4ee5\u6709 \u4e0d\u540c\u7684 \u8ba1\u7b97\u673a\u7ec4\u6210\uff0c\u5982\u4e58\u6cd5\u6307\u4ee4\u53ef\u7528ALU\u6216\u4e58\u6cd5\u5668\u5b9e\u73b0","title":"\u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784ISA\uff1aInstruction Set Architecture"},{"location":"CSAPP/CSAPP-PartOne-2/#ia-32_1","text":"\u4f53\u7cfb\u7ed3\u6784 \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u53ca\u683c\u5f0f b \uff1a8\u4f4d\uff0cbyte w \uff1a16\u4f4d\uff0cword l \uff1a32\u4f4d\uff0cdouble word long double\u5b9e\u9645\u957f\u5ea6\u4e3a80\u4f4d\uff0c\u4f46\u5206\u914d96\u4f4d=12B\uff08\u63094B\u5bf9\u9f50\uff09 IA-32\u5bc4\u5b58\u5668\u7ec4\u7ec7 \u5bc4\u5b58\u5668\u6269\u5c55\u7684\u65b9\u5f0f \u9996\u5148\u67098\u4e2a8\u4f4d\u7684\u5bc4\u5b58\u5668\uff1aAL\u3001BL...\u3001DH \u7136\u540e\u67098\u4e2a16\u4f4d\u7684\u5bc4\u5b58\u5668\uff1aAX\u3001BX...\u3001DI \u7136\u540e\u6269\u5c55\u523032\u4f4d\u673a\u5668\u7684\u65f6\u5019\uff0c\u6709\u4e868\u4e2a32\u4f4d\u7684\u5bc4\u5b58\u5668\uff0c\u524d\u9762\u7684E\u4ee3\u886832\u4f4d\uff1aEAX\u3001EBX...\u3001EDI \u53cd\u6620\u4e86\u4f53\u7cfb\u7ed3\u6784\u53d1\u5c55\u7684\u8f68\u8ff9\uff0c\u5b57\u957f\u4e0d\u65ad\u6269\u5145\uff0c\u6307\u4ee4\u4fdd\u6301\u517c\u5bb9 ST(0)~ST(7)\u662f80\u4f4d\uff0cMM0~MM7\u4f7f\u7528\u5176\u4f4e64\u4f4d IA-32\u7684\u6807\u5fd7\u5bc4\u5b58\u5668 6\u4e2a\u6761\u4ef6\u6807\u5fd7 OF\u3001SF\u3001ZF\u3001CF\u5404\u662f\u4ec0\u4e48\u6807\u5fd7\uff08\u6761\u4ef6\u7801\uff09 AF\uff1a\u8f85\u52a9\u8fdb\u4f4d\u6807\u5fd7\uff08BCD\u7801\u8fd0\u7b97\u65f6\u624d\u6709\u610f\u4e49\uff09 PF\uff1a\u5947\u5076\u6807\u5fd7 3\u4e2a\u63a7\u5236\u6807\u5fd7 DF\uff08Direction Flag\uff09\uff1a\u65b9\u5411\u6807\u5fd7\uff08\u81ea\u52a8\u53d8\u5740\u65b9\u5411\u662f\u589e\u8fd8\u662f\u51cf\uff09 IF\uff08Interrupt Flag\uff09\uff1a\u4e2d\u65ad\u5141\u8bb8\u6807\u5fd7 \uff08\u4ec5\u5bf9\u5916\u90e8\u53ef\u5c4f\u853d\u4e2d\u65ad\u6709\u7528\uff09 TF\uff08Trap Flag\uff09\uff1a\u9677\u9631\u6807\u5fd7\uff08\u662f\u5426\u662f\u5355\u6b65\u8ddf\u8e2a\u72b6\u6001\uff09 IA-32\u7684 \u5bfb\u5740\u65b9\u5f0f (\u5982\u4f55\u6839\u636e\u6307\u4ee4\u6240\u5b9a\u4fe1\u606f\u5f97\u5230\u64cd\u4f5c\u6570\u6216\u64cd\u4f5c\u6570\u5730\u5740) \u64cd\u4f5c\u6570\u6240\u5728\u7684\u4f4d\u7f6e \u6307\u4ee4\u4e2d\uff1a\u7acb\u5373\u5bfb\u5740 \u5bc4\u5b58\u5668\u4e2d\uff1a\u5bc4\u5b58\u5668\u5bfb\u5740 \u5b58\u50a8\u5355\u5143\u4e2d\uff08\u5c5e\u4e8e\u5b58\u50a8\u5668\u64cd\u4f5c\u6570\uff0c\u6309\u5b57\u8282\u7f16\u5740\uff09\uff1a\u5176\u4ed6\u5bfb\u5740\u65b9\u5f0f \u5b58\u50a8\u5668\u64cd\u4f5c\u6570\u7684\u5bfb\u5740\u65b9\u5f0f\u4e0e\u5fae\u5904\u7406\u5668\u7684\u5de5\u4f5c\u6a21\u5f0f\u6709\u5173 \u5b9e\u5730\u5740\u6a21\u5f0f\uff08\u57fa\u672c\u7528\u4e0d\u5230\uff09 \u4e3a\u4e0e8086/8088\u517c\u5bb9\u800c\u8bbe\uff0c\u52a0\u7535\u6216\u590d\u4f4d\u65f6 \u5bfb\u5740\u7a7a\u95f4\u4e3a1MB\uff0c20\u4f4d\u5730\u5740\uff1a(CS)<<4+(IP) \u4fdd\u62a4\u6a21\u5f0f\uff08\u9700\u8981\u638c\u63e1\uff09 \u52a0\u7535\u540e\u8fdb\u5165\uff0c\u91c7\u7528\u865a\u62df\u5b58\u50a8\u7ba1\u7406\uff0c\u591a\u4efb\u52a1\u60c5\u51b5\u4e0b\u9694\u79bb\u3001\u4fdd\u62a4 80286\u4ee5\u4e0a\u5fae\u5904\u7406\u5668\u7684\u5de5\u4f5c\u6a21\u5f0f \u5bfb\u5740\u7a7a\u95f4\u4e3a 2^{32} 2^{32} B\uff0c32\u4f4d\u7ebf\u6027\u5730\u5740\u5206\u6bb5\uff08\u6bb5\u57fa\u5740+\u6bb5\u5185\u504f\u79fb\u91cf\uff09 IA-32\u673a\u5668\u6307\u4ee4\u683c\u5f0f","title":"IA-32"},{"location":"CSAPP/CSAPP-PartOne-2/#ia-32_2","text":"","title":"IA-32\u6307\u4ee4\u7c7b\u578b"},{"location":"CSAPP/CSAPP-PartOne-2/#_5","text":"\u901a\u7528\u6570\u636e\u4f20\u9001\u6307\u4ee4 \u5730\u5740\u4f20\u9001\u6307\u4ee4 lea\uff1a\u52a0\u8f7d\u6709\u6548\u5730\u5740load effective address \u5982 leal (%edx,%eax),%eax \u7684\u529f\u80fd\u4e3a R[eax]\u2b05R[edx]+R[eax] \uff0c\u610f\u601d\u662f\u628a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u53d6\u51fa\u6765\uff0c\u628a\u8fdb\u884c\u52a0\u6cd5\u8fd0\u7b97\u540e\u7684\u548c\uff0c\u4f5c\u4e3a\u6570\u636e\u88c5\u5165\u5230eax\u4e2d\uff0c\u6267\u884c\u524d\u82e5R[edx]=i\uff0cR[eax]=j\uff0c\u5219\u6307\u4ee4\u6267\u884c\u540eR[eax]=i+j\uff0c\u6b64\u5904\u7684R\u8868\u793a\u5bc4\u5b58\u5668register (%edx,%eax)\uff0cedx\u7684\u5185\u5bb9\uff0c\u76f8\u5f53\u4e8e\u662f\u57fa\u5740\u503c\uff0c\u52a0\u4e0aeax\u7684\u5185\u5bb9\uff0c\u76f8\u5f53\u4e8e\u662f\u53d8\u5740\u503c\uff0c\u57fa\u5740+\u53d8\u5740\uff0c\u4e24\u4e2a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u52a0\u8d77\u6765\u662f\u6709\u6548\u5730\u5740 \u8f93\u5165\u8f93\u51fa\u6307\u4ee4 \u6807\u5fd7\u4f20\u9001\u6307\u4ee4 \u3010\u4f8b\u4e00\u3011\u201c\u5165\u6808\u201d(pushw %ax)\u7684\u89e3\u91ca\u8fc7\u7a0b \u5c06\u901a\u7528\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u9001\u5230\u6808\u9876\u4f4d\u7f6e\u6240\u6307\u7684\u6570\u636e w\u662f16\u4f4d\uff0cax\u662f16\u4f4d\u5bc4\u5b58\u5668 \u63094B\u5bf9\u9f50\uff0c\u6240\u4ee5\u4e00\u4e2a\u6a2a\u683c\u4e3a32\u4f4d\uff0c\u53732\u4e2aax \u5c0f\u7aef\u65b9\u5f0f\uff0c\u6240\u4ee5AL\u5728\u6808\u9876\uff0cLSB\u5728\u4f4e\u5730\u5740 \u6808\u7531\u9ad8\u5730\u5740\u5411\u4f4e\u5730\u5740\u589e\u957f \u8fc7\u7a0b\u4e3a\uff1a 1 2 3 4 5 6 7 8 # \u53d6\u6808\u9876\u6307\u9488sp\u5bc4\u5b58\u5668\u4e2d\u7684\u503c # \u5c06\u6808\u9876\u6307\u9488\u5411\u4e0b\u79fb\u4e00\u4e2aax\u7684\u8ddd\u79bb(2\u4e2a\u5b57\u8282)\uff0c\u5373-2 # \u8ba9sp\u6307\u5411\u65b0\u7684\u6808\u9876 R[sp]\u2b05R[sp]-2 # \u628aax\u4e2d\u7684\u503c\u538b\u6808\uff0c\u610f\u601d\u662f\u5c06ax\u7684\u503c = \u4ee5\u6808\u9876\u6307\u9488sp\u7684\u503c\u4e3a\u5185\u5b58\u5730\u5740\u7684\u90a3\u5757\u5355\u5143\u7684\u6240\u5b58\u7684\u503c # \u5373\u5728\u65b0\u7684\u6808\u9876\u5904\u628aax\u7684\u5185\u5bb9\u653e\u5165 # M\u8868\u793a\u5185\u5b58 memory M[R[sp]]\u2b05R[ax] \u3010\u4f8b\u4e8c\u3011\u201c\u51fa\u6808\u201d(popw %ax) \u5c06\u6808\u9876\u4f4d\u7f6e\u6240\u6307\u7684\u6570\u636e\u9001\u5230\u901a\u7528\u5bc4\u5b58\u5668 \u8fc7\u7a0b\u4e3a\uff1a 1 2 3 4 # \u539f\u6808\u9876\u5904\u6307\u5411\u7684\u4e24\u4e2a\u5b57\u8282\u9001\u5165ax R[ax]\u2b05M[R[sp]] # \u8ba9sp\u6307\u5411\u65b0\u7684\u6808\u9876 R[sp]\u2b05R[sp]+2 \u3010\u4f8b\u4e09\u3011\u4f20\u9001\u6307\u4ee4\u4e3e\u4f8b \u5c06\u4ee5\u4e0bIntel\u683c\u5f0f\u6307\u4ee4\u8f6c\u6362\u4e3aAT&T\u683c\u5f0f\u6307\u4ee4\uff0c\u5e76\u8bf4\u660e\u529f\u80fd\u3002 1 2 3 4 5 6 7 push ebp mov ebp , esp mov edx , DWORD PTR [ ebp + 8 ] mov bl , 255 mov ax , WORD PTR [ ebp + edx * 4 + 8 ] mov WORD PTR [ ebp + 20 ], dx lea eax , [ ecx + edx * 4 + 8 ] push==l== %ebp R[esp]\u2b05R[esp]-4;M[R[esp]]\u2b05R[ebp] mov==l== %esp,%ebp R[ebp]\u2b05R[esp] movl 8(%ebp),%edx R[edx]\u2b05M[R[ebp]+8] movb $255,%bl R[bl]\u2b05255 movw 8(%ebp,%edx,4),%ax R[ax]\u2b05M[R[ebp]+R[edx]*4+8] movw %dx,20(%ebp) M[R[ebp]+20]\u2b05R[dx] lea==l== 8(%ecx,%edx,4),%eax R[eax]\u2b05R[ecx]+R[edx]*4+8 \u5982\u4f55\u5224\u65ad\u7b2c1\uff0c2\uff0c7\u53e5\u662fl\uff0c\u56e0\u4e3a\u9898\u76ee\u4e2d\u90fd\u662fe\uff0c\u6240\u4ee5\u662f \u53cc\u5b57 \u603b\u7ed3\u89c4\u5f8b\uff1a mov\u6307\u4ee4\u9700\u8981\u5728\u7b97\u51fa\u6709\u6548\u5730\u5740\u540e\u52a0\u4e0aM\uff0c\u800clea\u76f4\u63a5\u662f\u6709\u6548\u5730\u5740 push\u7684\u7b2c\u4e8c\u6761\u76f8\u5f53\u4e8emov\u6307\u4ee41 \u3010\u4f8b\u56db\u3011add\u51fd\u6570 1 2 3 4 5 #include <stdio.h> int add ( int i , int j ){ int x = i + j ; return x ; } \u8868\u793a\u4f20\u9001\u6307\u4ee4\uff1b\u52a0\u7c97\u8868\u793a\u64cd\u4f5c\u6570\uff1b\u6a2a\u7ebf\u8868\u793a\u7528RTL\u63cf\u8ff0\u7684\u4f20\u9001\u6307\u4ee4\u7684\u529f\u80fd 80483d4< add >: 80483d4: 55 push %ebp R[sp]\u2b05R[sp]-2;M[R[sp]]\u2b05R[ebp] 80483d5: 89 e5 mov %esp, %ebp R[ebp]\u2b05R[esp] 80483d7: 83 ec 10 sub $0x10, %esp 80483da: 8b 45 0c mov 0xc(%ebp), %eax R[eax]\u2b05M[R[ebp]+12] 80483dd: 8b 55 08 mov 0x8(%ebp), %edx R[edx]\u2b05M[R[ebp]+8] 80483e0: 8d 04 02 lea (%edx,%eax,1), %eax R[eax]\u2b05R[edx]+R[eax]*1 80483e3: 89 45 fc mov %eax, -0x4(%ebp) M[R[ebp]-4]\u2b05R[eax] 80483e6: 8b 45 fc mov -0x4(%ebp), %eax R[eax]\u2b05M[R[ebp]-4] 80483e9: c9 leave 80483ea: c3 ret \u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b \u5468\u800c\u590d\u59cb\uff1a\u6839\u636eEIP\u53d6\u6307\u4ee4\uff1b\u6307\u4ee4\u8bd1\u7801\uff1b\u53d6\u64cd\u4f5c\u6570\uff1b\u6307\u4ee4\u6267\u884c\uff1b\u56de\u5199\u7ed3\u679c\uff1b\u4fee\u6539EIP\u7684\u503c add\u51fd\u6570\u4ece80483d4\u5f00\u59cb\uff0cEIP\u2b050x80483d4 \u53d6\u6307\u4ee4 \u53d6\u6307\u4ee4\u7684\u8fc7\u7a0b\u662f\u628a\u6307\u4ee4\u5730\u5740\u9001\u5230\u5730\u5740\u7ebf\u548c\u5b58\u50a8\u5668\u7684\u8fc7\u7a0b EIP\u4e2d\u6700\u521d\u5b58\u7684\u662f\u51fd\u6570\u5f00\u59cb\u5730\u574080483d4\uff0c\u5c06\u8be5\u503c\u4f20\u8f93\u7ed9 MAR (\u5b58\u50a8\u5730\u5740\u5bc4\u5b58\u5668\uff0cMAR\u4e3a\u4e0b\u4e00\u6b21\u7684\u8bfb\u5199\u6570\u636e\u6307\u5b9a\u4f4d\u7f6e)\uff0c\u518d\u9001\u5230 \u5730\u5740\u7ebf \u4e0a \u6b64\u65f6\u63a7\u5236\u5668\u53d1\u51fa Rd \u8bfb\u547d\u4ee4\uff0c\u9001\u5230\u63a7\u5236\u7ebf\u4e0a\uff0c\u544a\u8bc9\u5b58\u50a8\u5668\u8981\u8bfb\u5730\u5740\u7ebf\u4e0a\u6240\u7ed9\u7684\u5355\u5143\u7684\u5185\u5bb9 \u5b58\u50a8\u5668\u63a5\u6536\u5230\u8bfb\u547d\u4ee4\u548c\u5730\u5740\u540e\uff0c\u5f00\u59cb\u8fdb\u884c\u8bfb\u64cd\u4f5c\uff0c\u9009\u4e2d\u8be5\u5730\u5740\uff0c\u8bfb\u51fa4\u4e2a\u5b57\u82825589e583\uff0c\u628a\u5730\u5740\u4e0a\u7684\u5185\u5bb9\u4f20\u8f93\u5230\u6570\u636e\u7ebf\u4e0a \u6570\u636e\u4f20\u8f93\u5230MDR(\u5b58\u50a8\u6570\u636e\u5bc4\u5b58\u5668\uff0cMDR\u5b58\u50a8\u4ece\u5185\u5b58\u4ea4\u6362\u7684\u6570\u636e)\uff0c\u7136\u540e\u4f20\u7ed9\u6307\u4ee4\u5bc4\u5b58\u5668IR \u6307\u4ee4\u8bd1\u7801 \u6307\u4ee4\u5bc4\u5b58\u5668\u4e2d\u7684\u9ad8\u4f4d\uff0c\u5373op\u5b57\u6bb5\uff0c\u4f1a\u9001\u5230\u63a7\u5236\u5668\uff0c\u5728\u63a7\u5236\u5668\u4e2d\u8fdb\u884c\u8bd1\u7801 55\u8bd1\u7801\u540e\uff0c\u8ba1\u7b97\u673a\u77e5\u9053\u8be5\u6307\u4ee4\u7684\u529f\u80fd\uff0c\u5373\u4e3a R[esp]\u2b05R[esp]-4;M[R[esp]]\u2b05R[ebp] \u8bd1\u7801\u7684\u7ed3\u679c\u4ea7\u751f\u4e86\u5f88\u591a\u63a7\u5236\u4fe1\u53f7\uff0c\u63a7\u5236\u4fe1\u53f7\u63a7\u5236\u673a\u5668\u5b9e\u73b0\u529f\u80fd \u6307\u4ee4\u6267\u884c R[esp]\u2b05R[esp]-4 \uff1aESP\u7684\u521d\u59cb\u5185\u5bb9\u662f bfff0000 \uff0c\u5c06ESP-4\u540e\u7684\u5185\u5bb9\u53d8\u4e3a beeefffc (ESP\u7684\u6700\u521d\u5185\u5bb9\u5b9e\u9645\u4e0a\u662f\u88ab\u9001\u5165ALU\u4e2d\uff0c\u5728ALU\u4e2d\u5b9e\u73b0-4\uff0c\u7ed3\u679c\u518d\u9001\u56deESP\u4e2d) M[R[esp]]\u2b05R[ebp] \uff1a\u6839\u636eesp\u7684\u5185\u5bb9\u53bb\u5b58\u50a8\u5668\u8bbf\u95ee\uff0c\u5c06ebp\u7684\u5185\u5bb9\u5199\u5165\u5bf9\u5e94\u4f4d\u7f6e \u5c06\u5730\u5740\u5148\u9001\u5165MAR\uff0c\u7136\u540e\u518d\u9001\u5165\u5730\u5740\u7ebf\uff0c\u540c\u65f6\u63a7\u5236\u5668\u53d1\u51faWr\u5199\u4fe1\u53f7\u653e\u5230\u63a7\u5236\u7ebf\u4e0a\uff0c\u5e76\u4e14\u8981\u628a\u5199\u7684\u6570\u636e\u5373EBP\u7684\u5185\u5bb9\u653e\u5230MDR\u4e2d\uff0c\u7136\u540e\u9001\u5230\u6570\u636e\u7ebf\u4e0a \u5b58\u50a8\u5668\u6700\u7ec8\u63a5\u6536\u5230\u7684\u6d88\u606f\u662f\uff1a\u63a5\u53d7\u5199\u7684\u63a7\u5236\u4fe1\u53f7\uff0c\u628a\u6570\u636e\u7ebf\u4e0a\u7684 bfff0020 \u503c\u5199\u5165\u5730\u5740 beeefffc \u5904 \u81f3\u6b64push\u6307\u4ee4\u6267\u884c\u5b8c\uff0c\u5bf9EIP(IA32\u4e2d\u7684PC\uff1a\u7a0b\u5e8f\u8ba1\u6570\u5668)\u589e\u91cf\uff0c\u5373\u5728EIP\u4e2d\u52a0\u4e0a\u6307\u4ee4\u7684\u957f\u5ea6\uff0c\u7531\u4e8epush\u6307\u4ee4(55)\u53ea\u6709\u4e00\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5EIP\u7531 80483d4 \u53d8\u5316\u4e3a 80483d5 \uff0c\u5373\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff0c\u5f00\u59cb\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4 \u4f20\u9001\u6307\u4ee4\u5982\u679c\u662f\u5728\u5bc4\u5b58\u5668\u548c\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u4f20\u9001\uff0c\u5219\u53ea\u9700\u8981\u5728\u5bc4\u5b58\u5668\u4e4b\u95f4\u4f20\u8f93\uff1b\u5982\u679c\u6d89\u53ca\u5230\u8bbf\u95ee\u5185\u5b58\uff0c\u5219\u9700\u8981\u603b\u7ebf\u8fdb\u884c\u4f20\u8f93","title":"\u4f20\u9001\u6307\u4ee4"},{"location":"CSAPP/CSAPP-PartOne-2/#c","text":"\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5b58\u50a8\u5668\u6620\u50cf","title":"C\u8bed\u8a00\u8bed\u53e5\u7684\u673a\u5668\u7ea7\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-2/#_6","text":"\u8fc7\u7a0b\u8c03\u7528\u7684\u6267\u884c\u6b65\u9aa4 P\u4e3a\u8c03\u7528\u8005\uff0cQ\u4e3a\u88ab\u8c03\u7528\u8005 P\u7684\u8fc7\u7a0b\uff1a P\u5c06\u5165\u53e3\u53c2\u6570(\u5b9e\u53c2)\u653e\u5230Q\u80fd\u8bbf\u95ee\u5230\u7684\u5730\u65b9 CALL\u6307\u4ee4 \uff1aP\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\uff0c\u7136\u540e\u5c06\u63a7\u5236\u8f6c\u79fb\u5230Q Q\u7684\u8fc7\u7a0b\uff1a \u51c6\u5907\u9636\u6bb5\uff1aQ\u4fdd\u5b58P\u7684\u73b0\u573a\uff0c\u5e76\u4e3a\u81ea\u5df1\u7684 \u975e\u9759\u6001\u5c40\u90e8\u53d8\u91cf \u5206\u914d\u7a7a\u95f4 \u5904\u7406\u9636\u6bb5\uff1a\u6267\u884cQ\u7684\u8fc7\u7a0b\u4f53(\u51fd\u6570\u4f53) \u7ed3\u675f\u9636\u6bb5\uff1aQ\u6062\u590dP\u7684\u73b0\u573a\uff0c\u91ca\u653e\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4 \u7ed3\u675f\u9636\u6bb5RET\u6307\u4ee4\uff1aQ\u53d6\u51fa\u8fd4\u56de\u5730\u5740\uff0c\u5c06\u63a7\u5236\u8f6c\u79fb\u5230P \u73b0\u573a\uff1a\u901a\u7528\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u3002\u56e0\u4e3a\u6240\u6709\u8fc7\u7a0b\u5171\u4eab\u4e00\u5957\u901a\u7528\u5bc4\u5b58\u5668 - \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff1aEAX\u3001EDX\u3001ECX\u3002\u5373\u5f53\u8fc7\u7a0bP\u8c03\u7528\u8fc7\u7a0bQ\u65f6\uff0cQ\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e09\u4e2a\u5bc4\u5b58\u5668\uff0c\u4e0d\u7528\u5c06\u4ed6\u4eec\u7684\u503c\u4fdd\u5b58\u5230\u6808\u4e2d\u3002\u5982\u679cP\u5728\u4eceQ\u8fd4\u56de\u540e\u8fd8\u8981\u7528\u8fd9\u4e09\u4e2a\u5bc4\u5b58\u5668\uff0c\u5219P\u5e94\u5728\u8f6c\u5230Q\u4e4b\u524d\u5148\u4fdd\u5b58\uff0c\u5e76\u5728\u4eceQ\u8fd4\u56de\u540e\u5148\u6062\u590d\u5b83\u4eec\u7684\u503c\u518d\u4f7f\u7528\u3002\u4e3a\u4e86\u51cf\u5c11\u51c6\u5907\u548c\u7ed3\u675f\u9636\u6bb5\u7684\u5f00\u9500\uff0c\u5e94\u5148\u4f7f\u7528\u8fd9\u4e09\u4e2a\u5bc4\u5b58\u5668 - \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff1aEBX\u3001ESI\u3001EDI\u3002\u5373Q\u5fc5\u987b\u5148\u5c06\u5b83\u4eec\u7684\u503c\u4fdd\u5b58\u5230\u6808\u4e2d\u518d\u4f7f\u7528\u5b83\u4eec\uff0c\u5e76\u5728\u8fd4\u56deP\u4e4b\u524d\u6062\u590d\u5b83\u4eec\u7684\u503c - EBP\u548cESP\u5206\u522b\u662f\u5e27\u6307\u9488\u5bc4\u5b58\u5668\u548c\u6808\u6307\u9488\u5bc4\u5b58\u5668\uff0c\u5206\u522b\u7528\u6765\u6307\u5411\u5f53\u524d\u6808\u5e27\u7684\u5e95\u90e8\u548c\u9876\u90e8 \u3010\u4f8b\u5b50\u3011 1 2 3 4 5 6 7 8 9 int add ( int x , int y ){ return x + y ; } int caller (){ int t1 = 125 ; int t2 = 80 ; int sum = add ( t1 , t2 ); return sum ; } pushl %ebp \u51c6\u5907\u9636\u6bb5 movl %esp,%ebp \u51c6\u5907\u9636\u6bb5 subl $24,%esp \u51c6\u5907\u9636\u6bb5 movl $125,-12(%ebp) \u5206\u914d\u5c40\u90e8\u53d8\u91cf movl $80,-8(%ebp) \u5206\u914d\u5c40\u90e8\u53d8\u91cf movl -8(%ebp),%eax \u51c6\u5907\u5165\u53e3\u53c2\u6570 movl %eax,4(%esp) \u51c6\u5907\u5165\u53e3\u53c2\u6570 movl -12(%ebp),%eax \u51c6\u5907\u5165\u53e3\u53c2\u6570 movl %eax,(%esp) \u51c6\u5907\u5165\u53e3\u53c2\u6570 call add movl %eax,-4(%ebp) \u51c6\u5907\u8fd4\u56de\u53c2\u6570 movl -4(%ebp),%eax \u51c6\u5907\u8fd4\u56de\u53c2\u6570 leave \u7ed3\u675f\u9636\u6bb5 movl %ebp,%esp; popl %ebp ret \u7ed3\u675f\u9636\u6bb5 \u8be6\u7ec6\u89e3\u6790: \u5728\u8c03\u7528\u8005caller\u7684\u51c6\u5907\u9636\u6bb5\uff0c\u5c06\u539f\u6709\u7684\u6808\u5e95ebp(\u5373\u8c03\u7528caller\u7684\u51fd\u6570\u7684\u6808\u5e27\u6808\u5e95)\u7684\u503c\u5165\u6808\uff1b\u7136\u540e\u5c06\u73b0\u5728\u7684\u6808\u9876esp\u7ed9ebp\uff0c\u5373ebp\u6210\u4e3a\u65b0\u7684\u6808\u5e27\u7684\u6808\u5e95\uff1besp-24\uff0c\u5373\u6808\u9876\u6307\u9488\u5f80\u4f4e\u5730\u5740\u79fb\u52a824\u4e2a\u5b57\u8282\uff0c\u5b9a\u4f4d\u5230\u65b0\u7684\u6808\u9876\uff0c\u81f3\u6b64caller\u7684\u6808\u5e27\u5f62\u6210 int t1=125;int t2=80\u5bf9\u5e94movl $125,-12(%ebp);movl $80,-8(%ebp) \u662f\u5728\u5206\u914d\u5c40\u90e8\u53d8\u91cf\u3002\u5c06ebp-12\u4f4d\u7f6e\u5904\u7684\u5185\u5bb9\u7f6e\u4e3a125\uff0c\u5373t1\u7684\u4f4d\u7f6e\uff1b\u5c06ebp-8\u4f4d\u7f6e\u5904\u7684\u5185\u5bb9\u7f6e\u4e3a80\uff0c\u5373t2\u7684\u4f4d\u7f6e\u3002 \u4e3a\u4ec0\u4e48\u8981\u53cd\u7740\u5b58 \u56e0\u4e3aadd\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u8981\u5728\u8c03\u7528add\u524d\uff0c\u5c06add\u6240\u9700\u8981\u7684\u53c2\u6570\u653e\u5728add\u80fd\u591f\u8bbf\u95ee\u7684\u4f4d\u7f6e\u3002\u53c2\u6570\u538b\u6808\u7684\u987a\u5e8f\u662f\u4ece\u53f3\u5f80\u5de6\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b65\u662f\u5c06t2\u538b\u6808\uff0c movl -8(%ebp),%eax \uff0c\u5373\u628aebp-8\u5904\u5373t2\u5904\u7684\u503c\u8d4b\u7ed9eax\uff0c\u7136\u540e movl %eax,4(%esp) \u662f\u5c06eax\u7684\u503c\u8d4b\u7ed9esp+4(esp\u5f80\u9ad8\u5730\u5740)\u6240\u5728\u4f4d\u7f6e\u7684\u503c\uff1b\u7b2c\u4e8c\u6b65\u5c06t1\u538b\u6808\uff0c movl -12(%ebp),%eax \uff0c\u5373\u628aebp-12\u5904\u5373t1\u5904\u7684\u503c\u8d4b\u7ed9eax\uff0c\u7136\u540e movl %eax,(%esp) \u662f\u5c06eax\u7684\u503c\u8d4b\u7ed9esp\u6240\u5728\u4f4d\u7f6e\u7684\u503c call add\u5373caller\u5148\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\uff0c\u5373call add\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff0c\u7136\u540e\u518d\u8c03\u7528add\u51fd\u6570\uff0c\u5c06\u63a7\u5236\u6743\u79fb\u4ea4\u7ed9add add\u51fd\u6570\u5f00\u59cb\u65f6\uff0c\u5148\u8981 pushl %ebp;movl %esp,%ebp \uff0c\u5373\u4fdd\u5b58caller\u6808\u5e27\u7684\u6307\u5411\u6808\u5e95\u7684ebp\u6307\u9488\u7684\u503c\uff0c\u7136\u540e\u5c06\u73b0\u5728\u7684esp\u7684\u503c\u8d4b\u7ed9ebp\uff0cebp\u5373\u4e3a\u65b0\u6808\u5e27\u7684\u6808\u5e95\uff0c\u5373add\u51fd\u6570\u7684\u6808\u5e95 add\u51fd\u6570\u6267\u884c\u7ed3\u675f\uff0c\u8fd4\u56decaller\u51fd\u6570\u3002add\u51fd\u6570\u7684\u8fd4\u56de\u53c2\u6570\u603b\u50a8\u5b58\u5728eax\u4e2d caller\u51fd\u6570\u8981\u83b7\u5f97add\u51fd\u6570\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u9700\u8981\u5c06eax\u4e2d\u5b58\u7684\u503c\u8d4b\u503c\u7ed9ebp-4\uff0c\u5373\u56fe\u4e2d\u7684sum \u7531\u4e8ecaller\u51fd\u6570\u4e5f\u9700\u8981\u5c06sum\u7ed3\u679c\u8fd4\u56de\u7ed9\u4e0a\u4e00\u4e2a\u8c03\u7528\u5b83\u7684\u51fd\u6570\uff0c\u6240\u4ee5caller\u51fd\u6570\u4e2d\u628asum\u7684\u503c\u4f20\u7ed9\u4e86eax\u5bc4\u5b58\u5668 caller\u51fd\u6570\u6267\u884cleave\u6307\u4ee4\uff0c\u5373\u628aebp\u7684\u503c\u7ed9esp\uff0c\u5373\u9000\u6808\uff0cesp\u5f80\u9ad8\u5730\u5740\u79fb\u52a8\uff0ccaller\u7684\u6808\u5e27\u201c\u6d88\u5931\u201d\uff0cesp\u662f\u4f5c\u4e3a\u8c03\u7528caller\u7684\u51fd\u6570\u7684\u6808\u5e27\u6808\u9876\uff1b\u7136\u540e\u518d\u628a\u6808\u9876\u7684\u539f\u6765\u538b\u6808\u7684\u8c03\u7528caller\u7684\u51fd\u6570\u7684EBP\u503c\u51fa\u6808\uff0cEBP\u4e3a\u8c03\u7528caller\u7684\u51fd\u6570\u7684\u6808\u5e27\u7684\u6808\u5e95\uff0c\u8c03\u7528caller\u51fd\u6570\u7684\u6808\u5e27\u6062\u590d ret\u8868\u793acaller\u51fd\u6570\u8c03\u7528\u7ed3\u675f\uff0c\u56de\u5f52\u5230\u8c03\u7528caller\u51fd\u6570\u7ee7\u7eed\u6267\u884c \u603b\u7ed3\uff1a\u4e00\u4e2aC\u8fc7\u7a0b\u7684\u5927\u81f4\u7ed3\u6784\u5982\u4e0b\uff1a \u51c6\u5907\u9636\u6bb5 \u5f62\u6210\u5e27\u5e95\uff1apush\u6307\u4ee4 \u548c mov\u6307\u4ee4 \u751f\u6210\u6808\u5e27\uff08\u5982\u679c\u9700\u8981\u7684\u8bdd\uff09\uff1asub\u6307\u4ee4 \u6216 and\u6307\u4ee4 \u4fdd\u5b58\u73b0\u573a\uff08\u5982\u679c\u6709\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff09 \uff1amov\u6307\u4ee4 \u8fc7\u7a0b(\u51fd\u6570)\u4f53 \u5206\u914d\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4\uff0c\u5e76\u8d4b\u503c \u5177\u4f53\u5904\u7406\u903b\u8f91\uff0c\u5982\u679c\u9047\u5230\u51fd\u6570\u8c03\u7528\u65f6 \u51c6\u5907\u53c2\u6570\uff1a\u5c06\u5b9e\u53c2\u9001\u6808\u5e27\u5165\u53e3\u53c2\u6570\u5904 CALL\u6307\u4ee4\uff1a\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\u5e76\u8f6c\u88ab\u8c03\u7528\u51fd\u6570 \u5728EAX\u4e2d\u51c6\u5907\u8fd4\u56de\u53c2\u6570 \u7ed3\u675f\u9636\u6bb5 \u9000\u6808\uff1aleave\u6307\u4ee4 \u6216 pop\u6307\u4ee4 \u53d6\u8fd4\u56de\u5730\u5740\u8fd4\u56de\uff1aret\u6307\u4ee4 \u5165\u53e3\u53c2\u6570\u7684\u4f4d\u7f6e \u6309\u5730\u5740\u4f20\u9012\u53c2\u6570\u548c\u6309\u503c\u4f20\u9012\u53c2\u6570 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 // \u7a0b\u5e8f\u4e00 // \u6309\u5730\u5740\u4f20\u9012\u53c2\u6570 #include <stdio.h> int main (){ int a = 15 , b = 22 ; printf ( \"a=%d \\t b=%d \\n \" , a , b ); swap ( & a , & b ); printf ( \"a=%d \\t b=%d \\n \" , a , b ); } void swap ( int * x , int * y ){ int t =* x ; * x =* y ; * y = t ; } // \u7a0b\u5e8f\u4e8c // \u6309\u503c\u4f20\u9012\u53c2\u6570 #include <stdio.h> int main (){ int a = 15 , b = 22 ; printf ( \"a=%d \\t b=%d \\n \" , a , b ); swap ( a , b ); printf ( \"a=%d \\t b=%d \\n \" , a , b ); } void swap ( int x , int y ){ int t = x ; x = y ; y = t ; } \u6309\u5730\u5740\u4f20\u9012\u53c2\u6570 \u6309\u503c\u4f20\u9012\u53c2\u6570 \u9012\u5f52\u8fc7\u7a0b - \u597d\u96be\u7406\u89e3\u54c7\u545c\u545c\u545c \u3010\u4f8b\u4e8c\u3011","title":"\u8fc7\u7a0b(\u51fd\u6570)\u8c03\u7528\u7684\u673a\u5668\u7ea7\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-2/#_7","text":"","title":"\u9009\u62e9\u548c\u5faa\u73af\u8bed\u53e5\u7684\u673a\u5668\u7ea7\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-2/#a","text":"","title":"a. \u673a\u5668\u7684\u7ed3\u6784\u4e0e\u8fd0\u884c\uff0c\u6307\u4ee4\u7cfb\u7edf\u7684\u5bfb\u5740\u65b9\u5f0f"},{"location":"CSAPP/CSAPP-PartOne-2/#b","text":"","title":"b. \u57fa\u672c\u6570\u636e\u7c7b\u578b\u4e0e\u64cd\u4f5c\u7684\u673a\u5668\u7ea7\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-2/#c_1","text":"","title":"c. \u57fa\u672c\u7a0b\u5e8f\u7ed3\u6784\u7684\u673a\u5668\u7ea7\u8868\u793a"},{"location":"CSAPP/CSAPP-PartOne-2/#d","text":"","title":"d. \u7f13\u51b2\u5668\u6ea2\u51fa\u539f\u7406\u4e0e\u6f0f\u6d1e\u653b\u9632"},{"location":"CSAPP/CSAPP-PartOne-2/#3","text":"","title":"3.\u5904\u7406\u5668\u4f53\u7cfb\u7ed3\u6784"},{"location":"CSAPP/CSAPP-PartOne-2/#a-isa","text":"","title":"a. ISA\u7684\u7ec4\u6210\u4e0e\u8bbe\u8ba1"},{"location":"CSAPP/CSAPP-PartOne-2/#b-cpu","text":"","title":"b. \u987a\u5e8f\u7ed3\u6784CPU\u5b9e\u73b0\u4e0e\u5fae\u64cd\u4f5c"},{"location":"CSAPP/CSAPP-PartOne-2/#c-cpu","text":"","title":"c. \u6d41\u6c34\u7ebfCPU\u57fa\u672c\u539f\u7406\u4e0e\u76f8\u5173\u6280\u672f"},{"location":"CSAPP/CSAPP-PartOne-2/#4","text":"","title":"4.\u4f18\u5316\u5b58\u50a8\u6027\u80fd"},{"location":"CSAPP/CSAPP-PartOne-2/#a_1","text":"","title":"a. \u9762\u5411\u7f16\u8bd1\u5668\u7684\u7a0b\u5e8f\u4f18\u5316\u65b9\u6cd5"},{"location":"CSAPP/CSAPP-PartOne-2/#b-cpucpucpu","text":"","title":"b. \u9762\u5411\u6d41\u6c34\u7ebfCPU\u3001\u8d85\u6807\u91cfCPU\u3001\u5411\u91cfCPU\u7684\u7a0b\u5e8f\u4f18\u5316\u65b9\u6cd5"},{"location":"CSAPP/CSAPP-PartOne-2/#5","text":"","title":"5.\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784"},{"location":"CSAPP/CSAPP-PartOne-2/#a_2","text":"","title":"a. \u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784\u4e0e\u5c40\u90e8\u6027\u539f\u7406"},{"location":"CSAPP/CSAPP-PartOne-2/#b_1","text":"","title":"b. \u9ad8\u901f\u7f13\u5b58\u6280\u672f\u4e0e\u57fa\u4e8e\u5b58\u50a8\u5668\u7684\u7a0b\u5e8f\u4f18\u5316\u6280\u672f"},{"location":"CSAPP/CSAPP-PartThree/","text":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part Three \u7a0b\u5e8f\u95f4\u7684\u4ea4\u4e92\u548c\u901a\u4fe1 \u00b6 1.\u7cfb\u7edf\u673aIO \u00b6","title":"\u3010\u8003\u7814\u5411\u3011\u7a0b\u5e8f\u95f4\u7684\u4ea4\u4e92\u548c\u901a\u4fe1"},{"location":"CSAPP/CSAPP-PartThree/#part-three","text":"","title":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part Three \u7a0b\u5e8f\u95f4\u7684\u4ea4\u4e92\u548c\u901a\u4fe1"},{"location":"CSAPP/CSAPP-PartThree/#1io","text":"","title":"1.\u7cfb\u7edf\u673aIO"},{"location":"CSAPP/CSAPP-PartTwo/","text":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part Two \u5728\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7a0b\u5e8f \u00b6 1.\u94fe\u63a5 \u00b6 2.\u5f02\u5e38\u63a7\u5236\u6d41 \u00b6 3.\u865a\u62df\u5b58\u50a8\u5668 \u00b6","title":"\u3010\u8003\u7814\u5411\u3011\u5728\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7a0b\u5e8f"},{"location":"CSAPP/CSAPP-PartTwo/#part-two","text":"","title":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part Two \u5728\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7a0b\u5e8f"},{"location":"CSAPP/CSAPP-PartTwo/#1","text":"","title":"1.\u94fe\u63a5"},{"location":"CSAPP/CSAPP-PartTwo/#2","text":"","title":"2.\u5f02\u5e38\u63a7\u5236\u6d41"},{"location":"CSAPP/CSAPP-PartTwo/#3","text":"","title":"3.\u865a\u62df\u5b58\u50a8\u5668"},{"location":"CSAPP/CSAPP-PartZero/","text":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part Zero \u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u57fa\u672c\u6982\u5ff5 \u00b6 1.\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5c42\u6b21\u7ed3\u6784 \u00b6 \u8ba1\u7b97\u673a\u7cfb\u7edf\u62bd\u8c61\u5c42\u7684\u8f6c\u6362 \u00b6 \u6574\u4e2a\u8ba1\u7b97\u673a\u7cfb\u7edf\u5206\u4e3a \u8f6f\u4ef6\u7cfb\u7edf \u548c \u786c\u4ef6\u7cfb\u7edf \u529f\u80fd\u8f6c\u6362 \uff1a\u4e0a\u5c42\u662f\u4e0b\u5c42\u7684 \u62bd\u8c61 \uff0c\u4e0b\u5c42\u662f\u4e0a\u5c42\u7684 \u5b9e\u73b0 \uff0c \u5e95\u5c42\u4e3a\u4e0a\u5c42\u63d0\u4f9b\u652f\u6491\u73af\u5883 \u4ea4\u754c\u5904\u4e3a\u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784ISA\uff0c\u5b9e\u9645\u4e0a\u662f\u4f5c\u4e3a\u8f6f\u786c\u4ef6\u4ea4\u4e92\u7684\u63a5\u53e3\uff0c\u5373\u5bf9\u786c\u4ef6\u7684\u62bd\u8c61\uff0c\u8fd9\u79cd\u62bd\u8c61\u63d0\u4f9b\u7684\u529f\u80fd\u4e3a\u8f6f\u4ef6\u6240\u7528 ISA\u662f\u8ba1\u7b97\u673a\u7ec4\u6210\u7684\u62bd\u8c61 ISA\u5177\u4f53\u4ecb\u7ecd \u7a0b\u5e8f\u6267\u884c\u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\uff1a \u7b97\u6cd5\u3001\u7a0b\u5e8f\u7684\u7f16\u5199 \u8bed\u8a00\u5904\u7406\u7cfb\u7edf \u64cd\u4f5c\u7cfb\u7edf ISA \u5fae\u4f53\u7cfb\u7ed3\u6784 \u4ee5\u53ca\u5176\u4ed6\u5e95\u5c42\u7684\u4e1c\u897f\u7b49 \u91cd\u70b9\u5728\u9ad8\u7ea7\u8bed\u8a00\u4ee5\u4e0b\u5404\u62bd\u8c61\u5c42 C\u8bed\u8a00\u7a0b\u5e8f\u8bbe\u8ba1\u5c42 \u6570\u636e\u7684\u673a\u5668\u7ea7\u8868\u793a\u3001\u8fd0\u7b97 \u8bed\u53e5\u548c\u8fc7\u7a0b\u8c03\u7528\u7684\u673a\u5668\u7ea7\u8868\u793a \u64cd\u4f5c\u7cfb\u7edf\u3001\u7f16\u8bd1\u548c\u94fe\u63a5\u7684\u90e8\u5206\u5185\u5bb9 \u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784(ISA)\u548c\u6c47\u7f16\u5c42 \u6307\u4ee4\u7cfb\u7edf\u3001\u673a\u5668\u4ee3\u7801\u3001\u6c47\u7f16\u8bed\u8a00 \u5fae\u4f53\u7cfb\u7ed3\u6784\u53ca\u786c\u4ef6\u5c42 CPU\u7684\u901a\u7528\u7ed3\u6784 \u5c42\u6b21\u7ed3\u6784\u5b58\u50a8\u7cfb\u7edf \u8ba1\u7b97\u673a\u7cfb\u7edf\u5c42\u6b21 \u00b6 \u8bed\u8a00\u53d1\u5c55\u4e0d\u65ad\u201c\u62bd\u8c61\u201d\uff0c\u521b\u9020\u51fa\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5c42\u6b21 \u6700\u65e9 \u53d1\u5c55 \u73b0\u4ee3 \u8ba1\u7b97\u673a\u7528 \u673a\u5668\u8bed\u8a00 \u7f16\u7a0b \u8ba1\u7b97\u673a\u4f7f\u7528 \u6c47\u7f16\u8bed\u8a00 \u7f16\u7a0b \u73b0\u4ee3\u8ba1\u7b97\u673a\u7528 \u9ad8\u7ea7\u8bed\u8a00 \u7f16\u7a0b \u673a\u5668\u8bed\u8a00\uff1a\u7b2c\u4e00\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(First generation programming language, 1GL)\uff0c\u5373\u75280\u548c1\u7f16\u5199\u7a0b\u5e8f \u6c47\u7f16\u8bed\u8a00\uff1a\u7b2c\u4e8c\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(Second generation programming language, 2GL)\uff0c\u662f\u4e00\u79cd \u7b26\u53f7\u8868\u793a 1. \u7b2c\u4e09\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(3GL)\u4e3a\u8fc7\u7a0b\u5f0f\u8bed\u8a00\uff0c\u7f16\u7801\u65f6\u9700\u8981\u63cf\u8ff0\u5b9e\u73b0\u8fc7\u7a0b(\u201c\u5982\u4f55\u505a\u201d)\uff1b2. \u7b2c\u56db\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(4GL)\u4e3a\u975e\u8fc7\u7a0b\u5f0f\u8bed\u8a00\uff0c\u7f16\u7801\u65f6\u53ea\u9700\u8bf4\u660e\u201c\u505a\u4ec0\u4e48\u201d\uff0c\u4e0d\u9700\u8981\u63cf\u8ff0\u5177\u4f53\u7684\u7b97\u6cd5\u5b9e\u73b0\u8fc7\u7a0b \u7528\u673a\u5668\u8bed\u8a000\u548c1\u7f16\u5199\u7684\u7a0b\u5e8f\u53ef\u4ee5 \u76f4\u63a5\u8fd0\u884c\u5728\u673a\u5668\u4e0a\uff0c\u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784\u662f\u5c06\u8ba1\u7b97\u673a\u7684\u786c\u4ef6\u62bd\u8c61\u6210\u6307\u4ee4\u96c6\uff0c\u6bcf\u6761\u6307\u4ee4\u5bf9\u5e94\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6307\u4ee4\uff0c\u901a\u8fc7\u8fd9\u4e9b\u6307\u4ee4\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8ba1\u7b97\u673a\u786c\u4ef6 \u6211\u4eec\u7528\u6c47\u7f16\u8bed\u8a00\u7f16\u5199\u7684\u7a0b\u5e8f\u5fc5\u987b\u7531 \u6c47\u7f16\u7a0b\u5e8f \u8f6c\u6362\u4e3a\u673a\u5668\u6307\u4ee4\uff0c\u624d\u80fd\u5728\u673a\u5668\u4e0a\u6267\u884c\u6267\u884c\uff1b\u7528\u6c47\u7f16\u8bed\u8a00\u6765\u7f16\u5199\u7a0b\u5e8f\uff0c\u5fc5\u987b\u8981\u6709\u548c\u673a\u5668\u4ea4\u4e92\u7684\u754c\u9762\uff0c\u7531 \u64cd\u4f5c\u7cfb\u7edf \u63d0\u4f9b\u548c\u5c01\u88c5 \u9ad8\u7ea7\u8bed\u8a00\u5fc5\u987b\u8f6c\u6362\u6210\u673a\u5668\u6307\u4ee4\u6784\u6210\u7684\u673a\u5668\u8bed\u8a00\u624d\u80fd\u5728\u8ba1\u7b97\u673a\u4e0a\u6267\u884c\uff0c\u8f6c\u5316\u529f\u80fd\u7531\u8bed\u8a00\u7cfb\u7edf\u4e2d\u7684 \u8bed\u8a00\u5904\u7406\u7cfb\u7edf \u5b8c\u6210\uff1b\u8bed\u8a00\u5904\u7406\u7cfb\u7edf\u5305\u62ec\uff1a\u5404\u79cd\u8bed\u8a00\u5904\u7406\u7a0b\u5e8f(\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5)\u548c\u8fd0\u884c\u65f6\u7cfb\u7edf(\u5e93\u51fd\u6570\u3001\u8c03\u8bd5\u3001\u4f18\u5316\u7b49)\uff1b\u64cd\u4f5c\u7cfb\u7edf\u5305\u62ec\u4eba\u673a\u4ea4\u4e92\u754c\u9762\u548c\u63d0\u4f9b\u670d\u52a1\u529f\u80fd\u7684\u5185\u6838\u4f8b\u7a0b \u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u4e0d\u540c\u7528\u6237 \u00b6 2.\u7a0b\u5e8f\u751f\u6210\u4e0e\u8fd0\u884c\u7684\u57fa\u672c\u539f\u7406\u4e0e\u5de5\u4f5c\u8fc7\u7a0b \u00b6 3.\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5206\u6790\u8bc4\u4ef7\u65b9\u6cd5 \u00b6","title":"\u3010\u8003\u7814\u5411\u3011\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u672c\u6982\u5ff5"},{"location":"CSAPP/CSAPP-PartZero/#part-zero","text":"","title":"\u3010\u8003\u7814\u9ed1\u4e66\u5411\u3011Part Zero \u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u57fa\u672c\u6982\u5ff5"},{"location":"CSAPP/CSAPP-PartZero/#1","text":"","title":"1.\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5c42\u6b21\u7ed3\u6784"},{"location":"CSAPP/CSAPP-PartZero/#_1","text":"\u6574\u4e2a\u8ba1\u7b97\u673a\u7cfb\u7edf\u5206\u4e3a \u8f6f\u4ef6\u7cfb\u7edf \u548c \u786c\u4ef6\u7cfb\u7edf \u529f\u80fd\u8f6c\u6362 \uff1a\u4e0a\u5c42\u662f\u4e0b\u5c42\u7684 \u62bd\u8c61 \uff0c\u4e0b\u5c42\u662f\u4e0a\u5c42\u7684 \u5b9e\u73b0 \uff0c \u5e95\u5c42\u4e3a\u4e0a\u5c42\u63d0\u4f9b\u652f\u6491\u73af\u5883 \u4ea4\u754c\u5904\u4e3a\u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784ISA\uff0c\u5b9e\u9645\u4e0a\u662f\u4f5c\u4e3a\u8f6f\u786c\u4ef6\u4ea4\u4e92\u7684\u63a5\u53e3\uff0c\u5373\u5bf9\u786c\u4ef6\u7684\u62bd\u8c61\uff0c\u8fd9\u79cd\u62bd\u8c61\u63d0\u4f9b\u7684\u529f\u80fd\u4e3a\u8f6f\u4ef6\u6240\u7528 ISA\u662f\u8ba1\u7b97\u673a\u7ec4\u6210\u7684\u62bd\u8c61 ISA\u5177\u4f53\u4ecb\u7ecd \u7a0b\u5e8f\u6267\u884c\u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\uff1a \u7b97\u6cd5\u3001\u7a0b\u5e8f\u7684\u7f16\u5199 \u8bed\u8a00\u5904\u7406\u7cfb\u7edf \u64cd\u4f5c\u7cfb\u7edf ISA \u5fae\u4f53\u7cfb\u7ed3\u6784 \u4ee5\u53ca\u5176\u4ed6\u5e95\u5c42\u7684\u4e1c\u897f\u7b49 \u91cd\u70b9\u5728\u9ad8\u7ea7\u8bed\u8a00\u4ee5\u4e0b\u5404\u62bd\u8c61\u5c42 C\u8bed\u8a00\u7a0b\u5e8f\u8bbe\u8ba1\u5c42 \u6570\u636e\u7684\u673a\u5668\u7ea7\u8868\u793a\u3001\u8fd0\u7b97 \u8bed\u53e5\u548c\u8fc7\u7a0b\u8c03\u7528\u7684\u673a\u5668\u7ea7\u8868\u793a \u64cd\u4f5c\u7cfb\u7edf\u3001\u7f16\u8bd1\u548c\u94fe\u63a5\u7684\u90e8\u5206\u5185\u5bb9 \u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784(ISA)\u548c\u6c47\u7f16\u5c42 \u6307\u4ee4\u7cfb\u7edf\u3001\u673a\u5668\u4ee3\u7801\u3001\u6c47\u7f16\u8bed\u8a00 \u5fae\u4f53\u7cfb\u7ed3\u6784\u53ca\u786c\u4ef6\u5c42 CPU\u7684\u901a\u7528\u7ed3\u6784 \u5c42\u6b21\u7ed3\u6784\u5b58\u50a8\u7cfb\u7edf","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u62bd\u8c61\u5c42\u7684\u8f6c\u6362"},{"location":"CSAPP/CSAPP-PartZero/#_2","text":"\u8bed\u8a00\u53d1\u5c55\u4e0d\u65ad\u201c\u62bd\u8c61\u201d\uff0c\u521b\u9020\u51fa\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5c42\u6b21 \u6700\u65e9 \u53d1\u5c55 \u73b0\u4ee3 \u8ba1\u7b97\u673a\u7528 \u673a\u5668\u8bed\u8a00 \u7f16\u7a0b \u8ba1\u7b97\u673a\u4f7f\u7528 \u6c47\u7f16\u8bed\u8a00 \u7f16\u7a0b \u73b0\u4ee3\u8ba1\u7b97\u673a\u7528 \u9ad8\u7ea7\u8bed\u8a00 \u7f16\u7a0b \u673a\u5668\u8bed\u8a00\uff1a\u7b2c\u4e00\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(First generation programming language, 1GL)\uff0c\u5373\u75280\u548c1\u7f16\u5199\u7a0b\u5e8f \u6c47\u7f16\u8bed\u8a00\uff1a\u7b2c\u4e8c\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(Second generation programming language, 2GL)\uff0c\u662f\u4e00\u79cd \u7b26\u53f7\u8868\u793a 1. \u7b2c\u4e09\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(3GL)\u4e3a\u8fc7\u7a0b\u5f0f\u8bed\u8a00\uff0c\u7f16\u7801\u65f6\u9700\u8981\u63cf\u8ff0\u5b9e\u73b0\u8fc7\u7a0b(\u201c\u5982\u4f55\u505a\u201d)\uff1b2. \u7b2c\u56db\u4ee3\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00(4GL)\u4e3a\u975e\u8fc7\u7a0b\u5f0f\u8bed\u8a00\uff0c\u7f16\u7801\u65f6\u53ea\u9700\u8bf4\u660e\u201c\u505a\u4ec0\u4e48\u201d\uff0c\u4e0d\u9700\u8981\u63cf\u8ff0\u5177\u4f53\u7684\u7b97\u6cd5\u5b9e\u73b0\u8fc7\u7a0b \u7528\u673a\u5668\u8bed\u8a000\u548c1\u7f16\u5199\u7684\u7a0b\u5e8f\u53ef\u4ee5 \u76f4\u63a5\u8fd0\u884c\u5728\u673a\u5668\u4e0a\uff0c\u6307\u4ee4\u96c6\u4f53\u7cfb\u7ed3\u6784\u662f\u5c06\u8ba1\u7b97\u673a\u7684\u786c\u4ef6\u62bd\u8c61\u6210\u6307\u4ee4\u96c6\uff0c\u6bcf\u6761\u6307\u4ee4\u5bf9\u5e94\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6307\u4ee4\uff0c\u901a\u8fc7\u8fd9\u4e9b\u6307\u4ee4\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8ba1\u7b97\u673a\u786c\u4ef6 \u6211\u4eec\u7528\u6c47\u7f16\u8bed\u8a00\u7f16\u5199\u7684\u7a0b\u5e8f\u5fc5\u987b\u7531 \u6c47\u7f16\u7a0b\u5e8f \u8f6c\u6362\u4e3a\u673a\u5668\u6307\u4ee4\uff0c\u624d\u80fd\u5728\u673a\u5668\u4e0a\u6267\u884c\u6267\u884c\uff1b\u7528\u6c47\u7f16\u8bed\u8a00\u6765\u7f16\u5199\u7a0b\u5e8f\uff0c\u5fc5\u987b\u8981\u6709\u548c\u673a\u5668\u4ea4\u4e92\u7684\u754c\u9762\uff0c\u7531 \u64cd\u4f5c\u7cfb\u7edf \u63d0\u4f9b\u548c\u5c01\u88c5 \u9ad8\u7ea7\u8bed\u8a00\u5fc5\u987b\u8f6c\u6362\u6210\u673a\u5668\u6307\u4ee4\u6784\u6210\u7684\u673a\u5668\u8bed\u8a00\u624d\u80fd\u5728\u8ba1\u7b97\u673a\u4e0a\u6267\u884c\uff0c\u8f6c\u5316\u529f\u80fd\u7531\u8bed\u8a00\u7cfb\u7edf\u4e2d\u7684 \u8bed\u8a00\u5904\u7406\u7cfb\u7edf \u5b8c\u6210\uff1b\u8bed\u8a00\u5904\u7406\u7cfb\u7edf\u5305\u62ec\uff1a\u5404\u79cd\u8bed\u8a00\u5904\u7406\u7a0b\u5e8f(\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5)\u548c\u8fd0\u884c\u65f6\u7cfb\u7edf(\u5e93\u51fd\u6570\u3001\u8c03\u8bd5\u3001\u4f18\u5316\u7b49)\uff1b\u64cd\u4f5c\u7cfb\u7edf\u5305\u62ec\u4eba\u673a\u4ea4\u4e92\u754c\u9762\u548c\u63d0\u4f9b\u670d\u52a1\u529f\u80fd\u7684\u5185\u6838\u4f8b\u7a0b","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u5c42\u6b21"},{"location":"CSAPP/CSAPP-PartZero/#_3","text":"","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u4e0d\u540c\u7528\u6237"},{"location":"CSAPP/CSAPP-PartZero/#2","text":"","title":"2.\u7a0b\u5e8f\u751f\u6210\u4e0e\u8fd0\u884c\u7684\u57fa\u672c\u539f\u7406\u4e0e\u5de5\u4f5c\u8fc7\u7a0b"},{"location":"CSAPP/CSAPP-PartZero/#3","text":"","title":"3.\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5206\u6790\u8bc4\u4ef7\u65b9\u6cd5"},{"location":"DataStructure/chain/LinkList/","text":"\u94fe\u8868\u5e38\u7528\u601d\u8def \u00b6 1 \u5feb\u6162\u9488 \u00b6 1.1 \u5012\u6570\u7b2c k \u4e2a\u8282\u70b9 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 ListNode * FindKthToTail ( ListNode * pHead , int k ) { if ( pHead == NULL || k <= 0 ) { return NULL ; } ListNode * p = pHead ; for ( int i = 0 ; i < k - 1 ; i ++ ) { if ( p -> next ) { p = p -> next ; } else { return NULL ; } } ListNode * q = pHead ; while ( p -> next ) { p = p -> next ; q = q -> next ; } return q ; } 2 \u53cd\u8f6c\u94fe\u8868 \u00b6 2.1 \u987a\u5e8f\u5b9e\u73b0 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ListNode * ReverseList ( ListNode * phead ) { ListNode * pReverseHead = NULL ; ListNode * pNode = pHead ; ListNode * pPre = NULL ; while ( pNode ) { ListNode * pNext = pNode -> next ; if ( pNext == NULL ) { pReverseHead = pNode ; } pNode -> next = pPrev ; pPrev = pNode ; pNode = pNext } return pReverseHead ; } 2.2 \u9012\u5f52\u5b9e\u73b0 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ListNode * ReverseList ( ListNode * pHead ) { if ( pHead == NULL ) { return NULL ; } if ( pHead -> next == NULL ) { return pHead ; } ListNode * p = ReverseList ( pHead -> next ); pHead -> next -> next = pHead ; pHead -> next = NULL ; return p ; } 3 \u53bb\u91cd \u00b6 3.1 \u4fdd\u7559\u91cd\u590d\u8282\u70b9 \u00b6 1 2 3 4 5 6 7 8 9 class Solution : def deleteDuplicates ( self , head : ListNode ) -> ListNode : ans = head while head != None : if head . next != None and head . next . val == head . val : head . next = head . next . next else : head = head . next return ans 3.2 \u4e0d\u4fdd\u7559\u91cd\u590d\u8282\u70b9 \u00b6 \u8981\u4e49\uff1a \u5f00\u8f9f\u4e00\u4e2a\u65b0\u7684\u5934\u8282\u70b9\u65e2\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u5de5\u4f5c\u91cf\uff01\uff01\uff01 \u5f53\u8fb9\u754c\u5904\u7406\u60c5\u51b5\u8fc7\u591a\u65f6\uff0c\u8003\u8651\u80fd\u5426\u901a\u8fc7\u589e\u52a0\u8282\u70b9\u6765\u4fdd\u8bc1\u4ee3\u7801\u901a\u7528 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 /* struct ListNode { int val; struct ListNode *next; ListNode(int x) : val(x), next(NULL) { } }; */ class Solution { public : ListNode * deleteDuplication ( ListNode * pHead ) { ListNode * tmphead = ( ListNode * ) malloc ( sizeof ( ListNode )); ListNode * pre = tmphead , * p = NULL , * q = NULL ; pre -> next = pHead ; if ( pre -> next ) { p = pre -> next ; } else { return pre -> next ; } if ( p -> next ) { q = p -> next ; } else { return pre -> next ; } while ( q ) { if ( q -> val == p -> val ) { while ( q && q -> val == p -> val ) { q = q -> next ; } pre -> next = q ; p = q ; if ( q ) q = q -> next ; } else { q = q -> next ; p = p -> next ; pre = pre -> next ; } } return tmphead -> next ; } };","title":"\u94fe\u8868"},{"location":"DataStructure/chain/LinkList/#_1","text":"","title":"\u94fe\u8868\u5e38\u7528\u601d\u8def"},{"location":"DataStructure/chain/LinkList/#1","text":"","title":"1 \u5feb\u6162\u9488"},{"location":"DataStructure/chain/LinkList/#11-k","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 ListNode * FindKthToTail ( ListNode * pHead , int k ) { if ( pHead == NULL || k <= 0 ) { return NULL ; } ListNode * p = pHead ; for ( int i = 0 ; i < k - 1 ; i ++ ) { if ( p -> next ) { p = p -> next ; } else { return NULL ; } } ListNode * q = pHead ; while ( p -> next ) { p = p -> next ; q = q -> next ; } return q ; }","title":"1.1 \u5012\u6570\u7b2c k \u4e2a\u8282\u70b9"},{"location":"DataStructure/chain/LinkList/#2","text":"","title":"2 \u53cd\u8f6c\u94fe\u8868"},{"location":"DataStructure/chain/LinkList/#21","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ListNode * ReverseList ( ListNode * phead ) { ListNode * pReverseHead = NULL ; ListNode * pNode = pHead ; ListNode * pPre = NULL ; while ( pNode ) { ListNode * pNext = pNode -> next ; if ( pNext == NULL ) { pReverseHead = pNode ; } pNode -> next = pPrev ; pPrev = pNode ; pNode = pNext } return pReverseHead ; }","title":"2.1 \u987a\u5e8f\u5b9e\u73b0"},{"location":"DataStructure/chain/LinkList/#22","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 ListNode * ReverseList ( ListNode * pHead ) { if ( pHead == NULL ) { return NULL ; } if ( pHead -> next == NULL ) { return pHead ; } ListNode * p = ReverseList ( pHead -> next ); pHead -> next -> next = pHead ; pHead -> next = NULL ; return p ; }","title":"2.2 \u9012\u5f52\u5b9e\u73b0"},{"location":"DataStructure/chain/LinkList/#3","text":"","title":"3 \u53bb\u91cd"},{"location":"DataStructure/chain/LinkList/#31","text":"1 2 3 4 5 6 7 8 9 class Solution : def deleteDuplicates ( self , head : ListNode ) -> ListNode : ans = head while head != None : if head . next != None and head . next . val == head . val : head . next = head . next . next else : head = head . next return ans","title":"3.1 \u4fdd\u7559\u91cd\u590d\u8282\u70b9"},{"location":"DataStructure/chain/LinkList/#32","text":"\u8981\u4e49\uff1a \u5f00\u8f9f\u4e00\u4e2a\u65b0\u7684\u5934\u8282\u70b9\u65e2\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u5de5\u4f5c\u91cf\uff01\uff01\uff01 \u5f53\u8fb9\u754c\u5904\u7406\u60c5\u51b5\u8fc7\u591a\u65f6\uff0c\u8003\u8651\u80fd\u5426\u901a\u8fc7\u589e\u52a0\u8282\u70b9\u6765\u4fdd\u8bc1\u4ee3\u7801\u901a\u7528 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 /* struct ListNode { int val; struct ListNode *next; ListNode(int x) : val(x), next(NULL) { } }; */ class Solution { public : ListNode * deleteDuplication ( ListNode * pHead ) { ListNode * tmphead = ( ListNode * ) malloc ( sizeof ( ListNode )); ListNode * pre = tmphead , * p = NULL , * q = NULL ; pre -> next = pHead ; if ( pre -> next ) { p = pre -> next ; } else { return pre -> next ; } if ( p -> next ) { q = p -> next ; } else { return pre -> next ; } while ( q ) { if ( q -> val == p -> val ) { while ( q && q -> val == p -> val ) { q = q -> next ; } pre -> next = q ; p = q ; if ( q ) q = q -> next ; } else { q = q -> next ; p = p -> next ; pre = pre -> next ; } } return tmphead -> next ; } };","title":"3.2 \u4e0d\u4fdd\u7559\u91cd\u590d\u8282\u70b9"},{"location":"DataStructure/chain/STL/","text":"STL \u5e38\u7528 \u00b6 1.\u6808(stack) \u00b6 1 2 3 4 5 6 7 8 9 10 #include <stack> // \u6808 stack < int > s ; // \u5e38\u7528\u64cd\u4f5c\uff1a s . empty () // \u5982\u679c\u6808\u4e3a\u7a7a\u8fd4\u56detrue\uff0c\u5426\u5219\u8fd4\u56defalse s . size () // \u8fd4\u56de\u6808\u4e2d\u5143\u7d20\u7684\u4e2a\u6570 s . pop () // \u5220\u9664\u6808\u9876\u5143\u7d20\u4f46\u4e0d\u8fd4\u56de\u5176\u503c s . top () // \u8fd4\u56de\u6808\u9876\u7684\u5143\u7d20\uff0c\u4f46\u4e0d\u5220\u9664\u8be5\u5143\u7d20 s . push ( X ) // \u5728\u6808\u9876\u538b\u5165\u65b0\u5143\u7d20 \uff0c\u53c2\u6570X\u4e3a\u8981\u538b\u5165\u7684\u5143\u7d20 2.\u961f\u5217(queue) \u00b6 1 2 3 4 5 6 7 8 9 10 11 #include <queue> // \u961f\u5217 queue < int > q ; // \u5e38\u7528\u64cd\u4f5c\uff1a q . empty () // \u5982\u679c\u961f\u5217\u4e3a\u7a7a\u8fd4\u56detrue\uff0c\u5426\u5219\u8fd4\u56defalse q . size () // \u8fd4\u56de\u961f\u5217\u4e2d\u5143\u7d20\u7684\u4e2a\u6570 q . pop () // \u5220\u9664\u961f\u5217\u9996\u5143\u7d20\u4f46\u4e0d\u8fd4\u56de\u5176\u503c q . front () // \u8fd4\u56de\u961f\u9996\u5143\u7d20\u7684\u503c\uff0c\u4f46\u4e0d\u5220\u9664\u8be5\u5143\u7d20 q . push ( X ) // \u5728\u961f\u5c3e\u538b\u5165\u65b0\u5143\u7d20 \uff0cX\u4e3a\u8981\u538b\u5165\u7684\u5143\u7d20 q . back () // \u8fd4\u56de\u961f\u5217\u5c3e\u5143\u7d20\u7684\u503c\uff0c\u4f46\u4e0d\u5220\u9664\u8be5\u5143\u7d20 3.\u5bb9\u5668(vector) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include <vector> // \u5bb9\u5668 vector < int > v ; vector < int > vec ; //\u58f0\u660e\u4e00\u4e2aint\u578b\u5411\u91cf vector < int > vec ( 5 ); //\u58f0\u660e\u4e00\u4e2a\u521d\u59cb\u5927\u5c0f\u4e3a5\u7684int\u5411\u91cf vector < int > vec ( 10 , 1 ); //\u58f0\u660e\u4e00\u4e2a\u521d\u59cb\u5927\u5c0f\u4e3a10\u4e14\u503c\u90fd\u662f1\u7684\u5411\u91cf vector < int > vec ( tmp ); //\u58f0\u660e\u5e76\u7528tmp\u5411\u91cf\u521d\u59cb\u5316vec\u5411\u91cf vector < int > tmp ( vec . begin (), vec . begin () + 3 ); //\u7528\u5411\u91cfvec\u7684\u7b2c0\u4e2a\u5230\u7b2c2\u4e2a\u503c\u521d\u59cb\u5316tmp int arr [ 5 ] = { 1 , 2 , 3 , 4 , 5 }; vector < int > vec ( arr , arr + 5 ); //\u5c06arr\u6570\u7ec4\u7684\u5143\u7d20\u7528\u4e8e\u521d\u59cb\u5316vec\u5411\u91cf //\u8bf4\u660e\uff1a\u5f53\u7136\u4e0d\u5305\u62ecarr[4]\u5143\u7d20\uff0c\u672b\u5c3e\u6307\u9488\u90fd\u662f\u6307\u7ed3\u675f\u5143\u7d20\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\uff0c //\u8fd9\u4e2a\u4e3b\u8981\u662f\u4e3a\u4e86\u548cvec.end()\u6307\u9488\u7edf\u4e00\u3002 vector < int > vec ( & arr [ 1 ], & arr [ 4 ]); //\u5c06arr[1]~arr[4]\u8303\u56f4\u5185\u7684\u5143\u7d20\u4f5c\u4e3avec\u7684\u521d\u59cb\u503c // \u5e38\u7528\u64cd\u4f5c\uff1a v . empty () // \u5224\u7a7a v . size () // \u8fd4\u56de\u5bb9\u5668\u5927\u5c0f v . push_back () // \u672b\u5c3e\u6dfb\u503c v . pop_back () // \u672b\u5c3e\u5220\u503c v . insert () // \u63d2\u5165\u5143\u7d20 v . erase () // \u5220\u9664\u5143\u7d20 v . swap () // \u4ea4\u6362\u5143\u7d20 v . clear () // \u6e05\u7a7a\u5143\u7d20 v . front () // \u9996\u5143\u7d20 v . back () // \u5c3e\u5143\u7d20 auto it = lower_bound ( v . begin (), v . end (), num ); // \u7b2c\u4e00\u4e2a>=num auto it = upper_bound ( v . begin (), v . end (), num ); // \u7b2c\u4e00\u4e2a>num v . insert ( i , num ); // \u5728\u8be5\u4f4d\u7f6e\u63d2\u5165 4.\u5217\u8868(list) \u00b6 list \u5e95\u5c42\u662f\u4e00\u4e2a\u5e26\u5934\u8282\u70b9\u7684\u53cc\u5411\u5faa\u73af\u94fe\u8868\uff0c\u4efb\u610f\u4f4d\u7f6e\u63d2\u5165\u548c\u5220\u9664\u65f6\u95f4\u590d\u6742\u5ea6 O(1) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 #include <iostream> #include <list> using namespace std ; void TestList1 () { //\u6784\u9020\u7a7a\u7684list list < int > L1 ; //\u6784\u902010\u4e2a\u503c\u4e3a1\u7684list list < int > L2 ( 10 , 1 ); //\u6784\u9020\u7528\u4e00\u6bb5\u533a\u95f4\u4e2d\u7684\u5143\u7d20\u6784\u9020list int arr [] = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 0 }; list < int > L3 ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); //\u7528L3\u53d6\u6784\u9020L4 list < int > L4 ( L3 ); cout << \"L1\u5143\u7d20\u4e2a\u6570:\" << L1 . size () << endl ; cout << \"L2\u5143\u7d20\u4e2a\u6570:\" << L2 . size () << endl ; cout << \"L3\u5143\u7d20\u4e2a\u6570:\" << L3 . size () << endl ; cout << \"L4\u5143\u7d20\u4e2a\u6570:\" << L4 . size () << endl ; //\u904d\u5386list1 list < int >:: iterator it1 = L1 . begin (); while ( it1 != L1 . end ()) { cout << * it1 << \" \" ; ++ it1 ; } cout << endl ; //\u904d\u5386list2 list < int >:: iterator it2 = L2 . begin (); while ( it2 != L2 . end ()) { cout << * it2 << \" \" ; ++ it2 ; } cout << endl ; //\u904d\u5386list3 list < int >:: iterator it3 = L3 . begin (); while ( it3 != L3 . end ()) { cout << * it3 << \" \" ; ++ it3 ; } cout << endl ; //\u904d\u5386list4 list < int >:: iterator it4 = L4 . begin (); while ( it4 != L4 . end ()) { cout << * it4 << \" \" ; ++ it4 ; } cout << endl ; //\u9006\u5411\u904d\u5386list4 list < int >:: reverse_iterator it5 = L4 . rbegin (); while ( it5 != L4 . rend ()) { cout << * it5 << \" \" ; ++ it5 ; } cout << endl ; } void TestList2 () { list < int > L ; //\u5c3e\u63d2 L . push_back ( 1 ); L . push_back ( 2 ); L . push_back ( 3 ); L . push_back ( 4 ); L . push_back ( 5 ); L . push_back ( 6 ); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //\u5c3e\u5220 L . pop_back (); L . pop_back (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //\u5934\u63d2 L . push_front ( 0 ); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . pop_front (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; \u4efb\u610f\u4f4d\u7f6e\u7684\u63d2\u5165 //list<int>::iterator pos = find(L.begin(), L.end(), 2); //if (pos != L.end()) // pos = L.insert(pos, 9); //it = L.begin(); //while (it != L.end()); //{ // cout << *it << \" \"; // ++it; //} //cout << endl; \u4efb\u610f\u4f4d\u7f6e\u5220\u9664\u3001 //L.erase(pos); //it = L.begin(); //while (it != L.end()) //{ // cout << *it << \" \"; // ++it; //} //cout << endl; //\u7ed9list\u91cd\u65b0\u8d4b\u503c int arr [] = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 }; L . assign ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; cout << \"\u7b2c\u4e00\u4e2a\u5143\u7d20\" << L . front () << endl ; cout << \"\u7b2c\u4e00\u4e2a\u5143\u7d20\" << L . back () << endl ; } void TestList3 () { int arr [] = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 }; list < int > L ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . remove ( 3 ); //\u6309\u503c\u5220\u9664 it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; class Odd { public : bool operator ()( int value ) { return value & 0x01 ; }; }; L . remove_if ( Odd ()); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; } void TestList4 () { int arr [] = { 1 , 2 , 5 , 3 , 1 , 2 , 3 , 4 , 5 , 7 , 6 , 8 , 9 }; list < int > L ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); L . unique (); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . sort (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . unique (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //class Three //{ //public: // bool operator()(int left, int right) // { // return 0 == (left + right) % 3; // } //}; //L.unique(Three()); //it = L.begin(); //while (it != L.end()); //{ // cout << *it << \" \"; // ++it; //} //cout << endl; } void TestList5 () { list < int > L ; L . push_back ( 1 ); L . push_back ( 4 ); L . push_back ( 6 ); list < int > L2 ; L2 . push_back ( 2 ); L2 . push_back ( 3 ); L2 . push_back ( 8 ); //\u5c06\u4e24\u4e2a\u5df2\u5e8f\u94fe\u8868\u5408\u5e76\u6210\u4e3a\u4e00\u4e2a\u94fe\u8868\uff0c\u5408\u5e76\u540e\u4f9d\u7136\u6709\u5e8f L . merge ( L2 ); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //\u53cd\u8f6c\u94fe\u8868 L . reverse (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; } 5.\u96c6\u5408(set) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #include <iostream> #include <set> using namespace std ; int main () { set < int > s ; s . insert ( 1 ); s . insert ( 2 ); s . insert ( 3 ); s . insert ( 1 ); cout << \"set \u7684 size \u503c\u4e3a \uff1a\" << s . size () << endl ; cout << \"set \u7684 maxsize\u7684\u503c\u4e3a \uff1a\" << s . max_size () << endl ; cout << \"set \u4e2d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f \uff1a\" <<* s . begin () << endl ; cout << \"set \u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u662f:\" <<* s . end () << endl ; s . clear (); if ( s . empty ()) { cout << \"set \u4e3a\u7a7a \uff01\uff01\uff01\" << endl ; } cout << \"set \u7684 size \u503c\u4e3a \uff1a\" << s . size () << endl ; cout << \"set \u7684 maxsize\u7684\u503c\u4e3a \uff1a\" << s . max_size () << endl ; return 0 ; } 6.\u5173\u8054(map) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #include <map> #include <string> map < int , string > mapStudent ; mapStudent . insert ( map < int , string >:: value_type ( 1 , \"student_one\" )); mapStudent . insert ( map < int , string >:: value_type ( 2 , \"student_two\" )); mapStudent . insert ( map < int , string >:: value_type ( 3 , \"student_three\" )); // or mapStudent . insert ( pair < int , string > ( 1 , \"studnet_one\" )); mapStudent . insert ( pair < int , string > ( 2 , \"student_two\" )); mapStudent . insert ( pair < int , string > ( 3 , \"student_three\" )); // or mapStudent [ 1 ] = \"student_one\" ; mapStudent [ 2 ] = \"student_two\" ; mapStudent [ 3 ] = \"student_three\" ; map < int , string >:: iterator i ; for ( i = mapStudent . begin (); i != mapStudent . end (); i ++ ) cout << i -> first << ' ' << i -> second << endl ; // \u5224\u65admap\u4e2d\u662f\u5426\u6709key if ( mymap . count ( iKey ) == 1 ) { } if ( myMap . find ( iKey ) != myMap . end ()) { }","title":"STL"},{"location":"DataStructure/chain/STL/#stl","text":"","title":"STL \u5e38\u7528"},{"location":"DataStructure/chain/STL/#1stack","text":"1 2 3 4 5 6 7 8 9 10 #include <stack> // \u6808 stack < int > s ; // \u5e38\u7528\u64cd\u4f5c\uff1a s . empty () // \u5982\u679c\u6808\u4e3a\u7a7a\u8fd4\u56detrue\uff0c\u5426\u5219\u8fd4\u56defalse s . size () // \u8fd4\u56de\u6808\u4e2d\u5143\u7d20\u7684\u4e2a\u6570 s . pop () // \u5220\u9664\u6808\u9876\u5143\u7d20\u4f46\u4e0d\u8fd4\u56de\u5176\u503c s . top () // \u8fd4\u56de\u6808\u9876\u7684\u5143\u7d20\uff0c\u4f46\u4e0d\u5220\u9664\u8be5\u5143\u7d20 s . push ( X ) // \u5728\u6808\u9876\u538b\u5165\u65b0\u5143\u7d20 \uff0c\u53c2\u6570X\u4e3a\u8981\u538b\u5165\u7684\u5143\u7d20","title":"1.\u6808(stack)"},{"location":"DataStructure/chain/STL/#2queue","text":"1 2 3 4 5 6 7 8 9 10 11 #include <queue> // \u961f\u5217 queue < int > q ; // \u5e38\u7528\u64cd\u4f5c\uff1a q . empty () // \u5982\u679c\u961f\u5217\u4e3a\u7a7a\u8fd4\u56detrue\uff0c\u5426\u5219\u8fd4\u56defalse q . size () // \u8fd4\u56de\u961f\u5217\u4e2d\u5143\u7d20\u7684\u4e2a\u6570 q . pop () // \u5220\u9664\u961f\u5217\u9996\u5143\u7d20\u4f46\u4e0d\u8fd4\u56de\u5176\u503c q . front () // \u8fd4\u56de\u961f\u9996\u5143\u7d20\u7684\u503c\uff0c\u4f46\u4e0d\u5220\u9664\u8be5\u5143\u7d20 q . push ( X ) // \u5728\u961f\u5c3e\u538b\u5165\u65b0\u5143\u7d20 \uff0cX\u4e3a\u8981\u538b\u5165\u7684\u5143\u7d20 q . back () // \u8fd4\u56de\u961f\u5217\u5c3e\u5143\u7d20\u7684\u503c\uff0c\u4f46\u4e0d\u5220\u9664\u8be5\u5143\u7d20","title":"2.\u961f\u5217(queue)"},{"location":"DataStructure/chain/STL/#3vector","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include <vector> // \u5bb9\u5668 vector < int > v ; vector < int > vec ; //\u58f0\u660e\u4e00\u4e2aint\u578b\u5411\u91cf vector < int > vec ( 5 ); //\u58f0\u660e\u4e00\u4e2a\u521d\u59cb\u5927\u5c0f\u4e3a5\u7684int\u5411\u91cf vector < int > vec ( 10 , 1 ); //\u58f0\u660e\u4e00\u4e2a\u521d\u59cb\u5927\u5c0f\u4e3a10\u4e14\u503c\u90fd\u662f1\u7684\u5411\u91cf vector < int > vec ( tmp ); //\u58f0\u660e\u5e76\u7528tmp\u5411\u91cf\u521d\u59cb\u5316vec\u5411\u91cf vector < int > tmp ( vec . begin (), vec . begin () + 3 ); //\u7528\u5411\u91cfvec\u7684\u7b2c0\u4e2a\u5230\u7b2c2\u4e2a\u503c\u521d\u59cb\u5316tmp int arr [ 5 ] = { 1 , 2 , 3 , 4 , 5 }; vector < int > vec ( arr , arr + 5 ); //\u5c06arr\u6570\u7ec4\u7684\u5143\u7d20\u7528\u4e8e\u521d\u59cb\u5316vec\u5411\u91cf //\u8bf4\u660e\uff1a\u5f53\u7136\u4e0d\u5305\u62ecarr[4]\u5143\u7d20\uff0c\u672b\u5c3e\u6307\u9488\u90fd\u662f\u6307\u7ed3\u675f\u5143\u7d20\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\uff0c //\u8fd9\u4e2a\u4e3b\u8981\u662f\u4e3a\u4e86\u548cvec.end()\u6307\u9488\u7edf\u4e00\u3002 vector < int > vec ( & arr [ 1 ], & arr [ 4 ]); //\u5c06arr[1]~arr[4]\u8303\u56f4\u5185\u7684\u5143\u7d20\u4f5c\u4e3avec\u7684\u521d\u59cb\u503c // \u5e38\u7528\u64cd\u4f5c\uff1a v . empty () // \u5224\u7a7a v . size () // \u8fd4\u56de\u5bb9\u5668\u5927\u5c0f v . push_back () // \u672b\u5c3e\u6dfb\u503c v . pop_back () // \u672b\u5c3e\u5220\u503c v . insert () // \u63d2\u5165\u5143\u7d20 v . erase () // \u5220\u9664\u5143\u7d20 v . swap () // \u4ea4\u6362\u5143\u7d20 v . clear () // \u6e05\u7a7a\u5143\u7d20 v . front () // \u9996\u5143\u7d20 v . back () // \u5c3e\u5143\u7d20 auto it = lower_bound ( v . begin (), v . end (), num ); // \u7b2c\u4e00\u4e2a>=num auto it = upper_bound ( v . begin (), v . end (), num ); // \u7b2c\u4e00\u4e2a>num v . insert ( i , num ); // \u5728\u8be5\u4f4d\u7f6e\u63d2\u5165","title":"3.\u5bb9\u5668(vector)"},{"location":"DataStructure/chain/STL/#4list","text":"list \u5e95\u5c42\u662f\u4e00\u4e2a\u5e26\u5934\u8282\u70b9\u7684\u53cc\u5411\u5faa\u73af\u94fe\u8868\uff0c\u4efb\u610f\u4f4d\u7f6e\u63d2\u5165\u548c\u5220\u9664\u65f6\u95f4\u590d\u6742\u5ea6 O(1) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 #include <iostream> #include <list> using namespace std ; void TestList1 () { //\u6784\u9020\u7a7a\u7684list list < int > L1 ; //\u6784\u902010\u4e2a\u503c\u4e3a1\u7684list list < int > L2 ( 10 , 1 ); //\u6784\u9020\u7528\u4e00\u6bb5\u533a\u95f4\u4e2d\u7684\u5143\u7d20\u6784\u9020list int arr [] = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 0 }; list < int > L3 ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); //\u7528L3\u53d6\u6784\u9020L4 list < int > L4 ( L3 ); cout << \"L1\u5143\u7d20\u4e2a\u6570:\" << L1 . size () << endl ; cout << \"L2\u5143\u7d20\u4e2a\u6570:\" << L2 . size () << endl ; cout << \"L3\u5143\u7d20\u4e2a\u6570:\" << L3 . size () << endl ; cout << \"L4\u5143\u7d20\u4e2a\u6570:\" << L4 . size () << endl ; //\u904d\u5386list1 list < int >:: iterator it1 = L1 . begin (); while ( it1 != L1 . end ()) { cout << * it1 << \" \" ; ++ it1 ; } cout << endl ; //\u904d\u5386list2 list < int >:: iterator it2 = L2 . begin (); while ( it2 != L2 . end ()) { cout << * it2 << \" \" ; ++ it2 ; } cout << endl ; //\u904d\u5386list3 list < int >:: iterator it3 = L3 . begin (); while ( it3 != L3 . end ()) { cout << * it3 << \" \" ; ++ it3 ; } cout << endl ; //\u904d\u5386list4 list < int >:: iterator it4 = L4 . begin (); while ( it4 != L4 . end ()) { cout << * it4 << \" \" ; ++ it4 ; } cout << endl ; //\u9006\u5411\u904d\u5386list4 list < int >:: reverse_iterator it5 = L4 . rbegin (); while ( it5 != L4 . rend ()) { cout << * it5 << \" \" ; ++ it5 ; } cout << endl ; } void TestList2 () { list < int > L ; //\u5c3e\u63d2 L . push_back ( 1 ); L . push_back ( 2 ); L . push_back ( 3 ); L . push_back ( 4 ); L . push_back ( 5 ); L . push_back ( 6 ); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //\u5c3e\u5220 L . pop_back (); L . pop_back (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //\u5934\u63d2 L . push_front ( 0 ); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . pop_front (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; \u4efb\u610f\u4f4d\u7f6e\u7684\u63d2\u5165 //list<int>::iterator pos = find(L.begin(), L.end(), 2); //if (pos != L.end()) // pos = L.insert(pos, 9); //it = L.begin(); //while (it != L.end()); //{ // cout << *it << \" \"; // ++it; //} //cout << endl; \u4efb\u610f\u4f4d\u7f6e\u5220\u9664\u3001 //L.erase(pos); //it = L.begin(); //while (it != L.end()) //{ // cout << *it << \" \"; // ++it; //} //cout << endl; //\u7ed9list\u91cd\u65b0\u8d4b\u503c int arr [] = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 }; L . assign ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; cout << \"\u7b2c\u4e00\u4e2a\u5143\u7d20\" << L . front () << endl ; cout << \"\u7b2c\u4e00\u4e2a\u5143\u7d20\" << L . back () << endl ; } void TestList3 () { int arr [] = { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 }; list < int > L ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . remove ( 3 ); //\u6309\u503c\u5220\u9664 it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; class Odd { public : bool operator ()( int value ) { return value & 0x01 ; }; }; L . remove_if ( Odd ()); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; } void TestList4 () { int arr [] = { 1 , 2 , 5 , 3 , 1 , 2 , 3 , 4 , 5 , 7 , 6 , 8 , 9 }; list < int > L ( arr , arr + sizeof ( arr ) / sizeof ( arr [ 0 ])); L . unique (); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . sort (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; L . unique (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //class Three //{ //public: // bool operator()(int left, int right) // { // return 0 == (left + right) % 3; // } //}; //L.unique(Three()); //it = L.begin(); //while (it != L.end()); //{ // cout << *it << \" \"; // ++it; //} //cout << endl; } void TestList5 () { list < int > L ; L . push_back ( 1 ); L . push_back ( 4 ); L . push_back ( 6 ); list < int > L2 ; L2 . push_back ( 2 ); L2 . push_back ( 3 ); L2 . push_back ( 8 ); //\u5c06\u4e24\u4e2a\u5df2\u5e8f\u94fe\u8868\u5408\u5e76\u6210\u4e3a\u4e00\u4e2a\u94fe\u8868\uff0c\u5408\u5e76\u540e\u4f9d\u7136\u6709\u5e8f L . merge ( L2 ); list < int >:: iterator it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; //\u53cd\u8f6c\u94fe\u8868 L . reverse (); it = L . begin (); while ( it != L . end ()) { cout << * it << \" \" ; ++ it ; } cout << endl ; }","title":"4.\u5217\u8868(list)"},{"location":"DataStructure/chain/STL/#5set","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #include <iostream> #include <set> using namespace std ; int main () { set < int > s ; s . insert ( 1 ); s . insert ( 2 ); s . insert ( 3 ); s . insert ( 1 ); cout << \"set \u7684 size \u503c\u4e3a \uff1a\" << s . size () << endl ; cout << \"set \u7684 maxsize\u7684\u503c\u4e3a \uff1a\" << s . max_size () << endl ; cout << \"set \u4e2d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f \uff1a\" <<* s . begin () << endl ; cout << \"set \u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u662f:\" <<* s . end () << endl ; s . clear (); if ( s . empty ()) { cout << \"set \u4e3a\u7a7a \uff01\uff01\uff01\" << endl ; } cout << \"set \u7684 size \u503c\u4e3a \uff1a\" << s . size () << endl ; cout << \"set \u7684 maxsize\u7684\u503c\u4e3a \uff1a\" << s . max_size () << endl ; return 0 ; }","title":"5.\u96c6\u5408(set)"},{"location":"DataStructure/chain/STL/#6map","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #include <map> #include <string> map < int , string > mapStudent ; mapStudent . insert ( map < int , string >:: value_type ( 1 , \"student_one\" )); mapStudent . insert ( map < int , string >:: value_type ( 2 , \"student_two\" )); mapStudent . insert ( map < int , string >:: value_type ( 3 , \"student_three\" )); // or mapStudent . insert ( pair < int , string > ( 1 , \"studnet_one\" )); mapStudent . insert ( pair < int , string > ( 2 , \"student_two\" )); mapStudent . insert ( pair < int , string > ( 3 , \"student_three\" )); // or mapStudent [ 1 ] = \"student_one\" ; mapStudent [ 2 ] = \"student_two\" ; mapStudent [ 3 ] = \"student_three\" ; map < int , string >:: iterator i ; for ( i = mapStudent . begin (); i != mapStudent . end (); i ++ ) cout << i -> first << ' ' << i -> second << endl ; // \u5224\u65admap\u4e2d\u662f\u5426\u6709key if ( mymap . count ( iKey ) == 1 ) { } if ( myMap . find ( iKey ) != myMap . end ()) { }","title":"6.\u5173\u8054(map)"},{"location":"DataStructure/graph/GenerateTree/","text":"\u751f\u6210\u6811\u3001\u6700\u5c0f\u751f\u6210\u6811\uff08MST\uff09\u548c\u6700\u5c0f\u6811\u5f62\u56fe \u00b6 \u751f\u6210\u6811\u662f\u9488\u5bf9\u65e0\u5411\u8fde\u901a\u56fe\u7684\uff0c\u53ea\u9700\u8981n-1\u6761\u8fb9\u8fde\u4e0an\u4e2a\u70b9\uff08\u65e0\u73af\uff09\u5373\u53ef\uff0c\u5e38\u7528\u65b9\u6cd5\u662fPrim\u7b97\u6cd5\u6216Kruskal\u7b97\u6cd5 \u6700\u5c0f\u6811\u5f62\u56fe\u662f\u9488\u5bf9\u6709\u5411\u8fde\u901a\u56fe\u7684\uff0c\u7531\u4e8e\u6709\u5411\uff0c\u9700\u8981\u8003\u8651\u7236\u5b50\u5173\u7cfb\uff0c\u5e38\u7528\u7b97\u6cd5\u662f\u6731\u5218\u7b97\u6cd5\u3002 1. \u65e0\u5411\u56fe\u7684\u6700\u5c0f\u751f\u6210\u6811 \u2460\u751f\u6210\u6811\u7684\u4ee3\u4ef7\uff1a\u8bbeG = \uff08V\uff0cE\uff09\u662f\u4e00\u4e2a\u65e0\u5411\u8fde\u901a\u7f51\uff0c\u751f\u6210\u6811\u4e0a\u5404\u8fb9\u7684\u6743\u503c\u4e4b\u548c\u79f0\u4e3a\u8be5\u751f\u6210\u6811\u7684\u4ee3\u4ef7\u3002\u6700\u5c0f\u751f\u6210\u6811\u7684\u7b97\u6cd5\u5c5e\u4e8e\u8d2a\u5fc3\u751f\u6210\uff0c\u53ef\u5206\u4e3a\u52a0\u70b9\u6cd5\u548c\u52a0\u8fb9\u6cd5\u3002 \u2461\u6700\u5c0f\u751f\u6210\u6811\uff1a\u5728\u56feG\u6240\u6709\u751f\u6210\u6811\u4e2d\uff0c\u4ee3\u4ef7\u6700\u5c0f\u7684\u751f\u6210\u6811\u79f0\u4e3a\u6700\u5c0f\u751f\u6210\u6811\u3002 \u6700\u5c0f\u751f\u6210\u6811\u7684\u6982\u5ff5\u53ef\u4ee5\u5e94\u7528\u5230\u8bb8\u591a\u5b9e\u9645\u95ee\u9898\u4e2d\u3002 \u4f8b\uff1a\u5728n\u4e2a\u57ce\u5e02\u4e4b\u95f4\u5efa\u9020\u901a\u4fe1\u7f51\u7edc\uff0c\u81f3\u5c11\u8981\u67b6\u8bben - 1\u6761\u901a\u4fe1\u7ebf\u8def\uff0c\u800c\u6bcf\u4e24\u4e2a\u57ce\u5e02\u4e4b\u95f4\u67b6\u8bbe\u901a\u4fe1\u7ebf\u8def\u7684\u9020\u4ef7\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u5982\u4f55\u8bbe\u8ba1\u624d\u80fd\u4f7f\u5f97\u603b\u9020\u4ef7\u6700\u5c0f\u3002 \u2462MST\u6027\u8d28\uff1a\u5047\u8bbeG = (V, E)\u662f\u4e00\u4e2a\u65e0\u5411\u8fde\u901a\u7f51\uff0cU\u662f\u9876\u70b9\u96c6V\u7684\u4e00\u4e2a\u975e\u7a7a\u5b50\u96c6\u3002\u82e5(u, v)\u662f\u4e00\u6761\u5177\u6709\u6700\u5c0f\u6743\u503c\u7684\u8fb9\uff0c\u5176\u4e2du\u2208U\uff0cv\u2208V\uff0dU\uff0c\u5219\u5fc5\u5b58\u5728\u4e00\u68f5\u5305\u542b\u8fb9(u, v)\u7684\u6700\u5c0f\u751f\u6210\u6811\u3002 \u6700\u5c0f\u751f\u6210\u6811\uff1a (1)Prim\u7b97\u6cd5\uff08\u7a00\u70b9\u7a20\u8fb9\u56fe\uff09 \u6838\u5fc3\uff1a\u52a0\u70b9\u751f\u6210\uff0c\u6bcf\u52a0\u4e00\u4e2a\u70b9\u66f4\u65b0\u6240\u6709\u70b9\u5230\u5df2\u751f\u6210\u6811\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u76f4\u5230\u52a0\u5b8c\u6240\u6709\u70b9\uff0c \u800c\u4e14\u5bb9\u6613\u8bb0\u5f55\u76f4\u63a5\u62d3\u6251\u5173\u7cfb 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 //\u8fd9\u91cc\u7528\u4e34\u63a5\u77e9\u9635\u5b58\u56fe int prim(int n) { int sum = 0; for (int i = 1; i <= n; i++) maxdis[i] = mp[1][i];//\u4ee5\u7b2c\u4e00\u70b9\u4e3a\u8d77\u70b9\u751f\u6210 memset(vis, 0, sizeof(vis));//\u6807\u8bb0\u5df2\u7ecf\u5728\u6811\u5185\u7684\u70b9 vis[1] = 1; maxdis[1] = 0; for (int i = 2; i <= n; i++) { int k = 1,min = INF; for (int j = 1; j <= n; j++)//\u64c2\u9009\u6700\u77ed\u53ef\u8fbe\u70b9 if (!v[j] && min > maxdis[j]) { k = j; min = maxdis[j]; } sum += min; v[k] = 1; for (j = 1; j <= n; j++)//\u66f4\u65b0\u672a\u5165\u6811\u70b9\u7684\u53ef\u8fbe\u8ddd\u79bb if (!v[j] && maxdis[j] > mp[k][j]) maxdis[j] = mp[k][j]; } return sum; \uff082\uff09Kruskal\u7b97\u6cd5\uff08\u7a00\u8fb9\u7a20\u70b9\u56fe\uff09 \u6838\u5fc3\uff1a\u52a0\u8fb9\u751f\u6210\uff0c\u5c06\u6240\u6709\u8fb9\u4ee5\u957f\u5ea6\u6392\u5e8f\uff0c\u4e00\u65e6\u8fb9\u4e24\u7aef\u4e0d\u540c\u5728\u6811\u5185\uff0c\u5219\u52a0\u5165\u8fb9\uff0c\u53ef\u7528\u5e76\u67e5\u96c6\u5224\u65ad 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 //\u5efa\u7acb\u8fb9\u7684\u6570\u636e\u7ed3\u6784\uff08\u4e24\u4e2a\u7aef\u70b9\u7684\u6743\u503c\uff09 struct node { int u; int v; unsigned long long w; }edge[100001]; bool cmp(node a,node b)//\u5c06\u5404\u8fb9\u6309\u4ece\u5c0f\u5230\u5927\u7684\u6743\u503c\u6392\u5e8f { if(a.w==b.w) { return a.u==b.u?(a.v<b.v):(a.u<b.u); } else { return a.w<b.w; } } int find(int x)//\u5e76\u67e5\u96c6 { return x==fa[x]?x:fa[x]=find(fa[x]);//\u5e26\u4fee } int Kruskal() { int cnt=0; long long weigh=0,ans=0,s=1; sort(edge+1,edge+m+1,cmp);//\u6392\u5e8f for(int i=1;i<=n;i++) { fa[i]=i;//\u521d\u59cb\u5316\u5e76\u67e5\u96c6\u6570\u7ec4 } for(int i=1;i<=m;i++) { int x=find(edge[i].u); int y=find(edge[i].v); if(x==y) { continue;//\u4e24\u70b9\u90fd\u5df2\u7ecf\u5728\u6811\u5185\uff0c\u4e0d\u7528\u53e6\u5916\u52a0\u8fb9 } fa[x]=y;//\u5165\u6811 cnt++; ans+=edge[i].w;\u52a0\u8fb9 if(cnt==n-1) { return ans; } } } tip: \u00b6 (1)\u8981\u6c42\u6b21\u5c0f\u751f\u6210\u6811\u65f6\u53ef\u4ee5\u5728prim\u7684\u6700\u5c0f\u751f\u6210\u6811\u4ee3\u7801\u91cc\u591a\u7ef4\u62a4\u51e0\u4e2a\u53d8\u91cf\uff08\u6811\u7684\u7236\u5b50\u5173\u7cfbpre[],\u70b9\u5230\u751f\u6210\u6811\u7684\u6700\u5927\u8ddd\u79bb\u7b49\u7b49\uff09(\u4f8bhdu4081\u6700\u4f73\u866b\u6d1e\u9009\u62e9\u7684\u6838\u5fc3\u4ee3\u7801) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 maxdis[k][inset[j]]=max(maxddis[inset[j]][pre[k]],mp[pre[k][k]])//\u526a\u6389\u5e26k\u6811\u679d\u53ef\u53d6\u7684\u6700\u5927\u8fb9 --- for(int i=1;i<=n;i++) { for(int j=i+1;j<=n;j++) { if(mst[i][j]) { ans=max(ans,(city[i].p+city[j].p)*1.0)/(sroad-mp[i][j]); } else { ans=max(ans,(city[i].p+city[j].p)*1.0/(sroad-maxdis[i][j])); } } } \u5728\u6c42\u6b21\u5c0f\u751f\u6210\u6811\u65f6\u53ea\u9700\u8981\u679a\u4e3e\u4efb\u610f\u4e24\u70b9\u7684\u8fb9\u5e76\u8fdb\u884c\u540c\u6837\u7684\u7559\u8fb9\u65ad\u8fb9\u64cd\u4f5c 2. \u6709\u5411\u56fe\u7684\u6700\u5c0f\u6811\u5f62\u56fe \u6700\u5c0f\u6811\u5f62\u56fe\uff1a\u6709\u5411\u5e26\u6743\u56fe\u6307\u5b9a\u6839\u8282\u70b9\uff0c\u6c42\u4e00\u68f5\u6709\u5411\u751f\u6210\u6811\u4f7f\u5f97\u5176\u6240\u6709\u8fb9\u6743\u503c\u6700\u5c0f \u6731\u5218\u7b97\u6cd5 \u5e38\u89c4\u6b65\u9aa4\uff1a \uff081\uff09\u6c42\u6700\u77ed\u5f27\u96c6\u5408\uff08\u5982\u679c\u51fa\u73b0\u9664\u6839\u8282\u70b9\u4ee5\u5916\u7684\u5b64\u7acb\u70b9\uff0c\u5219\u4e0d\u5b58\u5728\u6700\u5c0f\u6811\u5f62\u56fe\uff09 \uff082\uff09\u5224\u65ad\u96c6\u5408\u4e2d\u6709\u6ca1\u6709\u6709\u5411\u73af\uff0c\u6709\u8f6c\u6b65\u9aa43\u5426\u5219\u8f6c\u6b65\u9aa44 \uff083\uff09\u6536\u7f29\u70b9\uff0c\u628a\u6709\u5411\u73af\u6536\u7f29\u6210\u4e00\u4e2a\u70b9\uff0c\u5e76\u4e14\u5bf9\u56fe\u91cd\u65b0\u6784\u5efa\uff1a \u6838\u5fc3\uff1a\u8bbe\u70b9u\u5728\u73af\u4e2d\uff0c\u73af\u4e2d\u6307\u5411u\u7684\u6743\u503c\u4e3aw\uff0c\u70b9v\u5728\u73af\u5916\uff0c\u539f\u56fe\u4e3aG,\u7f29\u70b9\u540e\u6210G1,\u7f29\u70b9\u4e3ai * \u4ee5\u7f29\u70b9\u4e3a\u8fb9\u7ec8\u70b9\uff0c\u5bf9\u4e8eG\u4e2d\u6bcf\u4e00\u6761\u8fb9mp[v][i]=min{mp[v][u]-w[u]}(\u5bb9\u65a5\uff0c\u5c55\u5f00\u7f29\u70b9\u4f1a\u8865\u507f) * \u4ee5\u7f29\u70b9\u4e3a\u8fb9\u8d77\u70b9\uff0c\u5bf9\u4e8eG\u4e2d\u7f29\u70b9\u6709mp[i][v]=min\uff5bmp[u][v]\uff5d \uff084\uff09\u5c55\u5f00\u6536\u7f29\u70b9\uff0c\u6c42\u5f97\u6700\u5c0f\u6811\u5f62\u56fe\uff08\u4e0d\u4f5c\u8981\u6c42\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 struct node { int u,v,val; }edge[maxn*maxn]; ll Dir_MST(int root, int V, int E) { ll ans = 0; while (true) //\u5982\u679c\u8fd8\u662f\u53ef\u884c\u7684\u8bdd { for (int i = 0; i < V; i++) { in[i] = INF; //\u7ed9\u4e88\u6bcf\u4e2a\u70b9\u7684\u5165\u8fb9\uff08\u5373\u7236\u5b50\u8fb9\uff09\u8fdb\u884c\u521d\u59cb\u5316 } /* (1)\u3001\u6700\u77ed\u5f27\u96c6\u5408E0 */ for (int i = 1; i <= E; i++) { int u = edge[i].u, v = edge[i].v;//\u7ec8\u70b9\u4e3a\u5b50\u8282\u70b9 if (edge[i].val < in[v] && u != v) //\u9876\u70b9v\u6709\u66f4\u5c0f\u7684\u5165\u8fb9\uff0cu!=v\u662f\u4e3a\u4e86\u786e\u4fdd\u7f29\u70b9\u4e4b\u540e\uff0c\u6211\u4eec\u7684\u73af\u5c06\u4f1a\u53d8\u6210\u70b9\u7684\u5f62\u5f0f { pre[v] = u; //\u8282\u70b9u\u6307\u5411v in[v] = edge[i].val; //\u6700\u5c0f\u5165\u8fb9 if (u == root) pos = i; //\u8fd9\u4e2a\u70b9\u5c31\u662f\u5b9e\u9645\u7684\u8d77\u70b9 } } /* (2)\u3001\u68c0\u67e5E0 */ for (int i = 0; i < V; i++) //\u5224\u65ad\u662f\u5426\u5b58\u5728\u6700\u5c0f\u6811\u5f62\u56fe { if (i == root) continue; //\u662f\u6839\u8282\u70b9\uff0c\u4e0d\u7ba1 if (in[i] == INF) return -1; //\u9664\u4e86\u6839\u8282\u70b9\u4ee5\u5916\uff0c\u6709\u70b9\u6ca1\u6709\u5165\u8fb9\uff0c\u5219\u6839\u672c\u65e0\u6cd5\u62b5\u8fbe\u5b83\uff0c\u8bf4\u660e\u662f\u72ec\u7acb\u7684\u70b9\uff0c\u4e00\u5b9a\u4e0d\u80fd\u6784\u6210\u6811\u5f62\u56fe } /* (3)\u3001\u6536\u7f29\u56fe\u4e2d\u7684\u6709\u5411\u73af\u5e76\u505a\u8d21\u732e */ int cnt = 0; //\u63a5\u4e0b\u6765\u8981\u53bb\u6c42\u73af\uff0c\u7528\u4ee5\u8bb0\u5f55\u73af\u7684\u4e2a\u6570 memset(id, -1, sizeof(id));//\u73af\u7f16\u53f7\uff0c\u7c7bbelong\u6570\u7ec4 memset(vis, -1, sizeof(vis)); in[root] = 0; for (int i = 0; i < V; i++) //\u6807\u8bb0\u6bcf\u4e2a\u73af { ans += in[i]; //\u52a0\u5165\u6bcf\u4e2a\u70b9\u7684\u5165\u8fb9\uff08\u65e2\u7136\u662f\u6700\u5c0f\u5165\u8fb9\uff0c\u6240\u4ee5\u80af\u5b9a\u7b26\u5408\u6700\u5c0f\u6811\u5f62\u56fe\u7684\u601d\u60f3\uff09 int v = i; //v\u4e00\u5f00\u59cb\u5148\u4ece\u7b2ci\u4e2a\u8282\u70b9\u8fdb\u53bb while (vis[v] != i && id[v] == -1 && v != root) //\u9000\u51fa\u7684\u6761\u4ef6\u6709\u201c\u5f62\u6210\u4e86\u4e00\u4e2a\u73af\u201d\u3001\u201c\u5230\u4e86\u4e00\u4e2a\u73af\u9000\u51fa\u201d\u3001\u201c\u5230\u4e86\u6839\u8282\u70b9\u9000\u51fa\u201d { vis[v] = i; v = pre[v]; } if (v != root && id[v] == -1) //\u5982\u679cv\u662froot\u5c31\u8bf4\u660e\u662f\u8fd4\u56de\u5230\u4e86\u6839\u8282\u70b9\uff0c\u662f\u6761\u94fe\uff0c\u6ca1\u73af\uff1b\u53c8\u6216\u8005\uff0c\u5b83\u5df2\u7ecf\u662f\u8fdb\u5165\u4e86\u5bf9\u5e94\u73af\u7684\u7f16\u53f7\u4e86\uff0c\u4e0d\u9700\u8981\u518d\u8dd1\u4e00\u8d9f\u4e86 { for (int u = pre[v]; u != v; u = pre[u]) //\u8dd1\u8fd9\u4e00\u5708\u7684\u73af { id[u] = cnt; //\u6807\u8bb0\u70b9u\u662f\u7b2c\u51e0\u4e2a\u73af } id[v] = cnt++; //\u5982\u679c\u518d\u9047\u5230\uff0c\u5c31\u662f\u4e0b\u4e2a\u70b9\u4e86 } } if (cnt == 0) return ans; //\u65e0\u73af\u7684\u60c5\u51b5\uff0c\u5c31\u8bf4\u660e\u5df2\u7ecf\u53d6\u5230\u4e86\u6700\u4f18\u89e3\uff0c\u76f4\u63a5\u8fd4\u56de\uff0c\u6216\u8005\u8bf4\u662f\u73af\u5df2\u7ecf\u6536\u7f29\u5230\u6ca1\u6709\u73af\u7684\u60c5\u51b5\u4e86 for (int i = 0; i < V; i++) { if (id[i] == -1) { id[i] = cnt++; //\u8fd9\u4e9b\u70b9\u662f\u73af\u5916\u7684\u70b9\uff0c\u662f\u94fe\u4e0a\u7684\u70b9\uff0c\u5355\u72ec\u518d\u7ed9\u4ed6\u4eec\u8d4b\u503c } } for (int i = 1; i <= E; i++) //\u51c6\u5907\u5f00\u59cb\u5efa\u7acb\u65b0\u56fe \u7f29\u70b9\uff0c\u91cd\u65b0\u6807\u8bb0 { int u = edge[i].u, v = edge[i].v; edge[i].u = id[u]; edge[i].v = id[v]; //\u5efa\u7acb\u65b0\u56fe\uff0c\u4ee5\u65b0\u7684\u70b9\u8fdb\u5165 if (id[u] != id[v]) edge[i].val -= in[v]; //\u4e3a\u4e86\u4e0d\u6539\u53d8\u539f\u6765\u7684\u5f0f\u5b50\uff0c\u4f7f\u5f97\u5c55\u5f00\u540e\u8fd8\u662f\u539f\u6765\u7684\u5f0f\u5b50,\u5373\u5bb9\u65a5\u539f\u7406\uff0c\u73af\u4e2d\u505a\u4e86\u8d21\u732e\u65b0\u8fb9\u5219\u51cf\u53bb\u5176\u503c } V = cnt; //\u4e4b\u540e\u7684\u70b9\u7684\u6570\u76ee root = id[root]; //\u65b0\u7684\u6839\u8282\u70b9\u7684\u5e8f\u53f7\uff0c\u56e0\u4e3aid[]\u7684\u6539\u53d8\uff0c\u6240\u4ee5\u6839\u8282\u70b9\u7684\u5e8f\u53f7\u4e5f\u6539\u53d8\u4e86 } return ans; } 3. \u65e0\u5411\u56fe\u7684\u751f\u6210\u6811 \u6c42\u65e0\u5411\u56fe\u7684\u751f\u6210\u6811\u4e2a\u6570: \u57fa\u5c14\u970d\u592b\u5b9a\u7406 \u5ea6\u6570\u77e9\u9635(n n) \uff1aD[i][i]\u4e3a\u70b9i\u7684\u5ea6 \u5176\u4ed6\u4f4d\u7f6e\u4e3a0 \u90bb\u63a5\u77e9\u9635(n n) : a[i][i]=0; a[i][j]=[i\u4e0ej\u76f8\u8fde] \u57fa\u5c14\u970d\u592b\u77e9\u9635 = \u5ea6\u6570\u77e9\u9635 - \u90bb\u63a5\u77e9\u9635 \u5373C=D-A:C[i][i]=i\u7684\u5ea6\u6570\uff0cC[i][j]=-1(i,j\u6709\u8fb9)\uff0cC[i][j]=0(\u5176\u4ed6) Matrix-Tree \u5b9a\u7406\uff1a \u4e00\u4e2an\u4e2a\u70b9m\u6761\u8fb9\u7684\u65e0\u5411\u56fe\u7684\u751f\u6210\u6811\u603b\u6570\u4e3a\u5176\u5bf9\u5e94\u7684\u57fa\u5c14\u970d\u592b\u77e9\u9635\u7684n-1\u9636\u4f59\u5b50\u5f0f(\u884c\u5217\u5f0f)\u3002 \u6c42\u884c\u5217\u5f0f\u53ef\u7528\u9ad8\u65af\u6d88\u5143\u5316\u4e3a\u4e09\u89d2\u9635\u6c42\u5bf9\u89d2\u79ef\u5373\u53ef 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #include <iostream> #include <cstdio> #include <cmath> #define LL long long using namespace std; const int MOD = 1e9+7; LL a[105][105]; int n, m, sign, du[105]; void solve(int N){//\u9ad8\u65af\u6d88\u5143 sign = 0; LL ans = 1; for(int i=1; i<N; i++){ for(int j=i+1; j<N; j++){//\u5f53\u524d\u4e4b\u540e\u7684\u6bcf\u4e00\u884c\u7b2c\u4e00\u4e2a\u975e0\u6570\u8981\u8f6c\u5316\u62100 int x=i, y=j; while( a[y][i] ){//\u5229\u7528gcd\u7684\u65b9\u6cd5\uff0c\u4e0d\u505c\u5730\u8fdb\u884c\u8f97\u8f6c\u76f8\u9664 LL t = a[x][i] / a[y][i]; for(int k=i; k<N; k++) a[x][k] = (a[x][k] - a[y][k] * t) % MOD; swap(x, y); } if(x != i){//\u5947\u6570\u6b21\u4ea4\u6362\uff0c\u5219D=-D'\u6574\u884c\u4ea4\u6362 for(int k=1; k<N; k++) swap(a[i][k], a[x][k]); sign ^= 1;//\u884c\u5217\u5f0f*-1 } } if( !a[i][i] ){//\u659c\u5bf9\u89d2\u4e2d\u6709\u4e00\u4e2a0\uff0c\u5219\u7ed3\u679c\u4e3a0 printf(\"0\\n\"); return ; } else ans = ans * a[i][i] % MOD; } if(sign != 0) ans *= -1; if(ans < 0) ans += MOD;// printf(\"%I64d\\n\", ans); return ; } int main(){ freopen (\"tcount.in\", \"r\", stdin); freopen (\"tcount.out\", \"w\", stdout); scanf(\"%d%d\", &n, &m); for(int i=1; i<=m; i++) { int x, y; scanf(\"%d%d\", &x, &y); a[x][y] = a[y][x] = -1; du[x]++; du[y]++; } for(int i=1; i<=n; i++) { a[i][i] = du[i]; }//a\u5219\u4e3a\u57fa\u5c14\u970d\u592b\u77e9\u9635 solve(n); return 0; } \u5c0f\u62d3\u5c55\uff1a\u9ad8\u65af\u6d88\u5143\u89e3\u51b3n\u4e2an\u5143\u4e00\u6b21\u65b9\u7a0b\u7ec4 \u6838\u5fc3\uff1a\u5316\u5de6\u4e0b\u4e3a0\u7684\u4e09\u89d2\u9635\uff0c\u501f\u7b2ci\u884c\u7684\u6570\u6e05\u7b2ci\u5217\u7684\uff08n-i\uff09\u4e2a0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 int n, pl; double a[1001][1001]; int main() { cin >> n; for (int i = 1; i <= n; i++) for (int j = 1; j <= n + 1; j++) cin >> a[i][j];//\u8f93\u5165\u7684\u662fn\u4e2a\u65b9\u7a0b\u7ec4\u6210\u7684n*(n+1)\u77e9\u9635\uff08\u7cfb\u6570\u77e9\u9635\u548c\u548c\u77e9\u9635\uff09 for (int i = 1; i <= n; i++) { pl = i; while (a[pl][i] == 0 && pl <= n) pl++; // \u5224\u65ad\u7b2ci\u5217\u9996\u5143\u7d20\u975e0\u7684\u6700\u4e0a\u884c\uff0c\u56e0\u4e3a\u7b2ci\u884c\u7b2ci\u5217\u5143\u7d20\u4e0d\u80fd\u4e3a0 if (pl == n + 1) { cout << \"No Solution\"; return 0; } //\u4e00\u76f4\u5224\u5230\u4e86n+1\u884c\uff0c\u53ef\u662f\u4e00\u5171\u624d\u53ea\u6709n\u884c\uff0c\u8bf4\u660e\u6709\u4e00\u5217\u5168\u4e3a0\uff0c\u65e0\u89e3 for (int j = 1; j <= n + 1; j++) //\u5c06\u7b2ci\u884c\u7b2ci\u5217\u5143\u7d20\u4e0d\u4e3a0\u7684\u90a3\u4e00\u884c\u4e0e\u5f53\u524d\u884c\u4ea4\u6362 swap(a[i][j], a[pl][j]); double k = a[i][i]; //\u8ba9\u7b2ci\u884c\u6bcf\u4e2a\u5143\u7d20\u90fd\u9664\u4ee5a[i][i]\u4f7f\u5f97a[i][i]\u4e3a1 for (int j = 1; j <= n + 1; j++) a[i][j] = a[i][j] / k; //\u5c06\u7b2ci\u884c\u7b2ci\u5217\u7684\u5143\u7d20\u6d88\u62101,\u6ce8\u610f\u540c\u884c\u8fdb\u884c\u540c\u6837\u7684\u64cd\u4f5c for (int j = 1; j <= n; j++) { if (i != j) //\u5c06\u7b2ci\u5217\u9664\u4e86\u7b2ci\u884c\u7684\u5143\u7d20\u5168\u6d88\u62100 { //\u65b9\u6cd5\u662f\u7b2cj\u884c\u6bcf\u4e2a\u5143\u7d20a[j][m]\u90fd\u51cf\u53bba[j][1]*a[i][m] double ki = a[j][i]; for (int m = 1; m <= n + 1; m++) a[j][m] = a[j][m] - ki * a[i][m]; } } } for (int i = 1; i <= n; i++) printf(\"%.2lf\\n\", a[i][n + 1]); return 0; } \u540c\u6837\uff0c\u9ad8\u65af\u6d88\u5143\u53ef\u4ee5\u6c42\u89e3\u77e9\u9635\u884c\u5217\u5f0f\u3001\u77e9\u9635\u7684\u79e9\u7b49\u95ee\u9898","title":"\u751f\u6210\u6811"},{"location":"DataStructure/graph/GenerateTree/#mst","text":"\u751f\u6210\u6811\u662f\u9488\u5bf9\u65e0\u5411\u8fde\u901a\u56fe\u7684\uff0c\u53ea\u9700\u8981n-1\u6761\u8fb9\u8fde\u4e0an\u4e2a\u70b9\uff08\u65e0\u73af\uff09\u5373\u53ef\uff0c\u5e38\u7528\u65b9\u6cd5\u662fPrim\u7b97\u6cd5\u6216Kruskal\u7b97\u6cd5 \u6700\u5c0f\u6811\u5f62\u56fe\u662f\u9488\u5bf9\u6709\u5411\u8fde\u901a\u56fe\u7684\uff0c\u7531\u4e8e\u6709\u5411\uff0c\u9700\u8981\u8003\u8651\u7236\u5b50\u5173\u7cfb\uff0c\u5e38\u7528\u7b97\u6cd5\u662f\u6731\u5218\u7b97\u6cd5\u3002 1. \u65e0\u5411\u56fe\u7684\u6700\u5c0f\u751f\u6210\u6811 \u2460\u751f\u6210\u6811\u7684\u4ee3\u4ef7\uff1a\u8bbeG = \uff08V\uff0cE\uff09\u662f\u4e00\u4e2a\u65e0\u5411\u8fde\u901a\u7f51\uff0c\u751f\u6210\u6811\u4e0a\u5404\u8fb9\u7684\u6743\u503c\u4e4b\u548c\u79f0\u4e3a\u8be5\u751f\u6210\u6811\u7684\u4ee3\u4ef7\u3002\u6700\u5c0f\u751f\u6210\u6811\u7684\u7b97\u6cd5\u5c5e\u4e8e\u8d2a\u5fc3\u751f\u6210\uff0c\u53ef\u5206\u4e3a\u52a0\u70b9\u6cd5\u548c\u52a0\u8fb9\u6cd5\u3002 \u2461\u6700\u5c0f\u751f\u6210\u6811\uff1a\u5728\u56feG\u6240\u6709\u751f\u6210\u6811\u4e2d\uff0c\u4ee3\u4ef7\u6700\u5c0f\u7684\u751f\u6210\u6811\u79f0\u4e3a\u6700\u5c0f\u751f\u6210\u6811\u3002 \u6700\u5c0f\u751f\u6210\u6811\u7684\u6982\u5ff5\u53ef\u4ee5\u5e94\u7528\u5230\u8bb8\u591a\u5b9e\u9645\u95ee\u9898\u4e2d\u3002 \u4f8b\uff1a\u5728n\u4e2a\u57ce\u5e02\u4e4b\u95f4\u5efa\u9020\u901a\u4fe1\u7f51\u7edc\uff0c\u81f3\u5c11\u8981\u67b6\u8bben - 1\u6761\u901a\u4fe1\u7ebf\u8def\uff0c\u800c\u6bcf\u4e24\u4e2a\u57ce\u5e02\u4e4b\u95f4\u67b6\u8bbe\u901a\u4fe1\u7ebf\u8def\u7684\u9020\u4ef7\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u5982\u4f55\u8bbe\u8ba1\u624d\u80fd\u4f7f\u5f97\u603b\u9020\u4ef7\u6700\u5c0f\u3002 \u2462MST\u6027\u8d28\uff1a\u5047\u8bbeG = (V, E)\u662f\u4e00\u4e2a\u65e0\u5411\u8fde\u901a\u7f51\uff0cU\u662f\u9876\u70b9\u96c6V\u7684\u4e00\u4e2a\u975e\u7a7a\u5b50\u96c6\u3002\u82e5(u, v)\u662f\u4e00\u6761\u5177\u6709\u6700\u5c0f\u6743\u503c\u7684\u8fb9\uff0c\u5176\u4e2du\u2208U\uff0cv\u2208V\uff0dU\uff0c\u5219\u5fc5\u5b58\u5728\u4e00\u68f5\u5305\u542b\u8fb9(u, v)\u7684\u6700\u5c0f\u751f\u6210\u6811\u3002 \u6700\u5c0f\u751f\u6210\u6811\uff1a (1)Prim\u7b97\u6cd5\uff08\u7a00\u70b9\u7a20\u8fb9\u56fe\uff09 \u6838\u5fc3\uff1a\u52a0\u70b9\u751f\u6210\uff0c\u6bcf\u52a0\u4e00\u4e2a\u70b9\u66f4\u65b0\u6240\u6709\u70b9\u5230\u5df2\u751f\u6210\u6811\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u76f4\u5230\u52a0\u5b8c\u6240\u6709\u70b9\uff0c \u800c\u4e14\u5bb9\u6613\u8bb0\u5f55\u76f4\u63a5\u62d3\u6251\u5173\u7cfb 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 //\u8fd9\u91cc\u7528\u4e34\u63a5\u77e9\u9635\u5b58\u56fe int prim(int n) { int sum = 0; for (int i = 1; i <= n; i++) maxdis[i] = mp[1][i];//\u4ee5\u7b2c\u4e00\u70b9\u4e3a\u8d77\u70b9\u751f\u6210 memset(vis, 0, sizeof(vis));//\u6807\u8bb0\u5df2\u7ecf\u5728\u6811\u5185\u7684\u70b9 vis[1] = 1; maxdis[1] = 0; for (int i = 2; i <= n; i++) { int k = 1,min = INF; for (int j = 1; j <= n; j++)//\u64c2\u9009\u6700\u77ed\u53ef\u8fbe\u70b9 if (!v[j] && min > maxdis[j]) { k = j; min = maxdis[j]; } sum += min; v[k] = 1; for (j = 1; j <= n; j++)//\u66f4\u65b0\u672a\u5165\u6811\u70b9\u7684\u53ef\u8fbe\u8ddd\u79bb if (!v[j] && maxdis[j] > mp[k][j]) maxdis[j] = mp[k][j]; } return sum; \uff082\uff09Kruskal\u7b97\u6cd5\uff08\u7a00\u8fb9\u7a20\u70b9\u56fe\uff09 \u6838\u5fc3\uff1a\u52a0\u8fb9\u751f\u6210\uff0c\u5c06\u6240\u6709\u8fb9\u4ee5\u957f\u5ea6\u6392\u5e8f\uff0c\u4e00\u65e6\u8fb9\u4e24\u7aef\u4e0d\u540c\u5728\u6811\u5185\uff0c\u5219\u52a0\u5165\u8fb9\uff0c\u53ef\u7528\u5e76\u67e5\u96c6\u5224\u65ad 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 //\u5efa\u7acb\u8fb9\u7684\u6570\u636e\u7ed3\u6784\uff08\u4e24\u4e2a\u7aef\u70b9\u7684\u6743\u503c\uff09 struct node { int u; int v; unsigned long long w; }edge[100001]; bool cmp(node a,node b)//\u5c06\u5404\u8fb9\u6309\u4ece\u5c0f\u5230\u5927\u7684\u6743\u503c\u6392\u5e8f { if(a.w==b.w) { return a.u==b.u?(a.v<b.v):(a.u<b.u); } else { return a.w<b.w; } } int find(int x)//\u5e76\u67e5\u96c6 { return x==fa[x]?x:fa[x]=find(fa[x]);//\u5e26\u4fee } int Kruskal() { int cnt=0; long long weigh=0,ans=0,s=1; sort(edge+1,edge+m+1,cmp);//\u6392\u5e8f for(int i=1;i<=n;i++) { fa[i]=i;//\u521d\u59cb\u5316\u5e76\u67e5\u96c6\u6570\u7ec4 } for(int i=1;i<=m;i++) { int x=find(edge[i].u); int y=find(edge[i].v); if(x==y) { continue;//\u4e24\u70b9\u90fd\u5df2\u7ecf\u5728\u6811\u5185\uff0c\u4e0d\u7528\u53e6\u5916\u52a0\u8fb9 } fa[x]=y;//\u5165\u6811 cnt++; ans+=edge[i].w;\u52a0\u8fb9 if(cnt==n-1) { return ans; } } }","title":"\u751f\u6210\u6811\u3001\u6700\u5c0f\u751f\u6210\u6811\uff08MST\uff09\u548c\u6700\u5c0f\u6811\u5f62\u56fe"},{"location":"DataStructure/graph/GenerateTree/#tip","text":"(1)\u8981\u6c42\u6b21\u5c0f\u751f\u6210\u6811\u65f6\u53ef\u4ee5\u5728prim\u7684\u6700\u5c0f\u751f\u6210\u6811\u4ee3\u7801\u91cc\u591a\u7ef4\u62a4\u51e0\u4e2a\u53d8\u91cf\uff08\u6811\u7684\u7236\u5b50\u5173\u7cfbpre[],\u70b9\u5230\u751f\u6210\u6811\u7684\u6700\u5927\u8ddd\u79bb\u7b49\u7b49\uff09(\u4f8bhdu4081\u6700\u4f73\u866b\u6d1e\u9009\u62e9\u7684\u6838\u5fc3\u4ee3\u7801) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 maxdis[k][inset[j]]=max(maxddis[inset[j]][pre[k]],mp[pre[k][k]])//\u526a\u6389\u5e26k\u6811\u679d\u53ef\u53d6\u7684\u6700\u5927\u8fb9 --- for(int i=1;i<=n;i++) { for(int j=i+1;j<=n;j++) { if(mst[i][j]) { ans=max(ans,(city[i].p+city[j].p)*1.0)/(sroad-mp[i][j]); } else { ans=max(ans,(city[i].p+city[j].p)*1.0/(sroad-maxdis[i][j])); } } } \u5728\u6c42\u6b21\u5c0f\u751f\u6210\u6811\u65f6\u53ea\u9700\u8981\u679a\u4e3e\u4efb\u610f\u4e24\u70b9\u7684\u8fb9\u5e76\u8fdb\u884c\u540c\u6837\u7684\u7559\u8fb9\u65ad\u8fb9\u64cd\u4f5c 2. \u6709\u5411\u56fe\u7684\u6700\u5c0f\u6811\u5f62\u56fe \u6700\u5c0f\u6811\u5f62\u56fe\uff1a\u6709\u5411\u5e26\u6743\u56fe\u6307\u5b9a\u6839\u8282\u70b9\uff0c\u6c42\u4e00\u68f5\u6709\u5411\u751f\u6210\u6811\u4f7f\u5f97\u5176\u6240\u6709\u8fb9\u6743\u503c\u6700\u5c0f \u6731\u5218\u7b97\u6cd5 \u5e38\u89c4\u6b65\u9aa4\uff1a \uff081\uff09\u6c42\u6700\u77ed\u5f27\u96c6\u5408\uff08\u5982\u679c\u51fa\u73b0\u9664\u6839\u8282\u70b9\u4ee5\u5916\u7684\u5b64\u7acb\u70b9\uff0c\u5219\u4e0d\u5b58\u5728\u6700\u5c0f\u6811\u5f62\u56fe\uff09 \uff082\uff09\u5224\u65ad\u96c6\u5408\u4e2d\u6709\u6ca1\u6709\u6709\u5411\u73af\uff0c\u6709\u8f6c\u6b65\u9aa43\u5426\u5219\u8f6c\u6b65\u9aa44 \uff083\uff09\u6536\u7f29\u70b9\uff0c\u628a\u6709\u5411\u73af\u6536\u7f29\u6210\u4e00\u4e2a\u70b9\uff0c\u5e76\u4e14\u5bf9\u56fe\u91cd\u65b0\u6784\u5efa\uff1a \u6838\u5fc3\uff1a\u8bbe\u70b9u\u5728\u73af\u4e2d\uff0c\u73af\u4e2d\u6307\u5411u\u7684\u6743\u503c\u4e3aw\uff0c\u70b9v\u5728\u73af\u5916\uff0c\u539f\u56fe\u4e3aG,\u7f29\u70b9\u540e\u6210G1,\u7f29\u70b9\u4e3ai * \u4ee5\u7f29\u70b9\u4e3a\u8fb9\u7ec8\u70b9\uff0c\u5bf9\u4e8eG\u4e2d\u6bcf\u4e00\u6761\u8fb9mp[v][i]=min{mp[v][u]-w[u]}(\u5bb9\u65a5\uff0c\u5c55\u5f00\u7f29\u70b9\u4f1a\u8865\u507f) * \u4ee5\u7f29\u70b9\u4e3a\u8fb9\u8d77\u70b9\uff0c\u5bf9\u4e8eG\u4e2d\u7f29\u70b9\u6709mp[i][v]=min\uff5bmp[u][v]\uff5d \uff084\uff09\u5c55\u5f00\u6536\u7f29\u70b9\uff0c\u6c42\u5f97\u6700\u5c0f\u6811\u5f62\u56fe\uff08\u4e0d\u4f5c\u8981\u6c42\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 struct node { int u,v,val; }edge[maxn*maxn]; ll Dir_MST(int root, int V, int E) { ll ans = 0; while (true) //\u5982\u679c\u8fd8\u662f\u53ef\u884c\u7684\u8bdd { for (int i = 0; i < V; i++) { in[i] = INF; //\u7ed9\u4e88\u6bcf\u4e2a\u70b9\u7684\u5165\u8fb9\uff08\u5373\u7236\u5b50\u8fb9\uff09\u8fdb\u884c\u521d\u59cb\u5316 } /* (1)\u3001\u6700\u77ed\u5f27\u96c6\u5408E0 */ for (int i = 1; i <= E; i++) { int u = edge[i].u, v = edge[i].v;//\u7ec8\u70b9\u4e3a\u5b50\u8282\u70b9 if (edge[i].val < in[v] && u != v) //\u9876\u70b9v\u6709\u66f4\u5c0f\u7684\u5165\u8fb9\uff0cu!=v\u662f\u4e3a\u4e86\u786e\u4fdd\u7f29\u70b9\u4e4b\u540e\uff0c\u6211\u4eec\u7684\u73af\u5c06\u4f1a\u53d8\u6210\u70b9\u7684\u5f62\u5f0f { pre[v] = u; //\u8282\u70b9u\u6307\u5411v in[v] = edge[i].val; //\u6700\u5c0f\u5165\u8fb9 if (u == root) pos = i; //\u8fd9\u4e2a\u70b9\u5c31\u662f\u5b9e\u9645\u7684\u8d77\u70b9 } } /* (2)\u3001\u68c0\u67e5E0 */ for (int i = 0; i < V; i++) //\u5224\u65ad\u662f\u5426\u5b58\u5728\u6700\u5c0f\u6811\u5f62\u56fe { if (i == root) continue; //\u662f\u6839\u8282\u70b9\uff0c\u4e0d\u7ba1 if (in[i] == INF) return -1; //\u9664\u4e86\u6839\u8282\u70b9\u4ee5\u5916\uff0c\u6709\u70b9\u6ca1\u6709\u5165\u8fb9\uff0c\u5219\u6839\u672c\u65e0\u6cd5\u62b5\u8fbe\u5b83\uff0c\u8bf4\u660e\u662f\u72ec\u7acb\u7684\u70b9\uff0c\u4e00\u5b9a\u4e0d\u80fd\u6784\u6210\u6811\u5f62\u56fe } /* (3)\u3001\u6536\u7f29\u56fe\u4e2d\u7684\u6709\u5411\u73af\u5e76\u505a\u8d21\u732e */ int cnt = 0; //\u63a5\u4e0b\u6765\u8981\u53bb\u6c42\u73af\uff0c\u7528\u4ee5\u8bb0\u5f55\u73af\u7684\u4e2a\u6570 memset(id, -1, sizeof(id));//\u73af\u7f16\u53f7\uff0c\u7c7bbelong\u6570\u7ec4 memset(vis, -1, sizeof(vis)); in[root] = 0; for (int i = 0; i < V; i++) //\u6807\u8bb0\u6bcf\u4e2a\u73af { ans += in[i]; //\u52a0\u5165\u6bcf\u4e2a\u70b9\u7684\u5165\u8fb9\uff08\u65e2\u7136\u662f\u6700\u5c0f\u5165\u8fb9\uff0c\u6240\u4ee5\u80af\u5b9a\u7b26\u5408\u6700\u5c0f\u6811\u5f62\u56fe\u7684\u601d\u60f3\uff09 int v = i; //v\u4e00\u5f00\u59cb\u5148\u4ece\u7b2ci\u4e2a\u8282\u70b9\u8fdb\u53bb while (vis[v] != i && id[v] == -1 && v != root) //\u9000\u51fa\u7684\u6761\u4ef6\u6709\u201c\u5f62\u6210\u4e86\u4e00\u4e2a\u73af\u201d\u3001\u201c\u5230\u4e86\u4e00\u4e2a\u73af\u9000\u51fa\u201d\u3001\u201c\u5230\u4e86\u6839\u8282\u70b9\u9000\u51fa\u201d { vis[v] = i; v = pre[v]; } if (v != root && id[v] == -1) //\u5982\u679cv\u662froot\u5c31\u8bf4\u660e\u662f\u8fd4\u56de\u5230\u4e86\u6839\u8282\u70b9\uff0c\u662f\u6761\u94fe\uff0c\u6ca1\u73af\uff1b\u53c8\u6216\u8005\uff0c\u5b83\u5df2\u7ecf\u662f\u8fdb\u5165\u4e86\u5bf9\u5e94\u73af\u7684\u7f16\u53f7\u4e86\uff0c\u4e0d\u9700\u8981\u518d\u8dd1\u4e00\u8d9f\u4e86 { for (int u = pre[v]; u != v; u = pre[u]) //\u8dd1\u8fd9\u4e00\u5708\u7684\u73af { id[u] = cnt; //\u6807\u8bb0\u70b9u\u662f\u7b2c\u51e0\u4e2a\u73af } id[v] = cnt++; //\u5982\u679c\u518d\u9047\u5230\uff0c\u5c31\u662f\u4e0b\u4e2a\u70b9\u4e86 } } if (cnt == 0) return ans; //\u65e0\u73af\u7684\u60c5\u51b5\uff0c\u5c31\u8bf4\u660e\u5df2\u7ecf\u53d6\u5230\u4e86\u6700\u4f18\u89e3\uff0c\u76f4\u63a5\u8fd4\u56de\uff0c\u6216\u8005\u8bf4\u662f\u73af\u5df2\u7ecf\u6536\u7f29\u5230\u6ca1\u6709\u73af\u7684\u60c5\u51b5\u4e86 for (int i = 0; i < V; i++) { if (id[i] == -1) { id[i] = cnt++; //\u8fd9\u4e9b\u70b9\u662f\u73af\u5916\u7684\u70b9\uff0c\u662f\u94fe\u4e0a\u7684\u70b9\uff0c\u5355\u72ec\u518d\u7ed9\u4ed6\u4eec\u8d4b\u503c } } for (int i = 1; i <= E; i++) //\u51c6\u5907\u5f00\u59cb\u5efa\u7acb\u65b0\u56fe \u7f29\u70b9\uff0c\u91cd\u65b0\u6807\u8bb0 { int u = edge[i].u, v = edge[i].v; edge[i].u = id[u]; edge[i].v = id[v]; //\u5efa\u7acb\u65b0\u56fe\uff0c\u4ee5\u65b0\u7684\u70b9\u8fdb\u5165 if (id[u] != id[v]) edge[i].val -= in[v]; //\u4e3a\u4e86\u4e0d\u6539\u53d8\u539f\u6765\u7684\u5f0f\u5b50\uff0c\u4f7f\u5f97\u5c55\u5f00\u540e\u8fd8\u662f\u539f\u6765\u7684\u5f0f\u5b50,\u5373\u5bb9\u65a5\u539f\u7406\uff0c\u73af\u4e2d\u505a\u4e86\u8d21\u732e\u65b0\u8fb9\u5219\u51cf\u53bb\u5176\u503c } V = cnt; //\u4e4b\u540e\u7684\u70b9\u7684\u6570\u76ee root = id[root]; //\u65b0\u7684\u6839\u8282\u70b9\u7684\u5e8f\u53f7\uff0c\u56e0\u4e3aid[]\u7684\u6539\u53d8\uff0c\u6240\u4ee5\u6839\u8282\u70b9\u7684\u5e8f\u53f7\u4e5f\u6539\u53d8\u4e86 } return ans; } 3. \u65e0\u5411\u56fe\u7684\u751f\u6210\u6811 \u6c42\u65e0\u5411\u56fe\u7684\u751f\u6210\u6811\u4e2a\u6570: \u57fa\u5c14\u970d\u592b\u5b9a\u7406 \u5ea6\u6570\u77e9\u9635(n n) \uff1aD[i][i]\u4e3a\u70b9i\u7684\u5ea6 \u5176\u4ed6\u4f4d\u7f6e\u4e3a0 \u90bb\u63a5\u77e9\u9635(n n) : a[i][i]=0; a[i][j]=[i\u4e0ej\u76f8\u8fde] \u57fa\u5c14\u970d\u592b\u77e9\u9635 = \u5ea6\u6570\u77e9\u9635 - \u90bb\u63a5\u77e9\u9635 \u5373C=D-A:C[i][i]=i\u7684\u5ea6\u6570\uff0cC[i][j]=-1(i,j\u6709\u8fb9)\uff0cC[i][j]=0(\u5176\u4ed6) Matrix-Tree \u5b9a\u7406\uff1a \u4e00\u4e2an\u4e2a\u70b9m\u6761\u8fb9\u7684\u65e0\u5411\u56fe\u7684\u751f\u6210\u6811\u603b\u6570\u4e3a\u5176\u5bf9\u5e94\u7684\u57fa\u5c14\u970d\u592b\u77e9\u9635\u7684n-1\u9636\u4f59\u5b50\u5f0f(\u884c\u5217\u5f0f)\u3002 \u6c42\u884c\u5217\u5f0f\u53ef\u7528\u9ad8\u65af\u6d88\u5143\u5316\u4e3a\u4e09\u89d2\u9635\u6c42\u5bf9\u89d2\u79ef\u5373\u53ef 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #include <iostream> #include <cstdio> #include <cmath> #define LL long long using namespace std; const int MOD = 1e9+7; LL a[105][105]; int n, m, sign, du[105]; void solve(int N){//\u9ad8\u65af\u6d88\u5143 sign = 0; LL ans = 1; for(int i=1; i<N; i++){ for(int j=i+1; j<N; j++){//\u5f53\u524d\u4e4b\u540e\u7684\u6bcf\u4e00\u884c\u7b2c\u4e00\u4e2a\u975e0\u6570\u8981\u8f6c\u5316\u62100 int x=i, y=j; while( a[y][i] ){//\u5229\u7528gcd\u7684\u65b9\u6cd5\uff0c\u4e0d\u505c\u5730\u8fdb\u884c\u8f97\u8f6c\u76f8\u9664 LL t = a[x][i] / a[y][i]; for(int k=i; k<N; k++) a[x][k] = (a[x][k] - a[y][k] * t) % MOD; swap(x, y); } if(x != i){//\u5947\u6570\u6b21\u4ea4\u6362\uff0c\u5219D=-D'\u6574\u884c\u4ea4\u6362 for(int k=1; k<N; k++) swap(a[i][k], a[x][k]); sign ^= 1;//\u884c\u5217\u5f0f*-1 } } if( !a[i][i] ){//\u659c\u5bf9\u89d2\u4e2d\u6709\u4e00\u4e2a0\uff0c\u5219\u7ed3\u679c\u4e3a0 printf(\"0\\n\"); return ; } else ans = ans * a[i][i] % MOD; } if(sign != 0) ans *= -1; if(ans < 0) ans += MOD;// printf(\"%I64d\\n\", ans); return ; } int main(){ freopen (\"tcount.in\", \"r\", stdin); freopen (\"tcount.out\", \"w\", stdout); scanf(\"%d%d\", &n, &m); for(int i=1; i<=m; i++) { int x, y; scanf(\"%d%d\", &x, &y); a[x][y] = a[y][x] = -1; du[x]++; du[y]++; } for(int i=1; i<=n; i++) { a[i][i] = du[i]; }//a\u5219\u4e3a\u57fa\u5c14\u970d\u592b\u77e9\u9635 solve(n); return 0; } \u5c0f\u62d3\u5c55\uff1a\u9ad8\u65af\u6d88\u5143\u89e3\u51b3n\u4e2an\u5143\u4e00\u6b21\u65b9\u7a0b\u7ec4 \u6838\u5fc3\uff1a\u5316\u5de6\u4e0b\u4e3a0\u7684\u4e09\u89d2\u9635\uff0c\u501f\u7b2ci\u884c\u7684\u6570\u6e05\u7b2ci\u5217\u7684\uff08n-i\uff09\u4e2a0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 int n, pl; double a[1001][1001]; int main() { cin >> n; for (int i = 1; i <= n; i++) for (int j = 1; j <= n + 1; j++) cin >> a[i][j];//\u8f93\u5165\u7684\u662fn\u4e2a\u65b9\u7a0b\u7ec4\u6210\u7684n*(n+1)\u77e9\u9635\uff08\u7cfb\u6570\u77e9\u9635\u548c\u548c\u77e9\u9635\uff09 for (int i = 1; i <= n; i++) { pl = i; while (a[pl][i] == 0 && pl <= n) pl++; // \u5224\u65ad\u7b2ci\u5217\u9996\u5143\u7d20\u975e0\u7684\u6700\u4e0a\u884c\uff0c\u56e0\u4e3a\u7b2ci\u884c\u7b2ci\u5217\u5143\u7d20\u4e0d\u80fd\u4e3a0 if (pl == n + 1) { cout << \"No Solution\"; return 0; } //\u4e00\u76f4\u5224\u5230\u4e86n+1\u884c\uff0c\u53ef\u662f\u4e00\u5171\u624d\u53ea\u6709n\u884c\uff0c\u8bf4\u660e\u6709\u4e00\u5217\u5168\u4e3a0\uff0c\u65e0\u89e3 for (int j = 1; j <= n + 1; j++) //\u5c06\u7b2ci\u884c\u7b2ci\u5217\u5143\u7d20\u4e0d\u4e3a0\u7684\u90a3\u4e00\u884c\u4e0e\u5f53\u524d\u884c\u4ea4\u6362 swap(a[i][j], a[pl][j]); double k = a[i][i]; //\u8ba9\u7b2ci\u884c\u6bcf\u4e2a\u5143\u7d20\u90fd\u9664\u4ee5a[i][i]\u4f7f\u5f97a[i][i]\u4e3a1 for (int j = 1; j <= n + 1; j++) a[i][j] = a[i][j] / k; //\u5c06\u7b2ci\u884c\u7b2ci\u5217\u7684\u5143\u7d20\u6d88\u62101,\u6ce8\u610f\u540c\u884c\u8fdb\u884c\u540c\u6837\u7684\u64cd\u4f5c for (int j = 1; j <= n; j++) { if (i != j) //\u5c06\u7b2ci\u5217\u9664\u4e86\u7b2ci\u884c\u7684\u5143\u7d20\u5168\u6d88\u62100 { //\u65b9\u6cd5\u662f\u7b2cj\u884c\u6bcf\u4e2a\u5143\u7d20a[j][m]\u90fd\u51cf\u53bba[j][1]*a[i][m] double ki = a[j][i]; for (int m = 1; m <= n + 1; m++) a[j][m] = a[j][m] - ki * a[i][m]; } } } for (int i = 1; i <= n; i++) printf(\"%.2lf\\n\", a[i][n + 1]); return 0; } \u540c\u6837\uff0c\u9ad8\u65af\u6d88\u5143\u53ef\u4ee5\u6c42\u89e3\u77e9\u9635\u884c\u5217\u5f0f\u3001\u77e9\u9635\u7684\u79e9\u7b49\u95ee\u9898","title":"tip:"},{"location":"DataStructure/graph/ShortestRoad/","text":"\u56fe\u7684\u6700\u77ed\u8def\u5f84\u7b97\u6cd5 \u00b6 \u6838\u5fc3\uff1a\u9010\u70b9\u677e\u5f1b \u5f53\u9700\u8981\u6d89\u53ca\u5230\u6c42\u56fe\u7684\u6700\u77ed\u8def\u76f8\u5173\u7b97\u6cd5\u65f6 \u4e00\u822c\u90fd\u662f\u5bf9\u70b9\u64cd\u4f5c \u7531\u4e8e\u590d\u6742\u5ea6\u4e00\u822c\u4e3a\u6307\u6570 \u6545\u8fd9\u7c7b\u95ee\u9898\u6570\u636e\u8303\u56f4\u4e00\u822c\u57281000\u70b9\u4ee5\u5185 \u5e38\u7528\u90bb\u63a5\u77e9\u9635\u5b58\u50a8\u56fe \u800cSPAF\u9700\u8981\u50a8\u5b58\u62d3\u6251\u5173\u7cfb\uff0c\u6545\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe\uff01 1.Dijstra(\u4e00\u822c\u6c42\u5355\u6e90\u70b9\u6700\u77ed\u8dddO( n^2 n^2 ),\u6240\u6709\u70b9\u65f6\u4e3aO( n^3 n^3 )) \u00b6 \u4e0d\u80fd\u6c42\u542b\u8d1f\u6743\u8fb9\u7684\u56fe 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 void Dijkstra(int s)//\u8f93\u5165\u53c2\u6570\u4e3a\u6e90\u70b9 { memset(vis, 0, sizeof(vis));//visit\u6570\u7ec4\u6807\u8bb0\u677e\u5f1b\u96c6\u5408\u4e2d\u7684\u70b9 for (int i = 1; i <= n; i++) { sum[i] = inf;//\u6c42\u5355\u6e90\u70b9\u65f6\uff0csum\u4e3a\u4e00\u7ef4 } sum[s]=0; vis[s] = 1; for (int i = 1; i <= n; i++)//n\u6b21\u677e\u5f1b { int minn = inf,pos; for (int j = 1; j <= n; j++)//\u4ece\u672a\u677e\u5f1b\u96c6\u5408\u4e2d\u64c2\u9009\u6700\u5c0f { if (sum[j] < minn && !vis[j]) { pos = j; minn = sum[j]; } } vis[pos] = 1;//\u4ee5\u8be5\u70b9\u5bf9\u5176\u4ed6\u70b9\u8fdb\u884c\u677e\u5f1b for (int j = 1; j <= n; j++) { if (sum[pos] + dist[pos][j] < sum[j] && !vis[j])//\u8fd9\u91cc\u7684\u677e\u5f1b\u6761\u4ef6\u56e0\u9898\u800c\u53d8 { sum[j] = sum[pos] + dist[pos][j]; } } } \uff5d 2.Florid(\u4efb\u610f\u4e24\u70b9\u6700\u77ed\u8def\u5f84\uff0c\u76f4\u63a5\u66b4\u529b\u9010\u70b9\u677e\u5f1b\uff0cO( n^3 n^3 )) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 void Floryd() { for (int k = 1; k <= n; k++)//\u4ece\u63d2\u7b2c\u4e00\u70b9\u5230\u63d2\u7b2c1-n\u70b9 { for (int i = 1; i <= n; i++) { for (int j = 1; j <= n; j++) { dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j]);//\u8fd9\u91cc\u7684\u677e\u5f1b\u6761\u4ef6\u56e0\u9898\u800c\u53d8 } } } } 3.Spfa(\u5355\u6e90\u6700\u77ed\u8def\u5f84\uff0c\u53ef\u4ee5\u89e3\u51b3\u8d1f\u6743\u8fb9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(nm),\u7a7a\u95f4\u590d\u6742\u5ea6O(m)) \u00b6 spfa\u7528\u7c7bbfs\u7b97\u6cd5\uff0c\u9700\u8981\u63d0\u4f9b\u4e0b\u4e00\u4e2a\u8fdb\u961f\u7684\u70b9\uff0c\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u50a8 spfa\u6cd5\u4e4b\u6240\u4ee5\u53ef\u4ee5\u5904\u7406\u8d1f\u6743\uff0c\u800cDijstra\u548cFloryd\u4e0d\u80fd\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a Dijstra\u548cFloryd\u6ca1\u6709\u8bb0\u5f55\u76f4\u63a5\u62d3\u6251\u5173\u7cfb\uff0c\u5355\u7eaf\u6240\u6709\u70b9\u677e\u5f1b\u6240\u6709\u70b9\uff0c\u4ee5Dijstra\u4e3a\u4f8b\uff0c \u82e5\u662f\u677e\u5f1b\u4e2d\u4f7f\u7528visit\uff0c\u5219\u4f1a\u5c11\u7b97\u5176\u4ed6\u70b9\u5230\u5df2\u677e\u5f1b\u96c6\u5408\u70b9\u7684\u8d1f\u6743\u800c\u4f7f\u6700\u77ed\u8def\u5f84\u53d8\u5927 \u82e5\u662f\u677e\u5f1b\u4e2d\u4e0d\u4f7f\u7528visit\uff0c\u5219\u4f1a\u91cd\u590d\u8d70\u4e00\u6761\u8d1f\u6743\u7684\u8fb9\u4f7f\u5f97\u6700\u77ed\u8def\u5f84\u66f4\u77ed \u800cSPFA\u91c7\u7528\u76f4\u63a5\u62d3\u6251\u5173\u7cfb\uff08\u5373\u94fe\u5f0f\u524d\u5411\u661f\uff09\u8fdb\u884cbfs\uff0c\u907f\u514d\u4e86\u8fd9\u79cd\u95ee\u9898 SPFA\u8fd8\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u662f\u5426\u5b58\u5728\u8d1f\u73af\uff1a\u82e5\u4e00\u4e2a\u70b9\u5165\u961f\u4e86\u4e24\u6b21\uff0c\u5373\u8bb0\u5f55\u6e90\u70b9\u5230\u6bcf\u4e00\u70b9\u7ecf\u8fc7\u7684\u70b9\u6570\uff08cnt[v]=cnt[u]+1\uff09\uff0c\u82e5cnt[v]>=n(\u70b9\u6570)\uff0c\u5219\u8bf4\u660e\u5b58\u5728\u8d1f\u73af 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 struct Edge { int from, to, weight, next; //Edge(int from,int to,int dd,int next):from(from),to(to),dd(dd),next(next){} } Edge edge[MAXN*MAXN]; int head[MAXN], edgenum; bool vis[MAXN]; int dist[MAXN][MAXN]; void init() { edgenum = 0; memset(head, -1, sizeof(head)); } void addEdge(int u, int v, int dist) { Edge E; E.from=u; E.to=v; E.weight=dist; E.next=head[u]; edge[edgenum] = E; head[u] = edgenum++; } void Spfa(int s) { queue<int> q; memset(vis,0,sizeof(vis)); dist[s]=0; vis[s]=1; q.push(s); while(!q.empty()) { int u=q.front(); q.pop(); visit[u]=1; for(int i=head[u];i!=-1;i=edge[i].next) { Edge E = edge[i]; if (dist[E.to] > dist[u] + E.weight)//\u677e\u5f1b\u6240\u6709\u8fde\u7740\u7684\u70b9\uff0c\u4f46\u53ea\u628a\u672a\u5165\u8fc7\u961f\u7684\u5165\u961f { dist[E.to] = dist[u] + E.weight; if (!vis[E.to]) { vis[E.to] = 1; Q.push(E.to); } } } } } spfa\u88ab\u79f0\u4e3a\"\u961f\u5217\u4f18\u5316\u7684Bellman-Ford\u7b97\u6cd5\" Bellman-Ford\u6d41\u7a0b\u5982\u4e0b\uff1a (1)\u626b\u63cf\u6240\u6709\u8fb9(x,y,z)\uff0c\u82e5dist[y]>dist[x]+z,\u5219\u7528dist[x]+z\u66f4\u65b0dits[y] (2)\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u76f4\u5230\u6ca1\u6709\u66f4\u65b0\u64cd\u4f5c\u53d1\u751f\uff08O(nm)\uff09 (3)\u82e5\u9700\u8981\u5224\u8d1f\u73af\uff0c\u53ea\u9700\u8981\u770b\u8fed\u4ee3\u6b21\u6570\u3002\u82e5\u5728n-1\u8f6e\u8fed\u4ee3\u5185\u7ed3\u675f\uff08\u6240\u6709\u8fb9\u4ecd\u6ee1\u8db3\u4e09\u89d2\u4e0d\u7b49\u5f0f\uff09\uff0c\u5219\u56fe\u4e2d\u65e0\u8d1f\u73af\uff1b\u82e5\u7ecf\u8fc7n\u8f6e\u8fed\u4ee3\uff0c\u7b97\u6cd5\u4ecd\u672a\u7ed3\u675f\uff08\u4ecd\u6709\u53ef\u80fd\u4ea7\u751f\u66f4\u65b0\u7684\u8fb9\uff09\uff0c\u5219\u56fe\u4e2d\u5b58\u5728\u8d1f\u73af Tip: \u00b6 attention: * \u8fd9\u4e09\u79cd\u65b9\u6cd5\u53ef\u90fd\u5bf9\u5e94\u6709\u5411\u56fe\u548c\u65e0\u5411\u56fe\uff0c\u65e0\u5411\u56fe\u53ea\u9700\u53cc\u5411\u5efa\u8fb9\u5373\u53ef \u6700\u77ed\u8def\u5f84\u7b97\u6cd5\u7684\u5e94\u7528\uff1a \u9010\u70b9\u677e\u5f1b\u7684\u7b97\u6cd5\uff0c\u53ef\u4ee5\u66f4\u6539\u7ef4\u62a4\u6bd4\u8f83\u7684\u76ee\u6807\uff08\u6700\u77ed\u8def\uff09 \u901a\u8fc7\u6700\u77ed\u8def\u5f84\u53ef\u4ee5\u6c42\u6700\u5c0f\u73af\uff08\u679a\u4e3e\u6d88\u8fb9\u8dd1n\u6b21Dijstra\u6216\u4e00\u6b21Floryd\u5185\u518d\u52a0\u4e0a\u5bf9\u5df2\u63d2\u5165\u70b9\uff08\u5373k\uff09\u7684\u6700\u5c0f\u73af\u8def\u7ef4\u62a4\uff09\uff0c\u666e\u901a\u7684\u5224\u73af\u53ea\u9700\u8981\u62d3\u6251\u6392\u5e8f\u5373\u53ef\uff08\u73af\u4e0a\u7684\u70b9\u5165\u5ea6\u4e3a1\uff0c\u65e0\u6cd5\u5165\u961f\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 void Floryd() { ans=inf; for (int k = 1; k <= n; k++)//\u4ece\u63d2\u7b2c\u4e00\u70b9\u5230\u63d2\u7b2c1-n\u70b9 { for(int i=1;i<k;i++) { for(int j=1;j<i;j++) { ans=min(ans,a[i][k]+a[k][j]+dist[i][j]);//a\u4e3a\u539f\u56fe\u5355\u8fb9\u957f\u5ea6 } } for (int i = 1; i <= n; i++) { for (int j = 1; j <= n; j++) { dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j]);//\u8fd9\u91cc\u7684\u677e\u5f1b\u6761\u4ef6\u56e0\u9898\u800c\u53d8 } } } }","title":"\u6700\u77ed\u8def"},{"location":"DataStructure/graph/ShortestRoad/#_1","text":"\u6838\u5fc3\uff1a\u9010\u70b9\u677e\u5f1b \u5f53\u9700\u8981\u6d89\u53ca\u5230\u6c42\u56fe\u7684\u6700\u77ed\u8def\u76f8\u5173\u7b97\u6cd5\u65f6 \u4e00\u822c\u90fd\u662f\u5bf9\u70b9\u64cd\u4f5c \u7531\u4e8e\u590d\u6742\u5ea6\u4e00\u822c\u4e3a\u6307\u6570 \u6545\u8fd9\u7c7b\u95ee\u9898\u6570\u636e\u8303\u56f4\u4e00\u822c\u57281000\u70b9\u4ee5\u5185 \u5e38\u7528\u90bb\u63a5\u77e9\u9635\u5b58\u50a8\u56fe \u800cSPAF\u9700\u8981\u50a8\u5b58\u62d3\u6251\u5173\u7cfb\uff0c\u6545\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe\uff01","title":"\u56fe\u7684\u6700\u77ed\u8def\u5f84\u7b97\u6cd5"},{"location":"DataStructure/graph/ShortestRoad/#1dijstraon2n2on3n3","text":"\u4e0d\u80fd\u6c42\u542b\u8d1f\u6743\u8fb9\u7684\u56fe 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 void Dijkstra(int s)//\u8f93\u5165\u53c2\u6570\u4e3a\u6e90\u70b9 { memset(vis, 0, sizeof(vis));//visit\u6570\u7ec4\u6807\u8bb0\u677e\u5f1b\u96c6\u5408\u4e2d\u7684\u70b9 for (int i = 1; i <= n; i++) { sum[i] = inf;//\u6c42\u5355\u6e90\u70b9\u65f6\uff0csum\u4e3a\u4e00\u7ef4 } sum[s]=0; vis[s] = 1; for (int i = 1; i <= n; i++)//n\u6b21\u677e\u5f1b { int minn = inf,pos; for (int j = 1; j <= n; j++)//\u4ece\u672a\u677e\u5f1b\u96c6\u5408\u4e2d\u64c2\u9009\u6700\u5c0f { if (sum[j] < minn && !vis[j]) { pos = j; minn = sum[j]; } } vis[pos] = 1;//\u4ee5\u8be5\u70b9\u5bf9\u5176\u4ed6\u70b9\u8fdb\u884c\u677e\u5f1b for (int j = 1; j <= n; j++) { if (sum[pos] + dist[pos][j] < sum[j] && !vis[j])//\u8fd9\u91cc\u7684\u677e\u5f1b\u6761\u4ef6\u56e0\u9898\u800c\u53d8 { sum[j] = sum[pos] + dist[pos][j]; } } } \uff5d","title":"1.Dijstra(\u4e00\u822c\u6c42\u5355\u6e90\u70b9\u6700\u77ed\u8dddO(n^2n^2),\u6240\u6709\u70b9\u65f6\u4e3aO(n^3n^3))"},{"location":"DataStructure/graph/ShortestRoad/#2floridon3n3","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 void Floryd() { for (int k = 1; k <= n; k++)//\u4ece\u63d2\u7b2c\u4e00\u70b9\u5230\u63d2\u7b2c1-n\u70b9 { for (int i = 1; i <= n; i++) { for (int j = 1; j <= n; j++) { dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j]);//\u8fd9\u91cc\u7684\u677e\u5f1b\u6761\u4ef6\u56e0\u9898\u800c\u53d8 } } } }","title":"2.Florid(\u4efb\u610f\u4e24\u70b9\u6700\u77ed\u8def\u5f84\uff0c\u76f4\u63a5\u66b4\u529b\u9010\u70b9\u677e\u5f1b\uff0cO(n^3n^3))"},{"location":"DataStructure/graph/ShortestRoad/#3spfaonmom","text":"spfa\u7528\u7c7bbfs\u7b97\u6cd5\uff0c\u9700\u8981\u63d0\u4f9b\u4e0b\u4e00\u4e2a\u8fdb\u961f\u7684\u70b9\uff0c\u7528\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u50a8 spfa\u6cd5\u4e4b\u6240\u4ee5\u53ef\u4ee5\u5904\u7406\u8d1f\u6743\uff0c\u800cDijstra\u548cFloryd\u4e0d\u80fd\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a Dijstra\u548cFloryd\u6ca1\u6709\u8bb0\u5f55\u76f4\u63a5\u62d3\u6251\u5173\u7cfb\uff0c\u5355\u7eaf\u6240\u6709\u70b9\u677e\u5f1b\u6240\u6709\u70b9\uff0c\u4ee5Dijstra\u4e3a\u4f8b\uff0c \u82e5\u662f\u677e\u5f1b\u4e2d\u4f7f\u7528visit\uff0c\u5219\u4f1a\u5c11\u7b97\u5176\u4ed6\u70b9\u5230\u5df2\u677e\u5f1b\u96c6\u5408\u70b9\u7684\u8d1f\u6743\u800c\u4f7f\u6700\u77ed\u8def\u5f84\u53d8\u5927 \u82e5\u662f\u677e\u5f1b\u4e2d\u4e0d\u4f7f\u7528visit\uff0c\u5219\u4f1a\u91cd\u590d\u8d70\u4e00\u6761\u8d1f\u6743\u7684\u8fb9\u4f7f\u5f97\u6700\u77ed\u8def\u5f84\u66f4\u77ed \u800cSPFA\u91c7\u7528\u76f4\u63a5\u62d3\u6251\u5173\u7cfb\uff08\u5373\u94fe\u5f0f\u524d\u5411\u661f\uff09\u8fdb\u884cbfs\uff0c\u907f\u514d\u4e86\u8fd9\u79cd\u95ee\u9898 SPFA\u8fd8\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u662f\u5426\u5b58\u5728\u8d1f\u73af\uff1a\u82e5\u4e00\u4e2a\u70b9\u5165\u961f\u4e86\u4e24\u6b21\uff0c\u5373\u8bb0\u5f55\u6e90\u70b9\u5230\u6bcf\u4e00\u70b9\u7ecf\u8fc7\u7684\u70b9\u6570\uff08cnt[v]=cnt[u]+1\uff09\uff0c\u82e5cnt[v]>=n(\u70b9\u6570)\uff0c\u5219\u8bf4\u660e\u5b58\u5728\u8d1f\u73af 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 struct Edge { int from, to, weight, next; //Edge(int from,int to,int dd,int next):from(from),to(to),dd(dd),next(next){} } Edge edge[MAXN*MAXN]; int head[MAXN], edgenum; bool vis[MAXN]; int dist[MAXN][MAXN]; void init() { edgenum = 0; memset(head, -1, sizeof(head)); } void addEdge(int u, int v, int dist) { Edge E; E.from=u; E.to=v; E.weight=dist; E.next=head[u]; edge[edgenum] = E; head[u] = edgenum++; } void Spfa(int s) { queue<int> q; memset(vis,0,sizeof(vis)); dist[s]=0; vis[s]=1; q.push(s); while(!q.empty()) { int u=q.front(); q.pop(); visit[u]=1; for(int i=head[u];i!=-1;i=edge[i].next) { Edge E = edge[i]; if (dist[E.to] > dist[u] + E.weight)//\u677e\u5f1b\u6240\u6709\u8fde\u7740\u7684\u70b9\uff0c\u4f46\u53ea\u628a\u672a\u5165\u8fc7\u961f\u7684\u5165\u961f { dist[E.to] = dist[u] + E.weight; if (!vis[E.to]) { vis[E.to] = 1; Q.push(E.to); } } } } } spfa\u88ab\u79f0\u4e3a\"\u961f\u5217\u4f18\u5316\u7684Bellman-Ford\u7b97\u6cd5\" Bellman-Ford\u6d41\u7a0b\u5982\u4e0b\uff1a (1)\u626b\u63cf\u6240\u6709\u8fb9(x,y,z)\uff0c\u82e5dist[y]>dist[x]+z,\u5219\u7528dist[x]+z\u66f4\u65b0dits[y] (2)\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u76f4\u5230\u6ca1\u6709\u66f4\u65b0\u64cd\u4f5c\u53d1\u751f\uff08O(nm)\uff09 (3)\u82e5\u9700\u8981\u5224\u8d1f\u73af\uff0c\u53ea\u9700\u8981\u770b\u8fed\u4ee3\u6b21\u6570\u3002\u82e5\u5728n-1\u8f6e\u8fed\u4ee3\u5185\u7ed3\u675f\uff08\u6240\u6709\u8fb9\u4ecd\u6ee1\u8db3\u4e09\u89d2\u4e0d\u7b49\u5f0f\uff09\uff0c\u5219\u56fe\u4e2d\u65e0\u8d1f\u73af\uff1b\u82e5\u7ecf\u8fc7n\u8f6e\u8fed\u4ee3\uff0c\u7b97\u6cd5\u4ecd\u672a\u7ed3\u675f\uff08\u4ecd\u6709\u53ef\u80fd\u4ea7\u751f\u66f4\u65b0\u7684\u8fb9\uff09\uff0c\u5219\u56fe\u4e2d\u5b58\u5728\u8d1f\u73af","title":"3.Spfa(\u5355\u6e90\u6700\u77ed\u8def\u5f84\uff0c\u53ef\u4ee5\u89e3\u51b3\u8d1f\u6743\u8fb9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(nm),\u7a7a\u95f4\u590d\u6742\u5ea6O(m))"},{"location":"DataStructure/graph/ShortestRoad/#tip","text":"attention: * \u8fd9\u4e09\u79cd\u65b9\u6cd5\u53ef\u90fd\u5bf9\u5e94\u6709\u5411\u56fe\u548c\u65e0\u5411\u56fe\uff0c\u65e0\u5411\u56fe\u53ea\u9700\u53cc\u5411\u5efa\u8fb9\u5373\u53ef \u6700\u77ed\u8def\u5f84\u7b97\u6cd5\u7684\u5e94\u7528\uff1a \u9010\u70b9\u677e\u5f1b\u7684\u7b97\u6cd5\uff0c\u53ef\u4ee5\u66f4\u6539\u7ef4\u62a4\u6bd4\u8f83\u7684\u76ee\u6807\uff08\u6700\u77ed\u8def\uff09 \u901a\u8fc7\u6700\u77ed\u8def\u5f84\u53ef\u4ee5\u6c42\u6700\u5c0f\u73af\uff08\u679a\u4e3e\u6d88\u8fb9\u8dd1n\u6b21Dijstra\u6216\u4e00\u6b21Floryd\u5185\u518d\u52a0\u4e0a\u5bf9\u5df2\u63d2\u5165\u70b9\uff08\u5373k\uff09\u7684\u6700\u5c0f\u73af\u8def\u7ef4\u62a4\uff09\uff0c\u666e\u901a\u7684\u5224\u73af\u53ea\u9700\u8981\u62d3\u6251\u6392\u5e8f\u5373\u53ef\uff08\u73af\u4e0a\u7684\u70b9\u5165\u5ea6\u4e3a1\uff0c\u65e0\u6cd5\u5165\u961f\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 void Floryd() { ans=inf; for (int k = 1; k <= n; k++)//\u4ece\u63d2\u7b2c\u4e00\u70b9\u5230\u63d2\u7b2c1-n\u70b9 { for(int i=1;i<k;i++) { for(int j=1;j<i;j++) { ans=min(ans,a[i][k]+a[k][j]+dist[i][j]);//a\u4e3a\u539f\u56fe\u5355\u8fb9\u957f\u5ea6 } } for (int i = 1; i <= n; i++) { for (int j = 1; j <= n; j++) { dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j]);//\u8fd9\u91cc\u7684\u677e\u5f1b\u6761\u4ef6\u56e0\u9898\u800c\u53d8 } } } }","title":"Tip:"},{"location":"DataStructure/graph/bipartite/","text":"\u4e8c\u5206\u56fe \u00b6 \u4e8c\u5206\u56fe\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u56feG = \uff08V, E\uff09\uff0c\u82e5\u80fd\u5c06\u5176\u70b9\u96c6\u5206\u4e3a\u4e24\u4e2a\u4e92\u4e0d\u76f8\u4ea4\u7684\u4e24\u4e2a\u5b50\u96c6X\u3001Y\uff0c\u4f7f\u5f97X\u2229Y = \u2205\uff0c\u4e14\u5bf9\u4e8eG\u7684\u8fb9\u96c6V\uff0c\u82e5\u5176\u6240\u6709\u8fb9\u7684\u9876\u70b9\u5168\u90e8\u4e00\u4fa7\u5c5e\u4e8eX\uff0c\u4e00\u4fa7\u5c5e\u4e8eY\uff0c\u5219\u79f0\u56feG\u4e3a\u4e00\u4e2a\u4e8c\u5206\u56fe\u3002 \u4e8c\u5206\u56fe\u5224\u5b9a\uff1a\u65e0\u5947\u73af\uff0c\u53ef\u4ee5\u7528\u9ed1\u767d\u67d3\u8272\u5224\u65ad\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 //\u5224\u65ad\u56fe\u4e2d\u662f\u5426\u6709\u5947\u73af\uff0c\u5373\u5224\u65ad\u662f\u5426\u4e3a\u4e8c\u5206\u56fe struct Edge { int from, to, next, weigh; } edge[10*maxn]; void addedge(int u,int v) { Edge e; e.from=u; e.to=v; e.next=head[u]; edge[enum]=e; head[u]=enum++; } int n,m,s,t,color[maxn]; int bfs()//bfs\u67d3\u8272 { color[1]=0; queue<int>q; q.push(1); while(!q.empty()){ int u=q.front();q.pop(); for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(color[v]==-1) { color[v]=color[u]^1;/\u672a\u67d3\u8272\u5219\u67d3\u53cd\u8272 q.push(v); } else if(color[v]==color[u])//\u5df2\u67d3\u8272\u5224\u65ad\u8272\u5f02 return 0;//\u53ea\u6709\u5947\u73af\u624d\u4f1a\u51fa\u73b0\u76f8\u90bb\u540c\u8272\u7684\u60c5\u51b5\uff08\u6709\u5947\u73af\uff0c\u975e\u4e8c\u5206\u56fe\uff09 } } return 1; } \u5339\u914d\uff1a \u5bf9\u4e8e\u4e00\u4e2a\u4e8c\u5206\u56feG\u7684\u5b50\u56feM, \u82e5M\u7684\u8fb9\u96c6E\u7684\u7684\u4efb\u610f\u4e24\u6761\u8fb9\u90fd\u4e0d\u8fde\u63a5\u540c\u4e00\u4e2a\u9876\u70b9\uff0c\u5219\u79f0M\u4e3aG\u7684\u4e00\u4e2a\u5339\u914d\u3002 \u6700\u5927\u5339\u914d\uff1a\u82e5\u4e8c\u5206\u56feG\u7684\u4e00\u4e2a\u5339\u914dM\u4e3a\u5176\u8fb9\u6570\u6700\u591a\u7684\u5339\u914d\uff0c\u5219\u79f0M\u4e3aG\u7684\u6700\u5927\u5339\u914d\u3002 \u6700\u5927\u5339\u914d\u7684\u6c42\u6cd5\uff1a * \u5308\u7259\u5229\u7b97\u6cd5\uff1b * \u7f51\u7edc\u6d41\uff1a\u6e90\u70b9\u5230\u5de6\u4fa7\u70b9\uff0c\u5de6\u4fa7\u70b9\u5230\u53f3\u4fa7\u70b9\uff0c\u53f3\u4fa7\u70b9\u5230\u6c47\u70b9\u95f4\u90fd\u5efa\u6d41\u91cf\u4e3a1\u7684\u8fb9\uff0c\u6700\u5927\u6d41\u5373\u4e3a\u6700\u5927\u5339\u914d\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 //\u7b2c\u4e8c\u6b21\u4e16\u754c\u5927\u6218\u65f6\u671f\uff0c\u82f1\u56fd\u7687\u5bb6\u7a7a\u519b\u4ece\u6ca6\u9677\u56fd\u5f81\u52df\u4e86\u5927\u91cf\u5916\u7c4d\u98de\u884c\u5458\u3002 //\u7531\u7687\u5bb6\u7a7a\u519b\u6d3e\u51fa\u7684\u6bcf\u4e00\u67b6\u98de\u673a\u90fd\u9700\u8981\u914d\u5907\u5728\u822a\u884c\u6280\u80fd\u548c\u8bed\u8a00\u4e0a\u80fd\u4e92\u76f8\u914d\u5408\u76842\u540d\u98de\u884c\u5458\uff0c\u5176\u4e2d1\u540d\u662f\u82f1\u56fd\u98de\u884c\u5458\uff0c\u53e61\u540d\u662f\u5916\u7c4d\u98de\u884c\u5458\u3002 //\u5728\u4f17\u591a\u7684\u98de\u884c\u5458\u4e2d\uff0c\u6bcf\u4e00\u540d\u5916\u7c4d\u98de\u884c\u5458\u90fd\u53ef\u4ee5\u4e0e\u5176\u4ed6\u82e5\u5e72\u540d\u82f1\u56fd\u98de\u884c\u5458\u5f88\u597d\u5730\u914d\u5408\u3002\u5982\u4f55\u9009\u62e9\u914d\u5bf9\u98de\u884c\u7684\u98de\u884c\u5458\u624d\u80fd\u4f7f\u4e00\u6b21\u6d3e\u51fa\u6700\u591a\u7684\u98de\u673a\u3002 //\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u5916\u7c4d\u98de\u884c\u5458\u4e0e\u82f1\u56fd\u98de\u884c\u5458\u7684\u914d\u5408\u60c5\u51b5\uff0c\u8bd5\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u627e\u51fa\u6700\u4f73\u98de\u884c\u5458\u914d\u5bf9\u65b9\u6848\uff0c\u4f7f\u7687\u5bb6\u7a7a\u519b\u4e00\u6b21\u80fd\u6d3e\u51fa\u6700\u591a\u7684\u98de\u673a \u3002 //\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u5916\u7c4d\u98de\u884c\u5458\u4e0e\u82f1\u56fd\u98de\u884c\u5458\u7684\u914d\u5408\u60c5\u51b5\uff0c\u7f16\u7a0b\u627e\u51fa\u4e00\u4e2a\u6700\u4f73\u98de\u884c\u5458\u914d\u5bf9\u65b9\u6848\uff0c\u4f7f\u7687\u5bb6\u7a7a\u519b\u4e00\u6b21\u80fd\u6d3e\u51fa\u6700\u591a\u7684\u98de\u673a\u3002 //Input //\u7b2c1\u884c\u67092\u4e2a\u6b63\u6574\u6570 m \u548c n\u3002n \u662f\u7687\u5bb6\u7a7a\u519b\u7684\u98de\u884c \u5458\u603b\u6570(n < 100); //m \u662f\u5916\u7c4d\u98de\u884c\u5458\u6570\u3002 //\u5916\u7c4d\u98de\u884c\u5458\u7f16\u53f7\u4e3a 1~m; //\u82f1\u56fd\u98de\u884c\u5458\u7f16\u53f7\u4e3a m + 1~n\u3002 //\u63a5\u4e0b\u6765\u6bcf\u884c\u6709 2 \u4e2a\u6b63\u6574\u6570 i \u548c j\uff0c\u8868\u793a\u5916\u7c4d\u98de\u884c\u5458 i \u53ef\u4ee5\u548c\u82f1\u56fd\u98de\u884c\u5458 j \u914d\u5408\u3002 //\u8f93\u5165\u6700\u540e\u4ee5 2 \u4e2a - 1 \u7ed3\u675f\u3002 //Output\u7b2c 1 \u884c\u662f\u6700\u4f73\u98de\u884c \u5458\u914d\u5bf9\u65b9\u6848\u4e00\u6b21\u80fd\u6d3e\u51fa\u7684\u6700\u591a\u7684\u98de\u673a\u6570 M\u3002 //\u5982\u679c\u6240\u6c42\u7684\u6700\u4f73\u98de\u884c\u5458\u914d\u5bf9\u65b9\u6848\u4e0d\u5b58\u5728\uff0c\u5219\u8f93\u51fa\u2018No Solution!\u2019\u3002 // //Sample Input // // 5 10 // 1 7 // 1 8 // 2 6 // 2 9 // 2 10 // 3 7 // 3 8 // 4 7 // 4 8 // 5 10 // - 1 - 1 // //Sample Output // 4 //\u5308\u7259\u5229\u7b97\u6cd5 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<vector> using namespace std; const int N=105; int n,m; int link[N]; //link[y]=x,\u5373y\u4e0ex\u5339\u914d bool vis[N]; vector<int>v[N]; bool can(int u) { for(int i=0;i<v[u].size();i++) { int t=v[u][i]; if(!vis[t]) { vis[t]=true; if(link[t]==-1||can(link[t])) { //\u5982\u679ct\u5c1a\u672a\u88ab\u5339\u914d\uff0c\u6216\u8005link[t]\u5373x\u53ef\u4ee5\u627e\u5230\u5176\u4ed6\u80fd\u591f\u66ff\u4ee3\u7684\u70b9,\u5219\u628at\u70b9\u8ba9\u7ed9u\u5339\u914d link[t]=u; return true; } } } return false; } int max_match() { memset(link,-1,sizeof(link)); int ans=0; for(int i=1;i<=n;i++) { memset(vis,false,sizeof(vis)); if(can(i)) ans++; } return ans; } int main() { scanf(\"%d%d\",&n,&m); int a,b; while(~scanf(\"%d%d\",&a,&b)) { if(a==-1&&b==-1) break; v[a].push_back(b); } int t=max_match(); if(t==0) puts(\"No Solution!\"); else printf(\"%d\\n\",t); system(\"pause\"); return 0; } \u5176\u5b83\u6027\u8d28 \u6700\u5c0f\u70b9\u8986\u76d6\u96c6\uff1a\u70b9\u8986\u76d6\u96c6\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u70b9\u96c6\uff0c\u4e14\u56fe\u4e2d\u6240\u6709\u7684\u8fb9\u90fd\u81f3\u5c11\u6709\u4e00\u4e2a\u7aef\u70b9\u5728\u70b9\u96c6\u4e2d\u3002\u6700\u5c0f\u70b9\u8986\u76d6\u96c6\u5373\u4e3a\u70b9\u6570\u6700\u5c0f\u7684\u70b9\u8986\u76d6\u96c6\u3002 \u4e8c\u5206\u56fe\u7684\u6700\u5c0f\u70b9\u8986\u76d6\u70b9\u6570 = \u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d\uff08\u8bc1\u660e\u89c1K\u00f6nig\u5b9a\u7406\uff09 \u6700\u5c11\u8fb9\u8986\u76d6\u96c6\uff1a\u8fb9\u8986\u76d6\u96c6\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u8fb9\u96c6\uff0c\u4e14\u56fe\u4e2d\u6240\u6709\u7684\u70b9\u90fd\u81f3\u5c11\u4e3a\u8fb9\u96c6\u4e2d\u4e00\u6761\u8fb9\u7684\u7aef\u70b9\u3002\u6700\u5c0f\u8fb9\u8986\u76d6\u96c6\u5373\u4e3a\u8fb9\u6570\u6700\u5c11\u7684\u8fb9\u8986\u76d6\u96c6\u3002 \u4e8c\u5206\u56fe\u7684\u6700\u5c11\u8fb9\u8986\u76d6\u8fb9\u6570 = \u70b9\u6570 - \u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d \u6700\u5927\u72ec\u7acb\u96c6\uff1a\u72ec\u7acb\u96c6\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u70b9\u96c6\uff0c\u4e14\u8fd9\u4e9b\u70b9\u4e4b\u95f4\u4e24\u4e24\u65e0\u8fb9\u76f8\u8fde\u3002\u6700\u5927\u72ec\u7acb\u96c6\u662f\u6307\u70b9\u6570\u6700\u591a\u7684\u72ec\u7acb\u96c6\u3002 \u4e8c\u5206\u56fe\u7684\u6700\u5927\u72ec\u7acb\u96c6\u70b9\u6570 = \u70b9\u6570 - \u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d \u6700\u5927\u56e2(\u6700\u5927\u5b8c\u5168\u5b50\u56fe)\uff1a\u56e2\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u70b9\u96c6\uff0c\u4e14\u8fd9\u4e9b\u70b9\u4e4b\u95f4\u4e24\u4e24\u6709\u8fb9\u76f8\u8fde\uff08\u5b8c\u5168\u56fe\uff09\u3002\u6700\u5927\u56e2\u662f\u6307\u70b9\u6570\u6700\u591a\u7684\u56e2\u3002 \u65e0\u5411\u56fe\u7684\u6700\u5927\u56e2\u9876\u70b9\u6570\u91cf = \u65e0\u5411\u56fe\u8865\u56fe\u7684\u6700\u5927\u72ec\u7acb\u96c6\u9876\u70b9\u6570\u91cf \u6700\u5927\u56e2\u548c\u6700\u5927\u72ec\u7acb\u96c6\u90fd\u53ef\u4ee5\u7528dfs\u6765\u6c42 \u6700\u5927\u56e2\uff1a V\u4e2d\u53d6K\u4e2a\u9876\u70b9\uff0c\u4e24\u70b9\u95f4\u76f8\u4e92\u8fde\u63a5 \u6700\u5927\u72ec\u7acb\u96c6\uff1a V\u4e2d\u53d6K\u4e2a\u9876\u70b9\uff0c\u4e24\u70b9\u95f4\u4e0d\u8fde\u63a5 \u6700\u5927\u56e2\u6570\u91cf = \u8865\u56fe\u4e2d\u6700\u5927\u72ec\u7acb\u96c6\u6570 \u6700\u5927\u56e2\u7684dfs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 ... int n,m,mp[105][105];//\u90bb\u63a5\u77e9\u9635\u5b58\u56fe int ans,cnt,opt[105],st[105]//opt\u4e3a\u6700\u7ec8\u56e2\u6570\u7ec4\uff0cst\u4e3a\u56e2\u96c6\u5408\u6570\u7ec4; void dfs(int x)//\u53c2\u6570\u4e3a\u70b9\u7684\u6807\u53f7\uff0c\u9010\u70b9\u641c\u7d22 { if(x>n)//\u679a\u4e3e\u4e86\u6240\u6709\u8282\u70b9 { ans=cnt; memcpy(opt,st,sizeof(st)); return; } int flag=1; for(int i=1;i<x;i++) { if(st[i] && !mp[i][x]) { flag=0; break; } } if(flag)//\u6ee1\u8db3\u5165\u56e2\u6761\u4ef6 { st[x]=1; ++cnt; dfs(x+1); st[x]=0; --cnt; } if(cnt+n-x>ans)//\u526a\u679d\u5224\u5b9a\uff1a\u5269\u4e0b\u7684\u70b9\u548c\u5df2\u5728\u56e2\u4e2d\u7684\u70b9\u7684\u548c\u82e5\u90fd\u6bd4\u5f53\u524d\u641c\u5230\u7684ans\u7684\u5c0f\uff0c\u5c31\u4e0d\u5fc5\u8fdb\u884c\u4e0b\u4e00\u4e2a\u70b9\u7684dfs { dfs(x+1);//\u8fd9\u91cc\u4e0e\u4e0a\u9762\u7684\u6df1\u641c\u4e0d\u540c\u5728\u4e8ecnt\u7684\u53d8\u5316 } } int main() { scanf(\"%d%d\",&n,&m); memset while(m--) { int x,y; scanf(\"%d%d\",&x,&y); mp[x][y]=mp[y][x]=1; } dfs(1); } \u6700\u5927\u72ec\u7acb\u96c6\u7684dfs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include <iostream> #include <cstring> #include <cstdlib> #include <cstdio> #include <algorithm> #include<vector> using namespace std; vector<vector<int> > G;//\u9886\u63a5\u8868\u5b58\u56fe int n, m; int color[123]; vector<int> rec; int maxnum; void dfs(int u,int _count) { if (_count > maxnum) {//\u66f4\u65b0\u7b54\u6848 maxnum = _count; rec.clear(); for (int i = 1;i <= n;++i) { if (color[i]) rec.push_back(i); } } if (u == n + 1) return ; //\u7528\u4e8e\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u67d3\u6210\u9ed1\u8272 bool ok = true; for (int i = 0;i < G[u].size();++i) { if (color[G[u][i]]) ok = false; } if (ok) {//u\u8282\u70b9\u53ef\u4ee5\u67d3\u6210\u9ed1\u8272 color[u] = 1; dfs(u + 1, _count + 1); color[u] = 0; } dfs(u + 1, _count);//u\u67d3\u6210\u767d\u8272\uff0d>\u8df3\u8fc7 } int main() { int t, u, v; cin >> t; while(t--) { scanf(\"%d%d\", &n, &m); G.clear(); G.resize(n + 2); while(m--) { scanf(\"%d%d\", &u, &v); G[u].push_back(v); G[v].push_back(u); } memset(color, 0,sizeof color); maxnum = 0; dfs(1, 0); printf(\"%d\\n\", maxnum); for (int i = 0;i < rec.size();++i) printf(\"%d%c\", rec[i], i == maxnum - 1?'\\n':' '); } return 0; } /////// //\u4e5f\u53ef\u7528\u8865\u56fe\u7684\u6700\u5927\u56e2\u4e2a\u6570\u6765\u6c42 //\u90bb\u63a5\u77e9\u9635\u8865\u56fe\u6784\u9020\u65b9\u6cd5\u5982\u4e0b\uff1a\u5148\u6784\u9020\u5b8c\u5168\u56fe\uff0c\u518d\u628a\u9700\u8981\u8fde\u70b9\u7684\u8fb9\u5220\u6389 ... for (int i = 0; i < 105; ++i) { fill(mp[i], mp[i]+105, 1);//\u6784\u9020\u5b8c\u5168\u56fe } while (M--) { canf(\"%d %d\", &x, &y); mp[x][y] = mp[y][x] = 0;//\u5220\u8fb9 } \u56fe\u7684\u641c\u7d22\u6837\u4f8b\uff1am\u7740\u8272\u95ee\u9898 \u9898\u76ee\u63cf\u8ff0 \u7ed9\u5b9a\u65e0\u5411\u8fde\u901a\u56feG=(V, E)\u548cm\u79cd\u4e0d\u540c\u7684\u989c\u8272\uff0c\u7528\u8fd9\u4e9b\u989c\u8272\u4e3a\u56feG\u7684\u5404\u9876\u70b9\u7740\u8272\uff0c\u6bcf\u4e2a\u9876\u70b9\u7740\u4e00\u79cd\u989c\u8272\u3002\u662f\u5426\u6709\u4e00\u79cd\u7740\u8272\u6cd5\u4f7fG\u4e2d\u76f8\u90bb\u7684\u4e24\u4e2a\u9876\u70b9\u6709\u4e0d\u540c\u7684\u989c\u8272? \u8fd9\u4e2a\u95ee\u9898\u662f\u56fe\u7684m\u53ef\u7740\u8272\u5224\u5b9a\u95ee\u9898\u3002\u82e5\u4e00\u4e2a\u56fe\u6700\u5c11\u9700\u8981m\u79cd\u989c\u8272\u624d\u80fd\u4f7f\u56fe\u4e2d\u6bcf\u6761\u8fb9\u8fde\u63a5\u7684\u4e24\u4e2a\u9876\u70b9\u7740\u4e0d\u540c\u989c\u8272\uff0c\u5219\u79f0\u8fd9\u4e2a\u6570m\u4e3a\u8be5\u56fe\u7684\u8272\u6570\u3002\u6c42\u4e00\u4e2a\u56fe\u7684\u8272\u6570m\u7684\u95ee\u9898\u79f0\u4e3a\u56fe\u7684m\u53ef\u7740\u8272\u4f18\u5316\u95ee\u9898\u3002 \u7f16\u7a0b\u8ba1\u7b97\uff1a\u7ed9\u5b9a\u56feG=(V, E)\u548cm\u79cd\u4e0d\u540c\u7684\u989c\u8272\uff0c\u627e\u51fa\u6240\u6709\u4e0d\u540c\u7684\u7740\u8272\u6cd5\u548c\u7740\u8272\u603b\u6570\u3002 \u8f93\u5165 \u7b2c\u4e00\u884c\u662f\u9876\u70b9\u7684\u4e2a\u6570n\uff082\u2264n\u226410\uff09\uff0c\u989c\u8272\u6570m\uff081\u2264m\u2264n\uff09\u3002 \u63a5\u4e0b\u6765\u662f\u9876\u70b9\u4e4b\u95f4\u7684\u76f8\u4e92\u5173\u7cfb\uff1aa b \u8868\u793aa\u548cb\u76f8\u90bb\u3002\u5f53a\uff0cb\u540c\u65f6\u4e3a0\u65f6\u8868\u793a\u8f93\u5165\u7ed3\u675f\u3002 \u8f93\u51fa \u8f93\u51fa\u6240\u6709\u7684\u7740\u8272\u65b9\u6848\uff0c\u8868\u793a\u67d0\u4e2a\u9876\u70b9\u6d82\u67d0\u79cd\u989c\u8272\u53f7\uff0c\u6bcf\u4e2a\u6570\u5b57\u7684\u540e\u9762\u6709\u4e00\u4e2a\u7a7a\u683c\u3002\u6700\u540e\u4e00\u884c\u662f\u7740\u8272\u65b9\u6848\u603b\u6570\u3002 \u6837\u4f8b\u8f93\u5165 5 4 1 3 1 2 1 4 2 3 2 4 2 5 3 4 4 5 0 0 \u6837\u4f8b\u8f93\u51fa 1 2 3 4 1 1 2 3 4 3 1 2 4 3 1 1 2 4 3 4 1 3 2 4 1 1 3 2 4 2 1 3 4 2 1 1 3 4 2 4 1 4 2 3 1 1 4 2 3 2 1 4 3 2 1 1 4 3 2 3 2 1 3 4 2 2 1 3 4 3 2 1 4 3 2 2 1 4 3 4 2 3 1 4 1 2 3 1 4 2 2 3 4 1 2 2 3 4 1 4 2 4 1 3 1 2 4 1 3 2 2 4 3 1 2 2 4 3 1 3 3 1 2 4 2 3 1 2 4 3 3 1 4 2 3 3 1 4 2 4 3 2 1 4 1 3 2 1 4 3 3 2 4 1 3 3 2 4 1 4 3 4 1 2 1 3 4 1 2 3 3 4 2 1 2 3 4 2 1 3 4 1 2 3 2 4 1 2 3 4 4 1 3 2 3 4 1 3 2 4 4 2 1 3 1 4 2 1 3 4 4 2 3 1 3 4 2 3 1 4 4 3 1 2 1 4 3 1 2 4 4 3 2 1 2 4 3 2 1 4 Total=48 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<algorithm> using namespace std; int n, m; int mp[15][15],color[15],col_cnt,ans,col_vis[15]; void dfs(int x) { if (x == n+1 ) { if (col_cnt == m) { ans++; for (int i = 1; i <= n; i++) { if (i != n) { printf(\"%d \", color[i]); } else { printf(\"%d\\n\", color[i]); } } } return; } for (int i = 1; i <= m; i++) { int flag_color = 1; for (int j = 1; j <= n; j++) { if (mp[x][j] && i == color[j]) { flag_color = 0; break; } } if (flag_color) { color[x] = i; if (!col_vis[i]) { col_cnt++; } col_vis[i]++; dfs(x + 1); color[x] = -1; col_vis[i]--; if (!col_vis[i]) { col_cnt--; } } else { continue; } } } int main() { scanf(\"%d%d\", &n, &m); int x, y; memset(color, -1, sizeof(color)); while (~scanf(\"%d%d\", &x, &y)) { if (!x && !y) { break; } mp[x][y] = mp[y][x] = 1; } dfs(1); printf(\"%d\\n\", ans); //system(\"pause\"); return 0; }","title":"\u4e8c\u5206\u56fe"},{"location":"DataStructure/graph/bipartite/#_1","text":"\u4e8c\u5206\u56fe\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u56feG = \uff08V, E\uff09\uff0c\u82e5\u80fd\u5c06\u5176\u70b9\u96c6\u5206\u4e3a\u4e24\u4e2a\u4e92\u4e0d\u76f8\u4ea4\u7684\u4e24\u4e2a\u5b50\u96c6X\u3001Y\uff0c\u4f7f\u5f97X\u2229Y = \u2205\uff0c\u4e14\u5bf9\u4e8eG\u7684\u8fb9\u96c6V\uff0c\u82e5\u5176\u6240\u6709\u8fb9\u7684\u9876\u70b9\u5168\u90e8\u4e00\u4fa7\u5c5e\u4e8eX\uff0c\u4e00\u4fa7\u5c5e\u4e8eY\uff0c\u5219\u79f0\u56feG\u4e3a\u4e00\u4e2a\u4e8c\u5206\u56fe\u3002 \u4e8c\u5206\u56fe\u5224\u5b9a\uff1a\u65e0\u5947\u73af\uff0c\u53ef\u4ee5\u7528\u9ed1\u767d\u67d3\u8272\u5224\u65ad\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 //\u5224\u65ad\u56fe\u4e2d\u662f\u5426\u6709\u5947\u73af\uff0c\u5373\u5224\u65ad\u662f\u5426\u4e3a\u4e8c\u5206\u56fe struct Edge { int from, to, next, weigh; } edge[10*maxn]; void addedge(int u,int v) { Edge e; e.from=u; e.to=v; e.next=head[u]; edge[enum]=e; head[u]=enum++; } int n,m,s,t,color[maxn]; int bfs()//bfs\u67d3\u8272 { color[1]=0; queue<int>q; q.push(1); while(!q.empty()){ int u=q.front();q.pop(); for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(color[v]==-1) { color[v]=color[u]^1;/\u672a\u67d3\u8272\u5219\u67d3\u53cd\u8272 q.push(v); } else if(color[v]==color[u])//\u5df2\u67d3\u8272\u5224\u65ad\u8272\u5f02 return 0;//\u53ea\u6709\u5947\u73af\u624d\u4f1a\u51fa\u73b0\u76f8\u90bb\u540c\u8272\u7684\u60c5\u51b5\uff08\u6709\u5947\u73af\uff0c\u975e\u4e8c\u5206\u56fe\uff09 } } return 1; } \u5339\u914d\uff1a \u5bf9\u4e8e\u4e00\u4e2a\u4e8c\u5206\u56feG\u7684\u5b50\u56feM, \u82e5M\u7684\u8fb9\u96c6E\u7684\u7684\u4efb\u610f\u4e24\u6761\u8fb9\u90fd\u4e0d\u8fde\u63a5\u540c\u4e00\u4e2a\u9876\u70b9\uff0c\u5219\u79f0M\u4e3aG\u7684\u4e00\u4e2a\u5339\u914d\u3002 \u6700\u5927\u5339\u914d\uff1a\u82e5\u4e8c\u5206\u56feG\u7684\u4e00\u4e2a\u5339\u914dM\u4e3a\u5176\u8fb9\u6570\u6700\u591a\u7684\u5339\u914d\uff0c\u5219\u79f0M\u4e3aG\u7684\u6700\u5927\u5339\u914d\u3002 \u6700\u5927\u5339\u914d\u7684\u6c42\u6cd5\uff1a * \u5308\u7259\u5229\u7b97\u6cd5\uff1b * \u7f51\u7edc\u6d41\uff1a\u6e90\u70b9\u5230\u5de6\u4fa7\u70b9\uff0c\u5de6\u4fa7\u70b9\u5230\u53f3\u4fa7\u70b9\uff0c\u53f3\u4fa7\u70b9\u5230\u6c47\u70b9\u95f4\u90fd\u5efa\u6d41\u91cf\u4e3a1\u7684\u8fb9\uff0c\u6700\u5927\u6d41\u5373\u4e3a\u6700\u5927\u5339\u914d\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 //\u7b2c\u4e8c\u6b21\u4e16\u754c\u5927\u6218\u65f6\u671f\uff0c\u82f1\u56fd\u7687\u5bb6\u7a7a\u519b\u4ece\u6ca6\u9677\u56fd\u5f81\u52df\u4e86\u5927\u91cf\u5916\u7c4d\u98de\u884c\u5458\u3002 //\u7531\u7687\u5bb6\u7a7a\u519b\u6d3e\u51fa\u7684\u6bcf\u4e00\u67b6\u98de\u673a\u90fd\u9700\u8981\u914d\u5907\u5728\u822a\u884c\u6280\u80fd\u548c\u8bed\u8a00\u4e0a\u80fd\u4e92\u76f8\u914d\u5408\u76842\u540d\u98de\u884c\u5458\uff0c\u5176\u4e2d1\u540d\u662f\u82f1\u56fd\u98de\u884c\u5458\uff0c\u53e61\u540d\u662f\u5916\u7c4d\u98de\u884c\u5458\u3002 //\u5728\u4f17\u591a\u7684\u98de\u884c\u5458\u4e2d\uff0c\u6bcf\u4e00\u540d\u5916\u7c4d\u98de\u884c\u5458\u90fd\u53ef\u4ee5\u4e0e\u5176\u4ed6\u82e5\u5e72\u540d\u82f1\u56fd\u98de\u884c\u5458\u5f88\u597d\u5730\u914d\u5408\u3002\u5982\u4f55\u9009\u62e9\u914d\u5bf9\u98de\u884c\u7684\u98de\u884c\u5458\u624d\u80fd\u4f7f\u4e00\u6b21\u6d3e\u51fa\u6700\u591a\u7684\u98de\u673a\u3002 //\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u5916\u7c4d\u98de\u884c\u5458\u4e0e\u82f1\u56fd\u98de\u884c\u5458\u7684\u914d\u5408\u60c5\u51b5\uff0c\u8bd5\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u627e\u51fa\u6700\u4f73\u98de\u884c\u5458\u914d\u5bf9\u65b9\u6848\uff0c\u4f7f\u7687\u5bb6\u7a7a\u519b\u4e00\u6b21\u80fd\u6d3e\u51fa\u6700\u591a\u7684\u98de\u673a \u3002 //\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u5916\u7c4d\u98de\u884c\u5458\u4e0e\u82f1\u56fd\u98de\u884c\u5458\u7684\u914d\u5408\u60c5\u51b5\uff0c\u7f16\u7a0b\u627e\u51fa\u4e00\u4e2a\u6700\u4f73\u98de\u884c\u5458\u914d\u5bf9\u65b9\u6848\uff0c\u4f7f\u7687\u5bb6\u7a7a\u519b\u4e00\u6b21\u80fd\u6d3e\u51fa\u6700\u591a\u7684\u98de\u673a\u3002 //Input //\u7b2c1\u884c\u67092\u4e2a\u6b63\u6574\u6570 m \u548c n\u3002n \u662f\u7687\u5bb6\u7a7a\u519b\u7684\u98de\u884c \u5458\u603b\u6570(n < 100); //m \u662f\u5916\u7c4d\u98de\u884c\u5458\u6570\u3002 //\u5916\u7c4d\u98de\u884c\u5458\u7f16\u53f7\u4e3a 1~m; //\u82f1\u56fd\u98de\u884c\u5458\u7f16\u53f7\u4e3a m + 1~n\u3002 //\u63a5\u4e0b\u6765\u6bcf\u884c\u6709 2 \u4e2a\u6b63\u6574\u6570 i \u548c j\uff0c\u8868\u793a\u5916\u7c4d\u98de\u884c\u5458 i \u53ef\u4ee5\u548c\u82f1\u56fd\u98de\u884c\u5458 j \u914d\u5408\u3002 //\u8f93\u5165\u6700\u540e\u4ee5 2 \u4e2a - 1 \u7ed3\u675f\u3002 //Output\u7b2c 1 \u884c\u662f\u6700\u4f73\u98de\u884c \u5458\u914d\u5bf9\u65b9\u6848\u4e00\u6b21\u80fd\u6d3e\u51fa\u7684\u6700\u591a\u7684\u98de\u673a\u6570 M\u3002 //\u5982\u679c\u6240\u6c42\u7684\u6700\u4f73\u98de\u884c\u5458\u914d\u5bf9\u65b9\u6848\u4e0d\u5b58\u5728\uff0c\u5219\u8f93\u51fa\u2018No Solution!\u2019\u3002 // //Sample Input // // 5 10 // 1 7 // 1 8 // 2 6 // 2 9 // 2 10 // 3 7 // 3 8 // 4 7 // 4 8 // 5 10 // - 1 - 1 // //Sample Output // 4 //\u5308\u7259\u5229\u7b97\u6cd5 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<vector> using namespace std; const int N=105; int n,m; int link[N]; //link[y]=x,\u5373y\u4e0ex\u5339\u914d bool vis[N]; vector<int>v[N]; bool can(int u) { for(int i=0;i<v[u].size();i++) { int t=v[u][i]; if(!vis[t]) { vis[t]=true; if(link[t]==-1||can(link[t])) { //\u5982\u679ct\u5c1a\u672a\u88ab\u5339\u914d\uff0c\u6216\u8005link[t]\u5373x\u53ef\u4ee5\u627e\u5230\u5176\u4ed6\u80fd\u591f\u66ff\u4ee3\u7684\u70b9,\u5219\u628at\u70b9\u8ba9\u7ed9u\u5339\u914d link[t]=u; return true; } } } return false; } int max_match() { memset(link,-1,sizeof(link)); int ans=0; for(int i=1;i<=n;i++) { memset(vis,false,sizeof(vis)); if(can(i)) ans++; } return ans; } int main() { scanf(\"%d%d\",&n,&m); int a,b; while(~scanf(\"%d%d\",&a,&b)) { if(a==-1&&b==-1) break; v[a].push_back(b); } int t=max_match(); if(t==0) puts(\"No Solution!\"); else printf(\"%d\\n\",t); system(\"pause\"); return 0; } \u5176\u5b83\u6027\u8d28 \u6700\u5c0f\u70b9\u8986\u76d6\u96c6\uff1a\u70b9\u8986\u76d6\u96c6\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u70b9\u96c6\uff0c\u4e14\u56fe\u4e2d\u6240\u6709\u7684\u8fb9\u90fd\u81f3\u5c11\u6709\u4e00\u4e2a\u7aef\u70b9\u5728\u70b9\u96c6\u4e2d\u3002\u6700\u5c0f\u70b9\u8986\u76d6\u96c6\u5373\u4e3a\u70b9\u6570\u6700\u5c0f\u7684\u70b9\u8986\u76d6\u96c6\u3002 \u4e8c\u5206\u56fe\u7684\u6700\u5c0f\u70b9\u8986\u76d6\u70b9\u6570 = \u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d\uff08\u8bc1\u660e\u89c1K\u00f6nig\u5b9a\u7406\uff09 \u6700\u5c11\u8fb9\u8986\u76d6\u96c6\uff1a\u8fb9\u8986\u76d6\u96c6\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u8fb9\u96c6\uff0c\u4e14\u56fe\u4e2d\u6240\u6709\u7684\u70b9\u90fd\u81f3\u5c11\u4e3a\u8fb9\u96c6\u4e2d\u4e00\u6761\u8fb9\u7684\u7aef\u70b9\u3002\u6700\u5c0f\u8fb9\u8986\u76d6\u96c6\u5373\u4e3a\u8fb9\u6570\u6700\u5c11\u7684\u8fb9\u8986\u76d6\u96c6\u3002 \u4e8c\u5206\u56fe\u7684\u6700\u5c11\u8fb9\u8986\u76d6\u8fb9\u6570 = \u70b9\u6570 - \u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d \u6700\u5927\u72ec\u7acb\u96c6\uff1a\u72ec\u7acb\u96c6\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u70b9\u96c6\uff0c\u4e14\u8fd9\u4e9b\u70b9\u4e4b\u95f4\u4e24\u4e24\u65e0\u8fb9\u76f8\u8fde\u3002\u6700\u5927\u72ec\u7acb\u96c6\u662f\u6307\u70b9\u6570\u6700\u591a\u7684\u72ec\u7acb\u96c6\u3002 \u4e8c\u5206\u56fe\u7684\u6700\u5927\u72ec\u7acb\u96c6\u70b9\u6570 = \u70b9\u6570 - \u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d \u6700\u5927\u56e2(\u6700\u5927\u5b8c\u5168\u5b50\u56fe)\uff1a\u56e2\u662f\u6307\u56fe\u4e2d\u7684\u4e00\u4e2a\u70b9\u96c6\uff0c\u4e14\u8fd9\u4e9b\u70b9\u4e4b\u95f4\u4e24\u4e24\u6709\u8fb9\u76f8\u8fde\uff08\u5b8c\u5168\u56fe\uff09\u3002\u6700\u5927\u56e2\u662f\u6307\u70b9\u6570\u6700\u591a\u7684\u56e2\u3002 \u65e0\u5411\u56fe\u7684\u6700\u5927\u56e2\u9876\u70b9\u6570\u91cf = \u65e0\u5411\u56fe\u8865\u56fe\u7684\u6700\u5927\u72ec\u7acb\u96c6\u9876\u70b9\u6570\u91cf \u6700\u5927\u56e2\u548c\u6700\u5927\u72ec\u7acb\u96c6\u90fd\u53ef\u4ee5\u7528dfs\u6765\u6c42 \u6700\u5927\u56e2\uff1a V\u4e2d\u53d6K\u4e2a\u9876\u70b9\uff0c\u4e24\u70b9\u95f4\u76f8\u4e92\u8fde\u63a5 \u6700\u5927\u72ec\u7acb\u96c6\uff1a V\u4e2d\u53d6K\u4e2a\u9876\u70b9\uff0c\u4e24\u70b9\u95f4\u4e0d\u8fde\u63a5 \u6700\u5927\u56e2\u6570\u91cf = \u8865\u56fe\u4e2d\u6700\u5927\u72ec\u7acb\u96c6\u6570 \u6700\u5927\u56e2\u7684dfs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 ... int n,m,mp[105][105];//\u90bb\u63a5\u77e9\u9635\u5b58\u56fe int ans,cnt,opt[105],st[105]//opt\u4e3a\u6700\u7ec8\u56e2\u6570\u7ec4\uff0cst\u4e3a\u56e2\u96c6\u5408\u6570\u7ec4; void dfs(int x)//\u53c2\u6570\u4e3a\u70b9\u7684\u6807\u53f7\uff0c\u9010\u70b9\u641c\u7d22 { if(x>n)//\u679a\u4e3e\u4e86\u6240\u6709\u8282\u70b9 { ans=cnt; memcpy(opt,st,sizeof(st)); return; } int flag=1; for(int i=1;i<x;i++) { if(st[i] && !mp[i][x]) { flag=0; break; } } if(flag)//\u6ee1\u8db3\u5165\u56e2\u6761\u4ef6 { st[x]=1; ++cnt; dfs(x+1); st[x]=0; --cnt; } if(cnt+n-x>ans)//\u526a\u679d\u5224\u5b9a\uff1a\u5269\u4e0b\u7684\u70b9\u548c\u5df2\u5728\u56e2\u4e2d\u7684\u70b9\u7684\u548c\u82e5\u90fd\u6bd4\u5f53\u524d\u641c\u5230\u7684ans\u7684\u5c0f\uff0c\u5c31\u4e0d\u5fc5\u8fdb\u884c\u4e0b\u4e00\u4e2a\u70b9\u7684dfs { dfs(x+1);//\u8fd9\u91cc\u4e0e\u4e0a\u9762\u7684\u6df1\u641c\u4e0d\u540c\u5728\u4e8ecnt\u7684\u53d8\u5316 } } int main() { scanf(\"%d%d\",&n,&m); memset while(m--) { int x,y; scanf(\"%d%d\",&x,&y); mp[x][y]=mp[y][x]=1; } dfs(1); } \u6700\u5927\u72ec\u7acb\u96c6\u7684dfs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include <iostream> #include <cstring> #include <cstdlib> #include <cstdio> #include <algorithm> #include<vector> using namespace std; vector<vector<int> > G;//\u9886\u63a5\u8868\u5b58\u56fe int n, m; int color[123]; vector<int> rec; int maxnum; void dfs(int u,int _count) { if (_count > maxnum) {//\u66f4\u65b0\u7b54\u6848 maxnum = _count; rec.clear(); for (int i = 1;i <= n;++i) { if (color[i]) rec.push_back(i); } } if (u == n + 1) return ; //\u7528\u4e8e\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u67d3\u6210\u9ed1\u8272 bool ok = true; for (int i = 0;i < G[u].size();++i) { if (color[G[u][i]]) ok = false; } if (ok) {//u\u8282\u70b9\u53ef\u4ee5\u67d3\u6210\u9ed1\u8272 color[u] = 1; dfs(u + 1, _count + 1); color[u] = 0; } dfs(u + 1, _count);//u\u67d3\u6210\u767d\u8272\uff0d>\u8df3\u8fc7 } int main() { int t, u, v; cin >> t; while(t--) { scanf(\"%d%d\", &n, &m); G.clear(); G.resize(n + 2); while(m--) { scanf(\"%d%d\", &u, &v); G[u].push_back(v); G[v].push_back(u); } memset(color, 0,sizeof color); maxnum = 0; dfs(1, 0); printf(\"%d\\n\", maxnum); for (int i = 0;i < rec.size();++i) printf(\"%d%c\", rec[i], i == maxnum - 1?'\\n':' '); } return 0; } /////// //\u4e5f\u53ef\u7528\u8865\u56fe\u7684\u6700\u5927\u56e2\u4e2a\u6570\u6765\u6c42 //\u90bb\u63a5\u77e9\u9635\u8865\u56fe\u6784\u9020\u65b9\u6cd5\u5982\u4e0b\uff1a\u5148\u6784\u9020\u5b8c\u5168\u56fe\uff0c\u518d\u628a\u9700\u8981\u8fde\u70b9\u7684\u8fb9\u5220\u6389 ... for (int i = 0; i < 105; ++i) { fill(mp[i], mp[i]+105, 1);//\u6784\u9020\u5b8c\u5168\u56fe } while (M--) { canf(\"%d %d\", &x, &y); mp[x][y] = mp[y][x] = 0;//\u5220\u8fb9 } \u56fe\u7684\u641c\u7d22\u6837\u4f8b\uff1am\u7740\u8272\u95ee\u9898 \u9898\u76ee\u63cf\u8ff0 \u7ed9\u5b9a\u65e0\u5411\u8fde\u901a\u56feG=(V, E)\u548cm\u79cd\u4e0d\u540c\u7684\u989c\u8272\uff0c\u7528\u8fd9\u4e9b\u989c\u8272\u4e3a\u56feG\u7684\u5404\u9876\u70b9\u7740\u8272\uff0c\u6bcf\u4e2a\u9876\u70b9\u7740\u4e00\u79cd\u989c\u8272\u3002\u662f\u5426\u6709\u4e00\u79cd\u7740\u8272\u6cd5\u4f7fG\u4e2d\u76f8\u90bb\u7684\u4e24\u4e2a\u9876\u70b9\u6709\u4e0d\u540c\u7684\u989c\u8272? \u8fd9\u4e2a\u95ee\u9898\u662f\u56fe\u7684m\u53ef\u7740\u8272\u5224\u5b9a\u95ee\u9898\u3002\u82e5\u4e00\u4e2a\u56fe\u6700\u5c11\u9700\u8981m\u79cd\u989c\u8272\u624d\u80fd\u4f7f\u56fe\u4e2d\u6bcf\u6761\u8fb9\u8fde\u63a5\u7684\u4e24\u4e2a\u9876\u70b9\u7740\u4e0d\u540c\u989c\u8272\uff0c\u5219\u79f0\u8fd9\u4e2a\u6570m\u4e3a\u8be5\u56fe\u7684\u8272\u6570\u3002\u6c42\u4e00\u4e2a\u56fe\u7684\u8272\u6570m\u7684\u95ee\u9898\u79f0\u4e3a\u56fe\u7684m\u53ef\u7740\u8272\u4f18\u5316\u95ee\u9898\u3002 \u7f16\u7a0b\u8ba1\u7b97\uff1a\u7ed9\u5b9a\u56feG=(V, E)\u548cm\u79cd\u4e0d\u540c\u7684\u989c\u8272\uff0c\u627e\u51fa\u6240\u6709\u4e0d\u540c\u7684\u7740\u8272\u6cd5\u548c\u7740\u8272\u603b\u6570\u3002 \u8f93\u5165 \u7b2c\u4e00\u884c\u662f\u9876\u70b9\u7684\u4e2a\u6570n\uff082\u2264n\u226410\uff09\uff0c\u989c\u8272\u6570m\uff081\u2264m\u2264n\uff09\u3002 \u63a5\u4e0b\u6765\u662f\u9876\u70b9\u4e4b\u95f4\u7684\u76f8\u4e92\u5173\u7cfb\uff1aa b \u8868\u793aa\u548cb\u76f8\u90bb\u3002\u5f53a\uff0cb\u540c\u65f6\u4e3a0\u65f6\u8868\u793a\u8f93\u5165\u7ed3\u675f\u3002 \u8f93\u51fa \u8f93\u51fa\u6240\u6709\u7684\u7740\u8272\u65b9\u6848\uff0c\u8868\u793a\u67d0\u4e2a\u9876\u70b9\u6d82\u67d0\u79cd\u989c\u8272\u53f7\uff0c\u6bcf\u4e2a\u6570\u5b57\u7684\u540e\u9762\u6709\u4e00\u4e2a\u7a7a\u683c\u3002\u6700\u540e\u4e00\u884c\u662f\u7740\u8272\u65b9\u6848\u603b\u6570\u3002 \u6837\u4f8b\u8f93\u5165 5 4 1 3 1 2 1 4 2 3 2 4 2 5 3 4 4 5 0 0 \u6837\u4f8b\u8f93\u51fa 1 2 3 4 1 1 2 3 4 3 1 2 4 3 1 1 2 4 3 4 1 3 2 4 1 1 3 2 4 2 1 3 4 2 1 1 3 4 2 4 1 4 2 3 1 1 4 2 3 2 1 4 3 2 1 1 4 3 2 3 2 1 3 4 2 2 1 3 4 3 2 1 4 3 2 2 1 4 3 4 2 3 1 4 1 2 3 1 4 2 2 3 4 1 2 2 3 4 1 4 2 4 1 3 1 2 4 1 3 2 2 4 3 1 2 2 4 3 1 3 3 1 2 4 2 3 1 2 4 3 3 1 4 2 3 3 1 4 2 4 3 2 1 4 1 3 2 1 4 3 3 2 4 1 3 3 2 4 1 4 3 4 1 2 1 3 4 1 2 3 3 4 2 1 2 3 4 2 1 3 4 1 2 3 2 4 1 2 3 4 4 1 3 2 3 4 1 3 2 4 4 2 1 3 1 4 2 1 3 4 4 2 3 1 3 4 2 3 1 4 4 3 1 2 1 4 3 1 2 4 4 3 2 1 2 4 3 2 1 4 Total=48 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<algorithm> using namespace std; int n, m; int mp[15][15],color[15],col_cnt,ans,col_vis[15]; void dfs(int x) { if (x == n+1 ) { if (col_cnt == m) { ans++; for (int i = 1; i <= n; i++) { if (i != n) { printf(\"%d \", color[i]); } else { printf(\"%d\\n\", color[i]); } } } return; } for (int i = 1; i <= m; i++) { int flag_color = 1; for (int j = 1; j <= n; j++) { if (mp[x][j] && i == color[j]) { flag_color = 0; break; } } if (flag_color) { color[x] = i; if (!col_vis[i]) { col_cnt++; } col_vis[i]++; dfs(x + 1); color[x] = -1; col_vis[i]--; if (!col_vis[i]) { col_cnt--; } } else { continue; } } } int main() { scanf(\"%d%d\", &n, &m); int x, y; memset(color, -1, sizeof(color)); while (~scanf(\"%d%d\", &x, &y)) { if (!x && !y) { break; } mp[x][y] = mp[y][x] = 1; } dfs(1); printf(\"%d\\n\", ans); //system(\"pause\"); return 0; }","title":"\u4e8c\u5206\u56fe"},{"location":"DataStructure/graph/netstream/","text":"\u7f51\u7edc\u6d41\u6700\u5927\u6d41 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 #include<iostream> #include<stdio.h> #include<cstring> #include<string> #include<vector> #include<math.h> #include<queue> #include<set> #include<algorithm> #include<map> #define MS(x) memset(x,0,sizeof(x)); #define MS1(x) memset(x,-1,sizeof(x)); using namespace std; const int maxN = 200;//\u70b9\u6570 const int maxM = 1e6;//\u8fb9\u6570\u5fc5\u987b\u5f97\u662f\u7ed9\u5b9a\u8fb9\u6570\u7684\u4e24\u500d \u56e0\u4e3a\u8fd8\u6709\u53cd\u5411\u8fb9 const int inf = 0x3f3f3f3f; class Graph { //\u5148Graph G \u751f\u6210\u4e00\u4e2a\u7c7b //\u7136\u540eG.init(n) n\u662f\u70b9\u7684\u4e2a\u6570 //\u7136\u540eaddedge\u52a0\u8fb9 //\u8bb0\u5f97\u8bbe\u7f6e\u6e90\u70b9\u6c47\u70b9 set_st(start,end); //\u6700\u540e\u76f4\u63a5\u8dd1Dinic() \u8fd4\u56de\u7684\u5c31\u662f\u6700\u5927\u6d41 private: int s, t;//\u6e90\u70b9\u548c\u6c47\u70b9 int n;//\u70b9\u7684\u4e2a\u6570 int cnt;//\u524d\u5411\u661f int Head[maxN];//\u6bcf\u4e2a\u70b9\u6700\u540e\u4e00\u6761\u8fb9\u7684\u7f16\u53f7 int Next[maxM];//\u6307\u5411\u5bf9\u5e94\u70b9\u7684\u524d\u4e00\u6761\u8fb9 int W[maxM];//\u6bcf\u4e00\u6761\u8fb9\u7684\u6b8b\u91cf int V[maxM];//\u6bcf\u4e00\u6761\u8fb9\u6307\u5411\u7684\u70b9 int Depth[maxN];//\u5206\u5c42\u56fe\u7684\u6df1\u5ea6 int cur[maxN];//cur\u5c31\u662f\u8bb0\u5f55\u5f53\u524d\u70b9u\u5faa\u73af\u5230\u4e86\u54ea\u4e00\u6761\u8fb9 public: void init(int n)//\u6e90\u70b9 \u6c47\u70b9 \u70b9\u7684\u4e2a\u6570 { cnt = -1; memset(Head, -1, sizeof(Head)); memset(Next, -1, sizeof(Next)); this->n = n; } void set_st(int source, int terminal)//\u8bbe\u7f6e\u6e90\u70b9 \u6c47\u70b9 { s = source; t = terminal; } void _Add(int u, int v, int w)//\u524d\u5411\u661f { cnt++; Next[cnt] = Head[u]; Head[u] = cnt; V[cnt] = v; W[cnt] = w; } void Add_Edge(int u, int v, int w)//\u524d\u5411\u661f { _Add(u, v, w); _Add(v, u, 0); } int dfs(int u, int flow)//u\u662f\u5f53\u524d\u8282\u70b9,flow\u662f\u5f53\u524d\u6d41\u91cf { if (u == t)//\u8fbe\u5230\u6c47\u70b9 \u76f4\u63a5\u8fd4\u56de return flow; for (int& i = cur[u]; i != -1; i = Next[i])//\u6ce8\u610f\u8fd9\u91cc\u7684&\u7b26\u53f7\uff0c\u8fd9\u6837i\u589e\u52a0\u7684\u540c\u65f6\u4e5f\u80fd\u6539\u53d8cur[u]\u7684\u503c\uff0c\u8fbe\u5230\u8bb0\u5f55\u5f53\u524d\u5f27\u7684\u76ee\u7684 { if ((Depth[V[i]] == Depth[u] + 1) && (W[i] != 0))//\u5982\u679c\u6ee1\u8db3\u5206\u5c42\u56fe\u6761\u4ef6\u5e76\u4e14\u53c2\u91cf\u4e0d\u4e3a0 { int di = dfs(V[i], min(flow, W[i]));//\u5411\u4e0b\u589e\u5e7f if (di > 0)//\u589e\u5e7f\u6210\u529f { W[i] -= di;//\u6b63\u5411\u8fb9\u51cf W[i ^ 1] += di;//\u53cd\u5411\u8fb9\u52a0 return di;//\u8fd4\u56de\u6d41\u91cf } } } return 0;//\u589e\u5e7f\u5931\u8d25 \u8fd4\u56de0 } bool bfs() { queue<int> Q; while (!Q.empty()) Q.pop(); MS(Depth); Depth[s] = 1;//\u6e90\u70b9\u7684\u6df1\u5ea6\u4e3a1 Q.push(s); while (!Q.empty()) { int u = Q.front(); Q.pop(); for (int i = Head[u]; i != -1; i = Next[i]) if ((Depth[V[i]] == 0) && (W[i] > 0))//\u6df1\u5ea6\u7b49\u4e8e0\u5e76\u4e14\u6b8b\u91cf\u5927\u4e8e0 { Depth[V[i]] = Depth[u] + 1;//\u5b83\u5c31\u662f\u4e0b\u4e00\u5c42 Q.push(V[i]); } } if (!Depth[t]) return 0;//\u5982\u679c\u6c47\u70b9\u7684\u6df1\u5ea6\u4e3a0 \u4e5f\u5c31\u662f\u4e0d\u5b58\u5728\u589e\u5e7f\u8def return 1;//\u6c47\u70b9\u6df1\u5ea6\u4e0d\u4e3a0 \u5b58\u5728\u589e\u5e7f\u8def } int Dinic() { int Ans = 0;//\u7eaa\u5f55\u6700\u5927\u6d41\u91cf while (bfs())//\u5b58\u5728\u589e\u5e7f\u8def { for (int i = 1; i <= n; i++)//\u5f53\u524d\u5f27\u4f18\u5316 cur[i] = Head[i]; while (int d = dfs(s, inf))//\u6e90\u70b9\u6c47\u5165inf\u7684\u6d41\u91cf \u5f53\u8fd8\u80fd\u589e\u5e7f\u65f6 \u4e00\u76f4\u589e\u52a0\u6d41\u91cf { Ans += d; } } return Ans;//\u8fd4\u56de\u6d41\u91cf } }G; \u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d411 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> using namespace std; const int maxn = 1e4 + 10; const int maxm = 1e5 + 10; const int maxt = 2139062143; inline int min_(int x, int y) { return x < y ? x : y; } int n, m, s, t, nflow, nfee, flow, fee; int a, b, c, d; int h[maxn], hs = 1; int e_q[maxm], e_z[maxm], e_n[maxm], e_w[maxm], e_f[maxm]; void add(int q, int z, int k, int w, int f) { e_q[k] = q, e_z[k] = z, e_n[k] = h[q], e_w[k] = w, e_f[k] = f, h[q] = k; } int q[maxm], head, tail; int w[maxn], p[maxn]; bool v[maxn]; int ap(int k, int v) { if (k == s) return v; int ret = ap(e_q[p[k]], min_(v, e_w[p[k]])); if (!e_f[p[k] ^ 1]) add(k, e_q[p[k]], p[k] ^ 1, 0, -e_f[p[k]]); e_w[p[k]] -= ret, e_w[p[k] ^ 1] += ret; return ret; } void Mcmf() { while (1) { memset(w, 0x7f, sizeof(w)); memset(v, 0, sizeof(v)); head = tail = w[s] = 0; q[head++] = s, v[s] = 1; while (head > tail) { a = q[tail++], v[a] = 0; for (int i = h[a]; i; i = e_n[i]) if (0ll + e_f[i] + w[a] < w[e_z[i]] && e_w[i]) { p[e_z[i]] = i; w[e_z[i]] = e_f[i] + w[a]; if (!v[e_z[i]]) q[head++] = e_z[i], v[e_z[i]] = 1; } } if (w[t] == maxt) break; nflow = ap(t, maxt); flow += nflow; fee += nflow * w[t]; } } \u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d412 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 #include <iostream> #include<bits/stdc++.h> using namespace std; #define INF 0x3f3f3f3f const int maxn = 5000 + 7; /**********\u90bb\u63a5\u8868\u6570\u7ec4\u5f62\u5f0f***********/ struct Edge {/***\u8868\u8fb9**/ int from, to;/****\u8d77\u70b9\u7ec8\u70b9***/ int next;/*****\u76f8\u540c\u8d77\u70b9 \u7684\u4e0b\u4e00\u6761\u8fb9***/ int cap, flow;/*****\u8be5\u8fb9 \u7684 \u5bb9\u91cf \u548c\u6d41\u91cf***/ int cost;/****\u82b1\u8d39**/ }edge[maxn * 20]; int head[maxn];/****\u8868\u5934***/ int pre[maxn]; int dist[maxn], n, m, tot, s, t; bool vis[maxn]; /***\u52a0\u8fb9\u51fd\u6570********/ void addEdge(int a, int b, int c, int cost) {//\u6ce8\u610f\u53cd\u5411\u5f27\u7684\u8d1f\u6743\u503c edge[tot].from = a; edge[tot].to = b;/*****a\u5230 b****/ edge[tot].next = head[a];/*****\u4ed6\u7684\u4e0b\u4e00\u6761\u8fb9 \u662f \u4e4b\u524d\u6700\u540e\u4e00\u6761 \u4ee5 a\u4e3a\u8d77\u70b9\u7684\u8fb9******/ edge[tot].cap = c; edge[tot].flow = 0;/*******\u5bb9\u91cf \u6d41\u91cf \u6d41\u91cf\u521d\u59cb\u5316 \u4e3a 0*******/ edge[tot].cost = cost; head[a] = tot++;/***\u4ed6\u6210\u4e3a \u76ee\u524d \u4ee5a \u4e3a\u8d77\u70b9\u7684\u6700\u540e\u4e00\u6761\u8fb9****/ /*****\u53cd\u5411\u8fb9\u7684\u5efa\u7acb \u53cd\u5411\u8fb9\u7684\u5bb9\u91cf \u521d\u59cb\u5316\u4e3a 0******/ edge[tot].from = b; edge[tot].to = a; edge[tot].next = head[b]; edge[tot].cap = 0; edge[tot].flow = 0; edge[tot].cost = -cost; head[b] = tot++; } bool SPFA() {//SPFA\u6c42\u589e\u5e7f\u8def\uff0cdist[t]\u4fdd\u5b58\u6700\u5c0f\u82b1\u8d39 \uff0c memset(dist, INF, sizeof(dist)); memset(vis, 0, sizeof(vis)); queue<int> que; dist[s] = 0; vis[s] = 1; que.push(s); while (!que.empty()) { int u = que.front(); que.pop(); vis[u] = 0; for (int i = head[u]; i != -1/**\u53ef\u4ee5 \u7528\uff5ei*/; i = edge[i].next) { int v = edge[i].to; if (edge[i].cap > edge[i].flow && dist[v] > dist[u] + edge[i].cost) { dist[v] = dist[u] + edge[i].cost; pre[v] = i; if (!vis[v]) { vis[v] = 1; que.push(v); } } } } if (dist[t] != INF)return true; return false; } int CostFlow(int &flow) {//EK\u7b97\u6cd5 int mincost = 0; while (SPFA()) {//\u80fd\u627e\u5230\u589e\u5e7f\u8def int Min = INF; for (int i = t; i != s; i = edge[pre[i]].from) {//\u5bfb\u627e\u6700\u5c0f\u6d41 Min = min(Min, edge[pre[i]].cap - edge[pre[i]].flow); } for (int i = t; i != s; i = edge[pre[i]].from) {//\u5904\u7406\u6240\u6709\u8fb9 edge[pre[i]].flow += Min; edge[pre[i] ^ 1].flow -= Min; } flow += Min; mincost += (dist[t] * Min);//\u7d2f\u548c\u6700\u5c0f\u82b1\u8d39 } return mincost; } int main() { int T; scanf(\"%d\", &T); while (T--) { tot = 0; memset(head, -1, sizeof(head)); scanf(\"%d%d%d%d\", &n, &m, &s, &t); for (int i = 0; i < m; i++) { int a, b, c, cost; scanf(\"%d%d%d%d\", &a, &b, &c, &cost); addEdge(a, b, c, cost); } int MaxFlow = 0; int MinCost = CostFlow(MaxFlow); printf(\"%d %d\\n\", MaxFlow, MinCost); } return 0; } \u6700\u5c0f\u5272 \u00b6 \u7ed9\u5b9a\u4e00\u4e2a\u7f51\u7edcG=(V,E),\u6e90\u70b9\u4e3aS,\u6c47\u70b9\u4e3aT,\u82e5\u4e00\u4e2a\u8fb9\u96c6E'\u88ab\u5220\u6389\u540e\uff0c\u6e90\u70b9S\u548c\u6c47\u70b9T\u4e0d\u518d\u8fde\u901a\uff0c\u5219\u79f0\u8be5\u8fb9\u96c6\u4e3a\u7f51\u7edc\u7684\u5272\u3002\u8fb9\u7684\u5bb9\u91cf\u4e4b\u548c\u6700\u5c0f\u7684\u5272\u79f0\u4e3a\u7f51\u7edc\u7684\u6700\u5c0f\u5272\u3002 * \u6700\u5927\u6d41\u6700\u5c0f\u5272\u5b9a\u7406\uff1a\u4efb\u4f55\u4e00\u4e2a\u7f51\u7edc\u7684\u6700\u5927\u6d41\u91cf\u7b49\u4e8e\u6700\u5c0f\u5272\u4e2d\u8fb9\u7684\u5bb9\u91cf\u4e4b\u548c eg.\u7ed9\u5b9a\u4e00\u5f20\u65e0\u5411\u56fe\uff0c\u6c42\u6700\u5c11\u53bb\u6389\u591a\u5c11\u4e2a\u70b9\uff0c\u53ef\u4ee5\u4f7f\u56fe\u4e0d\u8fde\u901a\u3002\u70b9\u6570N<=50 \u82e5\u65e0\u5411\u56fe\u4e0d\u8fde\u901a\uff0c\u5219\u56fe\u4e2d\u5fc5\u6709\u4e24\u4e2a\u70b9\u4e0d\u8fde\u901a\uff0c\u4f46\u8fd9\u4e24\u4e2a\u70b9\u662f\u672a\u77e5\u7684\u3002\u53ef\u4ee5\u679a\u4e3e\u8fd9\u4e24\u4e2a\u70b9S\u548cT\uff0c\u7136\u540e\u5728\u5269\u4f59\u7684N-2\u4e2a\u8282\u70b9\u4e2d\u6700\u5c11\u53bb\u6389\u591a\u5c11\u4e2a\uff0c\u53ef\u4ee5\u4f7fS\u548cT\u4e0d\u8fde\u901a\uff08S\u548cT\u4e0d\u662f\u76f4\u63a5\u76f8\u8fde\u7684\uff09 \u6784\u5efa\u70b9\u8fb9\u8f6c\u6362\u7f51\u7edc\uff1a (1)\u628a\u539f\u6765\u65e0\u5411\u56fe\u7684\u6bcf\u4e2a\u70b9x\uff0c\u62c6\u6210x\u548cx'=x+N\u4e24\u4e2a\u70b9 (2)\u5bf9 \\forall x \\neq S,x \\neq T \\forall x \\neq S,x \\neq T ,\u8fde\u6709\u5411\u8fb9\uff08x,x')\uff0c\u5bb9\u91cf\u4e3a1 (3)\u5bf9\u4e8e\u539f\u65e0\u5411\u56fe\u7684\u6bcf\u6761\u8fb9(x,y)\uff0c\u5728\u7f51\u8def\u4e2d\u8fde\u6709\u5411\u8fb9(x',y)\uff0c(y',x)\uff0c\u5bb9\u91cf\u4e3a \\infty \\infty (4)\u4ee5S'\u4e3a\u7f51\u7edc\u7684\u6e90\u70b9\uff0cT\u4e3a\u7f51\u7edc\u7684\u6c47\u70b9\uff0c\u6c42\u6700\u5c0f\u5272\uff08\u6700\u5927\u6d41\uff09\uff0c\u5373\u53ef\u77e5\u9053\u6700\u5c11\u9700\u8981\u83b7\u5f97\u7684\u70b9\u6570 \u82e5\u6c42\u5168\u5c40\u6700\u5c0f\u5272\uff0c\u5219\u9700\u8981\u679a\u4e3e\u6e90\u6c47\u70b9\u6765\u8dd1\u7f51\u7edc\u6d41\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u8f83\u9ad8\uff0c\u4e00\u822c\u4f7f\u7528stoer-wagner\u7b97\u6cd5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 //poj2914 /* translation: \u7ed9\u51fa\u4e00\u526f\u65e0\u6e90\u6c47\u7684\u65e0\u5411\u56fe\uff0c\u6c42\u5176\u6700\u5c0f\u5272\u3002 solution: \u539f\u672c\u7684\u60f3\u6cd5\u662f\u679a\u4e3e\u6e90\u6c47\uff0c\u7136\u540eDINIC\u6700\u5927\u6d41\u3002\u7136\u800c\u8fd9\u6837\u5fc5\u7136\u8d85\u65f6\u3002\u6240\u4ee5\u5fc5\u987b\u6709\u4e00\u79cd\u529e\u6cd5\u80fd\u591f\u5feb\u901f\u6c42\u51fa \u5168\u5c40\u6700\u5c0f\u5272\uff0c\u8fd9\u79cd\u7b97\u6cd5\u5c31\u662fstoer-wagner\u7b97\u6cd5\u3002 */ #include <iostream> #include <cstdio> #include <cstring> using namespace std; const int maxn = 500 + 5; const int INF = 0x3f3f3f3f; int wage[maxn], n, m; bool in_set[maxn], vis[maxn]; int G[maxn][maxn]; int find_min_cut(int& S, int& T) { memset(wage, 0, sizeof(wage)); memset(vis, 0, sizeof(vis)); S = T = -1; int min_cut, u = 0; for(int i = 0; i < n; i++) { int mx = -INF; for(int j = 0; j < n; j++) { if(!in_set[j] && !vis[j] && mx < wage[j]) { mx = wage[j]; u = j; } } if(u == T) return min_cut; S = T; T = u; min_cut = mx; vis[u] = true; for(int v = 0; v < n; v++) { if(!in_set[v] && !vis[v]) { wage[v] += G[u][v]; } } } return min_cut; } int stoer_wagner() { int S, T; int ans = INF, min_cut; for(int i = 1; i < n; i++) { min_cut = find_min_cut(S, T); ans = min(ans, min_cut); if(ans == 0) return ans; in_set[T] = true; for(int j = 0; j < n; j++) { if(!in_set[j] && j != S) { G[S][j] += G[T][j]; G[j][S] += G[j][T]; //\u7f29\u70b9\u64cd\u4f5c\uff0c\u5c06T\u8282\u70b9\u7684\u4fe1\u606f\u9644\u52a0\u5230S\u4e0a\u9762 } } } return ans; } int main() { //freopen(\"in.txt\", \"r\", stdin); while(~scanf(\"%d%d\", &n, &m)) { memset(in_set, 0, sizeof(in_set)); memset(G, 0, sizeof(G)); int u, v, c; for(int i = 0; i < m; i++) { scanf(\"%d%d%d\", &u, &v, &c); G[u][v] += c; G[v][u] += c; } printf(\"%d\\n\", stoer_wagner()); } return 0; } \u6700\u5927\u6743\u95ed\u5408\u5b50\u56fe \u00b6 \u5b9a\u4e49\uff1a\u6709\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u6bcf\u4e00\u4e2a\u70b9\u90fd\u6709\u4e00\u4e2a\u6743\u503c(\u6b63\u8d1f\u7686\u53ef),\u9009\u62e9\u4e00\u4e2a\u6743\u503c\u548c\u6700\u5927\u7684\u5b50\u56fe\uff0c \u4f7f\u5f97\u6bcf\u4e2a\u70b9\u7684\u540e\u7ee7\u90fd\u5728\u5b50\u56fe\u91cc\u9762 \uff0c\u8fd9\u4e2a\u5b50\u56fe\u5c31\u53eb\u6700\u5927\u6743\u95ed\u5408\u5b50\u56fe \u89e3\u6cd5\uff1a\u5c06\u5176\u8f6c\u5316\u4e3a\u6700\u5c0f\u5272\u95ee\u9898 (1)\u4ece\u6e90\u70b9s\u5411\u6bcf\u4e2a\u6b63\u6743\u70b9\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a\u6743\u503c\u7684\u8fb9\uff0c\u6bcf\u4e2a\u8d1f\u6743\u70b9\u5411\u6c47\u70b9t\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a\u6743\u503c\u7edd\u5bf9\u503c\u7684\u8fb9\uff0c\u6709\u5411\u56fe\u539f\u6765\u7684\u8fb9\u5bb9\u91cf\u5168\u90e8\u4e3a\u65e0\u9650 (2)\u6c42\u5b83\u7684\u6700\u5c0f\u5272\uff0c\u5272\u6389\u540e\uff0c\u4e0e\u6e90\u70b9s\u8fde\u901a\u7684\u70b9\u6784\u6210\u6700\u5927\u6743\u95ed\u5408\u5b50\u56fe\uff0c\u6743\u503c\u4e3a\uff08\u6b63\u6743\u503c\u4e4b\u548c-\u6700\u5c0f\u5272\uff09 \u7531\u4e8e\u539f\u56fe\u7684\u8fb9\u90fd\u662f\u65e0\u7a77\u5927\uff0c\u90a3\u4e48\u5272\u8fb9\u4e00\u5b9a\u662f\u4e0e\u6e90\u70b9s\u6216\u6c47\u70b9t\u76f8\u8fde\u7684\u3002 \u5272\u6389s\u4e0ei\u7684\u8fb9\uff0c\u8868\u793a\u4e0d\u9009\u62e9i\u70b9\u4f5c\u4e3a\u5b50\u56fe\u7684\u70b9\uff1b \u5272\u6389i\u4e0et\u7684\u8fb9\uff0c\u8868\u793a\u9009\u62e9i\u70b9\u4e3a\u5b50\u56fe\u7684\u70b9\u3002 \u5982\u679cs\u4e0ei\u6709\u8fb9\uff0c\u8868\u793ai\u5b58\u5728\u5b50\u56fe\u4e2d\uff1b \u5982\u679ci\u4e0et\u6709\u8fb9\uff0c\u8868\u793ai\u4e0d\u5b58\u5728\u4e8e\u5b50\u56fe\u4e2d\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 #include <bits/stdc++.h> using namespace std; typedef struct Edge { int u, v, w, next; }Edge; const int inf = 0x7f7f7f7f; const int maxn = 500; int cnt, dhead[maxn]; int cur[maxn], dd[maxn]; Edge dedge[maxn*maxn]; int S, T, N; int n, m; void init() { memset(dhead, -1, sizeof(dhead)); for(int i = 0; i < maxn; i++) dedge[i].next = -1; cnt = 0; } void adde(int u, int v, int w, int c1) { dedge[cnt].u = u; dedge[cnt].v = v; dedge[cnt].w = w; dedge[cnt].next = dhead[u]; dhead[u] = cnt++; dedge[cnt].u = v; dedge[cnt].v = u; dedge[cnt].w = c1; dedge[cnt].next = dhead[v]; dhead[v] = cnt++; } bool bfs(int s, int t, int n) { queue<int> q; for(int i = 0; i < n; i++) dd[i] = inf; dd[s] = 0; q.push(s); while(!q.empty()) { int u = q.front(); q.pop(); for(int i = dhead[u]; ~i; i = dedge[i].next) { if(dd[dedge[i].v] > dd[u] + 1 && dedge[i].w > 0) { dd[dedge[i].v] = dd[u] + 1; if(dedge[i].v == t) return 1; q.push(dedge[i].v); } } } return 0; } int dinic(int s, int t, int n) { int st[maxn], top; int u; int flow = 0; while(bfs(s, t, n)) { for(int i = 0; i < n; i++) cur[i] = dhead[i]; u = s; top = 0; while(cur[s] != -1) { if(u == t) { int tp = inf; for(int i = top - 1; i >= 0; i--) { tp = min(tp, dedge[st[i]].w); } flow += tp; for(int i = top - 1; i >= 0; i--) { dedge[st[i]].w -= tp; dedge[st[i] ^ 1].w += tp; if(dedge[st[i]].w == 0) top = i; } u = dedge[st[top]].u; } else if(cur[u] != -1 && dedge[cur[u]].w > 0 && dd[u] + 1 == dd[dedge[cur[u]].v]) { st[top++] = cur[u]; u = dedge[cur[u]].v; } else { while(u != s && cur[u] == -1) { u = dedge[st[--top]].u; } cur[u] = dedge[cur[u]].next; } } } return flow; } int main() { // freopen(\"in\", \"r\", stdin); int k, u, v, w; while(~scanf(\"%d %d\", &n, &m)) { init(); S = 0; T = n + m + 1; N = T + 1; int pos = 0; for(int i = 1; i <= m; i++) { scanf(\"%d\", &w); if(w != 0) adde(n+i, T, w, 0); else adde(n+i, T, inf, 0); } for(int i = 1; i <= n; i++) { scanf(\"%d %d\", &w, &k); pos += w; if(w != 0) adde(S, i, w, 0); else adde(S, i, inf, 0); for(int j = 0; j < k; j++) { scanf(\"%d\", &v); adde(i, n+v, inf, 0); } } printf(\"%d\\n\", pos - dinic(S,T,N)); } }","title":"\u7f51\u7edc\u6d41"},{"location":"DataStructure/graph/netstream/#_1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 #include<iostream> #include<stdio.h> #include<cstring> #include<string> #include<vector> #include<math.h> #include<queue> #include<set> #include<algorithm> #include<map> #define MS(x) memset(x,0,sizeof(x)); #define MS1(x) memset(x,-1,sizeof(x)); using namespace std; const int maxN = 200;//\u70b9\u6570 const int maxM = 1e6;//\u8fb9\u6570\u5fc5\u987b\u5f97\u662f\u7ed9\u5b9a\u8fb9\u6570\u7684\u4e24\u500d \u56e0\u4e3a\u8fd8\u6709\u53cd\u5411\u8fb9 const int inf = 0x3f3f3f3f; class Graph { //\u5148Graph G \u751f\u6210\u4e00\u4e2a\u7c7b //\u7136\u540eG.init(n) n\u662f\u70b9\u7684\u4e2a\u6570 //\u7136\u540eaddedge\u52a0\u8fb9 //\u8bb0\u5f97\u8bbe\u7f6e\u6e90\u70b9\u6c47\u70b9 set_st(start,end); //\u6700\u540e\u76f4\u63a5\u8dd1Dinic() \u8fd4\u56de\u7684\u5c31\u662f\u6700\u5927\u6d41 private: int s, t;//\u6e90\u70b9\u548c\u6c47\u70b9 int n;//\u70b9\u7684\u4e2a\u6570 int cnt;//\u524d\u5411\u661f int Head[maxN];//\u6bcf\u4e2a\u70b9\u6700\u540e\u4e00\u6761\u8fb9\u7684\u7f16\u53f7 int Next[maxM];//\u6307\u5411\u5bf9\u5e94\u70b9\u7684\u524d\u4e00\u6761\u8fb9 int W[maxM];//\u6bcf\u4e00\u6761\u8fb9\u7684\u6b8b\u91cf int V[maxM];//\u6bcf\u4e00\u6761\u8fb9\u6307\u5411\u7684\u70b9 int Depth[maxN];//\u5206\u5c42\u56fe\u7684\u6df1\u5ea6 int cur[maxN];//cur\u5c31\u662f\u8bb0\u5f55\u5f53\u524d\u70b9u\u5faa\u73af\u5230\u4e86\u54ea\u4e00\u6761\u8fb9 public: void init(int n)//\u6e90\u70b9 \u6c47\u70b9 \u70b9\u7684\u4e2a\u6570 { cnt = -1; memset(Head, -1, sizeof(Head)); memset(Next, -1, sizeof(Next)); this->n = n; } void set_st(int source, int terminal)//\u8bbe\u7f6e\u6e90\u70b9 \u6c47\u70b9 { s = source; t = terminal; } void _Add(int u, int v, int w)//\u524d\u5411\u661f { cnt++; Next[cnt] = Head[u]; Head[u] = cnt; V[cnt] = v; W[cnt] = w; } void Add_Edge(int u, int v, int w)//\u524d\u5411\u661f { _Add(u, v, w); _Add(v, u, 0); } int dfs(int u, int flow)//u\u662f\u5f53\u524d\u8282\u70b9,flow\u662f\u5f53\u524d\u6d41\u91cf { if (u == t)//\u8fbe\u5230\u6c47\u70b9 \u76f4\u63a5\u8fd4\u56de return flow; for (int& i = cur[u]; i != -1; i = Next[i])//\u6ce8\u610f\u8fd9\u91cc\u7684&\u7b26\u53f7\uff0c\u8fd9\u6837i\u589e\u52a0\u7684\u540c\u65f6\u4e5f\u80fd\u6539\u53d8cur[u]\u7684\u503c\uff0c\u8fbe\u5230\u8bb0\u5f55\u5f53\u524d\u5f27\u7684\u76ee\u7684 { if ((Depth[V[i]] == Depth[u] + 1) && (W[i] != 0))//\u5982\u679c\u6ee1\u8db3\u5206\u5c42\u56fe\u6761\u4ef6\u5e76\u4e14\u53c2\u91cf\u4e0d\u4e3a0 { int di = dfs(V[i], min(flow, W[i]));//\u5411\u4e0b\u589e\u5e7f if (di > 0)//\u589e\u5e7f\u6210\u529f { W[i] -= di;//\u6b63\u5411\u8fb9\u51cf W[i ^ 1] += di;//\u53cd\u5411\u8fb9\u52a0 return di;//\u8fd4\u56de\u6d41\u91cf } } } return 0;//\u589e\u5e7f\u5931\u8d25 \u8fd4\u56de0 } bool bfs() { queue<int> Q; while (!Q.empty()) Q.pop(); MS(Depth); Depth[s] = 1;//\u6e90\u70b9\u7684\u6df1\u5ea6\u4e3a1 Q.push(s); while (!Q.empty()) { int u = Q.front(); Q.pop(); for (int i = Head[u]; i != -1; i = Next[i]) if ((Depth[V[i]] == 0) && (W[i] > 0))//\u6df1\u5ea6\u7b49\u4e8e0\u5e76\u4e14\u6b8b\u91cf\u5927\u4e8e0 { Depth[V[i]] = Depth[u] + 1;//\u5b83\u5c31\u662f\u4e0b\u4e00\u5c42 Q.push(V[i]); } } if (!Depth[t]) return 0;//\u5982\u679c\u6c47\u70b9\u7684\u6df1\u5ea6\u4e3a0 \u4e5f\u5c31\u662f\u4e0d\u5b58\u5728\u589e\u5e7f\u8def return 1;//\u6c47\u70b9\u6df1\u5ea6\u4e0d\u4e3a0 \u5b58\u5728\u589e\u5e7f\u8def } int Dinic() { int Ans = 0;//\u7eaa\u5f55\u6700\u5927\u6d41\u91cf while (bfs())//\u5b58\u5728\u589e\u5e7f\u8def { for (int i = 1; i <= n; i++)//\u5f53\u524d\u5f27\u4f18\u5316 cur[i] = Head[i]; while (int d = dfs(s, inf))//\u6e90\u70b9\u6c47\u5165inf\u7684\u6d41\u91cf \u5f53\u8fd8\u80fd\u589e\u5e7f\u65f6 \u4e00\u76f4\u589e\u52a0\u6d41\u91cf { Ans += d; } } return Ans;//\u8fd4\u56de\u6d41\u91cf } }G;","title":"\u7f51\u7edc\u6d41\u6700\u5927\u6d41"},{"location":"DataStructure/graph/netstream/#1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> using namespace std; const int maxn = 1e4 + 10; const int maxm = 1e5 + 10; const int maxt = 2139062143; inline int min_(int x, int y) { return x < y ? x : y; } int n, m, s, t, nflow, nfee, flow, fee; int a, b, c, d; int h[maxn], hs = 1; int e_q[maxm], e_z[maxm], e_n[maxm], e_w[maxm], e_f[maxm]; void add(int q, int z, int k, int w, int f) { e_q[k] = q, e_z[k] = z, e_n[k] = h[q], e_w[k] = w, e_f[k] = f, h[q] = k; } int q[maxm], head, tail; int w[maxn], p[maxn]; bool v[maxn]; int ap(int k, int v) { if (k == s) return v; int ret = ap(e_q[p[k]], min_(v, e_w[p[k]])); if (!e_f[p[k] ^ 1]) add(k, e_q[p[k]], p[k] ^ 1, 0, -e_f[p[k]]); e_w[p[k]] -= ret, e_w[p[k] ^ 1] += ret; return ret; } void Mcmf() { while (1) { memset(w, 0x7f, sizeof(w)); memset(v, 0, sizeof(v)); head = tail = w[s] = 0; q[head++] = s, v[s] = 1; while (head > tail) { a = q[tail++], v[a] = 0; for (int i = h[a]; i; i = e_n[i]) if (0ll + e_f[i] + w[a] < w[e_z[i]] && e_w[i]) { p[e_z[i]] = i; w[e_z[i]] = e_f[i] + w[a]; if (!v[e_z[i]]) q[head++] = e_z[i], v[e_z[i]] = 1; } } if (w[t] == maxt) break; nflow = ap(t, maxt); flow += nflow; fee += nflow * w[t]; } }","title":"\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d411"},{"location":"DataStructure/graph/netstream/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 #include <iostream> #include<bits/stdc++.h> using namespace std; #define INF 0x3f3f3f3f const int maxn = 5000 + 7; /**********\u90bb\u63a5\u8868\u6570\u7ec4\u5f62\u5f0f***********/ struct Edge {/***\u8868\u8fb9**/ int from, to;/****\u8d77\u70b9\u7ec8\u70b9***/ int next;/*****\u76f8\u540c\u8d77\u70b9 \u7684\u4e0b\u4e00\u6761\u8fb9***/ int cap, flow;/*****\u8be5\u8fb9 \u7684 \u5bb9\u91cf \u548c\u6d41\u91cf***/ int cost;/****\u82b1\u8d39**/ }edge[maxn * 20]; int head[maxn];/****\u8868\u5934***/ int pre[maxn]; int dist[maxn], n, m, tot, s, t; bool vis[maxn]; /***\u52a0\u8fb9\u51fd\u6570********/ void addEdge(int a, int b, int c, int cost) {//\u6ce8\u610f\u53cd\u5411\u5f27\u7684\u8d1f\u6743\u503c edge[tot].from = a; edge[tot].to = b;/*****a\u5230 b****/ edge[tot].next = head[a];/*****\u4ed6\u7684\u4e0b\u4e00\u6761\u8fb9 \u662f \u4e4b\u524d\u6700\u540e\u4e00\u6761 \u4ee5 a\u4e3a\u8d77\u70b9\u7684\u8fb9******/ edge[tot].cap = c; edge[tot].flow = 0;/*******\u5bb9\u91cf \u6d41\u91cf \u6d41\u91cf\u521d\u59cb\u5316 \u4e3a 0*******/ edge[tot].cost = cost; head[a] = tot++;/***\u4ed6\u6210\u4e3a \u76ee\u524d \u4ee5a \u4e3a\u8d77\u70b9\u7684\u6700\u540e\u4e00\u6761\u8fb9****/ /*****\u53cd\u5411\u8fb9\u7684\u5efa\u7acb \u53cd\u5411\u8fb9\u7684\u5bb9\u91cf \u521d\u59cb\u5316\u4e3a 0******/ edge[tot].from = b; edge[tot].to = a; edge[tot].next = head[b]; edge[tot].cap = 0; edge[tot].flow = 0; edge[tot].cost = -cost; head[b] = tot++; } bool SPFA() {//SPFA\u6c42\u589e\u5e7f\u8def\uff0cdist[t]\u4fdd\u5b58\u6700\u5c0f\u82b1\u8d39 \uff0c memset(dist, INF, sizeof(dist)); memset(vis, 0, sizeof(vis)); queue<int> que; dist[s] = 0; vis[s] = 1; que.push(s); while (!que.empty()) { int u = que.front(); que.pop(); vis[u] = 0; for (int i = head[u]; i != -1/**\u53ef\u4ee5 \u7528\uff5ei*/; i = edge[i].next) { int v = edge[i].to; if (edge[i].cap > edge[i].flow && dist[v] > dist[u] + edge[i].cost) { dist[v] = dist[u] + edge[i].cost; pre[v] = i; if (!vis[v]) { vis[v] = 1; que.push(v); } } } } if (dist[t] != INF)return true; return false; } int CostFlow(int &flow) {//EK\u7b97\u6cd5 int mincost = 0; while (SPFA()) {//\u80fd\u627e\u5230\u589e\u5e7f\u8def int Min = INF; for (int i = t; i != s; i = edge[pre[i]].from) {//\u5bfb\u627e\u6700\u5c0f\u6d41 Min = min(Min, edge[pre[i]].cap - edge[pre[i]].flow); } for (int i = t; i != s; i = edge[pre[i]].from) {//\u5904\u7406\u6240\u6709\u8fb9 edge[pre[i]].flow += Min; edge[pre[i] ^ 1].flow -= Min; } flow += Min; mincost += (dist[t] * Min);//\u7d2f\u548c\u6700\u5c0f\u82b1\u8d39 } return mincost; } int main() { int T; scanf(\"%d\", &T); while (T--) { tot = 0; memset(head, -1, sizeof(head)); scanf(\"%d%d%d%d\", &n, &m, &s, &t); for (int i = 0; i < m; i++) { int a, b, c, cost; scanf(\"%d%d%d%d\", &a, &b, &c, &cost); addEdge(a, b, c, cost); } int MaxFlow = 0; int MinCost = CostFlow(MaxFlow); printf(\"%d %d\\n\", MaxFlow, MinCost); } return 0; }","title":"\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d412"},{"location":"DataStructure/graph/netstream/#_2","text":"\u7ed9\u5b9a\u4e00\u4e2a\u7f51\u7edcG=(V,E),\u6e90\u70b9\u4e3aS,\u6c47\u70b9\u4e3aT,\u82e5\u4e00\u4e2a\u8fb9\u96c6E'\u88ab\u5220\u6389\u540e\uff0c\u6e90\u70b9S\u548c\u6c47\u70b9T\u4e0d\u518d\u8fde\u901a\uff0c\u5219\u79f0\u8be5\u8fb9\u96c6\u4e3a\u7f51\u7edc\u7684\u5272\u3002\u8fb9\u7684\u5bb9\u91cf\u4e4b\u548c\u6700\u5c0f\u7684\u5272\u79f0\u4e3a\u7f51\u7edc\u7684\u6700\u5c0f\u5272\u3002 * \u6700\u5927\u6d41\u6700\u5c0f\u5272\u5b9a\u7406\uff1a\u4efb\u4f55\u4e00\u4e2a\u7f51\u7edc\u7684\u6700\u5927\u6d41\u91cf\u7b49\u4e8e\u6700\u5c0f\u5272\u4e2d\u8fb9\u7684\u5bb9\u91cf\u4e4b\u548c eg.\u7ed9\u5b9a\u4e00\u5f20\u65e0\u5411\u56fe\uff0c\u6c42\u6700\u5c11\u53bb\u6389\u591a\u5c11\u4e2a\u70b9\uff0c\u53ef\u4ee5\u4f7f\u56fe\u4e0d\u8fde\u901a\u3002\u70b9\u6570N<=50 \u82e5\u65e0\u5411\u56fe\u4e0d\u8fde\u901a\uff0c\u5219\u56fe\u4e2d\u5fc5\u6709\u4e24\u4e2a\u70b9\u4e0d\u8fde\u901a\uff0c\u4f46\u8fd9\u4e24\u4e2a\u70b9\u662f\u672a\u77e5\u7684\u3002\u53ef\u4ee5\u679a\u4e3e\u8fd9\u4e24\u4e2a\u70b9S\u548cT\uff0c\u7136\u540e\u5728\u5269\u4f59\u7684N-2\u4e2a\u8282\u70b9\u4e2d\u6700\u5c11\u53bb\u6389\u591a\u5c11\u4e2a\uff0c\u53ef\u4ee5\u4f7fS\u548cT\u4e0d\u8fde\u901a\uff08S\u548cT\u4e0d\u662f\u76f4\u63a5\u76f8\u8fde\u7684\uff09 \u6784\u5efa\u70b9\u8fb9\u8f6c\u6362\u7f51\u7edc\uff1a (1)\u628a\u539f\u6765\u65e0\u5411\u56fe\u7684\u6bcf\u4e2a\u70b9x\uff0c\u62c6\u6210x\u548cx'=x+N\u4e24\u4e2a\u70b9 (2)\u5bf9 \\forall x \\neq S,x \\neq T \\forall x \\neq S,x \\neq T ,\u8fde\u6709\u5411\u8fb9\uff08x,x')\uff0c\u5bb9\u91cf\u4e3a1 (3)\u5bf9\u4e8e\u539f\u65e0\u5411\u56fe\u7684\u6bcf\u6761\u8fb9(x,y)\uff0c\u5728\u7f51\u8def\u4e2d\u8fde\u6709\u5411\u8fb9(x',y)\uff0c(y',x)\uff0c\u5bb9\u91cf\u4e3a \\infty \\infty (4)\u4ee5S'\u4e3a\u7f51\u7edc\u7684\u6e90\u70b9\uff0cT\u4e3a\u7f51\u7edc\u7684\u6c47\u70b9\uff0c\u6c42\u6700\u5c0f\u5272\uff08\u6700\u5927\u6d41\uff09\uff0c\u5373\u53ef\u77e5\u9053\u6700\u5c11\u9700\u8981\u83b7\u5f97\u7684\u70b9\u6570 \u82e5\u6c42\u5168\u5c40\u6700\u5c0f\u5272\uff0c\u5219\u9700\u8981\u679a\u4e3e\u6e90\u6c47\u70b9\u6765\u8dd1\u7f51\u7edc\u6d41\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u8f83\u9ad8\uff0c\u4e00\u822c\u4f7f\u7528stoer-wagner\u7b97\u6cd5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 //poj2914 /* translation: \u7ed9\u51fa\u4e00\u526f\u65e0\u6e90\u6c47\u7684\u65e0\u5411\u56fe\uff0c\u6c42\u5176\u6700\u5c0f\u5272\u3002 solution: \u539f\u672c\u7684\u60f3\u6cd5\u662f\u679a\u4e3e\u6e90\u6c47\uff0c\u7136\u540eDINIC\u6700\u5927\u6d41\u3002\u7136\u800c\u8fd9\u6837\u5fc5\u7136\u8d85\u65f6\u3002\u6240\u4ee5\u5fc5\u987b\u6709\u4e00\u79cd\u529e\u6cd5\u80fd\u591f\u5feb\u901f\u6c42\u51fa \u5168\u5c40\u6700\u5c0f\u5272\uff0c\u8fd9\u79cd\u7b97\u6cd5\u5c31\u662fstoer-wagner\u7b97\u6cd5\u3002 */ #include <iostream> #include <cstdio> #include <cstring> using namespace std; const int maxn = 500 + 5; const int INF = 0x3f3f3f3f; int wage[maxn], n, m; bool in_set[maxn], vis[maxn]; int G[maxn][maxn]; int find_min_cut(int& S, int& T) { memset(wage, 0, sizeof(wage)); memset(vis, 0, sizeof(vis)); S = T = -1; int min_cut, u = 0; for(int i = 0; i < n; i++) { int mx = -INF; for(int j = 0; j < n; j++) { if(!in_set[j] && !vis[j] && mx < wage[j]) { mx = wage[j]; u = j; } } if(u == T) return min_cut; S = T; T = u; min_cut = mx; vis[u] = true; for(int v = 0; v < n; v++) { if(!in_set[v] && !vis[v]) { wage[v] += G[u][v]; } } } return min_cut; } int stoer_wagner() { int S, T; int ans = INF, min_cut; for(int i = 1; i < n; i++) { min_cut = find_min_cut(S, T); ans = min(ans, min_cut); if(ans == 0) return ans; in_set[T] = true; for(int j = 0; j < n; j++) { if(!in_set[j] && j != S) { G[S][j] += G[T][j]; G[j][S] += G[j][T]; //\u7f29\u70b9\u64cd\u4f5c\uff0c\u5c06T\u8282\u70b9\u7684\u4fe1\u606f\u9644\u52a0\u5230S\u4e0a\u9762 } } } return ans; } int main() { //freopen(\"in.txt\", \"r\", stdin); while(~scanf(\"%d%d\", &n, &m)) { memset(in_set, 0, sizeof(in_set)); memset(G, 0, sizeof(G)); int u, v, c; for(int i = 0; i < m; i++) { scanf(\"%d%d%d\", &u, &v, &c); G[u][v] += c; G[v][u] += c; } printf(\"%d\\n\", stoer_wagner()); } return 0; }","title":"\u6700\u5c0f\u5272"},{"location":"DataStructure/graph/netstream/#_3","text":"\u5b9a\u4e49\uff1a\u6709\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u6bcf\u4e00\u4e2a\u70b9\u90fd\u6709\u4e00\u4e2a\u6743\u503c(\u6b63\u8d1f\u7686\u53ef),\u9009\u62e9\u4e00\u4e2a\u6743\u503c\u548c\u6700\u5927\u7684\u5b50\u56fe\uff0c \u4f7f\u5f97\u6bcf\u4e2a\u70b9\u7684\u540e\u7ee7\u90fd\u5728\u5b50\u56fe\u91cc\u9762 \uff0c\u8fd9\u4e2a\u5b50\u56fe\u5c31\u53eb\u6700\u5927\u6743\u95ed\u5408\u5b50\u56fe \u89e3\u6cd5\uff1a\u5c06\u5176\u8f6c\u5316\u4e3a\u6700\u5c0f\u5272\u95ee\u9898 (1)\u4ece\u6e90\u70b9s\u5411\u6bcf\u4e2a\u6b63\u6743\u70b9\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a\u6743\u503c\u7684\u8fb9\uff0c\u6bcf\u4e2a\u8d1f\u6743\u70b9\u5411\u6c47\u70b9t\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a\u6743\u503c\u7edd\u5bf9\u503c\u7684\u8fb9\uff0c\u6709\u5411\u56fe\u539f\u6765\u7684\u8fb9\u5bb9\u91cf\u5168\u90e8\u4e3a\u65e0\u9650 (2)\u6c42\u5b83\u7684\u6700\u5c0f\u5272\uff0c\u5272\u6389\u540e\uff0c\u4e0e\u6e90\u70b9s\u8fde\u901a\u7684\u70b9\u6784\u6210\u6700\u5927\u6743\u95ed\u5408\u5b50\u56fe\uff0c\u6743\u503c\u4e3a\uff08\u6b63\u6743\u503c\u4e4b\u548c-\u6700\u5c0f\u5272\uff09 \u7531\u4e8e\u539f\u56fe\u7684\u8fb9\u90fd\u662f\u65e0\u7a77\u5927\uff0c\u90a3\u4e48\u5272\u8fb9\u4e00\u5b9a\u662f\u4e0e\u6e90\u70b9s\u6216\u6c47\u70b9t\u76f8\u8fde\u7684\u3002 \u5272\u6389s\u4e0ei\u7684\u8fb9\uff0c\u8868\u793a\u4e0d\u9009\u62e9i\u70b9\u4f5c\u4e3a\u5b50\u56fe\u7684\u70b9\uff1b \u5272\u6389i\u4e0et\u7684\u8fb9\uff0c\u8868\u793a\u9009\u62e9i\u70b9\u4e3a\u5b50\u56fe\u7684\u70b9\u3002 \u5982\u679cs\u4e0ei\u6709\u8fb9\uff0c\u8868\u793ai\u5b58\u5728\u5b50\u56fe\u4e2d\uff1b \u5982\u679ci\u4e0et\u6709\u8fb9\uff0c\u8868\u793ai\u4e0d\u5b58\u5728\u4e8e\u5b50\u56fe\u4e2d\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 #include <bits/stdc++.h> using namespace std; typedef struct Edge { int u, v, w, next; }Edge; const int inf = 0x7f7f7f7f; const int maxn = 500; int cnt, dhead[maxn]; int cur[maxn], dd[maxn]; Edge dedge[maxn*maxn]; int S, T, N; int n, m; void init() { memset(dhead, -1, sizeof(dhead)); for(int i = 0; i < maxn; i++) dedge[i].next = -1; cnt = 0; } void adde(int u, int v, int w, int c1) { dedge[cnt].u = u; dedge[cnt].v = v; dedge[cnt].w = w; dedge[cnt].next = dhead[u]; dhead[u] = cnt++; dedge[cnt].u = v; dedge[cnt].v = u; dedge[cnt].w = c1; dedge[cnt].next = dhead[v]; dhead[v] = cnt++; } bool bfs(int s, int t, int n) { queue<int> q; for(int i = 0; i < n; i++) dd[i] = inf; dd[s] = 0; q.push(s); while(!q.empty()) { int u = q.front(); q.pop(); for(int i = dhead[u]; ~i; i = dedge[i].next) { if(dd[dedge[i].v] > dd[u] + 1 && dedge[i].w > 0) { dd[dedge[i].v] = dd[u] + 1; if(dedge[i].v == t) return 1; q.push(dedge[i].v); } } } return 0; } int dinic(int s, int t, int n) { int st[maxn], top; int u; int flow = 0; while(bfs(s, t, n)) { for(int i = 0; i < n; i++) cur[i] = dhead[i]; u = s; top = 0; while(cur[s] != -1) { if(u == t) { int tp = inf; for(int i = top - 1; i >= 0; i--) { tp = min(tp, dedge[st[i]].w); } flow += tp; for(int i = top - 1; i >= 0; i--) { dedge[st[i]].w -= tp; dedge[st[i] ^ 1].w += tp; if(dedge[st[i]].w == 0) top = i; } u = dedge[st[top]].u; } else if(cur[u] != -1 && dedge[cur[u]].w > 0 && dd[u] + 1 == dd[dedge[cur[u]].v]) { st[top++] = cur[u]; u = dedge[cur[u]].v; } else { while(u != s && cur[u] == -1) { u = dedge[st[--top]].u; } cur[u] = dedge[cur[u]].next; } } } return flow; } int main() { // freopen(\"in\", \"r\", stdin); int k, u, v, w; while(~scanf(\"%d %d\", &n, &m)) { init(); S = 0; T = n + m + 1; N = T + 1; int pos = 0; for(int i = 1; i <= m; i++) { scanf(\"%d\", &w); if(w != 0) adde(n+i, T, w, 0); else adde(n+i, T, inf, 0); } for(int i = 1; i <= n; i++) { scanf(\"%d %d\", &w, &k); pos += w; if(w != 0) adde(S, i, w, 0); else adde(S, i, inf, 0); for(int j = 0; j < k; j++) { scanf(\"%d\", &v); adde(i, n+v, inf, 0); } } printf(\"%d\\n\", pos - dinic(S,T,N)); } }","title":"\u6700\u5927\u6743\u95ed\u5408\u5b50\u56fe"},{"location":"DataStructure/graph/tarjan/","text":"Tarjan\u7b97\u6cd5 \u00b6 \u6838\u5fc3\uff1adfn\u65f6\u95f4\u6233\u5e8f\u548clow\u6700\u65e9\u65f6\u6570\u7ec4\u7684\u7ef4\u62a4 \u5e94\u7528\uff1a * \u6c42\u89e3\u6709\u5411\u56fe\u7684\u5f3a\u8fde\u901a\u5206\u91cf * \u6c42\u89e3\u65e0\u5411\u56fe\u7684\u5272\u70b9\u548c\u6865 * \u6c42\u89e3\u65e0\u5411\u56fe\u7684\u53cc\u8fde\u901a\u5206\u91cf * \u79bb\u7ebf\u6c42\u89e3lca(\u8865\u5145lca\u7684\u5176\u4ed6\u7b97\u6cd5) tarjan\u57fa\u4e8edfs\u7b97\u6cd5\uff0c\u6545\u9700\u8981\u94fe\u5f0f\u524d\u5411\u661f\u50a8\u5b58\u56fe\u7684\u76f4\u63a5\u62d3\u6251\u5173\u7cfb 1.\u6709\u5411\u56fe\u7684\u5f3a\u8fde\u901a\u5206\u91cf \u00b6 \u5f3a\u8fde\u901a\uff1a\u5982\u679c\u4e24\u4e2a\u9876\u70b9\u53ef\u4ee5\u76f8\u4e92\u901a\u8fbe\uff0c\u5219\u79f0\u4e24\u4e2a\u9876\u70b9\u5f3a\u8fde\u901a\u3002\u5982\u679c\u6709\u5411\u56feG\u7684\u6bcf\u4e24\u4e2a\u9876\u70b9\u90fd\u5f3a\u8fde\u901a\uff0c\u5219G\u662f\u4e2a\u5f3a\u8fde\u901a\u56fe\u3002\u975e\u5f3a\u8fde\u901a\u56fe\u6709\u5411\u56fe\u7684\u6781\u5927\u8fde\u901a\u5b50\u56fe\uff0c\u79f0\u4e3a\u5f3a\u8fde\u901a\u5206\u91cf\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 struct Edge { int from , to , weight , next ; } edge [ maxm ]; int head [ maxn ], edgenum , dfn [ maxn ], low [ maxn ], stack [ maxn ], vis [ maxn ], num [ maxn ], cnt , t , tarjanpoint ; void init () { memset ( head , -1 , sizeof ( head )); edgenum = 0 ; } void addedge ( int u , int v , int d ) { Edge e ; e . from = u ; e . to = v ; e . weight = d ; e . next = head [ u ]; edge [ edgenum ] = e ; head [ u ] = edgenum ++ ; } void tarjan ( int now ) { dfn [ now ] = low [ now ] =++ tim ; //\u65f6\u95f4\u6233\u5e8f\u4ece1\u5f00\u59cb stack [ ++ top ] = now ; //\u6808\u6570\u7ec4\uff0c\u901a\u8fc7t\u6a21\u62df\u51fa\u5165\u6808\u64cd\u4f5c vis [ now ] = 1 ; //\u6807\u8bb0\u662f\u5426\u5165\u6808 for ( int i = head [ now ]; i != -1 ; i = edge [ i ]. next ) { if ( ! dfn [ edge [ i ]. to ]) //\u672a\u88ab\u641c\u7d22\u8fc7 { tarjan ( edge [ i ]. to ); low [ now ] = min ( low [ now ], low [ edge [ i ]. to ]); //\u56de\u6eaf\u66f4\u65b0\u6700\u65e9\u503c } else //\u5df2\u7ecf\u641c\u7d22\u8fc7 { if ( vis [ edge [ i ]. to ]) //\u5728\u6808\u5185 { low [ now ] = min ( low [ now ], dfn [ edge [ i ]. to ]); //\u6ce8\u610f\u662f\u7528dfn\u66f4\u65b0\u6700\u65e9\u503c\uff0c\u9632\u6b62\u8be5\u70b9\u5728\u53e6\u4e00\u4e2a\u5f3a\u8fde\u901a\u5b50\u56fe\u4e2d\u800c\u6ca1\u51fa\u6808\uff0c\u82e5\u7528low\u6015\u8d70\u4e0d\u5230 } } } if ( dfn [ now ] == low [ now ]) //\u8fde\u901a\u91cf\u6839\u8282\u70b9 { int cur ; tarjanpoint ++ ; //\u7f29\u70b9\u8bb0\u5f55 do { cur = stack [ top -- ]; vis [ cur ] = 0 ; belong [ cur ] = tarjanpoint ; //\u7f29\u70b9\u5f52\u5c5e\u6570\u7ec4 num [ tarjanpoint ] ++ ; } while ( now != cur && top ); } } //\u56fe\u4e0d\u4e00\u5b9a\u662f\u5168\u8fde\u901a\u56fe\uff0c\u5219\u9700\u8981\u9010\u70b9tarjan for ( int i = 1 ; i <= n ; i ++ ) { if ( ! dfn [ i ]) { tarjan ( i ); } } tarjan\u5bf9\u6709\u5411\u56fe\u7684\u7f29\u70b9\u7b97\u6cd5\u6709\u5f88\u5927\u7528\u5904\uff1a \uff081\uff09\u7f29\u70b9\u540e\u79f0\u4e3a\u65e0\u73af\uff08\u65e0\u5f3a\u8fde\u901a\u5206\u91cf\uff09\u56fe\uff0c\u53ef\u4ee5\u901a\u8fc7\u65b0\u56fe\u7684\u5404\u70b9\u5ea6\u6570\u6c42\u89e3\u5404\u79cd\u7ea6\u675f\u52a0\u51cf\u8fb9\u7684\u64cd\u4f5c(\u4f8b\u5982\u8981\u52a0\u591a\u5c11\u6761\u8fb9\u624d\u80fd\u4f7f\u8fd9\u4e2adag\u56fe\u8fde\u901a:\u8bbe\u5165\u5ea6\u4e3a0\u7684\u70b9\u7684\u6570\u91cf\u4e3an\uff0c\u51fa\u5ea6\u4e3a0\u7684\u70b9\u7684\u6570\u91cf\u4e3am\uff0c\u90a3\u9700\u8981\u52a0\u7684\u8fb9\u6570\u5c31\u662fmax\uff08n\uff0cm\uff09\u56e0\u4e3a\u8981\u5c06\u5165\u5ea6\u4e3a0\u7684\u70b9\u548c\u51fa\u5ea6\u4e3a0\u7684\u70b9\u8fde\u63a5\u8d77\u6765\u3002) \uff082\uff09\u7f29\u70b9\u8fd8\u53ef\u4ee5\u89e3\u51b32-SAT\uff08\u77db\u76fe\uff09\u95ee\u9898\uff08\u7f29\u70b9+\u62d3\u6251\u67d3\u8272\u68c0\u6233\uff09 \u4e00\u4e2a\u7267\u5e08\u8981\u7ed9n\u4e2a\u5a5a\u793c\u8fdb\u884c\u4e00\u4e2a\u4eea\u5f0f \u7ed9\u5b9a\u5a5a\u793c\u5f00\u59cb\u7684\u65f6\u95f4\u548c\u7ed3\u675f\u7684\u65f6\u95f4 \u4eea\u5f0f\u8981\u4e48\u5728\u5a5a\u793c\u521a\u521a\u5f00\u59cb\u7684\u65f6\u5019\u8fdb\u884c\uff0c\u8981\u4e48\u8fdb\u884c\u5b8c\u5a5a\u793c\u6b63\u597d\u7ed3\u675f \u95ee\u7267\u5e08\u80fd\u5426\u53c2\u52a0\u6240\u6709\u7684\u5a5a\u793c \u5e76\u8f93\u51fa\u65b9\u6848 Input The first line contains a integer N(1 \u2264 N \u2264 1000). The next N lines contain the Si, Ti and Di.Si and Ti are in the format of hh : mm. Output The first line of output contains \"YES\" or \"NO\" indicating whether John can be present at every special ceremony.If it is \"YES\", output another N lines describing the staring time and finishing time of all the ceremonies. Sample Input 2 08 : 00 09 : 00 30 08 : 15 09 : 00 20 Sample Output YES 08 : 00 08 : 30 08 : 40 09 : 00 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 #include<iostream> #include<cstdio> #include<cstring> #include<cstdlib> #include<cmath> #include<vector> #include<queue> #include<algorithm> using namespace std; const int MAX = 10500; int Col[MAX], In[MAX], len[MAX], Opp[MAX]; int s[MAX], G[MAX], dfn[MAX], low[MAX]; int group = 0, top = 0, tim = 0; bool vis[MAX]; int n; vector<int> E[MAX];//\u8d85\u7ea7\u70b9\u5c31\u7528vector\u6765\u5b58\u8fb9,\u65b9\u4fbf\u4e9b struct Time { int b, e;//b\u8868\u793a\u5f00\u59cb\u65f6\u95f4\uff0ce\u8868\u793a\u7ed3\u675f\u65f6\u95f4 }t[MAX]; struct Edge { int from,to,weigh,next; }edge[MAX*MAX];//\u8dd1Tarjan\u65f6\u7528\u6765\u5b58\u8fb9\u7684\u94fe\u5f0f\u524d\u5411\u661f int h[MAX], cnt = 0;//\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u50a8 void Add(int u, int v);//\u8fde\u8fb9\uff0c\u4eceu->v void Link();//\u8fde\u8fb9 bool Wrong(int i, int j);//\u68c0\u67e5\u4e24\u4e2a\u65f6\u95f4\u662f\u5426\u77db\u76fe void Tarjan(int u);//\u7f29\u70b9 void Top();//\u62d3\u6251\u6392\u5e8f inline void Add(int u, int v)//\u8fde\u8fb9\uff0c\u4eceu->v { Edeg e; e.from=u; e.to=v; e.next=head[u]; edge[cnt]=e; head[u]=cnt++; } bool Wrong(int i, int j)//\u5224\u65ad\u4e24\u4e2a\u65f6\u95f4\u662f\u5426\u77db\u76fe { if (t[i].b >= t[j].e || t[i].e <= t[j].b) return false; else return true; //\u53ea\u8981\u67d0\u4e00\u4e2a\u7ed3\u675f\u65f6\u95f4\u5728\u53e6\u4e00\u4e2a\u7684\u5f00\u59cb\u65f6\u95f4\u4e4b\u524d\u5219\u65e0\u77db\u76fe //\u53cd\u4e4b\u5fc5\u5b9a\u5b58\u5728\u77db\u76fe } void Link()//\u8fde\u8fb9 { for (int i = 1; i <= n; ++i) for (int j = 1; j <= n; ++j)//\u679a\u4e3e\u4efb\u610f\u4e24\u7ec4\u4eea\u5f0f\u7684\u65f6\u95f4\uff0c\u67e5\u770b\u662f\u5426\u5b58\u5728\u77db\u76fe { if (i == j)continue;//\u81ea\u5df1\u548c\u81ea\u5df1\u6ca1\u6709\u6bd4\u8f83\u7684\u610f\u4e49 if (Wrong(i, j))//\u5f00\u5934\u548c\u5f00\u5934\u77db\u76fe Add(i, j + n); if (Wrong(i, j + n))//\u5f00\u5934\u548c\u7ed3\u5c3e\u77db\u76fe Add(i, j); if (Wrong(i + n, j))//\u7ed3\u5c3e\u548c\u5f00\u5934\u77db\u76fe Add(i + n, j + n); if (Wrong(i + n, j + n))//\u7ed3\u5c3e\u548c\u7ed3\u5c3e\u77db\u76fe Add(i + n, j); } } void Tarjan(int u)//\u7f29\u70b9 { dfn[u] = low[u] = ++tim; s[++top] = u; vis[u] = true; int v; for (int i = h[u]; i != -1; i = edge[i].next) { v = e[i].v; if (!dfn[v]) { Tarjan(v); low[u] = min(low[u], low[v]); } else if (vis[v]) low[u] = min(low[u], dfn[v]); } if (low[u] == dfn[u]) { ++tarjanpoint; do { v = s[top--]; vis[v] = false; belong[v] = tarjanpoint; } while (v != u && top); } } void Top()//\u62d3\u6251\u6392\u5e8f,\u62d3\u6251\u68c0\u6233 \uff08\u5bf9\u7f29\u5b8c\u70b9\u7684\u56fe\u7684\u5de5\u4f5c\uff0c\u5373\u9488\u5bf9\u8d85\u7ea7\u70b9\uff09 { memset(In, 0, sizeof(In));//\u5b58\u5165\u5ea6 memset(Col, -1, sizeof(Col));//\u5b58\u989c\u8272 for (int i = 1; i <= 2 * n; ++i)//\u8fde\u63a5\u8d85\u7ea7\u70b9\u5efa\u65b0\u56fe { for (int j = h[i]; j != -1; j = e[j].next)//\u679a\u4e3e\u90bb\u8fb9 { int v = edge[j].v; if (belong[i] == belong[v])continue;//\u5728\u540c\u4e00\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u4e2d\u65e0\u9700\u8003\u8651 E[belong[v]].push_back(belong[i]);//\u8fb9\u8981\u53cd\u7740\u5b58 \uff08\u53cd\u5411\u67d3\u8272\u6cd5\uff09 In[belong[i]]++;//\u7edf\u8ba1\u5165\u5ea6 \uff08\u53cd\u5411\u53f6\u5b50\u6216\u5b64\u7acb\u70b9\u5165\u5ea6\u6700\u5c0f\uff09 } } queue<int> Q;//\u62d3\u6251\u6392\u5e8f\u7684\u961f\u5217 for (int i = 1; i <= tarjanpoint; ++i) if (In[i] == 0)Q.push(i);//\u5165\u5ea6\u4e3a0\u7684\u8fdb\u961f while (!Q.empty()) { int v = Q.front(); Q.pop(); if (Col[v] == -1)//\u672a\u67d3\u8272 { Col[v] = 1; //\u67d3\u4e3a1 Col[Opp[v]] = 0;//\u5bf9\u7acb\u70b9\u67d3\u4e3a0 } for (int i = 0; i < E[v].size(); ++i)//\u4f9d\u6b21\u51cf\u5165\u5ea6 { In[E[v][i]]--; if (In[E[v][i]] == 0)//\u5165\u5ea6\u4e3a0 Q.push(E[v][i]); } } } int main() { while (cin >> n) { memset(h, -1, sizeof(h)); cnt = 0; tim = group = top = 0; memset(dfn, 0, sizeof(dfn)); memset(low, 0, sizeof(low)); memset(In, 0, sizeof(In)); memset(vis, 0, sizeof(vis)); memset(Opp, 0, sizeof(Opp)); for (int i = 1; i <= n; ++i) { int a, b, c, d, e; scanf(\"%d:%d %d:%d %d\", &a, &b, &c, &d, &len[i]); //\u8fd9\u91cc\u90fd\u628a\u65f6\u95f4\u8f6c\u5316\u4e3a\u5206\u949f\u6765\u8ba1\u7b97 t[i].b = a * 60 + b; t[i + n].e = c * 60 + d; t[i].e = t[i].b + len[i];//\u8ba1\u7b97\u5f00\u5934\u7684\u7ed3\u675f\u65f6\u95f4 t[i + n].b = t[i + n].e - len[i];//\u8ba1\u7b97\u7ed3\u5c3e\u7684\u5f00\u59cb\u65f6\u95f4 //i \u8868\u793a\u7b2ci\u4e2a\u5a5a\u793c\u7684\u4eea\u5f0f\u5728\u5f00\u59cb\u7684\u65f6\u5019\u4e3e\u884c //i+m \u8868\u793a\u7b2ci\u4e2a\u5a5a\u793c\u7684\u4eea\u5f0f\u5728\u7ed3\u675f\u7684\u65f6\u5019\u4e3e\u884c } Link();//\u8fde\u8fb9 for (int i = 1; i <= 2 * n; ++i)//\u7f29\u70b9 if (!dfn[i])Tarjan(i); for (int i = 1; i <= n; ++i)//\u5224\u65ad\u662f\u5426\u6709\u89e3 { if (belong[i] == belong[i + n])//\u67d0\u4e2a\u5a5a\u793c\u7684 \u5f00\u59cb/\u7ed3\u675f \u5728\u540c\u4e00\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u4e2d\uff0c\u65e0\u89e3 { cout << \"NO\" << endl; return 0; } Opp[belong[i]] = belong[i + n];//\u5b58\u4e00\u4e0b\u8d85\u7ea7\u70b9\u7684\u7684\u5bf9\u7acb\u70b9 Opp[belong[i + n]] = belong[i];//\u53cd\u5411\u4e5f\u8981\u5b58 } cout << \"YES\" << endl;//\u4e0d\u5b58\u5728\u77db\u76fe\uff0c\u5219\u6709\u89e3 Top();//Top\u6392\u5e8f for (int i = 1; i <= n; ++i) { if (Col[beong[i]] == 1)//\u9009\u62e9\u4e86\u518d\u5a5a\u793c\u5f00\u59cb\u65f6 printf(\"%.2d:%.2d %.2d:%.2d\\n\", t[i].b / 60, t[i].b % 60, t[i].e / 60, t[i].e % 60); else //\u5728\u5a5a\u793c\u7ed3\u675f\u65f6 printf(\"%.2d:%.2d %.2d:%.2d\\n\", t[i + n].b / 60, t[i + n].b % 60, t[i + n].e / 60, t[i + n].e % 60); } } } * \u5199\u5728AC\u540e\u9762\uff1a \u8fd9\u51e0\u90532-sat\u9898\u771f\u662f\u82b1\u5f0f\u51fa\u9519 \u8fd9\u9053\u7684\u9519\u8bef\u662f\u7f29\u70b9\u4ee5\u540e\uff0c\u5e76\u4e0d\u662f\u6309\u7167\u8d85\u7ea7\u70b9\u6765\u8f93\u51fa(\u660e\u663e\u4f1a\u6302\u5440) \u7136\u800c\u3002\u3002\u3002\u67e5\u4e861\u5c0f\u65f6\u7684\u9519 \u611f\u53f9\u4e00\u53e5\uff1a\u5bf9\u62cd\u771f\u662f\u5229\u5668\u4e5f\u3002\u3002\u3002 */ Tip: (1)\u68c0\u6233\u5f80\u5f80\u662f\u8fd8\u539f\u65b9\u6848\u7684\u91cd\u8981\u63aa\u65bd\uff1a\u5176\u4e2d\u50cfLCS,LIS\u8981\u8f93\u51fa\u65b9\u6848\u65f6\u9700\u8981dp\u8fc7\u7a0b\u4e2d\u91c7\u53d6\u9006\u5411\u68c0\u6233\uff08\u8be6\u89c1DP)\uff0c\u800c\u56fe\u65b9\u6848\u7684\u95ee\u9898\u5219\u5982\u4e0a\u8ff0\u8fdb\u884c\u62d3\u6251\u68c0\u6233 2.\u65e0\u5411\u56fe\u7684\u5272\u70b9\u4e0e\u5272\u8fb9\uff08\u6865\uff09 \u00b6 \uff081\uff09\u5272\u70b9 \uff1a \u5272\u70b9\uff1a\u5728\u65e0\u5411\u8fde\u901a\u56fe\u4e2d\u53bb\u6389\u8fd9\u4e2a\u70b9\u548c\u6240\u6709\u8fd9\u4e2a\u70b9\u76f8\u8fde\u7684\u8fb9\u540e\uff0c\u539f\u5148\u8fde\u901a\u7684\u5757\u5c31\u4f1a\u76f8\u4e92\u5206\u79bb\u53d8\u6210\u81f3\u5c11\u4e24\u4e2a\u5206\u79bb\u7684\u8fde\u901a\u5757\u7684\u70b9\u3002 Tarjan\u7b97\u6cd5\u6c42\u5272\u70b9\uff1a * \u82e5u\u4e3a\u6811\u7684\u6839\u8282\u70b9\uff0c\u53ea\u8981u\u6709\u4e24\u4e2a\u53ca\u4ee5\u4e0a\u5b50\u8282\u70b9\uff0c\u5219u\u4e3a\u5272\u70b9 * \u82e5u\u4e0d\u4e3a\u6839\u8282\u70b9\uff0cv\u4e0d\u4e3au\u7684\u7236\u8282\u70b9\uff0c\u5f53dfn[u]<=low[v]\u65f6\uff0cu\u4e3a\u5272\u70b9 \u7531\u6b64\u89c2\u4e4b\uff0c\u5728\u65e0\u5411\u56fe\u6c42\u5272\u70b9\u7684tarjan\u7b97\u6cd5\u91cc,\u4e0d\u9700\u8981\u6808\u6570\u7ec4 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 //\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u8fb9\u548c\u5404\u6570\u7ec4\u521d\u59cb\u5316\u4e0e\u4e0a\u8ff0\u76f8\u540c void tarjan(int u) { dfn[u]=low[u]=++tim; int child=0; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn) { tarjan(v); low[u]=min(low[u],low[v]); if(u!=root && low[v]>=dfn[u])//\u975e\u6839\u8282\u70b9\u60c5\u51b5 { cut[u]=1; } if(u==root && ++child>=2)//\u6839\u8282\u70b9\u60c5\u51b5 { cut[u]=1; } } else { low[u]=min(low[u],dfn[v]); } } } //\u5728main\u51fd\u6570\u4e2d\u6ce8\u610f\u7684\u662f\u53cc\u5411\u5efa\u8fb9\u548c\u975e\u8fde\u901a\u56fe\u7684\u9010\u70b9\u5b9a\u6839\u548c\u9010\u6839tarjan int main() { ... add(x,y),add(y,x); ... for(int i=1;i<=n;i++) { if(!dfn[i]) { root=i; tarjan(i); } } } \uff082\uff09\u5272\u8fb9\uff08\u6865\uff09 \u5272\u8fb9\uff08\u6865\uff09\uff1a\u5728\u65e0\u5411\u8fde\u901a\u56fe\u4e2d\u53bb\u6389\u8fd9\u6761\u8fb9\u540e\uff0c\u539f\u5148\u8fde\u901a\u7684\u5757\u5c31\u4f1a\u76f8\u4e92\u5206\u79bb\u53d8\u6210\u81f3\u5c11\u4e24\u4e2a\u5206\u79bb\u7684\u8fde\u901a\u5757\u7684\u8fb9\u3002 \u6838\u5fc3\uff1a\u5018\u82e5\u9876\u70b9u\u4e0d\u80fd\u56de\u5230\u7956\u5148\uff0c\u4e5f\u6ca1\u6709\u53e6\u5916\u4e00\u6761\u8def\u56de\u5230\u7236\u4eb2\uff0c\u90a3\u4e48v-u\u5c31\u662f\u5272\u8fb9 \u7531\u4e8e\u53ef\u80fd\u51fa\u73b0\u91cd\u8fb9\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u4e0d\u80fd\u662f\u8bb0\u5f55\u7236\u4eb2\u8282\u70b9\uff0c\u800c\u662f\u6539\u6210\u8bb0\u5f55\u5165\u8fb9\u7684\u7f16\u53f7 \u5728\u94fe\u5f0f\u524d\u5411\u661f\u7684\u5efa\u56fe\u65b9\u5f0f\u4e2d\uff0c \u548c \u662f\u7f16\u53f7\u76f8\u90bb\u7684\u4e00\u5bf9\uff0c\u4e0d\u59a8\u4ece2\u5f00\u59cb\u7f16\u53f7\u3002\u4e00\u5bf9\u8fb9\u7f16\u53f7\u5219\u6709a 1=b,b 1=a tarjan\u7b97\u6cd5\u6c42\u5272\u8fb9\uff1a \u5f53\u4e14\u4ec5\u5f53\u65e0\u5411\u8fb9\uff08u,v)\u662f\u6811\u679d\u8fb9\u7684\u65f6\u5019\uff0c\u9700\u8981\u6ee1\u8db3dfn[u]<low[v] \u6ce8\u610f\uff1a\u6ca1\u6709\u7b49\u53f7\uff01\uff01\uff01\uff01\uff01 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 //\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u8fb9\u548c\u5404\u6570\u7ec4\u521d\u59cb\u5316\u4e0e\u6709\u4e00\u4e01\u70b9\u533a\u522b //\u521d\u59cb\u5316\u8ba1\u8fb9\u6570ecnt=2; void tarjan(int u,int ein) { dfn[u]=low[u]=++tim; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn[v]) { tarjan(v,i); low[u]=min(low[u],low[v]); if(low[v]>dfn[u]) { bridge[i]=bridge[i^1]=1; } else if(i!=(ein^1)) { low[u]=min(low[u],dfn[v]);//\u76f8\u5f53\u4e8e\u4e0d\u7528\u7236\u4eb2\u8282\u70b9\u6765\u66f4\u65b0\u81ea\u5df1\u7684low } } } } //\u5728main\u51fd\u6570\u4e2d\u540c\u6837\u9010\u6839tarjan 3.\u65e0\u5411\u56fe\u7684\u53cc\u8fde\u901a\u5206\u91cf \u00b6 \u53cc\u8fde\u901a\u5206\u91cf\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u65e0\u5411\u56fe\uff0c\u5176\u8fb9/\u70b9\u8fde\u901a\u5ea6\u5927\u4e8e1\uff0c\u6ee1\u8db3\u4efb\u610f\u4e24\u70b9\u4e4b\u95f4\uff0c\u80fd\u901a\u8fc7\u4e24\u6761\u6216\u4e24\u6761\u4ee5\u4e0a\u6ca1\u6709\u4efb\u4f55\u91cd\u590d\u8fb9/\u70b9\u7684\u8def\u5230\u8fbe\u7684\u56fe\uff0c\u5373\u5220\u6389\u4efb\u610f\u8fb9/\u70b9\u540e\uff0c\u56fe\u4ecd\u662f\u6765\u8fde\u901a\u7684 \u5b9a\u7406\uff1a * \u4e00\u5f20\u65e0\u5411\u8fde\u901a\u56fe\u662f\u70b9\u53cc\u8fde\u901a\u56fe\u5f53\u4e14\u4ec5\u5f53\u56fe\u7684\u9876\u70b9\u6570<=2 \u6216 \u56fe\u4e2d\u4efb\u610f\u4e24\u70b9\u90fd\u540c\u65f6\u5305\u542b\u5728\u81f3\u5c11\u4e00\u4e2a\u7b80\u5355\u73af\u4e2d\uff0c\u5373\u70b9\u53cc\u8fde\u901a\u5206\u91cf\u6ca1\u6709\u5272\u70b9 * \u4e00\u5f20\u65e0\u5411\u8fde\u901a\u56fe\u662f\u8fb9\u53cc\u8fde\u901a\u56fe\u5f53\u4e14\u4ec5\u5f53\u4efb\u610f\u4e00\u6761\u8fb9\u90fd\u5305\u542b\u5728\u81f3\u5c11\u4e00\u4e2a\u7b80\u5355\u73af\u4e2d\uff0c\u5373\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\u6ca1\u6709\u6865 \uff081\uff09\u70b9\u53cc\u8fde\u901a\u5206\u91cf \u6838\u5fc3\uff1a\u6c42\u5272\u70b9 \u6c42\u70b9\u53cc\u8fde\u901a\u5206\u91cf\u53ef\u4ee5\u5728\u6c42\u5272\u70b9\u7684\u540c\u65f6\u7528\u6808\u7ef4\u62a4 \u5728\u641c\u7d22\u56fe\u65f6\uff0c\u6bcf\u627e\u5230\u4e00\u6761\u6811\u679d\u8fb9\u6216\u540e\u5411\u8fb9\uff08\u975e\u6a2a\u53c9\u8fb9\uff09\uff0c\u5c31\u628a\u8fd9\u6761\u8fb9\u52a0\u5165\u6808\u4e2d\u3002\u5982\u679c\u9047\u5230\u6ee1\u8db3dfn(u)<=low(v),\u8bf4\u660eu\u662f\u4e00\u4e2a\u5272\u70b9\uff0c\u540c\u65f6\u628a\u8fb9\u4ece\u6808\u9876\u4e00\u4e2a\u4e2a\u53d6\u51fa\uff0c\u76f4\u5230\u9047\u5230\u4e86\u8fb9(u,v)\uff0c\u53d6\u51fa\u7684\u8fd9\u4e9b\u8fb9\u4e0e\u5176\u5173\u8054\u7684\u70b9\u3002\u5c31\u7ec4\u6210\u4e00\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u652f\u3002 \u5272\u70b9\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u652f\uff0c\u5176\u4f59\u70b9\u548c\u6bcf\u6761\u8fb9\u53ea\u5c5e\u4e8e\u4e14\u5c5e\u4e8e\u4e00\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u652f\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 //\u5728\u4ee5\u4e0a\u6c42\u5272\u70b9\u7684\u4ee3\u7801\u4e2d\u591a\u4e2a\u7ef4\u62a4\u6808\uff0c\u53ef\u4ee5\u7528\u6570\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528STL int bcc_cnt;//\u8bb0\u5f55\u70b9\u53cc\u8fde\u901a\u5206\u91cf\u4e2a\u6570 int bcc_belong[maxn];//\u8bb0\u5f55\u70b9\u5c5e\u4e8e\u7684\u53cc\u8fde\u901a\u5206\u91cf vector<int> bcc[maxn];//\u8bb0\u5f55\u67d0\u53cc\u8fde\u901a\u5206\u91cf\u7684\u6240\u6709\u8282\u70b9 ... void tarjan(int u) { dfn[u]=low[u]=++tim; stk[++top]=u; if(u==root && head[u]==0)//\u5224\u65ad\u5b64\u7acb\u70b9 { bcc[++bcc_cnt].push_back(u); } int child=0; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn[v]) { tarjan(v); low[u]=min(low[u],low[v]); if(low[v]>=dfn[u]) { if(u!=root) { cut[u]=1; } if(u==root && ++child>=2) { cut[u]=1; } bcc_cnt++; bcc[bcc_cnt].clear(); do { int z=stk[top--]; bcc[bcc_cnt].push_back(z); }while(z!=v); bcc[bcc_cnt].push_back(u);//\u628a\u8be5\u70b9\u52a0\u5165\u6b64\u5206\u91cf\u5374\u4e0d\u5f39\u51fa\u6808\uff0c\u662f\u4e3a\u4e86\u56de\u6eaf\u78b0\u5230\u4e0b\u4e00\u4e2a\u5272\u70b9\u65f6\u518d\u5f39\uff0c\u8fd9\u4e24\u4e2a\u5272\u70b9\u53c8\u80fd\u6784\u6210\u4e00\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u91cf\uff0c\u6240\u4ee5\u8bf4\u4e00\u4e2a\u5272\u70b9\u53ef\u80fd\u5c5e\u4e8e\u591a\u4e2a\u53cc\u8fde\u901a\u5206\u91cf } } else { low[u]=min(low[u],dfn[v]); } } } v-DCC\u7f29\u70b9\u7531\u4e8e\u4e00\u4e2a\u5272\u70b9\u53ef\u80fd\u5728\u5f88\u591a\u4e2av-DCC\u4e2d\u800c\u66f4\u52a0\u9ebb\u70e6\uff0c\u65b9\u6cd5\u662f\uff1a \u5047\u8bbe\u56fe\u4e2d\u6709x\u4e2a\u5272\u70b9\u548cy\u4e2av-DCC\uff0c\u5c31\u76f4\u63a5\u5efa\u4e00\u4e2a\uff08x+y)\u4e2a\u70b9\u7684\u65b0\u56fe \u6bcf\u4e00\u4e2av-DCC\u548c\u5272\u70b9\u90fd\u4f5c\u4e3a\u65b0\u56fe\u7684\u8282\u70b9\u6240\u5728\u3002\u5efa\u5b8c\u540e\u8ba9\u6bcf\u4e2a\u5272\u70b9\u548c\u5305\u542b\u5b83\u4eec\u7684v-DCC\u8fde\u8fb9 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 ... for(int i=1;i<=n;i++) { if(cut[i]) { new_id[i]=++tim; } } for(int i=1;i<=tim;i++) { for(int j=0;j<bcc[i].size();j++) { int x=bcc[i][j]; if(cut[x]) { addedge_c(i,new_id[x]);//\u8d85\u7ea7\u70b9\u7684\u65b0\u52a0\u8fb9\u51fd\u6570 addedge_c(new_id[x],i); } else { new_id[x]=i; } } } \uff082\uff09\u8fb9\u53cc\u8fde\u901a\u5206\u91cf \u6838\u5fc3\uff1a\u6c42\u5272\u8fb9 \u6c42\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\u65f6\uff0c\u9700\u8981\u5148\u6c42\u51fa\u6865\uff0c\u7136\u540e\u628a\u6865\u5168\u90e8\u53bb\u6389\uff0c\u539f\u56fe\u53d8\u6210\u591a\u4e2a\u8fde\u901a\u5757\uff0c\u6b64\u65f6\u6bcf\u4e2a\u8fde\u901a\u5757\u5c31\u662f\u4e00\u4e2a\u8fb9\u53cc\u8fde\u901a\u5206\u91cf 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 //\u5efa\u56fe\u548c\u5404\u6570\u7ec4\u521d\u59cb\u5316\u540c\u6c42\u6865\u4ee3\u7801 void tarjan(int u,int ein) { dfn[u]=low[u]=++tim; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn[v]) { tarjan(v,i); low[u]=min(low[u],low[v]); if(low[v]>dfn[u]) { bridge[i]=bridge[i^1]=1; } } else if(i!=(ein^1)) { low[u]=min(low[u],dfn[v]); } } } void dfs(int u) { dcc_belong[u]=dcc_cnt; dcc[dcc_cnt].push_back(u); for(int i=head[u];;i!=-1;i=edge[i].next) { int v=edge[i].to; if(dcc_belong[v] || bridge[i]) { continue; } dfs(y); } } int main() { ... for(int i=1;i<=n;i++) { if(!dcc_belong(i)) { ++dcc_cnt; dfs(i); } } } e-DCC\u7f29\u70b9:\u6211\u4eec\u628a\u6bcf\u4e00\u4e2ae-DCC\u90fd\u582a\u79f0\u8ba9\u4f60\u8fc7\u4e00\u4e2a\u8282\u70b9\uff0c\u628a\u6240\u6709\u6865\u8fb9\uff08x,y\uff09\u770b\u6210\u8fde\u63a5\u7f16\u53f7\u4e3adcc_belong[x]\u548cdcc_belong[y]\u7684\u4e24\u4e2ae-DCC\u7684\u8fb9\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u4f1a\u5f97\u5230\u4e00\u68f5\u6811\u6216\u8005\u68ee\u6797\uff08\u539f\u56fe\u4e0d\u8fde\u901a\uff09\u3002 1 2 3 4 5 6 7 8 9 10 11 ... for(int i=2;i<=ecnt;i++) { int x=edge[i^1].to,y=edge[i].to; if(dcc_belong[x]==dcc_belong[y]) { continue; } addedge_c(dcc_belong[x],dcc_belong[y]);////\u8d85\u7ea7\u70b9\u7684\u65b0\u52a0\u8fb9\u51fd\u6570 } ... 4.\u79bb\u7ebf\u6c42\u89e3LCA \u00b6 tarjan\u79bb\u7ebf\u6c42\u89e3LCA\u4ee3\u7801\u8be6\u89c1lca\u7bc7 \u6c42lca\u56db\u79cd\u65b9\u6cd5 * tarjan\u79bb\u7ebf(O(n+q)) * \u500d\u589e(O(n+q)logn) * RMQ(\u6b27\u62c9\u5e8f\u548c\u533a\u95f4\u67e5\u8be2)(O(nlogn)\u9884\u5904\u7406\uff0cO(1)\u67e5\u8be2) * \u6811\u94fe\u5256\u5206(\u5982\u679c\u53ea\u662f\u7b80\u5355\u5730\u6c42lca\u4e0d\u5fc5\u4f7f\u7528\u6811\u94fe\u5256\u5206)","title":"tarjan"},{"location":"DataStructure/graph/tarjan/#tarjan","text":"\u6838\u5fc3\uff1adfn\u65f6\u95f4\u6233\u5e8f\u548clow\u6700\u65e9\u65f6\u6570\u7ec4\u7684\u7ef4\u62a4 \u5e94\u7528\uff1a * \u6c42\u89e3\u6709\u5411\u56fe\u7684\u5f3a\u8fde\u901a\u5206\u91cf * \u6c42\u89e3\u65e0\u5411\u56fe\u7684\u5272\u70b9\u548c\u6865 * \u6c42\u89e3\u65e0\u5411\u56fe\u7684\u53cc\u8fde\u901a\u5206\u91cf * \u79bb\u7ebf\u6c42\u89e3lca(\u8865\u5145lca\u7684\u5176\u4ed6\u7b97\u6cd5) tarjan\u57fa\u4e8edfs\u7b97\u6cd5\uff0c\u6545\u9700\u8981\u94fe\u5f0f\u524d\u5411\u661f\u50a8\u5b58\u56fe\u7684\u76f4\u63a5\u62d3\u6251\u5173\u7cfb","title":"Tarjan\u7b97\u6cd5"},{"location":"DataStructure/graph/tarjan/#1","text":"\u5f3a\u8fde\u901a\uff1a\u5982\u679c\u4e24\u4e2a\u9876\u70b9\u53ef\u4ee5\u76f8\u4e92\u901a\u8fbe\uff0c\u5219\u79f0\u4e24\u4e2a\u9876\u70b9\u5f3a\u8fde\u901a\u3002\u5982\u679c\u6709\u5411\u56feG\u7684\u6bcf\u4e24\u4e2a\u9876\u70b9\u90fd\u5f3a\u8fde\u901a\uff0c\u5219G\u662f\u4e2a\u5f3a\u8fde\u901a\u56fe\u3002\u975e\u5f3a\u8fde\u901a\u56fe\u6709\u5411\u56fe\u7684\u6781\u5927\u8fde\u901a\u5b50\u56fe\uff0c\u79f0\u4e3a\u5f3a\u8fde\u901a\u5206\u91cf\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 struct Edge { int from , to , weight , next ; } edge [ maxm ]; int head [ maxn ], edgenum , dfn [ maxn ], low [ maxn ], stack [ maxn ], vis [ maxn ], num [ maxn ], cnt , t , tarjanpoint ; void init () { memset ( head , -1 , sizeof ( head )); edgenum = 0 ; } void addedge ( int u , int v , int d ) { Edge e ; e . from = u ; e . to = v ; e . weight = d ; e . next = head [ u ]; edge [ edgenum ] = e ; head [ u ] = edgenum ++ ; } void tarjan ( int now ) { dfn [ now ] = low [ now ] =++ tim ; //\u65f6\u95f4\u6233\u5e8f\u4ece1\u5f00\u59cb stack [ ++ top ] = now ; //\u6808\u6570\u7ec4\uff0c\u901a\u8fc7t\u6a21\u62df\u51fa\u5165\u6808\u64cd\u4f5c vis [ now ] = 1 ; //\u6807\u8bb0\u662f\u5426\u5165\u6808 for ( int i = head [ now ]; i != -1 ; i = edge [ i ]. next ) { if ( ! dfn [ edge [ i ]. to ]) //\u672a\u88ab\u641c\u7d22\u8fc7 { tarjan ( edge [ i ]. to ); low [ now ] = min ( low [ now ], low [ edge [ i ]. to ]); //\u56de\u6eaf\u66f4\u65b0\u6700\u65e9\u503c } else //\u5df2\u7ecf\u641c\u7d22\u8fc7 { if ( vis [ edge [ i ]. to ]) //\u5728\u6808\u5185 { low [ now ] = min ( low [ now ], dfn [ edge [ i ]. to ]); //\u6ce8\u610f\u662f\u7528dfn\u66f4\u65b0\u6700\u65e9\u503c\uff0c\u9632\u6b62\u8be5\u70b9\u5728\u53e6\u4e00\u4e2a\u5f3a\u8fde\u901a\u5b50\u56fe\u4e2d\u800c\u6ca1\u51fa\u6808\uff0c\u82e5\u7528low\u6015\u8d70\u4e0d\u5230 } } } if ( dfn [ now ] == low [ now ]) //\u8fde\u901a\u91cf\u6839\u8282\u70b9 { int cur ; tarjanpoint ++ ; //\u7f29\u70b9\u8bb0\u5f55 do { cur = stack [ top -- ]; vis [ cur ] = 0 ; belong [ cur ] = tarjanpoint ; //\u7f29\u70b9\u5f52\u5c5e\u6570\u7ec4 num [ tarjanpoint ] ++ ; } while ( now != cur && top ); } } //\u56fe\u4e0d\u4e00\u5b9a\u662f\u5168\u8fde\u901a\u56fe\uff0c\u5219\u9700\u8981\u9010\u70b9tarjan for ( int i = 1 ; i <= n ; i ++ ) { if ( ! dfn [ i ]) { tarjan ( i ); } } tarjan\u5bf9\u6709\u5411\u56fe\u7684\u7f29\u70b9\u7b97\u6cd5\u6709\u5f88\u5927\u7528\u5904\uff1a \uff081\uff09\u7f29\u70b9\u540e\u79f0\u4e3a\u65e0\u73af\uff08\u65e0\u5f3a\u8fde\u901a\u5206\u91cf\uff09\u56fe\uff0c\u53ef\u4ee5\u901a\u8fc7\u65b0\u56fe\u7684\u5404\u70b9\u5ea6\u6570\u6c42\u89e3\u5404\u79cd\u7ea6\u675f\u52a0\u51cf\u8fb9\u7684\u64cd\u4f5c(\u4f8b\u5982\u8981\u52a0\u591a\u5c11\u6761\u8fb9\u624d\u80fd\u4f7f\u8fd9\u4e2adag\u56fe\u8fde\u901a:\u8bbe\u5165\u5ea6\u4e3a0\u7684\u70b9\u7684\u6570\u91cf\u4e3an\uff0c\u51fa\u5ea6\u4e3a0\u7684\u70b9\u7684\u6570\u91cf\u4e3am\uff0c\u90a3\u9700\u8981\u52a0\u7684\u8fb9\u6570\u5c31\u662fmax\uff08n\uff0cm\uff09\u56e0\u4e3a\u8981\u5c06\u5165\u5ea6\u4e3a0\u7684\u70b9\u548c\u51fa\u5ea6\u4e3a0\u7684\u70b9\u8fde\u63a5\u8d77\u6765\u3002) \uff082\uff09\u7f29\u70b9\u8fd8\u53ef\u4ee5\u89e3\u51b32-SAT\uff08\u77db\u76fe\uff09\u95ee\u9898\uff08\u7f29\u70b9+\u62d3\u6251\u67d3\u8272\u68c0\u6233\uff09 \u4e00\u4e2a\u7267\u5e08\u8981\u7ed9n\u4e2a\u5a5a\u793c\u8fdb\u884c\u4e00\u4e2a\u4eea\u5f0f \u7ed9\u5b9a\u5a5a\u793c\u5f00\u59cb\u7684\u65f6\u95f4\u548c\u7ed3\u675f\u7684\u65f6\u95f4 \u4eea\u5f0f\u8981\u4e48\u5728\u5a5a\u793c\u521a\u521a\u5f00\u59cb\u7684\u65f6\u5019\u8fdb\u884c\uff0c\u8981\u4e48\u8fdb\u884c\u5b8c\u5a5a\u793c\u6b63\u597d\u7ed3\u675f \u95ee\u7267\u5e08\u80fd\u5426\u53c2\u52a0\u6240\u6709\u7684\u5a5a\u793c \u5e76\u8f93\u51fa\u65b9\u6848 Input The first line contains a integer N(1 \u2264 N \u2264 1000). The next N lines contain the Si, Ti and Di.Si and Ti are in the format of hh : mm. Output The first line of output contains \"YES\" or \"NO\" indicating whether John can be present at every special ceremony.If it is \"YES\", output another N lines describing the staring time and finishing time of all the ceremonies. Sample Input 2 08 : 00 09 : 00 30 08 : 15 09 : 00 20 Sample Output YES 08 : 00 08 : 30 08 : 40 09 : 00 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 #include<iostream> #include<cstdio> #include<cstring> #include<cstdlib> #include<cmath> #include<vector> #include<queue> #include<algorithm> using namespace std; const int MAX = 10500; int Col[MAX], In[MAX], len[MAX], Opp[MAX]; int s[MAX], G[MAX], dfn[MAX], low[MAX]; int group = 0, top = 0, tim = 0; bool vis[MAX]; int n; vector<int> E[MAX];//\u8d85\u7ea7\u70b9\u5c31\u7528vector\u6765\u5b58\u8fb9,\u65b9\u4fbf\u4e9b struct Time { int b, e;//b\u8868\u793a\u5f00\u59cb\u65f6\u95f4\uff0ce\u8868\u793a\u7ed3\u675f\u65f6\u95f4 }t[MAX]; struct Edge { int from,to,weigh,next; }edge[MAX*MAX];//\u8dd1Tarjan\u65f6\u7528\u6765\u5b58\u8fb9\u7684\u94fe\u5f0f\u524d\u5411\u661f int h[MAX], cnt = 0;//\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u50a8 void Add(int u, int v);//\u8fde\u8fb9\uff0c\u4eceu->v void Link();//\u8fde\u8fb9 bool Wrong(int i, int j);//\u68c0\u67e5\u4e24\u4e2a\u65f6\u95f4\u662f\u5426\u77db\u76fe void Tarjan(int u);//\u7f29\u70b9 void Top();//\u62d3\u6251\u6392\u5e8f inline void Add(int u, int v)//\u8fde\u8fb9\uff0c\u4eceu->v { Edeg e; e.from=u; e.to=v; e.next=head[u]; edge[cnt]=e; head[u]=cnt++; } bool Wrong(int i, int j)//\u5224\u65ad\u4e24\u4e2a\u65f6\u95f4\u662f\u5426\u77db\u76fe { if (t[i].b >= t[j].e || t[i].e <= t[j].b) return false; else return true; //\u53ea\u8981\u67d0\u4e00\u4e2a\u7ed3\u675f\u65f6\u95f4\u5728\u53e6\u4e00\u4e2a\u7684\u5f00\u59cb\u65f6\u95f4\u4e4b\u524d\u5219\u65e0\u77db\u76fe //\u53cd\u4e4b\u5fc5\u5b9a\u5b58\u5728\u77db\u76fe } void Link()//\u8fde\u8fb9 { for (int i = 1; i <= n; ++i) for (int j = 1; j <= n; ++j)//\u679a\u4e3e\u4efb\u610f\u4e24\u7ec4\u4eea\u5f0f\u7684\u65f6\u95f4\uff0c\u67e5\u770b\u662f\u5426\u5b58\u5728\u77db\u76fe { if (i == j)continue;//\u81ea\u5df1\u548c\u81ea\u5df1\u6ca1\u6709\u6bd4\u8f83\u7684\u610f\u4e49 if (Wrong(i, j))//\u5f00\u5934\u548c\u5f00\u5934\u77db\u76fe Add(i, j + n); if (Wrong(i, j + n))//\u5f00\u5934\u548c\u7ed3\u5c3e\u77db\u76fe Add(i, j); if (Wrong(i + n, j))//\u7ed3\u5c3e\u548c\u5f00\u5934\u77db\u76fe Add(i + n, j + n); if (Wrong(i + n, j + n))//\u7ed3\u5c3e\u548c\u7ed3\u5c3e\u77db\u76fe Add(i + n, j); } } void Tarjan(int u)//\u7f29\u70b9 { dfn[u] = low[u] = ++tim; s[++top] = u; vis[u] = true; int v; for (int i = h[u]; i != -1; i = edge[i].next) { v = e[i].v; if (!dfn[v]) { Tarjan(v); low[u] = min(low[u], low[v]); } else if (vis[v]) low[u] = min(low[u], dfn[v]); } if (low[u] == dfn[u]) { ++tarjanpoint; do { v = s[top--]; vis[v] = false; belong[v] = tarjanpoint; } while (v != u && top); } } void Top()//\u62d3\u6251\u6392\u5e8f,\u62d3\u6251\u68c0\u6233 \uff08\u5bf9\u7f29\u5b8c\u70b9\u7684\u56fe\u7684\u5de5\u4f5c\uff0c\u5373\u9488\u5bf9\u8d85\u7ea7\u70b9\uff09 { memset(In, 0, sizeof(In));//\u5b58\u5165\u5ea6 memset(Col, -1, sizeof(Col));//\u5b58\u989c\u8272 for (int i = 1; i <= 2 * n; ++i)//\u8fde\u63a5\u8d85\u7ea7\u70b9\u5efa\u65b0\u56fe { for (int j = h[i]; j != -1; j = e[j].next)//\u679a\u4e3e\u90bb\u8fb9 { int v = edge[j].v; if (belong[i] == belong[v])continue;//\u5728\u540c\u4e00\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u4e2d\u65e0\u9700\u8003\u8651 E[belong[v]].push_back(belong[i]);//\u8fb9\u8981\u53cd\u7740\u5b58 \uff08\u53cd\u5411\u67d3\u8272\u6cd5\uff09 In[belong[i]]++;//\u7edf\u8ba1\u5165\u5ea6 \uff08\u53cd\u5411\u53f6\u5b50\u6216\u5b64\u7acb\u70b9\u5165\u5ea6\u6700\u5c0f\uff09 } } queue<int> Q;//\u62d3\u6251\u6392\u5e8f\u7684\u961f\u5217 for (int i = 1; i <= tarjanpoint; ++i) if (In[i] == 0)Q.push(i);//\u5165\u5ea6\u4e3a0\u7684\u8fdb\u961f while (!Q.empty()) { int v = Q.front(); Q.pop(); if (Col[v] == -1)//\u672a\u67d3\u8272 { Col[v] = 1; //\u67d3\u4e3a1 Col[Opp[v]] = 0;//\u5bf9\u7acb\u70b9\u67d3\u4e3a0 } for (int i = 0; i < E[v].size(); ++i)//\u4f9d\u6b21\u51cf\u5165\u5ea6 { In[E[v][i]]--; if (In[E[v][i]] == 0)//\u5165\u5ea6\u4e3a0 Q.push(E[v][i]); } } } int main() { while (cin >> n) { memset(h, -1, sizeof(h)); cnt = 0; tim = group = top = 0; memset(dfn, 0, sizeof(dfn)); memset(low, 0, sizeof(low)); memset(In, 0, sizeof(In)); memset(vis, 0, sizeof(vis)); memset(Opp, 0, sizeof(Opp)); for (int i = 1; i <= n; ++i) { int a, b, c, d, e; scanf(\"%d:%d %d:%d %d\", &a, &b, &c, &d, &len[i]); //\u8fd9\u91cc\u90fd\u628a\u65f6\u95f4\u8f6c\u5316\u4e3a\u5206\u949f\u6765\u8ba1\u7b97 t[i].b = a * 60 + b; t[i + n].e = c * 60 + d; t[i].e = t[i].b + len[i];//\u8ba1\u7b97\u5f00\u5934\u7684\u7ed3\u675f\u65f6\u95f4 t[i + n].b = t[i + n].e - len[i];//\u8ba1\u7b97\u7ed3\u5c3e\u7684\u5f00\u59cb\u65f6\u95f4 //i \u8868\u793a\u7b2ci\u4e2a\u5a5a\u793c\u7684\u4eea\u5f0f\u5728\u5f00\u59cb\u7684\u65f6\u5019\u4e3e\u884c //i+m \u8868\u793a\u7b2ci\u4e2a\u5a5a\u793c\u7684\u4eea\u5f0f\u5728\u7ed3\u675f\u7684\u65f6\u5019\u4e3e\u884c } Link();//\u8fde\u8fb9 for (int i = 1; i <= 2 * n; ++i)//\u7f29\u70b9 if (!dfn[i])Tarjan(i); for (int i = 1; i <= n; ++i)//\u5224\u65ad\u662f\u5426\u6709\u89e3 { if (belong[i] == belong[i + n])//\u67d0\u4e2a\u5a5a\u793c\u7684 \u5f00\u59cb/\u7ed3\u675f \u5728\u540c\u4e00\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf\u4e2d\uff0c\u65e0\u89e3 { cout << \"NO\" << endl; return 0; } Opp[belong[i]] = belong[i + n];//\u5b58\u4e00\u4e0b\u8d85\u7ea7\u70b9\u7684\u7684\u5bf9\u7acb\u70b9 Opp[belong[i + n]] = belong[i];//\u53cd\u5411\u4e5f\u8981\u5b58 } cout << \"YES\" << endl;//\u4e0d\u5b58\u5728\u77db\u76fe\uff0c\u5219\u6709\u89e3 Top();//Top\u6392\u5e8f for (int i = 1; i <= n; ++i) { if (Col[beong[i]] == 1)//\u9009\u62e9\u4e86\u518d\u5a5a\u793c\u5f00\u59cb\u65f6 printf(\"%.2d:%.2d %.2d:%.2d\\n\", t[i].b / 60, t[i].b % 60, t[i].e / 60, t[i].e % 60); else //\u5728\u5a5a\u793c\u7ed3\u675f\u65f6 printf(\"%.2d:%.2d %.2d:%.2d\\n\", t[i + n].b / 60, t[i + n].b % 60, t[i + n].e / 60, t[i + n].e % 60); } } } * \u5199\u5728AC\u540e\u9762\uff1a \u8fd9\u51e0\u90532-sat\u9898\u771f\u662f\u82b1\u5f0f\u51fa\u9519 \u8fd9\u9053\u7684\u9519\u8bef\u662f\u7f29\u70b9\u4ee5\u540e\uff0c\u5e76\u4e0d\u662f\u6309\u7167\u8d85\u7ea7\u70b9\u6765\u8f93\u51fa(\u660e\u663e\u4f1a\u6302\u5440) \u7136\u800c\u3002\u3002\u3002\u67e5\u4e861\u5c0f\u65f6\u7684\u9519 \u611f\u53f9\u4e00\u53e5\uff1a\u5bf9\u62cd\u771f\u662f\u5229\u5668\u4e5f\u3002\u3002\u3002 */ Tip: (1)\u68c0\u6233\u5f80\u5f80\u662f\u8fd8\u539f\u65b9\u6848\u7684\u91cd\u8981\u63aa\u65bd\uff1a\u5176\u4e2d\u50cfLCS,LIS\u8981\u8f93\u51fa\u65b9\u6848\u65f6\u9700\u8981dp\u8fc7\u7a0b\u4e2d\u91c7\u53d6\u9006\u5411\u68c0\u6233\uff08\u8be6\u89c1DP)\uff0c\u800c\u56fe\u65b9\u6848\u7684\u95ee\u9898\u5219\u5982\u4e0a\u8ff0\u8fdb\u884c\u62d3\u6251\u68c0\u6233","title":"1.\u6709\u5411\u56fe\u7684\u5f3a\u8fde\u901a\u5206\u91cf"},{"location":"DataStructure/graph/tarjan/#2","text":"\uff081\uff09\u5272\u70b9 \uff1a \u5272\u70b9\uff1a\u5728\u65e0\u5411\u8fde\u901a\u56fe\u4e2d\u53bb\u6389\u8fd9\u4e2a\u70b9\u548c\u6240\u6709\u8fd9\u4e2a\u70b9\u76f8\u8fde\u7684\u8fb9\u540e\uff0c\u539f\u5148\u8fde\u901a\u7684\u5757\u5c31\u4f1a\u76f8\u4e92\u5206\u79bb\u53d8\u6210\u81f3\u5c11\u4e24\u4e2a\u5206\u79bb\u7684\u8fde\u901a\u5757\u7684\u70b9\u3002 Tarjan\u7b97\u6cd5\u6c42\u5272\u70b9\uff1a * \u82e5u\u4e3a\u6811\u7684\u6839\u8282\u70b9\uff0c\u53ea\u8981u\u6709\u4e24\u4e2a\u53ca\u4ee5\u4e0a\u5b50\u8282\u70b9\uff0c\u5219u\u4e3a\u5272\u70b9 * \u82e5u\u4e0d\u4e3a\u6839\u8282\u70b9\uff0cv\u4e0d\u4e3au\u7684\u7236\u8282\u70b9\uff0c\u5f53dfn[u]<=low[v]\u65f6\uff0cu\u4e3a\u5272\u70b9 \u7531\u6b64\u89c2\u4e4b\uff0c\u5728\u65e0\u5411\u56fe\u6c42\u5272\u70b9\u7684tarjan\u7b97\u6cd5\u91cc,\u4e0d\u9700\u8981\u6808\u6570\u7ec4 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 //\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u8fb9\u548c\u5404\u6570\u7ec4\u521d\u59cb\u5316\u4e0e\u4e0a\u8ff0\u76f8\u540c void tarjan(int u) { dfn[u]=low[u]=++tim; int child=0; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn) { tarjan(v); low[u]=min(low[u],low[v]); if(u!=root && low[v]>=dfn[u])//\u975e\u6839\u8282\u70b9\u60c5\u51b5 { cut[u]=1; } if(u==root && ++child>=2)//\u6839\u8282\u70b9\u60c5\u51b5 { cut[u]=1; } } else { low[u]=min(low[u],dfn[v]); } } } //\u5728main\u51fd\u6570\u4e2d\u6ce8\u610f\u7684\u662f\u53cc\u5411\u5efa\u8fb9\u548c\u975e\u8fde\u901a\u56fe\u7684\u9010\u70b9\u5b9a\u6839\u548c\u9010\u6839tarjan int main() { ... add(x,y),add(y,x); ... for(int i=1;i<=n;i++) { if(!dfn[i]) { root=i; tarjan(i); } } } \uff082\uff09\u5272\u8fb9\uff08\u6865\uff09 \u5272\u8fb9\uff08\u6865\uff09\uff1a\u5728\u65e0\u5411\u8fde\u901a\u56fe\u4e2d\u53bb\u6389\u8fd9\u6761\u8fb9\u540e\uff0c\u539f\u5148\u8fde\u901a\u7684\u5757\u5c31\u4f1a\u76f8\u4e92\u5206\u79bb\u53d8\u6210\u81f3\u5c11\u4e24\u4e2a\u5206\u79bb\u7684\u8fde\u901a\u5757\u7684\u8fb9\u3002 \u6838\u5fc3\uff1a\u5018\u82e5\u9876\u70b9u\u4e0d\u80fd\u56de\u5230\u7956\u5148\uff0c\u4e5f\u6ca1\u6709\u53e6\u5916\u4e00\u6761\u8def\u56de\u5230\u7236\u4eb2\uff0c\u90a3\u4e48v-u\u5c31\u662f\u5272\u8fb9 \u7531\u4e8e\u53ef\u80fd\u51fa\u73b0\u91cd\u8fb9\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u4e0d\u80fd\u662f\u8bb0\u5f55\u7236\u4eb2\u8282\u70b9\uff0c\u800c\u662f\u6539\u6210\u8bb0\u5f55\u5165\u8fb9\u7684\u7f16\u53f7 \u5728\u94fe\u5f0f\u524d\u5411\u661f\u7684\u5efa\u56fe\u65b9\u5f0f\u4e2d\uff0c \u548c \u662f\u7f16\u53f7\u76f8\u90bb\u7684\u4e00\u5bf9\uff0c\u4e0d\u59a8\u4ece2\u5f00\u59cb\u7f16\u53f7\u3002\u4e00\u5bf9\u8fb9\u7f16\u53f7\u5219\u6709a 1=b,b 1=a tarjan\u7b97\u6cd5\u6c42\u5272\u8fb9\uff1a \u5f53\u4e14\u4ec5\u5f53\u65e0\u5411\u8fb9\uff08u,v)\u662f\u6811\u679d\u8fb9\u7684\u65f6\u5019\uff0c\u9700\u8981\u6ee1\u8db3dfn[u]<low[v] \u6ce8\u610f\uff1a\u6ca1\u6709\u7b49\u53f7\uff01\uff01\uff01\uff01\uff01 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 //\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u8fb9\u548c\u5404\u6570\u7ec4\u521d\u59cb\u5316\u4e0e\u6709\u4e00\u4e01\u70b9\u533a\u522b //\u521d\u59cb\u5316\u8ba1\u8fb9\u6570ecnt=2; void tarjan(int u,int ein) { dfn[u]=low[u]=++tim; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn[v]) { tarjan(v,i); low[u]=min(low[u],low[v]); if(low[v]>dfn[u]) { bridge[i]=bridge[i^1]=1; } else if(i!=(ein^1)) { low[u]=min(low[u],dfn[v]);//\u76f8\u5f53\u4e8e\u4e0d\u7528\u7236\u4eb2\u8282\u70b9\u6765\u66f4\u65b0\u81ea\u5df1\u7684low } } } } //\u5728main\u51fd\u6570\u4e2d\u540c\u6837\u9010\u6839tarjan","title":"2.\u65e0\u5411\u56fe\u7684\u5272\u70b9\u4e0e\u5272\u8fb9\uff08\u6865\uff09"},{"location":"DataStructure/graph/tarjan/#3","text":"\u53cc\u8fde\u901a\u5206\u91cf\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u65e0\u5411\u56fe\uff0c\u5176\u8fb9/\u70b9\u8fde\u901a\u5ea6\u5927\u4e8e1\uff0c\u6ee1\u8db3\u4efb\u610f\u4e24\u70b9\u4e4b\u95f4\uff0c\u80fd\u901a\u8fc7\u4e24\u6761\u6216\u4e24\u6761\u4ee5\u4e0a\u6ca1\u6709\u4efb\u4f55\u91cd\u590d\u8fb9/\u70b9\u7684\u8def\u5230\u8fbe\u7684\u56fe\uff0c\u5373\u5220\u6389\u4efb\u610f\u8fb9/\u70b9\u540e\uff0c\u56fe\u4ecd\u662f\u6765\u8fde\u901a\u7684 \u5b9a\u7406\uff1a * \u4e00\u5f20\u65e0\u5411\u8fde\u901a\u56fe\u662f\u70b9\u53cc\u8fde\u901a\u56fe\u5f53\u4e14\u4ec5\u5f53\u56fe\u7684\u9876\u70b9\u6570<=2 \u6216 \u56fe\u4e2d\u4efb\u610f\u4e24\u70b9\u90fd\u540c\u65f6\u5305\u542b\u5728\u81f3\u5c11\u4e00\u4e2a\u7b80\u5355\u73af\u4e2d\uff0c\u5373\u70b9\u53cc\u8fde\u901a\u5206\u91cf\u6ca1\u6709\u5272\u70b9 * \u4e00\u5f20\u65e0\u5411\u8fde\u901a\u56fe\u662f\u8fb9\u53cc\u8fde\u901a\u56fe\u5f53\u4e14\u4ec5\u5f53\u4efb\u610f\u4e00\u6761\u8fb9\u90fd\u5305\u542b\u5728\u81f3\u5c11\u4e00\u4e2a\u7b80\u5355\u73af\u4e2d\uff0c\u5373\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\u6ca1\u6709\u6865 \uff081\uff09\u70b9\u53cc\u8fde\u901a\u5206\u91cf \u6838\u5fc3\uff1a\u6c42\u5272\u70b9 \u6c42\u70b9\u53cc\u8fde\u901a\u5206\u91cf\u53ef\u4ee5\u5728\u6c42\u5272\u70b9\u7684\u540c\u65f6\u7528\u6808\u7ef4\u62a4 \u5728\u641c\u7d22\u56fe\u65f6\uff0c\u6bcf\u627e\u5230\u4e00\u6761\u6811\u679d\u8fb9\u6216\u540e\u5411\u8fb9\uff08\u975e\u6a2a\u53c9\u8fb9\uff09\uff0c\u5c31\u628a\u8fd9\u6761\u8fb9\u52a0\u5165\u6808\u4e2d\u3002\u5982\u679c\u9047\u5230\u6ee1\u8db3dfn(u)<=low(v),\u8bf4\u660eu\u662f\u4e00\u4e2a\u5272\u70b9\uff0c\u540c\u65f6\u628a\u8fb9\u4ece\u6808\u9876\u4e00\u4e2a\u4e2a\u53d6\u51fa\uff0c\u76f4\u5230\u9047\u5230\u4e86\u8fb9(u,v)\uff0c\u53d6\u51fa\u7684\u8fd9\u4e9b\u8fb9\u4e0e\u5176\u5173\u8054\u7684\u70b9\u3002\u5c31\u7ec4\u6210\u4e00\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u652f\u3002 \u5272\u70b9\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u652f\uff0c\u5176\u4f59\u70b9\u548c\u6bcf\u6761\u8fb9\u53ea\u5c5e\u4e8e\u4e14\u5c5e\u4e8e\u4e00\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u652f\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 //\u5728\u4ee5\u4e0a\u6c42\u5272\u70b9\u7684\u4ee3\u7801\u4e2d\u591a\u4e2a\u7ef4\u62a4\u6808\uff0c\u53ef\u4ee5\u7528\u6570\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528STL int bcc_cnt;//\u8bb0\u5f55\u70b9\u53cc\u8fde\u901a\u5206\u91cf\u4e2a\u6570 int bcc_belong[maxn];//\u8bb0\u5f55\u70b9\u5c5e\u4e8e\u7684\u53cc\u8fde\u901a\u5206\u91cf vector<int> bcc[maxn];//\u8bb0\u5f55\u67d0\u53cc\u8fde\u901a\u5206\u91cf\u7684\u6240\u6709\u8282\u70b9 ... void tarjan(int u) { dfn[u]=low[u]=++tim; stk[++top]=u; if(u==root && head[u]==0)//\u5224\u65ad\u5b64\u7acb\u70b9 { bcc[++bcc_cnt].push_back(u); } int child=0; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn[v]) { tarjan(v); low[u]=min(low[u],low[v]); if(low[v]>=dfn[u]) { if(u!=root) { cut[u]=1; } if(u==root && ++child>=2) { cut[u]=1; } bcc_cnt++; bcc[bcc_cnt].clear(); do { int z=stk[top--]; bcc[bcc_cnt].push_back(z); }while(z!=v); bcc[bcc_cnt].push_back(u);//\u628a\u8be5\u70b9\u52a0\u5165\u6b64\u5206\u91cf\u5374\u4e0d\u5f39\u51fa\u6808\uff0c\u662f\u4e3a\u4e86\u56de\u6eaf\u78b0\u5230\u4e0b\u4e00\u4e2a\u5272\u70b9\u65f6\u518d\u5f39\uff0c\u8fd9\u4e24\u4e2a\u5272\u70b9\u53c8\u80fd\u6784\u6210\u4e00\u4e2a\u70b9\u53cc\u8fde\u901a\u5206\u91cf\uff0c\u6240\u4ee5\u8bf4\u4e00\u4e2a\u5272\u70b9\u53ef\u80fd\u5c5e\u4e8e\u591a\u4e2a\u53cc\u8fde\u901a\u5206\u91cf } } else { low[u]=min(low[u],dfn[v]); } } } v-DCC\u7f29\u70b9\u7531\u4e8e\u4e00\u4e2a\u5272\u70b9\u53ef\u80fd\u5728\u5f88\u591a\u4e2av-DCC\u4e2d\u800c\u66f4\u52a0\u9ebb\u70e6\uff0c\u65b9\u6cd5\u662f\uff1a \u5047\u8bbe\u56fe\u4e2d\u6709x\u4e2a\u5272\u70b9\u548cy\u4e2av-DCC\uff0c\u5c31\u76f4\u63a5\u5efa\u4e00\u4e2a\uff08x+y)\u4e2a\u70b9\u7684\u65b0\u56fe \u6bcf\u4e00\u4e2av-DCC\u548c\u5272\u70b9\u90fd\u4f5c\u4e3a\u65b0\u56fe\u7684\u8282\u70b9\u6240\u5728\u3002\u5efa\u5b8c\u540e\u8ba9\u6bcf\u4e2a\u5272\u70b9\u548c\u5305\u542b\u5b83\u4eec\u7684v-DCC\u8fde\u8fb9 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 ... for(int i=1;i<=n;i++) { if(cut[i]) { new_id[i]=++tim; } } for(int i=1;i<=tim;i++) { for(int j=0;j<bcc[i].size();j++) { int x=bcc[i][j]; if(cut[x]) { addedge_c(i,new_id[x]);//\u8d85\u7ea7\u70b9\u7684\u65b0\u52a0\u8fb9\u51fd\u6570 addedge_c(new_id[x],i); } else { new_id[x]=i; } } } \uff082\uff09\u8fb9\u53cc\u8fde\u901a\u5206\u91cf \u6838\u5fc3\uff1a\u6c42\u5272\u8fb9 \u6c42\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\u65f6\uff0c\u9700\u8981\u5148\u6c42\u51fa\u6865\uff0c\u7136\u540e\u628a\u6865\u5168\u90e8\u53bb\u6389\uff0c\u539f\u56fe\u53d8\u6210\u591a\u4e2a\u8fde\u901a\u5757\uff0c\u6b64\u65f6\u6bcf\u4e2a\u8fde\u901a\u5757\u5c31\u662f\u4e00\u4e2a\u8fb9\u53cc\u8fde\u901a\u5206\u91cf 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 //\u5efa\u56fe\u548c\u5404\u6570\u7ec4\u521d\u59cb\u5316\u540c\u6c42\u6865\u4ee3\u7801 void tarjan(int u,int ein) { dfn[u]=low[u]=++tim; for(int i=head[u];i!=-1;i=edge[i].next) { int v=edge[i].to; if(!dfn[v]) { tarjan(v,i); low[u]=min(low[u],low[v]); if(low[v]>dfn[u]) { bridge[i]=bridge[i^1]=1; } } else if(i!=(ein^1)) { low[u]=min(low[u],dfn[v]); } } } void dfs(int u) { dcc_belong[u]=dcc_cnt; dcc[dcc_cnt].push_back(u); for(int i=head[u];;i!=-1;i=edge[i].next) { int v=edge[i].to; if(dcc_belong[v] || bridge[i]) { continue; } dfs(y); } } int main() { ... for(int i=1;i<=n;i++) { if(!dcc_belong(i)) { ++dcc_cnt; dfs(i); } } } e-DCC\u7f29\u70b9:\u6211\u4eec\u628a\u6bcf\u4e00\u4e2ae-DCC\u90fd\u582a\u79f0\u8ba9\u4f60\u8fc7\u4e00\u4e2a\u8282\u70b9\uff0c\u628a\u6240\u6709\u6865\u8fb9\uff08x,y\uff09\u770b\u6210\u8fde\u63a5\u7f16\u53f7\u4e3adcc_belong[x]\u548cdcc_belong[y]\u7684\u4e24\u4e2ae-DCC\u7684\u8fb9\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u4f1a\u5f97\u5230\u4e00\u68f5\u6811\u6216\u8005\u68ee\u6797\uff08\u539f\u56fe\u4e0d\u8fde\u901a\uff09\u3002 1 2 3 4 5 6 7 8 9 10 11 ... for(int i=2;i<=ecnt;i++) { int x=edge[i^1].to,y=edge[i].to; if(dcc_belong[x]==dcc_belong[y]) { continue; } addedge_c(dcc_belong[x],dcc_belong[y]);////\u8d85\u7ea7\u70b9\u7684\u65b0\u52a0\u8fb9\u51fd\u6570 } ...","title":"3.\u65e0\u5411\u56fe\u7684\u53cc\u8fde\u901a\u5206\u91cf"},{"location":"DataStructure/graph/tarjan/#4lca","text":"tarjan\u79bb\u7ebf\u6c42\u89e3LCA\u4ee3\u7801\u8be6\u89c1lca\u7bc7 \u6c42lca\u56db\u79cd\u65b9\u6cd5 * tarjan\u79bb\u7ebf(O(n+q)) * \u500d\u589e(O(n+q)logn) * RMQ(\u6b27\u62c9\u5e8f\u548c\u533a\u95f4\u67e5\u8be2)(O(nlogn)\u9884\u5904\u7406\uff0cO(1)\u67e5\u8be2) * \u6811\u94fe\u5256\u5206(\u5982\u679c\u53ea\u662f\u7b80\u5355\u5730\u6c42lca\u4e0d\u5fc5\u4f7f\u7528\u6811\u94fe\u5256\u5206)","title":"4.\u79bb\u7ebf\u6c42\u89e3LCA"},{"location":"DataStructure/tree/DiameterOfTree/","text":"\u6811\u7684\u76f4\u5f84 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 #include <cstdio> #include <cstring> #include <algorithm> \u65b9\u6cd5\uff1a\u5148\u4ece\u4efb\u610f\u4e00\u70b9 P\u51fa\u53d1 \uff0c\u627e\u79bb\u5b83\u6700\u8fdc\u7684\u70b9 Q \uff0c\u518d\u4ece\u70b9 Q\u51fa\u53d1 \uff0c\u627e\u79bb\u5b83\u6700\u8fdc\u7684\u70b9 W \uff0c W\u5230Q\u7684\u8ddd\u79bb\u5c31\u662f\u662f\u7684\u76f4\u5f84 using namespace std ; const int N = 100005 ; int n , m , t , p , ans ; int d [ N ], first [ N ], v [ N ], w [ N ], nxt [ N ]; void add ( int x , int y , int z ) //\u94fe\u5f0f\u524d\u5411\u661f { t ++ ; nxt [ t ] = first [ x ]; first [ x ] = t ; v [ t ] = y ; w [ t ] = z ; } void dfs ( int x , int father ) { int i , j ; if ( ans < d [ x ]) { ans = d [ x ]; p = x ; } for ( i = first [ x ]; i ; i = nxt [ i ]) { j = v [ i ]; if ( j == father ) continue ; d [ j ] = d [ x ] + w [ i ]; dfs ( j , x ); } } void find ( int x ) //\u4e24\u6b21dfs\u6c42\u76f4\u5f84 { ans = 0 ; d [ x ] = 0 ; dfs ( x , 0 ); } int main () { int x , y , z , i ; scanf ( \"%d%d\" , & n , & m ); for ( i = 1 ; i <= m ; ++ i ) { scanf ( \"%d%d%d\" , & x , & y , & z ); add ( x , y , z ); add ( y , x , z ); } find ( 1 ); find ( p ); printf ( \"%d\" , ans ); return 0 ; } \u6811\u5f62 DP\u6c42\u76f4\u5f84 \u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\u6211\u4eec\u8981\u8bb0\u5f55\u4e24\u4e2a\u503c\uff1a f1 [ i ] \u8868\u793a\u4ee5 i \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\uff0c i \u5230\u53f6\u5b50\u7ed3\u70b9\u8ddd\u79bb\u7684\u6700\u5927\u503c f2 [ i ] \u8868\u793a\u4ee5 i \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\uff0c i \u5230\u53f6\u5b50\u7ed3\u70b9\u8ddd\u79bb\u7684\u6b21\u5927\u503c \u5bf9\u4e8e\u4e00\u4e2a\u8282\u70b9\uff0c\u5b83\u5230\u53f6\u5b50\u7ed3\u70b9\u8ddd\u79bb\u7684\u6700\u5927\u503c\u548c\u6b21\u5927\u81f4\u6240\u7ecf\u8fc7\u7684\u8def\u5f84\u80af\u5b9a\u662f\u4e0d\u4e00\u6837\u7684 \u82e5 j\u662fi\u7684\u513f\u5b50 \uff0c\u90a3\u4e48\uff08\u4e0b\u9762\u7684 w [ i ][ j ] \u8868\u793a i \u5230 j \u7684\u8def\u5f84\u957f\u5ea6\uff09\uff1a \u82e5 f1 [ i ] < f1 [ j ] + w [ i ][ j ] \uff0c f2 [ i ] = f1 [ i ] \uff0c f1 [ i ] = f1 [ j ] + w [ i ][ j ] \uff1b \u5426\u5219\uff0c\u82e5 f2 [ i ] < f1 [ j ] + w [ i ][ j ] \uff0c f2 [ i ] = f1 [ j ] + w [ i ][ j ] \uff1b \u7406\u89e3\uff1a\u8fd9\u6837\u505a\u5c31\u662f\uff0c\u5148\u770b\u80fd\u5426\u66f4\u65b0\u6700\u5927\u503c\uff0c\u82e5\u80fd\uff0c\u5b83\u7684\u6b21\u5927\u503c\u5c31\u662f\u539f\u5148\u7684\u6700\u5927\u503c\uff0c\u518d\u66f4\u65b0\u5b83\u7684\u6700\u5927\u503c\uff1b\u82e5\u4e0d\u80fd\uff0c\u5c31\u770b\u80fd\u4e0d\u80fd\u66f4\u65b0\u6b21\u5927\u503c\uff0c\u82e5\u80fd\uff0c\u5c31\u66f4\u65b0\uff0c\u4e0d\u80fd\u5c31\u4e0d\u7ba1\u5b83 \u8fd9\u6837\u7684\u8bdd\uff0c\u6700\u540e\u7684\u7b54\u6848 answer = max { f1 [ i ] + f2 [ i ] } const int N = 100005 ; int n , m , t , ans ; int f1 [ N ], f2 [ N ]; int first [ N ], v [ N ], w [ N ], nxt [ N ]; void add ( int x , int y , int z ) { t ++ ; nxt [ t ] = first [ x ]; first [ x ] = t ; v [ t ] = y ; w [ t ] = z ; } void dp ( int x , int father ) { int i , j ; for ( i = first [ x ]; i ; i = nxt [ i ]) { j = v [ i ]; if ( j == father ) continue ; dp ( j , x ); if ( f1 [ x ] < f1 [ j ] + w [ i ]) { f2 [ x ] = f1 [ x ]; f1 [ x ] = f1 [ j ] + w [ i ]; } else if ( f2 [ x ] < f1 [ j ] + w [ i ]) f2 [ x ] = f1 [ j ] + w [ i ]; ans = max ( ans , f1 [ x ] + f2 [ x ]); } } int main () { int x , y , z , i ; scanf ( \"%d%d\" , & n , & m ); for ( i = 1 ; i <= m ; ++ i ) { scanf ( \"%d%d%d\" , & x , & y , & z ); add ( x , y , z ); add ( y , x , z ); } dp ( 1 , 0 ); printf ( \"%d\" , ans ); return 0 ; }","title":"\u6811\u7684\u76f4\u5f84"},{"location":"DataStructure/tree/DiameterOfTree/#_1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 #include <cstdio> #include <cstring> #include <algorithm> \u65b9\u6cd5\uff1a\u5148\u4ece\u4efb\u610f\u4e00\u70b9 P\u51fa\u53d1 \uff0c\u627e\u79bb\u5b83\u6700\u8fdc\u7684\u70b9 Q \uff0c\u518d\u4ece\u70b9 Q\u51fa\u53d1 \uff0c\u627e\u79bb\u5b83\u6700\u8fdc\u7684\u70b9 W \uff0c W\u5230Q\u7684\u8ddd\u79bb\u5c31\u662f\u662f\u7684\u76f4\u5f84 using namespace std ; const int N = 100005 ; int n , m , t , p , ans ; int d [ N ], first [ N ], v [ N ], w [ N ], nxt [ N ]; void add ( int x , int y , int z ) //\u94fe\u5f0f\u524d\u5411\u661f { t ++ ; nxt [ t ] = first [ x ]; first [ x ] = t ; v [ t ] = y ; w [ t ] = z ; } void dfs ( int x , int father ) { int i , j ; if ( ans < d [ x ]) { ans = d [ x ]; p = x ; } for ( i = first [ x ]; i ; i = nxt [ i ]) { j = v [ i ]; if ( j == father ) continue ; d [ j ] = d [ x ] + w [ i ]; dfs ( j , x ); } } void find ( int x ) //\u4e24\u6b21dfs\u6c42\u76f4\u5f84 { ans = 0 ; d [ x ] = 0 ; dfs ( x , 0 ); } int main () { int x , y , z , i ; scanf ( \"%d%d\" , & n , & m ); for ( i = 1 ; i <= m ; ++ i ) { scanf ( \"%d%d%d\" , & x , & y , & z ); add ( x , y , z ); add ( y , x , z ); } find ( 1 ); find ( p ); printf ( \"%d\" , ans ); return 0 ; } \u6811\u5f62 DP\u6c42\u76f4\u5f84 \u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\u6211\u4eec\u8981\u8bb0\u5f55\u4e24\u4e2a\u503c\uff1a f1 [ i ] \u8868\u793a\u4ee5 i \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\uff0c i \u5230\u53f6\u5b50\u7ed3\u70b9\u8ddd\u79bb\u7684\u6700\u5927\u503c f2 [ i ] \u8868\u793a\u4ee5 i \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\uff0c i \u5230\u53f6\u5b50\u7ed3\u70b9\u8ddd\u79bb\u7684\u6b21\u5927\u503c \u5bf9\u4e8e\u4e00\u4e2a\u8282\u70b9\uff0c\u5b83\u5230\u53f6\u5b50\u7ed3\u70b9\u8ddd\u79bb\u7684\u6700\u5927\u503c\u548c\u6b21\u5927\u81f4\u6240\u7ecf\u8fc7\u7684\u8def\u5f84\u80af\u5b9a\u662f\u4e0d\u4e00\u6837\u7684 \u82e5 j\u662fi\u7684\u513f\u5b50 \uff0c\u90a3\u4e48\uff08\u4e0b\u9762\u7684 w [ i ][ j ] \u8868\u793a i \u5230 j \u7684\u8def\u5f84\u957f\u5ea6\uff09\uff1a \u82e5 f1 [ i ] < f1 [ j ] + w [ i ][ j ] \uff0c f2 [ i ] = f1 [ i ] \uff0c f1 [ i ] = f1 [ j ] + w [ i ][ j ] \uff1b \u5426\u5219\uff0c\u82e5 f2 [ i ] < f1 [ j ] + w [ i ][ j ] \uff0c f2 [ i ] = f1 [ j ] + w [ i ][ j ] \uff1b \u7406\u89e3\uff1a\u8fd9\u6837\u505a\u5c31\u662f\uff0c\u5148\u770b\u80fd\u5426\u66f4\u65b0\u6700\u5927\u503c\uff0c\u82e5\u80fd\uff0c\u5b83\u7684\u6b21\u5927\u503c\u5c31\u662f\u539f\u5148\u7684\u6700\u5927\u503c\uff0c\u518d\u66f4\u65b0\u5b83\u7684\u6700\u5927\u503c\uff1b\u82e5\u4e0d\u80fd\uff0c\u5c31\u770b\u80fd\u4e0d\u80fd\u66f4\u65b0\u6b21\u5927\u503c\uff0c\u82e5\u80fd\uff0c\u5c31\u66f4\u65b0\uff0c\u4e0d\u80fd\u5c31\u4e0d\u7ba1\u5b83 \u8fd9\u6837\u7684\u8bdd\uff0c\u6700\u540e\u7684\u7b54\u6848 answer = max { f1 [ i ] + f2 [ i ] } const int N = 100005 ; int n , m , t , ans ; int f1 [ N ], f2 [ N ]; int first [ N ], v [ N ], w [ N ], nxt [ N ]; void add ( int x , int y , int z ) { t ++ ; nxt [ t ] = first [ x ]; first [ x ] = t ; v [ t ] = y ; w [ t ] = z ; } void dp ( int x , int father ) { int i , j ; for ( i = first [ x ]; i ; i = nxt [ i ]) { j = v [ i ]; if ( j == father ) continue ; dp ( j , x ); if ( f1 [ x ] < f1 [ j ] + w [ i ]) { f2 [ x ] = f1 [ x ]; f1 [ x ] = f1 [ j ] + w [ i ]; } else if ( f2 [ x ] < f1 [ j ] + w [ i ]) f2 [ x ] = f1 [ j ] + w [ i ]; ans = max ( ans , f1 [ x ] + f2 [ x ]); } } int main () { int x , y , z , i ; scanf ( \"%d%d\" , & n , & m ); for ( i = 1 ; i <= m ; ++ i ) { scanf ( \"%d%d%d\" , & x , & y , & z ); add ( x , y , z ); add ( y , x , z ); } dp ( 1 , 0 ); printf ( \"%d\" , ans ); return 0 ; }","title":"\u6811\u7684\u76f4\u5f84"},{"location":"DataStructure/tree/PointDivide/","text":"\u70b9\u5206\u6cbb\u6838\u5fc3\uff1a\u627e\u91cd\u5fc3 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 void divide(int u){ ans+=solve(u,0); vis[u]=1; int totsz=size; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]) continue; ans-=solve(v,edge[i]); mx=inf,rt=0; size=sz[v]>sz[u]?totsz-sz[u]:sz[v];//\u8fd9\u91cc\u5e94\u8be5\u8fd9\u6837\u5199\u624d\u662f\u5bf9\u7684 findrt(v,0); divide(rt); } } \u00b6 \u7ed9\u4e00\u9897n\u4e2a\u8282\u70b9\u7684\u6811\uff0c\u6bcf\u6761\u8fb9\u4e0a\u6709\u4e00\u4e2a\u8ddd\u79bbv\u3002\u5b9a\u4e49d(u,v)\u4e3au\u5230v\u7684\u6700\u5c0f\u8ddd\u79bb\u3002\u7ed9\u5b9ak\u503c\uff0c\u6c42\u6709\u591a\u5c11\u70b9\u5bf9\uff08u\uff0cv\uff09\u4f7fu\u5230v\u7684\u8ddd\u79bb\u5c0f\u4e8e\u7b49\u4e8ek\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 //minamoto #include<bits/stdc++.h> #define N 40005 #define M 80005 #define ll long long #define inf 0x3f3f3f3f using namespace std; #define getc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<15,stdin),p1==p2)?EOF:*p1++) char buf[1<<15],*p1=buf,*p2=buf; template<class T>inline bool cmax(T&a,const T&b){return a<b?a=b,1:0;} inline int read(){ #define num ch-'0' char ch;bool flag=0;int res; while(!isdigit(ch=getc())) (ch=='-')&&(flag=true); for(res=num;isdigit(ch=getc());res=res*10+num); (flag)&&(res=-res); #undef num return res; } int ver[M],Next[M],head[N],edge[M]; int n,tot,root;ll k; void add(int u,int v,int e){ ver[++tot]=v,Next[tot]=head[u],head[u]=tot,edge[tot]=e; ver[++tot]=u,Next[tot]=head[v],head[v]=tot,edge[tot]=e; } int sz[N],vis[N],mx,size; ll d[N],q[N],l,r; void getroot(int u,int fa){ sz[u]=1;int num=0; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(v==fa||vis[v]) continue; getroot(v,u); sz[u]+=sz[v]; cmax(num,sz[v]); } cmax(num,size-sz[u]); if(num<mx) mx=num,root=u; } void getdis(int u,int fa){ q[++r]=d[u]; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(v==fa||vis[v]) continue; d[v]=d[u]+edge[i]; getdis(v,u); } } ll calc(int u,int val){ r=0; d[u]=val; getdis(u,0); ll sum=0;l=1; sort(q+1,q+r+1); while(l<r){ if(q[l]+q[r]<=k) sum+=r-l,++l; else --r; } return sum; } ll ans=0; void dfs(int u){ ans+=calc(u,0); vis[u]=1; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]) continue; ans-=calc(v,edge[i]); size=sz[v]; mx=inf; getroot(v,0); dfs(root); } } int main(){ //freopen(\"testdata.in\",\"r\",stdin); n=read(); for(int i=1;i<n;++i){ int u=read(),v=read(),e=read(); add(u,v,e); } k=read(); size=n; mx=inf; getroot(1,0); dfs(root); printf(\"%lld\",ans); return 0; } tree \u7ed9\u5b9a\u4e00\u68f5\u6709n\u4e2a\u70b9\u7684\u6811 \u8be2\u95ee\u6811\u4e0a\u8ddd\u79bb\u4e3ak\u7684\u70b9\u5bf9\u662f\u5426\u5b58\u5728\u3002\u70b9\u5206\u6cbb\u3010\u6a21\u677f\u3011 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 //minamoto #include<cstdio> #include<iostream> #define inf 0x3f3f3f3f #define getc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++) char buf[1<<21],*p1=buf,*p2=buf; template<class T>inline bool cmax(T&a,const T&b){return a<b?a=b,1:0;} inline int read(){ #define num ch-'0' char ch;bool flag=0;int res; while(!isdigit(ch=getc())) (ch=='-')&&(flag=true); for(res=num;isdigit(ch=getc());res=res*10+num); (flag)&&(res=-res); #undef num return res; } const int N=10005; int ans[10000005]; int ver[N<<1],head[N],Next[N<<1],edge[N<<1]; int sz[N],son[N],st[N];bool vis[N]; int n,m,size,mx,rt,tot,top; inline void add(int u,int v,int e){ ver[++tot]=v,Next[tot]=head[u],head[u]=tot,edge[tot]=e; ver[++tot]=u,Next[tot]=head[v],head[v]=tot,edge[tot]=e; } void getrt(int u,int fa){ sz[u]=1,son[u]=0; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]||v==fa) continue; getrt(v,u); sz[u]+=sz[v],cmax(son[u],sz[v]); } cmax(son[u],size-sz[u]); if(son[u]<mx) mx=son[u],rt=u; } void query(int u,int fa,int d){ st[++top]=d; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]||v==fa) continue; query(v,u,d+edge[i]); } } void solve(int rt,int d,int f){ top=0; query(rt,0,d); if(f){ for(int i=1;i<top;++i) for(int j=i+1;j<=top;++j) ++ans[st[i]+st[j]]; } else{ for(int i=1;i<top;++i) for(int j=i+1;j<=top;++j) --ans[st[i]+st[j]]; } } void divide(int u){ vis[u]=true; solve(u,0,1); for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]) continue; solve(v,edge[i],0); mx=inf,rt=0,size=sz[v]; getrt(v,0); divide(rt); } } int main(){ n=read(),m=read(); for(int i=1;i<n;++i){ int u=read(),v=read(),e=read(); add(u,v,e); } rt=0,mx=inf,size=n; getrt(1,0),divide(rt); while(m--){ int k=read(); puts(ans[k]?\"AYE\":\"NAY\"); } return 0; }","title":"\u70b9\u5206\u6cbb"},{"location":"DataStructure/tree/PointDivide/#_1","text":"","title":"\u70b9\u5206\u6cbb\u6838\u5fc3\uff1a\u627e\u91cd\u5fc3"},{"location":"DataStructure/tree/PointDivide/#1-2-3-4-5-6-7-8-9-10-11-12-13-14void-divideint-u-anssolveu0-visu1-int-totszsize-forint-iheaduiinexti-int-vveri-ifvisv-continue-ans-solvevedgei-mxinfrt0-sizeszvszutotsz-szuszv-findrtv0-dividert","text":"\u7ed9\u4e00\u9897n\u4e2a\u8282\u70b9\u7684\u6811\uff0c\u6bcf\u6761\u8fb9\u4e0a\u6709\u4e00\u4e2a\u8ddd\u79bbv\u3002\u5b9a\u4e49d(u,v)\u4e3au\u5230v\u7684\u6700\u5c0f\u8ddd\u79bb\u3002\u7ed9\u5b9ak\u503c\uff0c\u6c42\u6709\u591a\u5c11\u70b9\u5bf9\uff08u\uff0cv\uff09\u4f7fu\u5230v\u7684\u8ddd\u79bb\u5c0f\u4e8e\u7b49\u4e8ek\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 //minamoto #include<bits/stdc++.h> #define N 40005 #define M 80005 #define ll long long #define inf 0x3f3f3f3f using namespace std; #define getc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<15,stdin),p1==p2)?EOF:*p1++) char buf[1<<15],*p1=buf,*p2=buf; template<class T>inline bool cmax(T&a,const T&b){return a<b?a=b,1:0;} inline int read(){ #define num ch-'0' char ch;bool flag=0;int res; while(!isdigit(ch=getc())) (ch=='-')&&(flag=true); for(res=num;isdigit(ch=getc());res=res*10+num); (flag)&&(res=-res); #undef num return res; } int ver[M],Next[M],head[N],edge[M]; int n,tot,root;ll k; void add(int u,int v,int e){ ver[++tot]=v,Next[tot]=head[u],head[u]=tot,edge[tot]=e; ver[++tot]=u,Next[tot]=head[v],head[v]=tot,edge[tot]=e; } int sz[N],vis[N],mx,size; ll d[N],q[N],l,r; void getroot(int u,int fa){ sz[u]=1;int num=0; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(v==fa||vis[v]) continue; getroot(v,u); sz[u]+=sz[v]; cmax(num,sz[v]); } cmax(num,size-sz[u]); if(num<mx) mx=num,root=u; } void getdis(int u,int fa){ q[++r]=d[u]; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(v==fa||vis[v]) continue; d[v]=d[u]+edge[i]; getdis(v,u); } } ll calc(int u,int val){ r=0; d[u]=val; getdis(u,0); ll sum=0;l=1; sort(q+1,q+r+1); while(l<r){ if(q[l]+q[r]<=k) sum+=r-l,++l; else --r; } return sum; } ll ans=0; void dfs(int u){ ans+=calc(u,0); vis[u]=1; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]) continue; ans-=calc(v,edge[i]); size=sz[v]; mx=inf; getroot(v,0); dfs(root); } } int main(){ //freopen(\"testdata.in\",\"r\",stdin); n=read(); for(int i=1;i<n;++i){ int u=read(),v=read(),e=read(); add(u,v,e); } k=read(); size=n; mx=inf; getroot(1,0); dfs(root); printf(\"%lld\",ans); return 0; } tree \u7ed9\u5b9a\u4e00\u68f5\u6709n\u4e2a\u70b9\u7684\u6811 \u8be2\u95ee\u6811\u4e0a\u8ddd\u79bb\u4e3ak\u7684\u70b9\u5bf9\u662f\u5426\u5b58\u5728\u3002\u70b9\u5206\u6cbb\u3010\u6a21\u677f\u3011 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 //minamoto #include<cstdio> #include<iostream> #define inf 0x3f3f3f3f #define getc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++) char buf[1<<21],*p1=buf,*p2=buf; template<class T>inline bool cmax(T&a,const T&b){return a<b?a=b,1:0;} inline int read(){ #define num ch-'0' char ch;bool flag=0;int res; while(!isdigit(ch=getc())) (ch=='-')&&(flag=true); for(res=num;isdigit(ch=getc());res=res*10+num); (flag)&&(res=-res); #undef num return res; } const int N=10005; int ans[10000005]; int ver[N<<1],head[N],Next[N<<1],edge[N<<1]; int sz[N],son[N],st[N];bool vis[N]; int n,m,size,mx,rt,tot,top; inline void add(int u,int v,int e){ ver[++tot]=v,Next[tot]=head[u],head[u]=tot,edge[tot]=e; ver[++tot]=u,Next[tot]=head[v],head[v]=tot,edge[tot]=e; } void getrt(int u,int fa){ sz[u]=1,son[u]=0; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]||v==fa) continue; getrt(v,u); sz[u]+=sz[v],cmax(son[u],sz[v]); } cmax(son[u],size-sz[u]); if(son[u]<mx) mx=son[u],rt=u; } void query(int u,int fa,int d){ st[++top]=d; for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]||v==fa) continue; query(v,u,d+edge[i]); } } void solve(int rt,int d,int f){ top=0; query(rt,0,d); if(f){ for(int i=1;i<top;++i) for(int j=i+1;j<=top;++j) ++ans[st[i]+st[j]]; } else{ for(int i=1;i<top;++i) for(int j=i+1;j<=top;++j) --ans[st[i]+st[j]]; } } void divide(int u){ vis[u]=true; solve(u,0,1); for(int i=head[u];i;i=Next[i]){ int v=ver[i]; if(vis[v]) continue; solve(v,edge[i],0); mx=inf,rt=0,size=sz[v]; getrt(v,0); divide(rt); } } int main(){ n=read(),m=read(); for(int i=1;i<n;++i){ int u=read(),v=read(),e=read(); add(u,v,e); } rt=0,mx=inf,size=n; getrt(1,0),divide(rt); while(m--){ int k=read(); puts(ans[k]?\"AYE\":\"NAY\"); } return 0; }","title":" 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14void divide(int u){\n    ans+=solve(u,0);\n    vis[u]=1;\n    int totsz=size;\n    for(int i=head[u];i;i=Next[i]){\n        int v=ver[i];\n        if(vis[v]) continue;\n        ans-=solve(v,edge[i]);\n        mx=inf,rt=0;\n        size=sz[v]&gt;sz[u]?totsz-sz[u]:sz[v];//\u8fd9\u91cc\u5e94\u8be5\u8fd9\u6837\u5199\u624d\u662f\u5bf9\u7684 \n        findrt(v,0);\n        divide(rt);\n    }\n}\n\n"},{"location":"DataStructure/tree/binary_tree/","text":"\u4e8c\u53c9\u6811 \u00b6 \u4e8c\u53c9\u641c\u7d22\u6811\uff1a\u5de6\u5b50\u603b\u5c0f\uff0c\u53f3\u5b50\u603b\u5927 \u5806\uff1a\u6700\u5927\u5806\u6839\u8282\u70b9\u6700\u5927\uff0c\u6700\u5c0f\u5806\u6839\u8282\u70b9\u6700\u5c0f \u7ea2\u9ed1\u6811\uff1a\u7ed3\u70b9\u5206\u7ea2\u9ed1\uff0c\u6839\u8282\u70b9\u5230\u53f6\u8282\u70b9\u6700\u957f\u8def\u5f84\u4e0d\u8d85\u8fc7\u6700\u77ed\u8def\u5f84\u7684\u4e24\u500d 1 \u4e8c\u53c9\u6811\u7684\u7684\u5b9a\u4e49 \u00b6 1 2 3 4 5 6 typedef struct BiTNode { char data ; // \u5b58\u653e\u7ed3\u70b9\u7684\u6570\u636e\u5143\u7d20\u3002 struct BiTNode * lchild ; // \u6307\u5411\u5de6\u5b50\u7ed3\u70b9\u5730\u5740\u7684\u6307\u9488\u3002 struct BiTNode * rchild ; // \u6307\u5411\u53f3\u5b50\u7ed3\u70b9\u5730\u5740\u7684\u6307\u9488\u3002 } BiTNode , * BiTree ; 2 \u4e8c\u53c9\u6811\u7684\u9012\u5f52\u521b\u5efa \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 void CreateBiTree ( BiTree * & Node ) { char data ; cin >> data ; if ( data ) { Node = new BiTNode ; Node -> data = data ; Node -> lchild = NULL ; Node -> rchild = NULL ; create ( Node -> lchild ); create ( Node -> rchild ); } else { Node = NULL ; } } 3 \u4e8c\u53c9\u6811\u7684\u904d\u5386 \u00b6 1 2 3 4 5 6 7 8 \u5982\u4e0b\u7ed3\u6784\u7684\u4e8c\u53c9\u6811\u3002 1 / \\ 2 3 / \\ / 4 5 6 / \\ / \\ 7 8 9 0 \u975e\u9012\u5f52\u65b9\u5f0f\u8fdb\u884c\u524d\u4e2d\u5e8f\u904d\u5386\u7684\u601d\u8def\u5982\u4e0b\uff08\u538b\u5de6\u51fa\u53f3\uff09\uff1a 1.\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u6cbf\u6811\u7684\u5de6\u8282\u70b9\u4f9d\u6b21\u5165\u6808\uff0c\u76f4\u5230\u5de6\u8282\u70b9\u4e3a\u7a7a 2.\u6808\u9876\u5143\u7d20\u51fa\u6808 3.\u5982\u679c\u51fa\u6808\u5143\u7d20\u6709\u53f3\u8282\u70b9\uff0c\u628a\u53f3\u8282\u70b9\u5f53\u6210\u4e00\u68f5\u5b50\u6811\u56de\u5230\u6b65\u9aa4 1 \uff0c\u5426\u5219\u56de\u5230\u6b65\u9aa4 2 4.\u5982\u679c\u6808\u4e3a\u7a7a\uff0c\u5219\u904d\u5386\u5b8c\u6210 \u5176\u4e2d\u524d\u5e8f\u904d\u5386\u5728\u7ed3\u70b9\u5165\u6808\u524d\u8bbf\u95ee\uff0c\u4e2d\u5e8f\u904d\u5386\u5728\u7ed3\u70b9\u51fa\u6808\u540e\u8bbf\u95ee 3.1 \u5148\u5e8f\u904d\u5386 \u00b6 \u5148\u5e8f\u904d\u5386\u987a\u5e8f\u4e3a\uff1a \u6839 -> \u5de6 -> \u53f3 \u5373 1\uff0c2\uff0c4\uff0c7\uff0c8\uff0c5\uff0c9\uff0c0\uff0c3\uff0c6 \u9012\u5f52\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 void PreOrder ( BiTree TT ) { if ( TT == NULL ) return ; visit ( TT ); // \u8bbf\u95ee\u5b50\u6811TT\u7684\u6839\u7ed3\u70b9\u3002 PreOrder ( TT -> lchild ); // \u904d\u5386\u5de6\u5b50\u6811\u3002 PreOrder ( TT -> rchild ); // \u904d\u5386\u53f3\u5b50\u6811\u3002 } \u5faa\u73af\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 void PreOrder1 ( BiTree TT ) { stack < BiTree > s ; BiTree now = TT ; while ( now != NULL || ! s . empty ()) { if ( now != NULL ) { visit ( now ); s . push ( now ); now = now -> lchild ; } else { now = s . top (); s . pop (); now = now -> rchild ; } } \u9012\u5f52\u904d\u5386\u4e3a\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\uff0c\u5e94\u7528\u4f8b\u5b50\uff1a 3.1.1 \u5224\u65ad b \u6811\u662f\u5426\u4e3a a \u6811\u7684\u5b50\u6811 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 bool HasSubtree ( TreeNode * pRoot1 , TreeNode * pRoot2 ) { bool result = false ; if ( pRoot1 && pRoot2 ) { if ( pRoot1 -> val == pRoot2 -> val ) { if ( DoesTree1HaveTree2 ( pRoot1 , pRoot2 )) { result = true ; } } if ( ! result ) { result = HasSubtree ( pRoot1 -> left , pRoot2 ); } if ( ! result ) { result = HasSubtree ( pRoot1 -> right , pRoot2 ); } } return result ; } bool DoesTree1HaveTree2 ( TreeNode * root1 , TreeNode * root2 ) { if ( root2 == NULL ) { return true ; } if ( root1 == NULL ) { return false ; } if ( root1 -> val != root2 -> val ) { return false ; } return DoesTree1HaveTree2 ( root1 -> left , root2 -> left ) && DoesTree1HaveTree2 ( root1 -> right , root2 -> right ); } 3.2 \u4e2d\u5e8f\u904d\u5386 \u00b6 \u4e2d\u5e8f\u904d\u5386\u987a\u5e8f\u4e3a\uff1a \u5de6 -> \u53f3 -> \u6839 \u5373 7\uff0c4\uff0c8\uff0c2\uff0c9\uff0c5\uff0c0\uff0c1\uff0c6\uff0c3 \u9012\u5f52\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 void InOrder ( BiTree TT ) { if ( TT == NULL ) return ; InOrder ( TT -> lchild ); // \u904d\u5386\u5de6\u5b50\u6811\u3002 visit ( TT ); // \u8bbf\u95ee\u5b50\u6811TT\u7684\u6839\u7ed3\u70b9\u3002 InOrder ( TT -> rchild ); // \u904d\u5386\u53f3\u5b50\u6811\u3002 } \u5faa\u73af\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 void InOrder1 ( BiTree TT ) { stack < BiTree > s ; BiTree now = TT ; while ( now != NULL || ! s . empty ()) { if ( now != NULL ) { s . push ( now ); now = now -> lchild ; } else { now = s . top (); s . pop (); visit ( now ); now = now -> rchild ; } } } \u601d\u7ef4\u98ce\u66b4\uff1a\u901a\u8fc7\u524d\u5e8f\u904d\u5386\u548c\u4e2d\u5e8f\u904d\u5386\u91cd\u5efa\u4e8c\u53c9\u6811 \u00b6 input: [1,2,3,4,5,6,7],[3,2,4,1,6,5,7] outputs: {1,2,5,3,4,6,7} \u601d\u8def\uff1a \u524d\u5e8f\u9996\u4e3a\u6839\uff0c\u4e2d\u5e8f\u5bfb\u6839\u5206\u5de6\u53f3\uff0c\u5de6\u53f3\u5b50\u6811\u518d\u9012\u5f52 code: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 TreeNode * reConstructBinaryTree ( vector < int > pre , vector < int > vin ) { TreeNode * root = ( TreeNode * ) malloc ( sizeof ( TreeNode )); root -> val = pre [ 0 ]; // \u524d\u5e8f\u4e3a\u6839 root -> left = NULL ; root -> right = NULL ; if ( pre . size () == 1 && vin . size () == 1 ) { return root ; } int inroot = 0 ; while ( vin [ inroot ] != pre [ 0 ]) { inroot ++ ; // \u4e2d\u5e8f\u5e8f\u5217\u627e\u6839 } if ( inroot > 0 ) // \u5de6\u5b50\u6811\u5b58\u5728 { vector < int > lpre ( pre . begin () + 1 , pre . begin () + inroot + 1 ); vector < int > lvin ( vin . begin (), vin . begin () + inroot ); root -> left = reConstructBinaryTree ( lpre , lvin ); } if ( inroot < vin . size () - 1 ) // \u53f3\u5b50\u6811\u5b58\u5728 { vector < int > rpre ( pre . begin () + inroot + 1 , pre . end ()); vector < int > rvin ( vin . begin () + inroot + 1 , vin . end ()); root -> right = reConstructBinaryTree ( rpre , rvin ); } return root ; } 3.2.1 \u4e8c\u53c9\u641c\u7d22\u6811\u548c\u53cc\u5411\u94fe\u8868\u7684\u8f6c\u6362 \u00b6 \u8f93\u5165\u4e00\u68f5\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u5c06\u8be5\u4e8c\u53c9\u641c\u7d22\u6811\u8f6c\u6362\u6210\u4e00\u4e2a\u6392\u5e8f\u7684\u53cc\u5411\u94fe\u8868\u3002\u8981\u6c42\u4e0d\u80fd\u521b\u5efa\u4efb\u4f55\u65b0\u7684\u7ed3\u70b9\uff0c\u53ea\u80fd\u8c03\u6574\u6811\u4e2d\u7ed3\u70b9\u6307\u9488\u7684\u6307\u5411 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 TreeNode * Convert ( TreeNode * pRootOfTree ) { stack < TreeNode *> s ; TreeNode * p = pRootOfTree , * pre = NULL , * ans = NULL ; while ( ! s . empty () || p ) { if ( p != NULL ) { s . push ( p ); p = p -> left ; } else { p = s . top (); s . pop (); if ( pre ) { pre -> right = p ; } else { ans = p ; } p -> left = pre ; pre = p ; p = p -> right ; } } return ans ; } 3.3 \u540e\u5e8f\u904d\u5386 \u00b6 \u540e\u5e8f\u904d\u5386\u987a\u5e8f\u4e3a\uff1a \u5de6 -> \u53f3 -> \u6839 \u5373 7\uff0c8\uff0c4\uff0c9\uff0c0\uff0c5\uff0c2\uff0c6\uff0c3\uff0c1 \u9012\u5f52\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 void PostOrder ( BiTree TT ) { if ( TT == NULL ) return ; PostOrder ( TT -> lchild ); // \u904d\u5386\u5de6\u5b50\u6811\u3002 PostOrder ( TT -> rchild ); // \u904d\u5386\u53f3\u5b50\u6811\u3002 visit ( TT ); // \u8bbf\u95ee\u5b50\u6811TT\u7684\u6839\u7ed3\u70b9\u3002 } \u5faa\u73af\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 void PostOrder1 ( BiTree TT ) { stack < BiTree > s ; BiTree now = TT , vis = NULL ; // \u6700\u8fd1\u8bbf\u95ee\u8fc7\u7684\u7ed3\u70b9 while ( now != NULL || ! s . empty ()) { if ( now != NULL ) //\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u6cbf\u5de6\u4f9d\u6b21\u5165\u6808\u76f4\u5230\u7a7a { s . push ( now ); now = now -> lchild ; } else // \u8f6c\u5411\u53f3 { now = s . top (); // \u8bfb\u53d6\u6808\u9876\u5143\u7d20\u4e0d\u51fa\u6808 // \u5982\u679c\u53f3\u5b50\u6811\u5b58\u5728\u4e14\u6ca1\u88ab\u8bbf\u95ee\u8fc7 if ( now -> rchild != NULL && now -> rchild != vis ) { now = now -> rchild ; // \u8f6c\u5411\u53f3 s . push ( now ); // \u53f3\u5b50\u6811\u7684\u6839\u8282\u70b9\u5165\u6808 now = now -> lchild ; // \u518d\u8f6c\u5411\u53f3\u5b50\u6811\u7684\u5de6\u8282\u70b9 } else { now = s . top (); s . pop (); // \u5c06\u8282\u70b9\u5f39\u51fa visit ( now ); // \u8bbf\u95ee\u8282\u70b9 vis = now ; // \u8bb0\u4e0b\u6700\u8fd1\u8bbf\u95ee\u8fc7\u7684\u8282\u70b9 now = NULL ; // \u8282\u70b9\u8bbf\u95ee\u5b8c\u6210\u540e\uff0c\u91cd\u7f6e\u7ee7\u7eed\u8bfb\u53d6\u6808\u9876\u5143\u7d20 } } } } \u601d\u7ef4\u98ce\u66b4\uff1a\u5224\u65ad\u4e00\u4e2a\u5e8f\u5217\u662f\u4e0d\u662f\u4e8c\u53c9\u641c\u7d22\u6811\u7684\u540e\u5e8f\u5e8f\u5217 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 bool VerifySquenceOfBST ( vector < int > sequence ) { if ( sequence . empty ()) { return false ; } int len = sequence . size (); int root = sequence [ len - 1 ], index = len - 1 ; for ( int i = 0 ; i < len - 1 ; i ++ ) { if ( sequence [ i ] > root ) { index = i ; break ; } } for ( int i = index + 1 ; i < len - 1 ; i ++ ) { if ( sequence [ i ] < root ) { return false ; } } bool l = true ; if ( index > 0 ) { vector < int > left ( sequence . begin (), sequence . begin () + index ); l = VerifySquenceOfBST ( left ); } bool r = true ; if ( index < len - 1 ) { vector < int > right ( sequence . begin () + index , sequence . end () - 1 ); r = VerifySquenceOfBST ( right ); } return l && r ; } \u540e\u5e8f\u904d\u5386\u5e38\u7528\u4e8e\u9488\u5bf9\u4e8e\u5bf9\u5b50\u6811\u7684\u641c\u7d22\u548c\u7edf\u8ba1\u5173\u7cfb 3.3.1 \u5224\u65ad\u662f\u5426\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\uff08\u5de6\u53f3\u4e24\u4e2a\u5b50\u6811\u9ad8\u5ea6\u5dee\u4e0d\u5927\u4e8e 1 \uff09 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class Solution { public : int cnt = 0 ; bool ans = true ; int Count ( TreeNode * pRoot ) { if ( pRoot == NULL ) return 0 ; int l = Count ( pRoot -> left ); int r = Count ( pRoot -> right ); if ( abs ( l - r ) > 1 ) { ans = false ; } return l > r ? l + 1 : r + 1 ; } bool IsBalanced_Solution ( TreeNode * pRoot ) { Count ( pRoot ); return ans ; } }; 3.4 \u5c42\u6b21\u904d\u5386 \u00b6 \u5c42\u6b21\u904d\u5386\u5373\u4e3a\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22(BFS): 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 void LevelOrder ( BiTree TT ) { queue < BiTree > q ; BiTree now = TT ; q . push ( now ); while ( ! q . empty ()) { now = q . front (); q . pop (); visit ( now ); if ( now -> lchild != NULL ) { q . push ( now -> lchild ); } if ( now -> rchild != NULL ) { q . push ( now -> rchild ); } } }","title":"\u4e8c\u53c9\u6811"},{"location":"DataStructure/tree/binary_tree/#_1","text":"\u4e8c\u53c9\u641c\u7d22\u6811\uff1a\u5de6\u5b50\u603b\u5c0f\uff0c\u53f3\u5b50\u603b\u5927 \u5806\uff1a\u6700\u5927\u5806\u6839\u8282\u70b9\u6700\u5927\uff0c\u6700\u5c0f\u5806\u6839\u8282\u70b9\u6700\u5c0f \u7ea2\u9ed1\u6811\uff1a\u7ed3\u70b9\u5206\u7ea2\u9ed1\uff0c\u6839\u8282\u70b9\u5230\u53f6\u8282\u70b9\u6700\u957f\u8def\u5f84\u4e0d\u8d85\u8fc7\u6700\u77ed\u8def\u5f84\u7684\u4e24\u500d","title":"\u4e8c\u53c9\u6811"},{"location":"DataStructure/tree/binary_tree/#1","text":"1 2 3 4 5 6 typedef struct BiTNode { char data ; // \u5b58\u653e\u7ed3\u70b9\u7684\u6570\u636e\u5143\u7d20\u3002 struct BiTNode * lchild ; // \u6307\u5411\u5de6\u5b50\u7ed3\u70b9\u5730\u5740\u7684\u6307\u9488\u3002 struct BiTNode * rchild ; // \u6307\u5411\u53f3\u5b50\u7ed3\u70b9\u5730\u5740\u7684\u6307\u9488\u3002 } BiTNode , * BiTree ;","title":"1 \u4e8c\u53c9\u6811\u7684\u7684\u5b9a\u4e49"},{"location":"DataStructure/tree/binary_tree/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 void CreateBiTree ( BiTree * & Node ) { char data ; cin >> data ; if ( data ) { Node = new BiTNode ; Node -> data = data ; Node -> lchild = NULL ; Node -> rchild = NULL ; create ( Node -> lchild ); create ( Node -> rchild ); } else { Node = NULL ; } }","title":"2 \u4e8c\u53c9\u6811\u7684\u9012\u5f52\u521b\u5efa"},{"location":"DataStructure/tree/binary_tree/#3","text":"1 2 3 4 5 6 7 8 \u5982\u4e0b\u7ed3\u6784\u7684\u4e8c\u53c9\u6811\u3002 1 / \\ 2 3 / \\ / 4 5 6 / \\ / \\ 7 8 9 0 \u975e\u9012\u5f52\u65b9\u5f0f\u8fdb\u884c\u524d\u4e2d\u5e8f\u904d\u5386\u7684\u601d\u8def\u5982\u4e0b\uff08\u538b\u5de6\u51fa\u53f3\uff09\uff1a 1.\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u6cbf\u6811\u7684\u5de6\u8282\u70b9\u4f9d\u6b21\u5165\u6808\uff0c\u76f4\u5230\u5de6\u8282\u70b9\u4e3a\u7a7a 2.\u6808\u9876\u5143\u7d20\u51fa\u6808 3.\u5982\u679c\u51fa\u6808\u5143\u7d20\u6709\u53f3\u8282\u70b9\uff0c\u628a\u53f3\u8282\u70b9\u5f53\u6210\u4e00\u68f5\u5b50\u6811\u56de\u5230\u6b65\u9aa4 1 \uff0c\u5426\u5219\u56de\u5230\u6b65\u9aa4 2 4.\u5982\u679c\u6808\u4e3a\u7a7a\uff0c\u5219\u904d\u5386\u5b8c\u6210 \u5176\u4e2d\u524d\u5e8f\u904d\u5386\u5728\u7ed3\u70b9\u5165\u6808\u524d\u8bbf\u95ee\uff0c\u4e2d\u5e8f\u904d\u5386\u5728\u7ed3\u70b9\u51fa\u6808\u540e\u8bbf\u95ee","title":"3 \u4e8c\u53c9\u6811\u7684\u904d\u5386"},{"location":"DataStructure/tree/binary_tree/#31","text":"\u5148\u5e8f\u904d\u5386\u987a\u5e8f\u4e3a\uff1a \u6839 -> \u5de6 -> \u53f3 \u5373 1\uff0c2\uff0c4\uff0c7\uff0c8\uff0c5\uff0c9\uff0c0\uff0c3\uff0c6 \u9012\u5f52\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 void PreOrder ( BiTree TT ) { if ( TT == NULL ) return ; visit ( TT ); // \u8bbf\u95ee\u5b50\u6811TT\u7684\u6839\u7ed3\u70b9\u3002 PreOrder ( TT -> lchild ); // \u904d\u5386\u5de6\u5b50\u6811\u3002 PreOrder ( TT -> rchild ); // \u904d\u5386\u53f3\u5b50\u6811\u3002 } \u5faa\u73af\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 void PreOrder1 ( BiTree TT ) { stack < BiTree > s ; BiTree now = TT ; while ( now != NULL || ! s . empty ()) { if ( now != NULL ) { visit ( now ); s . push ( now ); now = now -> lchild ; } else { now = s . top (); s . pop (); now = now -> rchild ; } } \u9012\u5f52\u904d\u5386\u4e3a\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\uff0c\u5e94\u7528\u4f8b\u5b50\uff1a","title":"3.1 \u5148\u5e8f\u904d\u5386"},{"location":"DataStructure/tree/binary_tree/#311-b-a","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 bool HasSubtree ( TreeNode * pRoot1 , TreeNode * pRoot2 ) { bool result = false ; if ( pRoot1 && pRoot2 ) { if ( pRoot1 -> val == pRoot2 -> val ) { if ( DoesTree1HaveTree2 ( pRoot1 , pRoot2 )) { result = true ; } } if ( ! result ) { result = HasSubtree ( pRoot1 -> left , pRoot2 ); } if ( ! result ) { result = HasSubtree ( pRoot1 -> right , pRoot2 ); } } return result ; } bool DoesTree1HaveTree2 ( TreeNode * root1 , TreeNode * root2 ) { if ( root2 == NULL ) { return true ; } if ( root1 == NULL ) { return false ; } if ( root1 -> val != root2 -> val ) { return false ; } return DoesTree1HaveTree2 ( root1 -> left , root2 -> left ) && DoesTree1HaveTree2 ( root1 -> right , root2 -> right ); }","title":"3.1.1 \u5224\u65ad b \u6811\u662f\u5426\u4e3a a \u6811\u7684\u5b50\u6811"},{"location":"DataStructure/tree/binary_tree/#32","text":"\u4e2d\u5e8f\u904d\u5386\u987a\u5e8f\u4e3a\uff1a \u5de6 -> \u53f3 -> \u6839 \u5373 7\uff0c4\uff0c8\uff0c2\uff0c9\uff0c5\uff0c0\uff0c1\uff0c6\uff0c3 \u9012\u5f52\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 void InOrder ( BiTree TT ) { if ( TT == NULL ) return ; InOrder ( TT -> lchild ); // \u904d\u5386\u5de6\u5b50\u6811\u3002 visit ( TT ); // \u8bbf\u95ee\u5b50\u6811TT\u7684\u6839\u7ed3\u70b9\u3002 InOrder ( TT -> rchild ); // \u904d\u5386\u53f3\u5b50\u6811\u3002 } \u5faa\u73af\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 void InOrder1 ( BiTree TT ) { stack < BiTree > s ; BiTree now = TT ; while ( now != NULL || ! s . empty ()) { if ( now != NULL ) { s . push ( now ); now = now -> lchild ; } else { now = s . top (); s . pop (); visit ( now ); now = now -> rchild ; } } }","title":"3.2 \u4e2d\u5e8f\u904d\u5386"},{"location":"DataStructure/tree/binary_tree/#_2","text":"input: [1,2,3,4,5,6,7],[3,2,4,1,6,5,7] outputs: {1,2,5,3,4,6,7} \u601d\u8def\uff1a \u524d\u5e8f\u9996\u4e3a\u6839\uff0c\u4e2d\u5e8f\u5bfb\u6839\u5206\u5de6\u53f3\uff0c\u5de6\u53f3\u5b50\u6811\u518d\u9012\u5f52 code: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 TreeNode * reConstructBinaryTree ( vector < int > pre , vector < int > vin ) { TreeNode * root = ( TreeNode * ) malloc ( sizeof ( TreeNode )); root -> val = pre [ 0 ]; // \u524d\u5e8f\u4e3a\u6839 root -> left = NULL ; root -> right = NULL ; if ( pre . size () == 1 && vin . size () == 1 ) { return root ; } int inroot = 0 ; while ( vin [ inroot ] != pre [ 0 ]) { inroot ++ ; // \u4e2d\u5e8f\u5e8f\u5217\u627e\u6839 } if ( inroot > 0 ) // \u5de6\u5b50\u6811\u5b58\u5728 { vector < int > lpre ( pre . begin () + 1 , pre . begin () + inroot + 1 ); vector < int > lvin ( vin . begin (), vin . begin () + inroot ); root -> left = reConstructBinaryTree ( lpre , lvin ); } if ( inroot < vin . size () - 1 ) // \u53f3\u5b50\u6811\u5b58\u5728 { vector < int > rpre ( pre . begin () + inroot + 1 , pre . end ()); vector < int > rvin ( vin . begin () + inroot + 1 , vin . end ()); root -> right = reConstructBinaryTree ( rpre , rvin ); } return root ; }","title":"\u601d\u7ef4\u98ce\u66b4\uff1a\u901a\u8fc7\u524d\u5e8f\u904d\u5386\u548c\u4e2d\u5e8f\u904d\u5386\u91cd\u5efa\u4e8c\u53c9\u6811"},{"location":"DataStructure/tree/binary_tree/#321","text":"\u8f93\u5165\u4e00\u68f5\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u5c06\u8be5\u4e8c\u53c9\u641c\u7d22\u6811\u8f6c\u6362\u6210\u4e00\u4e2a\u6392\u5e8f\u7684\u53cc\u5411\u94fe\u8868\u3002\u8981\u6c42\u4e0d\u80fd\u521b\u5efa\u4efb\u4f55\u65b0\u7684\u7ed3\u70b9\uff0c\u53ea\u80fd\u8c03\u6574\u6811\u4e2d\u7ed3\u70b9\u6307\u9488\u7684\u6307\u5411 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 TreeNode * Convert ( TreeNode * pRootOfTree ) { stack < TreeNode *> s ; TreeNode * p = pRootOfTree , * pre = NULL , * ans = NULL ; while ( ! s . empty () || p ) { if ( p != NULL ) { s . push ( p ); p = p -> left ; } else { p = s . top (); s . pop (); if ( pre ) { pre -> right = p ; } else { ans = p ; } p -> left = pre ; pre = p ; p = p -> right ; } } return ans ; }","title":"3.2.1 \u4e8c\u53c9\u641c\u7d22\u6811\u548c\u53cc\u5411\u94fe\u8868\u7684\u8f6c\u6362"},{"location":"DataStructure/tree/binary_tree/#33","text":"\u540e\u5e8f\u904d\u5386\u987a\u5e8f\u4e3a\uff1a \u5de6 -> \u53f3 -> \u6839 \u5373 7\uff0c8\uff0c4\uff0c9\uff0c0\uff0c5\uff0c2\uff0c6\uff0c3\uff0c1 \u9012\u5f52\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 void PostOrder ( BiTree TT ) { if ( TT == NULL ) return ; PostOrder ( TT -> lchild ); // \u904d\u5386\u5de6\u5b50\u6811\u3002 PostOrder ( TT -> rchild ); // \u904d\u5386\u53f3\u5b50\u6811\u3002 visit ( TT ); // \u8bbf\u95ee\u5b50\u6811TT\u7684\u6839\u7ed3\u70b9\u3002 } \u5faa\u73af\u65b9\u6cd5\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 void PostOrder1 ( BiTree TT ) { stack < BiTree > s ; BiTree now = TT , vis = NULL ; // \u6700\u8fd1\u8bbf\u95ee\u8fc7\u7684\u7ed3\u70b9 while ( now != NULL || ! s . empty ()) { if ( now != NULL ) //\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u6cbf\u5de6\u4f9d\u6b21\u5165\u6808\u76f4\u5230\u7a7a { s . push ( now ); now = now -> lchild ; } else // \u8f6c\u5411\u53f3 { now = s . top (); // \u8bfb\u53d6\u6808\u9876\u5143\u7d20\u4e0d\u51fa\u6808 // \u5982\u679c\u53f3\u5b50\u6811\u5b58\u5728\u4e14\u6ca1\u88ab\u8bbf\u95ee\u8fc7 if ( now -> rchild != NULL && now -> rchild != vis ) { now = now -> rchild ; // \u8f6c\u5411\u53f3 s . push ( now ); // \u53f3\u5b50\u6811\u7684\u6839\u8282\u70b9\u5165\u6808 now = now -> lchild ; // \u518d\u8f6c\u5411\u53f3\u5b50\u6811\u7684\u5de6\u8282\u70b9 } else { now = s . top (); s . pop (); // \u5c06\u8282\u70b9\u5f39\u51fa visit ( now ); // \u8bbf\u95ee\u8282\u70b9 vis = now ; // \u8bb0\u4e0b\u6700\u8fd1\u8bbf\u95ee\u8fc7\u7684\u8282\u70b9 now = NULL ; // \u8282\u70b9\u8bbf\u95ee\u5b8c\u6210\u540e\uff0c\u91cd\u7f6e\u7ee7\u7eed\u8bfb\u53d6\u6808\u9876\u5143\u7d20 } } } }","title":"3.3 \u540e\u5e8f\u904d\u5386"},{"location":"DataStructure/tree/binary_tree/#_3","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 bool VerifySquenceOfBST ( vector < int > sequence ) { if ( sequence . empty ()) { return false ; } int len = sequence . size (); int root = sequence [ len - 1 ], index = len - 1 ; for ( int i = 0 ; i < len - 1 ; i ++ ) { if ( sequence [ i ] > root ) { index = i ; break ; } } for ( int i = index + 1 ; i < len - 1 ; i ++ ) { if ( sequence [ i ] < root ) { return false ; } } bool l = true ; if ( index > 0 ) { vector < int > left ( sequence . begin (), sequence . begin () + index ); l = VerifySquenceOfBST ( left ); } bool r = true ; if ( index < len - 1 ) { vector < int > right ( sequence . begin () + index , sequence . end () - 1 ); r = VerifySquenceOfBST ( right ); } return l && r ; } \u540e\u5e8f\u904d\u5386\u5e38\u7528\u4e8e\u9488\u5bf9\u4e8e\u5bf9\u5b50\u6811\u7684\u641c\u7d22\u548c\u7edf\u8ba1\u5173\u7cfb","title":"\u601d\u7ef4\u98ce\u66b4\uff1a\u5224\u65ad\u4e00\u4e2a\u5e8f\u5217\u662f\u4e0d\u662f\u4e8c\u53c9\u641c\u7d22\u6811\u7684\u540e\u5e8f\u5e8f\u5217"},{"location":"DataStructure/tree/binary_tree/#331-1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class Solution { public : int cnt = 0 ; bool ans = true ; int Count ( TreeNode * pRoot ) { if ( pRoot == NULL ) return 0 ; int l = Count ( pRoot -> left ); int r = Count ( pRoot -> right ); if ( abs ( l - r ) > 1 ) { ans = false ; } return l > r ? l + 1 : r + 1 ; } bool IsBalanced_Solution ( TreeNode * pRoot ) { Count ( pRoot ); return ans ; } };","title":"3.3.1 \u5224\u65ad\u662f\u5426\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\uff08\u5de6\u53f3\u4e24\u4e2a\u5b50\u6811\u9ad8\u5ea6\u5dee\u4e0d\u5927\u4e8e 1 \uff09"},{"location":"DataStructure/tree/binary_tree/#34","text":"\u5c42\u6b21\u904d\u5386\u5373\u4e3a\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22(BFS): 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 void LevelOrder ( BiTree TT ) { queue < BiTree > q ; BiTree now = TT ; q . push ( now ); while ( ! q . empty ()) { now = q . front (); q . pop (); visit ( now ); if ( now -> lchild != NULL ) { q . push ( now -> lchild ); } if ( now -> rchild != NULL ) { q . push ( now -> rchild ); } } }","title":"3.4 \u5c42\u6b21\u904d\u5386"},{"location":"DataStructure/tree/lca/","text":"LCA \u00b6 1.tarjan Tarjan \u7b97\u6cd5\u6c42 LCA \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n+q)\uff0c\u662f\u4e00\u79cd\u79bb\u7ebf\u7b97\u6cd5\uff0c\u8981\u7528\u5230\u5e76\u67e5\u96c6\u3002\uff08\u6ce8\uff1a\u8fd9\u91cc\u7684\u590d\u6742\u5ea6\u5176\u5b9e\u5e94\u8be5\u4e0d\u662f O(n+q)\uff0c\u8fd8\u9700\u8981\u8003\u8651\u5e76\u67e5\u96c6\u64cd\u4f5c\u7684\u590d\u6742\u5ea6 \uff0c\u4f46\u662f\u7531\u4e8e\u5728\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8def\u5f84\u538b\u7f29\u5e76\u67e5\u96c6\u7684\u5355\u6b21\u64cd\u4f5c\u590d\u6742\u5ea6\u53ef\u4ee5\u770b\u505a O(1)\uff0c\u6240\u4ee5\u5199\u6210\u4e86 O(n+q)\uff09 \u3000\u3000 Tarjan\u7b97\u6cd5\u57fa\u4e8e dfs \uff0c\u5728 dfs \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\u4f4d\u7f6e\u7684\u8be2\u95ee\u505a\u51fa\u76f8\u5e94\u7684\u56de\u7b54\u3002 dfs \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u4e00\u68f5\u5b50\u6811\u88ab\u641c\u7d22\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u628a\u4ed6\u548c\u4ed6\u7684\u7236\u4eb2\u5408\u5e76\u6210\u540c\u4e00\u96c6\u5408\uff1b\u5728\u641c\u7d22\u5f53\u524d\u5b50\u6811\u8282\u70b9\u7684\u8be2\u95ee\u65f6\uff0c\u5982\u679c\u8be5\u8be2\u95ee\u7684\u53e6\u4e00\u4e2a\u8282\u70b9\u5df2\u7ecf\u88ab\u8bbf\u95ee\u8fc7\uff0c\u90a3\u4e48\u8be5\u7f16\u53f7\u7684\u8be2\u95ee\u662f\u88ab\u6807\u8bb0\u4e86\u7684\uff0c\u4e8e\u662f\u76f4\u63a5\u8f93\u51fa\u5f53\u524d\u72b6\u6001\u4e0b\uff0c\u53e6\u4e00\u4e2a\u8282\u70b9\u6240\u5728\u7684\u5e76\u67e5\u96c6\u7684\u7956\u5148\uff1b\u5982\u679c\u53e6\u4e00\u4e2a\u8282\u70b9\u8fd8\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\uff0c\u90a3\u4e48\u5c31\u505a\u4e0b\u6807\u8bb0\uff0c\u7ee7\u7eed dfs \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 #include <cstring> #include <cstdio> #include <algorithm> #include <cstdlib> #include <cmath> using namespace std; const int N=40000+5; struct Edge{ int cnt,x[N],y[N],z[N],nxt[N],fst[N]; void set(){ cnt=0; memset(x,0,sizeof x); memset(y,0,sizeof y); memset(z,0,sizeof z); memset(nxt,0,sizeof nxt); memset(fst,0,sizeof fst); } void add(int a,int b,int c){ x[++cnt]=a; y[cnt]=b; z[cnt]=c; nxt[cnt]=fst[a]; fst[a]=cnt; } }e,q; int T,n,m,from,to,dist,in[N],rt,dis[N],fa[N],ans[N]; bool vis[N]; void dfs(int rt){ for (int i=e.fst[rt];i;i=e.nxt[i]){ dis[e.y[i]]=dis[rt]+e.z[i]; dfs(e.y[i]); } } int getf(int k){ return fa[k]==k?k:fa[k]=getf(fa[k]); } void LCA(int rt){ for (int i=e.fst[rt];i;i=e.nxt[i]){ LCA(e.y[i]); fa[getf(e.y[i])]=rt; } vis[rt]=1; for (int i=q.fst[rt];i;i=q.nxt[i]) if (vis[q.y[i]]&&!ans[q.z[i]]) ans[q.z[i]]=dis[q.y[i]]+dis[rt]-2*dis[getf(q.y[i])]; } int main(){ scanf(\"%d\",&T); while (T--){ q.set(),e.set(); memset(in,0,sizeof in); memset(vis,0,sizeof vis); memset(ans,0,sizeof ans); scanf(\"%d%d\",&n,&m); for (int i=1;i<n;i++) scanf(\"%d%d%d\",&from,&to,&dist),e.add(from,to,dist),in[to]++; for (int i=1;i<=m;i++) scanf(\"%d%d\",&from,&to),q.add(from,to,i),q.add(to,from,i); rt=0; for (int i=1;i<=n&&rt==0;i++) if (in[i]==0) rt=i; dis[rt]=0; dfs(rt); for (int i=1;i<=n;i++) fa[i]=i; LCA(rt); for (int i=1;i<=m;i++) printf(\"%d\\n\",ans[i]); } return 0; } 2.\u500d\u589e 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 #include <cstring> #include <cstdio> #include <cstdlib> #include <algorithm> #include <cmath> #include <vector> using namespace std; const int N=10000+5; vector <int> son[N]; int T,n,depth[N],fa[N][20],in[N],a,b; void dfs(int prev,int rt){ depth[rt]=depth[prev]+1; fa[rt][0]=prev; for (int i=1;i<20;i++) fa[rt][i]=fa[fa[rt][i-1]][i-1]; for (int i=0;i<son[rt].size();i++) dfs(rt,son[rt][i]); } int LCA(int x,int y){ if (depth[x]<depth[y]) swap(x,y); for (int i=19;i>=0;i--) if (depth[x]-(1<<i)>=depth[y]) x=fa[x][i]; if (x==y) return x; for (int i=19;i>=0;i--) if (fa[x][i]!=fa[y][i]) x=fa[x][i],y=fa[y][i]; return fa[x][0]; } int main(){ scanf(\"%d\",&T); while (T--){ scanf(\"%d\",&n); for (int i=1;i<=n;i++) son[i].clear(); memset(in,0,sizeof in); for (int i=1;i<n;i++){ scanf(\"%d%d\",&a,&b); son[a].push_back(b); in[b]++; } depth[0]=-1; int rt=0; for (int i=1;i<=n&&rt==0;i++) if (in[i]==0) rt=i; dfs(0,rt); scanf(\"%d%d\",&a,&b); printf(\"%d\\n\",LCA(a,b)); } return 0; } 3.RMQ \u73b0\u5728\u6765\u4ecb\u7ecd\u4e00\u79cd O(nlogn)\u9884\u5904\u7406\uff0cO(1)\u5728\u7ebf\u67e5\u8be2\u7684\u7b97\u6cd5\u3002 RMQ \u7684\u610f\u601d\u5927\u6982\u662f\u201c\u533a\u95f4\u6700\u503c\u67e5\u8be2\u201d\u3002\u987e\u540d\u601d\u4e49\uff0c\u7528 RMQ \u6765\u6c42 LCA \u662f\u901a\u8fc7 RMQ \u6765\u5b9e\u73b0\u7684\u3002 \u5728 dfs \u7684\u8fc7\u7a0b\u4e2d\uff0c\u9000\u51fa\u4e00\u4e2a\u5b50\u6811\u4e4b\u540e\u5c31\u4e0d\u4f1a\u518d\u8fdb\u5165\u4e86\u3002\u8fd9\u662f\u4e2a\u5f88\u597d\u7684\u6027\u8d28\u3002 \u6240\u4ee5\u5f88\u663e\u7136\uff0c\u4e00\u4e2a\u5b50\u6811\u4e2d\u6df1\u5ea6\u6700\u6d45\u7684\u8282\u70b9\u5fc5\u5b9a\u662f\u8be5\u5b50\u6811\u7684\u6811\u6839\u3002 \u663e\u7136\uff0c\u4e24\u4e2a\u8282\u70b9\u7684 LCA \u4e0d\u4ec5\u662f\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u8fd1\u516c\u5171\u7956\u5148\uff0c\u800c\u4e14\u662f\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u7684\u6839\uff0c\u5373\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u4e2d\u7684\u6df1\u5ea6\u6700\u5c0f\u7684\u8282\u70b9\u3002 \u6211\u4eec\u6765\u60f3\u4e00\u60f3\u5982\u4f55\u5f97\u5230\u8fd9\u4e2a\u8282\u70b9\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u7a0d\u5fae\u4fee\u6539\u4e00\u4e0b dfs \u5e8f\uff0c\u641e\u4e00\u4e2a\u6b27\u62c9\u5e8f\u3002 \u6b27\u62c9\u5e8f\uff0c\u5c31\u662f\u6bcf\u6b21\u4ece father(x)\u8fdb\u5165\u8282\u70b9 x\u6216\u8005\u4ece\u5b50\u8282\u70b9\u56de\u6eaf\u5230 x\u90fd\u8981\u628a x\u8fd9\u4e2a\u7f16\u53f7\u6254\u5230\u4e00\u4e2a\u6570\u7ec4\u7684\u6700\u540e\u3002 \u8fd9\u6837\u6700\u7ec8\u4f1a\u5f97\u5230\u4e00\u4e2a\u957f\u5ea6\u7ea6\u4e3a 2n\u7684\u6570\u5217\u3002\uff08\u8003\u8651\u6bcf\u4e00\u4e2a\u8282\u70b9\u8d21\u732e\u4e3a 2\uff0c\u5206\u522b\u662f\u4ece\u5176\u7236\u4eb2\u8fdb\u5165\u8be5\u8282\u70b9\uff0c\u548c\u4ece\u8be5\u8282\u70b9\u56de\u5230\u5176\u7236\u4eb2\uff09 \u518d\u6ce8\u610f\u5230\uff0c\u4e00\u5bf9\u70b9\u7684 LCA \u4e0d\u4ec5\u662f\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u4e2d\u7684\u6df1\u5ea6\u6700\u5c0f\u7684\u8282\u70b9\uff0c\u8fd8\u662f\u8fde\u63a5\u8fd9\u5bf9\u70b9\u7684\u7b80\u5355\u8def\u5f84\u4e0a\u6df1\u5ea6\u6700\u5c0f\u7684\u70b9\u3002 \u800c\u4e14\u4ece\u79bb\u5f00 a\u5230\u8fdb\u5165 b\u7684\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u5fc5\u7136\u5305\u62ec\u6240\u6709\u8fd9\u5bf9\u70b9\u4e4b\u95f4\u7684\u7b80\u5355\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u6c42\u5f97\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u4e2d\u6240\u5305\u542b\u7684\u8282\u70b9\u4e2d\u7684 \u6df1\u5ea6\u6700\u5c0f\u7684\u70b9\u5373\u5176 LCA \u3002 \u4ecea\u5230 b\u7684\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u4f1a\u5305\u542b\u8fd9\u68f5\u5b50\u6811\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\uff0c\u4f46\u662f\u4e0d\u4f1a\u5f71\u54cd\u8fd9\u4e2a\u6700\u6d45\u70b9\u7684\u6c42\u5f97\uff0c\u56e0\u4e3a\u201c\u4e00\u5bf9\u70b9\u7684 LCA \u662f\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u4e2d\u7684\u6df1\u5ea6\u6700\u5c0f\u7684\u8282\u70b9\u201d\u3002 \u663e\u7136\uff0ca\u5230 b\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u662f\u4e2a\u8fde\u7eed\u533a\u95f4\u3002 \u4f60\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\uff0c\u4f46\u662f\u7ebf\u6bb5\u6811\u592a low \u4e86\u3002 \u73b0\u5728\u6211\u4eec\u8003\u8651\u901a\u8fc7\u9884\u5904\u7406\u6765 O(1)\u83b7\u5f97\u8fd9\u4e2a\u6700\u6d45\u70b9\u3002 \u4e8e\u662f\u6211\u4eec\u8981\u5b66\u4e60\u4e00\u4e2a\u53eb\u505a ST\u8868 \u7684\u4e1c\u897f\u6765\u641e\u5b9a\u8fd9\u4e2a\u3002\uff08\u548c\u4e4b\u524d\u500d\u589e\u4e2d\u5904\u7406\u7684 fa\u6570\u7ec4\u5dee\u4e0d\u591a\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 //CodeVS2370 #include <bits/stdc++.h> #define time _____time using namespace std; const int N=50005; struct Gragh{ int cnt,y[N*2],z[N*2],nxt[N*2],fst[N]; void clear(){ cnt=0; memset(fst,0,sizeof fst); } void add(int a,int b,int c){ y[++cnt]=b,z[cnt]=c,nxt[cnt]=fst[a],fst[a]=cnt; } }g; int n,m,depth[N],in[N],out[N],time; int ST[N*2][20]; void dfs(int x,int pre){ in[x]=++time; ST[time][0]=x; for (int i=g.fst[x];i;i=g.nxt[i]) if (g.y[i]!=pre){ depth[g.y[i]]=depth[x]+g.z[i]; dfs(g.y[i],x); ST[++time][0]=x; } out[x]=time; } void Get_ST(int n){ for (int i=1;i<=n;i++) for (int j=1;j<20;j++){ ST[i][j]=ST[i][j-1]; int v=i-(1<<(j-1)); if (v>0&&depth[ST[v][j-1]]<depth[ST[i][j]]) ST[i][j]=ST[v][j-1]; } } int RMQ(int L,int R){ int val=floor(log(R-L+1)/log(2)); int x=ST[L+(1<<val)-1][val],y=ST[R][val]; if (depth[x]<depth[y]) return x; else return y; } int main(){ scanf(\"%d\",&n); for (int i=1,a,b,c;i<n;i++){ scanf(\"%d%d%d\",&a,&b,&c); a++,b++; g.add(a,b,c); g.add(b,a,c); } time=0; dfs(1,0); depth[0]=1000000; Get_ST(time); scanf(\"%d\",&m); while (m--){ int x,y; scanf(\"%d%d\",&x,&y); if (in[x+1]>in[y+1]) swap(x,y); int LCA=RMQ(in[x+1],in[y+1]); printf(\"%d\\n\",depth[x+1]+depth[y+1]-depth[LCA]*2); } return 0; }","title":"\u6700\u8fd1\u516c\u5171\u7956\u5148"},{"location":"DataStructure/tree/lca/#lca","text":"1.tarjan Tarjan \u7b97\u6cd5\u6c42 LCA \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n+q)\uff0c\u662f\u4e00\u79cd\u79bb\u7ebf\u7b97\u6cd5\uff0c\u8981\u7528\u5230\u5e76\u67e5\u96c6\u3002\uff08\u6ce8\uff1a\u8fd9\u91cc\u7684\u590d\u6742\u5ea6\u5176\u5b9e\u5e94\u8be5\u4e0d\u662f O(n+q)\uff0c\u8fd8\u9700\u8981\u8003\u8651\u5e76\u67e5\u96c6\u64cd\u4f5c\u7684\u590d\u6742\u5ea6 \uff0c\u4f46\u662f\u7531\u4e8e\u5728\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8def\u5f84\u538b\u7f29\u5e76\u67e5\u96c6\u7684\u5355\u6b21\u64cd\u4f5c\u590d\u6742\u5ea6\u53ef\u4ee5\u770b\u505a O(1)\uff0c\u6240\u4ee5\u5199\u6210\u4e86 O(n+q)\uff09 \u3000\u3000 Tarjan\u7b97\u6cd5\u57fa\u4e8e dfs \uff0c\u5728 dfs \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\u4f4d\u7f6e\u7684\u8be2\u95ee\u505a\u51fa\u76f8\u5e94\u7684\u56de\u7b54\u3002 dfs \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u4e00\u68f5\u5b50\u6811\u88ab\u641c\u7d22\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u628a\u4ed6\u548c\u4ed6\u7684\u7236\u4eb2\u5408\u5e76\u6210\u540c\u4e00\u96c6\u5408\uff1b\u5728\u641c\u7d22\u5f53\u524d\u5b50\u6811\u8282\u70b9\u7684\u8be2\u95ee\u65f6\uff0c\u5982\u679c\u8be5\u8be2\u95ee\u7684\u53e6\u4e00\u4e2a\u8282\u70b9\u5df2\u7ecf\u88ab\u8bbf\u95ee\u8fc7\uff0c\u90a3\u4e48\u8be5\u7f16\u53f7\u7684\u8be2\u95ee\u662f\u88ab\u6807\u8bb0\u4e86\u7684\uff0c\u4e8e\u662f\u76f4\u63a5\u8f93\u51fa\u5f53\u524d\u72b6\u6001\u4e0b\uff0c\u53e6\u4e00\u4e2a\u8282\u70b9\u6240\u5728\u7684\u5e76\u67e5\u96c6\u7684\u7956\u5148\uff1b\u5982\u679c\u53e6\u4e00\u4e2a\u8282\u70b9\u8fd8\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\uff0c\u90a3\u4e48\u5c31\u505a\u4e0b\u6807\u8bb0\uff0c\u7ee7\u7eed dfs \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 #include <cstring> #include <cstdio> #include <algorithm> #include <cstdlib> #include <cmath> using namespace std; const int N=40000+5; struct Edge{ int cnt,x[N],y[N],z[N],nxt[N],fst[N]; void set(){ cnt=0; memset(x,0,sizeof x); memset(y,0,sizeof y); memset(z,0,sizeof z); memset(nxt,0,sizeof nxt); memset(fst,0,sizeof fst); } void add(int a,int b,int c){ x[++cnt]=a; y[cnt]=b; z[cnt]=c; nxt[cnt]=fst[a]; fst[a]=cnt; } }e,q; int T,n,m,from,to,dist,in[N],rt,dis[N],fa[N],ans[N]; bool vis[N]; void dfs(int rt){ for (int i=e.fst[rt];i;i=e.nxt[i]){ dis[e.y[i]]=dis[rt]+e.z[i]; dfs(e.y[i]); } } int getf(int k){ return fa[k]==k?k:fa[k]=getf(fa[k]); } void LCA(int rt){ for (int i=e.fst[rt];i;i=e.nxt[i]){ LCA(e.y[i]); fa[getf(e.y[i])]=rt; } vis[rt]=1; for (int i=q.fst[rt];i;i=q.nxt[i]) if (vis[q.y[i]]&&!ans[q.z[i]]) ans[q.z[i]]=dis[q.y[i]]+dis[rt]-2*dis[getf(q.y[i])]; } int main(){ scanf(\"%d\",&T); while (T--){ q.set(),e.set(); memset(in,0,sizeof in); memset(vis,0,sizeof vis); memset(ans,0,sizeof ans); scanf(\"%d%d\",&n,&m); for (int i=1;i<n;i++) scanf(\"%d%d%d\",&from,&to,&dist),e.add(from,to,dist),in[to]++; for (int i=1;i<=m;i++) scanf(\"%d%d\",&from,&to),q.add(from,to,i),q.add(to,from,i); rt=0; for (int i=1;i<=n&&rt==0;i++) if (in[i]==0) rt=i; dis[rt]=0; dfs(rt); for (int i=1;i<=n;i++) fa[i]=i; LCA(rt); for (int i=1;i<=m;i++) printf(\"%d\\n\",ans[i]); } return 0; } 2.\u500d\u589e 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 #include <cstring> #include <cstdio> #include <cstdlib> #include <algorithm> #include <cmath> #include <vector> using namespace std; const int N=10000+5; vector <int> son[N]; int T,n,depth[N],fa[N][20],in[N],a,b; void dfs(int prev,int rt){ depth[rt]=depth[prev]+1; fa[rt][0]=prev; for (int i=1;i<20;i++) fa[rt][i]=fa[fa[rt][i-1]][i-1]; for (int i=0;i<son[rt].size();i++) dfs(rt,son[rt][i]); } int LCA(int x,int y){ if (depth[x]<depth[y]) swap(x,y); for (int i=19;i>=0;i--) if (depth[x]-(1<<i)>=depth[y]) x=fa[x][i]; if (x==y) return x; for (int i=19;i>=0;i--) if (fa[x][i]!=fa[y][i]) x=fa[x][i],y=fa[y][i]; return fa[x][0]; } int main(){ scanf(\"%d\",&T); while (T--){ scanf(\"%d\",&n); for (int i=1;i<=n;i++) son[i].clear(); memset(in,0,sizeof in); for (int i=1;i<n;i++){ scanf(\"%d%d\",&a,&b); son[a].push_back(b); in[b]++; } depth[0]=-1; int rt=0; for (int i=1;i<=n&&rt==0;i++) if (in[i]==0) rt=i; dfs(0,rt); scanf(\"%d%d\",&a,&b); printf(\"%d\\n\",LCA(a,b)); } return 0; } 3.RMQ \u73b0\u5728\u6765\u4ecb\u7ecd\u4e00\u79cd O(nlogn)\u9884\u5904\u7406\uff0cO(1)\u5728\u7ebf\u67e5\u8be2\u7684\u7b97\u6cd5\u3002 RMQ \u7684\u610f\u601d\u5927\u6982\u662f\u201c\u533a\u95f4\u6700\u503c\u67e5\u8be2\u201d\u3002\u987e\u540d\u601d\u4e49\uff0c\u7528 RMQ \u6765\u6c42 LCA \u662f\u901a\u8fc7 RMQ \u6765\u5b9e\u73b0\u7684\u3002 \u5728 dfs \u7684\u8fc7\u7a0b\u4e2d\uff0c\u9000\u51fa\u4e00\u4e2a\u5b50\u6811\u4e4b\u540e\u5c31\u4e0d\u4f1a\u518d\u8fdb\u5165\u4e86\u3002\u8fd9\u662f\u4e2a\u5f88\u597d\u7684\u6027\u8d28\u3002 \u6240\u4ee5\u5f88\u663e\u7136\uff0c\u4e00\u4e2a\u5b50\u6811\u4e2d\u6df1\u5ea6\u6700\u6d45\u7684\u8282\u70b9\u5fc5\u5b9a\u662f\u8be5\u5b50\u6811\u7684\u6811\u6839\u3002 \u663e\u7136\uff0c\u4e24\u4e2a\u8282\u70b9\u7684 LCA \u4e0d\u4ec5\u662f\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u8fd1\u516c\u5171\u7956\u5148\uff0c\u800c\u4e14\u662f\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u7684\u6839\uff0c\u5373\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u4e2d\u7684\u6df1\u5ea6\u6700\u5c0f\u7684\u8282\u70b9\u3002 \u6211\u4eec\u6765\u60f3\u4e00\u60f3\u5982\u4f55\u5f97\u5230\u8fd9\u4e2a\u8282\u70b9\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u7a0d\u5fae\u4fee\u6539\u4e00\u4e0b dfs \u5e8f\uff0c\u641e\u4e00\u4e2a\u6b27\u62c9\u5e8f\u3002 \u6b27\u62c9\u5e8f\uff0c\u5c31\u662f\u6bcf\u6b21\u4ece father(x)\u8fdb\u5165\u8282\u70b9 x\u6216\u8005\u4ece\u5b50\u8282\u70b9\u56de\u6eaf\u5230 x\u90fd\u8981\u628a x\u8fd9\u4e2a\u7f16\u53f7\u6254\u5230\u4e00\u4e2a\u6570\u7ec4\u7684\u6700\u540e\u3002 \u8fd9\u6837\u6700\u7ec8\u4f1a\u5f97\u5230\u4e00\u4e2a\u957f\u5ea6\u7ea6\u4e3a 2n\u7684\u6570\u5217\u3002\uff08\u8003\u8651\u6bcf\u4e00\u4e2a\u8282\u70b9\u8d21\u732e\u4e3a 2\uff0c\u5206\u522b\u662f\u4ece\u5176\u7236\u4eb2\u8fdb\u5165\u8be5\u8282\u70b9\uff0c\u548c\u4ece\u8be5\u8282\u70b9\u56de\u5230\u5176\u7236\u4eb2\uff09 \u518d\u6ce8\u610f\u5230\uff0c\u4e00\u5bf9\u70b9\u7684 LCA \u4e0d\u4ec5\u662f\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u4e2d\u7684\u6df1\u5ea6\u6700\u5c0f\u7684\u8282\u70b9\uff0c\u8fd8\u662f\u8fde\u63a5\u8fd9\u5bf9\u70b9\u7684\u7b80\u5355\u8def\u5f84\u4e0a\u6df1\u5ea6\u6700\u5c0f\u7684\u70b9\u3002 \u800c\u4e14\u4ece\u79bb\u5f00 a\u5230\u8fdb\u5165 b\u7684\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u5fc5\u7136\u5305\u62ec\u6240\u6709\u8fd9\u5bf9\u70b9\u4e4b\u95f4\u7684\u7b80\u5355\u8def\u5f84\u4e0a\u7684\u6240\u6709\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u6c42\u5f97\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u4e2d\u6240\u5305\u542b\u7684\u8282\u70b9\u4e2d\u7684 \u6df1\u5ea6\u6700\u5c0f\u7684\u70b9\u5373\u5176 LCA \u3002 \u4ecea\u5230 b\u7684\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u4f1a\u5305\u542b\u8fd9\u68f5\u5b50\u6811\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\uff0c\u4f46\u662f\u4e0d\u4f1a\u5f71\u54cd\u8fd9\u4e2a\u6700\u6d45\u70b9\u7684\u6c42\u5f97\uff0c\u56e0\u4e3a\u201c\u4e00\u5bf9\u70b9\u7684 LCA \u662f\u56ca\u62ec\u8fd9\u4e24\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b50\u6811\u4e2d\u7684\u6df1\u5ea6\u6700\u5c0f\u7684\u8282\u70b9\u201d\u3002 \u663e\u7136\uff0ca\u5230 b\u8fd9\u6bb5\u6b27\u62c9\u5e8f\u662f\u4e2a\u8fde\u7eed\u533a\u95f4\u3002 \u4f60\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\uff0c\u4f46\u662f\u7ebf\u6bb5\u6811\u592a low \u4e86\u3002 \u73b0\u5728\u6211\u4eec\u8003\u8651\u901a\u8fc7\u9884\u5904\u7406\u6765 O(1)\u83b7\u5f97\u8fd9\u4e2a\u6700\u6d45\u70b9\u3002 \u4e8e\u662f\u6211\u4eec\u8981\u5b66\u4e60\u4e00\u4e2a\u53eb\u505a ST\u8868 \u7684\u4e1c\u897f\u6765\u641e\u5b9a\u8fd9\u4e2a\u3002\uff08\u548c\u4e4b\u524d\u500d\u589e\u4e2d\u5904\u7406\u7684 fa\u6570\u7ec4\u5dee\u4e0d\u591a\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 //CodeVS2370 #include <bits/stdc++.h> #define time _____time using namespace std; const int N=50005; struct Gragh{ int cnt,y[N*2],z[N*2],nxt[N*2],fst[N]; void clear(){ cnt=0; memset(fst,0,sizeof fst); } void add(int a,int b,int c){ y[++cnt]=b,z[cnt]=c,nxt[cnt]=fst[a],fst[a]=cnt; } }g; int n,m,depth[N],in[N],out[N],time; int ST[N*2][20]; void dfs(int x,int pre){ in[x]=++time; ST[time][0]=x; for (int i=g.fst[x];i;i=g.nxt[i]) if (g.y[i]!=pre){ depth[g.y[i]]=depth[x]+g.z[i]; dfs(g.y[i],x); ST[++time][0]=x; } out[x]=time; } void Get_ST(int n){ for (int i=1;i<=n;i++) for (int j=1;j<20;j++){ ST[i][j]=ST[i][j-1]; int v=i-(1<<(j-1)); if (v>0&&depth[ST[v][j-1]]<depth[ST[i][j]]) ST[i][j]=ST[v][j-1]; } } int RMQ(int L,int R){ int val=floor(log(R-L+1)/log(2)); int x=ST[L+(1<<val)-1][val],y=ST[R][val]; if (depth[x]<depth[y]) return x; else return y; } int main(){ scanf(\"%d\",&n); for (int i=1,a,b,c;i<n;i++){ scanf(\"%d%d%d\",&a,&b,&c); a++,b++; g.add(a,b,c); g.add(b,a,c); } time=0; dfs(1,0); depth[0]=1000000; Get_ST(time); scanf(\"%d\",&m); while (m--){ int x,y; scanf(\"%d%d\",&x,&y); if (in[x+1]>in[y+1]) swap(x,y); int LCA=RMQ(in[x+1],in[y+1]); printf(\"%d\\n\",depth[x+1]+depth[y+1]-depth[LCA]*2); } return 0; }","title":"LCA"},{"location":"DataStructure/tree/modui/","text":"1.\u666e\u901a\u83ab\u961f \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 #include <cstdio> #include <cstring> #include <cmath> #include <algorithm> using namespace std; #define maxn 1010000 #define maxb 1010 int aa[maxn], cnt[maxn], belong[maxn]; int n, m, size, bnum, now, ans[maxn]; struct query { int l, r, id; } q[maxn]; int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : ((belong[a.l] & 1) ? a.r < b.r : a.r > b.r); } #define isdigit(x) ((x) >= '0' && (x) <= '9') int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + c - 48, c = getchar(); return res; } void printi(int x) { if(x / 10) printi(x / 10); putchar(x % 10 + '0'); } int main() { scanf(\"%d\", &n); size = sqrt(n); bnum = ceil((double)n / size); for(int i = 1; i <= bnum; ++i) for(int j = (i - 1) * size + 1; j <= i * size; ++j) { belong[j] = i; } for(int i = 1; i <= n; ++i) aa[i] = read(); m = read(); for(int i = 1; i <= m; ++i) { q[i].l = read(), q[i].r = read(); q[i].id = i; } sort(q + 1, q + m + 1, cmp); int l = 1, r = 0; for(int i = 1; i <= m; ++i) { int ql = q[i].l, qr = q[i].r; while(l < ql) now -= !--cnt[aa[l++]]; while(l > ql) now += !cnt[aa[--l]]++; while(r < qr) now += !cnt[aa[++r]]++; while(r > qr) now -= !--cnt[aa[r--]]; ans[q[i].id] = now; } for(int i = 1; i <= m; ++i) printi(ans[i]), putchar('\\n'); return 0; } 2.\u5e26\u4fee\u83ab\u961f \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 #include <cstdio> #include <cstring> #include <cmath> #include <algorithm> using namespace std; #define maxn 50500 #define maxc 1001000 int a[maxn], cnt[maxc], ans[maxn], belong[maxn]; struct query { int l, r, time, id; } q[maxn]; struct modify { int pos, color, last; } c[maxn]; int cntq, cntc, n, m, size, bnum; int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : ((belong[a.r] ^ belong[b.r]) ? belong[a.r] < belong[b.r] : a.time < b.time); } #define isdigit(x) ((x) >= '0' && (x) <= '9') inline int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + (c ^ 48), c = getchar(); return res; } int main() { n = read(), m = read(); size = pow(n, 2.0 / 3.0); bnum = ceil((double)n / size); for(int i = 1; i <= bnum; ++i) for(int j = (i - 1) * size + 1; j <= i * size; ++j) belong[j] = i; for(int i = 1; i <= n; ++i) a[i] = read(); for(int i = 1; i <= m; ++i) { char opt[100]; scanf(\"%s\", opt); if(opt[0] == 'Q') { q[++cntq].l = read(); q[cntq].r = read(); q[cntq].time = cntc; q[cntq].id = cntq; } else if(opt[0] == 'R') { c[++cntc].pos = read(); c[cntc].color = read(); } } sort(q + 1, q + cntq + 1, cmp); int l = 1, r = 0, time = 0, now = 0; for(int i = 1; i <= cntq; ++i) { int ql = q[i].l, qr = q[i].r, qt = q[i].time; while(l < ql) now -= !--cnt[a[l++]]; while(l > ql) now += !cnt[a[--l]]++; while(r < qr) now += !cnt[a[++r]]++; while(r > qr) now -= !--cnt[a[r--]]; while(time < qt) { ++time; if(ql <= c[time].pos && c[time].pos <= qr) now -= !--cnt[a[c[time].pos]] - !cnt[c[time].color]++; swap(a[c[time].pos], c[time].color); } while(time > qt) { if(ql <= c[time].pos && c[time].pos <= qr) now -= !--cnt[a[c[time].pos]] - !cnt[c[time].color]++; swap(a[c[time].pos], c[time].color); --time; } ans[q[i].id] = now; } for(int i = 1; i <= cntq; ++i) printf(\"%d\\n\", ans[i]); return 0; } 3.\u6811\u4e0a\u83ab\u961f \u00b6 \u9700\u8981\u7528\u5230\u6b27\u62c9\u5e8f 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #include <cstdio> #include <cstring> #include <cmath> #include <algorithm> using namespace std; #define maxn 200200 #define isdigit(x) ((x) >= '0' && (x) <= '9') inline int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + (c ^ 48), c = getchar(); return res; } int aa[maxn], cnt[maxn], first[maxn], last[maxn], ans[maxn], belong[maxn], inp[maxn], vis[maxn], ncnt, l = 1, r, now, size, bnum; //\u83ab\u961f\u76f8\u5173 int ord[maxn], val[maxn], head[maxn], depth[maxn], fa[maxn][30], ecnt; int n, m; struct edge { int to, next; } e[maxn]; void adde(int u, int v) { e[++ecnt] = (edge){v, head[u]}; head[u] = ecnt; e[++ecnt] = (edge){u, head[v]}; head[v] = ecnt; } void dfs(int x) { ord[++ncnt] = x; first[x] = ncnt; for(int k = head[x]; k; k = e[k].next) { int to = e[k].to; if(to == fa[x][0]) continue; depth[to] = depth[x] + 1; fa[to][0] = x; for(int i = 1; (1 << i) <= depth[to]; ++i) fa[to][i] = fa[fa[to][i - 1]][i - 1]; dfs(to); } ord[++ncnt] = x; last[x] = ncnt; } int getlca(int u, int v) { if(depth[u] < depth[v]) swap(u, v); for(int i = 20; i + 1; --i) if(depth[u] - (1 << i) >= depth[v]) u = fa[u][i]; if(u == v) return u; for(int i = 20; i + 1; --i) if(fa[u][i] != fa[v][i]) u = fa[u][i], v = fa[v][i]; return fa[u][0]; } struct query { int l, r, lca, id; } q[maxn]; int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? (belong[a.l] < belong[b.l]) : ((belong[a.l] & 1) ? a.r < b.r : a.r > b.r); } void work(int pos) { vis[pos] ? now -= !--cnt[val[pos]] : now += !cnt[val[pos]]++; vis[pos] ^= 1; } int main() { n = read(); m = read(); for(int i = 1; i <= n; ++i) val[i] = inp[i] = read(); sort(inp + 1, inp + n + 1); int tot = unique(inp + 1, inp + n + 1) - inp - 1; for(int i = 1; i <= n; ++i) val[i] = lower_bound(inp + 1, inp + tot + 1, val[i]) - inp; for(int i = 1; i < n; ++i) adde(read(), read()); depth[1] = 1; dfs(1); size = sqrt(ncnt), bnum = ceil((double) ncnt / size); for(int i = 1; i <= bnum; ++i) for(int j = size * (i - 1) + 1; j <= i * size; ++j) belong[j] = i; for(int i = 1; i <= m; ++i) { int L = read(), R = read(), lca = getlca(L, R); if(first[L] > first[R]) swap(L, R); if(L == lca) { q[i].l = first[L]; q[i].r = first[R]; } else { q[i].l = last[L]; q[i].r = first[R]; q[i].lca = lca; } q[i].id = i; } sort(q + 1, q + m + 1, cmp); for(int i = 1; i <= m; ++i) { int ql = q[i].l, qr = q[i].r, lca = q[i].lca; while(l < ql) work(ord[l++]); while(l > ql) work(ord[--l]); while(r < qr) work(ord[++r]); while(r > qr) work(ord[r--]); if(lca) work(lca); ans[q[i].id] = now; if(lca) work(lca); } for(int i = 1; i <= m; ++i) printf(\"%d\\n\", ans[i]); return 0; } 4.\u56de\u6eda\u83ab\u961f \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 #include <cstdio> #include <algorithm> #include <cstring> #include <cmath> using namespace std; #define maxn 100100 #define maxb 5050 #define ll long long int aa[maxn], typ[maxn], cnt[maxn], cnt2[maxn], belong[maxn], lb[maxn], rb[maxn], inp[maxn]; ll ans[maxn]; struct query { int l, r, id; } q[maxn]; int n, m, size, bnum; #define isdigit(x) ((x) >= '0' && (x) <= '9') inline int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + (c ^ 48), c = getchar(); return res; } int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : a.r < b.r; } int main() { n = read(), m = read(); size = sqrt(n); bnum = ceil((double) n / size); for(int i = 1; i <= bnum; ++i) { lb[i] = size * (i - 1) + 1; rb[i] = size * i; for(int j = lb[i]; j <= rb[i]; ++j) belong[j] = i; } rb[bnum] = n; for(int i = 1; i <= n; ++i) inp[i] = aa[i] = read(); sort(inp + 1, inp + n + 1); int tot = unique(inp + 1, inp + n + 1) - inp - 1; for(int i = 1; i <= n; ++i) typ[i] = lower_bound(inp + 1, inp + tot + 1, aa[i]) - inp; for(int i = 1; i <= m; ++i) { q[i].l = read(), q[i].r = read(); q[i].id = i; } sort(q + 1, q + m + 1, cmp); int i = 1; for(int k = 0; k <= bnum; ++k) { int l = rb[k] + 1, r = rb[k]; ll now = 0; memset(cnt, 0, sizeof(cnt)); for( ; belong[q[i].l] == k; ++i) { int ql = q[i].l, qr = q[i].r; ll tmp; if(belong[ql] == belong[qr]) { tmp = 0; for(int j = ql; j <= qr; ++j) cnt2[typ[j]] = 0; for(int j = ql; j <= qr; ++j) { ++cnt2[typ[j]]; tmp = max(tmp, 1ll * cnt2[typ[j]] * aa[j]); } ans[q[i].id] = tmp; continue; } while(r < qr) { ++r; ++cnt[typ[r]]; now = max(now, 1ll * cnt[typ[r]] * aa[r]); } tmp = now; while(l > ql){ --l; ++cnt[typ[l]]; now = max(now, 1ll * cnt[typ[l]] * aa[l]); } ans[q[i].id] = now; while(l < rb[k] + 1) { --cnt[typ[l]]; l++; } now = tmp; } } for(int i = 1; i <= m; ++i) printf(\"%lld\\n\", ans[i]); return 0; }","title":"\u83ab\u961f\u7b97\u6cd5"},{"location":"DataStructure/tree/modui/#1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 #include <cstdio> #include <cstring> #include <cmath> #include <algorithm> using namespace std; #define maxn 1010000 #define maxb 1010 int aa[maxn], cnt[maxn], belong[maxn]; int n, m, size, bnum, now, ans[maxn]; struct query { int l, r, id; } q[maxn]; int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : ((belong[a.l] & 1) ? a.r < b.r : a.r > b.r); } #define isdigit(x) ((x) >= '0' && (x) <= '9') int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + c - 48, c = getchar(); return res; } void printi(int x) { if(x / 10) printi(x / 10); putchar(x % 10 + '0'); } int main() { scanf(\"%d\", &n); size = sqrt(n); bnum = ceil((double)n / size); for(int i = 1; i <= bnum; ++i) for(int j = (i - 1) * size + 1; j <= i * size; ++j) { belong[j] = i; } for(int i = 1; i <= n; ++i) aa[i] = read(); m = read(); for(int i = 1; i <= m; ++i) { q[i].l = read(), q[i].r = read(); q[i].id = i; } sort(q + 1, q + m + 1, cmp); int l = 1, r = 0; for(int i = 1; i <= m; ++i) { int ql = q[i].l, qr = q[i].r; while(l < ql) now -= !--cnt[aa[l++]]; while(l > ql) now += !cnt[aa[--l]]++; while(r < qr) now += !cnt[aa[++r]]++; while(r > qr) now -= !--cnt[aa[r--]]; ans[q[i].id] = now; } for(int i = 1; i <= m; ++i) printi(ans[i]), putchar('\\n'); return 0; }","title":"1.\u666e\u901a\u83ab\u961f"},{"location":"DataStructure/tree/modui/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 #include <cstdio> #include <cstring> #include <cmath> #include <algorithm> using namespace std; #define maxn 50500 #define maxc 1001000 int a[maxn], cnt[maxc], ans[maxn], belong[maxn]; struct query { int l, r, time, id; } q[maxn]; struct modify { int pos, color, last; } c[maxn]; int cntq, cntc, n, m, size, bnum; int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : ((belong[a.r] ^ belong[b.r]) ? belong[a.r] < belong[b.r] : a.time < b.time); } #define isdigit(x) ((x) >= '0' && (x) <= '9') inline int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + (c ^ 48), c = getchar(); return res; } int main() { n = read(), m = read(); size = pow(n, 2.0 / 3.0); bnum = ceil((double)n / size); for(int i = 1; i <= bnum; ++i) for(int j = (i - 1) * size + 1; j <= i * size; ++j) belong[j] = i; for(int i = 1; i <= n; ++i) a[i] = read(); for(int i = 1; i <= m; ++i) { char opt[100]; scanf(\"%s\", opt); if(opt[0] == 'Q') { q[++cntq].l = read(); q[cntq].r = read(); q[cntq].time = cntc; q[cntq].id = cntq; } else if(opt[0] == 'R') { c[++cntc].pos = read(); c[cntc].color = read(); } } sort(q + 1, q + cntq + 1, cmp); int l = 1, r = 0, time = 0, now = 0; for(int i = 1; i <= cntq; ++i) { int ql = q[i].l, qr = q[i].r, qt = q[i].time; while(l < ql) now -= !--cnt[a[l++]]; while(l > ql) now += !cnt[a[--l]]++; while(r < qr) now += !cnt[a[++r]]++; while(r > qr) now -= !--cnt[a[r--]]; while(time < qt) { ++time; if(ql <= c[time].pos && c[time].pos <= qr) now -= !--cnt[a[c[time].pos]] - !cnt[c[time].color]++; swap(a[c[time].pos], c[time].color); } while(time > qt) { if(ql <= c[time].pos && c[time].pos <= qr) now -= !--cnt[a[c[time].pos]] - !cnt[c[time].color]++; swap(a[c[time].pos], c[time].color); --time; } ans[q[i].id] = now; } for(int i = 1; i <= cntq; ++i) printf(\"%d\\n\", ans[i]); return 0; }","title":"2.\u5e26\u4fee\u83ab\u961f"},{"location":"DataStructure/tree/modui/#3","text":"\u9700\u8981\u7528\u5230\u6b27\u62c9\u5e8f 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #include <cstdio> #include <cstring> #include <cmath> #include <algorithm> using namespace std; #define maxn 200200 #define isdigit(x) ((x) >= '0' && (x) <= '9') inline int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + (c ^ 48), c = getchar(); return res; } int aa[maxn], cnt[maxn], first[maxn], last[maxn], ans[maxn], belong[maxn], inp[maxn], vis[maxn], ncnt, l = 1, r, now, size, bnum; //\u83ab\u961f\u76f8\u5173 int ord[maxn], val[maxn], head[maxn], depth[maxn], fa[maxn][30], ecnt; int n, m; struct edge { int to, next; } e[maxn]; void adde(int u, int v) { e[++ecnt] = (edge){v, head[u]}; head[u] = ecnt; e[++ecnt] = (edge){u, head[v]}; head[v] = ecnt; } void dfs(int x) { ord[++ncnt] = x; first[x] = ncnt; for(int k = head[x]; k; k = e[k].next) { int to = e[k].to; if(to == fa[x][0]) continue; depth[to] = depth[x] + 1; fa[to][0] = x; for(int i = 1; (1 << i) <= depth[to]; ++i) fa[to][i] = fa[fa[to][i - 1]][i - 1]; dfs(to); } ord[++ncnt] = x; last[x] = ncnt; } int getlca(int u, int v) { if(depth[u] < depth[v]) swap(u, v); for(int i = 20; i + 1; --i) if(depth[u] - (1 << i) >= depth[v]) u = fa[u][i]; if(u == v) return u; for(int i = 20; i + 1; --i) if(fa[u][i] != fa[v][i]) u = fa[u][i], v = fa[v][i]; return fa[u][0]; } struct query { int l, r, lca, id; } q[maxn]; int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? (belong[a.l] < belong[b.l]) : ((belong[a.l] & 1) ? a.r < b.r : a.r > b.r); } void work(int pos) { vis[pos] ? now -= !--cnt[val[pos]] : now += !cnt[val[pos]]++; vis[pos] ^= 1; } int main() { n = read(); m = read(); for(int i = 1; i <= n; ++i) val[i] = inp[i] = read(); sort(inp + 1, inp + n + 1); int tot = unique(inp + 1, inp + n + 1) - inp - 1; for(int i = 1; i <= n; ++i) val[i] = lower_bound(inp + 1, inp + tot + 1, val[i]) - inp; for(int i = 1; i < n; ++i) adde(read(), read()); depth[1] = 1; dfs(1); size = sqrt(ncnt), bnum = ceil((double) ncnt / size); for(int i = 1; i <= bnum; ++i) for(int j = size * (i - 1) + 1; j <= i * size; ++j) belong[j] = i; for(int i = 1; i <= m; ++i) { int L = read(), R = read(), lca = getlca(L, R); if(first[L] > first[R]) swap(L, R); if(L == lca) { q[i].l = first[L]; q[i].r = first[R]; } else { q[i].l = last[L]; q[i].r = first[R]; q[i].lca = lca; } q[i].id = i; } sort(q + 1, q + m + 1, cmp); for(int i = 1; i <= m; ++i) { int ql = q[i].l, qr = q[i].r, lca = q[i].lca; while(l < ql) work(ord[l++]); while(l > ql) work(ord[--l]); while(r < qr) work(ord[++r]); while(r > qr) work(ord[r--]); if(lca) work(lca); ans[q[i].id] = now; if(lca) work(lca); } for(int i = 1; i <= m; ++i) printf(\"%d\\n\", ans[i]); return 0; }","title":"3.\u6811\u4e0a\u83ab\u961f"},{"location":"DataStructure/tree/modui/#4","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 #include <cstdio> #include <algorithm> #include <cstring> #include <cmath> using namespace std; #define maxn 100100 #define maxb 5050 #define ll long long int aa[maxn], typ[maxn], cnt[maxn], cnt2[maxn], belong[maxn], lb[maxn], rb[maxn], inp[maxn]; ll ans[maxn]; struct query { int l, r, id; } q[maxn]; int n, m, size, bnum; #define isdigit(x) ((x) >= '0' && (x) <= '9') inline int read() { int res = 0; char c = getchar(); while(!isdigit(c)) c = getchar(); while(isdigit(c)) res = (res << 1) + (res << 3) + (c ^ 48), c = getchar(); return res; } int cmp(query a, query b) { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : a.r < b.r; } int main() { n = read(), m = read(); size = sqrt(n); bnum = ceil((double) n / size); for(int i = 1; i <= bnum; ++i) { lb[i] = size * (i - 1) + 1; rb[i] = size * i; for(int j = lb[i]; j <= rb[i]; ++j) belong[j] = i; } rb[bnum] = n; for(int i = 1; i <= n; ++i) inp[i] = aa[i] = read(); sort(inp + 1, inp + n + 1); int tot = unique(inp + 1, inp + n + 1) - inp - 1; for(int i = 1; i <= n; ++i) typ[i] = lower_bound(inp + 1, inp + tot + 1, aa[i]) - inp; for(int i = 1; i <= m; ++i) { q[i].l = read(), q[i].r = read(); q[i].id = i; } sort(q + 1, q + m + 1, cmp); int i = 1; for(int k = 0; k <= bnum; ++k) { int l = rb[k] + 1, r = rb[k]; ll now = 0; memset(cnt, 0, sizeof(cnt)); for( ; belong[q[i].l] == k; ++i) { int ql = q[i].l, qr = q[i].r; ll tmp; if(belong[ql] == belong[qr]) { tmp = 0; for(int j = ql; j <= qr; ++j) cnt2[typ[j]] = 0; for(int j = ql; j <= qr; ++j) { ++cnt2[typ[j]]; tmp = max(tmp, 1ll * cnt2[typ[j]] * aa[j]); } ans[q[i].id] = tmp; continue; } while(r < qr) { ++r; ++cnt[typ[r]]; now = max(now, 1ll * cnt[typ[r]] * aa[r]); } tmp = now; while(l > ql){ --l; ++cnt[typ[l]]; now = max(now, 1ll * cnt[typ[l]] * aa[l]); } ans[q[i].id] = now; while(l < rb[k] + 1) { --cnt[typ[l]]; l++; } now = tmp; } } for(int i = 1; i <= m; ++i) printf(\"%lld\\n\", ans[i]); return 0; }","title":"4.\u56de\u6eda\u83ab\u961f"},{"location":"DataStructure/tree/segopration/","text":"\u5173\u4e8e\u533a\u95f4\u64cd\u4f5c\u548c\u6c42\u89e3\u7684\u5404\u79cd\u7b97\u6cd5\u4e0e\u6570\u636e\u7ed3\u6784 \u00b6 1.\u5206\u5757\u4e0e\u83ab\u961f\u7b97\u6cd5 \u83ab\u961f\u7b97\u6cd5\u5c5e\u4e8e\u79bb\u7ebf\u4f18\u96c5\u66b4\u529b\u6cd5\uff0c\u5176\u4f18\u5316\u65b9\u9762\u4e3b\u8981\u4f53\u73b0\u5728\u533a\u95f4\u6392\u5e8f\u3001\u5feb\u8f93\u5165\u51fa\u3001\u8fd0\u7b97\u7b26\u4f18\u5316\u548c\u5e38\u6570\u4f18\u5316 \u6838\u5fc3\uff1a * \u5206\u5757\u5904\u7406 * \u533a\u95f4\u6392\u5e8f * \u79fb\u9488\u8ba1\u6570 tip:\u83ab\u961f\u80fd\u591f\u5904\u7406\u7684\u6570\u636e\u91cf\u8f83\u5c11\uff0c\u9047\u5230\u5927\u6570\u636e\uff081e6\uff09\u8fd8\u662f\u5bb9\u6613T \u6a21\u7248\uff1a\u4e00\u6bb5n\u4e2a\u5143\u7d20\u7684\u5e8f\u5217\uff0cm\u4e2a\u8be2\u95ee\u533a\u95f4\uff0c\u6bcf\u4e00\u6b21\u8be2\u95ee\u8f93\u51fa\u533a\u95f4\u6570\u7684\u79cd\u7c7b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> #include<cmath> using namespace std; const int maxn = 1e6 + 10; int n, m,a[maxn],belong[maxn],cnt[maxn],ans[maxn]; int read() {//\u5feb\u8f93\u5165 int res = 0; char c = getchar(); while (!isdigit(c)) c = getchar(); while (isdigit(c)) res = (res << 1) + (res << 3) + c - 48, c = getchar(); return res; } void printi(int x) {//\u5feb\u8f93\u51fa if (x / 10) printi(x / 10); putchar(x % 10 + '0'); } struct node { int l, r, id;//\u533a\u95f4\u5de6\u7aef\u70b9\u3001\u53f3\u7aef\u70b9\u3001\u79bb\u7ebf\u6807\u53f7 }q[maxn]; bool cmp(node a,node b)//\u6838\u5fc3\u6bd4\u8f83\u51fd\u6570 { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : (belong[a.l] & 1) ? a.r<b.r : a.r>b.r; } int main() { scanf(\"%d\", &n); for (int i = 1; i <= n; ++i) { a[i] = read(); } //\u5206\u5757\u5904\u7406 int siz = sqrt(n),bnum=ceil((double)n/siz); for (int i = 1; i <= bnum; ++i) { for (int j = (i - 1)*siz; j <= i * siz; j++) { belong[j] = i; } } //\u533a\u95f4\u6392\u5e8f scanf(\"%d\", &m); for (int i = 1; i <= m; ++i) { q[i].l = read(); q[i].r = read(); q[i].id = i; } sort(q + 1, q + 1 + m, cmp); //\u79fb\u9488\u8ba1\u6570 int l = 1, r = 0,now=0; for (int i = 1; i <= m; ++i) { int ql = q[i].l, qr = q[i].r; while (l < ql) now -= !--cnt[a[l++]]; while (l > ql) now += !cnt[a[--l]]++; while (r < qr) now += !cnt[a[++r]]++; while (r > qr) now -= !--cnt[a[r--]]; ans[q[i].id] = now; } for (int i = 1; i <= m; ++i) { printi(ans[i]); putchar('\\n'); } system(\"pause\"); return 0; } 2.\u6811\u72b6\u6570\u7ec4 treearray_example \u6838\u5fc3\uff1alowbit\u64cd\u4f5c\uff08\u53d6\u4e8c\u8fdb\u5236\u6700\u540e\u4e00\u4e2a1\u51fa\u73b0\u7684\u4f4d\u7f6e\u4ee3\u8868\u7684\u6570\uff09 \u5982\u56fe\u6240\u793a * \u4fee\u6539\u64cd\u4f5c\u5411\u4e0a\u66f4\u65b0\uff0c\u5219\u4e0d\u65adi+=lowbit(i)\u76f4\u5230n * \u67e5\u8be2\u64cd\u4f5c\u5411\u5de6\u67e5\u8be2\uff0c\u5219\u4e0d\u65adi-=lowbit(i)\u76f4\u52300( \u6811\u72b6\u6570\u7ec4\u7684\u533a\u95f4\u67e5\u8be2\u90fd\u662f\u57fa\u4e8e\u524d\u7f00\u548c\u76f8\u51cf\u7684\u601d\u60f3 ) \u6811\u72b6\u6570\u7ec4\u6bd4\u7ebf\u6bb5\u6811\u7b80\u5355\uff0c\u4f46\u4e5f\u53ea\u5c40\u9650\u5b8c\u6210\u4e00\u5b9a\u7684\u533a\u95f4\u4fee\u6539\u548c\u67e5\u8be2\uff08logn) \u6811\u72b6\u6570\u7ec4\u76f4\u63a5\u80fd\u89e3\u51b3\u5355\u70b9\u4fee\u6539\u548c\u5355\u70b9\u67e5\u8be2\u7684\u95ee\u9898 * \u533a\u95f4\u4fee\u6539\u65f6\uff0c\u9700\u8981\u8f6c\u6362\u6210\u5dee\u5206\u6570\u7ec4\u7684\u5355\u70b9\u4fee\u6539 \u589e\u52a0\u539f\u6570\u7ec4(l,r),\u5219\u662f\u5355\u70b9\u4fee\u6539\u5dee\u5206\u6570\u7ec4\u7684l\u548cr+1 * \u533a\u95f4\u67e5\u8be2\u65f6\uff0c\u9700\u8981\u8f6c\u6362\u6210\u5dee\u5206\u6570\u7ec4\u7684\u533a\u95f4\u67e5\u8be2\uff08\u5373\u524d\u7f00\u548c\u67e5\u8be2\uff09 \u4f8b\u5982\u6c42\u548c\uff08l,r),\u5219\u662f\u8fd0\u7528\u524d\u7f00\u548c\u76f8\u51cf\u6c42\u533a\u95f4\u548c\uff1a(a\u4e3a\u539f\u6570\u7ec4\uff0cd\u4e3a\u5dee\u5206\u6570\u7ec4) \\sum_{i=1}^{n}a[i]=n*\\sum_{i=1}^{n}d[i]-\\sum_{i=1}^{n}(d[i]*(i-1)) \\sum_{i=1}^{n}a[i]=n*\\sum_{i=1}^{n}d[i]-\\sum_{i=1}^{n}(d[i]*(i-1)) \u6811\u72b6\u6570\u7ec4\u7684\u6700\u5e38\u529f\u80fd\uff1a\u5355\u70b9\u66f4\u65b0+\u533a\u95f4\u67e5\u8be2 \uff08\u53ef\u7528\u6765\u6c42\u533a\u95f4\u79cd\u7c7b\uff0c\u9006\u5e8f\u5bf9\u6570\u7b49\uff09 \u6a21\u677f1\uff1a\u533a\u95f4\u52a0\u548c\u533a\u95f4\u6c42\u548c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> using namespace std; const int maxn = 1e5 + 10; int n,m; long long a[maxn], d[maxn],sum1[maxn],sum2[maxn];//\u539f\u6570\u7ec4\uff0c\u5dee\u5206\u6570\u7ec4\uff0c\u6811\u72b6\u6570\u7ec4 //\u6811\u72b6\u6570\u7ec4\u9012\u7b97\u5173\u7cfb int lowbit(int x) { return x & (-x); } //\u533a\u95f4\u76f8\u52a0\uff0c\u5219\u53d8\u6210\u5dee\u5206\u6570\u7ec4\u7684\u5355\u70b9\u589e\u52a0 void add(int i,long long k)//\u7b2ci\u4e2a\u5143\u7d20\u52a0k { int x = i; while (i <= n) { sum1[i] += k; sum2[i] += k * (x - 1); i += lowbit(i); } } //\u533a\u95f4\u6c42\u548c\u3002\u5229\u7528\u5dee\u5206\u6570\u7ec4\u7684\u6c42\u548c\u516c\u5f0f(\u5229\u7528\u524d\u7f00\u548c\u76f8\u51cf\u5f97\u51fa\u533a\u95f4\u548c) long long get_sum(int i)//\u63071-i\u7684\u524d\u7f00\u548c { long long res = 0, x = i; while (i > 0) { res += x * sum1[i] - sum2[i]; i -= lowbit(i); } return res; } int main() { scanf(\"%d%d\", &n, &m); for (int i = 1; i <= n; ++i) { scanf(\"%lld\", &a[i]); add(i, a[i] - a[i - 1]); } for (int i = 1; i <= m; ++i) { getchar(); char op; scanf(\"%c\", &op); if (op == 'Q') { int l, r; scanf(\"%d%d\", &l, &r); printf(\"%lld\\n\", get_sum(r) - get_sum(l - 1)); } else { int l, r; long long k; scanf(\"%d%d%lld\", &l, &r, &k); add(l, k); add(r + 1, -k); } } //system(\"pause\"); return 0; } \u6a21\u72482\uff1a\u4e00\u6bb5n\u4e2a\u5143\u7d20\u7684\u5e8f\u5217\uff0cm\u4e2a\u8be2\u95ee\u533a\u95f4\uff0c\u6bcf\u4e00\u6b21\u8be2\u95ee\u8f93\u51fa\u533a\u95f4\u6570\u7684\u79cd\u7c7b \u4e0e\u83ab\u961f\u76f8\u6bd4\uff0c\u53ef\u4ee5\u5904\u7406\u66f4\u957f\u7684\u6570\u636e\uff0c\u800c\u4e14\u6c42\u79cd\u7c7b\u6570\u6070\u597d\u7528\u5230\u524d\u7f00\u548c\u7684\u601d\u60f3 \u5bf9\u4e8e\u79cd\u7c7b\u6570\u9700\u8981\u5173\u6ce8\u53f3\u7aef\u70b9\uff0c\u82e5\u662f\u7ebf\u6bb5\u6811\u6c42\u89e3\u5219\u9700\u8981\u591a\u68f5\u6811\uff08\u5373\u6301\u4e45\u5316\uff09\uff0c\u82e5\u662f\u7528\u6811\u72b6\u6570\u7ec4\u6765\u89e3\u53ea\u9700\u8981\u79bb\u7ebf\u6309\u53f3\u7aef\u70b9\u6392\u5217\u533a\u95f4\u7136\u540e\u5355\u70b9\u4fee\u6539\u533a\u95f4\u67e5\u8be2\uff08\u5373\u524d\u7f00\u548c\uff09\u5373\u53ef 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> using namespace std; const int maxn = 1e6 + 10; int a[maxn], c[maxn],visit[maxn],ans[maxn]; int n, m,nxt; int lowbit(int x) { return x & (-x); } void add(int i, int k) { while (i <= n) { c[i] += k; i += lowbit(i); } } int get_sum(int i) { int res = 0; while (i > 0) { res += c[i]; i -= lowbit(i); } return res; } struct node { int l, r, id; }q[maxn]; bool cmp(node a, node b) { if (a.r == b.r) { return a.l < b .l; } return a.r < b.r; } int main() { scanf(\"%d\", &n); for (int i = 1; i <= n; i++) { scanf(\"%d\", &a[i]); } scanf(\"%d\", &m); for (int i = 1; i <= m; i++) { scanf(\"%d%d\", &q[i].l, &q[i].r); q[i].id = i; } sort(q + 1, q + 1 + m, cmp); nxt = 1; for (int i = 1; i <= m; i++) { int ql = q[i].l, qr = q[i].r; for (int j = nxt; j <= qr; j++) { int k = a[j]; if (!visit[k]) { add(j, 1); visit[k] = j; } else if(visit[k]<j) { add(visit[k], -1); add(j, 1); visit[k] = j; } } ans[q[i].id] = get_sum(qr)-get_sum(ql-1); nxt = qr + 1; } for (int i = 1; i <= m; i++) { printf(\"%d\\n\", ans[i]); } system(\"pause\"); return 0; } \u6a21\u677f3\uff1a\u5229\u7528\u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9 \u6838\u5fc3\uff1a\u904d\u5386\u5230\u539f\u6570\u5217\u7684\u6bcf\u4e00\u4e2a\u6570\uff0c\u7528\u5b83\u7684\u5f53\u524d\u4f4d\u7f6e\u51cf\u53bb\u539f\u4f4d\u7f6e\u6811\u72b6\u6570\u7ec4\u5df2\u7ecf\u63d2\u5165\u8fc7\u7684\u6570\u91cf\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u9006\u5e8f\u7684 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> #include<map> using namespace std; const int maxn = 1e6 + 10; int n,c[maxn]; int lowbit(int x) { return x & (-x); } void add(int i, int k) { while (i <= n) { c[i] += k; i += lowbit(i); } } int get_sum(int i) { int res = 0; while (i > 0) { res += c[i]; i -= lowbit(i); } return res; } long long a[maxn], b[maxn]; map<int, int> mp; int main() { scanf(\"%d\", &n); for (int i = 1; i <= n; ++i) { scanf(\"%lld\", &a[i]); b[i] = a[i]; } sort(a + 1, a + 1 + n); for (int i = 1; i <= n; ++i) { mp[a[i]] = i; } int ans = 0; for (int i = 1; i <= n; ++i) { add(mp[b[i]], 1); ans += i - get_sum(mp[b[i]]); } printf(\"%d\\n\", ans); system(\"pause\"); return 0; } tip: \u5f53\u6d89\u53ca \u9010\u4e2a\u63d2\u5165\u548c\u6301\u4e45\u5316\u67e5\u8be2\u533a\u95f4\u548c \u7684\u65f6\u5019\uff08\u5373 \u5355\u70b9\u66f4\u65b0\u548c\u533a\u95f4\u67e5\u8be2 \uff09\uff0c\u6811\u72b6\u6570\u7ec4\u5c31\u6709\u6781\u5927\u7684\u7528\u6b66\u4e4b\u5730 3.\u7ebf\u6bb5\u6811\u4e0e\u626b\u63cf\u7ebf \u7ebf\u6bb5\u6811\u662f\u4e00\u79cd\u7528\u6570\u7ec4\u8868\u793a\u7684\u4e8c\u53c9\u6811 \u7ebf\u6bb5\u6811\u56db\u5927\u51fd\u6570\uff1apushup\u3001pushdown\u3001update\u3001query \u4ee5\u6700\u7b80\u5355\u7684\u533a\u95f4\u66f4\u65b0\u548c\u533a\u95f4\u6c42\u548c\u6a21\u677f\u4e3a\u4f8b(\u4e00\u70b9\u4e09\u6570\u2014\u2014l,r,rt) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 void pushup(int rt) { sum[rt]=(sum[rt<<1]+sum[rt<<1|1])%mod; } void pushdown(int rt,int m)//m\u4e3a\u8be5\u70b9\u533a\u95f4\u957f\u5ea6,lazy\u8868\u793a\u81ea\u5df1\u5df2\u5904\u7406\u4f46\u5b69\u5b50\u672a\u5904\u7406 { if(lazt[rt]) { lazy[rt<<1]+=lazy[rt]; lazy[rt<<1|1]+=lazy[rt]; sum[rt<<1]+=lazy[rt]*(m-m>>1); sum[rt<<1]%mod; sum[rt<<1|1]+=lazy[rt]*(m>>1); sum[rt<<1|1]%mod; lazy[rt]=0; } } void build(int l,int r,int rt) { lazy[rt]=0; if(l==r) { sum[rt]=wt[l];// sum[rt]%mod; return; } int m=(l+r)>>1; build(l,m,rt<<1); build(m+1,r,rt<<1|1); pushup(rt); } void query(int L,int R,int l,int r,int rt)//L,R\u59cb\u7ec8\u4e0d\u53d8\uff0c\u76ee\u7684\u662f\u6c42\u51fa\u7ec4\u5408\u51fa\u5b83\u7684\u5404\u533a\u95f4\u8282\u70b9 { if(L<=l && R>=r) { res+=sum[rt]; res%mod; return; } pushdown(rt,r-l+1); int m=(l+r)>>1; if(L<=m) { query(L,R,l,m,rt<<1); } if(R>m) { query(L,R,m+1,r,rt<<1|1); } } \u7ebf\u6bb5\u6811+\u626b\u63cf\u7ebf\u6c42\u8986\u76d6\u9762\u79ef 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<algorithm> #include<map> #include<cstring> using namespace std; int n; map<double,int> ymp;//\u79bb\u6563\u5316\u5904\u7406 double raw[20005]; struct F//\u7ad6\u76f4\u626b\u63cf\u7ebf\u6cbf\u6c34\u5e73\u65b9\u5411\u626b\u63cf { double x,y1,y2;//\u7ad6\u76f4\u626b\u63cf\u7ebf\u7684\u6a2a\u5750\u6807\uff0c\u4e0a\u7aef\u5750\u6807\u548c\u4e0b\u7aef\u5750\u6807 int flag;//\u6807\u8bb0\u626b\u63cf\u65f6\u7684\u5165\u8fb9\uff081\uff09\u548c\u51fa\u8fb9\uff08-1\uff09 }four[20005]; bool cmp(F a, F b) { return a.x<b.x; } struct T { double len;//len\u7ef4\u62a4\u533a\u95f4\u8986\u76d6\u4e00\u6b21\u4ee5\u4e0a\u7684\u957f\u5ea6 int cnt;//\u4e0e\u51fa\u5165\u8fb9\u8f85\u52a9\u8ba1\u7b97+1-1 }tree[20005<<2]; void build(int rt,int l,int r) { if(l==r) { } } int main() { return 0; } 4.\u4e3b\u5e2d\u6811 5.\u6811\u94fe\u5256\u5206 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 //\u9898\u76ee\u63cf\u8ff0 // // //\u5982\u9898\uff0c\u5df2\u77e5\u4e00\u68f5\u5305\u542bN\u4e2a\u7ed3\u70b9\u7684\u6811\uff08\u8fde\u901a\u4e14\u65e0\u73af\uff09\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u5305\u542b\u4e00\u4e2a\u6570\u503c\uff0c\u9700\u8981\u652f\u6301\u4ee5\u4e0b\u64cd\u4f5c\uff1a //\u64cd\u4f5c1\uff1a \u683c\u5f0f\uff1a 1 x y z \u8868\u793a\u5c06\u6811\u4ecex\u5230y\u7ed3\u70b9\u6700\u77ed\u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\u7684\u503c\u90fd\u52a0\u4e0az //\u64cd\u4f5c2\uff1a \u683c\u5f0f\uff1a 2 x y \u8868\u793a\u6c42\u6811\u4ecex\u5230y\u7ed3\u70b9\u6700\u77ed\u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\u7684\u503c\u4e4b\u548c //\u64cd\u4f5c3\uff1a \u683c\u5f0f\uff1a 3 x z \u8868\u793a\u5c06\u4ee5x\u4e3a\u6839\u8282\u70b9\u7684\u5b50\u6811\u5185\u6240\u6709\u8282\u70b9\u503c\u90fd\u52a0\u4e0az //\u64cd\u4f5c4\uff1a \u683c\u5f0f\uff1a 4 x \u8868\u793a\u6c42\u4ee5x\u4e3a\u6839\u8282\u70b9\u7684\u5b50\u6811\u5185\u6240\u6709\u8282\u70b9\u503c\u4e4b\u548c // // //\u8f93\u5165\u683c\u5f0f\uff1a // // //\u7b2c\u4e00\u884c\u5305\u542b4\u4e2a\u6b63\u6574\u6570N\u3001M\u3001R\u3001P\uff0c\u5206\u522b\u8868\u793a\u6811\u7684\u7ed3\u70b9\u4e2a\u6570\u3001\u64cd\u4f5c\u4e2a\u6570\u3001\u6839\u8282\u70b9\u5e8f\u53f7\u548c\u53d6\u6a21\u6570\uff08\u5373\u6240\u6709\u7684\u8f93\u51fa\u7ed3\u679c\u5747\u5bf9\u6b64\u53d6\u6a21\uff09\u3002 // //\u63a5\u4e0b\u6765\u4e00\u884c\u5305\u542bN\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u5206\u522b\u4f9d\u6b21\u8868\u793a\u5404\u4e2a\u8282\u70b9\u4e0a\u521d\u59cb\u7684\u6570\u503c\u3002 // //\u63a5\u4e0b\u6765N - 1\u884c\u6bcf\u884c\u5305\u542b\u4e24\u4e2a\u6574\u6570x\u3001y\uff0c\u8868\u793a\u70b9x\u548c\u70b9y\u4e4b\u95f4\u8fde\u6709\u4e00\u6761\u8fb9\uff08\u4fdd\u8bc1\u65e0\u73af\u4e14\u8fde\u901a\uff09 // //\u63a5\u4e0b\u6765M\u884c\u6bcf\u884c\u5305\u542b\u82e5\u5e72\u4e2a\u6b63\u6574\u6570\uff0c\u6bcf\u884c\u8868\u793a\u4e00\u4e2a\u64cd\u4f5c\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a // //\u64cd\u4f5c1\uff1a 1 x y z // //\u64cd\u4f5c2\uff1a 2 x y // //\u64cd\u4f5c3\uff1a 3 x z // //\u64cd\u4f5c4\uff1a 4 x // // // // //\u8f93\u51fa\u683c\u5f0f\uff1a // // //\u8f93\u51fa\u5305\u542b\u82e5\u5e72\u884c\uff0c\u5206\u522b\u4f9d\u6b21\u8868\u793a\u6bcf\u4e2a\u64cd\u4f5c2\u6216\u64cd\u4f5c4\u6240\u5f97\u7684\u7ed3\u679c\uff08\u5bf9P\u53d6\u6a21\uff09 // // // // //\u8f93\u5165\u6837\u4f8b#1 // //5 5 2 24 //7 3 7 8 0 //1 2 //1 5 //3 1 //4 1 //3 4 2 //3 2 2 //4 5 //1 5 1 3 //2 1 3 //1234567891011 // // // //\u8f93\u51fa\u6837\u4f8b#1 // //2 //21 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<algorithm> using namespace std; #define mem(a, b) memset(a, b, sizeof(a)) #define lson l, m, rt << 1 #define rson m + 1, r, rt << 1 | 1 const int N = 2e5 + 10; int sum[N << 2], lazy[N << 2]; //\u7ebf\u6bb5\u6811\u6c42\u548c int n, m, r, mod; //\u8282\u70b9\u6570\uff0c\u64cd\u4f5c\u6570\uff0c\u6839\u8282\u70b9\uff0c\u6a21\u6570 int head[N], tot; //\u90bb\u63a5\u8868 //\u5206\u522b\u4e3a:\u91cd\u513f\u5b50\uff0c\u6bcf\u4e2a\u8282\u70b9\u65b0\u7f16\u53f7(dfs\u5e8f\uff09\uff0c\u7236\u4eb2\uff0c\u7f16\u53f7\uff0c\u6df1\u5ea6\uff0c\u5b50\u6811\u4e2a\u6570\uff0c\u6240\u5728\u91cd\u94fe\u7684\u9876\u90e8\uff08\u8f7b\u94fe\u5219\u4e3a\u672c\u8eab\uff09 int son[N], id[N], fa[N], cnt, dep[N], siz[N], top[N]; int w[N], wt[N]; //\u521d\u59cb\u70b9\u6743,\u65b0\u7f16\u53f7\u70b9\u6743 int res = 0; //\u67e5\u8be2\u7b54\u6848 struct edge { int v, next; } e[N]; void add_edge(int u, int v)//\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe\u52a0\u8fb9 { e[tot].v = v; e[tot].next = head[u]; head[u] = tot++; } void init()//\u521d\u59cb\u5316 { mem(head, -1); tot = 0; cnt = 0; } int pushup(int rt)//\u6c42\u548c\u7684\u6807\u8bb0\u4e0a\u79fb { sum[rt] = (sum[rt << 1] + sum[rt << 1 | 1]) % mod; } void pushdown(int rt, int m) //\u4e0b\u653elazy\u6807\u8bb0 { if (lazy[rt]) { lazy[rt << 1] += lazy[rt]; //\u7ed9\u5de6\u513f\u5b50\u4e0b\u653elazy lazy[rt << 1 | 1] += lazy[rt]; //\u7ed9\u53f3\u513f\u5b50\u4e0b\u653elazy sum[rt << 1] += lazy[rt] * (m - (m >> 1)); //\u66f4\u65b0sum sum[rt << 1] %= mod; sum[rt << 1 | 1] += lazy[rt] * (m >> 1); sum[rt << 1 | 1] %= mod; lazy[rt] = 0; } } void build(int l, int r, int rt) { lazy[rt] = 0; if (l == r) { sum[rt] = wt[l]; //\u65b0\u7684\u7f16\u53f7\u70b9\u6743 sum[rt] %= mod; return; } int m = (l + r) >> 1; build(lson); build(rson); pushup(rt); } void update(int L, int R, int c, int l, int r, int rt) { if (L <= l && r <= R) { lazy[rt] += c; sum[rt] += c * (r - l + 1); sum[rt] %= mod; return; } pushdown(rt, r - l + 1); int m = (l + r) >> 1; if (L <= m) update(L, R, c, lson); if (R > m) update(L, R, c, rson); pushup(rt); } void query(int L, int R, int l, int r, int rt) { if (L <= l && r <= R) { res += sum[rt]; res %= mod; return; } pushdown(rt, r - l + 1); int m = (l + r) >> 1; if (L <= m) query(L, R, lson); if (R > m) query(L, R, rson); } //---------------------------------------------------------------- //\u5904\u7406\u51fafa[],dep[],siz[],son[] void dfs1(int u, int f, int deep) { dep[u] = deep; //\u6807\u8bb0\u6df1\u5ea6 fa[u] = f; //\u6807\u8bb0\u8282\u70b9\u7684\u7236\u4eb2 siz[u] = 1; //\u8bb0\u5f55\u6bcf\u4e2a\u8282\u70b9\u5b50\u6811\u5927\u5c0f int maxson = -1; //\u8bb0\u5f55\u91cd\u513f\u5b50\u6570\u91cf for (int i = head[u]; ~i; i = e[i].next) { int v = e[i].v; if (v == f) continue; dfs1(v, u, deep + 1); siz[u] += siz[v];//\u5b50\u6811\u6570\u91cf if (siz[v] > maxson) //\u513f\u5b50\u91cc\u6700\u591asiz\u5c31\u662f\u91cd\u513f\u5b50 { son[u] = v; //\u6807\u8bb0u\u7684\u91cd\u513f\u5b50\u4e3av maxson = siz[v]; } } } //\u5904\u7406\u51fatop[],wt[],id[] void dfs2(int u, int topf) { id[u] = ++cnt; //\u6bcf\u4e2a\u8282\u70b9\u7684\u65b0\u7f16\u53f7 wt[cnt] = w[u]; //\u65b0\u7f16\u53f7\u7684\u5bf9\u5e94\u6743\u503c top[u] = topf; //\u6807\u8bb0\u6bcf\u4e2a\u91cd\u94fe\u7684\u9876\u7aef if (!son[u]) //\u6ca1\u6709\u513f\u5b50\u65f6\u8fd4\u56de return; dfs2(son[u], topf); //\u641c\u7d22\u4e0b\u4e00\u4e2a\u91cd\u513f\u5b50 for (int i = head[u]; ~i; i = e[i].next) { int v = e[i].v; if (v == fa[u] || v == son[u]) //\u5904\u7406\u8f7b\u513f\u5b50 continue; dfs2(v, v); //\u6bcf\u4e00\u4e2a\u8f7b\u513f\u5b50\u90fd\u6709\u4e00\u4e2a\u4ece\u81ea\u5df1\u5f00\u59cb\u7684\u94fe\uff0c\u8d77\u70b9\u5c31\u662f\u81ea\u5df1 } } void updrange(int x, int y, int k) { k %= mod; while (top[x] != top[y])//\u4e0d\u5728\u540c\u4e00\u6761\u91cd\u94fe { if (dep[top[x]] < dep[top[y]]) //\u4f7fx\u6df1\u5ea6\u8f83\u5927 swap(x, y);//\u9009\u62e9\u94fe\u5934\u6df1\u5ea6\u5927\u7684\u5f80\u4e0a\u8df3\uff0c\u662f\u94fe\u5934\u6df1\u5ea6\u5927\u7684\uff01\uff01\uff01\uff01 update(id[top[x]], id[x], k, 1, n, 1); x = fa[top[x]]; }//\u5faa\u73af\u5b8c\u540e\u5728\u4e00\u6761\u91cd\u94fe\u4e0a\u4e86\uff0c\u5b9e\u9645\u4e0a\u5269\u4e0b\u7684\u5c31\u662flca\u5230\u53e6\u4e00\u4e2a\u70b9\u7684\u672a\u5904\u7406\u90e8\u5206 if (dep[x] > dep[y]) //\u4f7fx\u6df1\u5ea6\u8f83\u5c0f swap(x, y); update(id[x], id[y], k, 1, n, 1); } int qrange(int x, int y) { int ans = 0; while (top[x] != top[y]) //\u5f53\u4e24\u4e2a\u70b9\u4e0d\u5728\u540c\u4e00\u6761\u94fe\u4e0a { if (dep[top[x]] < dep[top[y]]) //\u4f7fx\u6df1\u5ea6\u8f83\u5927 swap(x, y); res = 0; query(id[top[x]], id[x], 1, n, 1); //ans\u52a0\u4e0ax\u70b9\u5230x\u6240\u5728\u94fe\u9876\u7aef\u8fd9\u4e00\u6bb5\u533a\u95f4\u7684\u70b9\u6743\u548c ans += res; ans %= mod; x = fa[top[x]]; //x\u8df3\u5230x\u6240\u5728\u94fe\u9876\u7aef\u7684\u8fd9\u4e2a\u70b9\u7684\u4e0a\u9762\u4e00\u4e2a\u70b9 } //\u5f53\u4e24\u4e2a\u70b9\u5904\u4e8e\u540c\u4e00\u6761\u94fe if (dep[x] > dep[y]) //\u4f7fx\u6df1\u5ea6\u8f83\u5c0f swap(x, y); res = 0; query(id[x], id[y], 1, n, 1); ans += res; return ans % mod; } void upson(int x, int k) { update(id[x], id[x] + siz[x] - 1, k, 1, n, 1); //\u5b50\u6811\u533a\u95f4\u53f3\u7aef\u70b9\u4e3aid[x]+siz[x]-1 } int qson(int x) { res = 0; query(id[x], id[x] + siz[x] - 1, 1, n, 1); return res; } int main() { // freopen(\"in.txt\", \"r\", stdin); int u, v; scanf(\"%d%d%d%d\", &n, &m, &r, &mod); init(); for (int i = 1; i <= n; i++) scanf(\"%d\", &w[i]); for (int i = 1; i <= n - 1; i++) { scanf(\"%d%d\", &u, &v); add_edge(u, v); add_edge(v, u); } dfs1(r, 0, 1); dfs2(r, r); build(1, n, 1); //\u7528\u65b0\u70b9\u6743\u5efa\u7acb\u7ebf\u6bb5\u6811 while (m--) { int op, x, y, z; scanf(\"%d\", &op); if (op == 1) { scanf(\"%d%d%d\", &x, &y, &z); updrange(x, y, z); } else if (op == 2) { scanf(\"%d%d\", &x, &y); printf(\"%d\\n\", qrange(x, y)); } else if (op == 3) { scanf(\"%d%d\", &x, &z); upson(x, z); } else if (op == 4) { scanf(\"%d\", &x); printf(\"%d\\n\", qson(x)); } } return 0; } 4.\u4f38\u5c55\u6811 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 //\u4f38\u5c55\u6811SplayTree,\u53ef\u4ee5\u5b9e\u73b0\u7ebf\u6bb5\u6811\u529f\u80fd\u548c\u5176\u4ed6\u533a\u95f4\u7ffb\u8f6c\u3001\u73af\u6d41\u3001\u65cb\u8f6c\u3001\u6392\u5e8f\u7b49\u7b49\u64cd\u4f5c\u7684\u6050\u6016\u6570\u636e\u7ed3\u6784 #pragma warning(disable:4996) #include <iostream> #include <cstdio> #include <cstring> #include <stack> #include <vector> #include <algorithm> #include <queue> #define rep(i) for (int i=0; i<n; i++) #pragma comment(linker, \"/STACK:1024000000,1024000000\") using namespace std; typedef long long ll; const int N = 100005, inf = 0x3f3f3f3f; typedef struct splaynode* node; struct splaynode { node pre, ch[2];//\u7236\u8282\u70b9\uff0c\u5de6\u53f3\u513f\u5b50\u8282\u70b9 ll value, lazy, maxormin, sum; int size, rev; void init(int _value) { pre = ch[0] = ch[1] = NULL; maxormin = value = sum = _value; lazy = rev = 0; size = 1; } }mem[N]; int memtop; stack<node> S; node root; inline int getsize(node &x) { return x ? x->size : 0; } void pushdown(node &x) { if (!x) return; if (x->lazy) { ll w = x->lazy; x->value += w; if (x->ch[0]) { x->ch[0]->lazy += w; x->ch[0]->maxormin += w; x->ch[0]->sum += w * getsize(x->ch[0]); } if (x->ch[1]) { x->ch[1]->lazy += w; x->ch[1]->maxormin += w; x->ch[1]->sum += w * getsize(x->ch[1]); } x->lazy = 0; } if (x->rev) { node t = x->ch[0]; x->ch[0] = x->ch[1]; x->ch[1] = t; x->rev = 0; if (x->ch[0]) x->ch[0]->rev ^= 1; if (x->ch[1]) x->ch[1]->rev ^= 1; } } void update(node &x) { if (!x) return; x->size = 1; x->maxormin = x->value; x->sum = x->value; if (x->ch[0]) { x->sum += x->ch[0]->sum; x->maxormin = min(x->maxormin, x->ch[0]->maxormin); x->size += x->ch[0]->size; } if (x->ch[1]) { x->sum += x->ch[1]->sum; x->maxormin =min(x->maxormin, x->ch[1]->maxormin); x->size += x->ch[1]->size; } } void rotate(node &x, int d) {//\u666e\u65cb node y = x->pre; pushdown(y); pushdown(x); pushdown(x->ch[d]); y->ch[!d] = x->ch[d]; if (x->ch[d] != NULL) x->ch[d]->pre = y; x->pre = y->pre; if (y->pre != NULL) if (y->pre->ch[0] == y) y->pre->ch[0] = x; else y->pre->ch[1] = x; x->ch[d] = y; y->pre = x; update(y); if (y == root) root = x; } void splay(node &src, node &dst) {//\u53cc\u65cb pushdown(src); while (src != dst) { if (src->pre == dst) { if (dst->ch[0] == src) rotate(src, 1); else rotate(src, 0); break; } else { node y = src->pre, z = y->pre; if (z->ch[0] == y) { if (y->ch[0] == src) { rotate(y, 1); rotate(src, 1); } else { rotate(src, 0); rotate(src, 1); } } else { if (y->ch[1] == src) { rotate(y, 0); rotate(src, 0); } else { rotate(src, 1); rotate(src, 0); } } if (z == dst) break; } update(src); } update(src); } void select(int k, node &f) { int tmp; node t = root; while (1) { pushdown(t); tmp = getsize(t->ch[0]); if (k == tmp + 1) break; if (k <= tmp) t = t->ch[0]; else { k -= tmp + 1; t = t->ch[1]; } } pushdown(t); splay(t, f); } inline void selectsegment(int l, int r) {//\u901a\u8fc7\u65cb\u8f6c\u9009\u62e9\u533a\u95f4 select(l, root); select(r + 2, root->ch[1]); } void insert(int pos, int value) { //\u5728pos\u4f4d\u7f6e\u540e\u9762\u63d2\u5165\u4e00\u4e2a\u65b0\u503cvalue selectsegment(pos + 1, pos); node t; node x = root->ch[1]; pushdown(root); pushdown(x); if (!S.empty()) { t = S.top(); S.pop(); } else { t = &mem[memtop++]; } t->init(value); t->ch[1] = x; x->pre = t; root->ch[1] = t; t->pre = root; splay(x, root); } void add(int a, int b, int value) { //\u533a\u95f4[a,b]\u4e2d\u7684\u6570\u90fd\u52a0\u4e0avalue selectsegment(a, b); node x = root->ch[1]->ch[0]; pushdown(x); update(x); x->maxormin += value; x->lazy += value; splay(x, root); } void reverse(int a, int b) { //\u533a\u95f4[a,b]\u4e2d\u7684\u6570\u7ffb\u8f6c selectsegment(a, b); root->ch[1]->ch[0]->rev ^= 1; node x = root->ch[1]->ch[0]; splay(x, root); } void revolve(int a, int b, int t) { //\u533a\u95f4[a,b]\u4e2d\u7684\u6570\u5411\u540e\u5faa\u73af\u79fbt\u4f4d node p1, p2; selectsegment(a, b); select(b + 1 - t, root->ch[1]->ch[0]); p1 = root->ch[1]->ch[0]; pushdown(p1); p2 = p1->ch[1]; p1->ch[1] = NULL; select(a + 1, root->ch[1]->ch[0]); p1 = root->ch[1]->ch[0]; pushdown(p1); p1->ch[0] = p2; p2->pre = p1; splay(p2, root); } ll getmaxormin(int a, int b) { //\u53d6[a,b]\u4e2d\u6700\u5c0f\u7684\u503c selectsegment(a, b); node x = root->ch[1]; pushdown(x); x = x->ch[0]; pushdown(x); update(x); return x->maxormin; } ll getsum(int a, int b) {//\u53d6[a,b]\u7684\u548c selectsegment(a, b); node x = root->ch[1]; pushdown(x); x = x->ch[0]; pushdown(x); update(x); return x->sum; } void erase(int pos) { //\u62b9\u53bb\u7b2cpos\u4e2a\u5143\u7d20 selectsegment(pos, pos); pushdown(root->ch[1]); S.push(root->ch[1]->ch[0]); //\u56de\u6536\u5185\u5b58 root->ch[1]->ch[0] = NULL; node x = root->ch[1]; splay(x, root); } void cutandmove(int a, int b, int c)//\u79fb\u52a8\u533a\u95f4[l,r]\u5230\u4f4d\u7f6ec\u540e { selectsegment(a, b); node CutRoot = root->ch[1]->ch[0]; CutRoot->pre = NULL; root->ch[1]->size -= CutRoot->size; root->ch[1]->ch[0] = NULL; selectsegment(c + 1, c); CutRoot->pre = root->ch[1]; root->ch[1]->ch[0] = CutRoot; root->ch[1]->size += CutRoot->size; } void cut(int a, int b)//\u5220\u9664\u533a\u95f4[l.r] { selectsegment(a, b); node CutRoot = root->ch[1]->ch[0]; CutRoot->pre = NULL; root->size -= CutRoot->size; root->ch[1]->size -= CutRoot->size; root->ch[1]->ch[0] = NULL; } vector<int> ans; void inorder(node x) { if (!x) return; pushdown(x); inorder(x->ch[0]); if (x->value != inf) ans.push_back(x->value); inorder(x->ch[1]); } void initsplaytree(ll *a, int n) { memtop = 0; root = &mem[memtop++]; root->init(inf); root->ch[1] = &mem[memtop++]; root->ch[1]->init(inf); while (!S.empty()) S.pop();//\u6e05\u7a7a\u56de\u6536\u961f\u5217 rep(i) insert(i, a[i]); } /*----------Splay Template Over----------*/ ll v[N]; int main() { int n, m; scanf(\"%d\", &n); rep(i) scanf(\"%d\", &v[i]); initsplaytree(v, n); scanf(\"%d\", &m); while (m--) { char s[50]; scanf(\"%s\", s); if (s[0] == 'A') { int l, r, d; scanf(\"%d%d%d\", &l, &r, &d); add(l, r, d); } if (s[0] == 'R') { int l, r; scanf(\"%d%d\", &l, &r); if (s[3] == 'E') reverse(l, r); else { int k; scanf(\"%d\", &k); int tn = r - l + 1; k = (k%tn + tn) % tn; if (l == r || k == 0) continue; revolve(l, r, k); } } if (s[0] == 'I') { int x, d; scanf(\"%d%d\", &x, &d); insert(x, d); } if (s[0] == 'D') { int x; scanf(\"%d\", &x); erase(x); } if (s[0] == 'M') { int l, r; scanf(\"%d%d\", &l, &r); printf(\"%d\\n\", getmaxormin(l, r)); } } system(\"pause\"); return 0; }","title":"\u7ebf\u6bb5\u6811"},{"location":"DataStructure/tree/segopration/#_1","text":"1.\u5206\u5757\u4e0e\u83ab\u961f\u7b97\u6cd5 \u83ab\u961f\u7b97\u6cd5\u5c5e\u4e8e\u79bb\u7ebf\u4f18\u96c5\u66b4\u529b\u6cd5\uff0c\u5176\u4f18\u5316\u65b9\u9762\u4e3b\u8981\u4f53\u73b0\u5728\u533a\u95f4\u6392\u5e8f\u3001\u5feb\u8f93\u5165\u51fa\u3001\u8fd0\u7b97\u7b26\u4f18\u5316\u548c\u5e38\u6570\u4f18\u5316 \u6838\u5fc3\uff1a * \u5206\u5757\u5904\u7406 * \u533a\u95f4\u6392\u5e8f * \u79fb\u9488\u8ba1\u6570 tip:\u83ab\u961f\u80fd\u591f\u5904\u7406\u7684\u6570\u636e\u91cf\u8f83\u5c11\uff0c\u9047\u5230\u5927\u6570\u636e\uff081e6\uff09\u8fd8\u662f\u5bb9\u6613T \u6a21\u7248\uff1a\u4e00\u6bb5n\u4e2a\u5143\u7d20\u7684\u5e8f\u5217\uff0cm\u4e2a\u8be2\u95ee\u533a\u95f4\uff0c\u6bcf\u4e00\u6b21\u8be2\u95ee\u8f93\u51fa\u533a\u95f4\u6570\u7684\u79cd\u7c7b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> #include<cmath> using namespace std; const int maxn = 1e6 + 10; int n, m,a[maxn],belong[maxn],cnt[maxn],ans[maxn]; int read() {//\u5feb\u8f93\u5165 int res = 0; char c = getchar(); while (!isdigit(c)) c = getchar(); while (isdigit(c)) res = (res << 1) + (res << 3) + c - 48, c = getchar(); return res; } void printi(int x) {//\u5feb\u8f93\u51fa if (x / 10) printi(x / 10); putchar(x % 10 + '0'); } struct node { int l, r, id;//\u533a\u95f4\u5de6\u7aef\u70b9\u3001\u53f3\u7aef\u70b9\u3001\u79bb\u7ebf\u6807\u53f7 }q[maxn]; bool cmp(node a,node b)//\u6838\u5fc3\u6bd4\u8f83\u51fd\u6570 { return (belong[a.l] ^ belong[b.l]) ? belong[a.l] < belong[b.l] : (belong[a.l] & 1) ? a.r<b.r : a.r>b.r; } int main() { scanf(\"%d\", &n); for (int i = 1; i <= n; ++i) { a[i] = read(); } //\u5206\u5757\u5904\u7406 int siz = sqrt(n),bnum=ceil((double)n/siz); for (int i = 1; i <= bnum; ++i) { for (int j = (i - 1)*siz; j <= i * siz; j++) { belong[j] = i; } } //\u533a\u95f4\u6392\u5e8f scanf(\"%d\", &m); for (int i = 1; i <= m; ++i) { q[i].l = read(); q[i].r = read(); q[i].id = i; } sort(q + 1, q + 1 + m, cmp); //\u79fb\u9488\u8ba1\u6570 int l = 1, r = 0,now=0; for (int i = 1; i <= m; ++i) { int ql = q[i].l, qr = q[i].r; while (l < ql) now -= !--cnt[a[l++]]; while (l > ql) now += !cnt[a[--l]]++; while (r < qr) now += !cnt[a[++r]]++; while (r > qr) now -= !--cnt[a[r--]]; ans[q[i].id] = now; } for (int i = 1; i <= m; ++i) { printi(ans[i]); putchar('\\n'); } system(\"pause\"); return 0; } 2.\u6811\u72b6\u6570\u7ec4 treearray_example \u6838\u5fc3\uff1alowbit\u64cd\u4f5c\uff08\u53d6\u4e8c\u8fdb\u5236\u6700\u540e\u4e00\u4e2a1\u51fa\u73b0\u7684\u4f4d\u7f6e\u4ee3\u8868\u7684\u6570\uff09 \u5982\u56fe\u6240\u793a * \u4fee\u6539\u64cd\u4f5c\u5411\u4e0a\u66f4\u65b0\uff0c\u5219\u4e0d\u65adi+=lowbit(i)\u76f4\u5230n * \u67e5\u8be2\u64cd\u4f5c\u5411\u5de6\u67e5\u8be2\uff0c\u5219\u4e0d\u65adi-=lowbit(i)\u76f4\u52300( \u6811\u72b6\u6570\u7ec4\u7684\u533a\u95f4\u67e5\u8be2\u90fd\u662f\u57fa\u4e8e\u524d\u7f00\u548c\u76f8\u51cf\u7684\u601d\u60f3 ) \u6811\u72b6\u6570\u7ec4\u6bd4\u7ebf\u6bb5\u6811\u7b80\u5355\uff0c\u4f46\u4e5f\u53ea\u5c40\u9650\u5b8c\u6210\u4e00\u5b9a\u7684\u533a\u95f4\u4fee\u6539\u548c\u67e5\u8be2\uff08logn) \u6811\u72b6\u6570\u7ec4\u76f4\u63a5\u80fd\u89e3\u51b3\u5355\u70b9\u4fee\u6539\u548c\u5355\u70b9\u67e5\u8be2\u7684\u95ee\u9898 * \u533a\u95f4\u4fee\u6539\u65f6\uff0c\u9700\u8981\u8f6c\u6362\u6210\u5dee\u5206\u6570\u7ec4\u7684\u5355\u70b9\u4fee\u6539 \u589e\u52a0\u539f\u6570\u7ec4(l,r),\u5219\u662f\u5355\u70b9\u4fee\u6539\u5dee\u5206\u6570\u7ec4\u7684l\u548cr+1 * \u533a\u95f4\u67e5\u8be2\u65f6\uff0c\u9700\u8981\u8f6c\u6362\u6210\u5dee\u5206\u6570\u7ec4\u7684\u533a\u95f4\u67e5\u8be2\uff08\u5373\u524d\u7f00\u548c\u67e5\u8be2\uff09 \u4f8b\u5982\u6c42\u548c\uff08l,r),\u5219\u662f\u8fd0\u7528\u524d\u7f00\u548c\u76f8\u51cf\u6c42\u533a\u95f4\u548c\uff1a(a\u4e3a\u539f\u6570\u7ec4\uff0cd\u4e3a\u5dee\u5206\u6570\u7ec4) \\sum_{i=1}^{n}a[i]=n*\\sum_{i=1}^{n}d[i]-\\sum_{i=1}^{n}(d[i]*(i-1)) \\sum_{i=1}^{n}a[i]=n*\\sum_{i=1}^{n}d[i]-\\sum_{i=1}^{n}(d[i]*(i-1)) \u6811\u72b6\u6570\u7ec4\u7684\u6700\u5e38\u529f\u80fd\uff1a\u5355\u70b9\u66f4\u65b0+\u533a\u95f4\u67e5\u8be2 \uff08\u53ef\u7528\u6765\u6c42\u533a\u95f4\u79cd\u7c7b\uff0c\u9006\u5e8f\u5bf9\u6570\u7b49\uff09 \u6a21\u677f1\uff1a\u533a\u95f4\u52a0\u548c\u533a\u95f4\u6c42\u548c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> using namespace std; const int maxn = 1e5 + 10; int n,m; long long a[maxn], d[maxn],sum1[maxn],sum2[maxn];//\u539f\u6570\u7ec4\uff0c\u5dee\u5206\u6570\u7ec4\uff0c\u6811\u72b6\u6570\u7ec4 //\u6811\u72b6\u6570\u7ec4\u9012\u7b97\u5173\u7cfb int lowbit(int x) { return x & (-x); } //\u533a\u95f4\u76f8\u52a0\uff0c\u5219\u53d8\u6210\u5dee\u5206\u6570\u7ec4\u7684\u5355\u70b9\u589e\u52a0 void add(int i,long long k)//\u7b2ci\u4e2a\u5143\u7d20\u52a0k { int x = i; while (i <= n) { sum1[i] += k; sum2[i] += k * (x - 1); i += lowbit(i); } } //\u533a\u95f4\u6c42\u548c\u3002\u5229\u7528\u5dee\u5206\u6570\u7ec4\u7684\u6c42\u548c\u516c\u5f0f(\u5229\u7528\u524d\u7f00\u548c\u76f8\u51cf\u5f97\u51fa\u533a\u95f4\u548c) long long get_sum(int i)//\u63071-i\u7684\u524d\u7f00\u548c { long long res = 0, x = i; while (i > 0) { res += x * sum1[i] - sum2[i]; i -= lowbit(i); } return res; } int main() { scanf(\"%d%d\", &n, &m); for (int i = 1; i <= n; ++i) { scanf(\"%lld\", &a[i]); add(i, a[i] - a[i - 1]); } for (int i = 1; i <= m; ++i) { getchar(); char op; scanf(\"%c\", &op); if (op == 'Q') { int l, r; scanf(\"%d%d\", &l, &r); printf(\"%lld\\n\", get_sum(r) - get_sum(l - 1)); } else { int l, r; long long k; scanf(\"%d%d%lld\", &l, &r, &k); add(l, k); add(r + 1, -k); } } //system(\"pause\"); return 0; } \u6a21\u72482\uff1a\u4e00\u6bb5n\u4e2a\u5143\u7d20\u7684\u5e8f\u5217\uff0cm\u4e2a\u8be2\u95ee\u533a\u95f4\uff0c\u6bcf\u4e00\u6b21\u8be2\u95ee\u8f93\u51fa\u533a\u95f4\u6570\u7684\u79cd\u7c7b \u4e0e\u83ab\u961f\u76f8\u6bd4\uff0c\u53ef\u4ee5\u5904\u7406\u66f4\u957f\u7684\u6570\u636e\uff0c\u800c\u4e14\u6c42\u79cd\u7c7b\u6570\u6070\u597d\u7528\u5230\u524d\u7f00\u548c\u7684\u601d\u60f3 \u5bf9\u4e8e\u79cd\u7c7b\u6570\u9700\u8981\u5173\u6ce8\u53f3\u7aef\u70b9\uff0c\u82e5\u662f\u7ebf\u6bb5\u6811\u6c42\u89e3\u5219\u9700\u8981\u591a\u68f5\u6811\uff08\u5373\u6301\u4e45\u5316\uff09\uff0c\u82e5\u662f\u7528\u6811\u72b6\u6570\u7ec4\u6765\u89e3\u53ea\u9700\u8981\u79bb\u7ebf\u6309\u53f3\u7aef\u70b9\u6392\u5217\u533a\u95f4\u7136\u540e\u5355\u70b9\u4fee\u6539\u533a\u95f4\u67e5\u8be2\uff08\u5373\u524d\u7f00\u548c\uff09\u5373\u53ef 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> using namespace std; const int maxn = 1e6 + 10; int a[maxn], c[maxn],visit[maxn],ans[maxn]; int n, m,nxt; int lowbit(int x) { return x & (-x); } void add(int i, int k) { while (i <= n) { c[i] += k; i += lowbit(i); } } int get_sum(int i) { int res = 0; while (i > 0) { res += c[i]; i -= lowbit(i); } return res; } struct node { int l, r, id; }q[maxn]; bool cmp(node a, node b) { if (a.r == b.r) { return a.l < b .l; } return a.r < b.r; } int main() { scanf(\"%d\", &n); for (int i = 1; i <= n; i++) { scanf(\"%d\", &a[i]); } scanf(\"%d\", &m); for (int i = 1; i <= m; i++) { scanf(\"%d%d\", &q[i].l, &q[i].r); q[i].id = i; } sort(q + 1, q + 1 + m, cmp); nxt = 1; for (int i = 1; i <= m; i++) { int ql = q[i].l, qr = q[i].r; for (int j = nxt; j <= qr; j++) { int k = a[j]; if (!visit[k]) { add(j, 1); visit[k] = j; } else if(visit[k]<j) { add(visit[k], -1); add(j, 1); visit[k] = j; } } ans[q[i].id] = get_sum(qr)-get_sum(ql-1); nxt = qr + 1; } for (int i = 1; i <= m; i++) { printf(\"%d\\n\", ans[i]); } system(\"pause\"); return 0; } \u6a21\u677f3\uff1a\u5229\u7528\u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9 \u6838\u5fc3\uff1a\u904d\u5386\u5230\u539f\u6570\u5217\u7684\u6bcf\u4e00\u4e2a\u6570\uff0c\u7528\u5b83\u7684\u5f53\u524d\u4f4d\u7f6e\u51cf\u53bb\u539f\u4f4d\u7f6e\u6811\u72b6\u6570\u7ec4\u5df2\u7ecf\u63d2\u5165\u8fc7\u7684\u6570\u91cf\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u9006\u5e8f\u7684 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string> #include<algorithm> #include<map> using namespace std; const int maxn = 1e6 + 10; int n,c[maxn]; int lowbit(int x) { return x & (-x); } void add(int i, int k) { while (i <= n) { c[i] += k; i += lowbit(i); } } int get_sum(int i) { int res = 0; while (i > 0) { res += c[i]; i -= lowbit(i); } return res; } long long a[maxn], b[maxn]; map<int, int> mp; int main() { scanf(\"%d\", &n); for (int i = 1; i <= n; ++i) { scanf(\"%lld\", &a[i]); b[i] = a[i]; } sort(a + 1, a + 1 + n); for (int i = 1; i <= n; ++i) { mp[a[i]] = i; } int ans = 0; for (int i = 1; i <= n; ++i) { add(mp[b[i]], 1); ans += i - get_sum(mp[b[i]]); } printf(\"%d\\n\", ans); system(\"pause\"); return 0; } tip: \u5f53\u6d89\u53ca \u9010\u4e2a\u63d2\u5165\u548c\u6301\u4e45\u5316\u67e5\u8be2\u533a\u95f4\u548c \u7684\u65f6\u5019\uff08\u5373 \u5355\u70b9\u66f4\u65b0\u548c\u533a\u95f4\u67e5\u8be2 \uff09\uff0c\u6811\u72b6\u6570\u7ec4\u5c31\u6709\u6781\u5927\u7684\u7528\u6b66\u4e4b\u5730 3.\u7ebf\u6bb5\u6811\u4e0e\u626b\u63cf\u7ebf \u7ebf\u6bb5\u6811\u662f\u4e00\u79cd\u7528\u6570\u7ec4\u8868\u793a\u7684\u4e8c\u53c9\u6811 \u7ebf\u6bb5\u6811\u56db\u5927\u51fd\u6570\uff1apushup\u3001pushdown\u3001update\u3001query \u4ee5\u6700\u7b80\u5355\u7684\u533a\u95f4\u66f4\u65b0\u548c\u533a\u95f4\u6c42\u548c\u6a21\u677f\u4e3a\u4f8b(\u4e00\u70b9\u4e09\u6570\u2014\u2014l,r,rt) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 void pushup(int rt) { sum[rt]=(sum[rt<<1]+sum[rt<<1|1])%mod; } void pushdown(int rt,int m)//m\u4e3a\u8be5\u70b9\u533a\u95f4\u957f\u5ea6,lazy\u8868\u793a\u81ea\u5df1\u5df2\u5904\u7406\u4f46\u5b69\u5b50\u672a\u5904\u7406 { if(lazt[rt]) { lazy[rt<<1]+=lazy[rt]; lazy[rt<<1|1]+=lazy[rt]; sum[rt<<1]+=lazy[rt]*(m-m>>1); sum[rt<<1]%mod; sum[rt<<1|1]+=lazy[rt]*(m>>1); sum[rt<<1|1]%mod; lazy[rt]=0; } } void build(int l,int r,int rt) { lazy[rt]=0; if(l==r) { sum[rt]=wt[l];// sum[rt]%mod; return; } int m=(l+r)>>1; build(l,m,rt<<1); build(m+1,r,rt<<1|1); pushup(rt); } void query(int L,int R,int l,int r,int rt)//L,R\u59cb\u7ec8\u4e0d\u53d8\uff0c\u76ee\u7684\u662f\u6c42\u51fa\u7ec4\u5408\u51fa\u5b83\u7684\u5404\u533a\u95f4\u8282\u70b9 { if(L<=l && R>=r) { res+=sum[rt]; res%mod; return; } pushdown(rt,r-l+1); int m=(l+r)>>1; if(L<=m) { query(L,R,l,m,rt<<1); } if(R>m) { query(L,R,m+1,r,rt<<1|1); } } \u7ebf\u6bb5\u6811+\u626b\u63cf\u7ebf\u6c42\u8986\u76d6\u9762\u79ef 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<algorithm> #include<map> #include<cstring> using namespace std; int n; map<double,int> ymp;//\u79bb\u6563\u5316\u5904\u7406 double raw[20005]; struct F//\u7ad6\u76f4\u626b\u63cf\u7ebf\u6cbf\u6c34\u5e73\u65b9\u5411\u626b\u63cf { double x,y1,y2;//\u7ad6\u76f4\u626b\u63cf\u7ebf\u7684\u6a2a\u5750\u6807\uff0c\u4e0a\u7aef\u5750\u6807\u548c\u4e0b\u7aef\u5750\u6807 int flag;//\u6807\u8bb0\u626b\u63cf\u65f6\u7684\u5165\u8fb9\uff081\uff09\u548c\u51fa\u8fb9\uff08-1\uff09 }four[20005]; bool cmp(F a, F b) { return a.x<b.x; } struct T { double len;//len\u7ef4\u62a4\u533a\u95f4\u8986\u76d6\u4e00\u6b21\u4ee5\u4e0a\u7684\u957f\u5ea6 int cnt;//\u4e0e\u51fa\u5165\u8fb9\u8f85\u52a9\u8ba1\u7b97+1-1 }tree[20005<<2]; void build(int rt,int l,int r) { if(l==r) { } } int main() { return 0; } 4.\u4e3b\u5e2d\u6811 5.\u6811\u94fe\u5256\u5206 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 //\u9898\u76ee\u63cf\u8ff0 // // //\u5982\u9898\uff0c\u5df2\u77e5\u4e00\u68f5\u5305\u542bN\u4e2a\u7ed3\u70b9\u7684\u6811\uff08\u8fde\u901a\u4e14\u65e0\u73af\uff09\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u5305\u542b\u4e00\u4e2a\u6570\u503c\uff0c\u9700\u8981\u652f\u6301\u4ee5\u4e0b\u64cd\u4f5c\uff1a //\u64cd\u4f5c1\uff1a \u683c\u5f0f\uff1a 1 x y z \u8868\u793a\u5c06\u6811\u4ecex\u5230y\u7ed3\u70b9\u6700\u77ed\u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\u7684\u503c\u90fd\u52a0\u4e0az //\u64cd\u4f5c2\uff1a \u683c\u5f0f\uff1a 2 x y \u8868\u793a\u6c42\u6811\u4ecex\u5230y\u7ed3\u70b9\u6700\u77ed\u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\u7684\u503c\u4e4b\u548c //\u64cd\u4f5c3\uff1a \u683c\u5f0f\uff1a 3 x z \u8868\u793a\u5c06\u4ee5x\u4e3a\u6839\u8282\u70b9\u7684\u5b50\u6811\u5185\u6240\u6709\u8282\u70b9\u503c\u90fd\u52a0\u4e0az //\u64cd\u4f5c4\uff1a \u683c\u5f0f\uff1a 4 x \u8868\u793a\u6c42\u4ee5x\u4e3a\u6839\u8282\u70b9\u7684\u5b50\u6811\u5185\u6240\u6709\u8282\u70b9\u503c\u4e4b\u548c // // //\u8f93\u5165\u683c\u5f0f\uff1a // // //\u7b2c\u4e00\u884c\u5305\u542b4\u4e2a\u6b63\u6574\u6570N\u3001M\u3001R\u3001P\uff0c\u5206\u522b\u8868\u793a\u6811\u7684\u7ed3\u70b9\u4e2a\u6570\u3001\u64cd\u4f5c\u4e2a\u6570\u3001\u6839\u8282\u70b9\u5e8f\u53f7\u548c\u53d6\u6a21\u6570\uff08\u5373\u6240\u6709\u7684\u8f93\u51fa\u7ed3\u679c\u5747\u5bf9\u6b64\u53d6\u6a21\uff09\u3002 // //\u63a5\u4e0b\u6765\u4e00\u884c\u5305\u542bN\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u5206\u522b\u4f9d\u6b21\u8868\u793a\u5404\u4e2a\u8282\u70b9\u4e0a\u521d\u59cb\u7684\u6570\u503c\u3002 // //\u63a5\u4e0b\u6765N - 1\u884c\u6bcf\u884c\u5305\u542b\u4e24\u4e2a\u6574\u6570x\u3001y\uff0c\u8868\u793a\u70b9x\u548c\u70b9y\u4e4b\u95f4\u8fde\u6709\u4e00\u6761\u8fb9\uff08\u4fdd\u8bc1\u65e0\u73af\u4e14\u8fde\u901a\uff09 // //\u63a5\u4e0b\u6765M\u884c\u6bcf\u884c\u5305\u542b\u82e5\u5e72\u4e2a\u6b63\u6574\u6570\uff0c\u6bcf\u884c\u8868\u793a\u4e00\u4e2a\u64cd\u4f5c\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a // //\u64cd\u4f5c1\uff1a 1 x y z // //\u64cd\u4f5c2\uff1a 2 x y // //\u64cd\u4f5c3\uff1a 3 x z // //\u64cd\u4f5c4\uff1a 4 x // // // // //\u8f93\u51fa\u683c\u5f0f\uff1a // // //\u8f93\u51fa\u5305\u542b\u82e5\u5e72\u884c\uff0c\u5206\u522b\u4f9d\u6b21\u8868\u793a\u6bcf\u4e2a\u64cd\u4f5c2\u6216\u64cd\u4f5c4\u6240\u5f97\u7684\u7ed3\u679c\uff08\u5bf9P\u53d6\u6a21\uff09 // // // // //\u8f93\u5165\u6837\u4f8b#1 // //5 5 2 24 //7 3 7 8 0 //1 2 //1 5 //3 1 //4 1 //3 4 2 //3 2 2 //4 5 //1 5 1 3 //2 1 3 //1234567891011 // // // //\u8f93\u51fa\u6837\u4f8b#1 // //2 //21 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<algorithm> using namespace std; #define mem(a, b) memset(a, b, sizeof(a)) #define lson l, m, rt << 1 #define rson m + 1, r, rt << 1 | 1 const int N = 2e5 + 10; int sum[N << 2], lazy[N << 2]; //\u7ebf\u6bb5\u6811\u6c42\u548c int n, m, r, mod; //\u8282\u70b9\u6570\uff0c\u64cd\u4f5c\u6570\uff0c\u6839\u8282\u70b9\uff0c\u6a21\u6570 int head[N], tot; //\u90bb\u63a5\u8868 //\u5206\u522b\u4e3a:\u91cd\u513f\u5b50\uff0c\u6bcf\u4e2a\u8282\u70b9\u65b0\u7f16\u53f7(dfs\u5e8f\uff09\uff0c\u7236\u4eb2\uff0c\u7f16\u53f7\uff0c\u6df1\u5ea6\uff0c\u5b50\u6811\u4e2a\u6570\uff0c\u6240\u5728\u91cd\u94fe\u7684\u9876\u90e8\uff08\u8f7b\u94fe\u5219\u4e3a\u672c\u8eab\uff09 int son[N], id[N], fa[N], cnt, dep[N], siz[N], top[N]; int w[N], wt[N]; //\u521d\u59cb\u70b9\u6743,\u65b0\u7f16\u53f7\u70b9\u6743 int res = 0; //\u67e5\u8be2\u7b54\u6848 struct edge { int v, next; } e[N]; void add_edge(int u, int v)//\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe\u52a0\u8fb9 { e[tot].v = v; e[tot].next = head[u]; head[u] = tot++; } void init()//\u521d\u59cb\u5316 { mem(head, -1); tot = 0; cnt = 0; } int pushup(int rt)//\u6c42\u548c\u7684\u6807\u8bb0\u4e0a\u79fb { sum[rt] = (sum[rt << 1] + sum[rt << 1 | 1]) % mod; } void pushdown(int rt, int m) //\u4e0b\u653elazy\u6807\u8bb0 { if (lazy[rt]) { lazy[rt << 1] += lazy[rt]; //\u7ed9\u5de6\u513f\u5b50\u4e0b\u653elazy lazy[rt << 1 | 1] += lazy[rt]; //\u7ed9\u53f3\u513f\u5b50\u4e0b\u653elazy sum[rt << 1] += lazy[rt] * (m - (m >> 1)); //\u66f4\u65b0sum sum[rt << 1] %= mod; sum[rt << 1 | 1] += lazy[rt] * (m >> 1); sum[rt << 1 | 1] %= mod; lazy[rt] = 0; } } void build(int l, int r, int rt) { lazy[rt] = 0; if (l == r) { sum[rt] = wt[l]; //\u65b0\u7684\u7f16\u53f7\u70b9\u6743 sum[rt] %= mod; return; } int m = (l + r) >> 1; build(lson); build(rson); pushup(rt); } void update(int L, int R, int c, int l, int r, int rt) { if (L <= l && r <= R) { lazy[rt] += c; sum[rt] += c * (r - l + 1); sum[rt] %= mod; return; } pushdown(rt, r - l + 1); int m = (l + r) >> 1; if (L <= m) update(L, R, c, lson); if (R > m) update(L, R, c, rson); pushup(rt); } void query(int L, int R, int l, int r, int rt) { if (L <= l && r <= R) { res += sum[rt]; res %= mod; return; } pushdown(rt, r - l + 1); int m = (l + r) >> 1; if (L <= m) query(L, R, lson); if (R > m) query(L, R, rson); } //---------------------------------------------------------------- //\u5904\u7406\u51fafa[],dep[],siz[],son[] void dfs1(int u, int f, int deep) { dep[u] = deep; //\u6807\u8bb0\u6df1\u5ea6 fa[u] = f; //\u6807\u8bb0\u8282\u70b9\u7684\u7236\u4eb2 siz[u] = 1; //\u8bb0\u5f55\u6bcf\u4e2a\u8282\u70b9\u5b50\u6811\u5927\u5c0f int maxson = -1; //\u8bb0\u5f55\u91cd\u513f\u5b50\u6570\u91cf for (int i = head[u]; ~i; i = e[i].next) { int v = e[i].v; if (v == f) continue; dfs1(v, u, deep + 1); siz[u] += siz[v];//\u5b50\u6811\u6570\u91cf if (siz[v] > maxson) //\u513f\u5b50\u91cc\u6700\u591asiz\u5c31\u662f\u91cd\u513f\u5b50 { son[u] = v; //\u6807\u8bb0u\u7684\u91cd\u513f\u5b50\u4e3av maxson = siz[v]; } } } //\u5904\u7406\u51fatop[],wt[],id[] void dfs2(int u, int topf) { id[u] = ++cnt; //\u6bcf\u4e2a\u8282\u70b9\u7684\u65b0\u7f16\u53f7 wt[cnt] = w[u]; //\u65b0\u7f16\u53f7\u7684\u5bf9\u5e94\u6743\u503c top[u] = topf; //\u6807\u8bb0\u6bcf\u4e2a\u91cd\u94fe\u7684\u9876\u7aef if (!son[u]) //\u6ca1\u6709\u513f\u5b50\u65f6\u8fd4\u56de return; dfs2(son[u], topf); //\u641c\u7d22\u4e0b\u4e00\u4e2a\u91cd\u513f\u5b50 for (int i = head[u]; ~i; i = e[i].next) { int v = e[i].v; if (v == fa[u] || v == son[u]) //\u5904\u7406\u8f7b\u513f\u5b50 continue; dfs2(v, v); //\u6bcf\u4e00\u4e2a\u8f7b\u513f\u5b50\u90fd\u6709\u4e00\u4e2a\u4ece\u81ea\u5df1\u5f00\u59cb\u7684\u94fe\uff0c\u8d77\u70b9\u5c31\u662f\u81ea\u5df1 } } void updrange(int x, int y, int k) { k %= mod; while (top[x] != top[y])//\u4e0d\u5728\u540c\u4e00\u6761\u91cd\u94fe { if (dep[top[x]] < dep[top[y]]) //\u4f7fx\u6df1\u5ea6\u8f83\u5927 swap(x, y);//\u9009\u62e9\u94fe\u5934\u6df1\u5ea6\u5927\u7684\u5f80\u4e0a\u8df3\uff0c\u662f\u94fe\u5934\u6df1\u5ea6\u5927\u7684\uff01\uff01\uff01\uff01 update(id[top[x]], id[x], k, 1, n, 1); x = fa[top[x]]; }//\u5faa\u73af\u5b8c\u540e\u5728\u4e00\u6761\u91cd\u94fe\u4e0a\u4e86\uff0c\u5b9e\u9645\u4e0a\u5269\u4e0b\u7684\u5c31\u662flca\u5230\u53e6\u4e00\u4e2a\u70b9\u7684\u672a\u5904\u7406\u90e8\u5206 if (dep[x] > dep[y]) //\u4f7fx\u6df1\u5ea6\u8f83\u5c0f swap(x, y); update(id[x], id[y], k, 1, n, 1); } int qrange(int x, int y) { int ans = 0; while (top[x] != top[y]) //\u5f53\u4e24\u4e2a\u70b9\u4e0d\u5728\u540c\u4e00\u6761\u94fe\u4e0a { if (dep[top[x]] < dep[top[y]]) //\u4f7fx\u6df1\u5ea6\u8f83\u5927 swap(x, y); res = 0; query(id[top[x]], id[x], 1, n, 1); //ans\u52a0\u4e0ax\u70b9\u5230x\u6240\u5728\u94fe\u9876\u7aef\u8fd9\u4e00\u6bb5\u533a\u95f4\u7684\u70b9\u6743\u548c ans += res; ans %= mod; x = fa[top[x]]; //x\u8df3\u5230x\u6240\u5728\u94fe\u9876\u7aef\u7684\u8fd9\u4e2a\u70b9\u7684\u4e0a\u9762\u4e00\u4e2a\u70b9 } //\u5f53\u4e24\u4e2a\u70b9\u5904\u4e8e\u540c\u4e00\u6761\u94fe if (dep[x] > dep[y]) //\u4f7fx\u6df1\u5ea6\u8f83\u5c0f swap(x, y); res = 0; query(id[x], id[y], 1, n, 1); ans += res; return ans % mod; } void upson(int x, int k) { update(id[x], id[x] + siz[x] - 1, k, 1, n, 1); //\u5b50\u6811\u533a\u95f4\u53f3\u7aef\u70b9\u4e3aid[x]+siz[x]-1 } int qson(int x) { res = 0; query(id[x], id[x] + siz[x] - 1, 1, n, 1); return res; } int main() { // freopen(\"in.txt\", \"r\", stdin); int u, v; scanf(\"%d%d%d%d\", &n, &m, &r, &mod); init(); for (int i = 1; i <= n; i++) scanf(\"%d\", &w[i]); for (int i = 1; i <= n - 1; i++) { scanf(\"%d%d\", &u, &v); add_edge(u, v); add_edge(v, u); } dfs1(r, 0, 1); dfs2(r, r); build(1, n, 1); //\u7528\u65b0\u70b9\u6743\u5efa\u7acb\u7ebf\u6bb5\u6811 while (m--) { int op, x, y, z; scanf(\"%d\", &op); if (op == 1) { scanf(\"%d%d%d\", &x, &y, &z); updrange(x, y, z); } else if (op == 2) { scanf(\"%d%d\", &x, &y); printf(\"%d\\n\", qrange(x, y)); } else if (op == 3) { scanf(\"%d%d\", &x, &z); upson(x, z); } else if (op == 4) { scanf(\"%d\", &x); printf(\"%d\\n\", qson(x)); } } return 0; } 4.\u4f38\u5c55\u6811 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 //\u4f38\u5c55\u6811SplayTree,\u53ef\u4ee5\u5b9e\u73b0\u7ebf\u6bb5\u6811\u529f\u80fd\u548c\u5176\u4ed6\u533a\u95f4\u7ffb\u8f6c\u3001\u73af\u6d41\u3001\u65cb\u8f6c\u3001\u6392\u5e8f\u7b49\u7b49\u64cd\u4f5c\u7684\u6050\u6016\u6570\u636e\u7ed3\u6784 #pragma warning(disable:4996) #include <iostream> #include <cstdio> #include <cstring> #include <stack> #include <vector> #include <algorithm> #include <queue> #define rep(i) for (int i=0; i<n; i++) #pragma comment(linker, \"/STACK:1024000000,1024000000\") using namespace std; typedef long long ll; const int N = 100005, inf = 0x3f3f3f3f; typedef struct splaynode* node; struct splaynode { node pre, ch[2];//\u7236\u8282\u70b9\uff0c\u5de6\u53f3\u513f\u5b50\u8282\u70b9 ll value, lazy, maxormin, sum; int size, rev; void init(int _value) { pre = ch[0] = ch[1] = NULL; maxormin = value = sum = _value; lazy = rev = 0; size = 1; } }mem[N]; int memtop; stack<node> S; node root; inline int getsize(node &x) { return x ? x->size : 0; } void pushdown(node &x) { if (!x) return; if (x->lazy) { ll w = x->lazy; x->value += w; if (x->ch[0]) { x->ch[0]->lazy += w; x->ch[0]->maxormin += w; x->ch[0]->sum += w * getsize(x->ch[0]); } if (x->ch[1]) { x->ch[1]->lazy += w; x->ch[1]->maxormin += w; x->ch[1]->sum += w * getsize(x->ch[1]); } x->lazy = 0; } if (x->rev) { node t = x->ch[0]; x->ch[0] = x->ch[1]; x->ch[1] = t; x->rev = 0; if (x->ch[0]) x->ch[0]->rev ^= 1; if (x->ch[1]) x->ch[1]->rev ^= 1; } } void update(node &x) { if (!x) return; x->size = 1; x->maxormin = x->value; x->sum = x->value; if (x->ch[0]) { x->sum += x->ch[0]->sum; x->maxormin = min(x->maxormin, x->ch[0]->maxormin); x->size += x->ch[0]->size; } if (x->ch[1]) { x->sum += x->ch[1]->sum; x->maxormin =min(x->maxormin, x->ch[1]->maxormin); x->size += x->ch[1]->size; } } void rotate(node &x, int d) {//\u666e\u65cb node y = x->pre; pushdown(y); pushdown(x); pushdown(x->ch[d]); y->ch[!d] = x->ch[d]; if (x->ch[d] != NULL) x->ch[d]->pre = y; x->pre = y->pre; if (y->pre != NULL) if (y->pre->ch[0] == y) y->pre->ch[0] = x; else y->pre->ch[1] = x; x->ch[d] = y; y->pre = x; update(y); if (y == root) root = x; } void splay(node &src, node &dst) {//\u53cc\u65cb pushdown(src); while (src != dst) { if (src->pre == dst) { if (dst->ch[0] == src) rotate(src, 1); else rotate(src, 0); break; } else { node y = src->pre, z = y->pre; if (z->ch[0] == y) { if (y->ch[0] == src) { rotate(y, 1); rotate(src, 1); } else { rotate(src, 0); rotate(src, 1); } } else { if (y->ch[1] == src) { rotate(y, 0); rotate(src, 0); } else { rotate(src, 1); rotate(src, 0); } } if (z == dst) break; } update(src); } update(src); } void select(int k, node &f) { int tmp; node t = root; while (1) { pushdown(t); tmp = getsize(t->ch[0]); if (k == tmp + 1) break; if (k <= tmp) t = t->ch[0]; else { k -= tmp + 1; t = t->ch[1]; } } pushdown(t); splay(t, f); } inline void selectsegment(int l, int r) {//\u901a\u8fc7\u65cb\u8f6c\u9009\u62e9\u533a\u95f4 select(l, root); select(r + 2, root->ch[1]); } void insert(int pos, int value) { //\u5728pos\u4f4d\u7f6e\u540e\u9762\u63d2\u5165\u4e00\u4e2a\u65b0\u503cvalue selectsegment(pos + 1, pos); node t; node x = root->ch[1]; pushdown(root); pushdown(x); if (!S.empty()) { t = S.top(); S.pop(); } else { t = &mem[memtop++]; } t->init(value); t->ch[1] = x; x->pre = t; root->ch[1] = t; t->pre = root; splay(x, root); } void add(int a, int b, int value) { //\u533a\u95f4[a,b]\u4e2d\u7684\u6570\u90fd\u52a0\u4e0avalue selectsegment(a, b); node x = root->ch[1]->ch[0]; pushdown(x); update(x); x->maxormin += value; x->lazy += value; splay(x, root); } void reverse(int a, int b) { //\u533a\u95f4[a,b]\u4e2d\u7684\u6570\u7ffb\u8f6c selectsegment(a, b); root->ch[1]->ch[0]->rev ^= 1; node x = root->ch[1]->ch[0]; splay(x, root); } void revolve(int a, int b, int t) { //\u533a\u95f4[a,b]\u4e2d\u7684\u6570\u5411\u540e\u5faa\u73af\u79fbt\u4f4d node p1, p2; selectsegment(a, b); select(b + 1 - t, root->ch[1]->ch[0]); p1 = root->ch[1]->ch[0]; pushdown(p1); p2 = p1->ch[1]; p1->ch[1] = NULL; select(a + 1, root->ch[1]->ch[0]); p1 = root->ch[1]->ch[0]; pushdown(p1); p1->ch[0] = p2; p2->pre = p1; splay(p2, root); } ll getmaxormin(int a, int b) { //\u53d6[a,b]\u4e2d\u6700\u5c0f\u7684\u503c selectsegment(a, b); node x = root->ch[1]; pushdown(x); x = x->ch[0]; pushdown(x); update(x); return x->maxormin; } ll getsum(int a, int b) {//\u53d6[a,b]\u7684\u548c selectsegment(a, b); node x = root->ch[1]; pushdown(x); x = x->ch[0]; pushdown(x); update(x); return x->sum; } void erase(int pos) { //\u62b9\u53bb\u7b2cpos\u4e2a\u5143\u7d20 selectsegment(pos, pos); pushdown(root->ch[1]); S.push(root->ch[1]->ch[0]); //\u56de\u6536\u5185\u5b58 root->ch[1]->ch[0] = NULL; node x = root->ch[1]; splay(x, root); } void cutandmove(int a, int b, int c)//\u79fb\u52a8\u533a\u95f4[l,r]\u5230\u4f4d\u7f6ec\u540e { selectsegment(a, b); node CutRoot = root->ch[1]->ch[0]; CutRoot->pre = NULL; root->ch[1]->size -= CutRoot->size; root->ch[1]->ch[0] = NULL; selectsegment(c + 1, c); CutRoot->pre = root->ch[1]; root->ch[1]->ch[0] = CutRoot; root->ch[1]->size += CutRoot->size; } void cut(int a, int b)//\u5220\u9664\u533a\u95f4[l.r] { selectsegment(a, b); node CutRoot = root->ch[1]->ch[0]; CutRoot->pre = NULL; root->size -= CutRoot->size; root->ch[1]->size -= CutRoot->size; root->ch[1]->ch[0] = NULL; } vector<int> ans; void inorder(node x) { if (!x) return; pushdown(x); inorder(x->ch[0]); if (x->value != inf) ans.push_back(x->value); inorder(x->ch[1]); } void initsplaytree(ll *a, int n) { memtop = 0; root = &mem[memtop++]; root->init(inf); root->ch[1] = &mem[memtop++]; root->ch[1]->init(inf); while (!S.empty()) S.pop();//\u6e05\u7a7a\u56de\u6536\u961f\u5217 rep(i) insert(i, a[i]); } /*----------Splay Template Over----------*/ ll v[N]; int main() { int n, m; scanf(\"%d\", &n); rep(i) scanf(\"%d\", &v[i]); initsplaytree(v, n); scanf(\"%d\", &m); while (m--) { char s[50]; scanf(\"%s\", s); if (s[0] == 'A') { int l, r, d; scanf(\"%d%d%d\", &l, &r, &d); add(l, r, d); } if (s[0] == 'R') { int l, r; scanf(\"%d%d\", &l, &r); if (s[3] == 'E') reverse(l, r); else { int k; scanf(\"%d\", &k); int tn = r - l + 1; k = (k%tn + tn) % tn; if (l == r || k == 0) continue; revolve(l, r, k); } } if (s[0] == 'I') { int x, d; scanf(\"%d%d\", &x, &d); insert(x, d); } if (s[0] == 'D') { int x; scanf(\"%d\", &x); erase(x); } if (s[0] == 'M') { int l, r; scanf(\"%d%d\", &l, &r); printf(\"%d\\n\", getmaxormin(l, r)); } } system(\"pause\"); return 0; }","title":"\u5173\u4e8e\u533a\u95f4\u64cd\u4f5c\u548c\u6c42\u89e3\u7684\u5404\u79cd\u7b97\u6cd5\u4e0e\u6570\u636e\u7ed3\u6784"},{"location":"DataStructure/tree/treearray/","text":"\u6811\u72b6\u6570\u7ec4 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 //\u6811\u72b6\u6570\u7ec4\u662f\u9488\u5bf9\u7a7a\u95f4\u4f18\u5316\u7684\u4e00\u79cd\u533a\u95f4\u4fee\u6539\u67e5\u8be2\u6570\u636e\u7ed3\u6784 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string.h> #include<string> #include<algorithm> using namespace std; #define LL long long #define MAXN 50005 #define inf 1<<29 int bit[MAXN], n, a[MAXN]; int lowbit(int x)//\u53d6\u4e8c\u8fdb\u5236\u4e2d\u6700\u540e\u4e00\u4e2a1\u51fa\u73b0\u7684\u4f4d\u7f6e\u4ee3\u8868\u7684\u6570\u5b57 { return x & (-x); } void add(int i, int x)//\u5355\u70b9\u4fee\u6539 { while (i <= n)//\u4e0e\u8be5\u70b9\u6709\u5173\u7cfb\u7684\u90fd\u662f\u5176\u7956\u5b97 { bit[i] += x;//\u4fee\u6539\u5404\u4e2a\u7236\u7ea7\u8282\u70b9 i += lowbit(i);//\u8fd9\u662f\u4e34\u8fd1\u4e14\u5305\u542b\u81ea\u5df1\u7684\u8282\u70b9 } } void sub(int i, int x) { while (i <= n) { bit[i] -= x; i += lowbit(i); } } int sum(int i) { int s = 0; while (i > 0) { s += bit[i]; i -= lowbit(i);//\u8fd9\u662f\u4e34\u8fd1\u4f46\u4e0d\u5305\u542b\u81ea\u5df1\u7684\u90bb\u7236\u8282\u70b9 } return s; } int main() { int t; scanf(\"%d\", &t); for (int tt = 1; tt <= t; tt++) { printf(\"Case %d:\\n\", tt); scanf(\"%d\", &n); memset(bit, 0, sizeof bit); for (int i = 1; i <= n; i++) { scanf(\"%d\", &a[i]); add(i, a[i]);//\u5355\u70b9\u4fee\u6539\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u7528\u6765\u521d\u59cb\u5316\u5efa\u6811 } char str[10]; while (scanf(\"%s\", str) && str[0] != 'E') { if (str[0] == 'Q') { int u, v; scanf(\"%d%d\", &u, &v); printf(\"%d\\n\", sum(v) - sum(u - 1)); } else if (str[0] == 'A') { int u, v; scanf(\"%d%d\", &u, &v); add(u, v); } else if (str[0] == 'S') { int u, v; scanf(\"%d%d\", &u, &v); sub(u, v); } } } return 0; } //\u533a\u95f4\u66f4\u65b0\uff0c\u5355\u70b9\u67e5\u8be2\uff1a\u53ea\u9700\u8981\u5c06\u539f\u6570\u7ec4a\u53d8\u6210\u5dee\u5206\u6570\u7ec4\uff0c\u533a\u95f4\u66f4\u65b0\u65f6\u5bf9\u4e8e\u5dee\u5206\u6570\u7ec4\u7684\u6811\u72b6\u6570\u7ec4\u53ea\u9700\u8981\u66f4\u65b0\u4e24\u70b9\u503c //updata(x,k); //A[x] - A[x-1]\u589e\u52a0k //updata(y + 1, -k); //A[y+1] - A[y]\u51cf\u5c11k //\u533a\u95f4\u66f4\u65b0\uff0c\u533a\u95f4\u67e5\u8be2 //\u2211\uff08i = 1-n\uff09A[i] = \u2211(i = 1-n) \u2211(j = 1-i)D[j]; //\u5219A[1] + A[2] + ... + A[n] // //= (D[1]) + (D[1] + D[2]) + ... + (D[1] + D[2] + ... + D[n]) // //= n * D[1] + (n - 1)*D[2] + ... + D[n] // //= n * (D[1] + D[2] + ... + D[n]) - (0 * D[1] + 1 * D[2] + ... + (n - 1)*D[n]) //\u6240\u4ee5\u4e0a\u5f0f\u53ef\u4ee5\u53d8\u4e3a\u2211(i = 1-n)A[i] = n * \u2211(i = 1-n)D[i] - \u2211(i = 1-n)(D[i] * (i - 1)); //\u6240\u4ee5\u7ef4\u62a4\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\uff1asum1[i] = D[i]\uff0csum2[i] = D[i]*(i-1); int n, m; int a[50005] = { 0 }; int sum1[50005]; //(D[1] + D[2] + ... + D[n]) int sum2[50005]; //(1*D[1] + 2*D[2] + ... + n*D[n]) int lowbit(int x) { return x & (-x); } void updata(int i, int k) { int x = i; //\u56e0\u4e3ax\u4e0d\u53d8\uff0c\u6240\u4ee5\u5f97\u5148\u4fdd\u5b58i\u503c while (i <= n) { sum1[i] += k; sum2[i] += k * (x - 1); i += lowbit(i); } } int getsum(int i) { //\u6c42\u524d\u7f00\u548c int res = 0, x = i; while (i > 0) { res += x * sum1[i] - sum2[i]; i -= lowbit(i); } return res; } int x, k,y; int main() { cin >> n; for (int i = 1; i <= n; i++) { cin >> a[i]; updata(i, a[i] - a[i - 1]); //\u8f93\u5165\u521d\u503c\u7684\u65f6\u5019\uff0c\u4e5f\u76f8\u5f53\u4e8e\u66f4\u65b0\u4e86\u503c } //[x,y]\u533a\u95f4\u5185\u52a0\u4e0ak cin >> x >> y >> k; updata(x, k); //A[x] - A[x-1]\u589e\u52a0k updata(y + 1, -k); //A[y+1] - A[y]\u51cf\u5c11k //\u6c42[x,y]\u533a\u95f4\u548c int sum = getsum(y) - getsum(x - 1); return 0; }","title":"\u6811\u72b6\u6570\u7ec4"},{"location":"DataStructure/tree/treearray/#_1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 //\u6811\u72b6\u6570\u7ec4\u662f\u9488\u5bf9\u7a7a\u95f4\u4f18\u5316\u7684\u4e00\u79cd\u533a\u95f4\u4fee\u6539\u67e5\u8be2\u6570\u636e\u7ed3\u6784 #pragma warning(disable:4996) #include<iostream> #include<cstdio> #include<cstring> #include<string.h> #include<string> #include<algorithm> using namespace std; #define LL long long #define MAXN 50005 #define inf 1<<29 int bit[MAXN], n, a[MAXN]; int lowbit(int x)//\u53d6\u4e8c\u8fdb\u5236\u4e2d\u6700\u540e\u4e00\u4e2a1\u51fa\u73b0\u7684\u4f4d\u7f6e\u4ee3\u8868\u7684\u6570\u5b57 { return x & (-x); } void add(int i, int x)//\u5355\u70b9\u4fee\u6539 { while (i <= n)//\u4e0e\u8be5\u70b9\u6709\u5173\u7cfb\u7684\u90fd\u662f\u5176\u7956\u5b97 { bit[i] += x;//\u4fee\u6539\u5404\u4e2a\u7236\u7ea7\u8282\u70b9 i += lowbit(i);//\u8fd9\u662f\u4e34\u8fd1\u4e14\u5305\u542b\u81ea\u5df1\u7684\u8282\u70b9 } } void sub(int i, int x) { while (i <= n) { bit[i] -= x; i += lowbit(i); } } int sum(int i) { int s = 0; while (i > 0) { s += bit[i]; i -= lowbit(i);//\u8fd9\u662f\u4e34\u8fd1\u4f46\u4e0d\u5305\u542b\u81ea\u5df1\u7684\u90bb\u7236\u8282\u70b9 } return s; } int main() { int t; scanf(\"%d\", &t); for (int tt = 1; tt <= t; tt++) { printf(\"Case %d:\\n\", tt); scanf(\"%d\", &n); memset(bit, 0, sizeof bit); for (int i = 1; i <= n; i++) { scanf(\"%d\", &a[i]); add(i, a[i]);//\u5355\u70b9\u4fee\u6539\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u7528\u6765\u521d\u59cb\u5316\u5efa\u6811 } char str[10]; while (scanf(\"%s\", str) && str[0] != 'E') { if (str[0] == 'Q') { int u, v; scanf(\"%d%d\", &u, &v); printf(\"%d\\n\", sum(v) - sum(u - 1)); } else if (str[0] == 'A') { int u, v; scanf(\"%d%d\", &u, &v); add(u, v); } else if (str[0] == 'S') { int u, v; scanf(\"%d%d\", &u, &v); sub(u, v); } } } return 0; } //\u533a\u95f4\u66f4\u65b0\uff0c\u5355\u70b9\u67e5\u8be2\uff1a\u53ea\u9700\u8981\u5c06\u539f\u6570\u7ec4a\u53d8\u6210\u5dee\u5206\u6570\u7ec4\uff0c\u533a\u95f4\u66f4\u65b0\u65f6\u5bf9\u4e8e\u5dee\u5206\u6570\u7ec4\u7684\u6811\u72b6\u6570\u7ec4\u53ea\u9700\u8981\u66f4\u65b0\u4e24\u70b9\u503c //updata(x,k); //A[x] - A[x-1]\u589e\u52a0k //updata(y + 1, -k); //A[y+1] - A[y]\u51cf\u5c11k //\u533a\u95f4\u66f4\u65b0\uff0c\u533a\u95f4\u67e5\u8be2 //\u2211\uff08i = 1-n\uff09A[i] = \u2211(i = 1-n) \u2211(j = 1-i)D[j]; //\u5219A[1] + A[2] + ... + A[n] // //= (D[1]) + (D[1] + D[2]) + ... + (D[1] + D[2] + ... + D[n]) // //= n * D[1] + (n - 1)*D[2] + ... + D[n] // //= n * (D[1] + D[2] + ... + D[n]) - (0 * D[1] + 1 * D[2] + ... + (n - 1)*D[n]) //\u6240\u4ee5\u4e0a\u5f0f\u53ef\u4ee5\u53d8\u4e3a\u2211(i = 1-n)A[i] = n * \u2211(i = 1-n)D[i] - \u2211(i = 1-n)(D[i] * (i - 1)); //\u6240\u4ee5\u7ef4\u62a4\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\uff1asum1[i] = D[i]\uff0csum2[i] = D[i]*(i-1); int n, m; int a[50005] = { 0 }; int sum1[50005]; //(D[1] + D[2] + ... + D[n]) int sum2[50005]; //(1*D[1] + 2*D[2] + ... + n*D[n]) int lowbit(int x) { return x & (-x); } void updata(int i, int k) { int x = i; //\u56e0\u4e3ax\u4e0d\u53d8\uff0c\u6240\u4ee5\u5f97\u5148\u4fdd\u5b58i\u503c while (i <= n) { sum1[i] += k; sum2[i] += k * (x - 1); i += lowbit(i); } } int getsum(int i) { //\u6c42\u524d\u7f00\u548c int res = 0, x = i; while (i > 0) { res += x * sum1[i] - sum2[i]; i -= lowbit(i); } return res; } int x, k,y; int main() { cin >> n; for (int i = 1; i <= n; i++) { cin >> a[i]; updata(i, a[i] - a[i - 1]); //\u8f93\u5165\u521d\u503c\u7684\u65f6\u5019\uff0c\u4e5f\u76f8\u5f53\u4e8e\u66f4\u65b0\u4e86\u503c } //[x,y]\u533a\u95f4\u5185\u52a0\u4e0ak cin >> x >> y >> k; updata(x, k); //A[x] - A[x-1]\u589e\u52a0k updata(y + 1, -k); //A[y+1] - A[y]\u51cf\u5c11k //\u6c42[x,y]\u533a\u95f4\u548c int sum = getsum(y) - getsum(x - 1); return 0; }","title":"\u6811\u72b6\u6570\u7ec4"},{"location":"DataStructure/tree/treediff/","text":"\u6811\u4e0a\u5dee\u5206 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 //\u5dee\u5206\u6570\u7ec4\uff1aO(1)\u4fee\u6539\u533a\u95f4,O(n)\u67e5\u8be2\uff0c\u5dee\u5206\u6570\u7ec4\u7684\u524d\u7f00\u548c\u6570\u7ec4\u5373\u4e3a\u539f\u6570\u7ec4 //\u6811\u4e0a\u5dee\u5206\u7ef4\u62a4\u7684\u5dee\u5206\u5bf9\u5e94\u7684\u94fe\u4e3ax\u5230\u6839\u8282\u70b9\u7684\u94fe\uff0c\u6811\u4e0a\u5dee\u5206\u7684\u67e5\u8be2\u5373\u9488\u5bf9\u5b50\u6811\u548c\u7684\u641c\u7d22\u67e5\u8be2 //\u5173\u4e8e\u70b9\u7684\u5dee\u5206\uff1a\u6240\u6709\u8def\u5f84\u67d0\u70b9\u88ab\u7ecf\u8fc7\u7684\u6b21\u6570\u3001\u4fee\u6539\u4e24\u70b9\u95f4\u8def\u5f84\u6240\u6709\u70b9\u7684\u6743\u503c //\u9898\u76ee\u63cf\u8ff0 //\u677e\u9f20\u7684\u65b0\u5bb6\u662f\u4e00\u68f5\u6811\uff0c\u524d\u51e0\u5929\u521a\u521a\u88c5\u4fee\u4e86\u65b0\u5bb6\uff0c\u65b0\u5bb6\u6709n\u4e2a\u623f\u95f4\uff0c\u5e76\u4e14\u6709n - 1\u6839\u6811\u679d\u8fde\u63a5\uff0c\u6bcf\u4e2a\u623f\u95f4\u90fd\u53ef\u4ee5\u76f8\u4e92\u5230\u8fbe\uff0c\u4e14\u4fe9\u4e2a\u623f\u95f4\u4e4b\u95f4\u7684\u8def\u7ebf\u90fd\u662f\u552f\u4e00\u7684\u3002\u5929\u54ea\uff0c\u4ed6\u5c45\u7136\u771f\u7684\u4f4f\u5728\u201d\u6811\u201c\u4e0a\u3002 //\u677e\u9f20\u60f3\u9080\u8bf7\u5c0f\u718a\u7ef4\u5c3c\u524d\u6765\u53c2\u89c2\uff0c\u5e76\u4e14\u8fd8\u6307\u5b9a\u4e00\u4efd\u53c2\u89c2\u6307\u5357\uff0c\u4ed6\u5e0c\u671b\u7ef4\u5c3c\u80fd\u591f\u6309\u7167\u4ed6\u7684\u6307\u5357\u987a\u5e8f\uff0c\u5148\u53bba1\uff0c\u518d\u53bba2\uff0c......\uff0c\u6700\u540e\u5230an\uff0c\u53bb\u53c2\u89c2\u65b0\u5bb6\u3002 //\u53ef\u662f\u8fd9\u6837\u4f1a\u5bfc\u81f4\u7ef4\u5c3c\u91cd\u590d\u8d70\u5f88\u591a\u623f\u95f4\uff0c\u61d2\u60f0\u7684\u7ef4\u5c3c\u4e0d\u505c\u5730\u63a8\u8f9e\u3002\u53ef\u662f\u677e\u9f20\u544a\u8bc9\u4ed6\uff0c\u6bcf\u8d70\u5230\u4e00\u4e2a\u623f\u95f4\uff0c\u4ed6\u5c31\u53ef\u4ee5\u4ece\u623f\u95f4\u62ff\u4e00\u5757\u7cd6\u679c\u5403\u3002 //\u7ef4\u5c3c\u662f\u4e2a\u998b\u5bb6\u4f19\uff0c\u7acb\u9a6c\u5c31\u7b54\u5e94\u4e86\u3002\u73b0\u5728\u677e\u9f20\u5e0c\u671b\u77e5\u9053\u4e3a\u4e86\u4fdd\u8bc1\u7ef4\u5c3c\u6709\u7cd6\u679c\u5403\uff0c\u4ed6\u9700\u8981\u5728\u6bcf\u4e00\u4e2a\u623f\u95f4\u5404\u653e\u81f3\u5c11\u591a\u5c11\u4e2a\u7cd6\u679c\u3002 //\u56e0\u4e3a\u677e\u9f20\u53c2\u89c2\u6307\u5357\u4e0a\u7684\u6700\u540e\u4e00\u4e2a\u623f\u95f4an\u662f\u9910\u5385\uff0c\u9910\u5385\u91cc\u4ed6\u51c6\u5907\u4e86\u4e30\u76db\u7684\u5927\u9910\uff0c\u6240\u4ee5\u5f53\u7ef4\u5c3c\u5728\u53c2\u89c2\u7684\u6700\u540e\u5230\u8fbe\u9910\u5385\u65f6\u5c31\u4e0d\u9700\u8981\u518d\u62ff\u7cd6\u679c\u5403\u4e86\u3002 //\u8f93\u5165\u683c\u5f0f //\u7b2c\u4e00\u884c\u4e00\u4e2a\u6574\u6570n\uff0c\u8868\u793a\u623f\u95f4\u4e2a\u6570\u7b2c\u4e8c\u884cn\u4e2a\u6574\u6570\uff0c\u4f9d\u6b21\u63cf\u8ff0a1 - an //\u63a5\u4e0b\u6765n - 1\u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570x\uff0cy\uff0c\u8868\u793a\u6807\u53f7x\u548cy\u7684\u4e24\u4e2a\u623f\u95f4\u4e4b\u95f4\u6709\u6811\u679d\u76f8\u8fde\u3002 //\u8f93\u51fa\u683c\u5f0f //\u4e00\u5171n\u884c\uff0c\u7b2ci\u884c\u8f93\u51fa\u6807\u53f7\u4e3ai\u7684\u623f\u95f4\u81f3\u5c11\u9700\u8981\u653e\u591a\u5c11\u4e2a\u7cd6\u679c\uff0c\u624d\u80fd\u8ba9\u7ef4\u5c3c\u6709\u7cd6\u679c\u5403\u3002 // //\u8f93\u5165\uff1a //5 //1 4 5 3 2 //1 2 //2 4 //2 3 //4 5 // //\u8f93\u51fa\uff1a //1 //2 //1 //2 //1 //#pragma warning(disable:4996) //#include<iostream> //#include <cstdio> //#include <cstring> //#include<algorithm> //using namespace std; //struct node { // int next, to; //}; node edge[600010]; //int n, cnt; //int a[300010], head[600010], deep[300010], p[300010][25], sum[300010]; // //void change(int &a, int &b) //{ // int t = a; a = b; b = t; //} // //void add(int a, int b)//\u94fe\u5f0f\u524d\u5411\u661f\u52a0\u8fb9 //{ // edge[++cnt].to = b; // edge[cnt].next = head[a]; // head[a] = cnt; //} // //void dfs(int a, int fa) //{ // deep[a] = deep[fa] + 1;//\u6df1\u5ea6 // p[a][0] = fa; // for (int i = 1; (1 << i) <= deep[a]; i++) // p[a][i] = p[p[a][i - 1]][i - 1];//RMQ\u9884\u5904\u7406\u4ee5\u627eLCA // for (int i = head[a]; i; i = edge[i].next) // { // int v = edge[i].to; // if (v != fa) // dfs(v, a); // } //} // //int lca(int a, int b) //{ // if (deep[a] > deep[b]) change(a, b); // for (int i = 20; i >= 0; i--) // { // if (deep[a] <= deep[b] - (1 << i)) // { // //printf(\"a=%d %d %d\\n\",a,b,i); // b = p[b][i];//\u540c\u4e00\u9ad8\u5ea6 // } // } // //printf(\"%d %d\\n\",a,b); // if (a == b) return a; // for (int i = 20; i >= 0; i--) // { // if (p[a][i] != p[b][i]) // a = p[a][i], b = p[b][i]; // } // //printf(\"a=%d\\n\",a); // return p[a][0]; //} //void search(int a) //{ // for (int i = head[a]; i; i = edge[i].next) // { // int v = edge[i].to; // if (v == p[a][0]) continue; // search(v); // sum[a] += sum[v];//\u5b50\u6811\u548c // } //} //int main() //{ // scanf(\"%d\", &n); // for (int i = 1; i <= n; i++) // scanf(\"%d\", &a[i]); // for (int i = 1; i <= n - 1; i++) // { // int u, v; // scanf(\"%d%d\", &u, &v); // add(u, v); // add(v, u); // } // dfs(1, 0);//\u9884\u5904\u7406\u500d\u589e\u6570\u7ec4 // for (int i = 1; i <= n - 1; i++) // { // int x = a[i], y = a[i + 1], LCA = lca(x, y);//\u8868\u793a\u4ecex\u8d70\u5230y\u7684\u8def\u5f84 // //printf(\"lca=%d\\n\",LCA); // sum[x]++; // sum[y]++; // sum[LCA]--; // sum[p[LCA][0]]--; // }//\u70b9\u5dee\u5206\u6838\u5fc3\u4ee3\u7801\uff1a\u8d77\u70b9\u7ec8\u70b9++\uff0c\u516c\u5171\u7956\u5148\u53ca\u7956\u5148\u7236\u4eb2-- // search(1);//\u6c42\u51fa\u5404\u70b9\u5b50\u6811\u548c // for (int i = 2; i <= n; i++) // sum[a[i]]--;//\u6bcf\u6b21\u8ba1\u7b97\u65b0\u7684\u8def\u5f84\uff0c\u9664\u4e86\u7b2c\u4e00\u4e2a\u8def\u5f84\u7684\u8d77\u70b9\uff0c\u5176\u4ed6\u8def\u5f84\u7684\u8d77\u70b9\u548c\u4e0a\u4e00\u6b21\u8def\u5f84\u7684\u7ec8\u70b9\u90fd\u91cd\u590d\u8ba1\u7b97\u4e86\u4e00\u6b21\uff0c\u5e94\u8be5-- // for (int i = 1; i <= n; i++) // printf(\"%d\\n\", sum[i]); // system(\"pause\"); // return 0; //} //\u9898\u76ee\u5927\u610f\uff1a\u7ed9\u51fa\u4e00\u68f5\u6811\uff0cn(n<=5w)\u4e2a\u8282\u70b9\uff0ck(k<=10w)\u6b21\u4fee\u6539\uff0c\u6bcf\u6b21\u7ed9\u5b9as\u548ct\uff0c\u628as\u5230t\u7684\u8def\u5f84\u4e0a\u7684\u70b9\u6743+1\uff0c\u95eek\u6b21\u64cd\u4f5c\u540e\u6700\u5927\u70b9\u6743\u3002 //FJ\u7ed9\u4ed6\u7684\u725b\u68da\u7684N(2\u2264N\u226450,000)\u4e2a\u9694\u95f4\u4e4b\u95f4\u5b89\u88c5\u4e86N-1\u6839\u7ba1\u9053\uff0c\u9694\u95f4\u7f16\u53f7\u4ece1\u5230N\u3002\u6240\u6709\u9694\u95f4\u90fd\u88ab\u7ba1\u9053\u8fde\u901a\u4e86\u3002 //FJ\u6709K(1\u2264K\u2264100, 000)\u6761\u8fd0\u8f93\u725b\u5976\u7684\u8def\u7ebf\uff0c\u7b2ci\u6761\u8def\u7ebf\u4ece\u9694\u95f4si\u8fd0\u8f93\u5230\u9694\u95f4ti\u3002 //\u4e00\u6761\u8fd0\u8f93\u8def\u7ebf\u4f1a\u7ed9\u5b83\u7684\u4e24\u4e2a\u7aef\u70b9\u5904\u7684\u9694\u95f4\u4ee5\u53ca\u4e2d\u95f4\u9014\u5f84\u7684\u6240\u6709\u9694\u95f4\u5e26\u6765\u4e00\u4e2a\u5355\u4f4d\u7684\u8fd0\u8f93\u538b\u529b\uff0c\u4f60\u9700\u8981\u8ba1\u7b97\u538b\u529b\u6700\u5927\u7684\u9694\u95f4\u7684\u538b\u529b\u662f\u591a\u5c11\u3002 //\u5bf9\u4e8e\u6bcf\u6b21\u4fee\u6539\uff0c\u7ed9s\u548ct\u7684\u70b9\u6743 + 1\uff0c\u7ed9lca(s, t)\u548clca(s, t)\u7684\u7236\u4eb2\u7684\u70b9\u6743 - 1\uff0c\u6bcf\u4e00\u4e2a\u70b9\u7684\u6743\u5c31\u662f\u5b83\u4e0e\u5b83\u7684\u5b50\u6811\u6743\u548c //The first line of the input contains N and K //The next N - 1 lines each contain two integers x and y\uff08x\u2260y) describing a pipe between stalls x and y //The next K lines each contain two integers s and tdescribing the endpoint //stalls of a path through which milk is being pumped. //ouput:An integer specifying the maximum amount of milk pumped through any stall in the barn. //\u8f93\u5165\uff1a //5 10 //3 4 //1 5 //4 2 //5 4 //5 4 //5 4 //3 5 //4 3 //4 3 //1 3 //3 5 //5 4 //1 5 //3 4 // //\u8f93\u51fa\uff1a //9 //#pragma warning(disable:4996) //#include<iostream> //#include<cstdio> //#include<cstring> //#include<algorithm> //#define fsb(a,b,c) for (int a=b;a<=c;a++) //#define maxn 50100 //#define maxm 100100 //#define mem(a,b) memset(a,b,sizeof(a)) //#define max(a,b) ((a)>(b)?(a):(b)) //using namespace std; // //struct edge //{ // int v, next; //}a[maxn * 2]; //int n, m, x, y, head[maxn], cnt = 0, cntb = 0, headb[maxn], fa[maxn], vis[maxn], dlt[maxn], faa[maxn], maxx = 0; // //struct qus //{ // int v, next, mark; //}b[maxm * 2]; // //struct ablca //{ // int x, y, z; //}ans[maxm]; // //inline void adda(int x, int y)//\u94fe\u5f0f\u524d\u5411\u661f\u52a0\u8fb9 //{ // a[++cnt].v = y; // a[cnt].next = head[x]; // head[x] = cnt; //} // //inline void addb(int x, int y, int z) //{ // b[++cntb].v = y; b[cntb].mark = z; b[cntb].next = headb[x]; headb[x] = cntb; //} // //inline int getf(int x) { // return x == fa[x] ? x : fa[x] = getf(fa[x]); //} //inline void dfs1(int u, int f) //{//tarjan\u6c42lca // faa[u] = f; // for (int t = headb[u]; t != -1; t = b[t].next) { // int v = b[t].v; // if (vis[v]) ans[b[t].mark].z = getf(v); // } // // printf(\"%d \",u); // vis[u] = 1; // for (int t = head[u]; t != -1; t = a[t].next) { // int v = a[t].v; if (v == f) continue; // dfs1(v, u); // int fau = getf(u), fav = getf(v); // if (fau != fav) fa[fav] = fau; // } //} // //inline int dfs2(int u) { // int now = dlt[u], ans = 0; // for (int t = head[u]; t != -1; t = a[t].next) { // int v = a[t].v; if (v == faa[u]) continue; // now += dfs2(v);//now\u8bb0\u5f55\u70b9u\u7684\u4fee\u6539\u540e\u70b9\u6743 // } // maxx = max(maxx, now); // return now; //} //int main() { // // freopen(\"std.in\",\"r\",stdin); // scanf(\"%d%d\", &n, &m); // mem(head, 255); // fsb(i, 1, n - 1) // { // scanf(\"%d%d\", &x, &y); // adda(x, y); // adda(y, x); // } // mem(headb, 255); // fsb(i, 1, m) // { // scanf(\"%d%d\", &ans[i].x, &ans[i].y); // addb(ans[i].x, ans[i].y, i); // addb(ans[i].y, ans[i].x, i); // } // fsb(i, 1, n) fa[i] = i; mem(vis, 0); // dfs1(1, 0); mem(dlt, 0); // fsb(i, 1, m) // { // dlt[ans[i].x]++; // dlt[ans[i].y]++; // dlt[ans[i].z]--; // dlt[faa[ans[i].z]]--; // } // // printf(\"!!!\\n\"); // n = dfs2(1); // printf(\"%d\\n\", maxx); // return 0; //} //\u8fb9\u5dee\u5206\uff1a\u627e\u6240\u6709\u8def\u5f84\u5171\u540c\u8986\u76d6\u7684\u8fb9 //\u516c\u51432044\u5e74\uff0c\u4eba\u7c7b\u8fdb\u5165\u4e86\u5b87\u5b99\u7eaa\u5143\u3002 //L \u56fd\u6709n\u4e2a\u661f\u7403\uff0c\u8fd8\u6709n-1\u6761\u53cc\u5411\u822a\u9053\uff0c\u6bcf\u6761\u822a\u9053\u5efa\u7acb\u5728\u4e24\u4e2a\u661f\u7403\u4e4b\u95f4\uff0c\u8fd9n-1\u6761\u822a\u9053\u8fde\u901a\u4e86L\u56fd\u7684\u6240\u6709\u661f\u7403\u3002 //\u5c0f P \u638c\u7ba1\u4e00\u5bb6\u7269\u6d41\u516c\u53f8\uff0c \u8be5\u516c\u53f8\u6709\u5f88\u591a\u4e2a\u8fd0\u8f93\u8ba1\u5212\uff0c\u6bcf\u4e2a\u8fd0\u8f93\u8ba1\u5212\u5f62\u5982\uff1a\u6709\u4e00\u8258\u7269\u6d41\u98de\u8239\u9700\u8981\u4eceui\u53f7\u661f\u7403\u6cbf\u6700\u5feb\u7684\u5b87\u822a\u8def\u5f84\u98de\u884c\u5230vi\u53f7\u661f\u7403\u53bb\u3002 //\u663e\u7136\uff0c\u98de\u8239\u9a76\u8fc7\u4e00\u6761\u822a\u9053\u662f\u9700\u8981\u65f6\u95f4\u7684\uff0c\u5bf9\u4e8e\u822a\u9053j, \u4efb\u610f\u98de\u8239\u9a76\u8fc7\u5b83\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u4e3atj, \u5e76\u4e14\u4efb\u610f\u4e24\u8258\u98de\u8239\u4e4b\u95f4\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u5e72\u6270\u3002 //\u4e3a\u4e86\u9f13\u52b1\u79d1\u6280\u521b\u65b0\uff0cL\u56fd\u56fd\u738b\u540c\u610f\u5c0fP\u7684\u7269\u6d41\u516c\u53f8\u53c2\u4e0eL \u56fd\u7684\u822a\u9053\u5efa\u8bbe\uff0c\u5373\u5141\u8bb8\u5c0fP\u628a\u67d0\u4e00\u6761\u822a\u9053\u6539\u9020\u6210\u866b\u6d1e\uff0c\u98de\u8239\u9a76\u8fc7\u866b\u6d1e\u4e0d\u6d88\u8017\u65f6\u95f4\u3002 //\u5728\u866b\u6d1e\u7684\u5efa\u8bbe\u5b8c\u6210\u524d\u5c0fP\u7684\u7269\u6d41\u516c\u53f8\u5c31\u9884\u63a5\u4e86m\u4e2a\u8fd0\u8f93\u8ba1\u5212\u3002\u5728\u866b\u6d1e\u5efa\u8bbe\u5b8c\u6210\u540e\uff0c\u8fd9m\u4e2a\u8fd0\u8f93\u8ba1\u5212\u4f1a\u540c\u65f6\u5f00\u59cb\uff0c\u6240\u6709\u98de\u8239\u4e00\u8d77\u51fa\u53d1\u3002\u5f53\u8fd9m\u4e2a\u8fd0\u8f93\u8ba1\u5212\u90fd\u5b8c\u6210\u65f6\uff0c\u5c0fp\u7684\u7269\u6d41\u516c\u53f8\u7684\u9636\u6bb5\u6027\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e86\u3002 //\u5982\u679c\u5c0fP \u53ef\u4ee5\u81ea\u7531\u9009\u62e9\u5c06\u54ea\u4e00\u6761\u822a\u9053\u6539\u9020\u6210\u866b\u6d1e\uff0c \u8bd5\u6c42\u51fa\u5c0fP\u7684\u7269\u6d41\u516c\u53f8\u5b8c\u6210\u9636\u6bb5\u6027\u5de5\u4f5c\u6240\u9700\u8981\u7684\u6700\u77ed\u65f6\u95f4\u662f\u591a\u5c11\uff1f //\u7b2c\u4e00\u884c\u5305\u62ec\u4e24\u4e2a\u6b63\u6574\u6570n,m, \u8868\u793aL \u56fd\u4e2d\u661f\u7403\u7684\u6570\u91cf\u53ca\u5c0fP\u516c\u53f8\u9884\u63a5\u7684\u8fd0\u8f93\u8ba1\u5212\u7684\u6570\u91cf\uff0c\u661f\u7403\u4ece1\u5230n\u7f16\u53f7 //\u63a5\u4e0b\u6765n\u22121 \u884c\u63cf\u8ff0\u822a\u9053\u7684\u5efa\u8bbe\u60c5\u51b5\uff0c\u5176\u4e2d\u7b2ci \u884c\u5305\u542b\u4e09\u4e2a\u6574\u6570ai,bi\u548cti\uff0c\u8868\u793a\u7b2ci \u6761\u53cc\u5411\u822a\u9053\u4fee\u5efa\u5728ai\u4e0ebi\u4e24\u4e2a\u661f\u7403\u4e4b\u95f4\uff0c\u4efb\u610f\u98de\u8239\u9a76\u8fc7\u5b83\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u4e3ati\u3002 //\u6570\u636e\u4fdd\u8bc11\u2264ai, bi\u2264n \u4e140\u2264ti\u22641000\u3002 //\u63a5\u4e0b\u6765m \u884c\u63cf\u8ff0\u8fd0\u8f93\u8ba1\u5212\u7684\u60c5\u51b5\uff0c\u5176\u4e2d\u7b2cj \u884c\u5305\u542b\u4e24\u4e2a\u6b63\u6574\u6570uj\u548cvj\uff0c\u8868\u793a\u7b2cj \u4e2a\u8fd0\u8f93\u8ba1\u5212\u662f\u4eceuj\u53f7\u661f\u7403\u98de\u5f80vj\u53f7\u661f\u7403\u3002\u6570\u636e\u4fdd\u8bc11\u2264ui, vi\u2264n //\u8f93\u51fa\uff1a\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u5c0fp\u7684\u7269\u6d41\u516c\u53f8\u5b8c\u6210\u9636\u6bb5\u6027\u5de5\u4f5c\u6240\u9700\u8981\u7684\u6700\u77ed\u65f6\u95f4\u3002 // //\u8f93\u5165\uff1a //6 3 //1 2 3 //1 6 4 //3 1 7 //4 3 6 //3 5 5 //3 6 //2 5 //4 5 //\u8f93\u51fa\uff1a //11 #pragma warning(disable:4996) #include<algorithm> #include<iostream> #include<stdio.h> #include<cstring> using namespace std; struct node { int next, to, val; }edge[600010]; struct truck { int s, t, lca; }; truck node[300010]; int n, m, p, flag, cnt, maxn; int head[300010], deep[300010], f[300010][25], dis[300010], pre[300010], sum[300010]; void change(int &a, int &b) { int t = a; a = b; b = t; } void add(int a, int b, int c)//\u94fe\u5f0f\u524d\u5411\u661f\u52a0\u8fb9 { edge[++p].to = b; edge[p].next = head[a]; edge[p].val = c; head[a] = p; } void dfs(int a, int fa)//\u9884\u5904\u7406\u500d\u589e\u6570\u7ec4 { deep[a] = deep[fa] + 1; f[a][0] = fa; for (int i = 1; i <= 20; i++) f[a][i] = f[f[a][i - 1]][i - 1]; for (int i = head[a]; i; i = edge[i].next) { int v = edge[i].to; if (v == fa) continue; dis[v] = dis[a] + edge[i].val; pre[v] = edge[i].val; dfs(v, a); } } int getlca(int a, int b) { if (deep[a] > deep[b]) change(a, b); for (int i = 20; i >= 0; i--) { if (deep[a] <= deep[f[b][i]]) b = f[b][i]; } if (a == b) return a; for (int i = 20; i >= 0; i--) if (f[a][i] != f[b][i]) { a = f[a][i]; b = f[b][i]; } return f[a][0]; } int judge(int a, int fa, int cnt, int maxn)//\u5b50\u6811\u6c42\u548c { int nsum = sum[a]; for (int i = head[a]; i; i = edge[i].next) { int v = edge[i].to; if (v == fa) continue; nsum += judge(v, a, cnt, maxn); }//\u5b58\u5728\u5f53\u524d\u5bf9\u5e94\u8fb9\u6570\u7ecf\u8fc7\u7684\u6b21\u6570\u5e94\u8be5\u5927\u4e8e\u6240\u6709\u8d85\u65f6\u7684\u8def\u5f84\u6570\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01 if (nsum >= cnt && pre[a] >= maxn) //a\u5bf9\u5e94\u7684\u8fb9\u7684\u65f6\u95f4\u5927\u4e8e\u4e0d\u591f\u7684\u65f6\u95f4\uff0c\u53d8\u6210\u866b\u6d1e\u540e\u5373\u53ef\u7701\u6389\u8fd9\u4e48\u591a\u65f6\u95f4\uff0c\u8fd4\u56de\u771f\u503c flag = 1; return nsum; } int check(long long limit)//\u5224\u65ad\u5f53\u524d\u8bbe\u7684\u65f6\u95f4\u662f\u5426\u80fd\u5b8c\u6210\u6240\u6709\u4efb\u52a1 { memset(sum, 0, sizeof(sum)); cnt = 0, flag = 0, maxn = 0; for (int i = 1; i <= m; i++) if (dis[node[i].s] + dis[node[i].t] - 2 * dis[node[i].lca] > limit) { sum[node[i].s]++, sum[node[i].t]++, sum[node[i].lca] -= 2;//\u8fb9\u5dee\u5206\u5904\u7406\u6838\u5fc3\u4ee3\u7801 cnt++; maxn = max(maxn, dis[node[i].s] + dis[node[i].t] - 2 * dis[node[i].lca]); } if (cnt == 0) return 1;//\u65f6\u95f4\u592a\u957f\uff0c\u5fc5\u5b9a\u5b8c\u6210 int wsb = judge(1, 0, cnt, maxn - limit);//\u5224\u65ad\u4e0d\u591f\u7684\u65f6\u95f4\u80fd\u5426\u901a\u8fc7\u866b\u6d1e\u6539\u53d8\u800c\u4f7f\u5176\u5728\u5f53\u524d\u65f6\u95f4\u5185\u5b8c\u6210\u4efb\u52a1 return flag; } int main() { scanf(\"%d%d\", &n, &m); for (int i = 1; i <= n - 1; i++) { int a, b, c; scanf(\"%d%d%d\", &a, &b, &c); add(a, b, c); add(b, a, c); } dfs(1, 0); for (int i = 1; i <= m; i++) { scanf(\"%d%d\", &node[i].s, &node[i].t); node[i].lca = getlca(node[i].s, node[i].t); } long long l = 0, r = 3000000000; while (l + 1 < r) { int mid = (l + r) / 2; if (check(mid)) r = mid; else l = mid; } if (check(l)) printf(\"%lld\\n\", l); else printf(\"%lld\\n\", r); return 0; }","title":"\u6811\u4e0a\u5dee\u5206"},{"location":"DataStructure/tree/treediff/#_1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 //\u5dee\u5206\u6570\u7ec4\uff1aO(1)\u4fee\u6539\u533a\u95f4,O(n)\u67e5\u8be2\uff0c\u5dee\u5206\u6570\u7ec4\u7684\u524d\u7f00\u548c\u6570\u7ec4\u5373\u4e3a\u539f\u6570\u7ec4 //\u6811\u4e0a\u5dee\u5206\u7ef4\u62a4\u7684\u5dee\u5206\u5bf9\u5e94\u7684\u94fe\u4e3ax\u5230\u6839\u8282\u70b9\u7684\u94fe\uff0c\u6811\u4e0a\u5dee\u5206\u7684\u67e5\u8be2\u5373\u9488\u5bf9\u5b50\u6811\u548c\u7684\u641c\u7d22\u67e5\u8be2 //\u5173\u4e8e\u70b9\u7684\u5dee\u5206\uff1a\u6240\u6709\u8def\u5f84\u67d0\u70b9\u88ab\u7ecf\u8fc7\u7684\u6b21\u6570\u3001\u4fee\u6539\u4e24\u70b9\u95f4\u8def\u5f84\u6240\u6709\u70b9\u7684\u6743\u503c //\u9898\u76ee\u63cf\u8ff0 //\u677e\u9f20\u7684\u65b0\u5bb6\u662f\u4e00\u68f5\u6811\uff0c\u524d\u51e0\u5929\u521a\u521a\u88c5\u4fee\u4e86\u65b0\u5bb6\uff0c\u65b0\u5bb6\u6709n\u4e2a\u623f\u95f4\uff0c\u5e76\u4e14\u6709n - 1\u6839\u6811\u679d\u8fde\u63a5\uff0c\u6bcf\u4e2a\u623f\u95f4\u90fd\u53ef\u4ee5\u76f8\u4e92\u5230\u8fbe\uff0c\u4e14\u4fe9\u4e2a\u623f\u95f4\u4e4b\u95f4\u7684\u8def\u7ebf\u90fd\u662f\u552f\u4e00\u7684\u3002\u5929\u54ea\uff0c\u4ed6\u5c45\u7136\u771f\u7684\u4f4f\u5728\u201d\u6811\u201c\u4e0a\u3002 //\u677e\u9f20\u60f3\u9080\u8bf7\u5c0f\u718a\u7ef4\u5c3c\u524d\u6765\u53c2\u89c2\uff0c\u5e76\u4e14\u8fd8\u6307\u5b9a\u4e00\u4efd\u53c2\u89c2\u6307\u5357\uff0c\u4ed6\u5e0c\u671b\u7ef4\u5c3c\u80fd\u591f\u6309\u7167\u4ed6\u7684\u6307\u5357\u987a\u5e8f\uff0c\u5148\u53bba1\uff0c\u518d\u53bba2\uff0c......\uff0c\u6700\u540e\u5230an\uff0c\u53bb\u53c2\u89c2\u65b0\u5bb6\u3002 //\u53ef\u662f\u8fd9\u6837\u4f1a\u5bfc\u81f4\u7ef4\u5c3c\u91cd\u590d\u8d70\u5f88\u591a\u623f\u95f4\uff0c\u61d2\u60f0\u7684\u7ef4\u5c3c\u4e0d\u505c\u5730\u63a8\u8f9e\u3002\u53ef\u662f\u677e\u9f20\u544a\u8bc9\u4ed6\uff0c\u6bcf\u8d70\u5230\u4e00\u4e2a\u623f\u95f4\uff0c\u4ed6\u5c31\u53ef\u4ee5\u4ece\u623f\u95f4\u62ff\u4e00\u5757\u7cd6\u679c\u5403\u3002 //\u7ef4\u5c3c\u662f\u4e2a\u998b\u5bb6\u4f19\uff0c\u7acb\u9a6c\u5c31\u7b54\u5e94\u4e86\u3002\u73b0\u5728\u677e\u9f20\u5e0c\u671b\u77e5\u9053\u4e3a\u4e86\u4fdd\u8bc1\u7ef4\u5c3c\u6709\u7cd6\u679c\u5403\uff0c\u4ed6\u9700\u8981\u5728\u6bcf\u4e00\u4e2a\u623f\u95f4\u5404\u653e\u81f3\u5c11\u591a\u5c11\u4e2a\u7cd6\u679c\u3002 //\u56e0\u4e3a\u677e\u9f20\u53c2\u89c2\u6307\u5357\u4e0a\u7684\u6700\u540e\u4e00\u4e2a\u623f\u95f4an\u662f\u9910\u5385\uff0c\u9910\u5385\u91cc\u4ed6\u51c6\u5907\u4e86\u4e30\u76db\u7684\u5927\u9910\uff0c\u6240\u4ee5\u5f53\u7ef4\u5c3c\u5728\u53c2\u89c2\u7684\u6700\u540e\u5230\u8fbe\u9910\u5385\u65f6\u5c31\u4e0d\u9700\u8981\u518d\u62ff\u7cd6\u679c\u5403\u4e86\u3002 //\u8f93\u5165\u683c\u5f0f //\u7b2c\u4e00\u884c\u4e00\u4e2a\u6574\u6570n\uff0c\u8868\u793a\u623f\u95f4\u4e2a\u6570\u7b2c\u4e8c\u884cn\u4e2a\u6574\u6570\uff0c\u4f9d\u6b21\u63cf\u8ff0a1 - an //\u63a5\u4e0b\u6765n - 1\u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570x\uff0cy\uff0c\u8868\u793a\u6807\u53f7x\u548cy\u7684\u4e24\u4e2a\u623f\u95f4\u4e4b\u95f4\u6709\u6811\u679d\u76f8\u8fde\u3002 //\u8f93\u51fa\u683c\u5f0f //\u4e00\u5171n\u884c\uff0c\u7b2ci\u884c\u8f93\u51fa\u6807\u53f7\u4e3ai\u7684\u623f\u95f4\u81f3\u5c11\u9700\u8981\u653e\u591a\u5c11\u4e2a\u7cd6\u679c\uff0c\u624d\u80fd\u8ba9\u7ef4\u5c3c\u6709\u7cd6\u679c\u5403\u3002 // //\u8f93\u5165\uff1a //5 //1 4 5 3 2 //1 2 //2 4 //2 3 //4 5 // //\u8f93\u51fa\uff1a //1 //2 //1 //2 //1 //#pragma warning(disable:4996) //#include<iostream> //#include <cstdio> //#include <cstring> //#include<algorithm> //using namespace std; //struct node { // int next, to; //}; node edge[600010]; //int n, cnt; //int a[300010], head[600010], deep[300010], p[300010][25], sum[300010]; // //void change(int &a, int &b) //{ // int t = a; a = b; b = t; //} // //void add(int a, int b)//\u94fe\u5f0f\u524d\u5411\u661f\u52a0\u8fb9 //{ // edge[++cnt].to = b; // edge[cnt].next = head[a]; // head[a] = cnt; //} // //void dfs(int a, int fa) //{ // deep[a] = deep[fa] + 1;//\u6df1\u5ea6 // p[a][0] = fa; // for (int i = 1; (1 << i) <= deep[a]; i++) // p[a][i] = p[p[a][i - 1]][i - 1];//RMQ\u9884\u5904\u7406\u4ee5\u627eLCA // for (int i = head[a]; i; i = edge[i].next) // { // int v = edge[i].to; // if (v != fa) // dfs(v, a); // } //} // //int lca(int a, int b) //{ // if (deep[a] > deep[b]) change(a, b); // for (int i = 20; i >= 0; i--) // { // if (deep[a] <= deep[b] - (1 << i)) // { // //printf(\"a=%d %d %d\\n\",a,b,i); // b = p[b][i];//\u540c\u4e00\u9ad8\u5ea6 // } // } // //printf(\"%d %d\\n\",a,b); // if (a == b) return a; // for (int i = 20; i >= 0; i--) // { // if (p[a][i] != p[b][i]) // a = p[a][i], b = p[b][i]; // } // //printf(\"a=%d\\n\",a); // return p[a][0]; //} //void search(int a) //{ // for (int i = head[a]; i; i = edge[i].next) // { // int v = edge[i].to; // if (v == p[a][0]) continue; // search(v); // sum[a] += sum[v];//\u5b50\u6811\u548c // } //} //int main() //{ // scanf(\"%d\", &n); // for (int i = 1; i <= n; i++) // scanf(\"%d\", &a[i]); // for (int i = 1; i <= n - 1; i++) // { // int u, v; // scanf(\"%d%d\", &u, &v); // add(u, v); // add(v, u); // } // dfs(1, 0);//\u9884\u5904\u7406\u500d\u589e\u6570\u7ec4 // for (int i = 1; i <= n - 1; i++) // { // int x = a[i], y = a[i + 1], LCA = lca(x, y);//\u8868\u793a\u4ecex\u8d70\u5230y\u7684\u8def\u5f84 // //printf(\"lca=%d\\n\",LCA); // sum[x]++; // sum[y]++; // sum[LCA]--; // sum[p[LCA][0]]--; // }//\u70b9\u5dee\u5206\u6838\u5fc3\u4ee3\u7801\uff1a\u8d77\u70b9\u7ec8\u70b9++\uff0c\u516c\u5171\u7956\u5148\u53ca\u7956\u5148\u7236\u4eb2-- // search(1);//\u6c42\u51fa\u5404\u70b9\u5b50\u6811\u548c // for (int i = 2; i <= n; i++) // sum[a[i]]--;//\u6bcf\u6b21\u8ba1\u7b97\u65b0\u7684\u8def\u5f84\uff0c\u9664\u4e86\u7b2c\u4e00\u4e2a\u8def\u5f84\u7684\u8d77\u70b9\uff0c\u5176\u4ed6\u8def\u5f84\u7684\u8d77\u70b9\u548c\u4e0a\u4e00\u6b21\u8def\u5f84\u7684\u7ec8\u70b9\u90fd\u91cd\u590d\u8ba1\u7b97\u4e86\u4e00\u6b21\uff0c\u5e94\u8be5-- // for (int i = 1; i <= n; i++) // printf(\"%d\\n\", sum[i]); // system(\"pause\"); // return 0; //} //\u9898\u76ee\u5927\u610f\uff1a\u7ed9\u51fa\u4e00\u68f5\u6811\uff0cn(n<=5w)\u4e2a\u8282\u70b9\uff0ck(k<=10w)\u6b21\u4fee\u6539\uff0c\u6bcf\u6b21\u7ed9\u5b9as\u548ct\uff0c\u628as\u5230t\u7684\u8def\u5f84\u4e0a\u7684\u70b9\u6743+1\uff0c\u95eek\u6b21\u64cd\u4f5c\u540e\u6700\u5927\u70b9\u6743\u3002 //FJ\u7ed9\u4ed6\u7684\u725b\u68da\u7684N(2\u2264N\u226450,000)\u4e2a\u9694\u95f4\u4e4b\u95f4\u5b89\u88c5\u4e86N-1\u6839\u7ba1\u9053\uff0c\u9694\u95f4\u7f16\u53f7\u4ece1\u5230N\u3002\u6240\u6709\u9694\u95f4\u90fd\u88ab\u7ba1\u9053\u8fde\u901a\u4e86\u3002 //FJ\u6709K(1\u2264K\u2264100, 000)\u6761\u8fd0\u8f93\u725b\u5976\u7684\u8def\u7ebf\uff0c\u7b2ci\u6761\u8def\u7ebf\u4ece\u9694\u95f4si\u8fd0\u8f93\u5230\u9694\u95f4ti\u3002 //\u4e00\u6761\u8fd0\u8f93\u8def\u7ebf\u4f1a\u7ed9\u5b83\u7684\u4e24\u4e2a\u7aef\u70b9\u5904\u7684\u9694\u95f4\u4ee5\u53ca\u4e2d\u95f4\u9014\u5f84\u7684\u6240\u6709\u9694\u95f4\u5e26\u6765\u4e00\u4e2a\u5355\u4f4d\u7684\u8fd0\u8f93\u538b\u529b\uff0c\u4f60\u9700\u8981\u8ba1\u7b97\u538b\u529b\u6700\u5927\u7684\u9694\u95f4\u7684\u538b\u529b\u662f\u591a\u5c11\u3002 //\u5bf9\u4e8e\u6bcf\u6b21\u4fee\u6539\uff0c\u7ed9s\u548ct\u7684\u70b9\u6743 + 1\uff0c\u7ed9lca(s, t)\u548clca(s, t)\u7684\u7236\u4eb2\u7684\u70b9\u6743 - 1\uff0c\u6bcf\u4e00\u4e2a\u70b9\u7684\u6743\u5c31\u662f\u5b83\u4e0e\u5b83\u7684\u5b50\u6811\u6743\u548c //The first line of the input contains N and K //The next N - 1 lines each contain two integers x and y\uff08x\u2260y) describing a pipe between stalls x and y //The next K lines each contain two integers s and tdescribing the endpoint //stalls of a path through which milk is being pumped. //ouput:An integer specifying the maximum amount of milk pumped through any stall in the barn. //\u8f93\u5165\uff1a //5 10 //3 4 //1 5 //4 2 //5 4 //5 4 //5 4 //3 5 //4 3 //4 3 //1 3 //3 5 //5 4 //1 5 //3 4 // //\u8f93\u51fa\uff1a //9 //#pragma warning(disable:4996) //#include<iostream> //#include<cstdio> //#include<cstring> //#include<algorithm> //#define fsb(a,b,c) for (int a=b;a<=c;a++) //#define maxn 50100 //#define maxm 100100 //#define mem(a,b) memset(a,b,sizeof(a)) //#define max(a,b) ((a)>(b)?(a):(b)) //using namespace std; // //struct edge //{ // int v, next; //}a[maxn * 2]; //int n, m, x, y, head[maxn], cnt = 0, cntb = 0, headb[maxn], fa[maxn], vis[maxn], dlt[maxn], faa[maxn], maxx = 0; // //struct qus //{ // int v, next, mark; //}b[maxm * 2]; // //struct ablca //{ // int x, y, z; //}ans[maxm]; // //inline void adda(int x, int y)//\u94fe\u5f0f\u524d\u5411\u661f\u52a0\u8fb9 //{ // a[++cnt].v = y; // a[cnt].next = head[x]; // head[x] = cnt; //} // //inline void addb(int x, int y, int z) //{ // b[++cntb].v = y; b[cntb].mark = z; b[cntb].next = headb[x]; headb[x] = cntb; //} // //inline int getf(int x) { // return x == fa[x] ? x : fa[x] = getf(fa[x]); //} //inline void dfs1(int u, int f) //{//tarjan\u6c42lca // faa[u] = f; // for (int t = headb[u]; t != -1; t = b[t].next) { // int v = b[t].v; // if (vis[v]) ans[b[t].mark].z = getf(v); // } // // printf(\"%d \",u); // vis[u] = 1; // for (int t = head[u]; t != -1; t = a[t].next) { // int v = a[t].v; if (v == f) continue; // dfs1(v, u); // int fau = getf(u), fav = getf(v); // if (fau != fav) fa[fav] = fau; // } //} // //inline int dfs2(int u) { // int now = dlt[u], ans = 0; // for (int t = head[u]; t != -1; t = a[t].next) { // int v = a[t].v; if (v == faa[u]) continue; // now += dfs2(v);//now\u8bb0\u5f55\u70b9u\u7684\u4fee\u6539\u540e\u70b9\u6743 // } // maxx = max(maxx, now); // return now; //} //int main() { // // freopen(\"std.in\",\"r\",stdin); // scanf(\"%d%d\", &n, &m); // mem(head, 255); // fsb(i, 1, n - 1) // { // scanf(\"%d%d\", &x, &y); // adda(x, y); // adda(y, x); // } // mem(headb, 255); // fsb(i, 1, m) // { // scanf(\"%d%d\", &ans[i].x, &ans[i].y); // addb(ans[i].x, ans[i].y, i); // addb(ans[i].y, ans[i].x, i); // } // fsb(i, 1, n) fa[i] = i; mem(vis, 0); // dfs1(1, 0); mem(dlt, 0); // fsb(i, 1, m) // { // dlt[ans[i].x]++; // dlt[ans[i].y]++; // dlt[ans[i].z]--; // dlt[faa[ans[i].z]]--; // } // // printf(\"!!!\\n\"); // n = dfs2(1); // printf(\"%d\\n\", maxx); // return 0; //} //\u8fb9\u5dee\u5206\uff1a\u627e\u6240\u6709\u8def\u5f84\u5171\u540c\u8986\u76d6\u7684\u8fb9 //\u516c\u51432044\u5e74\uff0c\u4eba\u7c7b\u8fdb\u5165\u4e86\u5b87\u5b99\u7eaa\u5143\u3002 //L \u56fd\u6709n\u4e2a\u661f\u7403\uff0c\u8fd8\u6709n-1\u6761\u53cc\u5411\u822a\u9053\uff0c\u6bcf\u6761\u822a\u9053\u5efa\u7acb\u5728\u4e24\u4e2a\u661f\u7403\u4e4b\u95f4\uff0c\u8fd9n-1\u6761\u822a\u9053\u8fde\u901a\u4e86L\u56fd\u7684\u6240\u6709\u661f\u7403\u3002 //\u5c0f P \u638c\u7ba1\u4e00\u5bb6\u7269\u6d41\u516c\u53f8\uff0c \u8be5\u516c\u53f8\u6709\u5f88\u591a\u4e2a\u8fd0\u8f93\u8ba1\u5212\uff0c\u6bcf\u4e2a\u8fd0\u8f93\u8ba1\u5212\u5f62\u5982\uff1a\u6709\u4e00\u8258\u7269\u6d41\u98de\u8239\u9700\u8981\u4eceui\u53f7\u661f\u7403\u6cbf\u6700\u5feb\u7684\u5b87\u822a\u8def\u5f84\u98de\u884c\u5230vi\u53f7\u661f\u7403\u53bb\u3002 //\u663e\u7136\uff0c\u98de\u8239\u9a76\u8fc7\u4e00\u6761\u822a\u9053\u662f\u9700\u8981\u65f6\u95f4\u7684\uff0c\u5bf9\u4e8e\u822a\u9053j, \u4efb\u610f\u98de\u8239\u9a76\u8fc7\u5b83\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u4e3atj, \u5e76\u4e14\u4efb\u610f\u4e24\u8258\u98de\u8239\u4e4b\u95f4\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u5e72\u6270\u3002 //\u4e3a\u4e86\u9f13\u52b1\u79d1\u6280\u521b\u65b0\uff0cL\u56fd\u56fd\u738b\u540c\u610f\u5c0fP\u7684\u7269\u6d41\u516c\u53f8\u53c2\u4e0eL \u56fd\u7684\u822a\u9053\u5efa\u8bbe\uff0c\u5373\u5141\u8bb8\u5c0fP\u628a\u67d0\u4e00\u6761\u822a\u9053\u6539\u9020\u6210\u866b\u6d1e\uff0c\u98de\u8239\u9a76\u8fc7\u866b\u6d1e\u4e0d\u6d88\u8017\u65f6\u95f4\u3002 //\u5728\u866b\u6d1e\u7684\u5efa\u8bbe\u5b8c\u6210\u524d\u5c0fP\u7684\u7269\u6d41\u516c\u53f8\u5c31\u9884\u63a5\u4e86m\u4e2a\u8fd0\u8f93\u8ba1\u5212\u3002\u5728\u866b\u6d1e\u5efa\u8bbe\u5b8c\u6210\u540e\uff0c\u8fd9m\u4e2a\u8fd0\u8f93\u8ba1\u5212\u4f1a\u540c\u65f6\u5f00\u59cb\uff0c\u6240\u6709\u98de\u8239\u4e00\u8d77\u51fa\u53d1\u3002\u5f53\u8fd9m\u4e2a\u8fd0\u8f93\u8ba1\u5212\u90fd\u5b8c\u6210\u65f6\uff0c\u5c0fp\u7684\u7269\u6d41\u516c\u53f8\u7684\u9636\u6bb5\u6027\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e86\u3002 //\u5982\u679c\u5c0fP \u53ef\u4ee5\u81ea\u7531\u9009\u62e9\u5c06\u54ea\u4e00\u6761\u822a\u9053\u6539\u9020\u6210\u866b\u6d1e\uff0c \u8bd5\u6c42\u51fa\u5c0fP\u7684\u7269\u6d41\u516c\u53f8\u5b8c\u6210\u9636\u6bb5\u6027\u5de5\u4f5c\u6240\u9700\u8981\u7684\u6700\u77ed\u65f6\u95f4\u662f\u591a\u5c11\uff1f //\u7b2c\u4e00\u884c\u5305\u62ec\u4e24\u4e2a\u6b63\u6574\u6570n,m, \u8868\u793aL \u56fd\u4e2d\u661f\u7403\u7684\u6570\u91cf\u53ca\u5c0fP\u516c\u53f8\u9884\u63a5\u7684\u8fd0\u8f93\u8ba1\u5212\u7684\u6570\u91cf\uff0c\u661f\u7403\u4ece1\u5230n\u7f16\u53f7 //\u63a5\u4e0b\u6765n\u22121 \u884c\u63cf\u8ff0\u822a\u9053\u7684\u5efa\u8bbe\u60c5\u51b5\uff0c\u5176\u4e2d\u7b2ci \u884c\u5305\u542b\u4e09\u4e2a\u6574\u6570ai,bi\u548cti\uff0c\u8868\u793a\u7b2ci \u6761\u53cc\u5411\u822a\u9053\u4fee\u5efa\u5728ai\u4e0ebi\u4e24\u4e2a\u661f\u7403\u4e4b\u95f4\uff0c\u4efb\u610f\u98de\u8239\u9a76\u8fc7\u5b83\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u4e3ati\u3002 //\u6570\u636e\u4fdd\u8bc11\u2264ai, bi\u2264n \u4e140\u2264ti\u22641000\u3002 //\u63a5\u4e0b\u6765m \u884c\u63cf\u8ff0\u8fd0\u8f93\u8ba1\u5212\u7684\u60c5\u51b5\uff0c\u5176\u4e2d\u7b2cj \u884c\u5305\u542b\u4e24\u4e2a\u6b63\u6574\u6570uj\u548cvj\uff0c\u8868\u793a\u7b2cj \u4e2a\u8fd0\u8f93\u8ba1\u5212\u662f\u4eceuj\u53f7\u661f\u7403\u98de\u5f80vj\u53f7\u661f\u7403\u3002\u6570\u636e\u4fdd\u8bc11\u2264ui, vi\u2264n //\u8f93\u51fa\uff1a\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u5c0fp\u7684\u7269\u6d41\u516c\u53f8\u5b8c\u6210\u9636\u6bb5\u6027\u5de5\u4f5c\u6240\u9700\u8981\u7684\u6700\u77ed\u65f6\u95f4\u3002 // //\u8f93\u5165\uff1a //6 3 //1 2 3 //1 6 4 //3 1 7 //4 3 6 //3 5 5 //3 6 //2 5 //4 5 //\u8f93\u51fa\uff1a //11 #pragma warning(disable:4996) #include<algorithm> #include<iostream> #include<stdio.h> #include<cstring> using namespace std; struct node { int next, to, val; }edge[600010]; struct truck { int s, t, lca; }; truck node[300010]; int n, m, p, flag, cnt, maxn; int head[300010], deep[300010], f[300010][25], dis[300010], pre[300010], sum[300010]; void change(int &a, int &b) { int t = a; a = b; b = t; } void add(int a, int b, int c)//\u94fe\u5f0f\u524d\u5411\u661f\u52a0\u8fb9 { edge[++p].to = b; edge[p].next = head[a]; edge[p].val = c; head[a] = p; } void dfs(int a, int fa)//\u9884\u5904\u7406\u500d\u589e\u6570\u7ec4 { deep[a] = deep[fa] + 1; f[a][0] = fa; for (int i = 1; i <= 20; i++) f[a][i] = f[f[a][i - 1]][i - 1]; for (int i = head[a]; i; i = edge[i].next) { int v = edge[i].to; if (v == fa) continue; dis[v] = dis[a] + edge[i].val; pre[v] = edge[i].val; dfs(v, a); } } int getlca(int a, int b) { if (deep[a] > deep[b]) change(a, b); for (int i = 20; i >= 0; i--) { if (deep[a] <= deep[f[b][i]]) b = f[b][i]; } if (a == b) return a; for (int i = 20; i >= 0; i--) if (f[a][i] != f[b][i]) { a = f[a][i]; b = f[b][i]; } return f[a][0]; } int judge(int a, int fa, int cnt, int maxn)//\u5b50\u6811\u6c42\u548c { int nsum = sum[a]; for (int i = head[a]; i; i = edge[i].next) { int v = edge[i].to; if (v == fa) continue; nsum += judge(v, a, cnt, maxn); }//\u5b58\u5728\u5f53\u524d\u5bf9\u5e94\u8fb9\u6570\u7ecf\u8fc7\u7684\u6b21\u6570\u5e94\u8be5\u5927\u4e8e\u6240\u6709\u8d85\u65f6\u7684\u8def\u5f84\u6570\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01 if (nsum >= cnt && pre[a] >= maxn) //a\u5bf9\u5e94\u7684\u8fb9\u7684\u65f6\u95f4\u5927\u4e8e\u4e0d\u591f\u7684\u65f6\u95f4\uff0c\u53d8\u6210\u866b\u6d1e\u540e\u5373\u53ef\u7701\u6389\u8fd9\u4e48\u591a\u65f6\u95f4\uff0c\u8fd4\u56de\u771f\u503c flag = 1; return nsum; } int check(long long limit)//\u5224\u65ad\u5f53\u524d\u8bbe\u7684\u65f6\u95f4\u662f\u5426\u80fd\u5b8c\u6210\u6240\u6709\u4efb\u52a1 { memset(sum, 0, sizeof(sum)); cnt = 0, flag = 0, maxn = 0; for (int i = 1; i <= m; i++) if (dis[node[i].s] + dis[node[i].t] - 2 * dis[node[i].lca] > limit) { sum[node[i].s]++, sum[node[i].t]++, sum[node[i].lca] -= 2;//\u8fb9\u5dee\u5206\u5904\u7406\u6838\u5fc3\u4ee3\u7801 cnt++; maxn = max(maxn, dis[node[i].s] + dis[node[i].t] - 2 * dis[node[i].lca]); } if (cnt == 0) return 1;//\u65f6\u95f4\u592a\u957f\uff0c\u5fc5\u5b9a\u5b8c\u6210 int wsb = judge(1, 0, cnt, maxn - limit);//\u5224\u65ad\u4e0d\u591f\u7684\u65f6\u95f4\u80fd\u5426\u901a\u8fc7\u866b\u6d1e\u6539\u53d8\u800c\u4f7f\u5176\u5728\u5f53\u524d\u65f6\u95f4\u5185\u5b8c\u6210\u4efb\u52a1 return flag; } int main() { scanf(\"%d%d\", &n, &m); for (int i = 1; i <= n - 1; i++) { int a, b, c; scanf(\"%d%d%d\", &a, &b, &c); add(a, b, c); add(b, a, c); } dfs(1, 0); for (int i = 1; i <= m; i++) { scanf(\"%d%d\", &node[i].s, &node[i].t); node[i].lca = getlca(node[i].s, node[i].t); } long long l = 0, r = 3000000000; while (l + 1 < r) { int mid = (l + r) / 2; if (check(mid)) r = mid; else l = mid; } if (check(l)) printf(\"%lld\\n\", l); else printf(\"%lld\\n\", r); return 0; }","title":"\u6811\u4e0a\u5dee\u5206"},{"location":"English/listening/","text":"Listening - \u827a\u672f\u7c7bArt \u00b6 \u827a\u672f\u7c7b\u8bb2\u5ea7\u7279\u8272\u8bdd\u9898\u8003\u70b9 \u97f3\u4e50\u3001\u7ed8\u753b\u3001\u6587\u5b66\u3001\u821e\u8e48\u3001\u5efa\u7b51\u3001\u827a\u672f\u53f2 Words Explanation genre (\u6587\u5b66\u3001\u7ed8\u753b\u3001\u97f3\u4e50\u3001\u7535\u5f71\u7b49\u827a\u672f\u4f5c\u54c1\u7684) \u4f53\u88c1 debut \u9996\u6b21\u767b\u53f0 audition \u8bd5 (\u955c\u3001\u6f14) choreography \u821e\u8e48\u7f16\u6392 parody \u6ed1\u7a3d\u6a21\u4eff\u4f5c\u54c1 recital \u97f3\u4e50\u6f14\u594f\u4f1a\uff1b\u8bd7\u6b4c\u6717\u8bf5\u4f1a\uff1b\u72ec\u594f melodrama \u60c5\u8282\u5267\uff1b\u901a\u4fd7\u5267\uff1b\u60c5\u8282\u5267\u5f0f\u6545\u4e8b\uff08\u6216\u5c0f\u8bf4\uff09 pantomime \uff08\u82f1\u56fd\u591a\u5728\u5723\u8bde\u8282\u671f\u95f4\u4e0a\u6f14\u7684\uff09\u7ae5\u8bdd\u5267\uff1b\u54d1\u5267\uff1b\u9ed8\u5267 acrobatics \u6742\u6280 ballerina \u82ad\u857e\u821e\u5973\u6f14\u5458 revive \uff08\u4f7f\uff09\u82cf\u9192\uff0c\u590d\u6d3b\uff1b\u91cd\u65b0\u4f7f\u7528\uff1b\u4f7f\u91cd\u505a\uff1b\u91cd\u65b0\u4e0a\u6f14 hit \u5f88\u53d7\u6b22\u8fce\u7684\u4eba\uff08\u6216\u4e8b\u7269\uff09\uff1b\u98ce\u884c\u4e00\u65f6\u7684\u6d41\u884c\u6b4c\u66f2\uff08\u6216\u5531\u7247\uff09 improvisation \u5373\u5174\u521b\u4f5c bun \u5706\u53d1\u9afb cadence \uff08\u4e50\u6bb5\u6216\u4e50\u53e5\u7684\uff09\u6536\u675f\uff0c\u9759\u6b62\uff1b\uff08\u8bf4\u8bdd\u65f6\u8bed\u8c03\u7684\uff09\u6291\u626c\u987f\u632b\uff0c\u8d77\u843d aria \u548f\u53f9\u8c03; \u5531\u8154 ode \u9882\u8bd7\uff1b \u9882\u6b4c climax \u620f\u5267\u3001\u97f3\u4e50\u7b49\u901a\u5e38\u63a5\u8fd1\u7ed3\u675f\u65f6\u51fa\u73b0\u7684\uff09\u9ad8\u6f6e denouement \uff08\u620f\u5267\u3001\u5c0f\u8bf4\u7b49\u7684\uff09\u7ed3\u5c40\uff0c\u6536\u573a\uff1b\uff08\u4e8b\u60c5\u7684\uff09\u7ed3\u679c adaptation \u6539\u7f16\u672c\uff1b\u6539\u5199\u672c critic \u6279\u8bc4\u5bb6\uff1b\u8bc4\u8bba\u5bb6\uff1b\u8bc4\u8bba\u5458 1. \u4ec0\u4e48\u827a\u672f\u7c7b\u578b/\u827a\u672f\u98ce\u683c \u00b6 \u827a\u672f\u9898\u7684 \u4e3b\u65e8 \u57fa\u672c\u4e0a\u4f1a\u51fa\u73b0\u5728\u8bb2\u5ea7\u7684\u524d\u4e09\u56db\u53e5\u8bdd\u4e2d\uff0c\u5728\u4ecb\u7ecd\u827a\u672f\u7c7b\u578b\u6216\u98ce\u683c\u4e13\u6709\u540d\u8bcd\u7684\u5b9a\u4e49\u65f6\u4f1a\u6709\u548c\u97f3\u9891\u540c\u6b65\u7684\u9ed1\u677f\u8bcd\u51fa\u73b0\uff0c\u8981\u8bb0\u5f55\u5bf9\u9ed1\u677f\u8bcd\u7684\u89e3\u91ca\uff0c\u56e0\u6b64\u8fd9\u5f80\u5f80\u4f1a\u548c\u8003\u70b9\u76f8\u5173 2. \u4ee3\u8868\u4eba\u7269 \u00b6 \u5728\u6240\u6709\u7684\u827a\u672f\u9898\u4e2d\uff0c\u5bf9\u4e8e \u4ee3\u8868\u4eba\u7269\u7684\u8003\u67e5 \u662f\u7b2c\u4e00\u6838\u5fc3\u8003\u70b9\uff0c\u5176\u4e2d\u5305\u542b\u4e09\u4e2a\u65b9\u9762\uff1a \u4ee3\u8868\u4eba\u7269\u7684\u827a\u672f\u98ce\u683c/\u7279\u70b9 \u4ed6\u7684\u751f\u5e73/\u505a\u51fa\u7684\u8d21\u732e (\u4eba\u540d+\u8d21\u732e) \u53d7\u5230\u8c01\u7684\u5f71\u54cd/\u8c01\u5f71\u54cd\u4e86\u4ed6 (A vs B) 3. \u827a\u672f\u9898\u4e2d\u7684\u5bf9\u6bd4 \u00b6 \u5728\u827a\u672f\u9898\u542c\u9898\u524d\u6216\u8005\u542c\u9898\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u5b9a\u8981\u6709 \u5bf9\u6bd4\u610f\u8bc6 \uff0c\u6709\u53ef\u80fd\u4f1a\u51fa\u73b0 \u4e24\u79cd\u827a\u672f\u98ce\u683c \u6216\u8005 \u4e24\u4e2a\u4ee3\u8868\u4eba\u7269\u53ca\u5176\u4ee3\u8868\u7684\u827a\u672f\u7c7b\u578b \u6216\u8005 \u89c2\u70b9\u4e4b\u95f4\u7684\u5bf9\u6bd4 \u5728\u827a\u672f\u9898\u542c\u9898\u524d\uff0c\u5f53\u4e0e\u4e4b\u524d\u76f8\u540c\u7c7b\u578b\u7684\u9ed1\u677f\u8bcd\u518d\u73b0\u65f6(\u6bd4\u5982\u51fa\u73b0\u4e24\u5f20\u4eba\u540d\u56fe\u7247\u6216\u8005\u827a\u672f\u98ce\u683c\u7684\u56fe\u7247)\uff0c\u8981\u6ce8\u610f\u628a\u63e1\u4e24\u4e2a\u9ed1\u677f\u8bcd\u5b9a\u4e49\u89e3\u91ca\u7684\u533a\u522b Listening - \u5386\u53f2\u7c7b \u00b6 \u5386\u53f2\u7c7b\uff1a \u8003\u53e4\u5b66 archaeology \u4eba\u7c7b\u5b66 anthropology \u5386\u53f2 history words explanation paleolithic \u65e7\u77f3\u5668\u65f6\u4ee3 mesolithic \u4e2d\u77f3\u5668\u65f6\u4ee3 neolithic \u65b0\u77f3\u5668\u65f6\u4ee3 nomad \u6e38\u7267\u4eba\uff1b\u6e38\u7267\u90e8\u843d sedentary (\u4eba\u6216\u52a8\u7269)\u5b9a\u5c45\u7684\uff1b\u5b9a\u6816\u7684\uff1b\u4e0d\u8fc1\u5f99\u7684 tribe \u90e8\u843d clan \u5b97\u65cf\uff0c\u6c0f\u65cf\uff0c\u5bb6\u65cf antique \u53e4\u8001\u7684\uff1b\u53e4\u8463\u7684\uff1b\u6587\u7269\uff1b\u53e4\u7269\uff1b\u53e4\u8463\uff1b\u53e4\u73a9 relic \u9057\u7269\uff1b\u9057\u8ff9\uff1b\u9057\u98ce\uff1b\u9057\u4fd7\uff1b\u5723\u9ad1\uff1b\u5723\u9aa8\uff1b\u5723\u4eba\u9057\u7269 debris \u6b8b\u9ab8\uff1b\u788e\u7247\uff1b\u7834\u7247\uff1b\u6b8b\u6e23\uff1b\u5783\u573e\uff1b\u5e9f\u5f03\u7269 excavate \u53d1\u6398\uff0c\u6316\u51fa\uff08\u53e4\u5efa\u7b51\u6216\u53e4\u7269\uff09\uff1b\u6316\u6398\uff0c\u5f00\u51ff\uff0c\u6316\u7a7a\uff08\u6d1e\u3001\u96a7\u9053\u7b49\uff09 unearth \u6316\u6398\uff1b\u53d1\u6398\uff1b\u4f7f\u51fa\u571f\uff1b\uff08\u5076\u7136\u6216\u7ecf\u641c\u5bfb\uff09\u53d1\u73b0\uff0c\u627e\u5230 utensil \u5bb6\u5ead\uff09\u7528\u5177\uff0c\u5668\u76bf\uff1b\u5bb6\u4ec0 bishop \u4e3b\u6559 mundane \u5355\u8c03\u7684\uff1b\u5e73\u51e1\u7684 secular \u73b0\u4e16\u7684\uff1b\u4e16\u4fd7\u7684\uff1b\u975e\u5b97\u6559\u7684 barley \u5927\u9ea6\uff1b\u5927\u9ea6\u7c92 artifact/artefact (\u5c24\u6307\u6709\u5386\u53f2\u6216\u6587\u5316\u4ef7\u503c\u7684) \u624b\u5de5\u827a\u54c1 domesticate \u9a6f\u517b\uff0c\u9a6f\u5316\uff08\u52a8\u7269\uff09 livestock \u7272\u755c\uff1b\u5bb6\u755c 1. \u53d1\u73b0\u4e86\u4ec0\u4e48\u5386\u53f2\u53e4\u8ff9/\u73b0\u8c61/\u4eba\u79cd \u00b6 \u5386\u53f2\u7c7b\u9898\u4e2d\u7684\u4e3b\u65e8 \u6ce8\u610f\u9ed1\u677f\u8bcd - \u5bf9\u4e8e\u9ed1\u677f\u8bcd\u7684\u89e3\u91ca\u4e00\u5b9a\u8981\u8bb0\u5f55 \u4e00\u822c\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u53d1\u73b0\u90fd\u662f\u8003\u751f \u4e0d\u719f\u6089 \u7684\u4e1c\u897f \u4e3b\u65e8\u5f15\u51fa\u65b9\u5f0f \u80cc\u666f + \u8f6c\u6298 1 we know many about the pyramid, but we still don't know how it was built \u9009\u9879\u540c\u4e49\u66ff\u6362 \u865a\u6982\u5ff5 \u6307\u4ee3\u5177\u4f53\u6982\u5ff5 1 2 3 4 5 apple - a kind of fruits theory / assumption - uncertain / possible \u2260 evidence pyramid - an ancient mystery \u540c\u4e49\u8bcd\u66ff\u6362 2. \u8fd9\u4e9b\u53d1\u73b0\u8bc1\u5b9e\u4e86\u4ec0\u4e48(\u8be5\u53d1\u73b0\u7684\u7279\u70b9\uff0c\u5de5\u4f5c\u539f\u7406) \u00b6 \u53d1\u73b0\u662f\u4e3a\u4e86\u8bc1\u660e\u79d1\u5b66\u5bb6\u7684\u731c\u60f3\u6216\u8005\u89c2\u70b9 \u8003\u53e4\u5b66\u9898\u548c\u4eba\u7c7b\u5b66\u9898\u7684\u6838\u5fc3\u8003\u70b9\uff0c\u5c24\u4e3a\u666e\u904d \u5bf9\u6bd4\uff1abefore vs after / \u8bc1\u5b9e vs \u63a8\u7ffb \u5957\u8def 1 it was previously thought... + \u540e\u9762\u8f6c\u6298 \u53cc\u9009\u9898 1 Interestingly,... / Another notable thing is that... 3.\u4e0e\u5176\u4ed6\u7684\u53d1\u73b0\u6709\u4ec0\u4e48\u533a\u522b \u00b6 \u5bf9\u6bd4\u5185\u5bb9\u5728\u4e0d\u540c\u8bdd\u9898\u7684\u8bb2\u5ea7\u4e2d\u90fd\u6709\u63d0\u53ca\uff0c\u4e0d\u540c\u8bb2\u5ea7\u4e2d\u5bf9\u6bd4\u7684\u5185\u5bb9\u4e0d\u540c \u5728\u5386\u53f2\u9898\u4e2d\u5bf9\u6bd4\u7684\u5185\u5bb9\u66f4\u591a\u7684\u662f \u5206\u5c42\u4fe1\u53f7\u8bcd \u957f\u505c\u987f\u5c0f\u9ed1\u677f 4. \u79d1\u5b66\u5bb6\u7684\u89c2\u70b9\u662f\u4ec0\u4e48/\u8bc4\u4ef7\u662f\u4ec0\u4e48 \u00b6 \u5728\u5386\u53f2\u7c7b\u9898\u4e2d\uff0c\u79d1\u5b66\u5bb6\u8bc4\u8bba\u7684\u5185\u5bb9\u548c\u6027\u8d28\u548c\u5176\u4ed6\u8bdd\u9898\u7684\u8bb2\u5ea7\u4e2d\u8bc4\u8bba\u7684\u5185\u5bb9\u548c\u6027\u8d28\u5927\u81f4\u7c7b\u4f3c\uff0c\u4f46\u662f\u6709\u4e00\u4e2a\u975e\u5e38\u660e\u663e\u7684\u533a\u522b\uff0c\u5c31\u662f\u5728\u5386\u53f2\u7c7b\u9898\u76ee\u4e2d\uff0c \u81ea\u95ee\u81ea\u7b54 \u7684\u5185\u5bb9\u663e\u8457\u589e\u591a\uff0c\u539f\u56e0\u662f\u5386\u53f2\u4e2d\u7684\u53d1\u73b0\u5bf9\u6211\u4eec\u5f88\u591a\u4eba\u6765\u8bf4\u662f\u4e00\u4e2a\u8c1c\uff0c\u800c\u81ea\u95ee\u81ea\u7b54\u7684\u5185\u5bb9\u540c\u6837\u4e5f\u662f\u63ed\u5f00\u8c1c\u5e95\u7684\u8fc7\u7a0b 1 what is the professor's opinion about... Listening - \u5730\u8d28\u7c7b \u00b6 words explanation crack \u88c2\u7f1d crevice \u88c2\u7f1d fissure \u88c2\u7f1d weathering \u98ce\u5316 deposit \u6c89\u79ef\u7269 sedimentary rock \u6c89\u79ef\u5ca9 residue \u6b8b\u6e23\uff0c\u5269\u4f59 geothermal \u5730\u70ed latitude \u7eac\u5ea6 longitude \u7ecf\u5ea6 altitude \u9ad8\u5ea6\uff0c\u6d77\u62d4 hemisphere \u534a\u7403 terrain \u5730\u5f62\uff0c\u5730\u52bf topography \u5730\u5f62\uff0c\u5730\u52bf tilt \u503e\u659c fault \u65ad\u5c42 tectonic plates \u677f\u5757\u6784\u9020 aquifer \u755c\u6c34\u5c42 plateau \u9ad8\u539f depression \u4f4e\u6d3c tundra \u82d4\u539f glacier \u51b0\u5ddd magma \u5ca9\u6d46 lava \u5ca9\u6d46 permafrost \u6c38\u51bb\u5c42 seismology \u5730\u9707\u5b66 magnitude \u9707\u7ea7 debris \u788e\u7247\uff0c\u6b8b\u9ab8 strata \u5c42\uff1b\u5ca9\u5c42\uff1b\u5730\u5c42 (\u590d\u6570) stratum \u5c42\uff1b\u5ca9\u5c42\uff1b\u5730\u5c42 bonanza \u5bcc\u77ff\u5e26 geologist \u5730\u8d28\u5b66\u5bb6 tropical \u70ed\u5e26\u7684 temperate zone \u6e29\u5e26 frigid zone \u5bd2\u5e26 terrestrial \u5730\u7403\u7684 extraterrestrial \u5730\u7403\u5916\u7684 crust \u5730\u58f3 mantle \u5730\u5e54 core \u5730\u6838 lithosphere \u5ca9\u77f3\u5708 axis \u8f74 1.\u4ec0\u4e48\u5730\u8d28\u73b0\u8c61 \u00b6 \u8bb2\u5ea7\u7684 \u4e3b\u65e8 \uff0c\u524d\u4e09\u56db\u53e5\u4f1a\u7b80\u5355\u4ecb\u7ecd\u5730\u8d28\u73b0\u8c61\uff0c\u4f1a\u6709\u9ed1\u677f\u8bcd\u51fa\u73b0 2.\u5730\u8d28\u73b0\u8c61\u5f62\u6210\u7684\u539f\u56e0 \u00b6 \u5730\u8d28\u73b0\u8c61\u5f62\u6210\u7684\u539f\u56e0\u4e00\u822c \u5728\u5730\u8d28\u73b0\u8c61\u7684\u4ecb\u7ecd\u4e4b\u540e \u76f4\u63a5\u51fa\u73b0 3.\u5730\u8d28\u73b0\u8c61\u7684\u5f62\u6210\u8fc7\u7a0b \u00b6 \u5730\u8d28\u9898\u7684 \u6838\u5fc3 \uff0c \u6392\u5e8f\u9898 \u7684\u8003\u5bdf\u5bf9\u8c61\uff0c\u7ecf\u5e38\u7531\u5173\u952e\u8bcd\u201cwhat happens is that\u201d\u5f15\u51fa 4.\u6559\u6388\u7684\u8bc4\u4ef7 \u00b6 \u4e00\u822c\u51fa\u73b0\u5728\u8bb2\u5ea7\u672b\u5c3e\uff0c\u8868\u8fbe\u6559\u6388\u5bf9\u67d0\u79cd\u5730\u8d28\u73b0\u8c61\u6216\u67d0\u79cd\u5b66\u672f\u89c2\u70b9\u7684\u770b\u6cd5\uff0c\u6ce8\u610f\u6559\u6388\u5728\u6b64\u5904\u7684\u6001\u5ea6 \u9898\u578b \u00b6 \u8fde\u63a5\u5185\u5bb9\u9898 \u00b6 \u6838\u5bf9\u578b \u00b6 \u6838\u5bf9\u67d0\u4e00\u4fe1\u606f\u5728\u6587\u7ae0\u4e2d\u662f\u5426\u51fa\u73b0 \u53d6\u51b3\u4e8e\u7b14\u8bb0\u4e2d\u662f\u5426\u8bb0\u5f55\u4e86\u67d0\u4e2a\u7279\u5b9a\u7684\u5173\u952e\u8bcd \u89e3\u9898\u6b65\u9aa4\uff1a \u5f53\u6587\u7ae0\u51fa\u73b0 \u7f57\u5217\u5f0f\u5185\u5bb9 \u65f6\uff0c\u5c06\u7f57\u5217\u7684\u8bf8\u591a\u8981\u7d20\u4ee5 \u5173\u952e\u8bcd \u7684\u5f62\u5f0f(\u6216\u5355\u8bcd \u8f85\u97f3\u5b57\u6bcd \u5f62\u5f0f)\u8bb0\u5f55\u4e0b\u6765 \u8bb0\u5f55\u65b9\u6cd5\uff1amarket > mkt \u8001\u5e08\u7ed9\u5b66\u751f\u7684\u5efa\u8bae \u7b14\u8bb0\u5185\u5bb9 \u5c42\u6b21 \u9700\u533a\u5206\u6e05\u695a \u9519\u8bef\u9009\u9879\u5f80\u5f80\u662f\u5173\u952e\u8bcd\u7684\u53d8\u4f53(\u6bd4\u5982\u8bf4\u8bcd\u6027\u53d8\u5316)\u3001\u5f20\u51a0\u674e\u6234\u3001\u65e0\u4e2d\u751f\u6709 \u5206\u7c7b\u578b \u00b6 \u89e3\u9898\u6b65\u9aa4\uff1a \u6ce8\u610f\u4e24\u4e2a \u5b50\u5206\u7c7b\u7684\u4e0d\u4e00\u81f4\u4e4b\u5904 \u53e6\u4e00\u65b9\u9762\u8981\u5206\u6e05 \u4e24\u4e2a\u7c7b\u522b\u7684\u4e2d\u5fc3\u7279\u8d28 \u5982\u679c\u8bb2\u5ea7\u5206 \u4e24\u4e2a\u90e8\u5206 \u8ba8\u8bba\u4e0d\u540c\u7c7b\u522b\uff0c\u7b14\u8bb0\u4e2d\u7684\u5c42\u6b21\u5212\u5206\u5e94\u6709\u4f53\u73b0\uff0c\u4e0d\u540c\u7684\u5173\u952e\u8bcd\u8bb0\u5f55 \u4eba\u540d + \u7406\u8bba \u4e3b\u4f53 + \u7279\u5f81\u7279\u70b9 \u4eba\u540d\u539f\u5219\u8981\u8bb0\u4f4f \u6392\u5e8f\u9898 \u00b6 \u6838\u5bf9\u5173\u952e\u8bcd\u5728\u7b14\u8bb0\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f \u524d\u56e0\u540e\u679c \u89e3\u9898\u6b65\u9aa4\uff1a \u6839\u636e\u9009\u9879\u9009\u5b9a\u5173\u952e\u8bcd \u7ec4\u7ec7\u7ed3\u6784\u9898 \u00b6 How does the professor organize the information about X? How is the discussion organized? Why does the professor discuss X? Why does the professor mention X? \u51fa\u73b0\u9891\u7387\u8f83\u4f4e\uff0c\u4e00\u822c\u4e00\u7bc7\u6587\u7ae0\u53ea\u6709\u4e00\u9053(\u751a\u81f3\u6ca1\u6709) \u8003\u5bdf\u6587\u4e2d\u4fe1\u606f\u7684\u7ec4\u7ec7\u65b9\u5f0f \u5206\u7c7b\uff1awhole & part \u9488\u5bf9\u6587\u7ae0\u6574\u4f53(\u7ed3\u5408\u5168\u6587\u6982\u5ff5) \u9898\u76ee\u7684\u7b54\u6848\u4e0d\u4ec5\u8981\u6c42\u5185\u5bb9\u6b63\u786e\uff0c\u800c\u4e14\u8981\u6c42\u63cf\u8ff0\u987a\u5e8f\u6b63\u786e \u5168\u6587\u7b14\u8bb0\u5e94\u6e05\u6670\u5c55\u793a\u51fa\u6587\u7ae0\u7684\u6846\u67b6 \u4e00\u822c\u6587\u7ae0\u7ed3\u6784\u4e3a\uff1a 1 2 3 4 5 6 7 8 9 \u5bd2\u6684(\u53ef\u6709\u53ef\u65e0) \u63d0\u51fa\u95ee\u9898\uff0c\u6216\u7ed9\u51fa\u9700\u8981\u89e3\u91ca\u7684\u73b0\u8c61\uff0c\u6216\u5448\u73b0\u9700\u8981\u9610\u8ff0\u7684\u5b9a\u4e49 \u7ed9\u51fa\u7b2c\u4e00\u79cd\u89e3\u91ca\u5e76\u5bf9\u5176\u8fdb\u884c\u8bba\u8ff0 \u7b2c\u4e00\u79cd\u89e3\u91ca\u7684\u7f3a\u9677(\u4e3a\u63d0\u51fa\u7b2c\u4e8c\u79cd\u89e3\u91ca\u6253\u4e0b\u57fa\u7840) \u7ed9\u51fa\u7b2c\u4e8c\u79cd\u89e3\u91ca\u5e76\u5bf9\u5176\u8fdb\u884c\u8bba\u8ff0 \u7b2c\u4e8c\u79cd\u89e3\u91ca\u7684\u7f3a\u9677(\u53ef\u6709\u53ef\u65e0) \u8bf4\u8bdd\u8005\u63a2\u8ba8\u63d0\u5230\u8fc7\u7684\u8bdd\u9898(\u53ef\u80fd\u662f\u5bf9\u5df2\u6709\u5185\u5bb9\u7684\u590d\u8ff0\u3001\u8865\u5145) \u7ed3\u8bba\u90e8\u5206(\u53ef\u6709\u53ef\u65e0) \u5bd2\u6684(\u53ef\u6709\u53ef\u65e0) \u7b14\u8bb0\u6709\u5fc5\u8981\u8fdb\u884c\u57fa\u672c\u7684\u5206\u5757\uff0c\u6709\u52a9\u4e8e\u5efa\u7acb\u6587\u7ae0\u7684\u6846\u67b6 \u9519\u8bef\u9009\u9879\u5e38\u662f\u5bd2\u6684\u3001\u56de\u987e\u4e4b\u524d\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u8bfe\u5802\u672b\u5c3e\u5904\u6240\u63cf\u8ff0\u7684\u5185\u5bb9 \u9488\u5bf9\u6587\u7ae0\u67d0\u4e2a\u90e8\u5206 \u6839\u636e\u6587\u7ae0\u6846\u67b6\u8fdb\u884c\u5224\u65ad \u9700\u5229\u7528\u6587\u7ae0\u6846\u67b6\u4e2d\u6bcf\u4e2a\u5206\u8bdd\u9898\u8ba8\u8bba\u7684\u5206\u8bba\u70b9\u6765\u786e\u5b9a\u6700\u7ec8\u7b54\u6848 \u4e00\u4e2a\u4e3b\u9898\u4e0b\u7ecf\u5e38\u4f1a\u51fa\u73b0\u591a\u4e2a\u5206\u8bdd\u9898\u548c\u5206\u8bba\u70b9\uff0c\u8fd9\u4e9b\u8bdd\u9898\u65e2\u53ef\u80fd\u662f\u7b80\u5355\u7684\u5e76\u5217\u5173\u7cfb\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u8f6c\u6298\u3001\u9012\u8fdb\u3001\u56e0\u679c\u7684\u5173\u7cfb\uff0c\u8bc6\u522b\u8fd9\u4e9b\u5173\u7cfb\u6709\u52a9\u4e8e\u6211\u4eec\u7406\u6e05\u5168\u6587\u6846\u67b6 \u9488\u5bf9\u6587\u7ae0\u67d0\u90e8\u5206\u7684\u7ec4\u7ec7\u7ed3\u6784\uff0c\u8bba\u8ff0\u76ee\u6807\u4e5f\u4e00\u5b9a\u662f\u8be5\u90e8\u5206\u6240\u5728\u8bdd\u9898\u7684\u5206\u8bba\u70b9\uff0c\u5982\uff1awhy does the professor mention X? \u5229\u7528\u5bf9\u67d0\u4e2a\u5177\u4f53\u53e5\u5b50\u7684\u7cbe\u786e\u7406\u89e3\u6765\u505a\u7b54\u6848 \u89e3\u9898\u6b65\u9aa4\uff1a \u901a\u8fc7\u9898\u5e72\uff0c\u786e\u5b9a\u8be5\u9898\u662f\u9488\u5bf9\u5168\u6587\u8fd8\u662f \u6839\u636e\u7b14\u8bb0 \u7279\u6307\u9488\u5bf9\u6587\u7ae0\u67d0\u90e8\u5206\u7684\u7ec4\u7ec7\u7ed3\u6784\u9898 \u5c1d\u8bd5\u5efa\u7acb\u9898\u5e72\u5185\u5bb9\u4e0e\u6587\u7ae0\u4e3b\u9898\u4e4b\u95f4\u7684\u8054\u7cfb \u9898\u5e72\u4e0e\u6587\u7ae0\u4e3b\u9898\u4e4b\u95f4\u7684\u5173\u7cfb\uff1a \u6839\u636e\u5e38\u89c1\u7684\u9519\u8bef\u9009\u9879\u7279\u5f81\u6392\u9664 \u6b63\u786e\u9009\u9879\u7279\u5f81 \u9519\u8bef\u9009\u9879\u7279\u5f81 \u5f20\u51a0\u674e\u6234 \u65e0\u4e2d\u751f\u6709 \u8fc7\u5ea6\u63a8\u65ad \u5357\u8f95\u5317\u8f99 \u55a7\u5bbe\u593a\u4e3b \u98a0\u4e09\u5012\u56db \u63a8\u65ad\u9898 Inference \u00b6 Typical questions: \u00b6 what will the student probably do next? (Conversation) what does the professor imply about X? what can be inferred about X? what does the professor imply when he says this: ()? (Replay) \u63a8\u7406\u89d2\u5ea6 \u00b6 \u6b63\u9762\u63a8\u7406 \u4e3e\u4f8b \u7c7b\u6bd4 \u9610\u8ff0 - \u89e3\u91ca\u8bf4\u660e \u53cd\u9762\u63a8\u7406 \u53d6\u975e\u5f0f \u4fe1\u53f7\u8bcd \u00b6 \u4e3e\u4f8b\u5b50 \uff1a for example / for instance / take ... (as an example) / such as / like / say / let's say \u8868\u7c7b\u6bd4 \uff1a like / similar to / similarly / in the same way \u8868\u9610\u8ff0 \uff1a I mean / in other words / that is / which means \u8868\u8f6c\u6298 \uff1a\u53d6\u975e\u5f0f\u63a8\u7406\uff0c but / however / in fact / actually / yet / while \u89e3\u9898\u6b65\u9aa4 \u00b6 \u6839\u636e \u9898\u5e72\u5173\u952e\u8bcd - \u6838\u5fc3\u540d\u8bcd \u627e\u5230\u7b14\u8bb0\u4e2d\u8ba8\u8bba\u8be5\u8bcd\u7684\u7279\u5b9a\u90e8\u5206\uff0c\u82e5\u6587\u4e2d\u591a\u6b21\u51fa\u73b0\u8be5\u5173\u952e\u8bcd\uff0c\u5219\u9996\u5148\u5173\u6ce8 \u7b2c\u4e00\u6b21\u51fa\u73b0 \u7684\u90e8\u5206 \u6839\u636e\u7b14\u8bb0\u4e2d\u76f8\u5e94\u5185\u5bb9\u786e\u5b9a\u6b64\u5904\u4f7f\u7528\u6b63\u9762\u63a8\u7406\u8fd8\u662f\u53cd\u9762\u63a8\u7406 \u6838\u67e5\u9009\u9879\uff0c\u5c06\u9519\u8bef\u9009\u9879\u6392\u9664 \u6700\u7ec8\u9009\u5b9a\u7b54\u6848 \u9519\u8bef\u9009\u9879\u7279\u5f81\uff1a \u65e0\u4e2d\u751f\u6709 \u8fc7\u5ea6\u63a8\u65ad \u5f20\u51a0\u674e\u6234 \u89e3\u9898\u6280\u5de7\uff1a \u6ce8\u610f\u8868\u8fbe\u201c\u4e8b\u5b9e\u4e0a\u3001\u5b9e\u9645\u4e0a\u201d\uff0c\u8fd9\u7c7b\u8bcd\u6c47 \u8f6c\u6298\u542b\u4e49 \u7684\u4f7f\u7528\uff1a actually / indeed / in fact / particularly / virtually tell me about it = \u8c01\u8bf4\u4e0d\u662f\u5462(\u8868\u793a\u7406\u89e3)","title":"Listening"},{"location":"English/listening/#listening-art","text":"\u827a\u672f\u7c7b\u8bb2\u5ea7\u7279\u8272\u8bdd\u9898\u8003\u70b9 \u97f3\u4e50\u3001\u7ed8\u753b\u3001\u6587\u5b66\u3001\u821e\u8e48\u3001\u5efa\u7b51\u3001\u827a\u672f\u53f2 Words Explanation genre (\u6587\u5b66\u3001\u7ed8\u753b\u3001\u97f3\u4e50\u3001\u7535\u5f71\u7b49\u827a\u672f\u4f5c\u54c1\u7684) \u4f53\u88c1 debut \u9996\u6b21\u767b\u53f0 audition \u8bd5 (\u955c\u3001\u6f14) choreography \u821e\u8e48\u7f16\u6392 parody \u6ed1\u7a3d\u6a21\u4eff\u4f5c\u54c1 recital \u97f3\u4e50\u6f14\u594f\u4f1a\uff1b\u8bd7\u6b4c\u6717\u8bf5\u4f1a\uff1b\u72ec\u594f melodrama \u60c5\u8282\u5267\uff1b\u901a\u4fd7\u5267\uff1b\u60c5\u8282\u5267\u5f0f\u6545\u4e8b\uff08\u6216\u5c0f\u8bf4\uff09 pantomime \uff08\u82f1\u56fd\u591a\u5728\u5723\u8bde\u8282\u671f\u95f4\u4e0a\u6f14\u7684\uff09\u7ae5\u8bdd\u5267\uff1b\u54d1\u5267\uff1b\u9ed8\u5267 acrobatics \u6742\u6280 ballerina \u82ad\u857e\u821e\u5973\u6f14\u5458 revive \uff08\u4f7f\uff09\u82cf\u9192\uff0c\u590d\u6d3b\uff1b\u91cd\u65b0\u4f7f\u7528\uff1b\u4f7f\u91cd\u505a\uff1b\u91cd\u65b0\u4e0a\u6f14 hit \u5f88\u53d7\u6b22\u8fce\u7684\u4eba\uff08\u6216\u4e8b\u7269\uff09\uff1b\u98ce\u884c\u4e00\u65f6\u7684\u6d41\u884c\u6b4c\u66f2\uff08\u6216\u5531\u7247\uff09 improvisation \u5373\u5174\u521b\u4f5c bun \u5706\u53d1\u9afb cadence \uff08\u4e50\u6bb5\u6216\u4e50\u53e5\u7684\uff09\u6536\u675f\uff0c\u9759\u6b62\uff1b\uff08\u8bf4\u8bdd\u65f6\u8bed\u8c03\u7684\uff09\u6291\u626c\u987f\u632b\uff0c\u8d77\u843d aria \u548f\u53f9\u8c03; \u5531\u8154 ode \u9882\u8bd7\uff1b \u9882\u6b4c climax \u620f\u5267\u3001\u97f3\u4e50\u7b49\u901a\u5e38\u63a5\u8fd1\u7ed3\u675f\u65f6\u51fa\u73b0\u7684\uff09\u9ad8\u6f6e denouement \uff08\u620f\u5267\u3001\u5c0f\u8bf4\u7b49\u7684\uff09\u7ed3\u5c40\uff0c\u6536\u573a\uff1b\uff08\u4e8b\u60c5\u7684\uff09\u7ed3\u679c adaptation \u6539\u7f16\u672c\uff1b\u6539\u5199\u672c critic \u6279\u8bc4\u5bb6\uff1b\u8bc4\u8bba\u5bb6\uff1b\u8bc4\u8bba\u5458","title":"Listening - \u827a\u672f\u7c7bArt"},{"location":"English/listening/#1","text":"\u827a\u672f\u9898\u7684 \u4e3b\u65e8 \u57fa\u672c\u4e0a\u4f1a\u51fa\u73b0\u5728\u8bb2\u5ea7\u7684\u524d\u4e09\u56db\u53e5\u8bdd\u4e2d\uff0c\u5728\u4ecb\u7ecd\u827a\u672f\u7c7b\u578b\u6216\u98ce\u683c\u4e13\u6709\u540d\u8bcd\u7684\u5b9a\u4e49\u65f6\u4f1a\u6709\u548c\u97f3\u9891\u540c\u6b65\u7684\u9ed1\u677f\u8bcd\u51fa\u73b0\uff0c\u8981\u8bb0\u5f55\u5bf9\u9ed1\u677f\u8bcd\u7684\u89e3\u91ca\uff0c\u56e0\u6b64\u8fd9\u5f80\u5f80\u4f1a\u548c\u8003\u70b9\u76f8\u5173","title":"1. \u4ec0\u4e48\u827a\u672f\u7c7b\u578b/\u827a\u672f\u98ce\u683c"},{"location":"English/listening/#2","text":"\u5728\u6240\u6709\u7684\u827a\u672f\u9898\u4e2d\uff0c\u5bf9\u4e8e \u4ee3\u8868\u4eba\u7269\u7684\u8003\u67e5 \u662f\u7b2c\u4e00\u6838\u5fc3\u8003\u70b9\uff0c\u5176\u4e2d\u5305\u542b\u4e09\u4e2a\u65b9\u9762\uff1a \u4ee3\u8868\u4eba\u7269\u7684\u827a\u672f\u98ce\u683c/\u7279\u70b9 \u4ed6\u7684\u751f\u5e73/\u505a\u51fa\u7684\u8d21\u732e (\u4eba\u540d+\u8d21\u732e) \u53d7\u5230\u8c01\u7684\u5f71\u54cd/\u8c01\u5f71\u54cd\u4e86\u4ed6 (A vs B)","title":"2. \u4ee3\u8868\u4eba\u7269"},{"location":"English/listening/#3","text":"\u5728\u827a\u672f\u9898\u542c\u9898\u524d\u6216\u8005\u542c\u9898\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u5b9a\u8981\u6709 \u5bf9\u6bd4\u610f\u8bc6 \uff0c\u6709\u53ef\u80fd\u4f1a\u51fa\u73b0 \u4e24\u79cd\u827a\u672f\u98ce\u683c \u6216\u8005 \u4e24\u4e2a\u4ee3\u8868\u4eba\u7269\u53ca\u5176\u4ee3\u8868\u7684\u827a\u672f\u7c7b\u578b \u6216\u8005 \u89c2\u70b9\u4e4b\u95f4\u7684\u5bf9\u6bd4 \u5728\u827a\u672f\u9898\u542c\u9898\u524d\uff0c\u5f53\u4e0e\u4e4b\u524d\u76f8\u540c\u7c7b\u578b\u7684\u9ed1\u677f\u8bcd\u518d\u73b0\u65f6(\u6bd4\u5982\u51fa\u73b0\u4e24\u5f20\u4eba\u540d\u56fe\u7247\u6216\u8005\u827a\u672f\u98ce\u683c\u7684\u56fe\u7247)\uff0c\u8981\u6ce8\u610f\u628a\u63e1\u4e24\u4e2a\u9ed1\u677f\u8bcd\u5b9a\u4e49\u89e3\u91ca\u7684\u533a\u522b","title":"3. \u827a\u672f\u9898\u4e2d\u7684\u5bf9\u6bd4"},{"location":"English/listening/#listening-","text":"\u5386\u53f2\u7c7b\uff1a \u8003\u53e4\u5b66 archaeology \u4eba\u7c7b\u5b66 anthropology \u5386\u53f2 history words explanation paleolithic \u65e7\u77f3\u5668\u65f6\u4ee3 mesolithic \u4e2d\u77f3\u5668\u65f6\u4ee3 neolithic \u65b0\u77f3\u5668\u65f6\u4ee3 nomad \u6e38\u7267\u4eba\uff1b\u6e38\u7267\u90e8\u843d sedentary (\u4eba\u6216\u52a8\u7269)\u5b9a\u5c45\u7684\uff1b\u5b9a\u6816\u7684\uff1b\u4e0d\u8fc1\u5f99\u7684 tribe \u90e8\u843d clan \u5b97\u65cf\uff0c\u6c0f\u65cf\uff0c\u5bb6\u65cf antique \u53e4\u8001\u7684\uff1b\u53e4\u8463\u7684\uff1b\u6587\u7269\uff1b\u53e4\u7269\uff1b\u53e4\u8463\uff1b\u53e4\u73a9 relic \u9057\u7269\uff1b\u9057\u8ff9\uff1b\u9057\u98ce\uff1b\u9057\u4fd7\uff1b\u5723\u9ad1\uff1b\u5723\u9aa8\uff1b\u5723\u4eba\u9057\u7269 debris \u6b8b\u9ab8\uff1b\u788e\u7247\uff1b\u7834\u7247\uff1b\u6b8b\u6e23\uff1b\u5783\u573e\uff1b\u5e9f\u5f03\u7269 excavate \u53d1\u6398\uff0c\u6316\u51fa\uff08\u53e4\u5efa\u7b51\u6216\u53e4\u7269\uff09\uff1b\u6316\u6398\uff0c\u5f00\u51ff\uff0c\u6316\u7a7a\uff08\u6d1e\u3001\u96a7\u9053\u7b49\uff09 unearth \u6316\u6398\uff1b\u53d1\u6398\uff1b\u4f7f\u51fa\u571f\uff1b\uff08\u5076\u7136\u6216\u7ecf\u641c\u5bfb\uff09\u53d1\u73b0\uff0c\u627e\u5230 utensil \u5bb6\u5ead\uff09\u7528\u5177\uff0c\u5668\u76bf\uff1b\u5bb6\u4ec0 bishop \u4e3b\u6559 mundane \u5355\u8c03\u7684\uff1b\u5e73\u51e1\u7684 secular \u73b0\u4e16\u7684\uff1b\u4e16\u4fd7\u7684\uff1b\u975e\u5b97\u6559\u7684 barley \u5927\u9ea6\uff1b\u5927\u9ea6\u7c92 artifact/artefact (\u5c24\u6307\u6709\u5386\u53f2\u6216\u6587\u5316\u4ef7\u503c\u7684) \u624b\u5de5\u827a\u54c1 domesticate \u9a6f\u517b\uff0c\u9a6f\u5316\uff08\u52a8\u7269\uff09 livestock \u7272\u755c\uff1b\u5bb6\u755c","title":"Listening - \u5386\u53f2\u7c7b"},{"location":"English/listening/#1_1","text":"\u5386\u53f2\u7c7b\u9898\u4e2d\u7684\u4e3b\u65e8 \u6ce8\u610f\u9ed1\u677f\u8bcd - \u5bf9\u4e8e\u9ed1\u677f\u8bcd\u7684\u89e3\u91ca\u4e00\u5b9a\u8981\u8bb0\u5f55 \u4e00\u822c\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u53d1\u73b0\u90fd\u662f\u8003\u751f \u4e0d\u719f\u6089 \u7684\u4e1c\u897f \u4e3b\u65e8\u5f15\u51fa\u65b9\u5f0f \u80cc\u666f + \u8f6c\u6298 1 we know many about the pyramid, but we still don't know how it was built \u9009\u9879\u540c\u4e49\u66ff\u6362 \u865a\u6982\u5ff5 \u6307\u4ee3\u5177\u4f53\u6982\u5ff5 1 2 3 4 5 apple - a kind of fruits theory / assumption - uncertain / possible \u2260 evidence pyramid - an ancient mystery \u540c\u4e49\u8bcd\u66ff\u6362","title":"1. \u53d1\u73b0\u4e86\u4ec0\u4e48\u5386\u53f2\u53e4\u8ff9/\u73b0\u8c61/\u4eba\u79cd"},{"location":"English/listening/#2_1","text":"\u53d1\u73b0\u662f\u4e3a\u4e86\u8bc1\u660e\u79d1\u5b66\u5bb6\u7684\u731c\u60f3\u6216\u8005\u89c2\u70b9 \u8003\u53e4\u5b66\u9898\u548c\u4eba\u7c7b\u5b66\u9898\u7684\u6838\u5fc3\u8003\u70b9\uff0c\u5c24\u4e3a\u666e\u904d \u5bf9\u6bd4\uff1abefore vs after / \u8bc1\u5b9e vs \u63a8\u7ffb \u5957\u8def 1 it was previously thought... + \u540e\u9762\u8f6c\u6298 \u53cc\u9009\u9898 1 Interestingly,... / Another notable thing is that...","title":"2. \u8fd9\u4e9b\u53d1\u73b0\u8bc1\u5b9e\u4e86\u4ec0\u4e48(\u8be5\u53d1\u73b0\u7684\u7279\u70b9\uff0c\u5de5\u4f5c\u539f\u7406)"},{"location":"English/listening/#3_1","text":"\u5bf9\u6bd4\u5185\u5bb9\u5728\u4e0d\u540c\u8bdd\u9898\u7684\u8bb2\u5ea7\u4e2d\u90fd\u6709\u63d0\u53ca\uff0c\u4e0d\u540c\u8bb2\u5ea7\u4e2d\u5bf9\u6bd4\u7684\u5185\u5bb9\u4e0d\u540c \u5728\u5386\u53f2\u9898\u4e2d\u5bf9\u6bd4\u7684\u5185\u5bb9\u66f4\u591a\u7684\u662f \u5206\u5c42\u4fe1\u53f7\u8bcd \u957f\u505c\u987f\u5c0f\u9ed1\u677f","title":"3.\u4e0e\u5176\u4ed6\u7684\u53d1\u73b0\u6709\u4ec0\u4e48\u533a\u522b"},{"location":"English/listening/#4","text":"\u5728\u5386\u53f2\u7c7b\u9898\u4e2d\uff0c\u79d1\u5b66\u5bb6\u8bc4\u8bba\u7684\u5185\u5bb9\u548c\u6027\u8d28\u548c\u5176\u4ed6\u8bdd\u9898\u7684\u8bb2\u5ea7\u4e2d\u8bc4\u8bba\u7684\u5185\u5bb9\u548c\u6027\u8d28\u5927\u81f4\u7c7b\u4f3c\uff0c\u4f46\u662f\u6709\u4e00\u4e2a\u975e\u5e38\u660e\u663e\u7684\u533a\u522b\uff0c\u5c31\u662f\u5728\u5386\u53f2\u7c7b\u9898\u76ee\u4e2d\uff0c \u81ea\u95ee\u81ea\u7b54 \u7684\u5185\u5bb9\u663e\u8457\u589e\u591a\uff0c\u539f\u56e0\u662f\u5386\u53f2\u4e2d\u7684\u53d1\u73b0\u5bf9\u6211\u4eec\u5f88\u591a\u4eba\u6765\u8bf4\u662f\u4e00\u4e2a\u8c1c\uff0c\u800c\u81ea\u95ee\u81ea\u7b54\u7684\u5185\u5bb9\u540c\u6837\u4e5f\u662f\u63ed\u5f00\u8c1c\u5e95\u7684\u8fc7\u7a0b 1 what is the professor's opinion about...","title":"4. \u79d1\u5b66\u5bb6\u7684\u89c2\u70b9\u662f\u4ec0\u4e48/\u8bc4\u4ef7\u662f\u4ec0\u4e48"},{"location":"English/listening/#listening-_1","text":"words explanation crack \u88c2\u7f1d crevice \u88c2\u7f1d fissure \u88c2\u7f1d weathering \u98ce\u5316 deposit \u6c89\u79ef\u7269 sedimentary rock \u6c89\u79ef\u5ca9 residue \u6b8b\u6e23\uff0c\u5269\u4f59 geothermal \u5730\u70ed latitude \u7eac\u5ea6 longitude \u7ecf\u5ea6 altitude \u9ad8\u5ea6\uff0c\u6d77\u62d4 hemisphere \u534a\u7403 terrain \u5730\u5f62\uff0c\u5730\u52bf topography \u5730\u5f62\uff0c\u5730\u52bf tilt \u503e\u659c fault \u65ad\u5c42 tectonic plates \u677f\u5757\u6784\u9020 aquifer \u755c\u6c34\u5c42 plateau \u9ad8\u539f depression \u4f4e\u6d3c tundra \u82d4\u539f glacier \u51b0\u5ddd magma \u5ca9\u6d46 lava \u5ca9\u6d46 permafrost \u6c38\u51bb\u5c42 seismology \u5730\u9707\u5b66 magnitude \u9707\u7ea7 debris \u788e\u7247\uff0c\u6b8b\u9ab8 strata \u5c42\uff1b\u5ca9\u5c42\uff1b\u5730\u5c42 (\u590d\u6570) stratum \u5c42\uff1b\u5ca9\u5c42\uff1b\u5730\u5c42 bonanza \u5bcc\u77ff\u5e26 geologist \u5730\u8d28\u5b66\u5bb6 tropical \u70ed\u5e26\u7684 temperate zone \u6e29\u5e26 frigid zone \u5bd2\u5e26 terrestrial \u5730\u7403\u7684 extraterrestrial \u5730\u7403\u5916\u7684 crust \u5730\u58f3 mantle \u5730\u5e54 core \u5730\u6838 lithosphere \u5ca9\u77f3\u5708 axis \u8f74","title":"Listening - \u5730\u8d28\u7c7b"},{"location":"English/listening/#1_2","text":"\u8bb2\u5ea7\u7684 \u4e3b\u65e8 \uff0c\u524d\u4e09\u56db\u53e5\u4f1a\u7b80\u5355\u4ecb\u7ecd\u5730\u8d28\u73b0\u8c61\uff0c\u4f1a\u6709\u9ed1\u677f\u8bcd\u51fa\u73b0","title":"1.\u4ec0\u4e48\u5730\u8d28\u73b0\u8c61"},{"location":"English/listening/#2_2","text":"\u5730\u8d28\u73b0\u8c61\u5f62\u6210\u7684\u539f\u56e0\u4e00\u822c \u5728\u5730\u8d28\u73b0\u8c61\u7684\u4ecb\u7ecd\u4e4b\u540e \u76f4\u63a5\u51fa\u73b0","title":"2.\u5730\u8d28\u73b0\u8c61\u5f62\u6210\u7684\u539f\u56e0"},{"location":"English/listening/#3_2","text":"\u5730\u8d28\u9898\u7684 \u6838\u5fc3 \uff0c \u6392\u5e8f\u9898 \u7684\u8003\u5bdf\u5bf9\u8c61\uff0c\u7ecf\u5e38\u7531\u5173\u952e\u8bcd\u201cwhat happens is that\u201d\u5f15\u51fa","title":"3.\u5730\u8d28\u73b0\u8c61\u7684\u5f62\u6210\u8fc7\u7a0b"},{"location":"English/listening/#4_1","text":"\u4e00\u822c\u51fa\u73b0\u5728\u8bb2\u5ea7\u672b\u5c3e\uff0c\u8868\u8fbe\u6559\u6388\u5bf9\u67d0\u79cd\u5730\u8d28\u73b0\u8c61\u6216\u67d0\u79cd\u5b66\u672f\u89c2\u70b9\u7684\u770b\u6cd5\uff0c\u6ce8\u610f\u6559\u6388\u5728\u6b64\u5904\u7684\u6001\u5ea6","title":"4.\u6559\u6388\u7684\u8bc4\u4ef7"},{"location":"English/listening/#_1","text":"","title":"\u9898\u578b"},{"location":"English/listening/#_2","text":"","title":"\u8fde\u63a5\u5185\u5bb9\u9898"},{"location":"English/listening/#_3","text":"\u6838\u5bf9\u67d0\u4e00\u4fe1\u606f\u5728\u6587\u7ae0\u4e2d\u662f\u5426\u51fa\u73b0 \u53d6\u51b3\u4e8e\u7b14\u8bb0\u4e2d\u662f\u5426\u8bb0\u5f55\u4e86\u67d0\u4e2a\u7279\u5b9a\u7684\u5173\u952e\u8bcd \u89e3\u9898\u6b65\u9aa4\uff1a \u5f53\u6587\u7ae0\u51fa\u73b0 \u7f57\u5217\u5f0f\u5185\u5bb9 \u65f6\uff0c\u5c06\u7f57\u5217\u7684\u8bf8\u591a\u8981\u7d20\u4ee5 \u5173\u952e\u8bcd \u7684\u5f62\u5f0f(\u6216\u5355\u8bcd \u8f85\u97f3\u5b57\u6bcd \u5f62\u5f0f)\u8bb0\u5f55\u4e0b\u6765 \u8bb0\u5f55\u65b9\u6cd5\uff1amarket > mkt \u8001\u5e08\u7ed9\u5b66\u751f\u7684\u5efa\u8bae \u7b14\u8bb0\u5185\u5bb9 \u5c42\u6b21 \u9700\u533a\u5206\u6e05\u695a \u9519\u8bef\u9009\u9879\u5f80\u5f80\u662f\u5173\u952e\u8bcd\u7684\u53d8\u4f53(\u6bd4\u5982\u8bf4\u8bcd\u6027\u53d8\u5316)\u3001\u5f20\u51a0\u674e\u6234\u3001\u65e0\u4e2d\u751f\u6709","title":"\u6838\u5bf9\u578b"},{"location":"English/listening/#_4","text":"\u89e3\u9898\u6b65\u9aa4\uff1a \u6ce8\u610f\u4e24\u4e2a \u5b50\u5206\u7c7b\u7684\u4e0d\u4e00\u81f4\u4e4b\u5904 \u53e6\u4e00\u65b9\u9762\u8981\u5206\u6e05 \u4e24\u4e2a\u7c7b\u522b\u7684\u4e2d\u5fc3\u7279\u8d28 \u5982\u679c\u8bb2\u5ea7\u5206 \u4e24\u4e2a\u90e8\u5206 \u8ba8\u8bba\u4e0d\u540c\u7c7b\u522b\uff0c\u7b14\u8bb0\u4e2d\u7684\u5c42\u6b21\u5212\u5206\u5e94\u6709\u4f53\u73b0\uff0c\u4e0d\u540c\u7684\u5173\u952e\u8bcd\u8bb0\u5f55 \u4eba\u540d + \u7406\u8bba \u4e3b\u4f53 + \u7279\u5f81\u7279\u70b9 \u4eba\u540d\u539f\u5219\u8981\u8bb0\u4f4f","title":"\u5206\u7c7b\u578b"},{"location":"English/listening/#_5","text":"\u6838\u5bf9\u5173\u952e\u8bcd\u5728\u7b14\u8bb0\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f \u524d\u56e0\u540e\u679c \u89e3\u9898\u6b65\u9aa4\uff1a \u6839\u636e\u9009\u9879\u9009\u5b9a\u5173\u952e\u8bcd","title":"\u6392\u5e8f\u9898"},{"location":"English/listening/#_6","text":"How does the professor organize the information about X? How is the discussion organized? Why does the professor discuss X? Why does the professor mention X? \u51fa\u73b0\u9891\u7387\u8f83\u4f4e\uff0c\u4e00\u822c\u4e00\u7bc7\u6587\u7ae0\u53ea\u6709\u4e00\u9053(\u751a\u81f3\u6ca1\u6709) \u8003\u5bdf\u6587\u4e2d\u4fe1\u606f\u7684\u7ec4\u7ec7\u65b9\u5f0f \u5206\u7c7b\uff1awhole & part \u9488\u5bf9\u6587\u7ae0\u6574\u4f53(\u7ed3\u5408\u5168\u6587\u6982\u5ff5) \u9898\u76ee\u7684\u7b54\u6848\u4e0d\u4ec5\u8981\u6c42\u5185\u5bb9\u6b63\u786e\uff0c\u800c\u4e14\u8981\u6c42\u63cf\u8ff0\u987a\u5e8f\u6b63\u786e \u5168\u6587\u7b14\u8bb0\u5e94\u6e05\u6670\u5c55\u793a\u51fa\u6587\u7ae0\u7684\u6846\u67b6 \u4e00\u822c\u6587\u7ae0\u7ed3\u6784\u4e3a\uff1a 1 2 3 4 5 6 7 8 9 \u5bd2\u6684(\u53ef\u6709\u53ef\u65e0) \u63d0\u51fa\u95ee\u9898\uff0c\u6216\u7ed9\u51fa\u9700\u8981\u89e3\u91ca\u7684\u73b0\u8c61\uff0c\u6216\u5448\u73b0\u9700\u8981\u9610\u8ff0\u7684\u5b9a\u4e49 \u7ed9\u51fa\u7b2c\u4e00\u79cd\u89e3\u91ca\u5e76\u5bf9\u5176\u8fdb\u884c\u8bba\u8ff0 \u7b2c\u4e00\u79cd\u89e3\u91ca\u7684\u7f3a\u9677(\u4e3a\u63d0\u51fa\u7b2c\u4e8c\u79cd\u89e3\u91ca\u6253\u4e0b\u57fa\u7840) \u7ed9\u51fa\u7b2c\u4e8c\u79cd\u89e3\u91ca\u5e76\u5bf9\u5176\u8fdb\u884c\u8bba\u8ff0 \u7b2c\u4e8c\u79cd\u89e3\u91ca\u7684\u7f3a\u9677(\u53ef\u6709\u53ef\u65e0) \u8bf4\u8bdd\u8005\u63a2\u8ba8\u63d0\u5230\u8fc7\u7684\u8bdd\u9898(\u53ef\u80fd\u662f\u5bf9\u5df2\u6709\u5185\u5bb9\u7684\u590d\u8ff0\u3001\u8865\u5145) \u7ed3\u8bba\u90e8\u5206(\u53ef\u6709\u53ef\u65e0) \u5bd2\u6684(\u53ef\u6709\u53ef\u65e0) \u7b14\u8bb0\u6709\u5fc5\u8981\u8fdb\u884c\u57fa\u672c\u7684\u5206\u5757\uff0c\u6709\u52a9\u4e8e\u5efa\u7acb\u6587\u7ae0\u7684\u6846\u67b6 \u9519\u8bef\u9009\u9879\u5e38\u662f\u5bd2\u6684\u3001\u56de\u987e\u4e4b\u524d\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u8bfe\u5802\u672b\u5c3e\u5904\u6240\u63cf\u8ff0\u7684\u5185\u5bb9 \u9488\u5bf9\u6587\u7ae0\u67d0\u4e2a\u90e8\u5206 \u6839\u636e\u6587\u7ae0\u6846\u67b6\u8fdb\u884c\u5224\u65ad \u9700\u5229\u7528\u6587\u7ae0\u6846\u67b6\u4e2d\u6bcf\u4e2a\u5206\u8bdd\u9898\u8ba8\u8bba\u7684\u5206\u8bba\u70b9\u6765\u786e\u5b9a\u6700\u7ec8\u7b54\u6848 \u4e00\u4e2a\u4e3b\u9898\u4e0b\u7ecf\u5e38\u4f1a\u51fa\u73b0\u591a\u4e2a\u5206\u8bdd\u9898\u548c\u5206\u8bba\u70b9\uff0c\u8fd9\u4e9b\u8bdd\u9898\u65e2\u53ef\u80fd\u662f\u7b80\u5355\u7684\u5e76\u5217\u5173\u7cfb\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u8f6c\u6298\u3001\u9012\u8fdb\u3001\u56e0\u679c\u7684\u5173\u7cfb\uff0c\u8bc6\u522b\u8fd9\u4e9b\u5173\u7cfb\u6709\u52a9\u4e8e\u6211\u4eec\u7406\u6e05\u5168\u6587\u6846\u67b6 \u9488\u5bf9\u6587\u7ae0\u67d0\u90e8\u5206\u7684\u7ec4\u7ec7\u7ed3\u6784\uff0c\u8bba\u8ff0\u76ee\u6807\u4e5f\u4e00\u5b9a\u662f\u8be5\u90e8\u5206\u6240\u5728\u8bdd\u9898\u7684\u5206\u8bba\u70b9\uff0c\u5982\uff1awhy does the professor mention X? \u5229\u7528\u5bf9\u67d0\u4e2a\u5177\u4f53\u53e5\u5b50\u7684\u7cbe\u786e\u7406\u89e3\u6765\u505a\u7b54\u6848 \u89e3\u9898\u6b65\u9aa4\uff1a \u901a\u8fc7\u9898\u5e72\uff0c\u786e\u5b9a\u8be5\u9898\u662f\u9488\u5bf9\u5168\u6587\u8fd8\u662f \u6839\u636e\u7b14\u8bb0 \u7279\u6307\u9488\u5bf9\u6587\u7ae0\u67d0\u90e8\u5206\u7684\u7ec4\u7ec7\u7ed3\u6784\u9898 \u5c1d\u8bd5\u5efa\u7acb\u9898\u5e72\u5185\u5bb9\u4e0e\u6587\u7ae0\u4e3b\u9898\u4e4b\u95f4\u7684\u8054\u7cfb \u9898\u5e72\u4e0e\u6587\u7ae0\u4e3b\u9898\u4e4b\u95f4\u7684\u5173\u7cfb\uff1a \u6839\u636e\u5e38\u89c1\u7684\u9519\u8bef\u9009\u9879\u7279\u5f81\u6392\u9664 \u6b63\u786e\u9009\u9879\u7279\u5f81 \u9519\u8bef\u9009\u9879\u7279\u5f81 \u5f20\u51a0\u674e\u6234 \u65e0\u4e2d\u751f\u6709 \u8fc7\u5ea6\u63a8\u65ad \u5357\u8f95\u5317\u8f99 \u55a7\u5bbe\u593a\u4e3b \u98a0\u4e09\u5012\u56db","title":"\u7ec4\u7ec7\u7ed3\u6784\u9898"},{"location":"English/listening/#inference","text":"","title":"\u63a8\u65ad\u9898 Inference"},{"location":"English/listening/#typical-questions","text":"what will the student probably do next? (Conversation) what does the professor imply about X? what can be inferred about X? what does the professor imply when he says this: ()? (Replay)","title":"Typical questions:"},{"location":"English/listening/#_7","text":"\u6b63\u9762\u63a8\u7406 \u4e3e\u4f8b \u7c7b\u6bd4 \u9610\u8ff0 - \u89e3\u91ca\u8bf4\u660e \u53cd\u9762\u63a8\u7406 \u53d6\u975e\u5f0f","title":"\u63a8\u7406\u89d2\u5ea6"},{"location":"English/listening/#_8","text":"\u4e3e\u4f8b\u5b50 \uff1a for example / for instance / take ... (as an example) / such as / like / say / let's say \u8868\u7c7b\u6bd4 \uff1a like / similar to / similarly / in the same way \u8868\u9610\u8ff0 \uff1a I mean / in other words / that is / which means \u8868\u8f6c\u6298 \uff1a\u53d6\u975e\u5f0f\u63a8\u7406\uff0c but / however / in fact / actually / yet / while","title":"\u4fe1\u53f7\u8bcd"},{"location":"English/listening/#_9","text":"\u6839\u636e \u9898\u5e72\u5173\u952e\u8bcd - \u6838\u5fc3\u540d\u8bcd \u627e\u5230\u7b14\u8bb0\u4e2d\u8ba8\u8bba\u8be5\u8bcd\u7684\u7279\u5b9a\u90e8\u5206\uff0c\u82e5\u6587\u4e2d\u591a\u6b21\u51fa\u73b0\u8be5\u5173\u952e\u8bcd\uff0c\u5219\u9996\u5148\u5173\u6ce8 \u7b2c\u4e00\u6b21\u51fa\u73b0 \u7684\u90e8\u5206 \u6839\u636e\u7b14\u8bb0\u4e2d\u76f8\u5e94\u5185\u5bb9\u786e\u5b9a\u6b64\u5904\u4f7f\u7528\u6b63\u9762\u63a8\u7406\u8fd8\u662f\u53cd\u9762\u63a8\u7406 \u6838\u67e5\u9009\u9879\uff0c\u5c06\u9519\u8bef\u9009\u9879\u6392\u9664 \u6700\u7ec8\u9009\u5b9a\u7b54\u6848 \u9519\u8bef\u9009\u9879\u7279\u5f81\uff1a \u65e0\u4e2d\u751f\u6709 \u8fc7\u5ea6\u63a8\u65ad \u5f20\u51a0\u674e\u6234 \u89e3\u9898\u6280\u5de7\uff1a \u6ce8\u610f\u8868\u8fbe\u201c\u4e8b\u5b9e\u4e0a\u3001\u5b9e\u9645\u4e0a\u201d\uff0c\u8fd9\u7c7b\u8bcd\u6c47 \u8f6c\u6298\u542b\u4e49 \u7684\u4f7f\u7528\uff1a actually / indeed / in fact / particularly / virtually tell me about it = \u8c01\u8bf4\u4e0d\u662f\u5462(\u8868\u793a\u7406\u89e3)","title":"\u89e3\u9898\u6b65\u9aa4"},{"location":"English/reading-hw5-a/","text":"\u4e8b\u5b9e\u4fe1\u606f\u9898 \u00b6 TPO 4 Petroleum Resources (\u6b63\u786e\u7387 68.54%) Petroleum, consisting of crude oil and natural gas, seems to originate from organic matter in marine sediment . Microscopic organisms settle to the seafloor and accumulate in marine mud. The organic matter may partially decompose, using up the dissolved oxygen in the sediment. As soon as the oxygen is gone, decay stops and the remaining organic matter is preserved. According to paragraph 1, which of the following is true about petroleum formation ? A.Microscopic organisms that live in mud produce crude oil and natural gas. B.Large amounts of oxygen are needed for petroleum formation to begin. C.Petroleum is produced when organic material in sediments combines with decaying marine organisms. D.Petroleum formation appears to begin in marine sediments where organic matter is present. \u9009\u62e9\uff1aD - \u76f4\u63a5\u627e\u5230\u4e86\u539f\u6587\u7684\u5bf9\u5e94\u53e5\u5b50 A\u9009\u9879\u540e\u534a\u53e5\u9519\u8bef\uff0c\u4e0d\u662fmud produce crude oil and natural gas B\u9009\u9879\u610f\u601d\u9519\u8bef\uff0c\u4ece\u539f\u6587\u6700\u540e\u4e00\u53e5\u5f97\u77e5\uff0c\u6ca1\u6709\u6c27\u6c14\u7684\u65f6\u5019\u6709\u673a\u7269\u8d28\u624d\u4f1a\u4fdd\u5b58 C\u9009\u9879\u610f\u601d\u9519\u8bef\uff0c\u4e0d\u662f\u4e8c\u8005combine\uff0c\u800c\u662fdecaying marine organisms\u4ea7\u751forganic material TPO 8 Running Water on Mars (\u6b63\u786e\u7387 68.41%) Some scientists speculate that Mars may have enjoyed an extended early Period during which rivers, lakes, and perhaps even oceans adorned its surface. A 2003 Mars Global Surveyor image shows what mission specialists think may be a delta\u2015a fan-shaped network of channels and sediments where a river once flowed into a larger body of water, in this case a lake filling a crater in the southern highlands. Other researchers go even further, suggesting that the data provide evidence for large open expenses of water on the early Martian surface. A computer- generated view of the Martian North Polar Region shows the extent of what may have been an ancient ocean covering much of the northern lowlands. The Hellas Basin, which measures some 3,000 kilometers across and has a floor that lies nearly 9 kilometers below the basin\u2019s rim, is another candidate for an ancient Martian sea. According to paragraph 3, images of Mars\u2019 surface have been interpreted as support for the idea that A.the polar regions of Mars were once more extensive than they are now B.a large part of the northern lowlands may once have been under water C.deltas were once a common feature of the Martian landscape D.the shape of the Hellas Basin has changed considerably over time \u9009\u62e9\uff1aB - \u76f4\u63a5\u627e\u5230\u4e86\u539f\u6587\u5bf9\u5e94\u53e5\u5b50 A\u9009\u9879extensive\u7684\u6bd4\u8f83\u672a\u4f53\u73b0\u51fa\u6765\uff0c\u53ea\u662f\u8bf4\u65e9\u671fMars\u6709\u6269\u5f20\u7684\u884c\u4e3a C\u9009\u9879common feature\u672a\u63d0\u53ca D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 28 Buck Rubs and Buck Scrapes (\u6b63\u786e\u7387 68.16%) Forehead rubbing by male deer on buck rubs presumably sends a great deal of information to other members of the same species \u3010A\u3011. First\u2026 Because both sexes of white-tailed respond to buck rubs by smelling and licking them, rubs may serve a very important additional function. Fresher buck rubs (less than two days old), in particular, are visited more frequently by adult females than older rubs. In view of this behavior it has been suggested that chemicals present in fresh buck rubs may help physiologically induce and synchronize fertility in females that visit these rubs. This would be an obvious advantage to wide-ranging deer, especially to a socially dominant buck when courting several adult females during the autumn rut. Another visual signal produced by while- tailed deer is termed a buck scrape . Scrapes consist of a clearing (about 0.5 meter in diameter) and shallow depression made by pushing aside the leaves covering the ground; after making the scrape, the deer typically urinates in the depression. Thus, like a buck rub, a scrape is both a visual and an olfactory signal\u3010B\u3011 . Buck scrapes are generally created after leaf-fall in autumn, which is just before or during the rut\u3010C\u3011 . Scrapes are usually placed in open or conspicuous places, such as along a deer trail. Most are made by older males, although females and younger males (2.5 years old or less) occasionally make scrapes.\u3010A\u3011 According to the passage, in what way do buck scrapes differ from buck rubs ? A.Buck scrapes are made by both male and female deer. B.Buck scrapes are purely visual signals C.Buck scrapes are made closer to the breeding season than buck rub D.Buck scrapes can be smelled only by deer \u9009\u62e9\uff1aA - \u539f\u6587\u4e2d\u6709\u4f53\u73b0 B\u9009\u9879\u9519\u8bef - both C\u9009\u9879\u9519\u8bef - before or during the rut D\u9009\u9879 - \u672a\u627e\u5230\u539f\u6587\uff0c\u4f46\u662f\u51ed\u7406\u89e3\uff0c\u8fd9\u4e24\u79cd\u4e1c\u897f\u5e94\u8be5\u90fd\u662f\u5bf9same species\u6709\u7528 - \u539f\u6587\u5f00\u7bc7\u63d0\u5230 TPO 21 The Origins of Agriculture (\u6b63\u786e\u7387 68.05%) Climatic changes at the end of the glacial period 13, 000 years ago have been proposed to account for the emergence of farming. The temperature increased dramatically in a short period of time (years rather than centuries), allowing for a growth of the hunting-gathering population due to the abundance of resources. There were, however, fluctuations in the climatic conditions , with the consequences that wet conditions were followed by dry ones , so that the availability of plants and animals oscillated brusquely According to paragraph 3, the abundance of resources fluctuated sharply after the end of the glacial period because A.Locally abundant resources were quickly exhausted by hunter-gatherers B.The temperature became much higher in some areas over others C.Different types of plants and animals became available as the climate changed D.The amount of rainfall varied radically from one period to the next. \u9009\u62e9\uff1aD A\u3001B\u9009\u9879\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u9519\u8bef\uff0c\u5f53\u6e29\u5ea6\u4e0a\u5347\u7684\u65f6\u5019\u8d44\u6e90\u4f1a\u4e30\u5bcc\uff0c\u4f46\u662f\u5176\u4ed6\u60c5\u51b5\u5c31\u4e0d\u4e00\u5b9a\u4e86 TPO 23 Seventeenth-Century Dutch Agriculture (\u6b63\u786e\u7387 68%) As the demand for agricultural produce from both consumers and industry increased, agricultural land became more valuable and people tried to work the available land more intensively and to reclaim more land from wetlands and lakes. In order to increase production on existing land, the peasants made more use of crop rotation and, in particular, began to apply animal waste to the soil regularly, rather than leaving the fertilization process up to the grazing livestock. For the first time industrial waste, such as ash from the soap-boilers, was collected in the cities and sold in the country as artificial fertilizer. The increased yield and price of land justified reclaiming and draining even more land. Select the TWO answer choices that, according to paragraph 4, indicate two methods people used to increase the productivity of their land . To receive credit you must select TWO answers A.They planted different crops in different sections of the farm each year. B.They used improved irrigation methods to increase the yield of crops. C.They increased the use of fertilizers to supply more nutrients to plants. D.They used new horticultural practices to produce different varieties of plants in the same section of the farm. \u9009\u62e9\uff1a CD - \u610f\u4f1a C - fertilizer D - crop rotation \u5176\u4ed6\u7684\u611f\u89c9\u90fd\u5bf9\u4e0d\u4e0a AC TPO 15 Mass Extinction (\u6b63\u786e\u7387 67.94%) One interesting test of the Alvarez hypothesis is based on the presence of the rare-earth element iridium (Ir). Earth\u2019s crust contains very little of this element, but most asteroids contain a lot more . Debris thrown into the atmosphere by an asteroid collision would presumably contain large amounts of iridium, and atmospheric currents would carry this material all over the globe. A search of sedimentary deposits that span the boundary between the Cretaceous and Tertiary periods shows that there is a dramatic increase in the abundance of iridium briefly and precisely at this boundary. This iridium anomaly offers strong support for the Alvarez hypothesis even though no asteroid itself has ever been recovered. According to paragraph 6, what made iridium a useful test of the Alvarez hypothesis ? A.Its occurrence in a few locations on Earth against several locations on other planets B.Its occurrence in limited quantities on Earth against its abundance in asteroids C.Its ability to remain solid at extremely high temperatures D.Its ease of detection even in very small amounts \u9009\u62e9\uff1aB - \u539f\u6587\u5bf9\u5e94 \u5176\u4ed6\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 67.89%) Increased agricultural production in turn facilitated rural industry, an intrinsic part of the expansion of industry . Woolens and textile manufacturers, in particular, utilized rural cottage (in-home) production, which took advantage of cheap and plentiful rural labor. In the German states, the ravages of the Thirty Years' War (1618-1648) further moved textile production into the countryside. Members of poor peasant families spun or wove cloth and linens at home for scant remuneration in an attempt to supplement meager family income. Paragraph 4 supports the idea that increased agricultural production was important for the expansion of industry primarily because it. A.increased the number of available workers in rural areas B.provided new types of raw materials for use by industry C.resulted in an improvement in the health of the rural cottage workers used by manufacturers D.helped repair some of the ravages of the Thirty Years\u2019 War \u9009\u62e9\uff1aA - \u7406\u89e3\u539f\u6587\u610f\u601d TPO 11 Ancient Egyptian Sculpture (\u6b63\u786e\u7387 67.66%) Statues were normally made of stone, wood, or metal. Stone statues were worked from single rectangular blocks of material and retained the compactness of the original shape. The stone between the arms and the body and between the legs in standing figures or the legs and the seat in seated ones was not normally cut away. From a practical aspect this protected the figures against breakage and psychologically gives the images a sense of strength and power, usually enhanced by a supporting back pillar. By contrast, wooden statues were carved from several pieces of wood \u3010B\u3011 that were pegged together to form the finished work , and metal statues were either made by wrapping sheet metal around a wooden core or cast by the lost wax process. The arms could be held away from the body and carry separate items in their hands; there is no back pillar. The effect is altogether lighter and freer than that achieved in stone, but because both perform the same function, formal wooden and metal statues still display frontality. According to paragraph 3, which of the following statements about wooden statues is true ? A.Wooden statues were usually larger than stone statues. B.Wooden statues were made from a single piece of wood. C.Wooden statues contained pieces of metal or stone attached to the front. D.Wooden statues had a different effect on the viewer than stone statues. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 A\u9009\u9879\u65e0\u4e2d\u751f\u6709 B\u3001C\u9009\u9879\u9519\u8bef TPO 28 Early Saharan Pastoralists (\u6b63\u786e\u7387 67.39%) Even before the drought, the Sahara was never well watered. Both humans and animals were constantly on the move, in search of food and reliable water supplies. Under these circumstances, archaeologist Andrew Smith believes, the small herd of Bos primigenius in the desert became smaller, more closely knit breeding units as the drought took hold. The beasts were more disciplined, so that it was easier for hunters to predict their habits\u3010D\u3011, and capture animals at will\u3010B\u3011 . At the same time, both cattle and humans were more confined in their movements, staying much closer to permanent water supplies for long periods of time. As a result, cattle and humans came into close association. Paragraph 2 supports which of the following ideas about wild oxen in the Sahara region after the drought took hold ? A.They traveled in smaller herds. B.They were harder for hunters to capture. C.They tended to be significantly smaller in size. D.They moved along less predictable routes. \u9009\u62e9\uff1aC - \u539f\u6587\u539f\u53e5 A\u9009\u9879\u65e0\u4e2d\u751f\u6709 B\u3001D\u9009\u9879\u9519\u8bef A TPO 19 Succession, Climax, and Ecosystems (\u6b63\u786e\u7387 67.37%) Clements and other early ecologists saw almost lawlike regularity in the order of succession, but that has not been substantiated. A general trend can be recognized, but the details are usually unpredictable. Succession is influenced by many factors: the nature of the soil, exposure to sun and wind, regularity of precipitation, change colonizations, and many other random processes. According to paragraph 2, which of the following is a criticism of Clements \u201cview of succession\u201d ? A.The principles of succession are more lawlike than Clements thought they were. B.More evidence is needed to establish Clements' predictions about succession. C.The details of succession are affected by random processes. D.Many of the factors that determine which plants will grow in an environment, such as the nature of the soil and the exposure to sun, do not change at all. \u9009\u62e9\uff1aC - \u7406\u89e3\u539f\u6587\u610f\u601d TPO 20 Fossil Preservation (\u6b63\u786e\u7387 67.21%) Many other processes may alter the shell of the clam or snail and enhance its chances for preservation . Water containing dissolved silica, calcium carbonate, or iron may circulate through the enclosing sediment and be deposited in cavities such as narrow cavities and canals in bone once occupied by blood vessels and nerves. In such cases, the original composition of the bone or shell remains, but the fossil is made harder and more durable. This addition of a chemically precipitated substance into precipitated is termed \u201cpermineralization.\u201d Which of the following best explains the process of permineralization mentioned in paragraph 3\uff1f A. Water containing calcium carbonate circulates through a shell and deposits sediment. B.Liquid containing chemicals hardens an already existing fossil structure. C.Water passes through sediment surrounding a fossil and removes its chemical content. D.A chemical substance enters a fossil and changes its shape. \u9009\u62e9\uff1aD - \u7406\u89e3 A\u9009\u9879\u53ea\u662f\u8bf4\u4e86\u524d\u534a\u90e8\u5206\u7684\u8fc7\u7a0b\uff0c\u6ca1\u6709\u4f53\u73b0alter B\u9009\u9879\u4e5f\u6ca1\u6709\u4f53\u73b0alter C\u9009\u9879\u70edremove\u9519\u8bef B TPO 6 Infantile Amnesia (\u6b63\u786e\u7387 67.19%) A second explanation involves the influence of the social world on children\u2019s language use. Hearing and telling stories about events may help children store information in ways that will endure into later childhood and adulthood. Through hearing stories with a clear beginning, middle, and ending children may learn to extract the gist of events in ways that they will be able to describe many years later. Consistent with this view parents and children increasingly engage in discussions of past events when children are about three years old. However, hearing such stories is not sufficient for younger children to form enduring memories. Telling such stories to two year olds does not seem to produce long-lasting verbalizable memories. According to paragraph 4, what role may storytelling play in forming childhood memories ? A.It may encourage the physiological maturing of the brain. B.It may help preschool children tell the difference between ordinary and unusual memories. C.It may help preschool children retrieve memories quickly. D.It may provide an ordered structure that facilitates memory retrieval. \u9009\u62e9\uff1aD A\u3001B\u3001C\u65e0\u4e2d\u751f\u6709 TPO 22 Spartina (\u6b63\u786e\u7387 66.95%) These characteristics make Spartina a valuable component of the estuaries where it occurs naturally. The plant functions as a stabilizer and a sediment trap and as a nursery area for estuarine fish and shellfish. Once established, a stand of Spartina begins to trap sediment, changing the substrate elevation\u3010B\u3011, and eventually the stand evolves into a high marsh system where Spartina is gradually displaced by higher-elevation, brackish-water species\u3010B/C\u3011 . As elevation increases, narrow, deep channels of water form throughout the marsh. Along the east coast Spartina is considered valuable for its ability to prevent erosion and marshland deterioration; it is also used for coastal restoration projects and the creation of new wetland sites. According to paragraph 4, in its natural habitats, Spartina helps estuaries by A. controlling marshland decline B. decreasing the substrate elevation C. reducing the brackishness of the water D. increasing the flow of water into the estuary \u9009\u62e9\uff1aA - \u539f\u6587\u539f\u53e5 B\u3001C\u9009\u9879\u9519\u8bef\uff0cD\u9009\u9879\u65e0\u4e2d\u751f\u6709 .TPO 27 The Formation of Volcanic Islands (\u6b63\u786e\u7387 66.4%) The oceanic volcanic islands and their hot-spot trails are thus especially useful for geologists because they record the past locations of the plate over a fixed source. They therefore permit the reconstruction of the process of seafloor spreading, and consequently of the geography of continents and of ocean basins in the past. For example, given the current position of the Pacific Plate, Hawaii is above the Pacific Ocean hot spot. So the position of the Pacific Plate 50 million years ago can be determined by moving it such that a 50-million-year-old volcano in the hot-spot trail (sits at the location of Hawaii today). However, because the ocean basins really are short-lived features on geologic times scales, reconstructing the world\u2019s geography by backtracking along the hot-spot trail works only for the last 5 percent or so of geologic time . According to paragraph 5, why are geologists unable to trace back the entire geologic of continents from hot-spot trails ? A.Hot spots have existed for only about 5 percent of geologic time B.Hawaii did not exist 50 million years ago C.Oceanic basins that contained old hot-spot trails disappeared a long time ago D.Hot-spot trails can be reconstructed only for island chains \u9009\u62e9\uff1aC - \u539f\u6587\u610f\u601d\u8f6c\u8ff0 TPO 4 Petroleum Resources (\u6b63\u786e\u7387 66.39%) As oil becomes increasingly difficult to find, the search for it is extended into more-hostile environments . The development of the oil field on the North Slope of Alaska and the construction of the Alaska pipeline are examples of the great expense and difficulty involved in new oil discoveries. Offshore drilling platforms extend the search for oil to the ocean's continental shelves\u2014those gently sloping submarine regions at the edges of the continents. More than one-quarter of the world's oil and almost one-fifth of the world's natural gas come from offshore, even though offshore drilling is six to seven times more expensive than drilling on land. A significant part of this oil and gas comes from under the North Sea between Great Britain and Norway. Of course, there is far more oil underground than can be recovered. It may be in a pool too small or too far from a potential market to justify the expense of drilling. Some oil lies under regions where drilling is forbidden, such as national parks or other public lands. Even given the best extraction techniques, only about 30 to 40 percent of the oil in a given pool can be brought to the surface. The rest is far too difficult to extract and has to remain underground. Which of the following strategies for oil exploration is describe in paragraph 4? A.Drilling under the ocean\u2019s surface B.Limiting drilling to accessible locations C.Using highly sophisticated drilling equipment D.Constructing technologically advanced drilling platforms \u9009\u62e9\uff1aD - \u4e0d\u662f\u5f88\u786e\u5b9a A TPO 11 Begging by Nestlings (\u6b63\u786e\u738766.36%) Further evidence for the costs of begging comes from a study of differences in the begging calls of warbler species that nest on the ground versus those that nest in the relative safety of trees. The young of ground-nesting warblers produce begging cheeps of higher frequencies than do their tree-nesting relatives. These higher-frequency sounds do not travel as far, and so may better conceal the individuals producing them, who are especially vulnerable to predators in their ground nests. David Haskell created artificial nests with clay eggs and placed them on the ground beside a tape recorder that played the begging calls of either tree-nesting or of ground-nesting warblers. The eggs \u201cadvertised\u201d by the treenesters' begging calls were found bitten significantly more often than the eggs associated with the ground-nesters' calls. The experiment described in paragraph 2 supports which of the following conclusions ? A.Predators are unable to distinguish between the begging cheeps of ground-nesting and those of treenesting warblers except by the differing frequencies of the calls. B.When they can find them, predators prefer the eggs of tree-nesting warblers to those of groundnesting warblers. C.The higher frequencies of the begging cheeps of ground-nesting warblers are an adaptation to the threat that ground-nesting birds face from predators D.The danger of begging depends more on the frequency of the begging cheep than on how loud it is. \u9009\u62e9\uff1aC - \u539f\u6587\u610f\u601d\u7406\u89e3 A\u9009\u9879 TPO 13 Methods of Studying Infant Perception (\u6b63\u786e\u738766.25%) Two additional techniques of studying infant perception have come into vogue. The first is the habituation-dishabituation technique, in which a single stimulus is presented repeatedly to the infant until there is a measurable decline (habituation) in whatever attending behavior is being observed. At that point a new stimulus is presented, and any recovery (dishabituation) in responsiveness is recorded. If the infant fails to dishabituate and continues to show habituation with the new stimulus, it is assumed that the baby is unable to perceive the new stimulus as different. The habituation-dishabituation paradigm has been used most extensively with studies of auditory and olfactory perception in infants. The second technique relies on evoked potentials, which are electrical brain responses that may be related to a particular stimulus because of where they originate. Changes in the electrical pattern of the brain indicate that the stimulus is getting through to the infant's central nervous system and eliciting some form of response. According to paragraph 4, which of the following leads to the conclusion that infants are able to differentiate between stimuli in a habituation dishabituation study ? A.Dishabituation occurs with the introduction of a new stimulus. B.Electrical responses in the infant's brain decline with each new stimulus. C.Habituation is continued with the introduction of a new stimulus. D.The infant displays little change in electrical brain responses. \u9009\u62e9\uff1aD A\u9009\u9879\u548cC\u9009\u9879\u662f\u76f8\u53cd\u7684\u7ed3\u8bba\uff0c\u672a\u77e5 B\u9009\u9879\u4e2d\u7684decline\u65e0\u4e2d\u751f\u6709 A TPO 23 Seventeenth-Century Dutch Agriculture (\u6b63\u786e\u7387 66.12%) The Dutch battle against the sea is legendary. Noorderkwartier in Holland, with its numerous lakes and stretches of water, was particularly suitable for land reclamation and one of the biggest projects undertaken there was the draining of the Beemster lake which began in 1608. The richest merchants in Amsterdam contributed money to reclaim a good 7,100 hectares of land.\u3010B\u3011 F orty-three windmills powered the drainage pumps\u3010A\u3011 so that they were able to lease the reclamation to farmers as early as 1612, with the investors receiving annual leasing payments at an interest rate of 17 percent.\u3010C\u3011 Land reclamation continued, and between 1590 and 1665, almost 100,000 hectares were reclaimed from the wetland areas of Holland, Zeeland, and Friesland. However, land reclamation decreased significantly after the middle of the seventeenth century because the price of agricultural products began to fall, making land reclamation far less profitable in the second part of the century. According to paragraph 5, which of the following was an important reason why land- reclamation projects in the first half of the seventeenth century proceeded rapidly ? A. Windmills became powerful enough to run drainage pumps efficiently. B. Merchants invested large amounts of money in reclamation. C. High interest rates discouraged people from buying land already available. D. Reclaimed land was much more suitable for agriculture than the existing land. \u9009\u62e9\uff1aB - \u7406\u89e3\u539f\u6587\u610f\u601d A\u9009\u9879\u4e0d\u662f\u4e3b\u8981\u539f\u56e0 C\u9009\u9879discourage\u9519\u8bef D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 16 Trade and the Ancient Middle East (\u6b63\u786e\u7387 65.54%) Reliance on trade had several important consequences. Production was generally in the hands of skilled individual artisans doing piecework under the tutelage of a master who was also the shop owner. In these shops differences of rank were blurred as artisans and masters labored side by side in the same modest establishment\u3010A\u3011 , were usually members of the same guild and religious sect, lived in the same neighborhoods, and often had assumed (or real) kinship relationships. The worker was bound to the master by a mutual contract that either one could repudiate , and the relationship was conceptualized as one of partnership. According to paragraph 2, how did Middle Eastern shop owners treat their workers ? A.Workers were ranked according to their skill level, with the most-experienced Artisans becoming partial owners of the shop B.Shop owners treated different workers differently depending on how much the workers had in common with their masters. C.Workers were bound to their masters by unbreakable contracts that strictly defined the terms of their partnership. D.The shop owner worked alongside the workers and often considered them partners and members of the family. \u9009\u62e9\uff1aD A\u3001B\u9009\u9879\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u4e2d\u7684unbreakable\u9519\u8bef TPO 29 The History of Waterpower (\u6b63\u786e\u7387 65.51%) The earliest waterpower mills were probably vertical-axis mills for grinding corn, known as Norse or Greek mills, which seem to have appeared during the first or second century B.C. in the Middle East and a few centuries later in Scandinavia. In the following centuries, increasingly sophisticated waterpower mills were built throughout the Roman Empire and beyond its boundaries in the Middle East and northern Europe. In England, the Saxons are thought to have used both horizontal-and verticalaxis wheels. The first documented English mill was in the eighth century, but three centuries later about 5,000 were recorded, suggesting that every settlement of any size had its mill. According to paragraph 2, what was true of the waterpower mills built throughout the Roman Empire ? A.Most had horizontal-axis wheels B.Their design was based on mills that had long been used in Scandinavia C.Their design was more popular beyond the empire's boundaries than it was within the empire. D.They were more advanced than the mills used in the Middle East at an earlier time. \u9009\u62e9\uff1aD more advanced \u5bf9\u5e94 increasingly sophisticated A\u3001B\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 3 Architecture (\u6b63\u786e\u738765.36%) Modern architectural forms generally have three separate components comparable to elements of the human body ; a supporting skeleton or frame, an outer skin enclosing the interior spaces, equipment, similar to the body\u2019s vital organs and systems. The equipment includes plumbing, electrical wiring, hot water, and air-conditioning. Of course in early architecture\u2014such as igloos and adobe structures\u2014 there was no such equipment\u3010B\u3011 , and the skeleton and skin were often one. Which of the following correctly characterizes the relationship between the human body and architecture that is described in paragraph5? A.Complex equipment inside buildings is the one element in modern architecture that resembles a component of the human body. B.The components in early buildings were similar to three particular elements of the human body. C.Modern buildings have components that are as likely to change as the human body is. D.In general, modern buildings more closely resemble the human body than earlier buildings do. \u9009\u62e9\uff1aD A\u9009\u9879\u9519\u8bef\uff0cthree element B\u9009\u9879similar\u9519\u8bef C\u9009\u7ebf\u65e0\u4e2d\u751f\u6709\uff0c\u539f\u6587\u672a\u4f53\u73b0change\u7684\u7279\u70b9 TPO 29 Competition (\u6b63\u786e\u7387 65.34%) To what extent competition determines the composition of a community and the density of particular species has been the source of considerable controversy. The problem is that competition ordinarily cannot be observed directly but must be inferred from the spread or increase of one species and the concurrent reduction or disappearance of another species. The Russian biologist G.F. Gause performed numerous two-species became extinct when only a single kind of resource was available. On the basis of these experiments and of field observations, the so-called law of competitive exclusion was formulated, according to which no two species can occupy the same niche. Numerous seeming exceptions to this law have since been found, but they can usually be explained as cases in which the two species, even though competing for a major joint resource, did not really occupy exactly the same niche. Paragraph 3 supports the idea that Gause's experiments were important because they A.provided a situation in which competition could be removed from the interaction between two species B.showed that previous ideas about the extent to which competition determines the composition of a community were completely mistaken C.helped establish that competition will remove all but one species from any given ecological niche D.offered evidence that competition between species is minimal when there is an overabundance of a single food source \u9009\u62e9\uff1aC A\u9009\u9879\u9519\u8bef could be romoved B\u9009\u9879\u9519\u8bef completely mistaken D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 11 Orientation and Navigation (\u6b63\u786e\u7387 65.24%) Early in his research, Kramer found that caged migratory birds became very restless at about the time they would normally have begun migration in the wild. Furthermore, he noticed that as they fluttered around in the cage, they often launched themselves in the direction of their normal migratory route. He then set up experiments with caged starlings and found that their orientation was, in fact, in the proper migratory direction except when the sky was overcast, at which times there was no clear direction to their restless movements. Kramer surmised, therefore, that they were orienting according to the position of the Sun. To test this idea, he blocked their view of the Sun and used mirrors to change its apparent position. He found that under these circumstances, the birds oriented with respect to the new \u201cSun\u201d. They seemed to be using the Sun as a compass to determine direction. At the time, this idea seemed preposterous. How could a bird navigate by the Sun when some of us lose our way with road maps? Obviously, more testing was in order. According to paragraph 3, when do caged starlings become restless ? A.When the weather is overcast B.When they are unable to identify their normal migratory route C.When their normal time for migration arrives D.When mirrors are used to change the apparent position of the Sun \u9009\u62e9\uff1aC - \u539f\u6587\u539f\u53e5\u540c\u4e49\u8f6c\u6362 TPO 18Lightning (\u6b63\u786e\u7387 64.14%) The separation of charged particles that forms in a storm cloud has a sandwich-like structure. Concentrations of positively charged particles develop at the top and bottom of the cloud, but the middle region becomes negatively charged. Recent measurements made in the field together with laboratory simulations offer a promising explanation of how this structure of charged particles forms. What happens is that small (millimeter-to centimeter-size) pellets of ice form in the cold upper regions of the cloud. When these ice pellets fall, some of them strike much smaller ice crystals in the center of the cloud. The temperature at the center of the cloud is about -15\u00b0C or lower. At such temperatures, the collision between the ice pellets and the ice crystals causes electrical charges to shift so that the ice pellets acquire a negative charge and the ice crystals become positively charged. Then updraft wind currents carry the light, positively charged ice crystals up to the top of the cloud. The heavier negatively charged ice pellets are left to concentrate in the center. This process explains why the top of the cloud becomes positively charged, while the center becomes negatively charged. The negatively charged region is large: several hundred meters thick and several kilometers in diameter. Below this large, cold, negatively charged region, the cloud is warmer than -15\u00b0C , and at these temperatures, collisions between ice crystals and falling ice pellets produce positively charged ice pellets that then populate a small region at the base of the cloud . According to paragraph 2, why are positively charged ice pellets produced in the lower part of the cloud ? A.Collisions between ice crystals and ice pellets increase in number in the lower part of the cloud B.The lower part of the cloud is smaller than the region above it C.More ice pellets than ice crystals reach the lower part of the cloud D.Temperatures in the lower part of the cloud are warmer than -15\u00b0C \u9009\u62e9\uff1aD A\u9009\u9879\u4e2d\u7684increase\u672a\u4f53\u73b0 B\u9009\u9879\u4e2d\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u9519\u8bef TPO 10 Variations in the Climate (\u6b63\u786e\u7387 64.12%) Over long periods of time, substances whose physical and chemical properties change with the ambient climate at the time can be deposited in a systematic way to provide a continuous record of changes in those properties overtime, sometimes for hundreds or thousands of years. Generally, the layering occurs on an annual basis, hence the observed changes in the records can be dated. Information on temperature, rainfall, and other aspects of the climate that can be inferred from the systematic changes in properties is usually referred to as proxy data. Proxy temperature records have been reconstructed from ice core drilled out of the central Greenland ice cap, calcite shells embedded in layered lake sediments in Western Europe, ocean floor sediment cores from the tropical Atlantic Ocean, ice cores from Peruvian glaciers, and ice cores from eastern Antarctica . While these records provide broadly consistent indications that temperature variations can occur on a global scale, there are nonetheless some intriguing differences, which suggest that the pattern of temperature variations in regional climates can also differ significantly from each other. According to paragraph 3, scientists are able to reconstruct proxy temperature records by A.studying regional differences in temperature variations B.studying and dating changes in the properties of substances C.observing changes in present day climate conditions D.inferring past climate shifts from observations of current climatic changes \u9009\u62e9\uff1aB - \u539f\u6587\u540c\u4e49\u8f6c\u6362 TPO 1 The Origins of Theater (\u6b63\u786e\u7387 64.07%) Stories (myths) may then grow up around a ritual. Frequently the myths include representatives of those supernatural forces that the rites celebrate or hope to influence. Performers may wear costumes and masks to represent the mythical characters or supernatural forces in the rituals or in accompanying celebrations. As a people becomes more sophisticated, its conceptions of supernatural forces and causal relationships may change. As a result , it may abandon or modify some rites. But the myths that have grown up around the rites may continue as part of the group\u2019s oral tradition\u3010D\u3011 and may even come to be acted out under conditions divorced from these rites. When this occurs, the first step has been taken toward theater as an autonomous activity\u3010A\u3011, and thereafter entertainment and aesthetic values may gradually replace the former mystical and socially efficacious concerns. According to paragraph 2, what may cause societies to abandon certain rites ? A.Emphasizing theater as entertainment B.Developing a new understanding of why events occur. C.Finding a more sophisticated way of representing mythical characters D.Moving from a primarily oral tradition to a more written tradition \u9009\u62e9\uff1aC A\u3001B\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 B TPO 2 The Origins of Cetaceans (\u6b63\u786e\u7387 63.93%) It should be obvious that cetaceans-whales, porpoises, and dolphins-are mammals. They breathe through lungs, not through gills, and give birth to live young. Their streamlined bodies, the absence of hind legs, and the presence of a fluke and blowhole cannot disguise their affinities with land dwelling mammals. However, unlike the cases of sea otters and pinnipeds (seals, sea lions, and walruses, whose limbs are functional both on land and at sea), it is not easy to envision what the first whales looked like. Extinct but already fully marine cetaceans are known from the fossil record. How was the gap between a walking mammal and a swimming whale bridged? Missing until recently were fossils clearly intermediate, or transitional, between land mammals and cetaceans. In paragraph 1, what does the author say about the presence of a blowhole in cetaceans ? A.It clearly indicates that cetaceans are mammals. B.It cannot conceal the fact that cetaceans are mammals. C. It is the main difference between cetaceans and land-dwelling mammals. D. It cannot yield clues about the origins of cetaceans. \u9009\u62e9\uff1aA - \u7406\u89e3\u539f\u6587\u610f\u601d B \u9519\u9009\u539f\u56e0\uff1a\u770b\u9519\u4e86 TPO 31 Savanna Formation (\u6b63\u786e\u7387 63.82%) Most savannas probably experience mild fires frequently and major burns every two years or so. Many savanna and dry-forest plant species are called pyrophytes, meaning they are adapted in various ways to withstand occasional burning\u3010C\u3011. Frequent fire is a factor to which rain forest species seem unable to adapt, although ancient charcoal remains from Amazon forest soils dating prior to the arrival of humans suggest that moist forests also occasionally burn. Experiments suggest that if fire did not occur in savannas in the Americas, species composition would change significantly. When burning occurs, it prevents competition among plant species from progressing to the point where some species exclude others, reducing the overall diversity of the ecosystem\u3010B / D\u3011 . But in experimental areas protected from fire, a few perennial grass species eventually come to dominate, outcompeting all others. Evidence from other studies suggests that exclusion of fire results in markedly decreased plant-species richness, often with an increase in tree density. There is generally little doubt that fire is a significant factor in maintaining savanna, certainly in most Paragraph 5 supports which of the following statements regarding the importance of fires in maintaining savannas ? A.Fires prevent the growth of pyrophytes. B.Fires eliminate some species and thus reduce the overall diversity of the ecosystem. C.Fires that occur once every two years are unlikely to help maintain savannas. D.Fires prevent some species from eliminating other species with which they compete. \u9009\u62e9\uff1aD A\u3001B\u3001C\u9009\u9879\u9519\u8bef TPO19 Discovering the Ice Ages(\u6b63\u786e\u7387 63.75%) In the middle of the nineteenth century\u3010A\u3011 , Louis Agassiz, one of the first scientists to study glaciers, immigrated to the United States from Switzerland and became a professor at Harvard University, where he continued his studies in geology and other sciences. For his research, Agassiz visited many places in the northern parts of Europe and North America, from the mountains of Scandinavia and New England to the rolling hills of the American Midwest. In all these diverse regions, Agassiz saw signs of glacial erosion and sedimentation. In flat plains country, he saw moraines (accumulations of earth and loose rock that form at the edges of glaciers) that reminded him of the terminal moraines found at the end of valley glaciers in the Alps. The heterogeneous material of the drift (sand, clay, and rocks deposited there) convinced him of its glacial origin. The areas covered by this material were so vast that the ice that deposited it must have been a continental glacier larger than Greenland or Antarctica. Eventually, Agassiz and others convinced geologists and the general public that a great continental glaciation had extended the polar ice caps far into regions that now enjoy temperate climates. For the first time, people began to talk about ice ages. It was also apparent that the glaciation occurred in the relatively recent past because the drift was soft, like freshly deposited sediment. We now know the age of the glaciation accurately from radiometric dating of the carbon-14 in logs buried in the drift. The drift of the last glaciation was deposited during one of the most recent epochs of geologic time, the Pleistocene, which lasted from 1.8 million to 10,000 years ago. Along the east coast of the United States, the southernmost advance of this ice is recorded by the enormous sand and drift deposits of the terminal moraines that form Long Island and Cape Cod. It soon became clear that there were multiple glacial ages during the Pleistocene, with warmer interglacial intervals between them . As geologists mapped glacial deposits in the late nineteenth century, they became aware that there were several layers of drift, the lower ones corresponding to earlier ice ages. Between the older layers of glacial material were well- developed soils containing fossils of warmclimate plants. These soils were evidence that the glaciers retreated as the climate warmed. By the early part of the twentieth century\u3010C\u3011 , scientists believed that four distinct glaciations had affected North America and Europe during the Pleistocene epoch. This idea was modified in the late twentieth century\u3010D\u3011 , when geologists and oceanographers examining oceanic sediment found fossil evidence of warming and cooling of the oceans. Ocean sediments presented a much more complete geologic record of the Pleistocene than continental glacial deposits did. The fossils buried in Pleistocene and earlier ocean sediments were of foraminifera\u2014small, singlecelled marine organisms that secrete shells of calcium carbonate, or calcite. These shells differ in their proportion of ordinary oxygen (oxygen-16) and the heavy oxygen isotope (oxygen-18). The ratio of oxygen-16 to oxygen-18 found in the calcite of a foraminifer's shell depends on the temperature of the water in which the organism lived. Different ratios in the shells preserved in various layers of sediment reveal the temperature changes in the oceans during the Pleistocene epoch. Isotopic analysis of shells allowed geologists to measure another glacial effect. They could trace the growth and shrinkage of continental glaciers, even in parts of the ocean where there may have been no great change in temperature\u2014around the equator, for example. The oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice. During glaciations, the lighter oxygen-16 has a greater tendency to evaporate from the ocean surface than the heavier oxygen-18 does. Thus, more of the heavy isotope is left behind in the ocean and absorbed by marine organisms. From this analysis of marine sediments, geologists have learned that there were many shorter, more regular cycles of glaciation and deglaciation than geologists had recognized from the glacial drift of the continents alone. According to the passage, when did scientists begin to realize that more than one ice age had occurred ? A.In the mid nineteenth century B.In the late nineteenth century C.In the early twentieth century D.In the late twentieth century \u9009\u62e9\uff1aB - \u539f\u6587\u53e5\u5b50\u5b9a\u4f4d TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 63.64%) Bills of exchange contributed to the development of banks, as exchangers began to provide loans. Not until the eighteenth century, however, did such banks as the Bank of Amsterdam and the Bank of England begin to provide capital for business investment. Their principal function was to provide funds for the state . According to paragraph 7, until the eighteenth century, it was the principal function of which of the following to provide funds for the state ? A.Bills of exchange B.Exchangers who took loans C.Banks D.Business investment \u9009\u62e9\uff1aC - \u6307\u4ee3\u8bcdtheir TPO 6 William Smith (\u6b63\u786e\u7387 63.61%) Not only could Smith identify rock strata by the fossils they contained, he could also see a pattern emerging; certain fossils always appear in more ancient sediments, while others begin to be seen as the strata become more recent. By following the fossils, Smith was able to put all the strata of England's earth into relative temporal sequence. About the same time, Georges Cuvier made the same discovery\u3010B\u3011 while studying the rocks around Paris. Soon it was realized that this principle of faunal (animal) succession was valid not only in England or France but virtually everywhere. It was actually a principle of floral succession as wel\u3010A\u3011l , because plants showed the same transformation through time as did fauna\u3010D\u3011 . Limestone may be found in the Cambrian or-300 million years later-in the Jurassic strata but a trilobite\u2014the ubiquitous marine arthropod that had its birth in the Cambrian\u2014will never be found in Jurassic strata, nor a dinosaur in the Cambrian. Select the TWO answer choices that are true statements based upon the discussion of the principle of faunal succession in paragraph 5. To receive credit, you must select TWO answers. A.It was a principle that applied to fauna but not to flora. B.It was discovered independently by two different geologists. C.It describes how fossils are distributed in rock strata D.It explains why plants and animals undergo transformations through time. \u9009\u62e9\uff1aBC - \u539f\u6587\u610f\u601d\u7406\u89e3 TPO 4 Cave Art in Europe (\u6b63\u786e\u7387 63.16%) The particular symbolic significance of the cave paintings in southwestern France is more explicitly revealed, perhaps, by the results of a study conducted by researchers Patricia Rice and Ann Paterson. The data they present suggest that the animals portrayed in the cave paintings were mostly the ones that the painters preferred for meat and for materials such as hides. For example, wild cattle (bovines) and horses are portrayed more often than we would expect by chance, probably because they were larger and heavier (meatier) than other animals in the environment. In addition, the paintings mostly portray animals that the painters may have feared the most because of their size, speed, natural weapons such as tusks and horns, and the unpredictability of their behavior. That is, mammoths, bovines, and horses are portrayed more often than deer and reindeer. Thus, the paintings are consistent with the idea that the art is related to the importance of hunting in the economy of Upper Paleolithic people. Consistent with this idea, according to the investigators, is the fact that the art of the cultural period that followed the Upper Paleolithic also seems to reflect how people got their food\u3010B\u3011. But in that period, when getting food no longer depended on hunting large game animals (because they were becoming extinct), the art ceased to focus on portrayals of animals.\u3010C\u3011 According to paragraph 4, what change is evident in the art of the period following the Upper Paleolithic ? A.This new art starts to depict small animals rather than large ones. B.This new art ceases to reflect the ways in which people obtained their food. C.This new art no longer consists mostly of representations of animals. D.This new art begins to show the importance of hunting to the economy. \u9009\u62e9\uff1aC B\u9009\u9879\u9519\u8bef\uff1bA\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 12 Water in the Desert (\u6b63\u786e\u7387 62.59%) Groundwater is stored in the pore spaces and joints of rocks and unconsolidated (unsolidified) sediments or in the openings widened through fractures and weathering. The water-saturated rock or sediment is known as an \"\"aquifer\"\". Because they are porous, sedimentary rocks, such as sandstones and conglomerates, are important potential sources of groundwater. Large quantities of water may also be stored in lime stones when joints and cracks have been enlarged to form cavities. Most limestone and sandstone aquifers are deep and extensive but may contain ground waters that are not being recharged. Most shallow aquifers in sand and gravel deposits produce lower yields, but they can be rapidly recharged. Some deep aquifers are known as \"\"fossil waters. The term \"\"fossil\"\" describes water that has been present for several thousand years\u3010A\u3011. These aquifers became saturated more than 10,000 years ago\u3010C / B\u3011 and are no longer being recharged \u3010D\u3011. According to paragraph 6, the aquifers called \u201cfossil waters\u201d A.contain fossils that are thousands of years old B.took more than 10.000 years to become saturated with water C.have not gained or lost any water for thousands of years D.have been collecting water for the past 10,000 years \u9009\u62e9\uff1aC A\u9009\u9879\u9519\u8bef\uff0c\u539f\u6587\u662f\u6307\u91cc\u9762\u7684\u6c34\u5206\u5b58\u5728\u4e86\u51e0\u5343\u5e74\uff1bB\u9009\u9879\u9519\u8bef\uff0c\u539f\u6587\u662f\u6307\u572810000\u5e74\u4ee5\u524d\u5c31\u5df2\u7ecf\u5145\u6ee1\u6c34\u5206\u4e86\uff1bD\u9009\u9879\u9519\u8bef\uff0c\u539f\u6587are no longer being recharged\u53cd\u9a73 TPO 29 The History of Waterpower (\u6b63\u786e\u7387 62.32%) There was much debate on the relative efficiencies of different types of water wheels. The period from about 1650 until 1800 saw some excellent scientific and technical investigations of different designs. They revealed output powers ranging from about 1 horsepower to perhaps 60 for the largest wheels and confirm that for maximum efficiency, the water should pass across the blades as smoothly as possible and fall away with minimum speed\u3010B\u3011 , having given up almost all of its kinetic energy\u3010C\u3011 . (They also proved that, in principle, the overshot wheel, a type of wheel in which an overhead stream of water powers the wheel, should win the efficiency competition.\u3010D\u3011 ) According to paragraph 3, which of the following was discovered as a result of scientific and technical investigations of waterpower conducted between 1650 and 1800? A.Some types of small waterwheels can produce as much horsepower as the very largest wheels. B.Waterwheels operate more efficiently when water falls away from their blades slowly than when water falls away quickly. C.Waterwheel efficiency can be improved by increasing the amount of kinetic energy water contains as it passes over a waterwheel's blades. D.Unlike other types of waterwheels, the overshot wheel is capable of producing more than 60 horsepower units of energy. \u9009\u62e9\uff1aB A\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879\u9519\u8bef\uff0c\u4e0e\u539f\u6587\u610f\u601d\u76f8\u53cd\uff0cincrease \u2260 give up TPO 30 Role of Play in Development (\u6b63\u786e\u7387 62.3%) Play is easier to define with examples than with concepts.\u3010A\u3011 In any case, in animals it consists of leaping, running, climbing, throwing, wrestling, and other movements, either along, with objects, or with other animals. Depending on the species, play may be primarily for social interaction, exercise, or exploration. One of the problems in providing a clear definition of play is that it involves the same behaviors that take place in other circumstance --dominance, predation, competition, and real fighting.\u3010B\u3011 Thus, whether play occurs or not depends on the intention of the animals, and the intentions are not always clear from behaviors alone.\u3010D\u3011 According to paragraph 1, why is play difficult to define ? A.Play must be defined with concepts, not examples. B.Play behavior often looks like nonplay behavior. C.Play often occurs in the presence of animals that are not playing. D.Play occurs independently of an animal\u2019s intentions. \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef\uff0c\u8fc7\u4e8e\u7edd\u5bf9\uff1bC\u9009\u9879\u903b\u8f91\u9519\u8bef\uff0c\u56e0\u4e3aplay\u80af\u5b9a\u662f\u5728animals that are playing\u7684\u65f6\u5019\u53d1\u751f\u7684\uff0c\u82e5play\u6362\u6210play behavior\u5219\u6b63\u786e\uff1bD\u9009\u9879\u9519\u8bef TPO 19 The Roman Army's Impact on Britain (\u6b63\u786e\u7387 61.33%) In the wake of the Roman Empire's conquest of Britain in the first century A.D., a large number of troops stayed in the new province, and these troops had a considerable impact on Britain with their camps, fortifications, and participation in the local economy. Assessing the impact of the army on the civilian population starts from the realization that the soldiers were always unevenly distributed across the country.\u3010A\u3011 Areas rapidly incorporated into the empire were not long affected by the military. Where the army remained stationed, its presence was much more influential. The imposition of a military base involved the requisition of native lands for both the fort and the territory needed to feed and exercise the soldiers' animals.\u3010C\u3011 The imposition of military rule also robbed local leaders of opportunities to participate in local government\u3010D\u3011 , so social development was stunted and the seeds of disaffection sown. This then meant that the military had to remain to suppress rebellion and organize government. According to paragraph 1, what effect did military occupation have on the local population ? A.It encouraged more even distribution of the population and the settlement of previously undeveloped territory. B.It created discontent and made continuing military occupation necessary. C.It required local labor to construct forts and feed and exercise the soldiers' animals. D.It provided local leaders with opportunities to participate in governance. \u9009\u62e9\uff1aB A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff0c\u539f\u6587\u8bf4\u7684\u662f\u58eb\u5175were distributed\uff1bC\u9009\u9879\u7684local labor\u4e0d\u6b63\u786e\uff0c\u662fnative lands\uff1bD\u9009\u9879\u9519\u8bef\uff0crob \u2260 provide TPO 8 The Rise of Teotihuac\u00e1n (\u6b63\u786e\u7387 61.26%) It seems likely that Teotihuac\u00e1n\u2019s natural resources\u2015along with the city elite\u2019s ability to recognize their potential\u3010B\u3011 \u2015 gave the city a competitive edge over its neighbors , The valley, like many other places in Mexican and Guatemalan highlands, was rich in obsidian\u3010D\u3011 . The hard volcanic stone was a resource that had been in great demand for many years, at least since the rise of the Olmecs (a people who flourished between 1200 and 400 B.C.), and it apparently had a secure market. Moreover, recent research on obsidian tools\u3010C\u3011 found at Olmecs sites has shown that some of the obsidian obtained by the Olmecs originated near Teotihuac\u00e1n . Teotihuac\u00e1n obsidian must have been recognized as a valuable commodity for many centuries before the great city arose. Which of the following allowed Teotihuac\u00e1n to have \u201ca competitive edge over its neighbors\u201d ? A.A well-exploited and readily available commodity B.The presence of a highly stable elite class C.Knowledge derived directly from the Olmecs about the art of tool making D. Scarce natural resources in nearby areas such as those located in what are now the Guatemalan and Mexican highlands \u9009\u62e9\uff1aD A\u9009\u9879\u4e0d\u77e5\u9053\u54ea\u91cc\u9519\u4e86\uff0c\u5e94\u8be5\u662f\u65e0\u4e2d\u751f\u6709\uff1bB\u9009\u9879\u4e0d\u662f\u4e3b\u8981\u539f\u56e0\uff1bC\u9009\u9879\u548c\u9898\u76ee\u65e0\u5173 A TPO 7 Ancient Rome and Greece (\u6b63\u786e\u7387 60.26%) Rome\u2019s debt to Greece was enormous. The Romans adopted Greek religion and moral philosophy. In literature, Greek writers were consciously used as models by their Latin successors. It was absolutely accepted that an educated Roman should be fluent in Greek\u3010A\u3011 . In speculative philosophy and the sciences, the Romans made virtually no advance on early achievements. Yet it would be wrong to suggest that Rome was somehow a junior partner in Greco-Roman civilization. The Roman genius was projected into new spheres\u2014especially into those of law, military organization\u3010C\u3011, administration, and engineering. Moreover, the tensions that arose within the Roman state produced literary and artistic sensibilities of the highest order. \u200b It was no accident that many leading Roman soldiers and statesmen were writers of high caliber . Which of the following statements about leading Roman soldiers and statesmen is supported by paragraphs 5 and 6? A.They could read and write the Greek language. B.They frequently wrote poetry and plays. C.They focused their writing on military matters. D.They wrote according to the philosophical laws of the Greeks. \u9009\u62e9\uff1aA B\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879\u4ee5\u504f\u6982\u5168 TPO 2 Early Cinema (\u6b63\u786e\u7387 59.64%) With the advent of projection, the viewer's relationship with the image was no longer private, as it had been with earlier peepshow devices such as the Kinetoscope and the Mutoscope , which was a similar machine that reproduced motion by means of successive images on individual photographic cards instead of on strips of celluloid.\u3010D\u3011 It suddenly became public-an experience that the viewer shared with dozens, scores, and even hundreds of others. At the same time, the image that the spectator looked at expanded from the minuscule peepshow dimensions of 1 or 2 inches (in height) to the life-size proportions of 6 or 9 feet. Which of the following is mentioned in paragraph 6 as one of the ways the Mutoscope differed from the Kinetoscope ? A.Sound and motion were simultaneously produced in the Mutoscope. B.More than one person could view the images at the same time with the Mutoscope. C.The Mutoscope was a less sophisticated earlier prototype of the Kinetoscope. D.A different type of material was used to produce the images used in the Mutocope. \u9009\u62e9\uff1aD - \u539f\u6587\u539f\u53e5\u7406\u89e3 TPO 31 Speciation in Geographically Isolated Populations (\u6b63\u786e\u7387 59.54%) Geographic isolation can also proceed slowly, over great spans of time. We find evidence of such extended events in the fossil record, which affords glimpse into the breakup of formerly continuous environments. For example, during past ice ages, glaciers advanced down through North America and Europe and gradually cut off parts of populations from one another. When the glaciers retreated, the separated populations of plants and animals came into contact again . Some groups that had descended from the same parent population were no longer reproductively compatible\u3010A\u3011 \u2013 they had evolved into separate species. In other groups, however, genetic divergences had not proceeded so far, and the descendants could still interbreed \u2013 for them, reproductive isolation was not completed, and so speciation had not occurred. According to paragraph 3, separation of subpopulations by glaciers resulted in speciation in those groups of plants and animals that A.Were reproductively isolated even after the glaciers disappeared B.Had adjusted to the old conditions caused by the glaciers C.Were able to survive being separated from their parent population D.Had experienced some genetic divergences from their parent population \u9009\u62e9\uff1aA B\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bD\u662f\u6709\u7684\uff0c\u4e0d\u77e5\u9053\u54ea\u91cc\u9519\u8bef TPO 21 Autobiographical Memory (\u6b63\u786e\u7387 59.52%) Another suggestion is that before children can talk about past events in their lives, they need to have a reasonable understanding of the self as a psychological entity.\u3010B\u3011 The development of an understanding of the self becomes evident between the first and second years of life and shows rapid elaboration in subsequent years. The realization that the physical self has continuity in time,\u3010C\u3011 according to this hypothesis, lays the foundation for the emergence of autobiographical memory. According to paragraph 3, what is the relationship between autobiographical memory and the development of an understanding of the self ? A.Autobiographical memory aids in the development of an understanding of the self. B.Children possess an understanding of the self when they can talk about past events in their lives. C.The realization that the self continues through time may aid in the onset of autobiographical memory. D.The development of autobiographical memory helps children gain an understanding of their roles in their social relationships. \u9009\u62e9\uff1aC - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 A\u9009\u9879\u9519\u8bef\uff0c\u4e24\u8005\u5173\u7cfb\u76f8\u53cd\uff1bB\u9009\u9879\u903b\u8f91\u9519\u8bef\uff1bD\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 14 Maya Water Problems (\u6b63\u786e\u7387 59.23%) Although southem Maya areas received more rainfall than northern areas, problems of water were paradoxically more severe in the wet south. While that made things hard for ancient Maya living in the south, it has also made things hard for modem archaeologists who have difficulty understanding why ancient droughts caused bigger problems in the wet south than in the dry north. The likely explanation is that an area of underground freshwater underlies the Yucatan Peninsula, but surface elevation increases from north to south, so that as one moves south the land surface lies increasingly higher above the water table.\u3010D\u3011 In the northern peninsula the elevation is sufficiently low that the ancient Maya were able to reach the water table at deep sinkholes called cenotes, or at deep caves. In low-elevation north coastal areas without sinkholes, the Maya would have been able to get down to the water table by digging wells up to 75 feet (22 meters) deep. But much of the south lies too high above the water table for cenotes or wells to reach down to it. Making matters worse, most of the Yucatan Peninsula consists of karst, a porous sponge-like limestone terrain where rain runs straight into the ground and where little or no surface water remains available.\u3010B\u3011 Which of the following statements about the availability of water in the Mayan homeland is supported by paragraph 3? A.The construction of wells was an uncommon practice in both the north and the south because it was too difficult to dig through the karst. B.In most areas in the north and the south, rainwater was absorbed directly into the porous karst. C.The water table was an important resource for agriculture in both the north and the south of the Yucatan Peninsula, D.The lack of surface water in both the north and the south was probably due to the fact that most of it was quickly used up for agricultural purposes. \u9009\u62e9\uff1aB A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879south\u65e0\u6cd5\u5229\u7528water table\uff1bD\u9009\u9879\u9519\u8bef TPO 1 Timberline Vegetation on Mountains (\u6b63\u786e\u7387 59.06%) At the upper timberline the trees begin to become twisted and deformed. This is particularly true for trees in the middle and upper latitudes, which tend to attain greater heights on ridges, whereas in the tropics the trees reach their greater heights in the valleys. This is because middle- and upper- latitude timberlines are strongly influenced by the duration and depth of the snow cover\u3010A\u3011 . As the snow is deeper and lasts longer in the valleys, trees tend to attain greater heights on the ridges, even though they are more exposed to high-velocity winds\u3010C\u3011 and poor, thin soils there. In the tropics, the valleys appear to be more favorable because they are less prone to dry out, they have less frost, and they have deeper soils. According to paragraph 3, which of the following is true of trees in the middle and upper latitudes ? A.Tree growth is negatively affected by the snow cover in valleys. B.Tree growth is greater in valleys than on ridges. C.Tree growth on ridges is not affected by high-velocity winds. D.Tree growth lasts longer in those latitudes than it does in the tropics. \u9009\u62e9\uff1aA B\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879\u9519\u8bef TPO 6 Infantile Amnesia (\u6b63\u786e\u7387 59.03%) A third likely explanation for infantile amnesia involves incompatibilities between the ways in which infants encode information and the ways in which older children and adults retrieve it. Whether people can remember an event depends critically on the fit between the way in which they earlier encoded the information and the way in which they later attempt to retrieve it. The better able the person is to reconstruct the perspective from which the material was encoded, the more likely that recall will be successful. This view is supported by a variety of factors that can create mismatches between very young children's encoding and older children's and adults' retrieval efforts . The world looks very different to a person whose head is only two or three feet above the ground than to one whose head is five or six feet above it, older children and adults often try to retrieve the names of things they saw, but infants would not have encoded the information verbally. General knowledge of categories of events such as a birthday party or a visit to the doctor's office helps older individuals encode their experiences, but again, infants and toddlers are unlikely to encode many experiences within such knowledge structures. According to paragraphs 5 and 6, one disadvantage very young children face in processing information is that they cannot A.process a lot of information at one time B.organize experiences according to type C.block out interruptions D.interpret the tone of adult language \u9009\u9879\uff1aB - \u4e0d\u786e\u5b9a TPO 23 Rock Art of the Australia Aborigines (\u6b63\u786e\u7387 58.18%) In the 1970s when the study of Australian archaeology was in an exciting phase of development, with the great antiquity of rock art becoming clear. Lesley Maynard, the archaeologist who coined the phrase \u201cPanaramitee style,\u201d suggested that a sequence could be determined for Australian rock art, in which a geometric style gave way to a simple figurative style (outlines of figures and animals), followed by a range of complex figurative styles that, unlike the pan-Australian geometric tradition tended to much greater regional diversity . While accepting that this sequence fits the archaeological profile of those sites, which were occupied continuously over many thousands of years a number of writers have warned that the underlying assumption of such a sequence\u2014a development from the simple and the geometric to the complex and naturalistic\u2014obscures the cultural continuities in Aboriginal Australia, in which geometric symbolism remains fundamentally important. In this context the simplicity of a geometric motif may be more apparent than real. Motifs of seeming simplicity can encode complex meanings in Aboriginal Australia. And has not twentieth-century art shown that naturalism does not necessarily follow abstraction in some kind of predetermine sequence? According to paragraph 5, the complex figurative style differs from the geometric style in that the complex figurative style A. varies significantly from region to region B. is more meaningful C. appears on only a few types of rocks D. has changed little overtime \u9009\u62e9\uff1aA - \u539f\u6587\u540c\u4e49\u8f6c\u6362 TPO 14 Pastoralism in Ancient Inner Eurasia (\u6b63\u786e\u7387 57.59%) Nomadism also subjects pastoralist communities to strict rules of portability . If you are constantly on the move, you cannot afford to accumulate large material surpluses. Such rules limit variations in accumulated material goods between pastoralist households (though they may also encourage a taste for portable goods of high value such as silks or jewelry). So, by and large, nomadism implies a high degree of self-sufficiency and inhibits the appearance of an extensive division of labor . Inequalities of wealth and rank certainly exist, and have probably existed in most pastoralist societies, but except in periods of military conquest, they are normally too slight to generate the stable, hereditary hierarchies that are usually implied by the use of the term class. Inequalities of gender have also existed in pastoralist societies, but they seem to have been softened by the absence of steep hierarchies of wealth in most communities, and also by the requirement that women acquire most of the skills of men, including, often, their military skills. According to paragraph 4, the fact that pastoralist communities are subject to \u201cstrict rules of portability\u201d encourages such communities to A.relocate less frequently than they would otherwise B.have households that are more or less equal in wealth C.become self-sufficient in the manufacture of silk and jewelry D.share large material surpluses with neighboring communities \u9009\u62e9\uff1aB - \u4e0d\u662f\u5f88\u786e\u5b9a A\u3001C\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 27 Predator-Prey Cycles (\u6b63\u786e\u7387 56.49%) Predators are an essential factor in maintaining communities that are rich and diverse in species. Without predators, the species that is the best competitor for food, shelter, nesting sites, and other environmental resources tends to dominate and exclude the species with which it competes. This phenomenon is known as \u201c competitor exclusion .\u201d However, if the community contains a predator of the strongest competitor species, then the population of that competitor is controlled. Thus even the less competitive species are able to survive. For example, sea stars prey on a variety of bivalve mollusks and prevent these bivalves from monopolizing habitats on the sea floor. This opens up space for many other organisms. When sea stars are removed, species diversity falls sharply. Therefore, from the stand point of diversity, it is usually a mistake to eliminate a major predator from a community. According to paragraph 7, which of the following is true of the phenomenon of competitor exclusion ? A.It results in more diverse communities B.It requires the presence of predators C.It affects all competitors equally D.It happens only when there is a dominant competitor \u9009\u62e9\uff1aD best \u5bf9\u5e94 dominant A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bB\u9009\u9879\u9519\u8bef\uff0cwithout \u2260 require\uff1bC\u9009\u9879equally\u9519\u8bef TPO 9 Reflection in Teaching (\u6b63\u786e\u7387 55.93%) The work of Wildman and Niles suggests the importance of recognizing some of the difficulties of instituting reflective practice. Others have noted this, making a similar point about the teaching profession's cultural inhibitions about reflective practice. Zeichner and Liston (1987) point out the inconsistency between the role of the teacher as a (reflective) professional decision maker and the more usual role of the teacher as a technician, putting into practice the ideas of others. More basic than the cultural issues is the matter of motivation . Becoming a reflective practitioner requires extra work (Jaworski, 1993) and has only vaguely defined goals with, perhaps, little initially perceivable reward and the threat of vulnerability. Few have directly questioned what might lead a teacher to want to become reflective. Apparently, the most obvious reason for teachers to work toward reflective practice is that teacher educators think it is a good thing. There appear to be many unexplored matters about the motivation to reflect-for example, the value of externally motivated reflection as opposed to that of teachers who might reflect by habit. According to paragraph 6, teachers may be discouraged from reflecting because A.it is not generally supported by teacher educators B.the benefits of reflection may not be apparent immediately C.it is impossible to teach and reflect on one's teaching at the same time D.they have often failed in their attempts to become reflective practitioners \u9009\u62e9\uff1aA - \u4e0d\u662f\u5f88\u786e\u5b9a C\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 B TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 54.55%) In the late sixteenth century and into the seventeenth, Europe continued the growth that had lifted it out of\u3010B / D\u3011 the relatively less prosperous medieval period (from the mid 400s to the late 1400s). Among the key factors behind this growth were increased agricultural productivity\u3010A\u3011 and an expansion of trade\u3010C\u3011 . According to paragraph 1, what was true of Europe during the medieval period ? A.Agricultural productivity declined. B.There was relatively little economic growth. C.The general level of prosperity declined. D.Foreign trade began to play an important role in the economy. \u9009\u62e9\uff1aD A\u9009\u9879\u9519\u8bef increase\u548cdecline\u610f\u601d\u76f8\u53cd\uff1bB\u3001C\u9009\u9879\u9519\u8bef\uff0c\u82f1\u56fd\u9003\u8131\u4e86\u4e0d\u90a3\u4e48\u7e41\u8363\u7684\u4e2d\u4e16\u7eaa\u65f6\u671f B TPO 4 Petroleum Resources (\u6b63\u786e\u7387 54.47%) As oil becomes increasingly difficult to find, the search for it is extended into more-hostile environments. The development of the oil field on the North Slope of Alaska and the construction of the Alaska pipeline are examples of the great expense \u3010B\u3011 and difficulty involved in new oil discoveries. Offshore drilling platforms extend the search for oil to the ocean's continental shelves\u2014those gently sloping submarine regions at the edges of the continents. More than one-quarter of the world's oil and almost one-fifth of the world's natural gas come from offshore, even though offshore drilling is six to seven times more expensive than drilling on land. A significant part of this oil and gas comes from under the North Sea between Great Britain and Norway. Of course, there is far more oil underground than can be recovered. It may be in a pool too small or too far from a potential market to justify the expense of drilling. Some oil lies under regions where drilling is forbidden, such as national parks or other public lands. Even given the best extraction techniques, only about 30 to 40 percent of the oil in a given pool can be brought to the surface. The rest is far too difficult to extract and has to remain underground. What does the development of the Alaskan oil field mentioned in paragraph 4 demonstrate? A. More oil is extracted from the sea than from land. B.Drilling for oil requires major financial investments. C.The global demand for oil has increased over the years. D.The North Slope of Alaska has substantial amounts of oil \u9009\u62e9\uff1aB - \u539f\u6587\u610f\u601d\u7406\u89e3 A\u3001C\u3001D\u65e0\u4e2d\u751f\u6709 TPO 9 Reflection in Teaching (\u6b63\u786e\u7387 54.09%) Wildman and Niles observed that systematic reflection on teaching required a sound ability to understand classroom events in an objective manner . They describe the initial understanding in the teachers with whom they were working as being \"\"utilitarian...and not rich or detailed enough to drive systematic reflection.\"\" Teachers rarely have the time or opportunities to view their own or the teaching of others in an objective manner . Further observation revealed the tendency of teachers to evaluate events rather than review the contributory factors in a considered manner by, in effect, standing outside the situation. According to paragraph 3, what did the teachers working with Wildman and Niles often fail to do when they attempted to practice reflection ? A.Correctly calculate the amount of time needed for reflection B.Provide sufficiently detailed descriptions of the methods they used to help them reflect C.Examine thoughtfully the possible causes of events in their classrooms D.Establish realistic goals for themselves in practicing reflection \u9009\u62e9\uff1aC - \u6392\u9664\u6cd5 - \u4e0d\u786e\u5b9a TPO 25 The Evolutionary Origin of Plants (\u6b63\u786e\u7387 52.81%) These adaptations allowed an increasing diversity of plant forms to exploit dry land . Life on land, however, also required new methods of transporting sperm to eggs. Unlike aquatic and marine forms, land plants cannot always rely on water currents to carry their sex cells and disperse their fertilized eggs. So the most successful groups of land plants are those that evolved methods of fertilized sex cell dispersal that are independent of water and structures that protest developing embryos from drying out. Protected embryos and waterless dispersal of sex cells were achieved with the origin of seed plans and the key evolutionary innovations that they introduced: pollen, seeds, and later, flowers and fruits. According to Paragraph 6, the adaptation made by terrestrial plants had which of the following effect ? A.Plants developed reproductive strategies usable in both land and water environment B. the plant diversity achieved in water environments diminished on land C.seed plants became the dominant species among plants D.a greater range of plants was able to develop \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 A\u9009\u9879both\u65e0\u4e2d\u751f\u6709\uff1bB\u9009\u9879plant diversity diminished\u9519\u8bef\uff1bC\u9009\u9879dominant\u65e0\u4e2d\u751f\u6709 TPO 7 Ancient Rome and Greece (\u6b63\u786e\u7387 52.74%) Modern attitudes to Roman civilization range from the infinitely impressed to the thorough disgusted. As always, there are the power worshippers, especially among historians, who are predisposed to admire whatever is strong, who feel more attracted to the might of Rome than to the subtlety of Greece. At the same time, there is a solid body of opinion that dislikes Rome. For many, Rome is at best the imitator and the continuator of Greece on a larger scale. Greek civilization had quality; Rome, mere quantity. Greece was the inventor; Rome, the research and development division. Such indeed was the opinion of some of the more intellectual Romans.\u201d had the Greeks held novelty in such disdain as we,\u201d asked Horace in his Epistle, \u201cwhat work of ancient date would now exist?\u201d According to paragraph 4, intellectual Romans such as Horace held which of the following opinions about their civilization? A.Ancient works of Greece held little value in the Roman world. B.The Greek civilization had been surpassed by the Romans. C.Roman civilization produced little that was original or memorable. D.Romans valued certain types of innovations that had been ignored by ancient Greeks. \u9009\u62e9\uff1aC \u4e3b\u8981\u89c2\u70b9\u662f\u8fd9\u4e9b\u4eba\u4e0d\u559c\u6b22Rome civilization\uff1bA\u3001B\u9009\u9879\u610f\u601d\u76f8\u53cd\uff1bD\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 2 Early Cinema (\u6b63\u786e\u7387 51.07%) Although early exhibitors regularly accompanied movies with live acts, the substance of the movies themselves is mass-produced, prerecorded material that can easily be reproduced by theaters with little or no active participation by the exhibitor. Even though early exhibitors shaped their film programs by mixing films and other entertainments together in whichever way they thought would be most attractive to audiences or by accompanying them with lectures, their creative control remained limited. What audiences came to see was the technological marvel of the movies; the lifelike reproduction of the commonplace motion of trains, of waves striking the shore, and of people walking in the street; and the magic made possible by trick photography and the manipulation of the camera. According to paragraph 5, what role did early exhibitors play in the presentation of movies in theaters ? A.They decided how to combine various components of the film program. B.They advised film-makers on appropriate movie content. C.They often took part in the live-action performances. D.They produced and prerecorded the material that was shown in the theaters \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 D\u4e0d\u77e5\u9053\u4e3a\u5565\u9519 - little or no \u5417 TPO 19 The Roman Army's Impact on Britain (\u6b63\u786e\u7387 50.96%) Each soldier received his pay, but in regions without a developed economy there was initially little on which it could be spent. The pool of excess cash rapidly stimulated a thriving economy outside fort gates\u3010A\u3011 . Some of the demand\u3010B\u3011 for the services and goods was no doubt fulfilled by people drawn from far afield\u3010C / D\u3011 , but some local people certainly became entwined in this new economy. There was informal marriage with soldiers, who until AD 197 were not legally entitled to wed, and whole new communities grew up near the forts. These settlements acted like small towns, becoming centers for the artisan and trading populations. According to paragraph 3, how did the soldiers meet their needs for goods and services ? A.Their needs were met by the army, and all of their economic transactions took place within the fort. B. Most of their needs were met by traveling tradespeople who visited the forts. C.During their days off, soldiers traveled to distant towns to make purchases. D.They bought what they needed from the artisans and traders in nearby towns. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 TPO 6 William Smith (\u6b63\u786e\u7387 49.68%) As he collected fossils from strata throughout England, Smith began to see that the fossils told a different story from the rocks. Particularly in the younger strata, the rocks were often so similar that he had trouble distinguishing the strata\u3010C\u3011 , but he never had trouble telling the fossils apart. While rock between two consistent strata might in one place be shale and in another sandstone, the fossils in that shale or sandstone were always the same. Some fossils endured through so many millions of years that they appear. In many strata, but others occur only in a few strata, and a few species had their births and extinctions within one particular stratum. Fossils are thus identifying markers for particular periods in Earth's history. According to paragraph 4, it was difficult for Smith to distinguish rock strata because A.the rocks from different strata closely resembled each other B.he was often unable to find fossils in the younger rock strata C.their similarity to each other made it difficult for him to distinguish one rock type from another D.the type of rock between two consistent strata was always the same \u9009\u62e9\uff1aC - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 A TPO 23 Rock Art of the Australia Aborigines (\u6b63\u786e\u7387 49.67%) In the 1970s when the study of Australian archaeology was in an exciting phase of development, with the great antiquity of rock art becoming clear. Lesley Maynard, the archaeologist who coined the phrase \u201cPanaramitee style,\u201d suggested that a sequence could be determined for Australian rock art, in which a geometric style gave way to a simple figurative style (outlines of figures and animals), followed by a range of complex figurative styles that, unlike the pan-Australian geometric tradition tended to much greater regional diversity. While accepting that this sequence fits the archaeological profile of those sites, which were occupied continuously over many thousands of years a number of writers have warned that the underlying assumption of such a sequence\u2014a development from the simple and the geometric to the complex and naturalistic\u2014obscures the cultural continuities in Aboriginal Australia, in which geometric symbolism remains fundamentally important. In this context the simplicity of a geometric motif may be more apparent than real. Motifs of seeming simplicity can encode complex meanings in Aboriginal Australia. And has not twentieth-century art shown that naturalism does not necessarily follow abstraction in some kind of predetermine sequence? According to paragraph 5, Lesley Maynard made which of the following suggestions about Australian rock art ? A.There were a pattern of human figures being represented in a more complex style than animal figures. B.Australian archaeology should concentrate on determining the sequence of styles that led up to the Panaramitee style. C.The great antiquity of Australian rock art would probably make it impossible to determine the ages of the various styles found in rock art. D.The geometric style of Australian rock art was replaced by increasingly complex figurative styles. \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879impossible\u9519\u8bef\uff1bD\u9009\u9879replace\u9519\u8bef D TPO 13 Types of Social Groups (\u6b63\u786e\u7387 48.14%) Third, primary groups are fundamental because they serve as powerful instruments for social control. Their members command and dispense many of the rewards that are so vital to us and that make our lives seem worthwhile. Should the use of rewards fail, members can frequently win by rejecting or threatening to ostracize those who deviate from the primary group's norms. For instance, some social groups employ shunning (a person can remain in the community, but others are forbidden to interact with the person) as a device to bring into line individuals whose behavior goes beyond that allowed by the particular group. Even more important, primary groups define social reality for us by structuring our experiences. By providing us with definitions of situations, they elicit from us behavior that conforms to group- devised meanings. Primary groups, then, serve both as carriers of social norms and as enforcers of them. According to paragraph 7, why would a social group use shunning ? A.To enforce practice of the kinds of behavior acceptable to the group B.To discourage offending individuals from remaining in the group C.To commend and reward the behavior of the other members of the group D.To decide which behavioral norms should be passed on to the next generation? \u9009\u62e9\uff1aB - \u4e0d\u662f\u5f88\u786e\u5b9a A TPO 11 Ancient Egyptian Sculpture (\u6b63\u786e\u7387 47.03%) In order to understand ancient Egyptian art, it is vital to know as much as possible of the elite Egyptians' view of the world and the functions and contexts of the art produced for them. Without this knowledge we can appreciate only the formal content of Egyptian art, and we will fail to understand why it was produced or the concepts that shaped it and caused it to adopt its distinctive forms. In fact, a lack of understanding concerning the purposes of Egyptian art has often led it to be compared unfavorably with the art of other cultures : Why did the Egyptians not develop sculpture in which the body turned and twisted through space like classical Greek statuary? Why do the artists seem to get left and right confused? And why did they not discover the geometric perspective as European artists did in the Renaissance? The answer to such questions has nothing to do with a lack of skill or imagination on the part of Egyptian artists and everything to do with the purposes for which they were producing their art. Paragraph 1 suggests that one reason Egyptian art is viewed less favorably than other art is that Egyptian art lacks A.a realistic sense of human body proportion B. a focus on distinctive forms of varying sizes C.the originality of European art D.the capacity to show the human body in motion \u9009\u62e9\uff1aA - \u4e0d\u662f\u5f88\u786e\u5b9a D TPO 28 Early Saharan Pastoralists (\u6b63\u786e\u7387 44.51%) About 3500 B.C., climatic conditions again deteriorated. The Sahara slowly became direr and lakes vanished. On the other hand, rainfall increased in the interior of western Africa, and the northern limit of the tsetse fly\u3010C\u3011 , an insect fatal to cattle, moved south. So the herders shifted south , following the major river systems into savanna regions.\u3010D\u3011 By this time, the Saharan people were probably using domestic crops, experimenting with such summer rainfall crops as sorghum and millet\u3010B\u3011 as they moved out of areas where they could grow wheat, barely, and other Mediterranean crops\u3010A\u3011 . According to paragraph 6, what allowed the herders to shift south into the savanna regions after about 3500 B.C. ? A. They could easily grow Mediterranean crops in those regions. B.They could more easily domesticate sorghum and millet in those regions. C.The tsetse fly was no longer a problem in those regions. D.The river systems in those regions provided reliable sources of water in the summer. \u9009\u62e9\uff1aD - \u731c\u7684 C TPO 20 Fossil Preservation (\u6b63\u786e\u7387 44.29%) The probability that actual remains of soft tissue will be preserved is improved if the organism dies in an environment of rapid deposition and oxygen deprivation \u3010A / D\u3011. Under such conditions, the destructive effects of bacteria are diminished \u3010B\u3011. The middle Eocene Messel shale (from about 48 million years ago) of German accumulated in such an environment. The shale was deposited in an oxygen-deficient lake where lethal gases sometimes bubbled up and killed animals. Their remains accumulated on the floor of the lake and were then covered by clay and silt\u3010C\u3011 . Among the superbly preserved Messel fossils are insects with iridescent exoskeletons (hard outer coverings), frogs with skin and blood vessels intact, and even entire small mammals with preserved fur and soft tissue. According to paragraph 7, how do environments containing oxygen affect fossil preservation ? A.They increase the probability that soft-tissued organisms will become fossils. B.They lead to more bacteria production. C.They slow the rate at which clay and silt are deposited. D.They reduce the chance that animal remains will be preserved \u9009\u62e9\uff1aD - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 TPO 33 Extinction Episodes of the Past (\u6b63\u786e\u7387 44.2%) It was not until the Cambrian period, beginning about 600 million years ago, that a great proliferation of macroscopic species occurred\u3010D\u3011 on Earth and produced a fossil record that allows us to track the rise and fall of biodiversity\u3010A\u3011 . Since the Cambrian period, biodiversity has generally risen, but there have been some notable exceptions. Biodiversity collapsed dramatically during at least five periods because of mass extinctions around the globe. The five major mass extinctions receive most of the attention, but they are only one end of a spectrum of extinction events. Collectively, more species went extinct during smaller events that were less dramatic but more frequent. The best known of the five major extinction events, the one that saw the demise of the dinosaurs, is the Cretaceous-Tertiary extinction. Paragraph 1 supports which of the following statements about life on Earth before the Cambrian period ? A.Biodiversity levels were steady, as indicated by the fossil record. B.Levels of biodiversity could not be tracked. C.The most dramatic extinction episode occurred. D. Few microscopic species existed. \u9009\u62e9\uff1aB - It was not until\u8868\u660e\u4e86\u65f6\u95f4\u8282\u70b9 A\u9009\u9879\u9519\u8bef\uff0c\u65e0\u6cd5\u901a\u8fc7fossil record\u5f97\u77e5\uff1bC\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bD\u9009\u9879\u9519\u8bef\uff0c\u6b64\u65f6\u8fd8\u6ca1\u6709","title":"Reading-Homework5-1"},{"location":"English/reading-hw5-a/#_1","text":"TPO 4 Petroleum Resources (\u6b63\u786e\u7387 68.54%) Petroleum, consisting of crude oil and natural gas, seems to originate from organic matter in marine sediment . Microscopic organisms settle to the seafloor and accumulate in marine mud. The organic matter may partially decompose, using up the dissolved oxygen in the sediment. As soon as the oxygen is gone, decay stops and the remaining organic matter is preserved. According to paragraph 1, which of the following is true about petroleum formation ? A.Microscopic organisms that live in mud produce crude oil and natural gas. B.Large amounts of oxygen are needed for petroleum formation to begin. C.Petroleum is produced when organic material in sediments combines with decaying marine organisms. D.Petroleum formation appears to begin in marine sediments where organic matter is present. \u9009\u62e9\uff1aD - \u76f4\u63a5\u627e\u5230\u4e86\u539f\u6587\u7684\u5bf9\u5e94\u53e5\u5b50 A\u9009\u9879\u540e\u534a\u53e5\u9519\u8bef\uff0c\u4e0d\u662fmud produce crude oil and natural gas B\u9009\u9879\u610f\u601d\u9519\u8bef\uff0c\u4ece\u539f\u6587\u6700\u540e\u4e00\u53e5\u5f97\u77e5\uff0c\u6ca1\u6709\u6c27\u6c14\u7684\u65f6\u5019\u6709\u673a\u7269\u8d28\u624d\u4f1a\u4fdd\u5b58 C\u9009\u9879\u610f\u601d\u9519\u8bef\uff0c\u4e0d\u662f\u4e8c\u8005combine\uff0c\u800c\u662fdecaying marine organisms\u4ea7\u751forganic material TPO 8 Running Water on Mars (\u6b63\u786e\u7387 68.41%) Some scientists speculate that Mars may have enjoyed an extended early Period during which rivers, lakes, and perhaps even oceans adorned its surface. A 2003 Mars Global Surveyor image shows what mission specialists think may be a delta\u2015a fan-shaped network of channels and sediments where a river once flowed into a larger body of water, in this case a lake filling a crater in the southern highlands. Other researchers go even further, suggesting that the data provide evidence for large open expenses of water on the early Martian surface. A computer- generated view of the Martian North Polar Region shows the extent of what may have been an ancient ocean covering much of the northern lowlands. The Hellas Basin, which measures some 3,000 kilometers across and has a floor that lies nearly 9 kilometers below the basin\u2019s rim, is another candidate for an ancient Martian sea. According to paragraph 3, images of Mars\u2019 surface have been interpreted as support for the idea that A.the polar regions of Mars were once more extensive than they are now B.a large part of the northern lowlands may once have been under water C.deltas were once a common feature of the Martian landscape D.the shape of the Hellas Basin has changed considerably over time \u9009\u62e9\uff1aB - \u76f4\u63a5\u627e\u5230\u4e86\u539f\u6587\u5bf9\u5e94\u53e5\u5b50 A\u9009\u9879extensive\u7684\u6bd4\u8f83\u672a\u4f53\u73b0\u51fa\u6765\uff0c\u53ea\u662f\u8bf4\u65e9\u671fMars\u6709\u6269\u5f20\u7684\u884c\u4e3a C\u9009\u9879common feature\u672a\u63d0\u53ca D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 28 Buck Rubs and Buck Scrapes (\u6b63\u786e\u7387 68.16%) Forehead rubbing by male deer on buck rubs presumably sends a great deal of information to other members of the same species \u3010A\u3011. First\u2026 Because both sexes of white-tailed respond to buck rubs by smelling and licking them, rubs may serve a very important additional function. Fresher buck rubs (less than two days old), in particular, are visited more frequently by adult females than older rubs. In view of this behavior it has been suggested that chemicals present in fresh buck rubs may help physiologically induce and synchronize fertility in females that visit these rubs. This would be an obvious advantage to wide-ranging deer, especially to a socially dominant buck when courting several adult females during the autumn rut. Another visual signal produced by while- tailed deer is termed a buck scrape . Scrapes consist of a clearing (about 0.5 meter in diameter) and shallow depression made by pushing aside the leaves covering the ground; after making the scrape, the deer typically urinates in the depression. Thus, like a buck rub, a scrape is both a visual and an olfactory signal\u3010B\u3011 . Buck scrapes are generally created after leaf-fall in autumn, which is just before or during the rut\u3010C\u3011 . Scrapes are usually placed in open or conspicuous places, such as along a deer trail. Most are made by older males, although females and younger males (2.5 years old or less) occasionally make scrapes.\u3010A\u3011 According to the passage, in what way do buck scrapes differ from buck rubs ? A.Buck scrapes are made by both male and female deer. B.Buck scrapes are purely visual signals C.Buck scrapes are made closer to the breeding season than buck rub D.Buck scrapes can be smelled only by deer \u9009\u62e9\uff1aA - \u539f\u6587\u4e2d\u6709\u4f53\u73b0 B\u9009\u9879\u9519\u8bef - both C\u9009\u9879\u9519\u8bef - before or during the rut D\u9009\u9879 - \u672a\u627e\u5230\u539f\u6587\uff0c\u4f46\u662f\u51ed\u7406\u89e3\uff0c\u8fd9\u4e24\u79cd\u4e1c\u897f\u5e94\u8be5\u90fd\u662f\u5bf9same species\u6709\u7528 - \u539f\u6587\u5f00\u7bc7\u63d0\u5230 TPO 21 The Origins of Agriculture (\u6b63\u786e\u7387 68.05%) Climatic changes at the end of the glacial period 13, 000 years ago have been proposed to account for the emergence of farming. The temperature increased dramatically in a short period of time (years rather than centuries), allowing for a growth of the hunting-gathering population due to the abundance of resources. There were, however, fluctuations in the climatic conditions , with the consequences that wet conditions were followed by dry ones , so that the availability of plants and animals oscillated brusquely According to paragraph 3, the abundance of resources fluctuated sharply after the end of the glacial period because A.Locally abundant resources were quickly exhausted by hunter-gatherers B.The temperature became much higher in some areas over others C.Different types of plants and animals became available as the climate changed D.The amount of rainfall varied radically from one period to the next. \u9009\u62e9\uff1aD A\u3001B\u9009\u9879\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u9519\u8bef\uff0c\u5f53\u6e29\u5ea6\u4e0a\u5347\u7684\u65f6\u5019\u8d44\u6e90\u4f1a\u4e30\u5bcc\uff0c\u4f46\u662f\u5176\u4ed6\u60c5\u51b5\u5c31\u4e0d\u4e00\u5b9a\u4e86 TPO 23 Seventeenth-Century Dutch Agriculture (\u6b63\u786e\u7387 68%) As the demand for agricultural produce from both consumers and industry increased, agricultural land became more valuable and people tried to work the available land more intensively and to reclaim more land from wetlands and lakes. In order to increase production on existing land, the peasants made more use of crop rotation and, in particular, began to apply animal waste to the soil regularly, rather than leaving the fertilization process up to the grazing livestock. For the first time industrial waste, such as ash from the soap-boilers, was collected in the cities and sold in the country as artificial fertilizer. The increased yield and price of land justified reclaiming and draining even more land. Select the TWO answer choices that, according to paragraph 4, indicate two methods people used to increase the productivity of their land . To receive credit you must select TWO answers A.They planted different crops in different sections of the farm each year. B.They used improved irrigation methods to increase the yield of crops. C.They increased the use of fertilizers to supply more nutrients to plants. D.They used new horticultural practices to produce different varieties of plants in the same section of the farm. \u9009\u62e9\uff1a CD - \u610f\u4f1a C - fertilizer D - crop rotation \u5176\u4ed6\u7684\u611f\u89c9\u90fd\u5bf9\u4e0d\u4e0a AC TPO 15 Mass Extinction (\u6b63\u786e\u7387 67.94%) One interesting test of the Alvarez hypothesis is based on the presence of the rare-earth element iridium (Ir). Earth\u2019s crust contains very little of this element, but most asteroids contain a lot more . Debris thrown into the atmosphere by an asteroid collision would presumably contain large amounts of iridium, and atmospheric currents would carry this material all over the globe. A search of sedimentary deposits that span the boundary between the Cretaceous and Tertiary periods shows that there is a dramatic increase in the abundance of iridium briefly and precisely at this boundary. This iridium anomaly offers strong support for the Alvarez hypothesis even though no asteroid itself has ever been recovered. According to paragraph 6, what made iridium a useful test of the Alvarez hypothesis ? A.Its occurrence in a few locations on Earth against several locations on other planets B.Its occurrence in limited quantities on Earth against its abundance in asteroids C.Its ability to remain solid at extremely high temperatures D.Its ease of detection even in very small amounts \u9009\u62e9\uff1aB - \u539f\u6587\u5bf9\u5e94 \u5176\u4ed6\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 67.89%) Increased agricultural production in turn facilitated rural industry, an intrinsic part of the expansion of industry . Woolens and textile manufacturers, in particular, utilized rural cottage (in-home) production, which took advantage of cheap and plentiful rural labor. In the German states, the ravages of the Thirty Years' War (1618-1648) further moved textile production into the countryside. Members of poor peasant families spun or wove cloth and linens at home for scant remuneration in an attempt to supplement meager family income. Paragraph 4 supports the idea that increased agricultural production was important for the expansion of industry primarily because it. A.increased the number of available workers in rural areas B.provided new types of raw materials for use by industry C.resulted in an improvement in the health of the rural cottage workers used by manufacturers D.helped repair some of the ravages of the Thirty Years\u2019 War \u9009\u62e9\uff1aA - \u7406\u89e3\u539f\u6587\u610f\u601d TPO 11 Ancient Egyptian Sculpture (\u6b63\u786e\u7387 67.66%) Statues were normally made of stone, wood, or metal. Stone statues were worked from single rectangular blocks of material and retained the compactness of the original shape. The stone between the arms and the body and between the legs in standing figures or the legs and the seat in seated ones was not normally cut away. From a practical aspect this protected the figures against breakage and psychologically gives the images a sense of strength and power, usually enhanced by a supporting back pillar. By contrast, wooden statues were carved from several pieces of wood \u3010B\u3011 that were pegged together to form the finished work , and metal statues were either made by wrapping sheet metal around a wooden core or cast by the lost wax process. The arms could be held away from the body and carry separate items in their hands; there is no back pillar. The effect is altogether lighter and freer than that achieved in stone, but because both perform the same function, formal wooden and metal statues still display frontality. According to paragraph 3, which of the following statements about wooden statues is true ? A.Wooden statues were usually larger than stone statues. B.Wooden statues were made from a single piece of wood. C.Wooden statues contained pieces of metal or stone attached to the front. D.Wooden statues had a different effect on the viewer than stone statues. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 A\u9009\u9879\u65e0\u4e2d\u751f\u6709 B\u3001C\u9009\u9879\u9519\u8bef TPO 28 Early Saharan Pastoralists (\u6b63\u786e\u7387 67.39%) Even before the drought, the Sahara was never well watered. Both humans and animals were constantly on the move, in search of food and reliable water supplies. Under these circumstances, archaeologist Andrew Smith believes, the small herd of Bos primigenius in the desert became smaller, more closely knit breeding units as the drought took hold. The beasts were more disciplined, so that it was easier for hunters to predict their habits\u3010D\u3011, and capture animals at will\u3010B\u3011 . At the same time, both cattle and humans were more confined in their movements, staying much closer to permanent water supplies for long periods of time. As a result, cattle and humans came into close association. Paragraph 2 supports which of the following ideas about wild oxen in the Sahara region after the drought took hold ? A.They traveled in smaller herds. B.They were harder for hunters to capture. C.They tended to be significantly smaller in size. D.They moved along less predictable routes. \u9009\u62e9\uff1aC - \u539f\u6587\u539f\u53e5 A\u9009\u9879\u65e0\u4e2d\u751f\u6709 B\u3001D\u9009\u9879\u9519\u8bef A TPO 19 Succession, Climax, and Ecosystems (\u6b63\u786e\u7387 67.37%) Clements and other early ecologists saw almost lawlike regularity in the order of succession, but that has not been substantiated. A general trend can be recognized, but the details are usually unpredictable. Succession is influenced by many factors: the nature of the soil, exposure to sun and wind, regularity of precipitation, change colonizations, and many other random processes. According to paragraph 2, which of the following is a criticism of Clements \u201cview of succession\u201d ? A.The principles of succession are more lawlike than Clements thought they were. B.More evidence is needed to establish Clements' predictions about succession. C.The details of succession are affected by random processes. D.Many of the factors that determine which plants will grow in an environment, such as the nature of the soil and the exposure to sun, do not change at all. \u9009\u62e9\uff1aC - \u7406\u89e3\u539f\u6587\u610f\u601d TPO 20 Fossil Preservation (\u6b63\u786e\u7387 67.21%) Many other processes may alter the shell of the clam or snail and enhance its chances for preservation . Water containing dissolved silica, calcium carbonate, or iron may circulate through the enclosing sediment and be deposited in cavities such as narrow cavities and canals in bone once occupied by blood vessels and nerves. In such cases, the original composition of the bone or shell remains, but the fossil is made harder and more durable. This addition of a chemically precipitated substance into precipitated is termed \u201cpermineralization.\u201d Which of the following best explains the process of permineralization mentioned in paragraph 3\uff1f A. Water containing calcium carbonate circulates through a shell and deposits sediment. B.Liquid containing chemicals hardens an already existing fossil structure. C.Water passes through sediment surrounding a fossil and removes its chemical content. D.A chemical substance enters a fossil and changes its shape. \u9009\u62e9\uff1aD - \u7406\u89e3 A\u9009\u9879\u53ea\u662f\u8bf4\u4e86\u524d\u534a\u90e8\u5206\u7684\u8fc7\u7a0b\uff0c\u6ca1\u6709\u4f53\u73b0alter B\u9009\u9879\u4e5f\u6ca1\u6709\u4f53\u73b0alter C\u9009\u9879\u70edremove\u9519\u8bef B TPO 6 Infantile Amnesia (\u6b63\u786e\u7387 67.19%) A second explanation involves the influence of the social world on children\u2019s language use. Hearing and telling stories about events may help children store information in ways that will endure into later childhood and adulthood. Through hearing stories with a clear beginning, middle, and ending children may learn to extract the gist of events in ways that they will be able to describe many years later. Consistent with this view parents and children increasingly engage in discussions of past events when children are about three years old. However, hearing such stories is not sufficient for younger children to form enduring memories. Telling such stories to two year olds does not seem to produce long-lasting verbalizable memories. According to paragraph 4, what role may storytelling play in forming childhood memories ? A.It may encourage the physiological maturing of the brain. B.It may help preschool children tell the difference between ordinary and unusual memories. C.It may help preschool children retrieve memories quickly. D.It may provide an ordered structure that facilitates memory retrieval. \u9009\u62e9\uff1aD A\u3001B\u3001C\u65e0\u4e2d\u751f\u6709 TPO 22 Spartina (\u6b63\u786e\u7387 66.95%) These characteristics make Spartina a valuable component of the estuaries where it occurs naturally. The plant functions as a stabilizer and a sediment trap and as a nursery area for estuarine fish and shellfish. Once established, a stand of Spartina begins to trap sediment, changing the substrate elevation\u3010B\u3011, and eventually the stand evolves into a high marsh system where Spartina is gradually displaced by higher-elevation, brackish-water species\u3010B/C\u3011 . As elevation increases, narrow, deep channels of water form throughout the marsh. Along the east coast Spartina is considered valuable for its ability to prevent erosion and marshland deterioration; it is also used for coastal restoration projects and the creation of new wetland sites. According to paragraph 4, in its natural habitats, Spartina helps estuaries by A. controlling marshland decline B. decreasing the substrate elevation C. reducing the brackishness of the water D. increasing the flow of water into the estuary \u9009\u62e9\uff1aA - \u539f\u6587\u539f\u53e5 B\u3001C\u9009\u9879\u9519\u8bef\uff0cD\u9009\u9879\u65e0\u4e2d\u751f\u6709 .TPO 27 The Formation of Volcanic Islands (\u6b63\u786e\u7387 66.4%) The oceanic volcanic islands and their hot-spot trails are thus especially useful for geologists because they record the past locations of the plate over a fixed source. They therefore permit the reconstruction of the process of seafloor spreading, and consequently of the geography of continents and of ocean basins in the past. For example, given the current position of the Pacific Plate, Hawaii is above the Pacific Ocean hot spot. So the position of the Pacific Plate 50 million years ago can be determined by moving it such that a 50-million-year-old volcano in the hot-spot trail (sits at the location of Hawaii today). However, because the ocean basins really are short-lived features on geologic times scales, reconstructing the world\u2019s geography by backtracking along the hot-spot trail works only for the last 5 percent or so of geologic time . According to paragraph 5, why are geologists unable to trace back the entire geologic of continents from hot-spot trails ? A.Hot spots have existed for only about 5 percent of geologic time B.Hawaii did not exist 50 million years ago C.Oceanic basins that contained old hot-spot trails disappeared a long time ago D.Hot-spot trails can be reconstructed only for island chains \u9009\u62e9\uff1aC - \u539f\u6587\u610f\u601d\u8f6c\u8ff0 TPO 4 Petroleum Resources (\u6b63\u786e\u7387 66.39%) As oil becomes increasingly difficult to find, the search for it is extended into more-hostile environments . The development of the oil field on the North Slope of Alaska and the construction of the Alaska pipeline are examples of the great expense and difficulty involved in new oil discoveries. Offshore drilling platforms extend the search for oil to the ocean's continental shelves\u2014those gently sloping submarine regions at the edges of the continents. More than one-quarter of the world's oil and almost one-fifth of the world's natural gas come from offshore, even though offshore drilling is six to seven times more expensive than drilling on land. A significant part of this oil and gas comes from under the North Sea between Great Britain and Norway. Of course, there is far more oil underground than can be recovered. It may be in a pool too small or too far from a potential market to justify the expense of drilling. Some oil lies under regions where drilling is forbidden, such as national parks or other public lands. Even given the best extraction techniques, only about 30 to 40 percent of the oil in a given pool can be brought to the surface. The rest is far too difficult to extract and has to remain underground. Which of the following strategies for oil exploration is describe in paragraph 4? A.Drilling under the ocean\u2019s surface B.Limiting drilling to accessible locations C.Using highly sophisticated drilling equipment D.Constructing technologically advanced drilling platforms \u9009\u62e9\uff1aD - \u4e0d\u662f\u5f88\u786e\u5b9a A TPO 11 Begging by Nestlings (\u6b63\u786e\u738766.36%) Further evidence for the costs of begging comes from a study of differences in the begging calls of warbler species that nest on the ground versus those that nest in the relative safety of trees. The young of ground-nesting warblers produce begging cheeps of higher frequencies than do their tree-nesting relatives. These higher-frequency sounds do not travel as far, and so may better conceal the individuals producing them, who are especially vulnerable to predators in their ground nests. David Haskell created artificial nests with clay eggs and placed them on the ground beside a tape recorder that played the begging calls of either tree-nesting or of ground-nesting warblers. The eggs \u201cadvertised\u201d by the treenesters' begging calls were found bitten significantly more often than the eggs associated with the ground-nesters' calls. The experiment described in paragraph 2 supports which of the following conclusions ? A.Predators are unable to distinguish between the begging cheeps of ground-nesting and those of treenesting warblers except by the differing frequencies of the calls. B.When they can find them, predators prefer the eggs of tree-nesting warblers to those of groundnesting warblers. C.The higher frequencies of the begging cheeps of ground-nesting warblers are an adaptation to the threat that ground-nesting birds face from predators D.The danger of begging depends more on the frequency of the begging cheep than on how loud it is. \u9009\u62e9\uff1aC - \u539f\u6587\u610f\u601d\u7406\u89e3 A\u9009\u9879 TPO 13 Methods of Studying Infant Perception (\u6b63\u786e\u738766.25%) Two additional techniques of studying infant perception have come into vogue. The first is the habituation-dishabituation technique, in which a single stimulus is presented repeatedly to the infant until there is a measurable decline (habituation) in whatever attending behavior is being observed. At that point a new stimulus is presented, and any recovery (dishabituation) in responsiveness is recorded. If the infant fails to dishabituate and continues to show habituation with the new stimulus, it is assumed that the baby is unable to perceive the new stimulus as different. The habituation-dishabituation paradigm has been used most extensively with studies of auditory and olfactory perception in infants. The second technique relies on evoked potentials, which are electrical brain responses that may be related to a particular stimulus because of where they originate. Changes in the electrical pattern of the brain indicate that the stimulus is getting through to the infant's central nervous system and eliciting some form of response. According to paragraph 4, which of the following leads to the conclusion that infants are able to differentiate between stimuli in a habituation dishabituation study ? A.Dishabituation occurs with the introduction of a new stimulus. B.Electrical responses in the infant's brain decline with each new stimulus. C.Habituation is continued with the introduction of a new stimulus. D.The infant displays little change in electrical brain responses. \u9009\u62e9\uff1aD A\u9009\u9879\u548cC\u9009\u9879\u662f\u76f8\u53cd\u7684\u7ed3\u8bba\uff0c\u672a\u77e5 B\u9009\u9879\u4e2d\u7684decline\u65e0\u4e2d\u751f\u6709 A TPO 23 Seventeenth-Century Dutch Agriculture (\u6b63\u786e\u7387 66.12%) The Dutch battle against the sea is legendary. Noorderkwartier in Holland, with its numerous lakes and stretches of water, was particularly suitable for land reclamation and one of the biggest projects undertaken there was the draining of the Beemster lake which began in 1608. The richest merchants in Amsterdam contributed money to reclaim a good 7,100 hectares of land.\u3010B\u3011 F orty-three windmills powered the drainage pumps\u3010A\u3011 so that they were able to lease the reclamation to farmers as early as 1612, with the investors receiving annual leasing payments at an interest rate of 17 percent.\u3010C\u3011 Land reclamation continued, and between 1590 and 1665, almost 100,000 hectares were reclaimed from the wetland areas of Holland, Zeeland, and Friesland. However, land reclamation decreased significantly after the middle of the seventeenth century because the price of agricultural products began to fall, making land reclamation far less profitable in the second part of the century. According to paragraph 5, which of the following was an important reason why land- reclamation projects in the first half of the seventeenth century proceeded rapidly ? A. Windmills became powerful enough to run drainage pumps efficiently. B. Merchants invested large amounts of money in reclamation. C. High interest rates discouraged people from buying land already available. D. Reclaimed land was much more suitable for agriculture than the existing land. \u9009\u62e9\uff1aB - \u7406\u89e3\u539f\u6587\u610f\u601d A\u9009\u9879\u4e0d\u662f\u4e3b\u8981\u539f\u56e0 C\u9009\u9879discourage\u9519\u8bef D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 16 Trade and the Ancient Middle East (\u6b63\u786e\u7387 65.54%) Reliance on trade had several important consequences. Production was generally in the hands of skilled individual artisans doing piecework under the tutelage of a master who was also the shop owner. In these shops differences of rank were blurred as artisans and masters labored side by side in the same modest establishment\u3010A\u3011 , were usually members of the same guild and religious sect, lived in the same neighborhoods, and often had assumed (or real) kinship relationships. The worker was bound to the master by a mutual contract that either one could repudiate , and the relationship was conceptualized as one of partnership. According to paragraph 2, how did Middle Eastern shop owners treat their workers ? A.Workers were ranked according to their skill level, with the most-experienced Artisans becoming partial owners of the shop B.Shop owners treated different workers differently depending on how much the workers had in common with their masters. C.Workers were bound to their masters by unbreakable contracts that strictly defined the terms of their partnership. D.The shop owner worked alongside the workers and often considered them partners and members of the family. \u9009\u62e9\uff1aD A\u3001B\u9009\u9879\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u4e2d\u7684unbreakable\u9519\u8bef TPO 29 The History of Waterpower (\u6b63\u786e\u7387 65.51%) The earliest waterpower mills were probably vertical-axis mills for grinding corn, known as Norse or Greek mills, which seem to have appeared during the first or second century B.C. in the Middle East and a few centuries later in Scandinavia. In the following centuries, increasingly sophisticated waterpower mills were built throughout the Roman Empire and beyond its boundaries in the Middle East and northern Europe. In England, the Saxons are thought to have used both horizontal-and verticalaxis wheels. The first documented English mill was in the eighth century, but three centuries later about 5,000 were recorded, suggesting that every settlement of any size had its mill. According to paragraph 2, what was true of the waterpower mills built throughout the Roman Empire ? A.Most had horizontal-axis wheels B.Their design was based on mills that had long been used in Scandinavia C.Their design was more popular beyond the empire's boundaries than it was within the empire. D.They were more advanced than the mills used in the Middle East at an earlier time. \u9009\u62e9\uff1aD more advanced \u5bf9\u5e94 increasingly sophisticated A\u3001B\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 3 Architecture (\u6b63\u786e\u738765.36%) Modern architectural forms generally have three separate components comparable to elements of the human body ; a supporting skeleton or frame, an outer skin enclosing the interior spaces, equipment, similar to the body\u2019s vital organs and systems. The equipment includes plumbing, electrical wiring, hot water, and air-conditioning. Of course in early architecture\u2014such as igloos and adobe structures\u2014 there was no such equipment\u3010B\u3011 , and the skeleton and skin were often one. Which of the following correctly characterizes the relationship between the human body and architecture that is described in paragraph5? A.Complex equipment inside buildings is the one element in modern architecture that resembles a component of the human body. B.The components in early buildings were similar to three particular elements of the human body. C.Modern buildings have components that are as likely to change as the human body is. D.In general, modern buildings more closely resemble the human body than earlier buildings do. \u9009\u62e9\uff1aD A\u9009\u9879\u9519\u8bef\uff0cthree element B\u9009\u9879similar\u9519\u8bef C\u9009\u7ebf\u65e0\u4e2d\u751f\u6709\uff0c\u539f\u6587\u672a\u4f53\u73b0change\u7684\u7279\u70b9 TPO 29 Competition (\u6b63\u786e\u7387 65.34%) To what extent competition determines the composition of a community and the density of particular species has been the source of considerable controversy. The problem is that competition ordinarily cannot be observed directly but must be inferred from the spread or increase of one species and the concurrent reduction or disappearance of another species. The Russian biologist G.F. Gause performed numerous two-species became extinct when only a single kind of resource was available. On the basis of these experiments and of field observations, the so-called law of competitive exclusion was formulated, according to which no two species can occupy the same niche. Numerous seeming exceptions to this law have since been found, but they can usually be explained as cases in which the two species, even though competing for a major joint resource, did not really occupy exactly the same niche. Paragraph 3 supports the idea that Gause's experiments were important because they A.provided a situation in which competition could be removed from the interaction between two species B.showed that previous ideas about the extent to which competition determines the composition of a community were completely mistaken C.helped establish that competition will remove all but one species from any given ecological niche D.offered evidence that competition between species is minimal when there is an overabundance of a single food source \u9009\u62e9\uff1aC A\u9009\u9879\u9519\u8bef could be romoved B\u9009\u9879\u9519\u8bef completely mistaken D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 11 Orientation and Navigation (\u6b63\u786e\u7387 65.24%) Early in his research, Kramer found that caged migratory birds became very restless at about the time they would normally have begun migration in the wild. Furthermore, he noticed that as they fluttered around in the cage, they often launched themselves in the direction of their normal migratory route. He then set up experiments with caged starlings and found that their orientation was, in fact, in the proper migratory direction except when the sky was overcast, at which times there was no clear direction to their restless movements. Kramer surmised, therefore, that they were orienting according to the position of the Sun. To test this idea, he blocked their view of the Sun and used mirrors to change its apparent position. He found that under these circumstances, the birds oriented with respect to the new \u201cSun\u201d. They seemed to be using the Sun as a compass to determine direction. At the time, this idea seemed preposterous. How could a bird navigate by the Sun when some of us lose our way with road maps? Obviously, more testing was in order. According to paragraph 3, when do caged starlings become restless ? A.When the weather is overcast B.When they are unable to identify their normal migratory route C.When their normal time for migration arrives D.When mirrors are used to change the apparent position of the Sun \u9009\u62e9\uff1aC - \u539f\u6587\u539f\u53e5\u540c\u4e49\u8f6c\u6362 TPO 18Lightning (\u6b63\u786e\u7387 64.14%) The separation of charged particles that forms in a storm cloud has a sandwich-like structure. Concentrations of positively charged particles develop at the top and bottom of the cloud, but the middle region becomes negatively charged. Recent measurements made in the field together with laboratory simulations offer a promising explanation of how this structure of charged particles forms. What happens is that small (millimeter-to centimeter-size) pellets of ice form in the cold upper regions of the cloud. When these ice pellets fall, some of them strike much smaller ice crystals in the center of the cloud. The temperature at the center of the cloud is about -15\u00b0C or lower. At such temperatures, the collision between the ice pellets and the ice crystals causes electrical charges to shift so that the ice pellets acquire a negative charge and the ice crystals become positively charged. Then updraft wind currents carry the light, positively charged ice crystals up to the top of the cloud. The heavier negatively charged ice pellets are left to concentrate in the center. This process explains why the top of the cloud becomes positively charged, while the center becomes negatively charged. The negatively charged region is large: several hundred meters thick and several kilometers in diameter. Below this large, cold, negatively charged region, the cloud is warmer than -15\u00b0C , and at these temperatures, collisions between ice crystals and falling ice pellets produce positively charged ice pellets that then populate a small region at the base of the cloud . According to paragraph 2, why are positively charged ice pellets produced in the lower part of the cloud ? A.Collisions between ice crystals and ice pellets increase in number in the lower part of the cloud B.The lower part of the cloud is smaller than the region above it C.More ice pellets than ice crystals reach the lower part of the cloud D.Temperatures in the lower part of the cloud are warmer than -15\u00b0C \u9009\u62e9\uff1aD A\u9009\u9879\u4e2d\u7684increase\u672a\u4f53\u73b0 B\u9009\u9879\u4e2d\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u9519\u8bef TPO 10 Variations in the Climate (\u6b63\u786e\u7387 64.12%) Over long periods of time, substances whose physical and chemical properties change with the ambient climate at the time can be deposited in a systematic way to provide a continuous record of changes in those properties overtime, sometimes for hundreds or thousands of years. Generally, the layering occurs on an annual basis, hence the observed changes in the records can be dated. Information on temperature, rainfall, and other aspects of the climate that can be inferred from the systematic changes in properties is usually referred to as proxy data. Proxy temperature records have been reconstructed from ice core drilled out of the central Greenland ice cap, calcite shells embedded in layered lake sediments in Western Europe, ocean floor sediment cores from the tropical Atlantic Ocean, ice cores from Peruvian glaciers, and ice cores from eastern Antarctica . While these records provide broadly consistent indications that temperature variations can occur on a global scale, there are nonetheless some intriguing differences, which suggest that the pattern of temperature variations in regional climates can also differ significantly from each other. According to paragraph 3, scientists are able to reconstruct proxy temperature records by A.studying regional differences in temperature variations B.studying and dating changes in the properties of substances C.observing changes in present day climate conditions D.inferring past climate shifts from observations of current climatic changes \u9009\u62e9\uff1aB - \u539f\u6587\u540c\u4e49\u8f6c\u6362 TPO 1 The Origins of Theater (\u6b63\u786e\u7387 64.07%) Stories (myths) may then grow up around a ritual. Frequently the myths include representatives of those supernatural forces that the rites celebrate or hope to influence. Performers may wear costumes and masks to represent the mythical characters or supernatural forces in the rituals or in accompanying celebrations. As a people becomes more sophisticated, its conceptions of supernatural forces and causal relationships may change. As a result , it may abandon or modify some rites. But the myths that have grown up around the rites may continue as part of the group\u2019s oral tradition\u3010D\u3011 and may even come to be acted out under conditions divorced from these rites. When this occurs, the first step has been taken toward theater as an autonomous activity\u3010A\u3011, and thereafter entertainment and aesthetic values may gradually replace the former mystical and socially efficacious concerns. According to paragraph 2, what may cause societies to abandon certain rites ? A.Emphasizing theater as entertainment B.Developing a new understanding of why events occur. C.Finding a more sophisticated way of representing mythical characters D.Moving from a primarily oral tradition to a more written tradition \u9009\u62e9\uff1aC A\u3001B\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 B TPO 2 The Origins of Cetaceans (\u6b63\u786e\u7387 63.93%) It should be obvious that cetaceans-whales, porpoises, and dolphins-are mammals. They breathe through lungs, not through gills, and give birth to live young. Their streamlined bodies, the absence of hind legs, and the presence of a fluke and blowhole cannot disguise their affinities with land dwelling mammals. However, unlike the cases of sea otters and pinnipeds (seals, sea lions, and walruses, whose limbs are functional both on land and at sea), it is not easy to envision what the first whales looked like. Extinct but already fully marine cetaceans are known from the fossil record. How was the gap between a walking mammal and a swimming whale bridged? Missing until recently were fossils clearly intermediate, or transitional, between land mammals and cetaceans. In paragraph 1, what does the author say about the presence of a blowhole in cetaceans ? A.It clearly indicates that cetaceans are mammals. B.It cannot conceal the fact that cetaceans are mammals. C. It is the main difference between cetaceans and land-dwelling mammals. D. It cannot yield clues about the origins of cetaceans. \u9009\u62e9\uff1aA - \u7406\u89e3\u539f\u6587\u610f\u601d B \u9519\u9009\u539f\u56e0\uff1a\u770b\u9519\u4e86 TPO 31 Savanna Formation (\u6b63\u786e\u7387 63.82%) Most savannas probably experience mild fires frequently and major burns every two years or so. Many savanna and dry-forest plant species are called pyrophytes, meaning they are adapted in various ways to withstand occasional burning\u3010C\u3011. Frequent fire is a factor to which rain forest species seem unable to adapt, although ancient charcoal remains from Amazon forest soils dating prior to the arrival of humans suggest that moist forests also occasionally burn. Experiments suggest that if fire did not occur in savannas in the Americas, species composition would change significantly. When burning occurs, it prevents competition among plant species from progressing to the point where some species exclude others, reducing the overall diversity of the ecosystem\u3010B / D\u3011 . But in experimental areas protected from fire, a few perennial grass species eventually come to dominate, outcompeting all others. Evidence from other studies suggests that exclusion of fire results in markedly decreased plant-species richness, often with an increase in tree density. There is generally little doubt that fire is a significant factor in maintaining savanna, certainly in most Paragraph 5 supports which of the following statements regarding the importance of fires in maintaining savannas ? A.Fires prevent the growth of pyrophytes. B.Fires eliminate some species and thus reduce the overall diversity of the ecosystem. C.Fires that occur once every two years are unlikely to help maintain savannas. D.Fires prevent some species from eliminating other species with which they compete. \u9009\u62e9\uff1aD A\u3001B\u3001C\u9009\u9879\u9519\u8bef TPO19 Discovering the Ice Ages(\u6b63\u786e\u7387 63.75%) In the middle of the nineteenth century\u3010A\u3011 , Louis Agassiz, one of the first scientists to study glaciers, immigrated to the United States from Switzerland and became a professor at Harvard University, where he continued his studies in geology and other sciences. For his research, Agassiz visited many places in the northern parts of Europe and North America, from the mountains of Scandinavia and New England to the rolling hills of the American Midwest. In all these diverse regions, Agassiz saw signs of glacial erosion and sedimentation. In flat plains country, he saw moraines (accumulations of earth and loose rock that form at the edges of glaciers) that reminded him of the terminal moraines found at the end of valley glaciers in the Alps. The heterogeneous material of the drift (sand, clay, and rocks deposited there) convinced him of its glacial origin. The areas covered by this material were so vast that the ice that deposited it must have been a continental glacier larger than Greenland or Antarctica. Eventually, Agassiz and others convinced geologists and the general public that a great continental glaciation had extended the polar ice caps far into regions that now enjoy temperate climates. For the first time, people began to talk about ice ages. It was also apparent that the glaciation occurred in the relatively recent past because the drift was soft, like freshly deposited sediment. We now know the age of the glaciation accurately from radiometric dating of the carbon-14 in logs buried in the drift. The drift of the last glaciation was deposited during one of the most recent epochs of geologic time, the Pleistocene, which lasted from 1.8 million to 10,000 years ago. Along the east coast of the United States, the southernmost advance of this ice is recorded by the enormous sand and drift deposits of the terminal moraines that form Long Island and Cape Cod. It soon became clear that there were multiple glacial ages during the Pleistocene, with warmer interglacial intervals between them . As geologists mapped glacial deposits in the late nineteenth century, they became aware that there were several layers of drift, the lower ones corresponding to earlier ice ages. Between the older layers of glacial material were well- developed soils containing fossils of warmclimate plants. These soils were evidence that the glaciers retreated as the climate warmed. By the early part of the twentieth century\u3010C\u3011 , scientists believed that four distinct glaciations had affected North America and Europe during the Pleistocene epoch. This idea was modified in the late twentieth century\u3010D\u3011 , when geologists and oceanographers examining oceanic sediment found fossil evidence of warming and cooling of the oceans. Ocean sediments presented a much more complete geologic record of the Pleistocene than continental glacial deposits did. The fossils buried in Pleistocene and earlier ocean sediments were of foraminifera\u2014small, singlecelled marine organisms that secrete shells of calcium carbonate, or calcite. These shells differ in their proportion of ordinary oxygen (oxygen-16) and the heavy oxygen isotope (oxygen-18). The ratio of oxygen-16 to oxygen-18 found in the calcite of a foraminifer's shell depends on the temperature of the water in which the organism lived. Different ratios in the shells preserved in various layers of sediment reveal the temperature changes in the oceans during the Pleistocene epoch. Isotopic analysis of shells allowed geologists to measure another glacial effect. They could trace the growth and shrinkage of continental glaciers, even in parts of the ocean where there may have been no great change in temperature\u2014around the equator, for example. The oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice. During glaciations, the lighter oxygen-16 has a greater tendency to evaporate from the ocean surface than the heavier oxygen-18 does. Thus, more of the heavy isotope is left behind in the ocean and absorbed by marine organisms. From this analysis of marine sediments, geologists have learned that there were many shorter, more regular cycles of glaciation and deglaciation than geologists had recognized from the glacial drift of the continents alone. According to the passage, when did scientists begin to realize that more than one ice age had occurred ? A.In the mid nineteenth century B.In the late nineteenth century C.In the early twentieth century D.In the late twentieth century \u9009\u62e9\uff1aB - \u539f\u6587\u53e5\u5b50\u5b9a\u4f4d TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 63.64%) Bills of exchange contributed to the development of banks, as exchangers began to provide loans. Not until the eighteenth century, however, did such banks as the Bank of Amsterdam and the Bank of England begin to provide capital for business investment. Their principal function was to provide funds for the state . According to paragraph 7, until the eighteenth century, it was the principal function of which of the following to provide funds for the state ? A.Bills of exchange B.Exchangers who took loans C.Banks D.Business investment \u9009\u62e9\uff1aC - \u6307\u4ee3\u8bcdtheir TPO 6 William Smith (\u6b63\u786e\u7387 63.61%) Not only could Smith identify rock strata by the fossils they contained, he could also see a pattern emerging; certain fossils always appear in more ancient sediments, while others begin to be seen as the strata become more recent. By following the fossils, Smith was able to put all the strata of England's earth into relative temporal sequence. About the same time, Georges Cuvier made the same discovery\u3010B\u3011 while studying the rocks around Paris. Soon it was realized that this principle of faunal (animal) succession was valid not only in England or France but virtually everywhere. It was actually a principle of floral succession as wel\u3010A\u3011l , because plants showed the same transformation through time as did fauna\u3010D\u3011 . Limestone may be found in the Cambrian or-300 million years later-in the Jurassic strata but a trilobite\u2014the ubiquitous marine arthropod that had its birth in the Cambrian\u2014will never be found in Jurassic strata, nor a dinosaur in the Cambrian. Select the TWO answer choices that are true statements based upon the discussion of the principle of faunal succession in paragraph 5. To receive credit, you must select TWO answers. A.It was a principle that applied to fauna but not to flora. B.It was discovered independently by two different geologists. C.It describes how fossils are distributed in rock strata D.It explains why plants and animals undergo transformations through time. \u9009\u62e9\uff1aBC - \u539f\u6587\u610f\u601d\u7406\u89e3 TPO 4 Cave Art in Europe (\u6b63\u786e\u7387 63.16%) The particular symbolic significance of the cave paintings in southwestern France is more explicitly revealed, perhaps, by the results of a study conducted by researchers Patricia Rice and Ann Paterson. The data they present suggest that the animals portrayed in the cave paintings were mostly the ones that the painters preferred for meat and for materials such as hides. For example, wild cattle (bovines) and horses are portrayed more often than we would expect by chance, probably because they were larger and heavier (meatier) than other animals in the environment. In addition, the paintings mostly portray animals that the painters may have feared the most because of their size, speed, natural weapons such as tusks and horns, and the unpredictability of their behavior. That is, mammoths, bovines, and horses are portrayed more often than deer and reindeer. Thus, the paintings are consistent with the idea that the art is related to the importance of hunting in the economy of Upper Paleolithic people. Consistent with this idea, according to the investigators, is the fact that the art of the cultural period that followed the Upper Paleolithic also seems to reflect how people got their food\u3010B\u3011. But in that period, when getting food no longer depended on hunting large game animals (because they were becoming extinct), the art ceased to focus on portrayals of animals.\u3010C\u3011 According to paragraph 4, what change is evident in the art of the period following the Upper Paleolithic ? A.This new art starts to depict small animals rather than large ones. B.This new art ceases to reflect the ways in which people obtained their food. C.This new art no longer consists mostly of representations of animals. D.This new art begins to show the importance of hunting to the economy. \u9009\u62e9\uff1aC B\u9009\u9879\u9519\u8bef\uff1bA\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 12 Water in the Desert (\u6b63\u786e\u7387 62.59%) Groundwater is stored in the pore spaces and joints of rocks and unconsolidated (unsolidified) sediments or in the openings widened through fractures and weathering. The water-saturated rock or sediment is known as an \"\"aquifer\"\". Because they are porous, sedimentary rocks, such as sandstones and conglomerates, are important potential sources of groundwater. Large quantities of water may also be stored in lime stones when joints and cracks have been enlarged to form cavities. Most limestone and sandstone aquifers are deep and extensive but may contain ground waters that are not being recharged. Most shallow aquifers in sand and gravel deposits produce lower yields, but they can be rapidly recharged. Some deep aquifers are known as \"\"fossil waters. The term \"\"fossil\"\" describes water that has been present for several thousand years\u3010A\u3011. These aquifers became saturated more than 10,000 years ago\u3010C / B\u3011 and are no longer being recharged \u3010D\u3011. According to paragraph 6, the aquifers called \u201cfossil waters\u201d A.contain fossils that are thousands of years old B.took more than 10.000 years to become saturated with water C.have not gained or lost any water for thousands of years D.have been collecting water for the past 10,000 years \u9009\u62e9\uff1aC A\u9009\u9879\u9519\u8bef\uff0c\u539f\u6587\u662f\u6307\u91cc\u9762\u7684\u6c34\u5206\u5b58\u5728\u4e86\u51e0\u5343\u5e74\uff1bB\u9009\u9879\u9519\u8bef\uff0c\u539f\u6587\u662f\u6307\u572810000\u5e74\u4ee5\u524d\u5c31\u5df2\u7ecf\u5145\u6ee1\u6c34\u5206\u4e86\uff1bD\u9009\u9879\u9519\u8bef\uff0c\u539f\u6587are no longer being recharged\u53cd\u9a73 TPO 29 The History of Waterpower (\u6b63\u786e\u7387 62.32%) There was much debate on the relative efficiencies of different types of water wheels. The period from about 1650 until 1800 saw some excellent scientific and technical investigations of different designs. They revealed output powers ranging from about 1 horsepower to perhaps 60 for the largest wheels and confirm that for maximum efficiency, the water should pass across the blades as smoothly as possible and fall away with minimum speed\u3010B\u3011 , having given up almost all of its kinetic energy\u3010C\u3011 . (They also proved that, in principle, the overshot wheel, a type of wheel in which an overhead stream of water powers the wheel, should win the efficiency competition.\u3010D\u3011 ) According to paragraph 3, which of the following was discovered as a result of scientific and technical investigations of waterpower conducted between 1650 and 1800? A.Some types of small waterwheels can produce as much horsepower as the very largest wheels. B.Waterwheels operate more efficiently when water falls away from their blades slowly than when water falls away quickly. C.Waterwheel efficiency can be improved by increasing the amount of kinetic energy water contains as it passes over a waterwheel's blades. D.Unlike other types of waterwheels, the overshot wheel is capable of producing more than 60 horsepower units of energy. \u9009\u62e9\uff1aB A\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879\u9519\u8bef\uff0c\u4e0e\u539f\u6587\u610f\u601d\u76f8\u53cd\uff0cincrease \u2260 give up TPO 30 Role of Play in Development (\u6b63\u786e\u7387 62.3%) Play is easier to define with examples than with concepts.\u3010A\u3011 In any case, in animals it consists of leaping, running, climbing, throwing, wrestling, and other movements, either along, with objects, or with other animals. Depending on the species, play may be primarily for social interaction, exercise, or exploration. One of the problems in providing a clear definition of play is that it involves the same behaviors that take place in other circumstance --dominance, predation, competition, and real fighting.\u3010B\u3011 Thus, whether play occurs or not depends on the intention of the animals, and the intentions are not always clear from behaviors alone.\u3010D\u3011 According to paragraph 1, why is play difficult to define ? A.Play must be defined with concepts, not examples. B.Play behavior often looks like nonplay behavior. C.Play often occurs in the presence of animals that are not playing. D.Play occurs independently of an animal\u2019s intentions. \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef\uff0c\u8fc7\u4e8e\u7edd\u5bf9\uff1bC\u9009\u9879\u903b\u8f91\u9519\u8bef\uff0c\u56e0\u4e3aplay\u80af\u5b9a\u662f\u5728animals that are playing\u7684\u65f6\u5019\u53d1\u751f\u7684\uff0c\u82e5play\u6362\u6210play behavior\u5219\u6b63\u786e\uff1bD\u9009\u9879\u9519\u8bef TPO 19 The Roman Army's Impact on Britain (\u6b63\u786e\u7387 61.33%) In the wake of the Roman Empire's conquest of Britain in the first century A.D., a large number of troops stayed in the new province, and these troops had a considerable impact on Britain with their camps, fortifications, and participation in the local economy. Assessing the impact of the army on the civilian population starts from the realization that the soldiers were always unevenly distributed across the country.\u3010A\u3011 Areas rapidly incorporated into the empire were not long affected by the military. Where the army remained stationed, its presence was much more influential. The imposition of a military base involved the requisition of native lands for both the fort and the territory needed to feed and exercise the soldiers' animals.\u3010C\u3011 The imposition of military rule also robbed local leaders of opportunities to participate in local government\u3010D\u3011 , so social development was stunted and the seeds of disaffection sown. This then meant that the military had to remain to suppress rebellion and organize government. According to paragraph 1, what effect did military occupation have on the local population ? A.It encouraged more even distribution of the population and the settlement of previously undeveloped territory. B.It created discontent and made continuing military occupation necessary. C.It required local labor to construct forts and feed and exercise the soldiers' animals. D.It provided local leaders with opportunities to participate in governance. \u9009\u62e9\uff1aB A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff0c\u539f\u6587\u8bf4\u7684\u662f\u58eb\u5175were distributed\uff1bC\u9009\u9879\u7684local labor\u4e0d\u6b63\u786e\uff0c\u662fnative lands\uff1bD\u9009\u9879\u9519\u8bef\uff0crob \u2260 provide TPO 8 The Rise of Teotihuac\u00e1n (\u6b63\u786e\u7387 61.26%) It seems likely that Teotihuac\u00e1n\u2019s natural resources\u2015along with the city elite\u2019s ability to recognize their potential\u3010B\u3011 \u2015 gave the city a competitive edge over its neighbors , The valley, like many other places in Mexican and Guatemalan highlands, was rich in obsidian\u3010D\u3011 . The hard volcanic stone was a resource that had been in great demand for many years, at least since the rise of the Olmecs (a people who flourished between 1200 and 400 B.C.), and it apparently had a secure market. Moreover, recent research on obsidian tools\u3010C\u3011 found at Olmecs sites has shown that some of the obsidian obtained by the Olmecs originated near Teotihuac\u00e1n . Teotihuac\u00e1n obsidian must have been recognized as a valuable commodity for many centuries before the great city arose. Which of the following allowed Teotihuac\u00e1n to have \u201ca competitive edge over its neighbors\u201d ? A.A well-exploited and readily available commodity B.The presence of a highly stable elite class C.Knowledge derived directly from the Olmecs about the art of tool making D. Scarce natural resources in nearby areas such as those located in what are now the Guatemalan and Mexican highlands \u9009\u62e9\uff1aD A\u9009\u9879\u4e0d\u77e5\u9053\u54ea\u91cc\u9519\u4e86\uff0c\u5e94\u8be5\u662f\u65e0\u4e2d\u751f\u6709\uff1bB\u9009\u9879\u4e0d\u662f\u4e3b\u8981\u539f\u56e0\uff1bC\u9009\u9879\u548c\u9898\u76ee\u65e0\u5173 A TPO 7 Ancient Rome and Greece (\u6b63\u786e\u7387 60.26%) Rome\u2019s debt to Greece was enormous. The Romans adopted Greek religion and moral philosophy. In literature, Greek writers were consciously used as models by their Latin successors. It was absolutely accepted that an educated Roman should be fluent in Greek\u3010A\u3011 . In speculative philosophy and the sciences, the Romans made virtually no advance on early achievements. Yet it would be wrong to suggest that Rome was somehow a junior partner in Greco-Roman civilization. The Roman genius was projected into new spheres\u2014especially into those of law, military organization\u3010C\u3011, administration, and engineering. Moreover, the tensions that arose within the Roman state produced literary and artistic sensibilities of the highest order. \u200b It was no accident that many leading Roman soldiers and statesmen were writers of high caliber . Which of the following statements about leading Roman soldiers and statesmen is supported by paragraphs 5 and 6? A.They could read and write the Greek language. B.They frequently wrote poetry and plays. C.They focused their writing on military matters. D.They wrote according to the philosophical laws of the Greeks. \u9009\u62e9\uff1aA B\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879\u4ee5\u504f\u6982\u5168 TPO 2 Early Cinema (\u6b63\u786e\u7387 59.64%) With the advent of projection, the viewer's relationship with the image was no longer private, as it had been with earlier peepshow devices such as the Kinetoscope and the Mutoscope , which was a similar machine that reproduced motion by means of successive images on individual photographic cards instead of on strips of celluloid.\u3010D\u3011 It suddenly became public-an experience that the viewer shared with dozens, scores, and even hundreds of others. At the same time, the image that the spectator looked at expanded from the minuscule peepshow dimensions of 1 or 2 inches (in height) to the life-size proportions of 6 or 9 feet. Which of the following is mentioned in paragraph 6 as one of the ways the Mutoscope differed from the Kinetoscope ? A.Sound and motion were simultaneously produced in the Mutoscope. B.More than one person could view the images at the same time with the Mutoscope. C.The Mutoscope was a less sophisticated earlier prototype of the Kinetoscope. D.A different type of material was used to produce the images used in the Mutocope. \u9009\u62e9\uff1aD - \u539f\u6587\u539f\u53e5\u7406\u89e3 TPO 31 Speciation in Geographically Isolated Populations (\u6b63\u786e\u7387 59.54%) Geographic isolation can also proceed slowly, over great spans of time. We find evidence of such extended events in the fossil record, which affords glimpse into the breakup of formerly continuous environments. For example, during past ice ages, glaciers advanced down through North America and Europe and gradually cut off parts of populations from one another. When the glaciers retreated, the separated populations of plants and animals came into contact again . Some groups that had descended from the same parent population were no longer reproductively compatible\u3010A\u3011 \u2013 they had evolved into separate species. In other groups, however, genetic divergences had not proceeded so far, and the descendants could still interbreed \u2013 for them, reproductive isolation was not completed, and so speciation had not occurred. According to paragraph 3, separation of subpopulations by glaciers resulted in speciation in those groups of plants and animals that A.Were reproductively isolated even after the glaciers disappeared B.Had adjusted to the old conditions caused by the glaciers C.Were able to survive being separated from their parent population D.Had experienced some genetic divergences from their parent population \u9009\u62e9\uff1aA B\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bD\u662f\u6709\u7684\uff0c\u4e0d\u77e5\u9053\u54ea\u91cc\u9519\u8bef TPO 21 Autobiographical Memory (\u6b63\u786e\u7387 59.52%) Another suggestion is that before children can talk about past events in their lives, they need to have a reasonable understanding of the self as a psychological entity.\u3010B\u3011 The development of an understanding of the self becomes evident between the first and second years of life and shows rapid elaboration in subsequent years. The realization that the physical self has continuity in time,\u3010C\u3011 according to this hypothesis, lays the foundation for the emergence of autobiographical memory. According to paragraph 3, what is the relationship between autobiographical memory and the development of an understanding of the self ? A.Autobiographical memory aids in the development of an understanding of the self. B.Children possess an understanding of the self when they can talk about past events in their lives. C.The realization that the self continues through time may aid in the onset of autobiographical memory. D.The development of autobiographical memory helps children gain an understanding of their roles in their social relationships. \u9009\u62e9\uff1aC - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 A\u9009\u9879\u9519\u8bef\uff0c\u4e24\u8005\u5173\u7cfb\u76f8\u53cd\uff1bB\u9009\u9879\u903b\u8f91\u9519\u8bef\uff1bD\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 14 Maya Water Problems (\u6b63\u786e\u7387 59.23%) Although southem Maya areas received more rainfall than northern areas, problems of water were paradoxically more severe in the wet south. While that made things hard for ancient Maya living in the south, it has also made things hard for modem archaeologists who have difficulty understanding why ancient droughts caused bigger problems in the wet south than in the dry north. The likely explanation is that an area of underground freshwater underlies the Yucatan Peninsula, but surface elevation increases from north to south, so that as one moves south the land surface lies increasingly higher above the water table.\u3010D\u3011 In the northern peninsula the elevation is sufficiently low that the ancient Maya were able to reach the water table at deep sinkholes called cenotes, or at deep caves. In low-elevation north coastal areas without sinkholes, the Maya would have been able to get down to the water table by digging wells up to 75 feet (22 meters) deep. But much of the south lies too high above the water table for cenotes or wells to reach down to it. Making matters worse, most of the Yucatan Peninsula consists of karst, a porous sponge-like limestone terrain where rain runs straight into the ground and where little or no surface water remains available.\u3010B\u3011 Which of the following statements about the availability of water in the Mayan homeland is supported by paragraph 3? A.The construction of wells was an uncommon practice in both the north and the south because it was too difficult to dig through the karst. B.In most areas in the north and the south, rainwater was absorbed directly into the porous karst. C.The water table was an important resource for agriculture in both the north and the south of the Yucatan Peninsula, D.The lack of surface water in both the north and the south was probably due to the fact that most of it was quickly used up for agricultural purposes. \u9009\u62e9\uff1aB A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879south\u65e0\u6cd5\u5229\u7528water table\uff1bD\u9009\u9879\u9519\u8bef TPO 1 Timberline Vegetation on Mountains (\u6b63\u786e\u7387 59.06%) At the upper timberline the trees begin to become twisted and deformed. This is particularly true for trees in the middle and upper latitudes, which tend to attain greater heights on ridges, whereas in the tropics the trees reach their greater heights in the valleys. This is because middle- and upper- latitude timberlines are strongly influenced by the duration and depth of the snow cover\u3010A\u3011 . As the snow is deeper and lasts longer in the valleys, trees tend to attain greater heights on the ridges, even though they are more exposed to high-velocity winds\u3010C\u3011 and poor, thin soils there. In the tropics, the valleys appear to be more favorable because they are less prone to dry out, they have less frost, and they have deeper soils. According to paragraph 3, which of the following is true of trees in the middle and upper latitudes ? A.Tree growth is negatively affected by the snow cover in valleys. B.Tree growth is greater in valleys than on ridges. C.Tree growth on ridges is not affected by high-velocity winds. D.Tree growth lasts longer in those latitudes than it does in the tropics. \u9009\u62e9\uff1aA B\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879\u9519\u8bef TPO 6 Infantile Amnesia (\u6b63\u786e\u7387 59.03%) A third likely explanation for infantile amnesia involves incompatibilities between the ways in which infants encode information and the ways in which older children and adults retrieve it. Whether people can remember an event depends critically on the fit between the way in which they earlier encoded the information and the way in which they later attempt to retrieve it. The better able the person is to reconstruct the perspective from which the material was encoded, the more likely that recall will be successful. This view is supported by a variety of factors that can create mismatches between very young children's encoding and older children's and adults' retrieval efforts . The world looks very different to a person whose head is only two or three feet above the ground than to one whose head is five or six feet above it, older children and adults often try to retrieve the names of things they saw, but infants would not have encoded the information verbally. General knowledge of categories of events such as a birthday party or a visit to the doctor's office helps older individuals encode their experiences, but again, infants and toddlers are unlikely to encode many experiences within such knowledge structures. According to paragraphs 5 and 6, one disadvantage very young children face in processing information is that they cannot A.process a lot of information at one time B.organize experiences according to type C.block out interruptions D.interpret the tone of adult language \u9009\u9879\uff1aB - \u4e0d\u786e\u5b9a TPO 23 Rock Art of the Australia Aborigines (\u6b63\u786e\u7387 58.18%) In the 1970s when the study of Australian archaeology was in an exciting phase of development, with the great antiquity of rock art becoming clear. Lesley Maynard, the archaeologist who coined the phrase \u201cPanaramitee style,\u201d suggested that a sequence could be determined for Australian rock art, in which a geometric style gave way to a simple figurative style (outlines of figures and animals), followed by a range of complex figurative styles that, unlike the pan-Australian geometric tradition tended to much greater regional diversity . While accepting that this sequence fits the archaeological profile of those sites, which were occupied continuously over many thousands of years a number of writers have warned that the underlying assumption of such a sequence\u2014a development from the simple and the geometric to the complex and naturalistic\u2014obscures the cultural continuities in Aboriginal Australia, in which geometric symbolism remains fundamentally important. In this context the simplicity of a geometric motif may be more apparent than real. Motifs of seeming simplicity can encode complex meanings in Aboriginal Australia. And has not twentieth-century art shown that naturalism does not necessarily follow abstraction in some kind of predetermine sequence? According to paragraph 5, the complex figurative style differs from the geometric style in that the complex figurative style A. varies significantly from region to region B. is more meaningful C. appears on only a few types of rocks D. has changed little overtime \u9009\u62e9\uff1aA - \u539f\u6587\u540c\u4e49\u8f6c\u6362 TPO 14 Pastoralism in Ancient Inner Eurasia (\u6b63\u786e\u7387 57.59%) Nomadism also subjects pastoralist communities to strict rules of portability . If you are constantly on the move, you cannot afford to accumulate large material surpluses. Such rules limit variations in accumulated material goods between pastoralist households (though they may also encourage a taste for portable goods of high value such as silks or jewelry). So, by and large, nomadism implies a high degree of self-sufficiency and inhibits the appearance of an extensive division of labor . Inequalities of wealth and rank certainly exist, and have probably existed in most pastoralist societies, but except in periods of military conquest, they are normally too slight to generate the stable, hereditary hierarchies that are usually implied by the use of the term class. Inequalities of gender have also existed in pastoralist societies, but they seem to have been softened by the absence of steep hierarchies of wealth in most communities, and also by the requirement that women acquire most of the skills of men, including, often, their military skills. According to paragraph 4, the fact that pastoralist communities are subject to \u201cstrict rules of portability\u201d encourages such communities to A.relocate less frequently than they would otherwise B.have households that are more or less equal in wealth C.become self-sufficient in the manufacture of silk and jewelry D.share large material surpluses with neighboring communities \u9009\u62e9\uff1aB - \u4e0d\u662f\u5f88\u786e\u5b9a A\u3001C\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 27 Predator-Prey Cycles (\u6b63\u786e\u7387 56.49%) Predators are an essential factor in maintaining communities that are rich and diverse in species. Without predators, the species that is the best competitor for food, shelter, nesting sites, and other environmental resources tends to dominate and exclude the species with which it competes. This phenomenon is known as \u201c competitor exclusion .\u201d However, if the community contains a predator of the strongest competitor species, then the population of that competitor is controlled. Thus even the less competitive species are able to survive. For example, sea stars prey on a variety of bivalve mollusks and prevent these bivalves from monopolizing habitats on the sea floor. This opens up space for many other organisms. When sea stars are removed, species diversity falls sharply. Therefore, from the stand point of diversity, it is usually a mistake to eliminate a major predator from a community. According to paragraph 7, which of the following is true of the phenomenon of competitor exclusion ? A.It results in more diverse communities B.It requires the presence of predators C.It affects all competitors equally D.It happens only when there is a dominant competitor \u9009\u62e9\uff1aD best \u5bf9\u5e94 dominant A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bB\u9009\u9879\u9519\u8bef\uff0cwithout \u2260 require\uff1bC\u9009\u9879equally\u9519\u8bef TPO 9 Reflection in Teaching (\u6b63\u786e\u7387 55.93%) The work of Wildman and Niles suggests the importance of recognizing some of the difficulties of instituting reflective practice. Others have noted this, making a similar point about the teaching profession's cultural inhibitions about reflective practice. Zeichner and Liston (1987) point out the inconsistency between the role of the teacher as a (reflective) professional decision maker and the more usual role of the teacher as a technician, putting into practice the ideas of others. More basic than the cultural issues is the matter of motivation . Becoming a reflective practitioner requires extra work (Jaworski, 1993) and has only vaguely defined goals with, perhaps, little initially perceivable reward and the threat of vulnerability. Few have directly questioned what might lead a teacher to want to become reflective. Apparently, the most obvious reason for teachers to work toward reflective practice is that teacher educators think it is a good thing. There appear to be many unexplored matters about the motivation to reflect-for example, the value of externally motivated reflection as opposed to that of teachers who might reflect by habit. According to paragraph 6, teachers may be discouraged from reflecting because A.it is not generally supported by teacher educators B.the benefits of reflection may not be apparent immediately C.it is impossible to teach and reflect on one's teaching at the same time D.they have often failed in their attempts to become reflective practitioners \u9009\u62e9\uff1aA - \u4e0d\u662f\u5f88\u786e\u5b9a C\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 B TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 54.55%) In the late sixteenth century and into the seventeenth, Europe continued the growth that had lifted it out of\u3010B / D\u3011 the relatively less prosperous medieval period (from the mid 400s to the late 1400s). Among the key factors behind this growth were increased agricultural productivity\u3010A\u3011 and an expansion of trade\u3010C\u3011 . According to paragraph 1, what was true of Europe during the medieval period ? A.Agricultural productivity declined. B.There was relatively little economic growth. C.The general level of prosperity declined. D.Foreign trade began to play an important role in the economy. \u9009\u62e9\uff1aD A\u9009\u9879\u9519\u8bef increase\u548cdecline\u610f\u601d\u76f8\u53cd\uff1bB\u3001C\u9009\u9879\u9519\u8bef\uff0c\u82f1\u56fd\u9003\u8131\u4e86\u4e0d\u90a3\u4e48\u7e41\u8363\u7684\u4e2d\u4e16\u7eaa\u65f6\u671f B TPO 4 Petroleum Resources (\u6b63\u786e\u7387 54.47%) As oil becomes increasingly difficult to find, the search for it is extended into more-hostile environments. The development of the oil field on the North Slope of Alaska and the construction of the Alaska pipeline are examples of the great expense \u3010B\u3011 and difficulty involved in new oil discoveries. Offshore drilling platforms extend the search for oil to the ocean's continental shelves\u2014those gently sloping submarine regions at the edges of the continents. More than one-quarter of the world's oil and almost one-fifth of the world's natural gas come from offshore, even though offshore drilling is six to seven times more expensive than drilling on land. A significant part of this oil and gas comes from under the North Sea between Great Britain and Norway. Of course, there is far more oil underground than can be recovered. It may be in a pool too small or too far from a potential market to justify the expense of drilling. Some oil lies under regions where drilling is forbidden, such as national parks or other public lands. Even given the best extraction techniques, only about 30 to 40 percent of the oil in a given pool can be brought to the surface. The rest is far too difficult to extract and has to remain underground. What does the development of the Alaskan oil field mentioned in paragraph 4 demonstrate? A. More oil is extracted from the sea than from land. B.Drilling for oil requires major financial investments. C.The global demand for oil has increased over the years. D.The North Slope of Alaska has substantial amounts of oil \u9009\u62e9\uff1aB - \u539f\u6587\u610f\u601d\u7406\u89e3 A\u3001C\u3001D\u65e0\u4e2d\u751f\u6709 TPO 9 Reflection in Teaching (\u6b63\u786e\u7387 54.09%) Wildman and Niles observed that systematic reflection on teaching required a sound ability to understand classroom events in an objective manner . They describe the initial understanding in the teachers with whom they were working as being \"\"utilitarian...and not rich or detailed enough to drive systematic reflection.\"\" Teachers rarely have the time or opportunities to view their own or the teaching of others in an objective manner . Further observation revealed the tendency of teachers to evaluate events rather than review the contributory factors in a considered manner by, in effect, standing outside the situation. According to paragraph 3, what did the teachers working with Wildman and Niles often fail to do when they attempted to practice reflection ? A.Correctly calculate the amount of time needed for reflection B.Provide sufficiently detailed descriptions of the methods they used to help them reflect C.Examine thoughtfully the possible causes of events in their classrooms D.Establish realistic goals for themselves in practicing reflection \u9009\u62e9\uff1aC - \u6392\u9664\u6cd5 - \u4e0d\u786e\u5b9a TPO 25 The Evolutionary Origin of Plants (\u6b63\u786e\u7387 52.81%) These adaptations allowed an increasing diversity of plant forms to exploit dry land . Life on land, however, also required new methods of transporting sperm to eggs. Unlike aquatic and marine forms, land plants cannot always rely on water currents to carry their sex cells and disperse their fertilized eggs. So the most successful groups of land plants are those that evolved methods of fertilized sex cell dispersal that are independent of water and structures that protest developing embryos from drying out. Protected embryos and waterless dispersal of sex cells were achieved with the origin of seed plans and the key evolutionary innovations that they introduced: pollen, seeds, and later, flowers and fruits. According to Paragraph 6, the adaptation made by terrestrial plants had which of the following effect ? A.Plants developed reproductive strategies usable in both land and water environment B. the plant diversity achieved in water environments diminished on land C.seed plants became the dominant species among plants D.a greater range of plants was able to develop \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 A\u9009\u9879both\u65e0\u4e2d\u751f\u6709\uff1bB\u9009\u9879plant diversity diminished\u9519\u8bef\uff1bC\u9009\u9879dominant\u65e0\u4e2d\u751f\u6709 TPO 7 Ancient Rome and Greece (\u6b63\u786e\u7387 52.74%) Modern attitudes to Roman civilization range from the infinitely impressed to the thorough disgusted. As always, there are the power worshippers, especially among historians, who are predisposed to admire whatever is strong, who feel more attracted to the might of Rome than to the subtlety of Greece. At the same time, there is a solid body of opinion that dislikes Rome. For many, Rome is at best the imitator and the continuator of Greece on a larger scale. Greek civilization had quality; Rome, mere quantity. Greece was the inventor; Rome, the research and development division. Such indeed was the opinion of some of the more intellectual Romans.\u201d had the Greeks held novelty in such disdain as we,\u201d asked Horace in his Epistle, \u201cwhat work of ancient date would now exist?\u201d According to paragraph 4, intellectual Romans such as Horace held which of the following opinions about their civilization? A.Ancient works of Greece held little value in the Roman world. B.The Greek civilization had been surpassed by the Romans. C.Roman civilization produced little that was original or memorable. D.Romans valued certain types of innovations that had been ignored by ancient Greeks. \u9009\u62e9\uff1aC \u4e3b\u8981\u89c2\u70b9\u662f\u8fd9\u4e9b\u4eba\u4e0d\u559c\u6b22Rome civilization\uff1bA\u3001B\u9009\u9879\u610f\u601d\u76f8\u53cd\uff1bD\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 2 Early Cinema (\u6b63\u786e\u7387 51.07%) Although early exhibitors regularly accompanied movies with live acts, the substance of the movies themselves is mass-produced, prerecorded material that can easily be reproduced by theaters with little or no active participation by the exhibitor. Even though early exhibitors shaped their film programs by mixing films and other entertainments together in whichever way they thought would be most attractive to audiences or by accompanying them with lectures, their creative control remained limited. What audiences came to see was the technological marvel of the movies; the lifelike reproduction of the commonplace motion of trains, of waves striking the shore, and of people walking in the street; and the magic made possible by trick photography and the manipulation of the camera. According to paragraph 5, what role did early exhibitors play in the presentation of movies in theaters ? A.They decided how to combine various components of the film program. B.They advised film-makers on appropriate movie content. C.They often took part in the live-action performances. D.They produced and prerecorded the material that was shown in the theaters \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 D\u4e0d\u77e5\u9053\u4e3a\u5565\u9519 - little or no \u5417 TPO 19 The Roman Army's Impact on Britain (\u6b63\u786e\u7387 50.96%) Each soldier received his pay, but in regions without a developed economy there was initially little on which it could be spent. The pool of excess cash rapidly stimulated a thriving economy outside fort gates\u3010A\u3011 . Some of the demand\u3010B\u3011 for the services and goods was no doubt fulfilled by people drawn from far afield\u3010C / D\u3011 , but some local people certainly became entwined in this new economy. There was informal marriage with soldiers, who until AD 197 were not legally entitled to wed, and whole new communities grew up near the forts. These settlements acted like small towns, becoming centers for the artisan and trading populations. According to paragraph 3, how did the soldiers meet their needs for goods and services ? A.Their needs were met by the army, and all of their economic transactions took place within the fort. B. Most of their needs were met by traveling tradespeople who visited the forts. C.During their days off, soldiers traveled to distant towns to make purchases. D.They bought what they needed from the artisans and traders in nearby towns. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 TPO 6 William Smith (\u6b63\u786e\u7387 49.68%) As he collected fossils from strata throughout England, Smith began to see that the fossils told a different story from the rocks. Particularly in the younger strata, the rocks were often so similar that he had trouble distinguishing the strata\u3010C\u3011 , but he never had trouble telling the fossils apart. While rock between two consistent strata might in one place be shale and in another sandstone, the fossils in that shale or sandstone were always the same. Some fossils endured through so many millions of years that they appear. In many strata, but others occur only in a few strata, and a few species had their births and extinctions within one particular stratum. Fossils are thus identifying markers for particular periods in Earth's history. According to paragraph 4, it was difficult for Smith to distinguish rock strata because A.the rocks from different strata closely resembled each other B.he was often unable to find fossils in the younger rock strata C.their similarity to each other made it difficult for him to distinguish one rock type from another D.the type of rock between two consistent strata was always the same \u9009\u62e9\uff1aC - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 A TPO 23 Rock Art of the Australia Aborigines (\u6b63\u786e\u7387 49.67%) In the 1970s when the study of Australian archaeology was in an exciting phase of development, with the great antiquity of rock art becoming clear. Lesley Maynard, the archaeologist who coined the phrase \u201cPanaramitee style,\u201d suggested that a sequence could be determined for Australian rock art, in which a geometric style gave way to a simple figurative style (outlines of figures and animals), followed by a range of complex figurative styles that, unlike the pan-Australian geometric tradition tended to much greater regional diversity. While accepting that this sequence fits the archaeological profile of those sites, which were occupied continuously over many thousands of years a number of writers have warned that the underlying assumption of such a sequence\u2014a development from the simple and the geometric to the complex and naturalistic\u2014obscures the cultural continuities in Aboriginal Australia, in which geometric symbolism remains fundamentally important. In this context the simplicity of a geometric motif may be more apparent than real. Motifs of seeming simplicity can encode complex meanings in Aboriginal Australia. And has not twentieth-century art shown that naturalism does not necessarily follow abstraction in some kind of predetermine sequence? According to paragraph 5, Lesley Maynard made which of the following suggestions about Australian rock art ? A.There were a pattern of human figures being represented in a more complex style than animal figures. B.Australian archaeology should concentrate on determining the sequence of styles that led up to the Panaramitee style. C.The great antiquity of Australian rock art would probably make it impossible to determine the ages of the various styles found in rock art. D.The geometric style of Australian rock art was replaced by increasingly complex figurative styles. \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 A\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bC\u9009\u9879impossible\u9519\u8bef\uff1bD\u9009\u9879replace\u9519\u8bef D TPO 13 Types of Social Groups (\u6b63\u786e\u7387 48.14%) Third, primary groups are fundamental because they serve as powerful instruments for social control. Their members command and dispense many of the rewards that are so vital to us and that make our lives seem worthwhile. Should the use of rewards fail, members can frequently win by rejecting or threatening to ostracize those who deviate from the primary group's norms. For instance, some social groups employ shunning (a person can remain in the community, but others are forbidden to interact with the person) as a device to bring into line individuals whose behavior goes beyond that allowed by the particular group. Even more important, primary groups define social reality for us by structuring our experiences. By providing us with definitions of situations, they elicit from us behavior that conforms to group- devised meanings. Primary groups, then, serve both as carriers of social norms and as enforcers of them. According to paragraph 7, why would a social group use shunning ? A.To enforce practice of the kinds of behavior acceptable to the group B.To discourage offending individuals from remaining in the group C.To commend and reward the behavior of the other members of the group D.To decide which behavioral norms should be passed on to the next generation? \u9009\u62e9\uff1aB - \u4e0d\u662f\u5f88\u786e\u5b9a A TPO 11 Ancient Egyptian Sculpture (\u6b63\u786e\u7387 47.03%) In order to understand ancient Egyptian art, it is vital to know as much as possible of the elite Egyptians' view of the world and the functions and contexts of the art produced for them. Without this knowledge we can appreciate only the formal content of Egyptian art, and we will fail to understand why it was produced or the concepts that shaped it and caused it to adopt its distinctive forms. In fact, a lack of understanding concerning the purposes of Egyptian art has often led it to be compared unfavorably with the art of other cultures : Why did the Egyptians not develop sculpture in which the body turned and twisted through space like classical Greek statuary? Why do the artists seem to get left and right confused? And why did they not discover the geometric perspective as European artists did in the Renaissance? The answer to such questions has nothing to do with a lack of skill or imagination on the part of Egyptian artists and everything to do with the purposes for which they were producing their art. Paragraph 1 suggests that one reason Egyptian art is viewed less favorably than other art is that Egyptian art lacks A.a realistic sense of human body proportion B. a focus on distinctive forms of varying sizes C.the originality of European art D.the capacity to show the human body in motion \u9009\u62e9\uff1aA - \u4e0d\u662f\u5f88\u786e\u5b9a D TPO 28 Early Saharan Pastoralists (\u6b63\u786e\u7387 44.51%) About 3500 B.C., climatic conditions again deteriorated. The Sahara slowly became direr and lakes vanished. On the other hand, rainfall increased in the interior of western Africa, and the northern limit of the tsetse fly\u3010C\u3011 , an insect fatal to cattle, moved south. So the herders shifted south , following the major river systems into savanna regions.\u3010D\u3011 By this time, the Saharan people were probably using domestic crops, experimenting with such summer rainfall crops as sorghum and millet\u3010B\u3011 as they moved out of areas where they could grow wheat, barely, and other Mediterranean crops\u3010A\u3011 . According to paragraph 6, what allowed the herders to shift south into the savanna regions after about 3500 B.C. ? A. They could easily grow Mediterranean crops in those regions. B.They could more easily domesticate sorghum and millet in those regions. C.The tsetse fly was no longer a problem in those regions. D.The river systems in those regions provided reliable sources of water in the summer. \u9009\u62e9\uff1aD - \u731c\u7684 C TPO 20 Fossil Preservation (\u6b63\u786e\u7387 44.29%) The probability that actual remains of soft tissue will be preserved is improved if the organism dies in an environment of rapid deposition and oxygen deprivation \u3010A / D\u3011. Under such conditions, the destructive effects of bacteria are diminished \u3010B\u3011. The middle Eocene Messel shale (from about 48 million years ago) of German accumulated in such an environment. The shale was deposited in an oxygen-deficient lake where lethal gases sometimes bubbled up and killed animals. Their remains accumulated on the floor of the lake and were then covered by clay and silt\u3010C\u3011 . Among the superbly preserved Messel fossils are insects with iridescent exoskeletons (hard outer coverings), frogs with skin and blood vessels intact, and even entire small mammals with preserved fur and soft tissue. According to paragraph 7, how do environments containing oxygen affect fossil preservation ? A.They increase the probability that soft-tissued organisms will become fossils. B.They lead to more bacteria production. C.They slow the rate at which clay and silt are deposited. D.They reduce the chance that animal remains will be preserved \u9009\u62e9\uff1aD - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 TPO 33 Extinction Episodes of the Past (\u6b63\u786e\u7387 44.2%) It was not until the Cambrian period, beginning about 600 million years ago, that a great proliferation of macroscopic species occurred\u3010D\u3011 on Earth and produced a fossil record that allows us to track the rise and fall of biodiversity\u3010A\u3011 . Since the Cambrian period, biodiversity has generally risen, but there have been some notable exceptions. Biodiversity collapsed dramatically during at least five periods because of mass extinctions around the globe. The five major mass extinctions receive most of the attention, but they are only one end of a spectrum of extinction events. Collectively, more species went extinct during smaller events that were less dramatic but more frequent. The best known of the five major extinction events, the one that saw the demise of the dinosaurs, is the Cretaceous-Tertiary extinction. Paragraph 1 supports which of the following statements about life on Earth before the Cambrian period ? A.Biodiversity levels were steady, as indicated by the fossil record. B.Levels of biodiversity could not be tracked. C.The most dramatic extinction episode occurred. D. Few microscopic species existed. \u9009\u62e9\uff1aB - It was not until\u8868\u660e\u4e86\u65f6\u95f4\u8282\u70b9 A\u9009\u9879\u9519\u8bef\uff0c\u65e0\u6cd5\u901a\u8fc7fossil record\u5f97\u77e5\uff1bC\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1bD\u9009\u9879\u9519\u8bef\uff0c\u6b64\u65f6\u8fd8\u6ca1\u6709","title":"\u4e8b\u5b9e\u4fe1\u606f\u9898"},{"location":"English/reading-hw5-b/","text":"\u6392\u9664\u9898 \u00b6 TPO 16 Planets in Our Solar System (\u6b63\u786e\u7387 69.03%) Other dimensions along which the two groups differ markedly are density and composition. The densities of the terrestrial planets average about 5 times the density of water, whereas the Jovian planets have densities that average only 1.5 times the density of water. One of the outer planets, Saturn, has a density of only 0.7 that of water, which means that Saturn would float in water. Variations in the composition of the planets are largely responsible for the density differences. The substances that make up both groups of planets are divided into three groups\u2014gases, rocks, and ices\u2014based on their melting points. The terrestrial planets are mostly rocks: dense rocky and metallic material, with minor amounts of gases. The Jovian planets, on the other hand, contain a large percentage of the gases\u3010D\u3011 hydrogen and helium, with varying amounts of ices\u3010C\u3011 : mostly water, ammonia, and methane ices. Paragraph 4 supports each of the following statements about Saturn EXCEPT: A. It is less dense than any of the terrestrial planets B. It contains no rocky material . C. It contains ices . D. It contains a large percentage of gases . \u9009\u62e9\uff1aA - \u8fc7\u4e8e\u7edd\u5bf9 B TPO 20 Westward Migration (\u6b63\u786e\u7387 68.56%) Two other developments presaged the end of the era of turnpikes and stared a transportation revolution that resulted in increased regional specialization and the growth of a national market economy First came the steamboat; although flatboats and keelboats continued to be important until the 1850\u2019s, steamboats eventually superseded all other craft in the carrying of passengers and freight. Steamboats were not only faster but also transported upriver freight for about one tenth of what it had previously cost on hand-propelled keelboats. Next came the Erie Canal, an enormous project in its day, spanning about 350 miles. After the canal went into operation, the cost per mile of transporting a ton of freight from Buffalo to New York City declined from nearly 20 cents to less that 1 cent.\u3010B\u3011 Eventually, the western states diverted much of their produce from the rivers to the Erie Canal\u3010D\u3011 , a shorter route to eastern markets \u3010A\u3011. Paragraph 5 mentions that the Erie Canal led to a reduction in all of the following EXCEPT A. The length of the route that goods from the West traveled across to reach eastern markets B. The cost of transporting freight C. The price of produce from western states D. The amount of produce from western states that was shipped on rivers \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709 TPO 21 The Origins of Agriculture (\u6b63\u786e\u7387 68.53%) How did it come about that farming developed independently in a number of world centers (the Southeast Asian mainland, Southwest Asia, Central America, lowland and highland South America, and equatorial Africa) at more or less the same time? Agriculture developed slowly among populations that had an extensive knowledge of plants and animals. Changing from hunting and gathering to agriculture had no immediate advantages. To start with, it forced the population to abandon the nomad\u2019s life and become sedentary, to develop methods of storage \u3010C\u3011 and, often, systems of irrigation. While hunter-gatherers always had the option of moving elsewhere when the resources were exhausted \u3010D\u3011, this became more difficult with farming. Furthermore, as the archaeological record shows, the state of health of agriculturalists was worse than that of their contemporary hunter-gatherers \u3010A\u3011. According to paragraph 1, all of the following are advantages of hunting and gathering over agriculture EXCEPT: A. It is healthier lifestyle. B. It requires less knowledge of plants and animals. C. It does not need storage capabilities . D. It is not tied to any specific location . \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 TPO 1 Groundwater (\u6b63\u786e\u7387 68.31%) The same thing happens to this day, though on a smaller scale, wherever a sediment-laden river or stream emerges from a mountain valley onto relatively flat land, dropping its load as the current slows: the water usually spreads out fanwise, depositing the sediment in the form of a smooth, fan-shaped slope \u3010B\u3011. Sediments are also dropped where a river slows on entering a lake or the sea, the deposited sediments are on a lake floor or the seafloor at first\u3010C / D\u3011 , but will be located inland at some future date, when the sea level falls or the land rises; such beds are sometimes thousands of meters thick. All of the following are mentioned in paragraph 3 as places that sediment-laden rivers can deposit their sediments EXCEPT A. A mountain valley B. Flat land C. A lake floor D. The seafloor \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 TPO 25 The Decline of Venetian Shipping (\u6b63\u786e\u7387 67.24%) The problem in shipping extended to the Arsenale, Venice\u2019s huge and powerful shipyard. Timber ran short, and it was necessary to procure it from father and father away. In ancient Roman times, the Italian peninsula had great forest of fir preferred for warships, but scarcity was apparent as early as the early fourteenth century. Arsenale officers first brought timber from the foothills of the Alps, then from north toward Trieste, and finally from across the Adriatic. Private shipbuilders were required to buy their oak abroad. As the costs of shipbuilding rose, Venice clung to its outdated standard while the Dutch were innovation in the lighter and more easily handled ships. The step from buying foreign timber to buying foreign ships was regarded as a short one, especially when complaints were heard in the latter sixteenth century that the standards and traditions of the Arsenale were running down . Work was stretched out and done poorly. \u3010A\u3011 Older workers had been allowed to stop work a half hour before the regular time, and in 1601 younger works left with them. Merchants complained that the privileges reserved for Venetian-built and owned ships were first extended to those Venetians who bought ships from abroad and then to foreign-built and owned vessels \u3010D\u3011. Historian Frederic Lane observes that after the loss of ships in battle in the late sixteenth century, the shipbuilding industry no long had the capacity to recover that it had displayed at the start of the century. All of the following are mentioned in paragraph 3 and 4 as contributing to the problems of the Venetian shipbuilding industry at the end of the sixteenth century EXCEPT A. The quality of work performed in the Arsenale had declined B. Venetian\u2013built ships were heavy and generally inefficient C. Arsenale shipbuilders worked more slowly D. Only a few merchants controlled the buying and selling of most of the Venetian-built ships \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 B\u3001C\u4e4b\u95f4\u7ea0\u7ed3 D TPO 20 Westward Migration (\u6b63\u786e\u7387 66.99%) Why were these hundreds of thousands of settlers\u2014most of them farmers, some of them artisans\u2014drawn away from the cleared fields and established cities and villages of the East? Certain characteristics of American society help to explain this remarkable migration. The European ancestors of some Americans had for centuries lived rooted to the same village or piece of land until some religious, political, or economic crisis uprooted them and drove them across the Atlantic. Many of those who experienced this sharp break thereafter lacked the ties that had bound them and their ancestors to a single place. Moreover, European society was relatively stratified; occupation and social status were inherited. In American society, however , the class structure was less rigid; some people changed occupations easily\u3010A / C\u3011 and believed it was their duty to improve their social and economic position\u3010B\u3011 . As a result, many Americans were an inveterately restless, rootless, and ambitious people. Therefore, these social traits helped to produce the nomadic and daring settlers who kept pushing westward beyond the fringes of settlement. In addition, there were other immigrants who migrated west in search of new homes, material success, and better lives . According to paragraph 2, all of the following are reasons why Americans migrated westward EXCEPT A. The desire to move from one pace to the next B. The hope of improving their socioeconomic status C. The opportunity to change jobs D. The need to escape religious or political crises \u9009\u62e9\uff1aD - \u65e0\u4e2d\u751f\u6709 TPO 20 Early Settlements in the Southwest Asia (\u6b63\u786e\u7387 66.92%) Five centuries later, about 7700 B.C., a new village rose on the mound. At first the inhabitants still hunted gazelle intensively\u3010B\u3011 . Then, about 7000 B.C. ,\u200bwithin the space of a few generations, the switched abruptly to herding domesticated goats and sheep\u3010A\u3011 and to growing einkorn, pulses, and other cereal grasses. Abu Hureyra grew rapidly until it covered nearly 30 acres. It was a close-knit community of rectangular, one-story mud-brick houses, joined by narrow lanes and courtyards, finally abandoned about 5000 B.C. Many complex factors led to the adoption of the new economies, not only at Abu Hureyra, but at many other locations such as \u2018Ain Ghazal, also in Syria, where goat toe bones showing the telltale marks of abrasion caused by foot tethering (binding)\u2019 testify to earl herding of domestic stock. According to paragraph 5, after 7000 B.C. the settlement of Abu Hureyra differed from earlier settlements at that location in all of the following EXCEPT A. The domestication of animals B. The intensive hunting of gazelle C. The size of the settlement D. the design of the dwellings \u9009\u62e9\uff1aB - \u5728\u5b9a\u4f4d\u53e5\u4e4b\u524d\uff0c\u8bf4\u660e\u662f\u8be5\u65f6\u671f\u4e4b\u524d\uff0c\u4e0d\u662f\u4e4b\u540e\u7684\u4e8b TPO 33 Railroads and Commercial Agriculture in Nineteenth-Century United States (\u6b63\u786e\u7387 66.21%) Western farmers altered the landscape by reducing the annual fires\u3010A\u3011 that had kept the prairie free from trees. In the absence of these fires, trees reappeared on land not in cultivation and, if undisturbed, eventually formed woodlots\u3010C\u3011 . The earlier unbroken landscape gave to independent farms, each fenced off in a precise checkerboard pattern\u3010D\u3011 . It was an artificial ecosystem of animals, woodlots, and crops, whose large, uniform layout\u3010B\u3011 made western farms more efficient than the more\u2014irregular farms in the East. According to paragraph 8, prairie farmers changed the landscape by doing all of the following EXCEPT: A. Reducing annual fires B. Dividing the land into large, regularly\u2010shaped lots C. Planting trees that eventually formed woodlots D. Fencing off their farms \u9009\u62e9\uff1aC plant \uff0c\u662f\u81ea\u5df1\u957f\u51fa\u6765\u7684 TPO 6 Infantile Amnesia (\u6b63\u786e\u7387 64.44%) How might this inability to recall early experiences be explained? The sheer passage of time does not account for it; adults have excellent recognition of pictures of people who attended high school with them 35 years earlier. Another seemingly plausible explanation--that infants do not form enduring memories at this point in development-also is incorrect\u3010B\u3011 . Children two and a half to three years old remember experiences that occurred in their first year, and eleven month olds remember some events a year later. Nor does the hypothesis that infantile amnesia reflects repression\u3010A\u3011 ---or holding back\u2014of sexually charged episodes explain the phenomenon\u3010C\u3011 . While such repression may occur,people cannot remember ordinary events from the infant and toddler periods either. All of the following theories about the inability to recall early experiences are rejected in paragraph 2 EXCEPT: A. The ability to recall an event decreases as the time after the event increases. B. Young children are not capable of forming memories that last for more than a short time. C. People may hold back sexually meaningful memories. D. Most events in childhood are too ordinary to be worth remembering. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 TPO 4 Petroleum Resources (\u6b63\u786e\u7387 64.4%) Of course, there is far more oil underground than can be recovered. It may be in a pool too small or too far from a potential market\u3010C\u3011 to justify the expense of drilling. Some oil lies under regions where drilling is forbidden\u3010A\u3011 , such as national parks or other public lands. Even given the best extraction techniques, only about 30 to 40 percent of the oil in a given pool can be brought to the surface. The rest is far too difficult to extract and has to remain underground. According to paragraph 5, the decision to drill for oil depends on all of the following factors EXCEPT A. permission to access the area where oil has been found B. the availability of sufficient quantities of oil in a pool C. the location of the market in relation to the drilling site D. the political situation in the region where drilling would occur \u9009\u62e9\uff1aB - \u6709\u5f88\u591a\u8d44\u6e90\u4f46\u662f\u5f88\u96be\u5f00\u91c7 D TPO 24 Breathing During Sleep (\u6b63\u786e\u7387 58.99%) But that is not all that changes. During all phases of sleep, several changes in the air passages have been observed. It takes twice as much effort to breathe during sleep because of greater resistance to airflow in the airways and changes in the efficiency of the muscles used for breathing. Some of the muscles that help keep the upper airway open\u3010C\u3011 when breathing tend to become more relaxed during sleep , especially during REM (the phase of sleep in which there is rapid eye movement). Without this muscular action, inhaling is like sucking air out of a balloon\u2014the narrow passages tend to collapse. Also there is a regular cycle of change in resistance between the two sides of the\u3010B\u3011 nose . If something blocks the \"\"good\"\" side, such as congestion from allergies or a cold, then resistance increases dramatically. Coupled with these factors is the loss of the complex interactions\u3010D\u3011 among the muscles that can change the route of airflow from nose to mouth. All of the following are mentioned in paragraph 4 as being characteristic of breathing during sleep EXCEPT A. relaxation of the muscles involved in the respiratory system B. changes in resistance between the two sides of the nose C. easier airflow in the passages of the upper airway D. absence of certain complex muscle interactions \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 C TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 56.77%) The rapid expansion in international trade also benefitted from an infusion of capital, stemming largely from gold and silver brought by Spanish vessels from the Americas. This capital financed the production of goods, storage, trade, and even credit across Europe and overseas. Moreover an increased credit supply was generated by investments and loans by bankers and wealthy merchants\u3010C\u3011 to states and by joint-stock partnerships - an English innovation (the first major company began in 1600). Unlike short-term financial cooperation between investors\u3010A\u3011 for a single commercial undertaking, joint-stock companies\u3010D\u3011 provided permanent funding of capital by drawing on the investments of merchants and other investors who purchased shares in the company. According to paragraph 8, each of the following was a source of funds used to finance economic expansion EXCEPT A. groups of investors engaged in short-term financial cooperation B. the state C. wealthy merchants D. joint-stock companies \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 TPO 30 The Invention of the Mechanical Clock (\u6b63\u786e\u7387 56.77%) Medieval Europe gave new importance to reliable time. The Catholic Church had its seven daily prayers, one of which was at night, requiring an alarm arrangement to waken monks before dawn.\u3010D\u3011 And then the new cities and towns, squeezed by their walls, had to know and order time in order to organize collective activity\u3010B\u3011 and ration space . They set a time to go to sleep\u3010C\u3011 . All this was compatible with older devices so long as there was only one authoritative timekeeper; but with urban growth and the multiplication of time signals, discrepancy brought discord and strife. Society needed a more dependable instrument of time measurement and found it in the mechanical clock. According to paragraph 2, all of the following are examples of the importance of timekeeping to medieval European society EXCEPT: A. the need of different towns to coordinate timekeeping with each other B. the setting of specific times for the opening and closing of markets C. the setting of specific times for the start and finish of the working day D. the regulation of the performance of daily church rituals \u9009\u62e9\uff1aA - \u65e0\u4e2d\u751f\u6709 TPO 19 The Roman Army's Impact on Britain (\u6b63\u786e\u7387 55.49%) The army also provided a means of personal advancement for auxiliary soldiers recruited from the native peoples, as a man obtained hereditary Roman citizenship on retirement after service in an auxiliary regiment. Such units recruited on an ad hoc (as needed) basis from the area in which they were stationed, and there was evidently large-scale recruitment within Britain. The total numbers were at least 12,500 men up| to the reign of the emperor Hadrian (A.D. 117-138), with a peak around A.D. 80. Although a small proportion of the total population, this perhaps had a massive local impact when a large proportion of the young men were removed from an area. Newly raised regiments were normally transferred to another province from whence it was unlikely that individual recruits would ever return. Most units raised in Britain went elsewhere on the European continent, although one is recorded in Morocco. The reverse process brought young men to Britain, where many continued to live after their 20 to 25 years of since, and this added to the cosmopolitan Roman character of the frontier population. By the later Roman period , frontier garrisons (groups of soldiers) were only rarely transferred\u3010C\u3011 , since in units became effectively hereditary \u3010A\u3011 , and forts were no longer populated \u3010B\u3011 or maintained at full strength . According to paragraph 4, all of the following changes could be seen in the frontier garrisons by the later Roman period EXCEPT: A. Membership in the units passed from father to son. B. Fewer soldiers were stationed at the forts. C. Soldiers usually were not transferred to different locations. D. Frontier units became more effective and proficient. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 TPO 21 Autobiographical Memory (\u6b63\u786e\u7387 54.58%) A third possibility is that children will not be able to tell their own \u201clife story\u201d until they understand something about the general form stories take, that is, the structure of narratives. Knowledge about narratives arises from social interactions, particularly the storytelling that children experience from parents\u3010B\u3011 and the attempts parents make to talk with children about past events in their lives\u3010A\u3011 . When parents talk with children about \u201cwhat we did today\u201d or \u201clast week\u201d or \u201clast year\u201d, they guide the children\u2019s formation of a framework for talking about the past. They also provide children with reminders about the memory and relay the message that memories are valued as part of the cultural experience.\u3010D\u3011 It is interesting to note that some studies show Caucasian American children have earlier childhood memories that Korean children do. Furthermore, other studies show that Caucasian American mother-child pairs talk about past events three times more often than do Korean mother-child pairs. Thus, the types of social experiences children have do factor into the development of autobiographical memories. All of the following are mentioned in paragraph 4 as ways in which parents help their children understand the structure of narratives EXCEPT A. Talking with their children about past events B. Telling stories to their children C. Having their children repeat stories back to them D. Showing their children that they think memories are important \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709\uff0c\u6392\u9664\u6cd5 TPO 34 Protection of Plants by Insects (\u6b63\u786e\u7387 53%) Extrafloral nectaries at the base of each sepal attract several kinds of insects, but 96 percent of them are ants, several different species of them. When buds are still small, less than a quarter of an inch long, the sepal nectaries are already present and producing nectar. They continue to do so as the flower develops and while the fruit matures. Observations leave little doubt that ants protect morning glory flowers and fruits from the combined enemy force of grasshoppers, caterpillars, and seed beetles. Bentley compares the seed production of six plants that grew where there were no ants with that of seventeen plants that were occupied by ants. Unprotected plants bore only 45 seeds per plant, but plants occupied by ants bore 211 seeds per plant. Although ants are not big enough to kill or seriously injure grasshoppers, they drive them away by nipping at their feet.\u3010A\u3011 Seed beetles are more vulnerable because they are much smaller than grasshoppers. The ants prey on the adult beetles\u3010B\u3011 , disturb females as they lay their eggs on developing fruits\u3010D\u3011 , and eat many of the eggs they do manage to lay\u3010C\u3011 . According to paragraph 5, ants defend morning glory plants from seed beetles in each of the following ways EXCEPT A. driving adult beetles off the plants by nipping at their feet B. catching and eating adult beetles C. eating beetle eggs they find on developing fruits D. making it difficult for beetles to lay eggs on developing fruits \u9009\u62e9\uff1aA - adult beetles -> grasshoppers TPO 8 Running Water on Mars (\u6b63\u786e\u7387 50.73%) Some scientists speculate that Mars may have enjoyed an extended early Period during which rivers, lakes, and perhaps even oceans adorned its surface. A 2003 Mars Global Surveyor image shows what mission specialists think may be a delta\u3010A / B\u3011\u2015a fan-shaped network of channels and sediments where a river once flowed into a larger body of water, in this case a lake filling a crater in the southern highlands. Other researchers go even further, suggesting that the data provide evidence for large open expenses of water on the early Martian surface\u3010D\u3011 . A computer- generated view of the Martian North Polar Region shows the extent of what may have been an ancient ocean covering much of the northern lowlands. The Hellas Basin, which measures some 3,000 kilometers across and has a floor that lies nearly 9 kilometers below the basin\u2019s rim, is another candidate for an ancient Martian sea. All of the following questions about geological features on Mars are answered in paragraph 3 EXCEPT: A. What are some regions of Mars that may have once been covered with an ocean? B. Where do mission scientists believe that the river forming the delta emptied? C. Approximately how many craters on Mars do mission scientists believe may once have been lakes filled with water? D. During what period of Mars\u2019 history do some scientists think it may have had large bodies of water? \u9009\u62e9\uff1aC - how many\u672a\u4f53\u73b0 TPO 8 Running Water on Mars (\u6b63\u786e\u7387 50.09%) Outflow channels are probably relics of catastrophic flooding on Mars long ago. They appear only in equatorial regions\u3010B\u3011 and generally do not form extensive interconnected networks. Instead, they are probably the paths taken by huge volumes of water draining from the southern highlands into the northern plains. The onrushing water arising from these flash floods likely also formed the odd teardrop-shaped \u201cislands\u201d (resembling the miniature versions seen in the wet sand of our beaches at low tide)\u3010C\u3011 that have been found on the plains close to the ends of the outflow channels. Judging from the width and depth of the channels, the flow rates must have been truly enormous\u2015perhaps as much as a hundred times greater than the 105 tons per second carried by the great Amazon River. Flooding shaped the outflow channels approximately 3 billion years ago, about the same times as the northern volcanic plains formed.\u3010A\u3011 According to paragraph 2, all of the following are true of the outflow channels on Mars EXCEPT: A. They formed at around the same time that volcanic activity was occurring on the northern plains. B. They are found only on certain parts of the Martian surface. C. They sometimes empty onto what appear to have once been the wet sands of tidal beaches. D. They are thought to have carried water northward from the equatorial regions. \u9009\u62e9\uff1aC \u539f\u6587\u53ea\u662f\u7c7b\u6bd4 D\u9009\u9879\u4e0d\u77e5\u9053\u5728\u54ea\u91cc\uff0c\u63a8\u6d4b\u51fa\u6765\u7684 TPO 12 Which Hand Did They Use? (\u6b63\u786e\u7387 43.75%) We all know that many more people today are right-handed than left-handed. Can one trace this same pattern far back in prehistory? Much of the evidence about right-hand versus left- hand dominance comes from stencils and prints found in rock shelters in Australia and elsewhere, and in many Ice Age caves in France, Spain, and Tasmania. When a left hand has been stenciled, this implies that the artist was right-handed, and vice versa. Even though the paint was often sprayed on by mouth, one can assume that the dominant hand assisted in the operation. One also has to make the assumption that hands were stenciled palm downward\u2014 a left hand stenciled palm upward might of course look as if it were a right hand\u3010B\u3011 . Of 158 stencils in the French cave of Gargas, 136 have been identified as left, and only 22 as right; right- handedness was therefore heavily predominant. Cave art furnishes other types of evidence of this phenomenon. Most engravings, for example, are best lit from the left\u3010A\u3011 , as befits the work of right-handed artists, who generally prefer to have the light source on the left so that the shadow of their hand does not fall on the tip of the engraving tool or brush. In the few cases where an Ice Age figure is depicted holding something, it is mostly, though not always, in the right\u3010D\u3011 hand . All of the following are mentioned in paragraphs 1 and 2 as evidence of right-handedness in art and artists EXCEPT A. the ideal source of lighting for most engravings B. the fact that a left hand stenciled palm upward might look like a right hand C. the prevalence of outlines of left hands D. figures in prehistoric art holding objects with the right hand \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709 B TPO 14 Pastoralism in Ancient Inner Eurasia (\u6b63\u786e\u7387 39.37%) Nomadism also subjects pastoralist communities to strict rules of portability. If you are constantly on the move, you cannot afford to accumulate large material surpluses. Such rules limit variations in accumulated material goods between pastoralist households (though they may also encourage a taste for portable goods of high value such as silks or jewelry). So, by and large, nomadism implies a high degree of self-sufficiency and inhibits the appearance of an extensive division of labor. Inequalities of wealth and rank certainly exist, and have probably existed in most pastoralist societies\u3010A\u3011 , but except in periods of military conquest\u3010B\u3011, they are normally too slight to generate the stable, hereditary hierarchies that are usually implied by the use of the term class\u3010D\u3011 . Inequalities of gender have also existed in pastoralist societies, but they seem to have been softened by the absence of steep hierarchies of wealth in most communities, and also by the requirement that women acquire most of the skills of men, including, often, their military skills. According to paragraph 4, all of the following are true of social inequality in pastoralist societies EXCEPT: A. It exists and has existed to some degree in most pastoral societies. B. It is most marked during periods of military conquest. C. It is expressed in the form of a rigid hierarchy based largely on heredity. D. It is usually too insignificant to be discussed in terms of class differences. \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709\uff0c\u6392\u9664\u6cd5 B","title":"Reading-Homework5-2"},{"location":"English/reading-hw5-b/#_1","text":"TPO 16 Planets in Our Solar System (\u6b63\u786e\u7387 69.03%) Other dimensions along which the two groups differ markedly are density and composition. The densities of the terrestrial planets average about 5 times the density of water, whereas the Jovian planets have densities that average only 1.5 times the density of water. One of the outer planets, Saturn, has a density of only 0.7 that of water, which means that Saturn would float in water. Variations in the composition of the planets are largely responsible for the density differences. The substances that make up both groups of planets are divided into three groups\u2014gases, rocks, and ices\u2014based on their melting points. The terrestrial planets are mostly rocks: dense rocky and metallic material, with minor amounts of gases. The Jovian planets, on the other hand, contain a large percentage of the gases\u3010D\u3011 hydrogen and helium, with varying amounts of ices\u3010C\u3011 : mostly water, ammonia, and methane ices. Paragraph 4 supports each of the following statements about Saturn EXCEPT: A. It is less dense than any of the terrestrial planets B. It contains no rocky material . C. It contains ices . D. It contains a large percentage of gases . \u9009\u62e9\uff1aA - \u8fc7\u4e8e\u7edd\u5bf9 B TPO 20 Westward Migration (\u6b63\u786e\u7387 68.56%) Two other developments presaged the end of the era of turnpikes and stared a transportation revolution that resulted in increased regional specialization and the growth of a national market economy First came the steamboat; although flatboats and keelboats continued to be important until the 1850\u2019s, steamboats eventually superseded all other craft in the carrying of passengers and freight. Steamboats were not only faster but also transported upriver freight for about one tenth of what it had previously cost on hand-propelled keelboats. Next came the Erie Canal, an enormous project in its day, spanning about 350 miles. After the canal went into operation, the cost per mile of transporting a ton of freight from Buffalo to New York City declined from nearly 20 cents to less that 1 cent.\u3010B\u3011 Eventually, the western states diverted much of their produce from the rivers to the Erie Canal\u3010D\u3011 , a shorter route to eastern markets \u3010A\u3011. Paragraph 5 mentions that the Erie Canal led to a reduction in all of the following EXCEPT A. The length of the route that goods from the West traveled across to reach eastern markets B. The cost of transporting freight C. The price of produce from western states D. The amount of produce from western states that was shipped on rivers \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709 TPO 21 The Origins of Agriculture (\u6b63\u786e\u7387 68.53%) How did it come about that farming developed independently in a number of world centers (the Southeast Asian mainland, Southwest Asia, Central America, lowland and highland South America, and equatorial Africa) at more or less the same time? Agriculture developed slowly among populations that had an extensive knowledge of plants and animals. Changing from hunting and gathering to agriculture had no immediate advantages. To start with, it forced the population to abandon the nomad\u2019s life and become sedentary, to develop methods of storage \u3010C\u3011 and, often, systems of irrigation. While hunter-gatherers always had the option of moving elsewhere when the resources were exhausted \u3010D\u3011, this became more difficult with farming. Furthermore, as the archaeological record shows, the state of health of agriculturalists was worse than that of their contemporary hunter-gatherers \u3010A\u3011. According to paragraph 1, all of the following are advantages of hunting and gathering over agriculture EXCEPT: A. It is healthier lifestyle. B. It requires less knowledge of plants and animals. C. It does not need storage capabilities . D. It is not tied to any specific location . \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 TPO 1 Groundwater (\u6b63\u786e\u7387 68.31%) The same thing happens to this day, though on a smaller scale, wherever a sediment-laden river or stream emerges from a mountain valley onto relatively flat land, dropping its load as the current slows: the water usually spreads out fanwise, depositing the sediment in the form of a smooth, fan-shaped slope \u3010B\u3011. Sediments are also dropped where a river slows on entering a lake or the sea, the deposited sediments are on a lake floor or the seafloor at first\u3010C / D\u3011 , but will be located inland at some future date, when the sea level falls or the land rises; such beds are sometimes thousands of meters thick. All of the following are mentioned in paragraph 3 as places that sediment-laden rivers can deposit their sediments EXCEPT A. A mountain valley B. Flat land C. A lake floor D. The seafloor \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 TPO 25 The Decline of Venetian Shipping (\u6b63\u786e\u7387 67.24%) The problem in shipping extended to the Arsenale, Venice\u2019s huge and powerful shipyard. Timber ran short, and it was necessary to procure it from father and father away. In ancient Roman times, the Italian peninsula had great forest of fir preferred for warships, but scarcity was apparent as early as the early fourteenth century. Arsenale officers first brought timber from the foothills of the Alps, then from north toward Trieste, and finally from across the Adriatic. Private shipbuilders were required to buy their oak abroad. As the costs of shipbuilding rose, Venice clung to its outdated standard while the Dutch were innovation in the lighter and more easily handled ships. The step from buying foreign timber to buying foreign ships was regarded as a short one, especially when complaints were heard in the latter sixteenth century that the standards and traditions of the Arsenale were running down . Work was stretched out and done poorly. \u3010A\u3011 Older workers had been allowed to stop work a half hour before the regular time, and in 1601 younger works left with them. Merchants complained that the privileges reserved for Venetian-built and owned ships were first extended to those Venetians who bought ships from abroad and then to foreign-built and owned vessels \u3010D\u3011. Historian Frederic Lane observes that after the loss of ships in battle in the late sixteenth century, the shipbuilding industry no long had the capacity to recover that it had displayed at the start of the century. All of the following are mentioned in paragraph 3 and 4 as contributing to the problems of the Venetian shipbuilding industry at the end of the sixteenth century EXCEPT A. The quality of work performed in the Arsenale had declined B. Venetian\u2013built ships were heavy and generally inefficient C. Arsenale shipbuilders worked more slowly D. Only a few merchants controlled the buying and selling of most of the Venetian-built ships \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 B\u3001C\u4e4b\u95f4\u7ea0\u7ed3 D TPO 20 Westward Migration (\u6b63\u786e\u7387 66.99%) Why were these hundreds of thousands of settlers\u2014most of them farmers, some of them artisans\u2014drawn away from the cleared fields and established cities and villages of the East? Certain characteristics of American society help to explain this remarkable migration. The European ancestors of some Americans had for centuries lived rooted to the same village or piece of land until some religious, political, or economic crisis uprooted them and drove them across the Atlantic. Many of those who experienced this sharp break thereafter lacked the ties that had bound them and their ancestors to a single place. Moreover, European society was relatively stratified; occupation and social status were inherited. In American society, however , the class structure was less rigid; some people changed occupations easily\u3010A / C\u3011 and believed it was their duty to improve their social and economic position\u3010B\u3011 . As a result, many Americans were an inveterately restless, rootless, and ambitious people. Therefore, these social traits helped to produce the nomadic and daring settlers who kept pushing westward beyond the fringes of settlement. In addition, there were other immigrants who migrated west in search of new homes, material success, and better lives . According to paragraph 2, all of the following are reasons why Americans migrated westward EXCEPT A. The desire to move from one pace to the next B. The hope of improving their socioeconomic status C. The opportunity to change jobs D. The need to escape religious or political crises \u9009\u62e9\uff1aD - \u65e0\u4e2d\u751f\u6709 TPO 20 Early Settlements in the Southwest Asia (\u6b63\u786e\u7387 66.92%) Five centuries later, about 7700 B.C., a new village rose on the mound. At first the inhabitants still hunted gazelle intensively\u3010B\u3011 . Then, about 7000 B.C. ,\u200bwithin the space of a few generations, the switched abruptly to herding domesticated goats and sheep\u3010A\u3011 and to growing einkorn, pulses, and other cereal grasses. Abu Hureyra grew rapidly until it covered nearly 30 acres. It was a close-knit community of rectangular, one-story mud-brick houses, joined by narrow lanes and courtyards, finally abandoned about 5000 B.C. Many complex factors led to the adoption of the new economies, not only at Abu Hureyra, but at many other locations such as \u2018Ain Ghazal, also in Syria, where goat toe bones showing the telltale marks of abrasion caused by foot tethering (binding)\u2019 testify to earl herding of domestic stock. According to paragraph 5, after 7000 B.C. the settlement of Abu Hureyra differed from earlier settlements at that location in all of the following EXCEPT A. The domestication of animals B. The intensive hunting of gazelle C. The size of the settlement D. the design of the dwellings \u9009\u62e9\uff1aB - \u5728\u5b9a\u4f4d\u53e5\u4e4b\u524d\uff0c\u8bf4\u660e\u662f\u8be5\u65f6\u671f\u4e4b\u524d\uff0c\u4e0d\u662f\u4e4b\u540e\u7684\u4e8b TPO 33 Railroads and Commercial Agriculture in Nineteenth-Century United States (\u6b63\u786e\u7387 66.21%) Western farmers altered the landscape by reducing the annual fires\u3010A\u3011 that had kept the prairie free from trees. In the absence of these fires, trees reappeared on land not in cultivation and, if undisturbed, eventually formed woodlots\u3010C\u3011 . The earlier unbroken landscape gave to independent farms, each fenced off in a precise checkerboard pattern\u3010D\u3011 . It was an artificial ecosystem of animals, woodlots, and crops, whose large, uniform layout\u3010B\u3011 made western farms more efficient than the more\u2014irregular farms in the East. According to paragraph 8, prairie farmers changed the landscape by doing all of the following EXCEPT: A. Reducing annual fires B. Dividing the land into large, regularly\u2010shaped lots C. Planting trees that eventually formed woodlots D. Fencing off their farms \u9009\u62e9\uff1aC plant \uff0c\u662f\u81ea\u5df1\u957f\u51fa\u6765\u7684 TPO 6 Infantile Amnesia (\u6b63\u786e\u7387 64.44%) How might this inability to recall early experiences be explained? The sheer passage of time does not account for it; adults have excellent recognition of pictures of people who attended high school with them 35 years earlier. Another seemingly plausible explanation--that infants do not form enduring memories at this point in development-also is incorrect\u3010B\u3011 . Children two and a half to three years old remember experiences that occurred in their first year, and eleven month olds remember some events a year later. Nor does the hypothesis that infantile amnesia reflects repression\u3010A\u3011 ---or holding back\u2014of sexually charged episodes explain the phenomenon\u3010C\u3011 . While such repression may occur,people cannot remember ordinary events from the infant and toddler periods either. All of the following theories about the inability to recall early experiences are rejected in paragraph 2 EXCEPT: A. The ability to recall an event decreases as the time after the event increases. B. Young children are not capable of forming memories that last for more than a short time. C. People may hold back sexually meaningful memories. D. Most events in childhood are too ordinary to be worth remembering. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 TPO 4 Petroleum Resources (\u6b63\u786e\u7387 64.4%) Of course, there is far more oil underground than can be recovered. It may be in a pool too small or too far from a potential market\u3010C\u3011 to justify the expense of drilling. Some oil lies under regions where drilling is forbidden\u3010A\u3011 , such as national parks or other public lands. Even given the best extraction techniques, only about 30 to 40 percent of the oil in a given pool can be brought to the surface. The rest is far too difficult to extract and has to remain underground. According to paragraph 5, the decision to drill for oil depends on all of the following factors EXCEPT A. permission to access the area where oil has been found B. the availability of sufficient quantities of oil in a pool C. the location of the market in relation to the drilling site D. the political situation in the region where drilling would occur \u9009\u62e9\uff1aB - \u6709\u5f88\u591a\u8d44\u6e90\u4f46\u662f\u5f88\u96be\u5f00\u91c7 D TPO 24 Breathing During Sleep (\u6b63\u786e\u7387 58.99%) But that is not all that changes. During all phases of sleep, several changes in the air passages have been observed. It takes twice as much effort to breathe during sleep because of greater resistance to airflow in the airways and changes in the efficiency of the muscles used for breathing. Some of the muscles that help keep the upper airway open\u3010C\u3011 when breathing tend to become more relaxed during sleep , especially during REM (the phase of sleep in which there is rapid eye movement). Without this muscular action, inhaling is like sucking air out of a balloon\u2014the narrow passages tend to collapse. Also there is a regular cycle of change in resistance between the two sides of the\u3010B\u3011 nose . If something blocks the \"\"good\"\" side, such as congestion from allergies or a cold, then resistance increases dramatically. Coupled with these factors is the loss of the complex interactions\u3010D\u3011 among the muscles that can change the route of airflow from nose to mouth. All of the following are mentioned in paragraph 4 as being characteristic of breathing during sleep EXCEPT A. relaxation of the muscles involved in the respiratory system B. changes in resistance between the two sides of the nose C. easier airflow in the passages of the upper airway D. absence of certain complex muscle interactions \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 C TPO 10 Seventeenth-Century European Economic Growth (\u6b63\u786e\u7387 56.77%) The rapid expansion in international trade also benefitted from an infusion of capital, stemming largely from gold and silver brought by Spanish vessels from the Americas. This capital financed the production of goods, storage, trade, and even credit across Europe and overseas. Moreover an increased credit supply was generated by investments and loans by bankers and wealthy merchants\u3010C\u3011 to states and by joint-stock partnerships - an English innovation (the first major company began in 1600). Unlike short-term financial cooperation between investors\u3010A\u3011 for a single commercial undertaking, joint-stock companies\u3010D\u3011 provided permanent funding of capital by drawing on the investments of merchants and other investors who purchased shares in the company. According to paragraph 8, each of the following was a source of funds used to finance economic expansion EXCEPT A. groups of investors engaged in short-term financial cooperation B. the state C. wealthy merchants D. joint-stock companies \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 TPO 30 The Invention of the Mechanical Clock (\u6b63\u786e\u7387 56.77%) Medieval Europe gave new importance to reliable time. The Catholic Church had its seven daily prayers, one of which was at night, requiring an alarm arrangement to waken monks before dawn.\u3010D\u3011 And then the new cities and towns, squeezed by their walls, had to know and order time in order to organize collective activity\u3010B\u3011 and ration space . They set a time to go to sleep\u3010C\u3011 . All this was compatible with older devices so long as there was only one authoritative timekeeper; but with urban growth and the multiplication of time signals, discrepancy brought discord and strife. Society needed a more dependable instrument of time measurement and found it in the mechanical clock. According to paragraph 2, all of the following are examples of the importance of timekeeping to medieval European society EXCEPT: A. the need of different towns to coordinate timekeeping with each other B. the setting of specific times for the opening and closing of markets C. the setting of specific times for the start and finish of the working day D. the regulation of the performance of daily church rituals \u9009\u62e9\uff1aA - \u65e0\u4e2d\u751f\u6709 TPO 19 The Roman Army's Impact on Britain (\u6b63\u786e\u7387 55.49%) The army also provided a means of personal advancement for auxiliary soldiers recruited from the native peoples, as a man obtained hereditary Roman citizenship on retirement after service in an auxiliary regiment. Such units recruited on an ad hoc (as needed) basis from the area in which they were stationed, and there was evidently large-scale recruitment within Britain. The total numbers were at least 12,500 men up| to the reign of the emperor Hadrian (A.D. 117-138), with a peak around A.D. 80. Although a small proportion of the total population, this perhaps had a massive local impact when a large proportion of the young men were removed from an area. Newly raised regiments were normally transferred to another province from whence it was unlikely that individual recruits would ever return. Most units raised in Britain went elsewhere on the European continent, although one is recorded in Morocco. The reverse process brought young men to Britain, where many continued to live after their 20 to 25 years of since, and this added to the cosmopolitan Roman character of the frontier population. By the later Roman period , frontier garrisons (groups of soldiers) were only rarely transferred\u3010C\u3011 , since in units became effectively hereditary \u3010A\u3011 , and forts were no longer populated \u3010B\u3011 or maintained at full strength . According to paragraph 4, all of the following changes could be seen in the frontier garrisons by the later Roman period EXCEPT: A. Membership in the units passed from father to son. B. Fewer soldiers were stationed at the forts. C. Soldiers usually were not transferred to different locations. D. Frontier units became more effective and proficient. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 TPO 21 Autobiographical Memory (\u6b63\u786e\u7387 54.58%) A third possibility is that children will not be able to tell their own \u201clife story\u201d until they understand something about the general form stories take, that is, the structure of narratives. Knowledge about narratives arises from social interactions, particularly the storytelling that children experience from parents\u3010B\u3011 and the attempts parents make to talk with children about past events in their lives\u3010A\u3011 . When parents talk with children about \u201cwhat we did today\u201d or \u201clast week\u201d or \u201clast year\u201d, they guide the children\u2019s formation of a framework for talking about the past. They also provide children with reminders about the memory and relay the message that memories are valued as part of the cultural experience.\u3010D\u3011 It is interesting to note that some studies show Caucasian American children have earlier childhood memories that Korean children do. Furthermore, other studies show that Caucasian American mother-child pairs talk about past events three times more often than do Korean mother-child pairs. Thus, the types of social experiences children have do factor into the development of autobiographical memories. All of the following are mentioned in paragraph 4 as ways in which parents help their children understand the structure of narratives EXCEPT A. Talking with their children about past events B. Telling stories to their children C. Having their children repeat stories back to them D. Showing their children that they think memories are important \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709\uff0c\u6392\u9664\u6cd5 TPO 34 Protection of Plants by Insects (\u6b63\u786e\u7387 53%) Extrafloral nectaries at the base of each sepal attract several kinds of insects, but 96 percent of them are ants, several different species of them. When buds are still small, less than a quarter of an inch long, the sepal nectaries are already present and producing nectar. They continue to do so as the flower develops and while the fruit matures. Observations leave little doubt that ants protect morning glory flowers and fruits from the combined enemy force of grasshoppers, caterpillars, and seed beetles. Bentley compares the seed production of six plants that grew where there were no ants with that of seventeen plants that were occupied by ants. Unprotected plants bore only 45 seeds per plant, but plants occupied by ants bore 211 seeds per plant. Although ants are not big enough to kill or seriously injure grasshoppers, they drive them away by nipping at their feet.\u3010A\u3011 Seed beetles are more vulnerable because they are much smaller than grasshoppers. The ants prey on the adult beetles\u3010B\u3011 , disturb females as they lay their eggs on developing fruits\u3010D\u3011 , and eat many of the eggs they do manage to lay\u3010C\u3011 . According to paragraph 5, ants defend morning glory plants from seed beetles in each of the following ways EXCEPT A. driving adult beetles off the plants by nipping at their feet B. catching and eating adult beetles C. eating beetle eggs they find on developing fruits D. making it difficult for beetles to lay eggs on developing fruits \u9009\u62e9\uff1aA - adult beetles -> grasshoppers TPO 8 Running Water on Mars (\u6b63\u786e\u7387 50.73%) Some scientists speculate that Mars may have enjoyed an extended early Period during which rivers, lakes, and perhaps even oceans adorned its surface. A 2003 Mars Global Surveyor image shows what mission specialists think may be a delta\u3010A / B\u3011\u2015a fan-shaped network of channels and sediments where a river once flowed into a larger body of water, in this case a lake filling a crater in the southern highlands. Other researchers go even further, suggesting that the data provide evidence for large open expenses of water on the early Martian surface\u3010D\u3011 . A computer- generated view of the Martian North Polar Region shows the extent of what may have been an ancient ocean covering much of the northern lowlands. The Hellas Basin, which measures some 3,000 kilometers across and has a floor that lies nearly 9 kilometers below the basin\u2019s rim, is another candidate for an ancient Martian sea. All of the following questions about geological features on Mars are answered in paragraph 3 EXCEPT: A. What are some regions of Mars that may have once been covered with an ocean? B. Where do mission scientists believe that the river forming the delta emptied? C. Approximately how many craters on Mars do mission scientists believe may once have been lakes filled with water? D. During what period of Mars\u2019 history do some scientists think it may have had large bodies of water? \u9009\u62e9\uff1aC - how many\u672a\u4f53\u73b0 TPO 8 Running Water on Mars (\u6b63\u786e\u7387 50.09%) Outflow channels are probably relics of catastrophic flooding on Mars long ago. They appear only in equatorial regions\u3010B\u3011 and generally do not form extensive interconnected networks. Instead, they are probably the paths taken by huge volumes of water draining from the southern highlands into the northern plains. The onrushing water arising from these flash floods likely also formed the odd teardrop-shaped \u201cislands\u201d (resembling the miniature versions seen in the wet sand of our beaches at low tide)\u3010C\u3011 that have been found on the plains close to the ends of the outflow channels. Judging from the width and depth of the channels, the flow rates must have been truly enormous\u2015perhaps as much as a hundred times greater than the 105 tons per second carried by the great Amazon River. Flooding shaped the outflow channels approximately 3 billion years ago, about the same times as the northern volcanic plains formed.\u3010A\u3011 According to paragraph 2, all of the following are true of the outflow channels on Mars EXCEPT: A. They formed at around the same time that volcanic activity was occurring on the northern plains. B. They are found only on certain parts of the Martian surface. C. They sometimes empty onto what appear to have once been the wet sands of tidal beaches. D. They are thought to have carried water northward from the equatorial regions. \u9009\u62e9\uff1aC \u539f\u6587\u53ea\u662f\u7c7b\u6bd4 D\u9009\u9879\u4e0d\u77e5\u9053\u5728\u54ea\u91cc\uff0c\u63a8\u6d4b\u51fa\u6765\u7684 TPO 12 Which Hand Did They Use? (\u6b63\u786e\u7387 43.75%) We all know that many more people today are right-handed than left-handed. Can one trace this same pattern far back in prehistory? Much of the evidence about right-hand versus left- hand dominance comes from stencils and prints found in rock shelters in Australia and elsewhere, and in many Ice Age caves in France, Spain, and Tasmania. When a left hand has been stenciled, this implies that the artist was right-handed, and vice versa. Even though the paint was often sprayed on by mouth, one can assume that the dominant hand assisted in the operation. One also has to make the assumption that hands were stenciled palm downward\u2014 a left hand stenciled palm upward might of course look as if it were a right hand\u3010B\u3011 . Of 158 stencils in the French cave of Gargas, 136 have been identified as left, and only 22 as right; right- handedness was therefore heavily predominant. Cave art furnishes other types of evidence of this phenomenon. Most engravings, for example, are best lit from the left\u3010A\u3011 , as befits the work of right-handed artists, who generally prefer to have the light source on the left so that the shadow of their hand does not fall on the tip of the engraving tool or brush. In the few cases where an Ice Age figure is depicted holding something, it is mostly, though not always, in the right\u3010D\u3011 hand . All of the following are mentioned in paragraphs 1 and 2 as evidence of right-handedness in art and artists EXCEPT A. the ideal source of lighting for most engravings B. the fact that a left hand stenciled palm upward might look like a right hand C. the prevalence of outlines of left hands D. figures in prehistoric art holding objects with the right hand \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709 B TPO 14 Pastoralism in Ancient Inner Eurasia (\u6b63\u786e\u7387 39.37%) Nomadism also subjects pastoralist communities to strict rules of portability. If you are constantly on the move, you cannot afford to accumulate large material surpluses. Such rules limit variations in accumulated material goods between pastoralist households (though they may also encourage a taste for portable goods of high value such as silks or jewelry). So, by and large, nomadism implies a high degree of self-sufficiency and inhibits the appearance of an extensive division of labor. Inequalities of wealth and rank certainly exist, and have probably existed in most pastoralist societies\u3010A\u3011 , but except in periods of military conquest\u3010B\u3011, they are normally too slight to generate the stable, hereditary hierarchies that are usually implied by the use of the term class\u3010D\u3011 . Inequalities of gender have also existed in pastoralist societies, but they seem to have been softened by the absence of steep hierarchies of wealth in most communities, and also by the requirement that women acquire most of the skills of men, including, often, their military skills. According to paragraph 4, all of the following are true of social inequality in pastoralist societies EXCEPT: A. It exists and has existed to some degree in most pastoral societies. B. It is most marked during periods of military conquest. C. It is expressed in the form of a rigid hierarchy based largely on heredity. D. It is usually too insignificant to be discussed in terms of class differences. \u9009\u62e9\uff1aC - \u65e0\u4e2d\u751f\u6709\uff0c\u6392\u9664\u6cd5 B","title":"\u6392\u9664\u9898"},{"location":"English/reading-hw6/","text":"\u63a8\u65ad\u9898 \u00b6 TPO 20 Westward Migration (\u6b63\u786e\u7387 99.03%) Two other developments presaged the end of the era of turnpikes\u3010A\u3011 and stared a transportation revolution that resulted in increased regional specialization\u3010C\u3011 and the growth of a national market economy First came the steamboat; although flatboats and keelboats continued to be important until the 1850\u2019s, steamboats eventually superseded all other craft in the carrying of passengers and freight. Steamboats were not only faster but also transported upriver freight for about one tenth of what it had previously cost on hand-propelled keelboats.\u3010B\u3011 Next came the Erie Canal, an enormous project in its day, spanning about 350 miles. After the canal went into operation, the cost per mile of transporting a ton of freight from Buffalo to New York City declined from nearly 20 cents to less that 1 cent. Eventually, the western states diverted much of their produce from the rivers to the Erie Canal, a shorter route to eastern markets. Which of the following can be inferred from paragraph 5 about flatboats and keelboats ? A. They ceased to be used as soon as the first turnpikes were built. B. They were slower and more expensive to operate than steamboats. C. They were used for long distance but not for regional transportation. D. They were used primarily on the Erie Canal. \u9009\u62e9\uff1aB - \u539f\u6587\u4e2d\u300cfaster\u300d\u5bf9\u5e94\u300cslower\u300d\uff0c\u300ccost\u300d\u5bf9\u5e94 \u300cexpensive\u300d A\u3001C\u9009\u9879\u9519\u8bef\uff0cD\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 14 Children and Advertising (\u6b63\u786e\u7387 97.08%) Fantasy is one of the more common techniques in advertising that could possibly mislead a young audience. Child-oriented advertisements are more likely to include magic and fantasy than advertisements aimed at adults. In a content analysis of Canadian television, the author Stephen Kline observed that nearly all commercials for character toys featured fantasy play. Children have strong imaginations and the use of fantasy brings their ideas to life, but children may not be adept enough to realize that what they are viewing is unreal. Fantasy situations and settings are frequently used to attract children's attention, particularly in food advertising. Advertisements for breakfast cereals have, for many years, been found to be especially fond of fantasy techniques, with almost nine out of ten including such content. Generally, there is uncertainty as to whether very young children can distinguish between fantasy and reality in advertising. Certainly, rational appeals in advertising aimed at children are limited, as most advertisements use emotional and indirect appeals to psychological states or associations. Paragraph 3 indicates that there is uncertainty about which of the following issues involving children and fantasy in advertising ? A. Whether children can tell if what they are seeing in an advertisement is real or fantasy B. Whether children can differentiate fantasy techniques from other techniques used in advertising C. Whether children realize how commonly fantasy techniques are used in advertising aimed at them D. Whether children are attracted to advertisements that lack fantasy \u9009\u62e9\uff1aA - \u539f\u6587\u539f\u53e5 \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 21 The Origins of Agriculture (\u6b63\u786e\u738796.1%) It would appear that the instability of the climatic conditions led populations that had originally been nomadic to settle down and develop a sedentary style of life\u3010B\u3011 , which led in turn to population growth and to the need to increase the amount of food available. Farming originated in these conditions. Later on, it became very difficult to change because of the significant expansion of these populations. It could be argued, however, that these conditions are not sufficient to explain the origins of agriculture. Earth had experienced previous periods of climatic change, and yet agriculture had not been developed. It can be inferred from paragraph 4 that it was difficult for people to change from farming back to hunting and gathering because A. People had become more used to different types of food B. Climatic conditions were no longer favorable for hunting and gathering C. Populations had become too large to be supported by bunting and gathering D. The farmer\u2019s sedentary life was easier than the hunter-gatherer\u2019s nomadic life \u9009\u62e9\uff1aC A\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\u3001B\u9009\u9879\u5f20\u51a0\u674e\u6234\u300c\u89e3\u91ca\u7684\u662f\u4e3a\u4ec0\u4e48\u4eba\u4eec\u7531\u6e38\u7267\u53d8\u4e3a\u4e86farming\u300d TPO 34 The Development of Steam Power (\u6b63\u786e\u7387 94.91%) By the eighteenth century, Britain was experiencing a severe shortage of energy. Because of the growth of population, most of the great forests of medieval Britain had long ago been replaced by fields of grain and hay .\u3010B / D\u3011 Wood was in ever-shorter supply, yet it remained tremendously important. It served as the primary source of heat for all homes\u3010C\u3011 and industries and as a basic raw material. Processed wood (charcoal) was the fuel that was mixed with iron ore in the blast furnace to produce pig iron (raw iron). The iron industry\u2019s appetite for wood was enormous, and by 1740 the British iron industry was stagnating. Vast forests enabled Russia to become the world\u2019s leading producer of iron, much of which was exported to Britain\u3010A\u3011 . But Russia\u2019s potential for growth was limited too, and in a few decades Russia would reach the barrier of inadequate energy that was already holding England back. What can be inferred from paragraph 1 about Britain\u2019s short supply of wood in the eighteenth century ? A. Wood from Britain\u2019s great forests was being exported to other countries for profit. B. A growing population had required cutting down forests to increase available land for farming . C. Larger families required the construction of larger homes made from wood . D. What was left of the great forests after the medieval period was being strictly protected. \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef\u300c\u82f1\u56fd\u4ece\u4fc4\u7f57\u65af\u8fdb\u53e3\u300d\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709\u3001D\u9009\u9879\u9519\u8bef\u300cforests\u90fd\u88ab\u66ff\u4ee3\u4e86\u300d TPO 20 Early Settlements in the Southwest Asia (\u6b63\u786e\u7387 93.88%) The flotation samples from the excavations allowed botanists to study shifts in plant-collection habits as if they were looking through a telescope at a changing landscape. Hundreds of tiny plant remains show how the inhabitants exploited nut harvests in nearby pistachio and oak forests. However, as the climate dried up, the forests retreated from the vicinity of the settlement. The inhabitants turned to wild cereal grasses instead, collecting them by the thousands, while the percentage of nuts in the diet fell. By 8200 B.C., drought conditions were so severe that the people abandoned their long-established settlement, perhaps dispersing into smaller camps. Paragraph 4 suggests that the people of Abu Hureyra abandoned their long-established settlement because A. The inhabitants had cleared all the trees from the forests B. Wild cereal grasses took over pistachio and oak forests C. People wanted to explore new areas D. Lack of rain caused food shortages \u9009\u62e9\uff1aD - \u539f\u6587\u539f\u53e5\u540c\u4e49\u8f6c\u6362 drought - lack of rain TPO 12 Which Hand Did They Use? (\u6b63\u786e\u7387 93.75%) Fractures and other cut marks are another source of evidence. Right-handed soldiers tend to be wounded on the left. The skeleton of a 40- or 50-year-old Nabatean warrior, buried 2,000 years ago in the Negev Desert, Israel, had multiple healed fractures to the skull, the left arm, and the ribs. Which of the following statements about fractures and cut marks can be inferred from paragraph 4? A. Fractures and cut marks caused by right-handed soldiers tend to occur on the right side of the injured party's body. B. The right arm sustains more injuries because, as the dominant arm, it is used more actively. C. In most people, the left side of the body is more vulnerable to injury since it is not defended effectively by the dominant arm. D. Fractures and cut marks on fossil humans probably occurred after death. \u9009\u62e9\uff1aA - \u539f\u6587\u539f\u53e5 C TPO 13 Types of Social Groups (\u6b63\u786e\u7387 93.48%) Sociologists have built on the distinction between expressive and instrumental ties to distinguish between two types of groups: primary and secondary. A primary group involves two or more people who enjoy a direct, intimate, cohesive relationship with one another. Expressive ties predominate in primary groups; we view the people as ends in themselves and valuable in their own right. A secondary group entails two or more people who are involved in an impersonal relationship and have come together for a specific, practical purpose. Instrumental ties predominate in secondary groups; we perceive people as means to ends rather than as ends in their own right. Sometimes primary group relationships evolve out of secondary group relationships. This happens in many work settings. People on the job often develop close relationships with coworkers as they come to share gripes, jokes, gossip, and satisfactions. Which of the following can be inferred from the author's claim in paragraph 3 that primary group relationships sometimes evolve out of secondary group relationships ? A. Secondary group relationships begin by being primary group relationships. B. A secondary group relationship that is highly visible quickly becomes a primary group relationship. C. Sociologists believe that only primary group relationships are important to society. D. Even in secondary groups, frequent communication serves to bring people into close relationships. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 A\u9009\u9879\u610f\u601d\u76f8\u53cd\u3001B\u9009\u9879\u4e2d\u7684highly visible\u65e0\u4e2d\u751f\u6709\u3001C\u9009\u9879\u4e2d\u7684only\u8fc7\u4e8e\u7edd\u5bf9 TPO 29 Characteristics of Roman Pottery (\u6b63\u786e\u7387 93.34%) The pottery of ancient Romans is remarkable in several ways. The high quality of Roman pottery is very easy to appreciate when handing actual pieces of tableware or indeed kitchenware and amphorae\u3010A / D\u3011 (the large jars used throughout the Mediterranean for the transport and storage of liquids, such as wine and oil). However, it is impossible to do justice to Roman wares on the page, even when words can be backed up by photographs and drawings. Most roman pottery is light and smooth to the touch and very tough, although, like all pottery, it shatters if dropped on a hard surface. It is generally made with carefully selected and purified clay, worked to thin-walled and standardized shapes on a fast wheel and fired in a kiln (pottery oven) capable of ensuring a consistent finish.\u3010C\u3011 With handmade pottery, inevitably there are slight differences between individual vessels of the same design and occasional minor blemishes (flaws). But what strikes the eye and the touch most immediately and most powerfully with Roman pottery is its consistent high quality. Paragraph 1 indicates which of the following about Roman pottery ? A. Roman amphorae were of much higher quality overall than other Roman pottery. B. Romany pottery can best be appreciated when actual pieces are handled. C. Roman pottery declined slightly in quality when the use of fast wheels and kilns was introduced. D. Roman practical tableware spread more rapidly across the Mediterranean than amphorae did. \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 TPO 11 Orientation and Navigation (\u6b63\u786e\u7387 92.1%) To South Americans, robins are birds that fly north every spring. To North Americans, the robins simply vacation in the south each winter. Furthermore, they fly to very specific places in South America and will often come back to the same trees in North American yards the following spring.\u3010C / D\u3011 The question is not why they would leave the cold of winter so much as how they find their way around. The question perplexed people for years, until, in the 1950s, a German scientist named Gustave Kramer provided some answers and. in the process, raised new questions. Which of the following can be inferred about bird migration from paragraph 1? A. Birds will take the most direct migratory route to their new habitat. B. The purpose of migration is to join with larger groups of birds. C. Bird migration generally involves moving back and forth between north and south. D. The destination of birds' migration can change from year to year. \u9009\u62e9\uff1aC - \u539f\u6587\u5bf9\u5e94 D\u9009\u9879\u9519\u8bef\u3001AB\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 8 The Rise of Teotihuac\u00e1n (\u6b63\u786e\u7387 91.76%) How did this tremendous development take place, and why did it happen in the Teotihuac\u00e1n Valley? Among the main factors are Teotihuac\u00e1n\u2019s geographic location on a natural trade route to the south and east of the Valley of Mexico, the obsidian resources in the Teotihuac\u00e1n Valley itself, and the valley\u2019s potential for extensive irrigation\u3010D\u3011 . The exact role of other factors is much more difficult to pinpoint\u2015for instance, Teotihuac\u00e1n\u2019s religious significance as a shrine, the historical situation in and around the Valley of Mexico toward the end of the first millennium B.C., the ingenuity and foresightedness of Teotihuac\u00e1n\u2019s elite, and, finally, the impact of natural disasters, such as the volcanic eruptions of the late first millennium B.C. This last factor is at least circumstantially implicated in Teotihuac\u00e1n\u2019s rise. Prior to 200 B.C., a number of relatively small centers coexisted in and near the Valley of Mexico. Around this time, the largest of these centers, Cuicuilco, was seriously affected by a volcanic eruption , with much of its agricultural land covered by lava. With Cuicuilco eliminated as a potential rival, any one of a number of relatively modest towns might have emerged as a leading economic and political power in Central Mexico. The archaeological evidence clearly indicates, though, that Teotiluacan was the center that did arise as the predominant force in the area by the first century A.D. Which of the following can be inferred from paragraphs 2 and 3 about the Volcanic eruptions of the late first millennium B.C. ? A. They were more frequent than historians once thought. B. They may have done more damage to Teotihuac\u00e1n than to neighboring centers. C. They may have played a major role in the rise of Teotihuac\u00e1n. D. They increased the need for extensive irrigation in the Teotihuac\u00e1n Valley \u9009\u62e9\uff1aC B\u3001D\u9009\u9879\u9519\u8bef\u3001A\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 31 Speciation in Geographically Isolated Populations (\u6b63\u786e\u7387 50.7%) In the 1980s, John Graves studied two populations of closely related fishes, one population from the Atlantic side of isthmus, the other from the Pacific side. He compared four enzymes found in the muscles of each population. Graves found that all four Pacific enzymes function better at lower temperatures than the four Atlantic versions of the same enzymes. This is significant because Pacific seawater if typically 2 to 3 degrees cooler than seawater on the Atlantic side of isthmus.\u3010A\u3011 Analysis by gel electrophoresis revealed slight differences in amino acid sequence of the enzymes of two of the four pairs. This is significant because the amino acid sequence of an enzyme is determined by genes. Graves drew two conclusions from these observations. First, at least some of the observed differences between the enzymes of the Atlantic and Pacific fish populations were not random but were the result of evolutionary adaptation. Second, it appears that closely related populations of fishes on both sides of the isthmus are starting to genetically diverge from each other\u3010B\u3011. Because Graves\u2019 study of geographically isolated populations of isthmus fishes offers a glimpse of the beginning of a process of gradual accumulation of mutations that are neutral or adaptive, divergences here might be evidence of allopatric speciation in process. It can be inferred from paragraph 5 and 6 that the reason Graved concluded that some of the differences between the Pacific and Atlantic enzymes were not random was that A. Each of the Pacific enzymes works better in cooler waters B. The enzymes of the Atlantic fish populations had not changed since the formation of the Isthmus of Panama C. Gel electrophoresis showed that the changes benefited both the Atlantic and the Pacific fish populations D. The differences between the enzymes disappeared when the two fish populations were experimentally switched to other side of the isthmus \u9009\u62e9\uff1aC - \u6392\u9664\u6cd5 A\u3001B\u3001D\u9009\u9879\u9519\u8bef A TPO 31 Early Childhood Education (\u6b63\u786e\u7387 50.11%) While many programs designed for preschoolers focus primarily on social and emotional factors\u3010D\u3011 , some are geared mainly toward promoting cognitive gains and preparing preschoolers for the formal instruction they will experience when they start kindergarten\u3010B\u3011. In the United States, the best-known program designed to promote future academic success is Head Start. Established in the 1960s when the United States declared the War on Poverty \u3010A\u3011, the program has served over 13 million children and their families. The program, which stresses parental involvement, was designed to serve the \u201cwhole child\u201d, including children\u2019s physical health, self- confidence, social responsibility, and social and emotional development. It can be inferred from paragraph 2 that the Head Start program was designed to serve children who A. Come from families that do not have a lot of money B. Are not doing very well in kindergarten C. Were born in the 1950s D. Need programs that focus primarily on social and emotional factors \u9009\u62e9\uff1aA B\u3001D\u9009\u9879\u9519\u8bef\uff1bC\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 19 Discovering the Ice Ages (\u6b63\u786e\u7387 48.84%) Isotopic analysis of shells allowed geologists to measure another glacial effect. They could trace the growth and shrinkage of continental glaciers, even in parts of the ocean where there may have been no great change in temperature\u3010C\u3011\u2014 around the equator, for example. The oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice. During glaciations, the lighter oxygen-16 has a greater tendency to evaporate from the ocean surface than the heavier oxygen-18 does. Thus, more of the heavy isotope is left behind in the ocean and absorbed by marine organisms. From this analysis of marine sediments, geologists have learned that there were many shorter, more regular cycles of glaciation and deglaciation than geologists had recognized from the glacial drift of the continents alone. It can be inferred from paragraph 5 that foraminifera fossil shells containing calcite with high percentages of oxygen-16 were deposited at times when A. polar ice extended as far as equatorial regions of land and sea B. extensive glaciation was not occurring C. there were no great increases in ocean temperature D. there was heavy snowfall on continental glaciers \u9009\u9879\uff1aC - \u81ea\u5df1\u4e0d\u662f\u5f88\u786e\u5b9a B TPO 18 Lightning (\u6b63\u786e\u7387 47.06%) The formation of the channel is initiated when electrons surge from the cloud base toward the ground. When a stream of these negatively charged electrons comes within 100 meters of the ground\u3010B\u3011 it is met by a stream of positively charged particles that comes up from the ground. When the negatively and positively charged streams meet, a complete channel connecting the cloud and the ground is formed. The channel is only a few centimeters in diameter\u3010A\u3011, but that is wide enough for electrons to follow the channel to the ground in the visible form of a flash of lightning.\u3010D\u3011 The stream of positive particles that meets the surge of electrons from the cloud often arises from a tall pointed structure such as a metal flagpole or a tower.\u3010C\u3011 That is why the subsequent lightning that follows the completed channel often strikes a tall structure. Which of the following claims about lightning strikes can be inferred from paragraph 5? A. During a lightning strike the diameter of the channel the electrons follow is considerably enlarged beyond a few centimeters B. A building is unlikely to be hit by lightning unless it is at least 100 meters tail C. A building is hit by a lightning strike because the building itself has first determined the path the lightning then takes to it D. The light of a lightning strike first appears at the point where the streams of negative and positive particles meet \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 \u5176\u4f59\u9009\u9879\u9519\u8bef C TPO 11 Begging by Nestlings (\u6b63\u786e\u7387 46.84%) Further evidence for the costs of begging comes from a study of differences in the begging calls of warbler species that nest on the ground versus those that nest in the relative safety of trees. The young of ground-nesting warblers produce begging cheeps of higher frequencies than do their tree-nesting relatives.\u3010D\u3011 These higher-frequency sounds do not travel as far \u3010B\u3011, and so may better conceal the individuals producing them\u3010C\u3011, who are especially vulnerable to predators in their ground nests. David Haskell created artificial nests with clay eggs and placed them on the ground beside a tape recorder that played the begging calls of either tree-nesting or of ground-nesting warblers. The eggs \u201cadvertised\u201d by the tree-nesters' begging calls were found bitten significantly more often than the eggs associated with the ground-nesters\u2019 calls. Paragraph 2 indicates that the begging calls of tree nesting warblers A. put them at more risk than ground-nesting warblers experience B. can be heard from a greater distance than those of ground-nesting warblers C. are more likely to conceal the signaler than those of ground-nesting warblers D. have higher frequencies than those of ground nesting warblers \u9009\u62e9\uff1aA C\u3001D\u9009\u9879\u9519\u8bef\uff1bB\u9009\u9879\u4e0d\u77e5\u9053\u54ea\u91cc\u9519\u4e86\uff0c\u96be\u9053\u662f\u65e0\u4e2d\u751f\u6709 B TPO 3 The Long-Term Stability of Ecosystems (\u6b63\u786e\u7387 44.63%) Even the kind of stability defined as simple lack of change is not always associated with maximum diversity. At least in temperate zones\u3010C\u3011 , maximum diversity is often found in mid- successional stages\u3010D\u3011 , not in the climax community. Once a redwood forest matures, for example, the kinds of species and the number of individuals growing on the forest floor are reduced .\u3010B\u3011 In general, diversity, by itself, does not ensure stability. Mathematical models of ecosystems likewise suggest that diversity does not guarantee ecosystem stability\u2014just the opposite, in fact. A more complicated system is, in general, more likely than a simple system to break down. (A fifteen-speed racing bicycle is more likely to break down than a child\u2019s tricycle.) Which of the following can be inferred from paragraph 5 about redwood forests ? A. They become less stable as they mature. B. They support many species when they reach climax. C. They are found in temperate zones. D. They have reduced diversity during mid-successional stages. \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 B\u3001D\u9009\u9879\u9519\u8bef\uff1bC\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1f C TPO 7 The Geologic History of the Mediterranean (\u6b63\u786e\u7387 41.67%) With question such as these clearly before them, the scientists aboard the Glomar Challenger processed to the Mediterranean to search for the answers. On August 23, 1970, they recovered a sample. The sample consisted of pebbles of gypsum and fragments of volcanic rock. Not a single pebble was found that might have indicated that the pebbles came from the nearby continent. In the days following, samples of solid gypsum were repeatedly brought on deck as drilling operations penetrated the seafloor. Furthermore, the gypsum was found to possess peculiarities of composition and structure that suggested it had formed on desert flats\u3010D\u3011 . Sediment above and below the gypsum layer contained tiny marine fossils\u3010A\u3011, indicating open- ocean conditions\u3010B\u3011. As they drilled into the central and deepest part of the Mediterranean basin, the scientists took solid, shiny, crystalline salt from the core barrel\u3010C\u3011 . Interbedded with the salt were thin layers of what appeared to be windblown silt. Which of the following can be inferred from paragraph 3 about the solid gypsum layer ? A. It did not contain any marine fossil. B. It had formed in open-ocean conditions. C. It had once been soft, deep-sea mud. D. It contained sediment from nearby deserts. \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef\uff1bC\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 A TPO 27 Predator-Prey Cycles (\u6b63\u786e\u738732.49%) When experimental populations are set up under simple laboratory conditions, the predator often exterminates its prey and then becomes extinct itself, having nothing left to eat. However, if safe areas like those prey animals have in the wild are provided, the prey population drops to low levels but not to extinction. Low prey population levels then provide inadequate food for the predators, causing the predator population to decrease. When this occurs, the prey population can rebound. In this situation the predator and prey populations may continue in this cyclical pattern for some time. \u3010B\u3011 Population cycles are characteristic of small mammals, and they sometimes appear to be brought about by predators. Ecologists studying hare populations have found that the North American snow shoe hare follows a roughly ten-year cycle\u3010C\u3011 . Its numbers fall tenfold to thirty in a typical cycle, and a hundredfold change can occur. Two factors appear to be generating the cycle: food plants and predators. Which of the following can be inferred from paragraphs 2 and 3 about the small mammals that experience population cycles ? A. Their population cycles are not affected by predators B. Their predators\u2019 populations periodically disappear C. They typically undergo ten-year cycles D. They have access to places safe from predators \u9009\u62e9\uff1aB A\u3001C\u9009\u9879\u9519\u8bef\uff1bD\u9009\u9879\u65e0\u4e2d\u751f\u6709 D TPO 17 Symbiotic Relationships (\u6b63\u786e\u7387 32.38%) At times, it is actually possible to watch the effects of natural selection in host-parasite relationships. For example, Australia during the 1940 s was overrun by hundreds of millions of European rabbits. The rabbits destroyed huge expanses of Australia and threatened the sheep and cattle industries. In 1950, myxoma virus, a parasite that affects rabbits, was deliberately introduced into Australia to control the rabbit population. Spread rapidly by mosquitoes, the virus devastated the rabbit population. The virus was less deadly to the offspring of surviving rabbits, however, and it caused less and less harm over the years. Apparently, genotypes (the genetic make-up of an organism) in the rabbit population were selected that were better able to resist the parasite. Meanwhile, the deadliest strains of the virus perished with their hosts as natural selection favored strains that could infect hosts but not kill them.\u3010D\u3011 Thus, natural selection stabilized this host-parasite relationship. Which of the following can be concluded from the discussion in paragraph 3 about the Australian rabbit population ? A. Human intervention may alter the host, the parasite and the relationship between them. B. The risks of introducing outside organisms into a biological community are not worth the benefits. C. Humans should not interfere in host-parasite relationships. D. Organisms that survive a parasitic attack do so in spite of the natural selection process. \u9009\u62e9\uff1aD - A\u548cD\u4e4b\u95f4\u7ea0\u7ed3 A\u3001B\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709 A TPO 6 Infantile Amnesia (\u6b63\u786e\u738727.5%) Three other explanations seem more promising. One involves physiological changes relevant to memory. Maturation of the frontal lobes of the brain continues throughout early childhood, and this part of the brain may be critical for remembering particular episodes in ways that can be retrieved later. Demonstrations of infants\u2019 and toddlers\u2019 long-term memory have involved their repeating motor activities that they had seen or done earlier\u3010B\u3011 , such as reaching in the dark for objects, putting a bottle in a doll\u2019s mouth, or pulling apart two pieces of a toy. The brain\u2019s level of physiological maturation may support these types of memories, but not ones requiring explicit verbal descriptions.\u3010D\u3011 What does paragraph 3 suggest about long-term memory in children ? A. Maturation of the frontal lobes of the brain is important for the long-term memory of motor activities but not verbal descriptions. B. Young children may form long-term memories of actions they see earlier than of things they hear or are told. C. Young children have better long-term recall of short verbal exchanges than of long ones. D. Children\u2019s long-term recall of motor activities increases when such activities are accompanied by explicit verbal descriptions \u9009\u62e9\uff1aB - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 C\u9009\u9879short\u65e0\u4e2d\u751f\u6709\uff1bD\u9009\u9879increase\u65e0\u4e2d\u751f\u6709\uff1bA\u9009\u9879\u610f\u601d\u9519\u8bef","title":"Reading-Homework6"},{"location":"English/reading-hw6/#_1","text":"TPO 20 Westward Migration (\u6b63\u786e\u7387 99.03%) Two other developments presaged the end of the era of turnpikes\u3010A\u3011 and stared a transportation revolution that resulted in increased regional specialization\u3010C\u3011 and the growth of a national market economy First came the steamboat; although flatboats and keelboats continued to be important until the 1850\u2019s, steamboats eventually superseded all other craft in the carrying of passengers and freight. Steamboats were not only faster but also transported upriver freight for about one tenth of what it had previously cost on hand-propelled keelboats.\u3010B\u3011 Next came the Erie Canal, an enormous project in its day, spanning about 350 miles. After the canal went into operation, the cost per mile of transporting a ton of freight from Buffalo to New York City declined from nearly 20 cents to less that 1 cent. Eventually, the western states diverted much of their produce from the rivers to the Erie Canal, a shorter route to eastern markets. Which of the following can be inferred from paragraph 5 about flatboats and keelboats ? A. They ceased to be used as soon as the first turnpikes were built. B. They were slower and more expensive to operate than steamboats. C. They were used for long distance but not for regional transportation. D. They were used primarily on the Erie Canal. \u9009\u62e9\uff1aB - \u539f\u6587\u4e2d\u300cfaster\u300d\u5bf9\u5e94\u300cslower\u300d\uff0c\u300ccost\u300d\u5bf9\u5e94 \u300cexpensive\u300d A\u3001C\u9009\u9879\u9519\u8bef\uff0cD\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 14 Children and Advertising (\u6b63\u786e\u7387 97.08%) Fantasy is one of the more common techniques in advertising that could possibly mislead a young audience. Child-oriented advertisements are more likely to include magic and fantasy than advertisements aimed at adults. In a content analysis of Canadian television, the author Stephen Kline observed that nearly all commercials for character toys featured fantasy play. Children have strong imaginations and the use of fantasy brings their ideas to life, but children may not be adept enough to realize that what they are viewing is unreal. Fantasy situations and settings are frequently used to attract children's attention, particularly in food advertising. Advertisements for breakfast cereals have, for many years, been found to be especially fond of fantasy techniques, with almost nine out of ten including such content. Generally, there is uncertainty as to whether very young children can distinguish between fantasy and reality in advertising. Certainly, rational appeals in advertising aimed at children are limited, as most advertisements use emotional and indirect appeals to psychological states or associations. Paragraph 3 indicates that there is uncertainty about which of the following issues involving children and fantasy in advertising ? A. Whether children can tell if what they are seeing in an advertisement is real or fantasy B. Whether children can differentiate fantasy techniques from other techniques used in advertising C. Whether children realize how commonly fantasy techniques are used in advertising aimed at them D. Whether children are attracted to advertisements that lack fantasy \u9009\u62e9\uff1aA - \u539f\u6587\u539f\u53e5 \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 21 The Origins of Agriculture (\u6b63\u786e\u738796.1%) It would appear that the instability of the climatic conditions led populations that had originally been nomadic to settle down and develop a sedentary style of life\u3010B\u3011 , which led in turn to population growth and to the need to increase the amount of food available. Farming originated in these conditions. Later on, it became very difficult to change because of the significant expansion of these populations. It could be argued, however, that these conditions are not sufficient to explain the origins of agriculture. Earth had experienced previous periods of climatic change, and yet agriculture had not been developed. It can be inferred from paragraph 4 that it was difficult for people to change from farming back to hunting and gathering because A. People had become more used to different types of food B. Climatic conditions were no longer favorable for hunting and gathering C. Populations had become too large to be supported by bunting and gathering D. The farmer\u2019s sedentary life was easier than the hunter-gatherer\u2019s nomadic life \u9009\u62e9\uff1aC A\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709\u3001B\u9009\u9879\u5f20\u51a0\u674e\u6234\u300c\u89e3\u91ca\u7684\u662f\u4e3a\u4ec0\u4e48\u4eba\u4eec\u7531\u6e38\u7267\u53d8\u4e3a\u4e86farming\u300d TPO 34 The Development of Steam Power (\u6b63\u786e\u7387 94.91%) By the eighteenth century, Britain was experiencing a severe shortage of energy. Because of the growth of population, most of the great forests of medieval Britain had long ago been replaced by fields of grain and hay .\u3010B / D\u3011 Wood was in ever-shorter supply, yet it remained tremendously important. It served as the primary source of heat for all homes\u3010C\u3011 and industries and as a basic raw material. Processed wood (charcoal) was the fuel that was mixed with iron ore in the blast furnace to produce pig iron (raw iron). The iron industry\u2019s appetite for wood was enormous, and by 1740 the British iron industry was stagnating. Vast forests enabled Russia to become the world\u2019s leading producer of iron, much of which was exported to Britain\u3010A\u3011 . But Russia\u2019s potential for growth was limited too, and in a few decades Russia would reach the barrier of inadequate energy that was already holding England back. What can be inferred from paragraph 1 about Britain\u2019s short supply of wood in the eighteenth century ? A. Wood from Britain\u2019s great forests was being exported to other countries for profit. B. A growing population had required cutting down forests to increase available land for farming . C. Larger families required the construction of larger homes made from wood . D. What was left of the great forests after the medieval period was being strictly protected. \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef\u300c\u82f1\u56fd\u4ece\u4fc4\u7f57\u65af\u8fdb\u53e3\u300d\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709\u3001D\u9009\u9879\u9519\u8bef\u300cforests\u90fd\u88ab\u66ff\u4ee3\u4e86\u300d TPO 20 Early Settlements in the Southwest Asia (\u6b63\u786e\u7387 93.88%) The flotation samples from the excavations allowed botanists to study shifts in plant-collection habits as if they were looking through a telescope at a changing landscape. Hundreds of tiny plant remains show how the inhabitants exploited nut harvests in nearby pistachio and oak forests. However, as the climate dried up, the forests retreated from the vicinity of the settlement. The inhabitants turned to wild cereal grasses instead, collecting them by the thousands, while the percentage of nuts in the diet fell. By 8200 B.C., drought conditions were so severe that the people abandoned their long-established settlement, perhaps dispersing into smaller camps. Paragraph 4 suggests that the people of Abu Hureyra abandoned their long-established settlement because A. The inhabitants had cleared all the trees from the forests B. Wild cereal grasses took over pistachio and oak forests C. People wanted to explore new areas D. Lack of rain caused food shortages \u9009\u62e9\uff1aD - \u539f\u6587\u539f\u53e5\u540c\u4e49\u8f6c\u6362 drought - lack of rain TPO 12 Which Hand Did They Use? (\u6b63\u786e\u7387 93.75%) Fractures and other cut marks are another source of evidence. Right-handed soldiers tend to be wounded on the left. The skeleton of a 40- or 50-year-old Nabatean warrior, buried 2,000 years ago in the Negev Desert, Israel, had multiple healed fractures to the skull, the left arm, and the ribs. Which of the following statements about fractures and cut marks can be inferred from paragraph 4? A. Fractures and cut marks caused by right-handed soldiers tend to occur on the right side of the injured party's body. B. The right arm sustains more injuries because, as the dominant arm, it is used more actively. C. In most people, the left side of the body is more vulnerable to injury since it is not defended effectively by the dominant arm. D. Fractures and cut marks on fossil humans probably occurred after death. \u9009\u62e9\uff1aA - \u539f\u6587\u539f\u53e5 C TPO 13 Types of Social Groups (\u6b63\u786e\u7387 93.48%) Sociologists have built on the distinction between expressive and instrumental ties to distinguish between two types of groups: primary and secondary. A primary group involves two or more people who enjoy a direct, intimate, cohesive relationship with one another. Expressive ties predominate in primary groups; we view the people as ends in themselves and valuable in their own right. A secondary group entails two or more people who are involved in an impersonal relationship and have come together for a specific, practical purpose. Instrumental ties predominate in secondary groups; we perceive people as means to ends rather than as ends in their own right. Sometimes primary group relationships evolve out of secondary group relationships. This happens in many work settings. People on the job often develop close relationships with coworkers as they come to share gripes, jokes, gossip, and satisfactions. Which of the following can be inferred from the author's claim in paragraph 3 that primary group relationships sometimes evolve out of secondary group relationships ? A. Secondary group relationships begin by being primary group relationships. B. A secondary group relationship that is highly visible quickly becomes a primary group relationship. C. Sociologists believe that only primary group relationships are important to society. D. Even in secondary groups, frequent communication serves to bring people into close relationships. \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 A\u9009\u9879\u610f\u601d\u76f8\u53cd\u3001B\u9009\u9879\u4e2d\u7684highly visible\u65e0\u4e2d\u751f\u6709\u3001C\u9009\u9879\u4e2d\u7684only\u8fc7\u4e8e\u7edd\u5bf9 TPO 29 Characteristics of Roman Pottery (\u6b63\u786e\u7387 93.34%) The pottery of ancient Romans is remarkable in several ways. The high quality of Roman pottery is very easy to appreciate when handing actual pieces of tableware or indeed kitchenware and amphorae\u3010A / D\u3011 (the large jars used throughout the Mediterranean for the transport and storage of liquids, such as wine and oil). However, it is impossible to do justice to Roman wares on the page, even when words can be backed up by photographs and drawings. Most roman pottery is light and smooth to the touch and very tough, although, like all pottery, it shatters if dropped on a hard surface. It is generally made with carefully selected and purified clay, worked to thin-walled and standardized shapes on a fast wheel and fired in a kiln (pottery oven) capable of ensuring a consistent finish.\u3010C\u3011 With handmade pottery, inevitably there are slight differences between individual vessels of the same design and occasional minor blemishes (flaws). But what strikes the eye and the touch most immediately and most powerfully with Roman pottery is its consistent high quality. Paragraph 1 indicates which of the following about Roman pottery ? A. Roman amphorae were of much higher quality overall than other Roman pottery. B. Romany pottery can best be appreciated when actual pieces are handled. C. Roman pottery declined slightly in quality when the use of fast wheels and kilns was introduced. D. Roman practical tableware spread more rapidly across the Mediterranean than amphorae did. \u9009\u62e9\uff1aB - \u6392\u9664\u6cd5 TPO 11 Orientation and Navigation (\u6b63\u786e\u7387 92.1%) To South Americans, robins are birds that fly north every spring. To North Americans, the robins simply vacation in the south each winter. Furthermore, they fly to very specific places in South America and will often come back to the same trees in North American yards the following spring.\u3010C / D\u3011 The question is not why they would leave the cold of winter so much as how they find their way around. The question perplexed people for years, until, in the 1950s, a German scientist named Gustave Kramer provided some answers and. in the process, raised new questions. Which of the following can be inferred about bird migration from paragraph 1? A. Birds will take the most direct migratory route to their new habitat. B. The purpose of migration is to join with larger groups of birds. C. Bird migration generally involves moving back and forth between north and south. D. The destination of birds' migration can change from year to year. \u9009\u62e9\uff1aC - \u539f\u6587\u5bf9\u5e94 D\u9009\u9879\u9519\u8bef\u3001AB\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 8 The Rise of Teotihuac\u00e1n (\u6b63\u786e\u7387 91.76%) How did this tremendous development take place, and why did it happen in the Teotihuac\u00e1n Valley? Among the main factors are Teotihuac\u00e1n\u2019s geographic location on a natural trade route to the south and east of the Valley of Mexico, the obsidian resources in the Teotihuac\u00e1n Valley itself, and the valley\u2019s potential for extensive irrigation\u3010D\u3011 . The exact role of other factors is much more difficult to pinpoint\u2015for instance, Teotihuac\u00e1n\u2019s religious significance as a shrine, the historical situation in and around the Valley of Mexico toward the end of the first millennium B.C., the ingenuity and foresightedness of Teotihuac\u00e1n\u2019s elite, and, finally, the impact of natural disasters, such as the volcanic eruptions of the late first millennium B.C. This last factor is at least circumstantially implicated in Teotihuac\u00e1n\u2019s rise. Prior to 200 B.C., a number of relatively small centers coexisted in and near the Valley of Mexico. Around this time, the largest of these centers, Cuicuilco, was seriously affected by a volcanic eruption , with much of its agricultural land covered by lava. With Cuicuilco eliminated as a potential rival, any one of a number of relatively modest towns might have emerged as a leading economic and political power in Central Mexico. The archaeological evidence clearly indicates, though, that Teotiluacan was the center that did arise as the predominant force in the area by the first century A.D. Which of the following can be inferred from paragraphs 2 and 3 about the Volcanic eruptions of the late first millennium B.C. ? A. They were more frequent than historians once thought. B. They may have done more damage to Teotihuac\u00e1n than to neighboring centers. C. They may have played a major role in the rise of Teotihuac\u00e1n. D. They increased the need for extensive irrigation in the Teotihuac\u00e1n Valley \u9009\u62e9\uff1aC B\u3001D\u9009\u9879\u9519\u8bef\u3001A\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 31 Speciation in Geographically Isolated Populations (\u6b63\u786e\u7387 50.7%) In the 1980s, John Graves studied two populations of closely related fishes, one population from the Atlantic side of isthmus, the other from the Pacific side. He compared four enzymes found in the muscles of each population. Graves found that all four Pacific enzymes function better at lower temperatures than the four Atlantic versions of the same enzymes. This is significant because Pacific seawater if typically 2 to 3 degrees cooler than seawater on the Atlantic side of isthmus.\u3010A\u3011 Analysis by gel electrophoresis revealed slight differences in amino acid sequence of the enzymes of two of the four pairs. This is significant because the amino acid sequence of an enzyme is determined by genes. Graves drew two conclusions from these observations. First, at least some of the observed differences between the enzymes of the Atlantic and Pacific fish populations were not random but were the result of evolutionary adaptation. Second, it appears that closely related populations of fishes on both sides of the isthmus are starting to genetically diverge from each other\u3010B\u3011. Because Graves\u2019 study of geographically isolated populations of isthmus fishes offers a glimpse of the beginning of a process of gradual accumulation of mutations that are neutral or adaptive, divergences here might be evidence of allopatric speciation in process. It can be inferred from paragraph 5 and 6 that the reason Graved concluded that some of the differences between the Pacific and Atlantic enzymes were not random was that A. Each of the Pacific enzymes works better in cooler waters B. The enzymes of the Atlantic fish populations had not changed since the formation of the Isthmus of Panama C. Gel electrophoresis showed that the changes benefited both the Atlantic and the Pacific fish populations D. The differences between the enzymes disappeared when the two fish populations were experimentally switched to other side of the isthmus \u9009\u62e9\uff1aC - \u6392\u9664\u6cd5 A\u3001B\u3001D\u9009\u9879\u9519\u8bef A TPO 31 Early Childhood Education (\u6b63\u786e\u7387 50.11%) While many programs designed for preschoolers focus primarily on social and emotional factors\u3010D\u3011 , some are geared mainly toward promoting cognitive gains and preparing preschoolers for the formal instruction they will experience when they start kindergarten\u3010B\u3011. In the United States, the best-known program designed to promote future academic success is Head Start. Established in the 1960s when the United States declared the War on Poverty \u3010A\u3011, the program has served over 13 million children and their families. The program, which stresses parental involvement, was designed to serve the \u201cwhole child\u201d, including children\u2019s physical health, self- confidence, social responsibility, and social and emotional development. It can be inferred from paragraph 2 that the Head Start program was designed to serve children who A. Come from families that do not have a lot of money B. Are not doing very well in kindergarten C. Were born in the 1950s D. Need programs that focus primarily on social and emotional factors \u9009\u62e9\uff1aA B\u3001D\u9009\u9879\u9519\u8bef\uff1bC\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 19 Discovering the Ice Ages (\u6b63\u786e\u7387 48.84%) Isotopic analysis of shells allowed geologists to measure another glacial effect. They could trace the growth and shrinkage of continental glaciers, even in parts of the ocean where there may have been no great change in temperature\u3010C\u3011\u2014 around the equator, for example. The oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice. During glaciations, the lighter oxygen-16 has a greater tendency to evaporate from the ocean surface than the heavier oxygen-18 does. Thus, more of the heavy isotope is left behind in the ocean and absorbed by marine organisms. From this analysis of marine sediments, geologists have learned that there were many shorter, more regular cycles of glaciation and deglaciation than geologists had recognized from the glacial drift of the continents alone. It can be inferred from paragraph 5 that foraminifera fossil shells containing calcite with high percentages of oxygen-16 were deposited at times when A. polar ice extended as far as equatorial regions of land and sea B. extensive glaciation was not occurring C. there were no great increases in ocean temperature D. there was heavy snowfall on continental glaciers \u9009\u9879\uff1aC - \u81ea\u5df1\u4e0d\u662f\u5f88\u786e\u5b9a B TPO 18 Lightning (\u6b63\u786e\u7387 47.06%) The formation of the channel is initiated when electrons surge from the cloud base toward the ground. When a stream of these negatively charged electrons comes within 100 meters of the ground\u3010B\u3011 it is met by a stream of positively charged particles that comes up from the ground. When the negatively and positively charged streams meet, a complete channel connecting the cloud and the ground is formed. The channel is only a few centimeters in diameter\u3010A\u3011, but that is wide enough for electrons to follow the channel to the ground in the visible form of a flash of lightning.\u3010D\u3011 The stream of positive particles that meets the surge of electrons from the cloud often arises from a tall pointed structure such as a metal flagpole or a tower.\u3010C\u3011 That is why the subsequent lightning that follows the completed channel often strikes a tall structure. Which of the following claims about lightning strikes can be inferred from paragraph 5? A. During a lightning strike the diameter of the channel the electrons follow is considerably enlarged beyond a few centimeters B. A building is unlikely to be hit by lightning unless it is at least 100 meters tail C. A building is hit by a lightning strike because the building itself has first determined the path the lightning then takes to it D. The light of a lightning strike first appears at the point where the streams of negative and positive particles meet \u9009\u62e9\uff1aD - \u6392\u9664\u6cd5 \u5176\u4f59\u9009\u9879\u9519\u8bef C TPO 11 Begging by Nestlings (\u6b63\u786e\u7387 46.84%) Further evidence for the costs of begging comes from a study of differences in the begging calls of warbler species that nest on the ground versus those that nest in the relative safety of trees. The young of ground-nesting warblers produce begging cheeps of higher frequencies than do their tree-nesting relatives.\u3010D\u3011 These higher-frequency sounds do not travel as far \u3010B\u3011, and so may better conceal the individuals producing them\u3010C\u3011, who are especially vulnerable to predators in their ground nests. David Haskell created artificial nests with clay eggs and placed them on the ground beside a tape recorder that played the begging calls of either tree-nesting or of ground-nesting warblers. The eggs \u201cadvertised\u201d by the tree-nesters' begging calls were found bitten significantly more often than the eggs associated with the ground-nesters\u2019 calls. Paragraph 2 indicates that the begging calls of tree nesting warblers A. put them at more risk than ground-nesting warblers experience B. can be heard from a greater distance than those of ground-nesting warblers C. are more likely to conceal the signaler than those of ground-nesting warblers D. have higher frequencies than those of ground nesting warblers \u9009\u62e9\uff1aA C\u3001D\u9009\u9879\u9519\u8bef\uff1bB\u9009\u9879\u4e0d\u77e5\u9053\u54ea\u91cc\u9519\u4e86\uff0c\u96be\u9053\u662f\u65e0\u4e2d\u751f\u6709 B TPO 3 The Long-Term Stability of Ecosystems (\u6b63\u786e\u7387 44.63%) Even the kind of stability defined as simple lack of change is not always associated with maximum diversity. At least in temperate zones\u3010C\u3011 , maximum diversity is often found in mid- successional stages\u3010D\u3011 , not in the climax community. Once a redwood forest matures, for example, the kinds of species and the number of individuals growing on the forest floor are reduced .\u3010B\u3011 In general, diversity, by itself, does not ensure stability. Mathematical models of ecosystems likewise suggest that diversity does not guarantee ecosystem stability\u2014just the opposite, in fact. A more complicated system is, in general, more likely than a simple system to break down. (A fifteen-speed racing bicycle is more likely to break down than a child\u2019s tricycle.) Which of the following can be inferred from paragraph 5 about redwood forests ? A. They become less stable as they mature. B. They support many species when they reach climax. C. They are found in temperate zones. D. They have reduced diversity during mid-successional stages. \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 B\u3001D\u9009\u9879\u9519\u8bef\uff1bC\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff1f C TPO 7 The Geologic History of the Mediterranean (\u6b63\u786e\u7387 41.67%) With question such as these clearly before them, the scientists aboard the Glomar Challenger processed to the Mediterranean to search for the answers. On August 23, 1970, they recovered a sample. The sample consisted of pebbles of gypsum and fragments of volcanic rock. Not a single pebble was found that might have indicated that the pebbles came from the nearby continent. In the days following, samples of solid gypsum were repeatedly brought on deck as drilling operations penetrated the seafloor. Furthermore, the gypsum was found to possess peculiarities of composition and structure that suggested it had formed on desert flats\u3010D\u3011 . Sediment above and below the gypsum layer contained tiny marine fossils\u3010A\u3011, indicating open- ocean conditions\u3010B\u3011. As they drilled into the central and deepest part of the Mediterranean basin, the scientists took solid, shiny, crystalline salt from the core barrel\u3010C\u3011 . Interbedded with the salt were thin layers of what appeared to be windblown silt. Which of the following can be inferred from paragraph 3 about the solid gypsum layer ? A. It did not contain any marine fossil. B. It had formed in open-ocean conditions. C. It had once been soft, deep-sea mud. D. It contained sediment from nearby deserts. \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef\uff1bC\u3001D\u9009\u9879\u65e0\u4e2d\u751f\u6709 A TPO 27 Predator-Prey Cycles (\u6b63\u786e\u738732.49%) When experimental populations are set up under simple laboratory conditions, the predator often exterminates its prey and then becomes extinct itself, having nothing left to eat. However, if safe areas like those prey animals have in the wild are provided, the prey population drops to low levels but not to extinction. Low prey population levels then provide inadequate food for the predators, causing the predator population to decrease. When this occurs, the prey population can rebound. In this situation the predator and prey populations may continue in this cyclical pattern for some time. \u3010B\u3011 Population cycles are characteristic of small mammals, and they sometimes appear to be brought about by predators. Ecologists studying hare populations have found that the North American snow shoe hare follows a roughly ten-year cycle\u3010C\u3011 . Its numbers fall tenfold to thirty in a typical cycle, and a hundredfold change can occur. Two factors appear to be generating the cycle: food plants and predators. Which of the following can be inferred from paragraphs 2 and 3 about the small mammals that experience population cycles ? A. Their population cycles are not affected by predators B. Their predators\u2019 populations periodically disappear C. They typically undergo ten-year cycles D. They have access to places safe from predators \u9009\u62e9\uff1aB A\u3001C\u9009\u9879\u9519\u8bef\uff1bD\u9009\u9879\u65e0\u4e2d\u751f\u6709 D TPO 17 Symbiotic Relationships (\u6b63\u786e\u7387 32.38%) At times, it is actually possible to watch the effects of natural selection in host-parasite relationships. For example, Australia during the 1940 s was overrun by hundreds of millions of European rabbits. The rabbits destroyed huge expanses of Australia and threatened the sheep and cattle industries. In 1950, myxoma virus, a parasite that affects rabbits, was deliberately introduced into Australia to control the rabbit population. Spread rapidly by mosquitoes, the virus devastated the rabbit population. The virus was less deadly to the offspring of surviving rabbits, however, and it caused less and less harm over the years. Apparently, genotypes (the genetic make-up of an organism) in the rabbit population were selected that were better able to resist the parasite. Meanwhile, the deadliest strains of the virus perished with their hosts as natural selection favored strains that could infect hosts but not kill them.\u3010D\u3011 Thus, natural selection stabilized this host-parasite relationship. Which of the following can be concluded from the discussion in paragraph 3 about the Australian rabbit population ? A. Human intervention may alter the host, the parasite and the relationship between them. B. The risks of introducing outside organisms into a biological community are not worth the benefits. C. Humans should not interfere in host-parasite relationships. D. Organisms that survive a parasitic attack do so in spite of the natural selection process. \u9009\u62e9\uff1aD - A\u548cD\u4e4b\u95f4\u7ea0\u7ed3 A\u3001B\u3001C\u9009\u9879\u65e0\u4e2d\u751f\u6709 A TPO 6 Infantile Amnesia (\u6b63\u786e\u738727.5%) Three other explanations seem more promising. One involves physiological changes relevant to memory. Maturation of the frontal lobes of the brain continues throughout early childhood, and this part of the brain may be critical for remembering particular episodes in ways that can be retrieved later. Demonstrations of infants\u2019 and toddlers\u2019 long-term memory have involved their repeating motor activities that they had seen or done earlier\u3010B\u3011 , such as reaching in the dark for objects, putting a bottle in a doll\u2019s mouth, or pulling apart two pieces of a toy. The brain\u2019s level of physiological maturation may support these types of memories, but not ones requiring explicit verbal descriptions.\u3010D\u3011 What does paragraph 3 suggest about long-term memory in children ? A. Maturation of the frontal lobes of the brain is important for the long-term memory of motor activities but not verbal descriptions. B. Young children may form long-term memories of actions they see earlier than of things they hear or are told. C. Young children have better long-term recall of short verbal exchanges than of long ones. D. Children\u2019s long-term recall of motor activities increases when such activities are accompanied by explicit verbal descriptions \u9009\u62e9\uff1aB - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 C\u9009\u9879short\u65e0\u4e2d\u751f\u6709\uff1bD\u9009\u9879increase\u65e0\u4e2d\u751f\u6709\uff1bA\u9009\u9879\u610f\u601d\u9519\u8bef","title":"\u63a8\u65ad\u9898"},{"location":"English/reading-hw7/","text":"\u4fee\u8f9e\u76ee\u7684\u9898 \u00b6 \u505a\u9898\u60c5\u51b5 1 2 3 4 5 6 7 8 9 10 \u505a\u9898\u60c5\u51b5 A C B A D B C D C B 11 12 13 14 15 16 17 18 19 20 \u505a\u9898\u60c5\u51b5 B C A B C BA A B A C C A C A TPO 24 Lake Water (\u6b63\u786e\u7387 97.56%) Residence times vary enormously . They range from a few days for small lakes up to several hundred years for large ones ; Lake Tahoe, in California, has a residence time of 700 years. The residence times for the Great Lakes of North America, namely, Lakes Superior, Michigan, Huron, Erie, and Ontario, are, respectively, 190,100,22,2.5, and 6 years. Lake Erie\u2019s is the lowest: although its area is larger than Lake Ontario\u2019 s, its volume is less than one-third as great because it is so shallow-less than 20 meters on average. Why does the author discuss the Great Lakes in paragraph 5? A. To demonstrate the extent to which residence times vary from lake to lake B. To illustrate how residence times are calculated for specific lakes C. To argue that the residence time of a lake increases with area D. To emphasize that Lake Tahoe\u2019s residence time is unusually long \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA B\u9009\u9879\u4e2d\u7684how\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u4e2d\u7684increases with area\u65e0\u4e2d\u751f\u6709 D\u9009\u9879\u4e2d\u7684unusually\u65e0\u4e2d\u751f\u6709 TPO 34 The Development of Steam Power (\u6b63\u786e\u7387 97.09%) The economic consequence of these technical innovations in steam power was a great boom in the British iron industry. In 1740 annual British iron production was only 17,000 tons, but by 1844, with the spread of coke smelting and the impact of Cort\u2019s inventions, it had increased to 3,000,000 tons. This was a truly amazing expansion. Once scarce and expensive, iron became cheap, basic, and indispensable to the economy. In paragraph 6, why does the author compare British iron production in 1740 with that of 1844 ? A. To contrast the amounts of iron needed in Britain in two different centuries B. To illustrate how easy it was to make money using Cort\u2019s invention C. To demonstrate the tremendous growth of the iron industry in Britain D. To demonstrate how i nexpensive coal had become \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC - the tremendous growth \u5bf9\u5e94\u539f\u6587 a great boom \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 29 Competition (\u6b63\u786e\u7387 96.89%) When several individuals of the same species or of several different species depend on the same limited resource, a situation may arise that is referred to as competition. The existence of competition has been long known to naturalists; its effects were described by Darwin in considerable detail. Competition among individuals of the same species (intraspecies competition), one of the major mechanisms of natural selection, is the concern of evolutionary biology. Competition among the individuals of different species (interspecies competition) is a major concern of ecology. It is one of the factors controlling the size of competing populations, and extreme cases it may lead to the extinction of one of the competing species.\u3010B\u3011 This was described by Darwin for indigenous New Zealand species of animals and plants , which dies out when competing species from Europe were introduced. In paragraph 1, why does the author mention what happened in New Zealand ? A. To indicate that Darwin understood the importance of competition B. To illustrate that competition can lead to the extinction of species C. To identify where the idea of competition among species first arose D. To argue against the idea that the process of selection is a natural occurrence \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB \u5176\u4f59\u9009\u9879\u539f\u6587\u6ca1\u6709\u63d0\u5230 TPO 25 The Surface of Mars (\u6b63\u786e\u7387 96.70%) The great height of Martian volcanoes is a direct consequence of the planet\u2019s low surface gravity. As lava flows and spreads to form a shield volcano, the volcano\u2019s eventual height depends on the new mountain\u2019s ability to support its own weight. The lower the gravity, the lesser the weight and the greater the height of the mountain . It is no accident that Maxwell Mons on Venus and the Hawaiian shield volcanoes on Earth rise to about the same height (about 10 kilometers) above their respective bases- Earth and Venus have similar surface gravity. Mars\u2019s surface gravity is only 40 percent that of Earth, so volcanoes rise roughly 2.5 times as high. Are the Martian shield volcanoes still active? Scientists have no direct evidence for recent or ongoing eruptions, but if these volcanoes were active as recently as 100 million years ago (an estimate of the time of last eruption based on the extent of impact catering on their slopes), some of them may still be at least intermittently active. Millions of years, though, may pass between eruptions. In paragraph 3, why does the author compare Maxwell Mons on Venus to the Hawaiian shield volcanoes on Earth ? A. To help explain the relationship between surface gravity and volcano height B. To explain why Mars\u2019s surface gravity is only 40 percent of Earth\u2019s C. To point out differences between the surface gravity of Earth and the surface gravity of Venus D. To argue that there are more similarities than differences between volcanoes on different planets \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA B\u9009\u9879\u7684Mars's\u9519\u8bef C\u9009\u9879\u7684differences\u9519\u8bef\uff0c\u5e94\u8be5\u662fsimilar\u7684 D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 29 Competition (\u6b63\u786e\u7387 96.11%) No serious competition exists when the major needed resources is in superabundant supply, as in most cases of the coexistence of herbivores (plant eaters). Furthermore, most species do not depend entirely on a single resource, if the major resource for a species becomes scarce, the species can usually shift to alternative resources. If more than one species is competing for a scarce resource, the competing species usually switch to different alternative resources. Competition is usually most severe among close relatives with similar demands on the environment. But it may also occur among totally unrelated forms that compete for the same resource, such as seed-eating rodents and ants. The effects of such competition are graphically demonstrated when all the animals or all the plants in an ecosystem come into competition, as happened 2 million years ago at the end of the Pliocene, when North South America became joined by the Isthmus of Panama . North and South American species migrating across the Isthmus now came into competition with each other. The result was the extermination of a large fraction of the South American mammals, which were apparently unable to withstand the competition from invading North American species--although added predation was also an important factor. In paragraph 2, why does the author talk about what happened as a result of North and South America becoming joined at the Isthmus of Panama ? A. To make the point that predation can have as much effect on species survival as competition does B. To show how the ability to switch to an alternative resource can give a species a competitive advantage C. To account for the current species composition of North and south America D. To provide an example of the serious effects of competition between unrelated species \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aD D\u9009\u9879\u7684unrelated species\u662f\u5982\u4f55\u5f97\u51fa\u7684\uff0c\u524d\u6587\u5417 TPO 13 Biological Clocks (\u6b63\u786e\u7387 95.73%) Survival and successful reproduction usually require the activities of animals to be coordinated with predictable events around them. Consequently, the timing and rhythms of biological functions must closely match periodic events like the solar day, the tides, the lunar cycle, and the seasons. The relations between animal activity and these periods, particularly for the daily rhythms, have been of such interest and importance that a huge amount of work has been done on them and the special research field of chronobiology has emerged. Normally, the constantly changing levels of an animal's activity\u2014sleeping, feeding, moving, reproducing, metabolizing, and producing enzymes and hormones, for example\u2014are well coordinated with environmental rhythms, but the key question is whether the animal's schedule is driven by external cues, such as sunrise or sunset, or is instead dependent somehow on internal timers that themselves generate the observed biological rhythms. Almost universally, biologists accept the idea that all eukaryotes (a category that includes most organisms except bacteria and certain algae) have internal clocks. By isolating organisms completely from external periodic cues, biologists learned that organisms have internal clocks\u3010B\u3011 . For instance , apparently normal daily periods of biological activity were maintained for about a week by the fungus Neurospora when it was intentionally isolated from all geophysical timing cues while orbiting in a space shuttle. The continuation of biological rhythms in an organism without external cues attests to its having an internal clock. In paragraph 1, the experiment on the fungus Neurospora is mentioned to illustrate A. the existence of weekly periods of activity as well as daily ones B. the finding of evidence that organisms have internal clocks C. the effect of space on the internal clocks of organisms D. the isolation of one part of an organism's cycle for study \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 8 The Rise of Teotihuac\u00e1n (\u6b63\u786e\u7387 95.51%) The picture of Teotihuac\u00e1n that emerges is a classic picture of positive feedback among obsidian mining and working, trade, population growth, irrigation, and religious tourism. The thriving obsidian operation , for example , would necessitate more miners, additional manufacturers of obsidian tools, and additional traders to carry the goods to new markets. All this led to increased wealth, which in turn would attract more immigrants to Teotihuac\u00e1n. The growing power of the elite, who controlled the economy, would give them the means to physically coerce people to move to Teotihuac\u00e1n and serve as additions to the labor force. More irrigation works would have to be built to feed the growing population, and this resulted in more power and wealth for the elite. In paragraph 6, the author discusses the \u201cThe thriving obsidian operation\u201d in order to A. explain why manufacturing was the main industry of Teotihuac\u00e1n B. give an example of an industry that took very little time to develop in Teotihuac\u00e1n C. illustrate how several factors influenced each other to make Teotihuac\u00e1n a powerful and wealthy city D. explain how a successful industry can be a source of wealth and a source of conflict at the same time \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC - several factors\u6307\u4ee3\u7684\u662f\u539f\u53e5\u5217\u4e3e\u7684obsidian mining\u3001working\u7b49 A\u9009\u9879\u4e2d\u7684main\u65e0\u4e2d\u751f\u6709 B\u9009\u9879\u4e2dlittle time\u65e0\u4e2d\u751f\u6709 D\u9009\u9879\u4e2d\u7684wealth\u548cconflict\u6ca1\u6709\u4f53\u73b0 TPO 5 Minerals and Plants (\u6b63\u786e\u7387 95.24%) Scientists have known for some time that certain plants, called hyper accumulators, can concentrate minerals at levels a hundredfold or greater than normal.\u3010A\u3011 A survey of known hyper accumulators identified that 75 percent of them amassed nickel, cobalt, copper, zinc, manganese, lead, and cadmium are other minerals of choice. Hyper accumulators run the entire range of the plant world. They may be herbs, shrubs, or trees . Many members of the mustard family, spurge family, legume family, and grass family are top hyper accumulators. Many are found in tropical and subtropical areas of the world, where accumulation of high concentrations of metals may afford some protection against plant-eating insects and microbial pathogens. Why does the author mention herbs, shrubs, and trees ? A. To provide examples of plant types that cannot tolerate high levels of harmful minerals. B. To show why so many plants are hyper accumulators. C. To help explain why hyper accumulators can be found in so many different places . D. To emphasize that hyper accumulators occur in a wide range of plant types . \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aD \u7684\u610f\u601d\uff1ahyper accumulators\u904d\u5e03\u6574\u4e2a\u690d\u7269\u4e16\u754c A\u9009\u9879cannot tolerate\u9519\u8bef B\u9009\u9879\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u7684\u610f\u601d\u662f\u89e3\u91ca\u4e3a\u4ec0\u4e48hyper accumulators\u53ef\u4ee5\u5728\u8fd9\u4e48\u591a\u4e0d\u540c\u7684\u5730\u65b9\u627e\u5230 D\u9009\u9879\u7684\u610f\u601d\u662f\u5f3a\u8c03hyper accumulators\u5e7f\u6cdb\u5b58\u5728\u4e8e\u690d\u7269\u7c7b\u578b\u4e2d TPO 3 Depletion of the Ogallala Aquifer (\u6b63\u786e\u7387 94.74%) The first wells were drilled into the Ogallala during the drought years of the early 1930\u2019s. The ensuing rapid expansion of irrigation agriculture, especially from the 1950\u2019s onward, transformed the economy of the region . More than 100,000 wells now tap the Ogallala. Modern irrigation devices, each capable of spraying 4.5 million liters of water a day, have produced a landscape dominated by geometric patterns of circular green islands of crops. Ogallala water has enabled the High Plains region to supply significant amounts of the cotton, sorghum, wheat, and corn grown in the United States . In addition , 40 percent of American grain-fed beef cattle are fattened here . In paragraph 3, why does the author provide the information that 40 percent of American cattle are fattened in the High Plains ? A. To suggest that crop cultivation is not the most important part of the economy of the High Plains B. To indicate that not all economic activity in the High Plains is dependent on irrigation C. To provide another example of how water from the Ogallala has transformed the economy of the High Plains D. To contrast cattle-fattening practices in the High Plains with those used in other region of the United States \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 15 A Warm-Blooded Turtle (\u6b63\u786e\u7387 94.20%) In a countercurrent exchange system , the blood vessels carrying cooled blood from the flippers run close enough to the blood vessels carrying warm blood from the body to pick up some heat from the warmer blood vessels; thus , the heat is transferred from the outgoing to the ingoing vessels before it reaches the flipper itself. This is the same arrangement found in an old-fashioned steam radiator , in which the coiled pipes pass heat back and forth as water courses through them. The leatherback is certainly not the only animal with such an arrangement; gulls have a countercurrent exchange in their legs. That is why a gull can stand on an ice floe without freezing. Why does the author mention old-fashioned steam radiator in the discussion of countercurrent exchange systems? A. To argue that a turtle\u2019s central heating system is not as highly evolved as that of other warmblooded animals B. To provide a useful comparison with which to illustrate how a countercurrent exchange system works C. To suggest that steam radiators were modeled after the sophisticated heating system of turtles D. To establish the importance of the movement of water in countercurrent exchange systems \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB A\u9009\u9879\u89c2\u70b9\u53e5\u6ca1\u6709\u4f53\u73b0turtle\u548cother warmblooded animals\u7684\u6bd4\u8f83 C\u9009\u9879\u5b9a\u4f4d\u53e5\u662fsame arrangement\uff0c\u5e76\u6ca1\u6709model after\u7684\u5173\u7cfb D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff0c\u5728\u539f\u6587\u4e2d\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u53e5\u5b50 TPO 17 Europe's Early Sea Trade with Asia (\u6b63\u786e\u7387 59.93%) The astrolabe had long been the primary instrument for navigation, having been introduced in the eleventh century. It operated by measuring the height of the Sun and the fixed stars: by calculating the angles created by these points, it determined the degree of latitude at which one stood (The problem of determining longitude, though, was not solved until the eighteenth century.) By the early thirteenth century. Western Europeans had also developed and put into use the magnetic compass , which helped when clouds obliterated both the Sun and the stars . Also beginning in the thirteenth century, there were new maps refined by precise calculations and the reports of sailors that made it possible to trace one's path with reasonable accuracy. Certain institutional and practical norms had become established as well. A maritime code known as the Consulate of the Sea which originated in the western Mediterranean region in the fourteenth century, won acceptance by a majority of sea goers as the normative code for maritime conduct; it defined such matters as the authority of a ship's officers, protocols of command, pay structures, the rights of sailors, and the rules of engagement when ships met one another on the sea-lanes. Thus by about 1400 the key elements were in place to enable Europe to begin its seaward adventure. Why does the author include the information that Western Europeans had developed and put into use the magnetic compass ? A. To provide an example of an instrument that was developed after caravels had begun traveling across oceans B. To provide an example of an improvement that resulted directly from the invention of the astrolabe C. To identify one of the technological advances that made sea trade with the East possible D. To explain how the problem of determining longitude was solved \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB - improvement\u5bf9\u5e94develop and put into use \u5176\u4ed6\u9009\u9879\u65e0\u4e2d\u751f\u6709 C B\u9519\u662f\u56e0\u4e3adirectly\u7684\u95ee\u9898\u5417 TPO 24 Moving into Pueblos (\u6b63\u786e\u7387 57.74%) Another important push was the onset of the Little Ice Age, a climatic phenomenon that led to cooler temperatures in the Northern Hemisphere. Although the height of the Little Ice Age was still around the corner, some evidence suggests that temperatures were falling during the thirteenth century. The environmental changes associated with this transition are not fully understood, but people living closest to the San Juan Mountains, to the northeast of Mesa Verde, were affected first. Growing food at these elevations is always difficult because of the short growing season . As the Little Ice Age progressed, farmers probably moved their fields to lower elevations, infringing on the lands of other farmers and pushing people together, thus contributing to the aggregations. Archaeologists identify a corresponding shift in populations toward the south and west toward Mesa Verde and away from higher elevations. Why does the author state that \u201cGrowing food at these elevations is always difficult because of the short growing season\u201d ? A. To explain why the higher elevations were always relatively sparsely populated B. To suggest that any worsening of conditions would have significant consequences C. To emphasize how resourceful the people growing food at these elevations were D. To argue that farming was not the primary source of food at high elevations \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 B\u9009\u9879\u7684any\u8fc7\u4e8e\u7edd\u5bf9 C\u9009\u9879\u9519\u8bef D\u9009\u9879\u65e0\u4e2d\u751f\u6709 B B\u9009\u9879\u4e2d\u7684conditions\u5bf9\u5e94\u89c2\u70b9\u53e5\u4e2d\u7684environmental changes A\u9009\u9879\u4e2d\u89c2\u70b9\u53e5\u6ca1\u6709\u63d0\u5230sparsely populated TPO 11 Begging by Nestlings (\u6b63\u786e\u738755.58%) As these experiments show, begging apparently provides a signal of need that parents use to make judgments about which offspring can benefit most from a feeding. But the question arises, why don't nestlings beg loudly when they aren't all that hungry? By doing so, they could possibly secure more food, which should result in more rapid growth or larger size, either of which is advantageous. The answer lies apparently not in the increased energy costs of exaggerated begging\u2014 such energy costs are small relative to the potential gain in calories \u2014 but rather in the damage that any successful cheater would do to its siblings, which share genes with one another. An individual's success in propagating his or her genes can be affected by more than just his or her own personal reproductive success. Because close relatives have many of the same genes, animals that harm their close relatives may in effect be destroying some of their own genes. Therefore, a begging nestling that secures food at the expense of its siblings might actually leave behind fewer copies of its genes overall than it might otherwise. In paragraph 6, the author compares the energy costs of vigorous begging with the potential gain in calories from such begging in order to A. explain why begging for food vigorously can lead to faster growth and increased size. B. explain how begging vigorously can increase an individual\u2019s chance of propagating its own genes C. point out a weakness in a possible explanation for why nestlings do not always beg vigorously D. argue that the benefits of vigorous begging outweigh any possible disadvantages \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC A\u9009\u9879\u89e3\u91ca\u4e3a\u4ec0\u4e48begging for food vigorously\u4f1a\u5bfc\u81f4\u66f4\u5feb\u7684\u751f\u957f\u548c\u66f4\u5927\u7684\u4f53\u79ef B\u9009\u9879\u89e3\u91cabegging vigorously\u662f\u5982\u4f55\u589e\u52a0\u4e2a\u4f53\u4f20\u64ad\u81ea\u8eab\u7684\u57fa\u56e0\u7684\u673a\u4f1a C\u9009\u9879\u6307\u51fa\u4e00\u4e2a\u5bf9\u4e8e\u4e3a\u4ec0\u4e48\u96cf\u9e1f\u4e0d\u603b\u662fbeg vigorously\u7684\u53ef\u80fd\u7684\u89e3\u91ca\u7684\u5f31\u70b9 D\u9009\u9879\u8ba4\u4e3avigorous begging\u7684\u597d\u5904\u5927\u4e8e\u4efb\u4f55\u53ef\u80fd\u7684\u574f\u5904 TPO 13 Biological Clocks (\u6b63\u786e\u7387 53.99%) When crayfish are kept continuously in the dark, even for four to five months, their compound eyes continue to adjust on a daily schedule for daytime and nighttime vision. Horseshoe crabs kept in the dark continuously for a year were found to maintain a persistent rhythm of brain activity that similarly adapts their eyes on a daily schedule for bright or for weak light. Like almost all daily cycles of animals deprived of environmental cues, those measured for the horseshoe crabs in these conditions were not exactly 24 hours. Such a rhythm whose period is approximately \u2014but not exactly\u2014a day is called circadian . For different individual horseshoe crabs, the circadian period ranged from 22.2 to 25.5 hours . A particular animal typically maintains its own characteristic cycle duration with great precision for many days. Indeed, stability of the biological clock's period is one of its major features, even when the organism's environment is subjected to considerable changes in factors, such as temperature, that would be expected to affect biological activity strongly. Further evidence for persistent internal rhythms appears when the usual external cycles are shifted\u2014either experimentally or by rapid eastwest travel over great distances. Typically, the animal's daily internally generated cycle of activity continues without change. As a result, its activities are shifted relative to the external cycle of the new environment. The disorienting effects of this mismatch between external time cues and internal schedules may persist, like our jet lag, for several days or weeks until certain cues such as the daylight/darkness cycle reset the organism's clock to synchronize with the daily rhythm of the new environment. In paragraph 2, why does the author mention that the period for different horseshoe crabs ranges from 22.2 to 25.5 hours ? A. To illustrate that an animal's internal clock seldom has a 24-hour cycle B. To argue that different horseshoe crabs will shift from daytime to nighttime vision at different times C. To illustrate the approximate range of the circadian rhythm of all animals D. To support the idea that external cues are the only factors affecting an animal's periodic behavior \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef B\u9009\u9879\u8ba4\u4e3a\u4e0d\u540c\u7684horseshoe crab\u4f1a\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u4ece\u767d\u5929\u7684\u89c6\u91ce\u8f6c\u5411\u665a\u4e0a\u7684\u89c6\u91ce C\u9009\u9879\u8bf4\u660e\u6240\u6709\u52a8\u7269\u7684circadian rhythm\u7684\u5927\u81f4\u8303\u56f4 - \u201c\u6240\u6709\u52a8\u7269\u201d\u9519\u8bef D\u9009\u9879\u65e0\u4e2d\u751f\u6709 A\u200b B\u9009\u9879\u662f\u4e0d\u662f\u7406\u89e3\u6709\u95ee\u9898 TPO 19 Discovering the Ice Ages (\u6b63\u786e\u7387 53.27%) Isotopic analysis of shells allowed geologists to measure another glacial effect. They could trace the growth and shrinkage of continental glaciers, even in parts of the ocean where there may have been no great change in temperature\u2014 around the equator, for example. The oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice. During glaciations, the lighter oxygen-16 has a greater tendency to evaporate from the ocean surface than the heavier oxygen-18 does. Thus, more of the heavy isotope is left behind in the ocean and absorbed by marine organisms. From this analysis of marine sediments, geologists have learned that there were many shorter, more regular cycles of glaciation and deglaciation than geologists had oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by the evaporation and is precipitated as snow to form glacial ice recognized from the glacial drift of the continents alone. In paragraph 5, why does the author include the information that the \u201coxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice\u201d ? A. To explain how scientists were able to calculate how frequently the continental ice sheets expanded and contracted B. To explain how scientists have determined that there was no great change in ocean temperatures at the equator during past glaciations C. To provide evidence that oxygen-16 has a greater tendency to evaporate than does oxygen-18 D. To suggest that equatorial marine organisms absorb more heavy isotopes than do marine organisms elsewhere \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 B\u3001C\u3001D\u9009\u9879\u90fd\u548c\u89c2\u70b9\u65e0\u5173 TPO 20 Fossil Preservation (\u6b63\u786e\u7387 52.13%) When one considers the many ways by which organisms are completely destroyed after death, it is remarkable that fossils are as common as they are. Attack by scavengers and bacteria, chemical decay, and destruction by erosion and other geologic agencies make the odds against preservation very high. However, the chances of escaping complete destruction are vastly improved if the organism happens to have a mineralized skeleton and dies in a place where it can be quickly buried by sediment. Both of these conditions are often found on the ocean floors , where shelled invertebrates (organisms without spines) flourish and are covered by the continuous rain of sedimentary particles. Although most fossils are found in marine sedimentary rocks, they also are found in terrestrial deposits left by streams and lakes. On occasion, animals and plants have been preserved after becoming immersed in tar or quicksand, trapped in ice or lave flows, or engulfed by rapid falls of volcanic ash. In paragraph 1, what is the author\u2019s purpose in providing examples of how organisms are destroyed ? A. To emphasize how surprising it is that so many fossils exist B. To introduce a new geologic theory of fossil preservation C. To explain why the fossil record until now has remained incomplete D. To compare how fossils form on land and in water \u611f\u89c9\u50cf\u662f\u5728\u95ee\u6574\u6bb5\u7684\u7528\u610f \u9009\u62e9\uff1aB A\u9009\u9879\u8fd9\u6bb5\u6587\u7ae0\u6ca1\u6709\u4f53\u73b0so many\u8fd9\u4e2a\u7a0b\u5ea6 C\u9009\u9879\u8fd9\u6bb5\u6587\u7ae0\u6ca1\u6709\u4f53\u73b0incomplete B\u3001D\u9009\u9879\u4e4b\u95f4\u7ea0\u7ed3\uff0c\u611f\u89c9D\u9009\u9879\u867d\u7136\u5168\u6bb5\u8bf4\u7684\u662f\u4e24\u79cd\u60c5\u51b5\u90fd\u51fa\u73b0\u5728ocean\u4e2d\uff0c\u6240\u4ee5\u662f\u4e0d\u662f\u4e5f\u9690\u542bland\u548cwater\u7684\u6bd4\u8f83 A\u200b \u4e0d\u77e5\u9053A\u9009\u9879\u5982\u4f55\u5f97\u51fa B\u9009\u9879\u9519\u5728\u4e0d\u662f\u4e00\u4e2anew theory\u5417\uff1f TPO 20 Fossil Preservation (\u6b63\u786e\u7387 50.26%) The term \u201cfossil\u201d often implies petrifaction, literally a transformation into stone. After the death of an organism, the soft tissue is ordinarily consumed by scavengers and bacteria. They empty shell of a snail or clam may be left behind, and if it is sufficiently durable and resistant to dissolution, it may remain basically unchanged for a long period of time. Indeed, unaltered the ocean changes as a great deal of water is withdrawn from it by evaporation and is oxygen isotope ratio of precipitated as snow to form glacial ice shells of marine invertebrates are known from deposits over 100 million years old. In many marine creatures, however , the skeleton is composed of mineral variety of calcium carbonate called aragonite . Although aragonite has the same composition as the more familiar mineral known as calcite, it has a different crystal form, is relatively unstable, and in time changes to the more stable calcite. Why does the author mention \u201caragonite\u201d in the passage? A. To emphasize that some fossils remain unaltered for millions of years. B. To contrast fossil formation in organisms with soft tissue and in organisms with hard shells C. To explain that some marine organisms must undergo chemical changes in order to fossilize D. To explain why fossil shells are more likely to survive than are fossil skeletons \u5f80\u524d\u627e\u6ca1\u770b\u5230\u6709\u6548\u4fe1\u606f\uff0c\u6240\u4ee5\u5c31\u5f80\u540e\u627e\u4e86 \u9009\u62e9\uff1aC A\u9009\u9879remain unaltered\u9519\u8bef B\u3001D\u9009\u9879\u89c2\u70b9\u53e5\u6ca1\u6709\u4f53\u73b0 TPO 18 Lightning (\u6b63\u786e\u7387 44.12%) Most lightning takes place within a cloud when the charge separation within the cloud collapses. However, as the storm cloud develops, the ground beneath the cloud becomes positively charged and lightning can take place in the form of an electrical discharge between the negative charge of the cloud and the positively charged ground. Lightning that strikes the ground is the most likely to be destructive , so even though it represents only 20 percent of all lightning, it has received a lot of scientific attention . The author remarks that \u201cLightning that strikes the ground is the most likely to be destructive\u201d in order to explain why A. this form of lightning has been investigated so much B. this form of lightning is not as common as lightning within a cloud C. scientific understanding of this form of lightning is important D. the buildup of positive charge on the ground beneath a storm cloud can have serious consequences \u56e0\u679c\u5173\u7cfb \u91cd\u70b9\u5728\u7ed3\u679c\uff0c\u6240\u4ee5\u5f80\u540e\u770b \u9009\u62e9\uff1aC - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 A\u200b \u539f\u89c2\u70b9\u53e5\u7684\u610f\u601d\u662f\u83b7\u5f97\u4e86\u5f88\u591a\u79d1\u5b66\u7684\u5173\u6ce8 - scientific attention\u5bf9\u5e94investigated C\u4e2d\u7684important\u9519\u8bef\uff1f TPO 23 Rock Art of the Australia Aborigines (\u6b63\u786e\u7387 40.43%) In the 1970s when the study of Australian archaeology was in an exciting phase of development, with the great antiquity of rock art becoming clear. Lesley Maynard, the archaeologist who coined the phrase \u201cPanaramitee style,\u201d suggested that a sequence could be determined for Australian rock art, in which a geometric style gave way to a simple figurative style (outlines of figures and animals), followed by a range of complex figurative styles that, unlike the pan-Australian geometric tradition tended to much greater regional diversity. While accepting that this sequence fits the archaeological profile of those sites, which were occupied continuously over many thousands of years a number of writers have warned that the underlying assumption of such a sequence\u2014a development from the simple and the geometric to the complex and naturalistic\u2014obscures the cultural continuities in Aboriginal Australia, in which geometric symbolism remains fundamentally important. In this context the simplicity of a geometric motif may be more apparent than real. Motifs of seeming simplicity can encode complex meanings in Aboriginal Australia . And has not twentieth-century art shown that naturalism does not necessarily follow abstraction in some kind of predetermine sequence ? In paragraph 5, the author indicates that twentieth century art has shown that naturalism does not necessarily follow abstraction in some kind of predetermined sequence in order to A. emphasize that it may not be possible to determine what the figures in ancient rock art represent B. suggest a reply to those who have questioned Maynard\u2019s interpretation of the sequence of Australian rock art C. provide a counterexample to Maynard\u2019s interpretation of the sequence of Australian rock art D. indicate that twentieth century art is more advanced than ancient rock art \u9009\u62e9\uff1aC A\u9009\u9879\u5f3a\u8c03\u4e86\u51b3\u5b9a\u53e4\u4ee3\u5ca9\u77f3\u827a\u672f\u4e2d\u7684\u4eba\u7269\u4ee3\u8868\u4e86\u4ec0\u4e48\u53ef\u80fd\u662f\u4e0d\u53ef\u80fd\u7684 B\u9009\u9879\u7ed9\u90a3\u4e9b\u8d28\u7591Maynard\u5bf9\u4e8e\u6fb3\u5927\u5229\u4e9a\u6f14\u5ca9\u77f3\u827a\u672f\u5e8f\u5217\u7684\u89e3\u91ca\u7684\u4eba\u4e00\u4e2a\u56de\u590d C\u9009\u9879\u7ed9Maynard\u5bf9\u4e8e\u6fb3\u5927\u5229\u4e9a\u6f14\u5ca9\u77f3\u827a\u672f\u5e8f\u5217\u7684\u89e3\u91ca\u63d0\u51fa\u4e86\u53cd\u4f8b D\u9009\u9879\u7684more advanced\u7684\u5bf9\u6bd4\u5728\u539f\u6587\u4e2d\u6ca1\u6709\u4f53\u73b0 TPO 33 Railroads and Commercial Agriculture in Nineteenth-Century United States (\u6b63\u786e\u7387 37.49%) As railroad lines fanned out from Chicago, farmers began to acquire open prairie land in Illinois and then lowa, putting the fertile, deep black soil into production. Commercial agriculture transformed this remarkable treeless environment. To settlers accustomed to eastern woodlands, the thousands of square miles of tall grass were an awesome sight. Indian grass, Canada wild rye, and native big bluestem all grew higher than a person . Because eastern plows could not penetrate the densely tangled roots of prairie grass, the earliest settlers erected farms along the boundary separating the forest from the prairie. In 1837, however, John Deere patented a sharp-cutting steel plow that sliced through the sod without soil sticking to the blade. Cyrus McCormic refined a mechanical reaper that harvested fourteen times more wheat with the same amount of labor. By the 1850s McCormick was selling 1,000 reapers a year and could not keep up with demand, while Deere turned out 10,000 plows annually. Why does the author point out that \u201cIndian grass, Canada wild rye, and native big bluestem all grew higher than a person\u201d ? A. to provide a reason why people from the eastern woodlands of the United States were impressed when they saw the prairie B. to identified an obstacles to the development of the railroad lines fanning out from Chicago C. to explain why the transformation of the prairies by commercial agriculture was so remarkable D. to provide evidence supporting the claim that the prairies had fertile, deep black soil \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA A\u9009\u9879\u7ed9\u6765\u81ea\u7f8e\u56fd\u4e1c\u90e8woodlands\u7684\u4eba\u4eec\u770b\u5230prairie\u65f6\u5f88\u9707\u60ca\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7406\u7531 B\u9009\u9879obstacle\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5546\u4e1a\u5316\u519c\u4e1a\u4f7f\u5f97prairies\u7684\u8f6c\u53d8\u53ef\u4ee5\u8fd9\u4e48\u663e\u8457 D\u9009\u9879\u548c\u89c2\u70b9\u53e5\u65e0\u5173 A\u3001C\u4e4b\u95f4\u7ea0\u7ed3\uff0c\u5224\u65ad\u5230\u5e95\u54ea\u4e2a\u66f4\u5207\u5408\u89c2\u70b9\u53e5","title":"Reading-Homework7"},{"location":"English/reading-hw7/#_1","text":"\u505a\u9898\u60c5\u51b5 1 2 3 4 5 6 7 8 9 10 \u505a\u9898\u60c5\u51b5 A C B A D B C D C B 11 12 13 14 15 16 17 18 19 20 \u505a\u9898\u60c5\u51b5 B C A B C BA A B A C C A C A TPO 24 Lake Water (\u6b63\u786e\u7387 97.56%) Residence times vary enormously . They range from a few days for small lakes up to several hundred years for large ones ; Lake Tahoe, in California, has a residence time of 700 years. The residence times for the Great Lakes of North America, namely, Lakes Superior, Michigan, Huron, Erie, and Ontario, are, respectively, 190,100,22,2.5, and 6 years. Lake Erie\u2019s is the lowest: although its area is larger than Lake Ontario\u2019 s, its volume is less than one-third as great because it is so shallow-less than 20 meters on average. Why does the author discuss the Great Lakes in paragraph 5? A. To demonstrate the extent to which residence times vary from lake to lake B. To illustrate how residence times are calculated for specific lakes C. To argue that the residence time of a lake increases with area D. To emphasize that Lake Tahoe\u2019s residence time is unusually long \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA B\u9009\u9879\u4e2d\u7684how\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u4e2d\u7684increases with area\u65e0\u4e2d\u751f\u6709 D\u9009\u9879\u4e2d\u7684unusually\u65e0\u4e2d\u751f\u6709 TPO 34 The Development of Steam Power (\u6b63\u786e\u7387 97.09%) The economic consequence of these technical innovations in steam power was a great boom in the British iron industry. In 1740 annual British iron production was only 17,000 tons, but by 1844, with the spread of coke smelting and the impact of Cort\u2019s inventions, it had increased to 3,000,000 tons. This was a truly amazing expansion. Once scarce and expensive, iron became cheap, basic, and indispensable to the economy. In paragraph 6, why does the author compare British iron production in 1740 with that of 1844 ? A. To contrast the amounts of iron needed in Britain in two different centuries B. To illustrate how easy it was to make money using Cort\u2019s invention C. To demonstrate the tremendous growth of the iron industry in Britain D. To demonstrate how i nexpensive coal had become \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC - the tremendous growth \u5bf9\u5e94\u539f\u6587 a great boom \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 29 Competition (\u6b63\u786e\u7387 96.89%) When several individuals of the same species or of several different species depend on the same limited resource, a situation may arise that is referred to as competition. The existence of competition has been long known to naturalists; its effects were described by Darwin in considerable detail. Competition among individuals of the same species (intraspecies competition), one of the major mechanisms of natural selection, is the concern of evolutionary biology. Competition among the individuals of different species (interspecies competition) is a major concern of ecology. It is one of the factors controlling the size of competing populations, and extreme cases it may lead to the extinction of one of the competing species.\u3010B\u3011 This was described by Darwin for indigenous New Zealand species of animals and plants , which dies out when competing species from Europe were introduced. In paragraph 1, why does the author mention what happened in New Zealand ? A. To indicate that Darwin understood the importance of competition B. To illustrate that competition can lead to the extinction of species C. To identify where the idea of competition among species first arose D. To argue against the idea that the process of selection is a natural occurrence \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB \u5176\u4f59\u9009\u9879\u539f\u6587\u6ca1\u6709\u63d0\u5230 TPO 25 The Surface of Mars (\u6b63\u786e\u7387 96.70%) The great height of Martian volcanoes is a direct consequence of the planet\u2019s low surface gravity. As lava flows and spreads to form a shield volcano, the volcano\u2019s eventual height depends on the new mountain\u2019s ability to support its own weight. The lower the gravity, the lesser the weight and the greater the height of the mountain . It is no accident that Maxwell Mons on Venus and the Hawaiian shield volcanoes on Earth rise to about the same height (about 10 kilometers) above their respective bases- Earth and Venus have similar surface gravity. Mars\u2019s surface gravity is only 40 percent that of Earth, so volcanoes rise roughly 2.5 times as high. Are the Martian shield volcanoes still active? Scientists have no direct evidence for recent or ongoing eruptions, but if these volcanoes were active as recently as 100 million years ago (an estimate of the time of last eruption based on the extent of impact catering on their slopes), some of them may still be at least intermittently active. Millions of years, though, may pass between eruptions. In paragraph 3, why does the author compare Maxwell Mons on Venus to the Hawaiian shield volcanoes on Earth ? A. To help explain the relationship between surface gravity and volcano height B. To explain why Mars\u2019s surface gravity is only 40 percent of Earth\u2019s C. To point out differences between the surface gravity of Earth and the surface gravity of Venus D. To argue that there are more similarities than differences between volcanoes on different planets \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA B\u9009\u9879\u7684Mars's\u9519\u8bef C\u9009\u9879\u7684differences\u9519\u8bef\uff0c\u5e94\u8be5\u662fsimilar\u7684 D\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 29 Competition (\u6b63\u786e\u7387 96.11%) No serious competition exists when the major needed resources is in superabundant supply, as in most cases of the coexistence of herbivores (plant eaters). Furthermore, most species do not depend entirely on a single resource, if the major resource for a species becomes scarce, the species can usually shift to alternative resources. If more than one species is competing for a scarce resource, the competing species usually switch to different alternative resources. Competition is usually most severe among close relatives with similar demands on the environment. But it may also occur among totally unrelated forms that compete for the same resource, such as seed-eating rodents and ants. The effects of such competition are graphically demonstrated when all the animals or all the plants in an ecosystem come into competition, as happened 2 million years ago at the end of the Pliocene, when North South America became joined by the Isthmus of Panama . North and South American species migrating across the Isthmus now came into competition with each other. The result was the extermination of a large fraction of the South American mammals, which were apparently unable to withstand the competition from invading North American species--although added predation was also an important factor. In paragraph 2, why does the author talk about what happened as a result of North and South America becoming joined at the Isthmus of Panama ? A. To make the point that predation can have as much effect on species survival as competition does B. To show how the ability to switch to an alternative resource can give a species a competitive advantage C. To account for the current species composition of North and south America D. To provide an example of the serious effects of competition between unrelated species \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aD D\u9009\u9879\u7684unrelated species\u662f\u5982\u4f55\u5f97\u51fa\u7684\uff0c\u524d\u6587\u5417 TPO 13 Biological Clocks (\u6b63\u786e\u7387 95.73%) Survival and successful reproduction usually require the activities of animals to be coordinated with predictable events around them. Consequently, the timing and rhythms of biological functions must closely match periodic events like the solar day, the tides, the lunar cycle, and the seasons. The relations between animal activity and these periods, particularly for the daily rhythms, have been of such interest and importance that a huge amount of work has been done on them and the special research field of chronobiology has emerged. Normally, the constantly changing levels of an animal's activity\u2014sleeping, feeding, moving, reproducing, metabolizing, and producing enzymes and hormones, for example\u2014are well coordinated with environmental rhythms, but the key question is whether the animal's schedule is driven by external cues, such as sunrise or sunset, or is instead dependent somehow on internal timers that themselves generate the observed biological rhythms. Almost universally, biologists accept the idea that all eukaryotes (a category that includes most organisms except bacteria and certain algae) have internal clocks. By isolating organisms completely from external periodic cues, biologists learned that organisms have internal clocks\u3010B\u3011 . For instance , apparently normal daily periods of biological activity were maintained for about a week by the fungus Neurospora when it was intentionally isolated from all geophysical timing cues while orbiting in a space shuttle. The continuation of biological rhythms in an organism without external cues attests to its having an internal clock. In paragraph 1, the experiment on the fungus Neurospora is mentioned to illustrate A. the existence of weekly periods of activity as well as daily ones B. the finding of evidence that organisms have internal clocks C. the effect of space on the internal clocks of organisms D. the isolation of one part of an organism's cycle for study \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 8 The Rise of Teotihuac\u00e1n (\u6b63\u786e\u7387 95.51%) The picture of Teotihuac\u00e1n that emerges is a classic picture of positive feedback among obsidian mining and working, trade, population growth, irrigation, and religious tourism. The thriving obsidian operation , for example , would necessitate more miners, additional manufacturers of obsidian tools, and additional traders to carry the goods to new markets. All this led to increased wealth, which in turn would attract more immigrants to Teotihuac\u00e1n. The growing power of the elite, who controlled the economy, would give them the means to physically coerce people to move to Teotihuac\u00e1n and serve as additions to the labor force. More irrigation works would have to be built to feed the growing population, and this resulted in more power and wealth for the elite. In paragraph 6, the author discusses the \u201cThe thriving obsidian operation\u201d in order to A. explain why manufacturing was the main industry of Teotihuac\u00e1n B. give an example of an industry that took very little time to develop in Teotihuac\u00e1n C. illustrate how several factors influenced each other to make Teotihuac\u00e1n a powerful and wealthy city D. explain how a successful industry can be a source of wealth and a source of conflict at the same time \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC - several factors\u6307\u4ee3\u7684\u662f\u539f\u53e5\u5217\u4e3e\u7684obsidian mining\u3001working\u7b49 A\u9009\u9879\u4e2d\u7684main\u65e0\u4e2d\u751f\u6709 B\u9009\u9879\u4e2dlittle time\u65e0\u4e2d\u751f\u6709 D\u9009\u9879\u4e2d\u7684wealth\u548cconflict\u6ca1\u6709\u4f53\u73b0 TPO 5 Minerals and Plants (\u6b63\u786e\u7387 95.24%) Scientists have known for some time that certain plants, called hyper accumulators, can concentrate minerals at levels a hundredfold or greater than normal.\u3010A\u3011 A survey of known hyper accumulators identified that 75 percent of them amassed nickel, cobalt, copper, zinc, manganese, lead, and cadmium are other minerals of choice. Hyper accumulators run the entire range of the plant world. They may be herbs, shrubs, or trees . Many members of the mustard family, spurge family, legume family, and grass family are top hyper accumulators. Many are found in tropical and subtropical areas of the world, where accumulation of high concentrations of metals may afford some protection against plant-eating insects and microbial pathogens. Why does the author mention herbs, shrubs, and trees ? A. To provide examples of plant types that cannot tolerate high levels of harmful minerals. B. To show why so many plants are hyper accumulators. C. To help explain why hyper accumulators can be found in so many different places . D. To emphasize that hyper accumulators occur in a wide range of plant types . \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aD \u7684\u610f\u601d\uff1ahyper accumulators\u904d\u5e03\u6574\u4e2a\u690d\u7269\u4e16\u754c A\u9009\u9879cannot tolerate\u9519\u8bef B\u9009\u9879\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u7684\u610f\u601d\u662f\u89e3\u91ca\u4e3a\u4ec0\u4e48hyper accumulators\u53ef\u4ee5\u5728\u8fd9\u4e48\u591a\u4e0d\u540c\u7684\u5730\u65b9\u627e\u5230 D\u9009\u9879\u7684\u610f\u601d\u662f\u5f3a\u8c03hyper accumulators\u5e7f\u6cdb\u5b58\u5728\u4e8e\u690d\u7269\u7c7b\u578b\u4e2d TPO 3 Depletion of the Ogallala Aquifer (\u6b63\u786e\u7387 94.74%) The first wells were drilled into the Ogallala during the drought years of the early 1930\u2019s. The ensuing rapid expansion of irrigation agriculture, especially from the 1950\u2019s onward, transformed the economy of the region . More than 100,000 wells now tap the Ogallala. Modern irrigation devices, each capable of spraying 4.5 million liters of water a day, have produced a landscape dominated by geometric patterns of circular green islands of crops. Ogallala water has enabled the High Plains region to supply significant amounts of the cotton, sorghum, wheat, and corn grown in the United States . In addition , 40 percent of American grain-fed beef cattle are fattened here . In paragraph 3, why does the author provide the information that 40 percent of American cattle are fattened in the High Plains ? A. To suggest that crop cultivation is not the most important part of the economy of the High Plains B. To indicate that not all economic activity in the High Plains is dependent on irrigation C. To provide another example of how water from the Ogallala has transformed the economy of the High Plains D. To contrast cattle-fattening practices in the High Plains with those used in other region of the United States \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC \u5176\u4f59\u9009\u9879\u65e0\u4e2d\u751f\u6709 TPO 15 A Warm-Blooded Turtle (\u6b63\u786e\u7387 94.20%) In a countercurrent exchange system , the blood vessels carrying cooled blood from the flippers run close enough to the blood vessels carrying warm blood from the body to pick up some heat from the warmer blood vessels; thus , the heat is transferred from the outgoing to the ingoing vessels before it reaches the flipper itself. This is the same arrangement found in an old-fashioned steam radiator , in which the coiled pipes pass heat back and forth as water courses through them. The leatherback is certainly not the only animal with such an arrangement; gulls have a countercurrent exchange in their legs. That is why a gull can stand on an ice floe without freezing. Why does the author mention old-fashioned steam radiator in the discussion of countercurrent exchange systems? A. To argue that a turtle\u2019s central heating system is not as highly evolved as that of other warmblooded animals B. To provide a useful comparison with which to illustrate how a countercurrent exchange system works C. To suggest that steam radiators were modeled after the sophisticated heating system of turtles D. To establish the importance of the movement of water in countercurrent exchange systems \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB A\u9009\u9879\u89c2\u70b9\u53e5\u6ca1\u6709\u4f53\u73b0turtle\u548cother warmblooded animals\u7684\u6bd4\u8f83 C\u9009\u9879\u5b9a\u4f4d\u53e5\u662fsame arrangement\uff0c\u5e76\u6ca1\u6709model after\u7684\u5173\u7cfb D\u9009\u9879\u65e0\u4e2d\u751f\u6709\uff0c\u5728\u539f\u6587\u4e2d\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u53e5\u5b50 TPO 17 Europe's Early Sea Trade with Asia (\u6b63\u786e\u7387 59.93%) The astrolabe had long been the primary instrument for navigation, having been introduced in the eleventh century. It operated by measuring the height of the Sun and the fixed stars: by calculating the angles created by these points, it determined the degree of latitude at which one stood (The problem of determining longitude, though, was not solved until the eighteenth century.) By the early thirteenth century. Western Europeans had also developed and put into use the magnetic compass , which helped when clouds obliterated both the Sun and the stars . Also beginning in the thirteenth century, there were new maps refined by precise calculations and the reports of sailors that made it possible to trace one's path with reasonable accuracy. Certain institutional and practical norms had become established as well. A maritime code known as the Consulate of the Sea which originated in the western Mediterranean region in the fourteenth century, won acceptance by a majority of sea goers as the normative code for maritime conduct; it defined such matters as the authority of a ship's officers, protocols of command, pay structures, the rights of sailors, and the rules of engagement when ships met one another on the sea-lanes. Thus by about 1400 the key elements were in place to enable Europe to begin its seaward adventure. Why does the author include the information that Western Europeans had developed and put into use the magnetic compass ? A. To provide an example of an instrument that was developed after caravels had begun traveling across oceans B. To provide an example of an improvement that resulted directly from the invention of the astrolabe C. To identify one of the technological advances that made sea trade with the East possible D. To explain how the problem of determining longitude was solved \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB - improvement\u5bf9\u5e94develop and put into use \u5176\u4ed6\u9009\u9879\u65e0\u4e2d\u751f\u6709 C B\u9519\u662f\u56e0\u4e3adirectly\u7684\u95ee\u9898\u5417 TPO 24 Moving into Pueblos (\u6b63\u786e\u7387 57.74%) Another important push was the onset of the Little Ice Age, a climatic phenomenon that led to cooler temperatures in the Northern Hemisphere. Although the height of the Little Ice Age was still around the corner, some evidence suggests that temperatures were falling during the thirteenth century. The environmental changes associated with this transition are not fully understood, but people living closest to the San Juan Mountains, to the northeast of Mesa Verde, were affected first. Growing food at these elevations is always difficult because of the short growing season . As the Little Ice Age progressed, farmers probably moved their fields to lower elevations, infringing on the lands of other farmers and pushing people together, thus contributing to the aggregations. Archaeologists identify a corresponding shift in populations toward the south and west toward Mesa Verde and away from higher elevations. Why does the author state that \u201cGrowing food at these elevations is always difficult because of the short growing season\u201d ? A. To explain why the higher elevations were always relatively sparsely populated B. To suggest that any worsening of conditions would have significant consequences C. To emphasize how resourceful the people growing food at these elevations were D. To argue that farming was not the primary source of food at high elevations \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 B\u9009\u9879\u7684any\u8fc7\u4e8e\u7edd\u5bf9 C\u9009\u9879\u9519\u8bef D\u9009\u9879\u65e0\u4e2d\u751f\u6709 B B\u9009\u9879\u4e2d\u7684conditions\u5bf9\u5e94\u89c2\u70b9\u53e5\u4e2d\u7684environmental changes A\u9009\u9879\u4e2d\u89c2\u70b9\u53e5\u6ca1\u6709\u63d0\u5230sparsely populated TPO 11 Begging by Nestlings (\u6b63\u786e\u738755.58%) As these experiments show, begging apparently provides a signal of need that parents use to make judgments about which offspring can benefit most from a feeding. But the question arises, why don't nestlings beg loudly when they aren't all that hungry? By doing so, they could possibly secure more food, which should result in more rapid growth or larger size, either of which is advantageous. The answer lies apparently not in the increased energy costs of exaggerated begging\u2014 such energy costs are small relative to the potential gain in calories \u2014 but rather in the damage that any successful cheater would do to its siblings, which share genes with one another. An individual's success in propagating his or her genes can be affected by more than just his or her own personal reproductive success. Because close relatives have many of the same genes, animals that harm their close relatives may in effect be destroying some of their own genes. Therefore, a begging nestling that secures food at the expense of its siblings might actually leave behind fewer copies of its genes overall than it might otherwise. In paragraph 6, the author compares the energy costs of vigorous begging with the potential gain in calories from such begging in order to A. explain why begging for food vigorously can lead to faster growth and increased size. B. explain how begging vigorously can increase an individual\u2019s chance of propagating its own genes C. point out a weakness in a possible explanation for why nestlings do not always beg vigorously D. argue that the benefits of vigorous begging outweigh any possible disadvantages \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aC A\u9009\u9879\u89e3\u91ca\u4e3a\u4ec0\u4e48begging for food vigorously\u4f1a\u5bfc\u81f4\u66f4\u5feb\u7684\u751f\u957f\u548c\u66f4\u5927\u7684\u4f53\u79ef B\u9009\u9879\u89e3\u91cabegging vigorously\u662f\u5982\u4f55\u589e\u52a0\u4e2a\u4f53\u4f20\u64ad\u81ea\u8eab\u7684\u57fa\u56e0\u7684\u673a\u4f1a C\u9009\u9879\u6307\u51fa\u4e00\u4e2a\u5bf9\u4e8e\u4e3a\u4ec0\u4e48\u96cf\u9e1f\u4e0d\u603b\u662fbeg vigorously\u7684\u53ef\u80fd\u7684\u89e3\u91ca\u7684\u5f31\u70b9 D\u9009\u9879\u8ba4\u4e3avigorous begging\u7684\u597d\u5904\u5927\u4e8e\u4efb\u4f55\u53ef\u80fd\u7684\u574f\u5904 TPO 13 Biological Clocks (\u6b63\u786e\u7387 53.99%) When crayfish are kept continuously in the dark, even for four to five months, their compound eyes continue to adjust on a daily schedule for daytime and nighttime vision. Horseshoe crabs kept in the dark continuously for a year were found to maintain a persistent rhythm of brain activity that similarly adapts their eyes on a daily schedule for bright or for weak light. Like almost all daily cycles of animals deprived of environmental cues, those measured for the horseshoe crabs in these conditions were not exactly 24 hours. Such a rhythm whose period is approximately \u2014but not exactly\u2014a day is called circadian . For different individual horseshoe crabs, the circadian period ranged from 22.2 to 25.5 hours . A particular animal typically maintains its own characteristic cycle duration with great precision for many days. Indeed, stability of the biological clock's period is one of its major features, even when the organism's environment is subjected to considerable changes in factors, such as temperature, that would be expected to affect biological activity strongly. Further evidence for persistent internal rhythms appears when the usual external cycles are shifted\u2014either experimentally or by rapid eastwest travel over great distances. Typically, the animal's daily internally generated cycle of activity continues without change. As a result, its activities are shifted relative to the external cycle of the new environment. The disorienting effects of this mismatch between external time cues and internal schedules may persist, like our jet lag, for several days or weeks until certain cues such as the daylight/darkness cycle reset the organism's clock to synchronize with the daily rhythm of the new environment. In paragraph 2, why does the author mention that the period for different horseshoe crabs ranges from 22.2 to 25.5 hours ? A. To illustrate that an animal's internal clock seldom has a 24-hour cycle B. To argue that different horseshoe crabs will shift from daytime to nighttime vision at different times C. To illustrate the approximate range of the circadian rhythm of all animals D. To support the idea that external cues are the only factors affecting an animal's periodic behavior \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aB A\u9009\u9879\u9519\u8bef B\u9009\u9879\u8ba4\u4e3a\u4e0d\u540c\u7684horseshoe crab\u4f1a\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u4ece\u767d\u5929\u7684\u89c6\u91ce\u8f6c\u5411\u665a\u4e0a\u7684\u89c6\u91ce C\u9009\u9879\u8bf4\u660e\u6240\u6709\u52a8\u7269\u7684circadian rhythm\u7684\u5927\u81f4\u8303\u56f4 - \u201c\u6240\u6709\u52a8\u7269\u201d\u9519\u8bef D\u9009\u9879\u65e0\u4e2d\u751f\u6709 A\u200b B\u9009\u9879\u662f\u4e0d\u662f\u7406\u89e3\u6709\u95ee\u9898 TPO 19 Discovering the Ice Ages (\u6b63\u786e\u7387 53.27%) Isotopic analysis of shells allowed geologists to measure another glacial effect. They could trace the growth and shrinkage of continental glaciers, even in parts of the ocean where there may have been no great change in temperature\u2014 around the equator, for example. The oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice. During glaciations, the lighter oxygen-16 has a greater tendency to evaporate from the ocean surface than the heavier oxygen-18 does. Thus, more of the heavy isotope is left behind in the ocean and absorbed by marine organisms. From this analysis of marine sediments, geologists have learned that there were many shorter, more regular cycles of glaciation and deglaciation than geologists had oxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by the evaporation and is precipitated as snow to form glacial ice recognized from the glacial drift of the continents alone. In paragraph 5, why does the author include the information that the \u201coxygen isotope ratio of the ocean changes as a great deal of water is withdrawn from it by evaporation and is precipitated as snow to form glacial ice\u201d ? A. To explain how scientists were able to calculate how frequently the continental ice sheets expanded and contracted B. To explain how scientists have determined that there was no great change in ocean temperatures at the equator during past glaciations C. To provide evidence that oxygen-16 has a greater tendency to evaporate than does oxygen-18 D. To suggest that equatorial marine organisms absorb more heavy isotopes than do marine organisms elsewhere \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA - \u6392\u9664\u6cd5 B\u3001C\u3001D\u9009\u9879\u90fd\u548c\u89c2\u70b9\u65e0\u5173 TPO 20 Fossil Preservation (\u6b63\u786e\u7387 52.13%) When one considers the many ways by which organisms are completely destroyed after death, it is remarkable that fossils are as common as they are. Attack by scavengers and bacteria, chemical decay, and destruction by erosion and other geologic agencies make the odds against preservation very high. However, the chances of escaping complete destruction are vastly improved if the organism happens to have a mineralized skeleton and dies in a place where it can be quickly buried by sediment. Both of these conditions are often found on the ocean floors , where shelled invertebrates (organisms without spines) flourish and are covered by the continuous rain of sedimentary particles. Although most fossils are found in marine sedimentary rocks, they also are found in terrestrial deposits left by streams and lakes. On occasion, animals and plants have been preserved after becoming immersed in tar or quicksand, trapped in ice or lave flows, or engulfed by rapid falls of volcanic ash. In paragraph 1, what is the author\u2019s purpose in providing examples of how organisms are destroyed ? A. To emphasize how surprising it is that so many fossils exist B. To introduce a new geologic theory of fossil preservation C. To explain why the fossil record until now has remained incomplete D. To compare how fossils form on land and in water \u611f\u89c9\u50cf\u662f\u5728\u95ee\u6574\u6bb5\u7684\u7528\u610f \u9009\u62e9\uff1aB A\u9009\u9879\u8fd9\u6bb5\u6587\u7ae0\u6ca1\u6709\u4f53\u73b0so many\u8fd9\u4e2a\u7a0b\u5ea6 C\u9009\u9879\u8fd9\u6bb5\u6587\u7ae0\u6ca1\u6709\u4f53\u73b0incomplete B\u3001D\u9009\u9879\u4e4b\u95f4\u7ea0\u7ed3\uff0c\u611f\u89c9D\u9009\u9879\u867d\u7136\u5168\u6bb5\u8bf4\u7684\u662f\u4e24\u79cd\u60c5\u51b5\u90fd\u51fa\u73b0\u5728ocean\u4e2d\uff0c\u6240\u4ee5\u662f\u4e0d\u662f\u4e5f\u9690\u542bland\u548cwater\u7684\u6bd4\u8f83 A\u200b \u4e0d\u77e5\u9053A\u9009\u9879\u5982\u4f55\u5f97\u51fa B\u9009\u9879\u9519\u5728\u4e0d\u662f\u4e00\u4e2anew theory\u5417\uff1f TPO 20 Fossil Preservation (\u6b63\u786e\u7387 50.26%) The term \u201cfossil\u201d often implies petrifaction, literally a transformation into stone. After the death of an organism, the soft tissue is ordinarily consumed by scavengers and bacteria. They empty shell of a snail or clam may be left behind, and if it is sufficiently durable and resistant to dissolution, it may remain basically unchanged for a long period of time. Indeed, unaltered the ocean changes as a great deal of water is withdrawn from it by evaporation and is oxygen isotope ratio of precipitated as snow to form glacial ice shells of marine invertebrates are known from deposits over 100 million years old. In many marine creatures, however , the skeleton is composed of mineral variety of calcium carbonate called aragonite . Although aragonite has the same composition as the more familiar mineral known as calcite, it has a different crystal form, is relatively unstable, and in time changes to the more stable calcite. Why does the author mention \u201caragonite\u201d in the passage? A. To emphasize that some fossils remain unaltered for millions of years. B. To contrast fossil formation in organisms with soft tissue and in organisms with hard shells C. To explain that some marine organisms must undergo chemical changes in order to fossilize D. To explain why fossil shells are more likely to survive than are fossil skeletons \u5f80\u524d\u627e\u6ca1\u770b\u5230\u6709\u6548\u4fe1\u606f\uff0c\u6240\u4ee5\u5c31\u5f80\u540e\u627e\u4e86 \u9009\u62e9\uff1aC A\u9009\u9879remain unaltered\u9519\u8bef B\u3001D\u9009\u9879\u89c2\u70b9\u53e5\u6ca1\u6709\u4f53\u73b0 TPO 18 Lightning (\u6b63\u786e\u7387 44.12%) Most lightning takes place within a cloud when the charge separation within the cloud collapses. However, as the storm cloud develops, the ground beneath the cloud becomes positively charged and lightning can take place in the form of an electrical discharge between the negative charge of the cloud and the positively charged ground. Lightning that strikes the ground is the most likely to be destructive , so even though it represents only 20 percent of all lightning, it has received a lot of scientific attention . The author remarks that \u201cLightning that strikes the ground is the most likely to be destructive\u201d in order to explain why A. this form of lightning has been investigated so much B. this form of lightning is not as common as lightning within a cloud C. scientific understanding of this form of lightning is important D. the buildup of positive charge on the ground beneath a storm cloud can have serious consequences \u56e0\u679c\u5173\u7cfb \u91cd\u70b9\u5728\u7ed3\u679c\uff0c\u6240\u4ee5\u5f80\u540e\u770b \u9009\u62e9\uff1aC - \u539f\u6587\u540c\u4e49\u8f6c\u8ff0 A\u200b \u539f\u89c2\u70b9\u53e5\u7684\u610f\u601d\u662f\u83b7\u5f97\u4e86\u5f88\u591a\u79d1\u5b66\u7684\u5173\u6ce8 - scientific attention\u5bf9\u5e94investigated C\u4e2d\u7684important\u9519\u8bef\uff1f TPO 23 Rock Art of the Australia Aborigines (\u6b63\u786e\u7387 40.43%) In the 1970s when the study of Australian archaeology was in an exciting phase of development, with the great antiquity of rock art becoming clear. Lesley Maynard, the archaeologist who coined the phrase \u201cPanaramitee style,\u201d suggested that a sequence could be determined for Australian rock art, in which a geometric style gave way to a simple figurative style (outlines of figures and animals), followed by a range of complex figurative styles that, unlike the pan-Australian geometric tradition tended to much greater regional diversity. While accepting that this sequence fits the archaeological profile of those sites, which were occupied continuously over many thousands of years a number of writers have warned that the underlying assumption of such a sequence\u2014a development from the simple and the geometric to the complex and naturalistic\u2014obscures the cultural continuities in Aboriginal Australia, in which geometric symbolism remains fundamentally important. In this context the simplicity of a geometric motif may be more apparent than real. Motifs of seeming simplicity can encode complex meanings in Aboriginal Australia . And has not twentieth-century art shown that naturalism does not necessarily follow abstraction in some kind of predetermine sequence ? In paragraph 5, the author indicates that twentieth century art has shown that naturalism does not necessarily follow abstraction in some kind of predetermined sequence in order to A. emphasize that it may not be possible to determine what the figures in ancient rock art represent B. suggest a reply to those who have questioned Maynard\u2019s interpretation of the sequence of Australian rock art C. provide a counterexample to Maynard\u2019s interpretation of the sequence of Australian rock art D. indicate that twentieth century art is more advanced than ancient rock art \u9009\u62e9\uff1aC A\u9009\u9879\u5f3a\u8c03\u4e86\u51b3\u5b9a\u53e4\u4ee3\u5ca9\u77f3\u827a\u672f\u4e2d\u7684\u4eba\u7269\u4ee3\u8868\u4e86\u4ec0\u4e48\u53ef\u80fd\u662f\u4e0d\u53ef\u80fd\u7684 B\u9009\u9879\u7ed9\u90a3\u4e9b\u8d28\u7591Maynard\u5bf9\u4e8e\u6fb3\u5927\u5229\u4e9a\u6f14\u5ca9\u77f3\u827a\u672f\u5e8f\u5217\u7684\u89e3\u91ca\u7684\u4eba\u4e00\u4e2a\u56de\u590d C\u9009\u9879\u7ed9Maynard\u5bf9\u4e8e\u6fb3\u5927\u5229\u4e9a\u6f14\u5ca9\u77f3\u827a\u672f\u5e8f\u5217\u7684\u89e3\u91ca\u63d0\u51fa\u4e86\u53cd\u4f8b D\u9009\u9879\u7684more advanced\u7684\u5bf9\u6bd4\u5728\u539f\u6587\u4e2d\u6ca1\u6709\u4f53\u73b0 TPO 33 Railroads and Commercial Agriculture in Nineteenth-Century United States (\u6b63\u786e\u7387 37.49%) As railroad lines fanned out from Chicago, farmers began to acquire open prairie land in Illinois and then lowa, putting the fertile, deep black soil into production. Commercial agriculture transformed this remarkable treeless environment. To settlers accustomed to eastern woodlands, the thousands of square miles of tall grass were an awesome sight. Indian grass, Canada wild rye, and native big bluestem all grew higher than a person . Because eastern plows could not penetrate the densely tangled roots of prairie grass, the earliest settlers erected farms along the boundary separating the forest from the prairie. In 1837, however, John Deere patented a sharp-cutting steel plow that sliced through the sod without soil sticking to the blade. Cyrus McCormic refined a mechanical reaper that harvested fourteen times more wheat with the same amount of labor. By the 1850s McCormick was selling 1,000 reapers a year and could not keep up with demand, while Deere turned out 10,000 plows annually. Why does the author point out that \u201cIndian grass, Canada wild rye, and native big bluestem all grew higher than a person\u201d ? A. to provide a reason why people from the eastern woodlands of the United States were impressed when they saw the prairie B. to identified an obstacles to the development of the railroad lines fanning out from Chicago C. to explain why the transformation of the prairies by commercial agriculture was so remarkable D. to provide evidence supporting the claim that the prairies had fertile, deep black soil \u4fee\u8f9e\u624b\u6cd5\uff1a\u4e3e\u4f8b \u91cd\u70b9\u5728\u4f8b\u5b50\u524d\u9762\u7684\u89c2\u70b9 \u9009\u62e9\uff1aA A\u9009\u9879\u7ed9\u6765\u81ea\u7f8e\u56fd\u4e1c\u90e8woodlands\u7684\u4eba\u4eec\u770b\u5230prairie\u65f6\u5f88\u9707\u60ca\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7406\u7531 B\u9009\u9879obstacle\u65e0\u4e2d\u751f\u6709 C\u9009\u9879\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5546\u4e1a\u5316\u519c\u4e1a\u4f7f\u5f97prairies\u7684\u8f6c\u53d8\u53ef\u4ee5\u8fd9\u4e48\u663e\u8457 D\u9009\u9879\u548c\u89c2\u70b9\u53e5\u65e0\u5173 A\u3001C\u4e4b\u95f4\u7ea0\u7ed3\uff0c\u5224\u65ad\u5230\u5e95\u54ea\u4e2a\u66f4\u5207\u5408\u89c2\u70b9\u53e5","title":"\u4fee\u8f9e\u76ee\u7684\u9898"},{"location":"English/reading/","text":"Reading \u00b6 \u8bfb\u9898 \u5b9a\u4f4d-\u534a\u53e5\uff0c1~2\u53e5 \u7cbe\u51c6\u7406\u89e3\u5b9a\u4f4d\u53e5 - \u6b63\u786e\u7b54\u6848\uff1a\u5b9a\u4f4d\u53e5\u7684\u540c\u4e49\u8f6c\u8ff0 \u6392\u9664\u6cd5\uff1a\u9519\u8bef\u9009\u9879\u7c7b\u578b \u65e0\u4e2d\u751f\u6709 \u5f20\u51a0\u674e\u6234\uff1a\u4fe1\u606f\u9519\u4f4d\u3001\u7b54\u975e\u6240\u95ee \u622a\u7136\u76f8\u53cd \u6392\u9664\u9898 / \u53d6\u975e\u9898 \u00b6 \u5ba1\u9898\u5e72\uff0c\u628a\u63e1\u9898\u5e72\u9650\u5b9a \u6d4f\u89c8\u56db\u4e2a\u9009\u9879 \uff0c\u63d0\u53d6\u9009\u9879\u5173\u952e\u8bcd \u5e26\u7740\u9009\u9879\u5173\u952e\u8bcd\u626b\u8bfb\u6587\u7ae0 \u7ed3\u5408\u6587\u7ae0\u5185\u5bb9\u4ee5\u53ca\u9898\u5e72\u9650\u5b9a\u9009\u62e9\u7b54\u6848","title":"Reading"},{"location":"English/reading/#reading","text":"\u8bfb\u9898 \u5b9a\u4f4d-\u534a\u53e5\uff0c1~2\u53e5 \u7cbe\u51c6\u7406\u89e3\u5b9a\u4f4d\u53e5 - \u6b63\u786e\u7b54\u6848\uff1a\u5b9a\u4f4d\u53e5\u7684\u540c\u4e49\u8f6c\u8ff0 \u6392\u9664\u6cd5\uff1a\u9519\u8bef\u9009\u9879\u7c7b\u578b \u65e0\u4e2d\u751f\u6709 \u5f20\u51a0\u674e\u6234\uff1a\u4fe1\u606f\u9519\u4f4d\u3001\u7b54\u975e\u6240\u95ee \u622a\u7136\u76f8\u53cd","title":"Reading"},{"location":"English/reading/#_1","text":"\u5ba1\u9898\u5e72\uff0c\u628a\u63e1\u9898\u5e72\u9650\u5b9a \u6d4f\u89c8\u56db\u4e2a\u9009\u9879 \uff0c\u63d0\u53d6\u9009\u9879\u5173\u952e\u8bcd \u5e26\u7740\u9009\u9879\u5173\u952e\u8bcd\u626b\u8bfb\u6587\u7ae0 \u7ed3\u5408\u6587\u7ae0\u5185\u5bb9\u4ee5\u53ca\u9898\u5e72\u9650\u5b9a\u9009\u62e9\u7b54\u6848","title":"\u6392\u9664\u9898 / \u53d6\u975e\u9898"},{"location":"English/speaking/","text":"\u7ec3\u7684\u5957\u8def \u5728\u89e3\u9898\u7684\u65f6\u5019\u53ef\u4ee5\u5148\u804a\u4e00\u804a\u5b9a\u4e49\uff0c\u987a\u7740\u5b9a\u4e49\u5f80\u4e0b\u8d70\u5c31\u6709\u601d\u8def\u4e86 - \u9898\u4e0d\u592a\u597d\u89e3\uff0c\u6bd4\u8f83\u6a21\u7cca Task 1 \u00b6 \u97f3\u8c03\u592a\u5e73\uff0c\u8bed\u901f \u8fdb\u5165\u4e3b\u9898\u592a\u6162\uff0c\u5f00\u5934\u6362\u8868\u8fbe i will at my home\uff1bthe discussion face to face\uff1b face math problem\uff1b \u4f8b\u8bc1\uff1a \u679a\u4e3e\u6cd5 \u6570\u5b57 \u89e3\u91ca \u6ee1\u5206\uff1a4 - 22~23 \u4e60\u60ef\uff1a\u9ad8\u6548\u7387 \u65f6\u95f4 \u901f\u5ea6 \u8bed\u8c03\u95ee\u9898 \u611f\u60c5\u6ca1\u6709\u6d41\u7545\u8868\u8fbe \u5f88\u5bb9\u6613\u8ba9\u4eba\u542c\u4e0d\u51fa\u91cd\u70b9 \u8fde\u63a5\u8bcd\u591a\u52a0 supervise emotional support Education \u00b6 Do you agree or disagree with the following statement? Having a good manner is important. Use specific reasons and examples to support your answer In my eyes, having a good manner is indeed important. It will help us become a polite person. Being impolite and rude to others can leave a bad impression and ruin a good relationship. Take my brother for example, he liked to talk with food in his mouth and make noises during the dinner at school, and some students felt embarrased to eat with him. They think they were not treated respectfully so they gradually didn't want to play with him. Since then my brother realized the importance of good manners and corrected his mistakes. Do you think it's necessary for children's growth for them to live far away from home and stay with relatives or friends for short periods of time? I think it's necessary. Firstly, it will improve their ability to adapt to a new environment. In a new place, without their parents taking care of them, kids have to do things by themselves. They will have to be polite and well-behaved, and avoid making trouble and causing mass to their relatives or friends. Plus, Sometimes parents overprotect their children, but it's time to give them freedom and space to do the things they like. Maybe they will be happier and less stressful far away from home and from their parents' surpervision. Work \u00b6 Scocial activities \u00b6 some people prefer to travel to new places; others prefer to travel to places that they have been before. Which do you prefer and why? I prefer to travel to new places due to the following reasons. First of all, we can see different scenaries in different places. New sites can always bring us many surprises. In the opposite, we just can see the familiar things when going to the places that we have been before, and we never have the excitement. They are not as attrative as the first time we saw them. Secondly, traveling to a new place can broaden our horizon and gain knowledge and skills. We can experience various cultures, hear different stories and learn local history. If we only go to the same place as before, we can just know one culture. But we can accumulate more from many new places. This helps us open our mind. Success \u00b6 Technology \u00b6 some people like to smartphone or other navigational device to guide their road while traveling, some prefer to ask around, which do you like to do? I would like to guide my traveling road by using the navigational applications in the smartphone. Firstly, it is efficient for that I may ask for serveral people who may not be familiar with the place and even lead me to the wrong road. Because the applications can locate my current position using GPS, search the latest maps and information on the Internet and calculate the best and most accurate route. Furthermore, it's time-saving. I just have to type the destination into the applications and then in a few second I can get several pathes instread of negotiating with others. School \u00b6 do you think it is a good idea to let students keep pets in dorms? I don't agree with this idea and from my point of view (I think) the school should ban student from keeping pets in the dormitories. First of all, a pet like dog will sometimes bark loudly. It's very annoying and may disturb others' rest and study. Secondly, some students are really fear of these animals, and a furious pet may scare or hurt them. Last but not the least, it will take much time for the owner to clean the pet, which will influence his or her study. what are the advantages and/or disadvantages of having fast foods in restaurants on the street? I reckon that for those white-collar workers, it's a time saving and convenient method to eat out in the restaurants near their workplace, they just have to go down stairs and quickly have their meals instead of commuting between companies and home. However, eating in the restaurants often costs lots of money. Furthermore, if excessively intaken, fast food will do harm to our health resulting in various diseases like obesity and high blood. So we have to reduce the lifetime consumption of it. convenience has become an increasingly important role in people's business and blaster of life. where do you like to study? 1) at home; 2) in a library; 3) at a coffee shop In a library As far as I concern, I highly recommend to study in the library. First of all, the library provides a quiet and comfortable environment for us students to finish our paper and homework. Everyone is working hard, so we can be influenced and soon engaged in our study. Secondly, we can quickly find the reference books and enjoy high speed network in the library. It will help a lot. In addition, the students can easily gather around to discuss their projects or figure out a problem in some special rooms provided by the school library. At home everything you need is in hand, food, clothes, bed and so on save time commute / take a seat At a coffee shop elegant environment, efficiency improve, relax, calm down high class, meet genius easy to discuss questions which one do you think is the most helpful for protecting the environment? 1) government regulation 2) organizations' efforts 3) individuals' efforts. Explain why? Include reasons and examples to support your response. government regulation compulsory, force people to obey the rules like litter classification organizations' efforts individuals' efforts realize the importance of protecting the environment from the bottom of their heart Task 2 \u00b6 Undergraduate eligible for graduate courses 1 2 3 4 5 Title:Undergraduate eligible for graduate courses Junior and seniors are now permitted to enroll in classes being offered in their departments' graduate programs. Students must have their advisor's written permission to register for these classes and restricted to one semester. This should enable the most advanced students to have access to a quality graduate-level education while they are still undergraduates. Not only that, but it should help students determine if they are both interested in and qualified to attend a graduate program upon graduation. The school plans to permit undergraduate students to enter graduate courses for that it can help advanced students learn more and find whether they are suitable for graduate program. As for the reading passage, the man doesn't agree with the plan. Firstly, the graduate courses are more comprehensive. Only two or three courses can make a graduate overloaded in the whole semester. And the undergraduates cannot handle that much. Secondly, the graduate courses' classroom often small and only contains 5 to 10 people. In this situation, the students can talk and disguss with the professor closely. If the room is flooded with undergraduates that are unqualified with that high-level class, the professor will considerate the undergraduates and the value of the class will be affected. Proposal \u00b6 The \u542c\u529b\u6ca1\u4ec0\u4e48\u7ec6\u8282 (man) Did you see Paul's letter in the paper about the new sculpture? (woman) Yeah, but it was totaly unconvincing. His reasons for opposing the The TPO Official 56 - Task3 A student is writing a letter to advice the university to open a stduent-run snack shop. The man totally agrees with the idea for two reasons. The first one is that it can provide students with extra working experience, especially for those who want to run their own business after graduation. The students can learn the economical knowledge and practise like managing their schedule, making inventories and maintaining food supply. The second reason is that it is indeed convenient for students. Because the shcool's cafe shop is full of people all the time and students have to wait for a long time to get what they want to eat. Plus if they want to eat at the stores in the town, they have to spend many hours on commuting, which will influence their study. Task 3 \u00b6 Sharping Sharping is a method that parents use to have their children act in a positive manner. The professor use her own experience to explain this method. She helped her young daughter to learn to draw and color the picture with marker and crayon. When her daughter made a mark in a proper place or colored a thing right, the professor would praised her very much. So the professor's compliments encouraged her child to do more coloring. But if her daughter didn't mark the right place or draw the inaccurate color, the professor did nothing, which made her child realize that she was drawing improperly. Finally her child focused on the drawing and made harder to do right. Explicit memory and implicit memory Explicit memory is a conscious or intentional recollection, but the implicit memory is the opposite. The professor tells that we can easily remember what we ate and done last night to illustrate we have an explicit memory. Furthermore he uses a study to demostrate implicit memory. In the study, people were driving in the highway with a billboard that advertising a car. The ad showed a big picture of the car, and under the picture was the name of car \"Penser\". When the researchers asked the drivers whether they remembered the car advertisement. None of them said yes. So they could not consciously recall about the experience in the highway. But when they were asked to name an animal starting with letter 'P', they answered \"penser\" which was the name of the car instead of saying the most common word \"Pig\". Because the advertisement had an effect on the drivers even though they didn't remember seeing it. Reference Groups Reference Groups are groups of people whom we admire and whose behavior and attitudes we tend to imitate. The professor demostrates the term with his own experience. When he began his study in the university, he made friends with some art students. He thought they were cool, fun and creative and they often wore casual clothes like T-shirts, jeans and sneakers. So he also dressed like them and he fit in the group well and also felt cool. However, when the professor moved to Chigago to start his job, he was impressed by the young people who worked there for few years and could handle major responsibility in the company. His collegues liked to dress up a little bit when going out on a concert or baseball games. The men would wear a pair of nicer pants and the women would wear a more fashionable dress and nicer shoes. Finally, the professor thought it was really classic and formal, so he abandoned T-shirts and jeans and started to dress like his collegues. Scent Marketing \u9605\u8bfb\u601d\u8def \u627edefinition \u5b9a\u4f4d\u201c\u7b2c\u4e8c\u53e5\u201d\uff1aone effective method - \u80fd\u591f\u77e5\u9053\u8fd9\u662f\u4e00\u79cd\u8425\u9500\u624b\u6bb5 \u89c9\u7740\u8fd9\u4e2a\u5b9a\u4e49\u592a\u5c11\u4e86\uff0c\u5c31\u52a0\u4e86\u5b83\u7684\u529f\u80fd - \u201c\u7b2c\u4e00\u53e5\u8bdd\u201d \u6587\u7ae0\u60f3\u8bb2\u7684\u601d\u8def\u662f\uff1a \u2460 \u5546\u573a\u6709\u9999\u6c14\uff0c\u4f46\u662f\u9999\u6c14\u662f\u6839\u636e\u4e0d\u540c\u7684section\u800c\u53d8\u5316\u7684 \u2461 \u4eba\u4eec\u4f1a\u4ea7\u751f\u597d\u7684\u611f\u89c9 \u2462 \u6700\u7ec8\u4f1a\u4fc3\u4f7f\u4eba\u4eec\u6d88\u8d39 \u731c\u60f3\u542c\u529b \u9488\u5bf9\u201cstudy\u201d\uff0c\u7814\u7a76\u7684\u5185\u5bb9\u5e94\u8be5\u662f \u2460 \u5728\u4e0d\u540c\u7684section\u8bbe\u7f6e\u4e0d\u540c\u7684scent \u2461 \u89c2\u5bdf\u6700\u7ec8\u7684\u9500\u91cf\u548c\u5e73\u5e38\u7684\u533a\u522b \u2462 \u8be2\u95ee\u539f\u56e0\uff1a\u4eba\u4eec\u88ab\u9999\u6c14\u5438\u5f15 \u2463 \u5f97\u51fa\u7ed3\u8bba\uff1a\u4e0d\u540c\u7684\u9999\u6c14\u4fc3\u4f7f\u4eba\u4eec\u6d88\u8d39 Scent Marketing is an effective way to use different scents to encourage shoppers to purchase more products when they visit. The professor raises two studies to explain this idea. One study conducted in a department store is that the scent in the woman's section was appealing to women and the scent in the man's section could please the men. Finally, the store sold double number of the clothes. And the male and female customers said they were attracted to the smell so they purchased more than they would do normally. Another survey is that people prefer the running shoes to have some kind of fragrance. So they would pay more money for those shoes that smell nicer. Generally speaking, various scents not only entice people to buy more, but also encourage them to pay more for the same products. Population Growth \u9605\u8bfb\u601d\u8def \u627edefinition \u672c\u6765\u60f3\u53ea\u627epopulation growth is xxx\uff0c\u4f46\u662f\u60f3\u60f3\u4e0d\u5bf9\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u5b9a\u4e49\uff0c\u4f46\u662f\u539f\u6587\u5e94\u8be5\u8bb2\u7684\u662f\u4e00\u4e2a\u7269\u79cd\u901f\u7387\u53d8\u5316\u7684\u8fc7\u7a0b\u5427 \u6587\u7ae0\u60f3\u8bb2\u7684\u5e94\u8be5\u662f\uff1a \u2460 \u5982\u679c\u4e00\u4e2a\u7269\u79cd\u7684population\u7684\u589e\u957f\u901f\u7387\u53d8\u5316 \u2461 \u4f1a\u9020\u6210\u7684\u5f71\u54cd \u2462 \u5927\u81ea\u7136\u4f1a\u8c03\u63a7 \u731c\u60f3\u542c\u529b \u9488\u5bf9\u52a8\u690d\u7269\u7684\u53d8\u5316\uff1a \u2460 \u7269\u79cd\u901f\u7387\u53d8\u5316\uff0c\u6570\u91cf\u53d8\u591a/\u53d8\u5c11 \u2461 \u9020\u6210\u4e00\u5b9a\u597d/\u574f\u5f71\u54cd \u2462 \u7531\u4e8e\u4e00\u4e9b\u56e0\u7d20\uff0c\u7269\u79cd\u7684\u589e\u957f\u901f\u7387\u53d8\u56de\u6052\u5b9a Population growth is the rate at a specie increases in numbers. If the rate is too rapid, it may affect the nature and nature will do something to handle it. The professor gives two species' examples to illustrate this. One is the pinetree. The pinetree grows very fast at any soil and any climate. It can easily occupy the whole forest, which will influence other trees' species. Besides killed by some diseases and human, in most time the pinetrees are burnt down by the forest fires occured naturally. So in this way their growth can be limited. Another is the deer. The rate of deer specie is also rapid. But as the number of the deer increases, so does that of their predators like wolf because they have more deers to eat. So the deer number will decrease because their predators increases. As the decline of the deer population, the wolf number will decline too. So the nature can control the rate of the animal specie at a suitable rate. Task 4 \u00b6","title":"Speaking"},{"location":"English/speaking/#task-1","text":"\u97f3\u8c03\u592a\u5e73\uff0c\u8bed\u901f \u8fdb\u5165\u4e3b\u9898\u592a\u6162\uff0c\u5f00\u5934\u6362\u8868\u8fbe i will at my home\uff1bthe discussion face to face\uff1b face math problem\uff1b \u4f8b\u8bc1\uff1a \u679a\u4e3e\u6cd5 \u6570\u5b57 \u89e3\u91ca \u6ee1\u5206\uff1a4 - 22~23 \u4e60\u60ef\uff1a\u9ad8\u6548\u7387 \u65f6\u95f4 \u901f\u5ea6 \u8bed\u8c03\u95ee\u9898 \u611f\u60c5\u6ca1\u6709\u6d41\u7545\u8868\u8fbe \u5f88\u5bb9\u6613\u8ba9\u4eba\u542c\u4e0d\u51fa\u91cd\u70b9 \u8fde\u63a5\u8bcd\u591a\u52a0 supervise emotional support","title":"Task 1"},{"location":"English/speaking/#education","text":"Do you agree or disagree with the following statement? Having a good manner is important. Use specific reasons and examples to support your answer In my eyes, having a good manner is indeed important. It will help us become a polite person. Being impolite and rude to others can leave a bad impression and ruin a good relationship. Take my brother for example, he liked to talk with food in his mouth and make noises during the dinner at school, and some students felt embarrased to eat with him. They think they were not treated respectfully so they gradually didn't want to play with him. Since then my brother realized the importance of good manners and corrected his mistakes. Do you think it's necessary for children's growth for them to live far away from home and stay with relatives or friends for short periods of time? I think it's necessary. Firstly, it will improve their ability to adapt to a new environment. In a new place, without their parents taking care of them, kids have to do things by themselves. They will have to be polite and well-behaved, and avoid making trouble and causing mass to their relatives or friends. Plus, Sometimes parents overprotect their children, but it's time to give them freedom and space to do the things they like. Maybe they will be happier and less stressful far away from home and from their parents' surpervision.","title":"Education"},{"location":"English/speaking/#work","text":"","title":"Work"},{"location":"English/speaking/#scocial-activities","text":"some people prefer to travel to new places; others prefer to travel to places that they have been before. Which do you prefer and why? I prefer to travel to new places due to the following reasons. First of all, we can see different scenaries in different places. New sites can always bring us many surprises. In the opposite, we just can see the familiar things when going to the places that we have been before, and we never have the excitement. They are not as attrative as the first time we saw them. Secondly, traveling to a new place can broaden our horizon and gain knowledge and skills. We can experience various cultures, hear different stories and learn local history. If we only go to the same place as before, we can just know one culture. But we can accumulate more from many new places. This helps us open our mind.","title":"Scocial activities"},{"location":"English/speaking/#success","text":"","title":"Success"},{"location":"English/speaking/#technology","text":"some people like to smartphone or other navigational device to guide their road while traveling, some prefer to ask around, which do you like to do? I would like to guide my traveling road by using the navigational applications in the smartphone. Firstly, it is efficient for that I may ask for serveral people who may not be familiar with the place and even lead me to the wrong road. Because the applications can locate my current position using GPS, search the latest maps and information on the Internet and calculate the best and most accurate route. Furthermore, it's time-saving. I just have to type the destination into the applications and then in a few second I can get several pathes instread of negotiating with others.","title":"Technology"},{"location":"English/speaking/#school","text":"do you think it is a good idea to let students keep pets in dorms? I don't agree with this idea and from my point of view (I think) the school should ban student from keeping pets in the dormitories. First of all, a pet like dog will sometimes bark loudly. It's very annoying and may disturb others' rest and study. Secondly, some students are really fear of these animals, and a furious pet may scare or hurt them. Last but not the least, it will take much time for the owner to clean the pet, which will influence his or her study. what are the advantages and/or disadvantages of having fast foods in restaurants on the street? I reckon that for those white-collar workers, it's a time saving and convenient method to eat out in the restaurants near their workplace, they just have to go down stairs and quickly have their meals instead of commuting between companies and home. However, eating in the restaurants often costs lots of money. Furthermore, if excessively intaken, fast food will do harm to our health resulting in various diseases like obesity and high blood. So we have to reduce the lifetime consumption of it. convenience has become an increasingly important role in people's business and blaster of life. where do you like to study? 1) at home; 2) in a library; 3) at a coffee shop In a library As far as I concern, I highly recommend to study in the library. First of all, the library provides a quiet and comfortable environment for us students to finish our paper and homework. Everyone is working hard, so we can be influenced and soon engaged in our study. Secondly, we can quickly find the reference books and enjoy high speed network in the library. It will help a lot. In addition, the students can easily gather around to discuss their projects or figure out a problem in some special rooms provided by the school library. At home everything you need is in hand, food, clothes, bed and so on save time commute / take a seat At a coffee shop elegant environment, efficiency improve, relax, calm down high class, meet genius easy to discuss questions which one do you think is the most helpful for protecting the environment? 1) government regulation 2) organizations' efforts 3) individuals' efforts. Explain why? Include reasons and examples to support your response. government regulation compulsory, force people to obey the rules like litter classification organizations' efforts individuals' efforts realize the importance of protecting the environment from the bottom of their heart","title":"School"},{"location":"English/speaking/#task-2","text":"Undergraduate eligible for graduate courses 1 2 3 4 5 Title:Undergraduate eligible for graduate courses Junior and seniors are now permitted to enroll in classes being offered in their departments' graduate programs. Students must have their advisor's written permission to register for these classes and restricted to one semester. This should enable the most advanced students to have access to a quality graduate-level education while they are still undergraduates. Not only that, but it should help students determine if they are both interested in and qualified to attend a graduate program upon graduation. The school plans to permit undergraduate students to enter graduate courses for that it can help advanced students learn more and find whether they are suitable for graduate program. As for the reading passage, the man doesn't agree with the plan. Firstly, the graduate courses are more comprehensive. Only two or three courses can make a graduate overloaded in the whole semester. And the undergraduates cannot handle that much. Secondly, the graduate courses' classroom often small and only contains 5 to 10 people. In this situation, the students can talk and disguss with the professor closely. If the room is flooded with undergraduates that are unqualified with that high-level class, the professor will considerate the undergraduates and the value of the class will be affected.","title":"Task 2"},{"location":"English/speaking/#proposal","text":"The \u542c\u529b\u6ca1\u4ec0\u4e48\u7ec6\u8282 (man) Did you see Paul's letter in the paper about the new sculpture? (woman) Yeah, but it was totaly unconvincing. His reasons for opposing the The TPO Official 56 - Task3 A student is writing a letter to advice the university to open a stduent-run snack shop. The man totally agrees with the idea for two reasons. The first one is that it can provide students with extra working experience, especially for those who want to run their own business after graduation. The students can learn the economical knowledge and practise like managing their schedule, making inventories and maintaining food supply. The second reason is that it is indeed convenient for students. Because the shcool's cafe shop is full of people all the time and students have to wait for a long time to get what they want to eat. Plus if they want to eat at the stores in the town, they have to spend many hours on commuting, which will influence their study.","title":"Proposal"},{"location":"English/speaking/#task-3","text":"Sharping Sharping is a method that parents use to have their children act in a positive manner. The professor use her own experience to explain this method. She helped her young daughter to learn to draw and color the picture with marker and crayon. When her daughter made a mark in a proper place or colored a thing right, the professor would praised her very much. So the professor's compliments encouraged her child to do more coloring. But if her daughter didn't mark the right place or draw the inaccurate color, the professor did nothing, which made her child realize that she was drawing improperly. Finally her child focused on the drawing and made harder to do right. Explicit memory and implicit memory Explicit memory is a conscious or intentional recollection, but the implicit memory is the opposite. The professor tells that we can easily remember what we ate and done last night to illustrate we have an explicit memory. Furthermore he uses a study to demostrate implicit memory. In the study, people were driving in the highway with a billboard that advertising a car. The ad showed a big picture of the car, and under the picture was the name of car \"Penser\". When the researchers asked the drivers whether they remembered the car advertisement. None of them said yes. So they could not consciously recall about the experience in the highway. But when they were asked to name an animal starting with letter 'P', they answered \"penser\" which was the name of the car instead of saying the most common word \"Pig\". Because the advertisement had an effect on the drivers even though they didn't remember seeing it. Reference Groups Reference Groups are groups of people whom we admire and whose behavior and attitudes we tend to imitate. The professor demostrates the term with his own experience. When he began his study in the university, he made friends with some art students. He thought they were cool, fun and creative and they often wore casual clothes like T-shirts, jeans and sneakers. So he also dressed like them and he fit in the group well and also felt cool. However, when the professor moved to Chigago to start his job, he was impressed by the young people who worked there for few years and could handle major responsibility in the company. His collegues liked to dress up a little bit when going out on a concert or baseball games. The men would wear a pair of nicer pants and the women would wear a more fashionable dress and nicer shoes. Finally, the professor thought it was really classic and formal, so he abandoned T-shirts and jeans and started to dress like his collegues. Scent Marketing \u9605\u8bfb\u601d\u8def \u627edefinition \u5b9a\u4f4d\u201c\u7b2c\u4e8c\u53e5\u201d\uff1aone effective method - \u80fd\u591f\u77e5\u9053\u8fd9\u662f\u4e00\u79cd\u8425\u9500\u624b\u6bb5 \u89c9\u7740\u8fd9\u4e2a\u5b9a\u4e49\u592a\u5c11\u4e86\uff0c\u5c31\u52a0\u4e86\u5b83\u7684\u529f\u80fd - \u201c\u7b2c\u4e00\u53e5\u8bdd\u201d \u6587\u7ae0\u60f3\u8bb2\u7684\u601d\u8def\u662f\uff1a \u2460 \u5546\u573a\u6709\u9999\u6c14\uff0c\u4f46\u662f\u9999\u6c14\u662f\u6839\u636e\u4e0d\u540c\u7684section\u800c\u53d8\u5316\u7684 \u2461 \u4eba\u4eec\u4f1a\u4ea7\u751f\u597d\u7684\u611f\u89c9 \u2462 \u6700\u7ec8\u4f1a\u4fc3\u4f7f\u4eba\u4eec\u6d88\u8d39 \u731c\u60f3\u542c\u529b \u9488\u5bf9\u201cstudy\u201d\uff0c\u7814\u7a76\u7684\u5185\u5bb9\u5e94\u8be5\u662f \u2460 \u5728\u4e0d\u540c\u7684section\u8bbe\u7f6e\u4e0d\u540c\u7684scent \u2461 \u89c2\u5bdf\u6700\u7ec8\u7684\u9500\u91cf\u548c\u5e73\u5e38\u7684\u533a\u522b \u2462 \u8be2\u95ee\u539f\u56e0\uff1a\u4eba\u4eec\u88ab\u9999\u6c14\u5438\u5f15 \u2463 \u5f97\u51fa\u7ed3\u8bba\uff1a\u4e0d\u540c\u7684\u9999\u6c14\u4fc3\u4f7f\u4eba\u4eec\u6d88\u8d39 Scent Marketing is an effective way to use different scents to encourage shoppers to purchase more products when they visit. The professor raises two studies to explain this idea. One study conducted in a department store is that the scent in the woman's section was appealing to women and the scent in the man's section could please the men. Finally, the store sold double number of the clothes. And the male and female customers said they were attracted to the smell so they purchased more than they would do normally. Another survey is that people prefer the running shoes to have some kind of fragrance. So they would pay more money for those shoes that smell nicer. Generally speaking, various scents not only entice people to buy more, but also encourage them to pay more for the same products. Population Growth \u9605\u8bfb\u601d\u8def \u627edefinition \u672c\u6765\u60f3\u53ea\u627epopulation growth is xxx\uff0c\u4f46\u662f\u60f3\u60f3\u4e0d\u5bf9\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u5b9a\u4e49\uff0c\u4f46\u662f\u539f\u6587\u5e94\u8be5\u8bb2\u7684\u662f\u4e00\u4e2a\u7269\u79cd\u901f\u7387\u53d8\u5316\u7684\u8fc7\u7a0b\u5427 \u6587\u7ae0\u60f3\u8bb2\u7684\u5e94\u8be5\u662f\uff1a \u2460 \u5982\u679c\u4e00\u4e2a\u7269\u79cd\u7684population\u7684\u589e\u957f\u901f\u7387\u53d8\u5316 \u2461 \u4f1a\u9020\u6210\u7684\u5f71\u54cd \u2462 \u5927\u81ea\u7136\u4f1a\u8c03\u63a7 \u731c\u60f3\u542c\u529b \u9488\u5bf9\u52a8\u690d\u7269\u7684\u53d8\u5316\uff1a \u2460 \u7269\u79cd\u901f\u7387\u53d8\u5316\uff0c\u6570\u91cf\u53d8\u591a/\u53d8\u5c11 \u2461 \u9020\u6210\u4e00\u5b9a\u597d/\u574f\u5f71\u54cd \u2462 \u7531\u4e8e\u4e00\u4e9b\u56e0\u7d20\uff0c\u7269\u79cd\u7684\u589e\u957f\u901f\u7387\u53d8\u56de\u6052\u5b9a Population growth is the rate at a specie increases in numbers. If the rate is too rapid, it may affect the nature and nature will do something to handle it. The professor gives two species' examples to illustrate this. One is the pinetree. The pinetree grows very fast at any soil and any climate. It can easily occupy the whole forest, which will influence other trees' species. Besides killed by some diseases and human, in most time the pinetrees are burnt down by the forest fires occured naturally. So in this way their growth can be limited. Another is the deer. The rate of deer specie is also rapid. But as the number of the deer increases, so does that of their predators like wolf because they have more deers to eat. So the deer number will decrease because their predators increases. As the decline of the deer population, the wolf number will decline too. So the nature can control the rate of the animal specie at a suitable rate.","title":"Task 3"},{"location":"English/speaking/#task-4","text":"","title":"Task 4"},{"location":"English/writing/","text":"Writing \u00b6","title":"Writing"},{"location":"English/writing/#writing","text":"","title":"Writing"},{"location":"Forensics/image/","text":"\u9898\u76ee \u00b6 \u57fa\u4e8e\u81ea\u76d1\u7763\u5b66\u4e60\u7684\u56fe\u50cf\u7be1\u6539\u53d6\u8bc1 \u9488\u5bf9\u6570\u5b57\u56fe\u50cf\u7be1\u6539 \u68c0\u6d4b\u4e0e\u5b9a\u4f4d \u95ee\u9898 \u7814\u7a76 \u8bbe\u8ba1\u548c\u5b9e\u73b0 \u4e00\u79cd\u57fa\u4e8e\u81ea\u76d1\u7763\u5b66\u4e60\u7684\u53d6\u8bc1 \u7b97\u6cd5 \u5b8c\u6210\u7cfb\u7edf\u7684 \u4eff\u771f\u8bc4\u6d4b \uff0c\u5305\u62ec \u7b97\u6cd5\u6027\u80fd\u6bd4\u8f83 \u5b9e\u9a8c \u601d\u8def \u7814\u7a76\u80cc\u666f \u4eba\u5de5\u667a\u80fd\u7684\u80cc\u666f \u81ea\u7f16\u7801\u5668 \u652f\u6301\u5411\u91cf\u673aSVM \u566a\u58f0\u5904\u7406 \u56fe\u50cf\u5206\u5272 \u7279\u5f81\u5904\u7406 \u76f8\u4f3c\u5ea6\u68c0\u6d4b \u7814\u7a76\u610f\u4e49 \u6a21\u7cca\u56fe\u50cf\u53d6\u8bc1\u96be\uff0c\u53bb\u9664\u56fe\u50cf\u7684\u566a\u58f0\u5e72\u6270\uff1a\u76d1\u63a7\u56fe\u50cf\u6548\u679c\u4e0d\u4f73\u7684\u60c5\u51b5\uff0c\u5f88\u591a\u7ec6\u8282\u6a21\u7cca\u4e0d\u6613\u8bc6\u522b\u5206\u8fa8\uff0c\u7535\u5b50\u6570\u636e\u53d6\u8bc1\u96be\u4ee5\u83b7\u5f97\u6709\u4ef7\u503c\u7684\u7ebf\u7d22\u548c\u8bc1\u636e\uff0c\u9700\u8981\u56fe\u50cf\u5904\u7406\u5de5\u5177\u6765\u5bf9\u4e0d\u6613\u5206\u8fa8\u7684\u56fe\u50cf\u8fdb\u884c\u5904\u7406\uff0c\u4ece\u800c\u83b7\u53d6\u6700\u4e3a\u6e05\u6670\u7684\u5f71\u50cf\u8d44\u6599\uff0c\u63d0\u9ad8\u89c6\u9891\u76d1\u63a7\u4fa6\u67e5\u5de5\u4f5c\u7684\u6548\u7387\uff0c\u6700\u5927\u9650\u5ea6\u8fd8\u539f\u56fe\u50cf\u753b\u8d28\uff0c\u6316\u6398\u51fa\u56fe\u50cf\u4e2d\u6709\u7528\u7684\u4fe1\u606f \u4ee5\u5177\u4f53\u60c5\u5f62\u800c\u5b9a\uff1f\u5728\u6d88\u9664\u566a\u58f0\u7684\u540c\u65f6\uff0c\u8fd8\u9700\u8981\u4e0d\u8981\u8ba9\u56fe\u7247\u53d8\u5f97\u8fc7\u4e8e\u5e73\u6ed1\uff0c\u5373\u4fdd\u7559\u56fe\u50cf\u4e2d\u7684\u7cbe\u7ec6\u7ec6\u8282\u548c\u7ed3\u6784 \u56fd\u5185\u5916\u73b0\u72b6 \u3010\u6211\u7684\u3011\u7814\u7a76\u76ee\u7684 \u7814\u7a76\u601d\u8def \u7b97\u6cd5 \u5bf9\u8c61\uff1agrayscale & color noisy images \u2192 real-world noisy images & synthetic noise \u5b9a\u6027\u548c\u5b9a\u91cf \u8bc4\u4f30\u6307\u6807\uff1aPSNR\uff08Peak Signal-to-Noise Ratio\u5cf0\u503c\u4fe1\u566a\u6bd4\uff09\uff0cMSE\uff08\u5747\u65b9\u8bef\u5dee\uff09 \u8f6f\u786c\u4ef6\u6761\u4ef6 training datasets & test datasets \u53c2\u8003\u6587\u732e \u57fa\u672c\u6982\u5ff5 \u00b6 \u56fe\u50cf \u00b6 \u5bf9\u5ba2\u89c2\u5b58\u5728\u7684\u7269\u4f53\u67d0\u79cd\u5c5e\u6027\u7684\u63cf\u8ff0 \u56fe\u50cf\u5206\u7c7b\uff1a\u56fe\u7247\u3001\u5149\u56fe\u50cf\u3001\u6570\u5b66\u51fd\u6570\u3001\u975e\u53ef\u89c1\u7269\u7406\u56fe\u7b49 \u6570\u5b57\u56fe\u50cf \u00b6 \u4e00\u4e2a\u88ab\u91c7\u6837\u548c\u91cf\u5316\u540e\u7684\u4e8c\u7ef4\u51fd\u6570f(x,y) \u6bcf\u4e00\u4e2a\u5143\u7d20\uff08\u50cf\u7d20\uff09\u5177\u6709\u7279\u5b9a\u7684\u4f4d\u7f6e\u548c\u5e45\u503c\uff0c\u4f8b\u5982\u7269\u7406\u56fe\u60f3\u7684\u67d0\u4e2a\u70b9\u5bf9\u5e94\u6570\u5b57\u56fe\u50cf\u4e0a\u7684\u67d0\u4e2a\u5750\u6807\uff0c\u8be5\u5750\u6807\u7684\u6570\u503c\u5c31\u662f\u8fd9\u4e2a\u50cf\u7d20\u70b9\u7684\u989c\u8272\u6216\u8005\u662f\u7070\u5ea6\u503c \u6570\u5b57\u56fe\u50cf\u7684\u83b7\u53d6 \u00b6 \u4f20\u611f\u5668\u91c7\u96c6\u6570\u636e \u00b6 \u901a\u8fc7\u76f8\u673a\u4e0a\u7684\u4f20\u611f\u5668\u9635\u5217\u624d\u56fe\u50cf\u8fdb\u884c\u91c7\u96c6\uff0c\u6a21\u62df\u4eba\u773c\u6210\u50cf\u7684\u8fc7\u7a0b\uff1a\u5149\u7ebf\u7ecf\u8fc7\u7269\u4f53\u7684\u53cd\u5c04\u5230\u8fbe\u4eba\u773c\uff0c\u4ea7\u751f\u89c6\u89c9\u53cd\u5e94 \u573a\u666f\u5143\u7d20\u53cd\u6620\u6765\u81ea\u7167\u5c04\u6e90\u7684\u80fd\u91cf \u6210\u50cf\u7cfb\u7edf\u9996\u5148\u6536\u96c6\u5165\u5c04\u7684\u80fd\u529b\uff0c\u805a\u7126\u5728\u56fe\u50cf\u5e73\u9762\u4e0a \u4f20\u611f\u5668\u9635\u5217\u4ea7\u751f\u8f93\u51fa\uff0c\u8be5\u8f93\u51fa\u4e0e\u6bcf\u4e2a\u4f20\u611f\u5668\u63a5\u6536\u7684\u5149\u7684\u603b\u91cf\u6210\u6b63\u6bd4 \u540e\u7aef\u7535\u8def\u626b\u63cf\u8fd9\u4e9b\u8f93\u51fa\uff0c\u8f6c\u5316\u4e3a\u6a21\u62df\u4fe1\u53f7 \u7531\u6210\u50cf\u7cfb\u7edf\u7684\u5176\u4ed6\u90e8\u5206\u6570\u5b57\u5316\uff0c\u6700\u540e\u8f93\u51fa\u6570\u5b57\u56fe\u50cf \u56fe\u50cf\u91c7\u6837\u548c\u91cf\u5316\uff1a \u00b6 \u5c06\u6a21\u62df\u56fe\u50cf\u7ecf\u8fc7\u79bb\u6563\u5316\u4e4b\u540e\u5f97\u5230\u6570\u5b57\u8868\u793a\u7684\u56fe\u50cf \u91c7\u6837 \u00b6 \u5728\u7a7a\u95f4\u4e0a\u9694\u4e00\u6bb5\u8ddd\u79bb\u5bf9\u6570\u636e\u8fdb\u884c\u91c7\u96c6 \u5728\u7279\u5b9a\u533a\u57df\u53d6\u6837\u672c\u70b9 \u628a\u7a7a\u57df\u4e0a\u6216\u65f6\u57df\u4e0a\u8fde\u7eed\u7684\u56fe\u50cf\uff08\u6a21\u62df\u56fe\u50cf\uff09\u8f6c\u6362\u6210\u79bb\u6563\u91c7\u6837\u70b9\uff08\u50cf\u7d20\uff09\u96c6\u5408\uff08\u6570\u5b57\u56fe\u50cf\uff09\u7684\u64cd\u4f5c \u201c\u5750\u6807\u4e0a\u7684\u79bb\u6563\u5316\u201d \u91cf\u5316 \u00b6 \u5bf9\u4e0d\u540c\u50cf\u7d20\u70b9\u7684\u7070\u5ea6\u8fdb\u884c\u79bb\u6563\u5316\uff0c\u7528\u6570\u5b57\u6765\u8868\u793a\uff0c\u4f8b\u5982\u5c06\u7070\u5ea6\u5206\u4e3a256\u4e2a\u7b49\u7ea7 \u628a\u50cf\u7d20\u7684\u7070\u5ea6\uff08\u6d53\u6de1\uff09\u53d8\u6362\u6210\u79bb\u6563\u7684\u6574\u6570\u503c\u7684\u64cd\u4f5c \u91cf\u5316\u6240\u8fbe\u5230\u7684\u7cbe\u5ea6\u53d6\u51b3\u4e8e \u91c7\u6837\u4fe1\u53f7\u7684\u566a\u58f0 \u201c\u5e45\u503c\u4e0a\u7684\u79bb\u6563\u5316\u201d \u50cf\u7d20 \u00b6 \u6570\u5b57\u56fe\u50cf\u5904\u7406\u6280\u672f \u00b6 \u7070\u5ea6\u5206\u8fa8\u7387 \u00b6 \u6307\u5728\u7070\u5ea6\u7ea7\u522b\u4e2d\u53ef\u5206\u8fa8\u7684\u6700\u5c0f\u53d8\u5316 \u7a7a\u95f4\u5206\u8fa8\u7387 \u00b6 \u56fe\u50cf\u4e2d\u53ef\u5206\u8fa8\u7684\u6700\u5c0f\u7ec6\u8282\uff0c\u5355\u4f4d\u4e00\u822c\u4e3a\uff1a \u7c73/\u50cf\u7d20 \u566a\u58f0 \u00b6 \u566a\u58f0\u662f\u5f53\u524d\u4f17\u591a\u56fe\u50cf\u7be1\u6539\u53d6\u8bc1\u65b9\u6cd5\u7684 \u57fa\u7840 \uff0c\u53ef\u6df1\u5165\u7406\u89e3\u5206\u6790 \u611f\u5149\u5ea6\uff0c\u53c8\u79f0\u4e3aISO\u503c\uff0c\u662f\u8861\u91cf\u5e95\u7247\u5bf9\u4e8e\u5149\u7684\u7075\u654f\u7a0b\u5ea6\uff0c\u7531\u654f\u611f\u5ea6\u6d4b\u91cf\u5b66\u53ca\u6d4b\u91cf\u6570\u4e2a\u6570\u503c\u6765\u51b3\u5b9a\uff0c\u6700\u8fd1\u5df2\u7ecf\u88ab\u56fd\u9645\u6807\u51c6\u5316\u7ec4\u7ec7\u6807\u51c6\u5316 \u6570\u7801\u76f8\u673a\u7684\u566a\u58f0\u7c7b\u578b \u00b6 \u53c2\u8003\u8d44\u6599\uff1a https://zhuanlan.zhihu.com/p/23868867 \u3010\u7279\u70b9\u3011\uff1a\u3010\u566a\u58f0\u6765\u6e90\u3011+\u3010\u8868\u73b0\u3011+\u3010\u5bf9\u753b\u9762\u7684\u5f71\u54cd\u3011 \u975e\u5747\u5300\u54cd\u5e94\u566a\u58f0 \u8fd9\u79cd\u566a\u58f0\u662f\u4e0e\u4eae\u5ea6\u6210\u6b63\u6bd4 \u5728\u4fe1\u566a\u6bd4\u66f2\u7ebf\u4e0a\uff0c\u66f2\u7ebf\u662f\u4e00\u6761\u6c34\u5e73\u7ebf \u968f\u673a\u566a\u58f0 \u8fd9\u79cd\u566a\u58f0\u662f\u4e0e\u4eae\u5ea6\u7684\u5e73\u65b9\u6839\u6210\u6b63\u6bd4 \u5728\u4fe1\u566a\u6bd4\u66f2\u7ebf\u4e0a\u662f\u4e00\u6761\u659c\u7387\u4e3a 10dB/dec \u7684\u76f4\u7ebf \u56fa\u5b9a\u566a\u58f0 \u8fd9\u7c7b\u566a\u58f0\u662f\u4e0d\u968f\u4eae\u5ea6\u53d8\u5316 \u5728\u4fe1\u566a\u6bd4\u66f2\u7ebf\u4e0a\u662f\u4e00\u6761\u659c\u7387\u4e3a 20dB/dec \u7684\u76f4\u7ebf \u53bb\u566a\u7b97\u6cd5 Image Denoising \u00b6 \u53ef\u8c03\u7814\u6700\u65b0\u9488\u5bf9\u771f\u5b9e\u7167\u7247\u56fe\u50cf\u7684\u56fe\u50cf\u53bb\u566a\u7b97\u6cd5\uff0c\u662f\u4e0d\u662f\u66f4\u6709\u5229\u4e8e\u63d0\u524d\u56fe\u50cf\u4e2d\u7684\u6307\u7eb9\u4fe1\u606f Recent trends in Denoising \u00b6 Two notable denoising algorithms: NLM & BM3D \u7531\u4e8e\u5377\u79ef\u795e\u7ecf\u7f51\u7edcCNN\u7684\u666e\u53ca\uff0cDnCNN & IrCNN \u6df1\u5ea6\u5b66\u4e60\u5728\u56fe\u50cf\u53bb\u566a\u9886\u57df \u00b6 \u76f2\u964d\u566a&\u975e\u76f2\u964d\u566a \u63d0\u9ad8\u53bb\u566a\u901f\u5ea6 \u4e0d\u540c\u7c7b\u578b\u7684\u566a\u58f0\uff1a\u52a0\u6027\u767d\u566a\u58f0\uff08\u9ad8\u65af\u566a\u58f0\uff09\u3001\u76f2\u566a\u58f0\u3001\u771f\u5b9e\u566a\u58f0\u3001\u6df7\u5408\u566a\u58f0 \u601d\u8def\uff1a\u7279\u5f81\u63d0\u53d6 \u2192 \u2192 \u6b8b\u5dee\u5b66\u4e60 \u57fa\u7840\u6846\u67b6 fundamental frameworks \u00b6 Machine learning methods for image denoising \u7528\u4e8e\u56fe\u50cf\u53bb\u566a\u7684\u673a\u5668\u5b66\u4e60 Neural networks for image denoising \u7528\u4e8e\u56fe\u50cf\u53bb\u566a\u7684\u795e\u7ecf\u7f51\u7edc CNNs for image denoising \u6df1\u5ea6\u5b66\u4e60\u6280\u672f deep learning techniques \u00b6 \u7565 \u8bc4\u4f30\uff1a \u5b9a\u91cf PSNR \u56fe\u50cf\u53bb\u566a\u7684\u8fd0\u884c\u65f6\u95f4 \u5b9a\u6027 \u4f7f\u7528\u89c6\u89c9\u56fe\u5f62\u663e\u793a\u6062\u590d\u7684\u5e72\u51c0\u56fe\u50cf \u8bbe\u8ba1\u635f\u5931\u51fd\u6570 \u6316\u6398\u8fb9\u7f18\u4fe1\u606f \u53d6\u8bc1 Forensics \u00b6 Forensic Similarity \u00b6 \u4ece\u566a\u58f0\u6b8b\u5dee\u4e2d\u63d0\u53d6\u7279\u5f81 \u53c2\u8003\u8d44\u6599 \u00b6 \u201cReal Image Denoising with Feature Attention\u201d https://blog.csdn.net/liujiuxiaoshitou/article/details/106171150 https://blog.csdn.net/weixin_42096202/article/details/103234140 \u201cDeep Learning on Image Denoising: An Overview\u201d deep learning software challenges https://zhuanlan.zhihu.com/p/107635056?utm_source=qq \u201cForensic Similarity for Digital Images\u201d forensic similarity \u201cMedia Forensics and DeepFakes: an overview\u201d \u201cNoiseprint: a CNN-based camera model fingerprint\u201d \u76f8\u673a\u6307\u7eb9 \u201cOn Addressing the Impact of ISO Speed Upon PRNU and Forgery Detection\u201d","title":"\u6570\u5b57\u56fe\u50cf\u53d6\u8bc1"},{"location":"Forensics/image/#_1","text":"\u57fa\u4e8e\u81ea\u76d1\u7763\u5b66\u4e60\u7684\u56fe\u50cf\u7be1\u6539\u53d6\u8bc1 \u9488\u5bf9\u6570\u5b57\u56fe\u50cf\u7be1\u6539 \u68c0\u6d4b\u4e0e\u5b9a\u4f4d \u95ee\u9898 \u7814\u7a76 \u8bbe\u8ba1\u548c\u5b9e\u73b0 \u4e00\u79cd\u57fa\u4e8e\u81ea\u76d1\u7763\u5b66\u4e60\u7684\u53d6\u8bc1 \u7b97\u6cd5 \u5b8c\u6210\u7cfb\u7edf\u7684 \u4eff\u771f\u8bc4\u6d4b \uff0c\u5305\u62ec \u7b97\u6cd5\u6027\u80fd\u6bd4\u8f83 \u5b9e\u9a8c \u601d\u8def \u7814\u7a76\u80cc\u666f \u4eba\u5de5\u667a\u80fd\u7684\u80cc\u666f \u81ea\u7f16\u7801\u5668 \u652f\u6301\u5411\u91cf\u673aSVM \u566a\u58f0\u5904\u7406 \u56fe\u50cf\u5206\u5272 \u7279\u5f81\u5904\u7406 \u76f8\u4f3c\u5ea6\u68c0\u6d4b \u7814\u7a76\u610f\u4e49 \u6a21\u7cca\u56fe\u50cf\u53d6\u8bc1\u96be\uff0c\u53bb\u9664\u56fe\u50cf\u7684\u566a\u58f0\u5e72\u6270\uff1a\u76d1\u63a7\u56fe\u50cf\u6548\u679c\u4e0d\u4f73\u7684\u60c5\u51b5\uff0c\u5f88\u591a\u7ec6\u8282\u6a21\u7cca\u4e0d\u6613\u8bc6\u522b\u5206\u8fa8\uff0c\u7535\u5b50\u6570\u636e\u53d6\u8bc1\u96be\u4ee5\u83b7\u5f97\u6709\u4ef7\u503c\u7684\u7ebf\u7d22\u548c\u8bc1\u636e\uff0c\u9700\u8981\u56fe\u50cf\u5904\u7406\u5de5\u5177\u6765\u5bf9\u4e0d\u6613\u5206\u8fa8\u7684\u56fe\u50cf\u8fdb\u884c\u5904\u7406\uff0c\u4ece\u800c\u83b7\u53d6\u6700\u4e3a\u6e05\u6670\u7684\u5f71\u50cf\u8d44\u6599\uff0c\u63d0\u9ad8\u89c6\u9891\u76d1\u63a7\u4fa6\u67e5\u5de5\u4f5c\u7684\u6548\u7387\uff0c\u6700\u5927\u9650\u5ea6\u8fd8\u539f\u56fe\u50cf\u753b\u8d28\uff0c\u6316\u6398\u51fa\u56fe\u50cf\u4e2d\u6709\u7528\u7684\u4fe1\u606f \u4ee5\u5177\u4f53\u60c5\u5f62\u800c\u5b9a\uff1f\u5728\u6d88\u9664\u566a\u58f0\u7684\u540c\u65f6\uff0c\u8fd8\u9700\u8981\u4e0d\u8981\u8ba9\u56fe\u7247\u53d8\u5f97\u8fc7\u4e8e\u5e73\u6ed1\uff0c\u5373\u4fdd\u7559\u56fe\u50cf\u4e2d\u7684\u7cbe\u7ec6\u7ec6\u8282\u548c\u7ed3\u6784 \u56fd\u5185\u5916\u73b0\u72b6 \u3010\u6211\u7684\u3011\u7814\u7a76\u76ee\u7684 \u7814\u7a76\u601d\u8def \u7b97\u6cd5 \u5bf9\u8c61\uff1agrayscale & color noisy images \u2192 real-world noisy images & synthetic noise \u5b9a\u6027\u548c\u5b9a\u91cf \u8bc4\u4f30\u6307\u6807\uff1aPSNR\uff08Peak Signal-to-Noise Ratio\u5cf0\u503c\u4fe1\u566a\u6bd4\uff09\uff0cMSE\uff08\u5747\u65b9\u8bef\u5dee\uff09 \u8f6f\u786c\u4ef6\u6761\u4ef6 training datasets & test datasets \u53c2\u8003\u6587\u732e","title":"\u9898\u76ee"},{"location":"Forensics/image/#_2","text":"","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"Forensics/image/#_3","text":"\u5bf9\u5ba2\u89c2\u5b58\u5728\u7684\u7269\u4f53\u67d0\u79cd\u5c5e\u6027\u7684\u63cf\u8ff0 \u56fe\u50cf\u5206\u7c7b\uff1a\u56fe\u7247\u3001\u5149\u56fe\u50cf\u3001\u6570\u5b66\u51fd\u6570\u3001\u975e\u53ef\u89c1\u7269\u7406\u56fe\u7b49","title":"\u56fe\u50cf"},{"location":"Forensics/image/#_4","text":"\u4e00\u4e2a\u88ab\u91c7\u6837\u548c\u91cf\u5316\u540e\u7684\u4e8c\u7ef4\u51fd\u6570f(x,y) \u6bcf\u4e00\u4e2a\u5143\u7d20\uff08\u50cf\u7d20\uff09\u5177\u6709\u7279\u5b9a\u7684\u4f4d\u7f6e\u548c\u5e45\u503c\uff0c\u4f8b\u5982\u7269\u7406\u56fe\u60f3\u7684\u67d0\u4e2a\u70b9\u5bf9\u5e94\u6570\u5b57\u56fe\u50cf\u4e0a\u7684\u67d0\u4e2a\u5750\u6807\uff0c\u8be5\u5750\u6807\u7684\u6570\u503c\u5c31\u662f\u8fd9\u4e2a\u50cf\u7d20\u70b9\u7684\u989c\u8272\u6216\u8005\u662f\u7070\u5ea6\u503c","title":"\u6570\u5b57\u56fe\u50cf"},{"location":"Forensics/image/#_5","text":"","title":"\u6570\u5b57\u56fe\u50cf\u7684\u83b7\u53d6"},{"location":"Forensics/image/#_6","text":"\u901a\u8fc7\u76f8\u673a\u4e0a\u7684\u4f20\u611f\u5668\u9635\u5217\u624d\u56fe\u50cf\u8fdb\u884c\u91c7\u96c6\uff0c\u6a21\u62df\u4eba\u773c\u6210\u50cf\u7684\u8fc7\u7a0b\uff1a\u5149\u7ebf\u7ecf\u8fc7\u7269\u4f53\u7684\u53cd\u5c04\u5230\u8fbe\u4eba\u773c\uff0c\u4ea7\u751f\u89c6\u89c9\u53cd\u5e94 \u573a\u666f\u5143\u7d20\u53cd\u6620\u6765\u81ea\u7167\u5c04\u6e90\u7684\u80fd\u91cf \u6210\u50cf\u7cfb\u7edf\u9996\u5148\u6536\u96c6\u5165\u5c04\u7684\u80fd\u529b\uff0c\u805a\u7126\u5728\u56fe\u50cf\u5e73\u9762\u4e0a \u4f20\u611f\u5668\u9635\u5217\u4ea7\u751f\u8f93\u51fa\uff0c\u8be5\u8f93\u51fa\u4e0e\u6bcf\u4e2a\u4f20\u611f\u5668\u63a5\u6536\u7684\u5149\u7684\u603b\u91cf\u6210\u6b63\u6bd4 \u540e\u7aef\u7535\u8def\u626b\u63cf\u8fd9\u4e9b\u8f93\u51fa\uff0c\u8f6c\u5316\u4e3a\u6a21\u62df\u4fe1\u53f7 \u7531\u6210\u50cf\u7cfb\u7edf\u7684\u5176\u4ed6\u90e8\u5206\u6570\u5b57\u5316\uff0c\u6700\u540e\u8f93\u51fa\u6570\u5b57\u56fe\u50cf","title":"\u4f20\u611f\u5668\u91c7\u96c6\u6570\u636e"},{"location":"Forensics/image/#_7","text":"\u5c06\u6a21\u62df\u56fe\u50cf\u7ecf\u8fc7\u79bb\u6563\u5316\u4e4b\u540e\u5f97\u5230\u6570\u5b57\u8868\u793a\u7684\u56fe\u50cf","title":"\u56fe\u50cf\u91c7\u6837\u548c\u91cf\u5316\uff1a"},{"location":"Forensics/image/#_8","text":"\u5728\u7a7a\u95f4\u4e0a\u9694\u4e00\u6bb5\u8ddd\u79bb\u5bf9\u6570\u636e\u8fdb\u884c\u91c7\u96c6 \u5728\u7279\u5b9a\u533a\u57df\u53d6\u6837\u672c\u70b9 \u628a\u7a7a\u57df\u4e0a\u6216\u65f6\u57df\u4e0a\u8fde\u7eed\u7684\u56fe\u50cf\uff08\u6a21\u62df\u56fe\u50cf\uff09\u8f6c\u6362\u6210\u79bb\u6563\u91c7\u6837\u70b9\uff08\u50cf\u7d20\uff09\u96c6\u5408\uff08\u6570\u5b57\u56fe\u50cf\uff09\u7684\u64cd\u4f5c \u201c\u5750\u6807\u4e0a\u7684\u79bb\u6563\u5316\u201d","title":"\u91c7\u6837"},{"location":"Forensics/image/#_9","text":"\u5bf9\u4e0d\u540c\u50cf\u7d20\u70b9\u7684\u7070\u5ea6\u8fdb\u884c\u79bb\u6563\u5316\uff0c\u7528\u6570\u5b57\u6765\u8868\u793a\uff0c\u4f8b\u5982\u5c06\u7070\u5ea6\u5206\u4e3a256\u4e2a\u7b49\u7ea7 \u628a\u50cf\u7d20\u7684\u7070\u5ea6\uff08\u6d53\u6de1\uff09\u53d8\u6362\u6210\u79bb\u6563\u7684\u6574\u6570\u503c\u7684\u64cd\u4f5c \u91cf\u5316\u6240\u8fbe\u5230\u7684\u7cbe\u5ea6\u53d6\u51b3\u4e8e \u91c7\u6837\u4fe1\u53f7\u7684\u566a\u58f0 \u201c\u5e45\u503c\u4e0a\u7684\u79bb\u6563\u5316\u201d","title":"\u91cf\u5316"},{"location":"Forensics/image/#_10","text":"","title":"\u50cf\u7d20"},{"location":"Forensics/image/#_11","text":"","title":"\u6570\u5b57\u56fe\u50cf\u5904\u7406\u6280\u672f"},{"location":"Forensics/image/#_12","text":"\u6307\u5728\u7070\u5ea6\u7ea7\u522b\u4e2d\u53ef\u5206\u8fa8\u7684\u6700\u5c0f\u53d8\u5316","title":"\u7070\u5ea6\u5206\u8fa8\u7387"},{"location":"Forensics/image/#_13","text":"\u56fe\u50cf\u4e2d\u53ef\u5206\u8fa8\u7684\u6700\u5c0f\u7ec6\u8282\uff0c\u5355\u4f4d\u4e00\u822c\u4e3a\uff1a \u7c73/\u50cf\u7d20","title":"\u7a7a\u95f4\u5206\u8fa8\u7387"},{"location":"Forensics/image/#_14","text":"\u566a\u58f0\u662f\u5f53\u524d\u4f17\u591a\u56fe\u50cf\u7be1\u6539\u53d6\u8bc1\u65b9\u6cd5\u7684 \u57fa\u7840 \uff0c\u53ef\u6df1\u5165\u7406\u89e3\u5206\u6790 \u611f\u5149\u5ea6\uff0c\u53c8\u79f0\u4e3aISO\u503c\uff0c\u662f\u8861\u91cf\u5e95\u7247\u5bf9\u4e8e\u5149\u7684\u7075\u654f\u7a0b\u5ea6\uff0c\u7531\u654f\u611f\u5ea6\u6d4b\u91cf\u5b66\u53ca\u6d4b\u91cf\u6570\u4e2a\u6570\u503c\u6765\u51b3\u5b9a\uff0c\u6700\u8fd1\u5df2\u7ecf\u88ab\u56fd\u9645\u6807\u51c6\u5316\u7ec4\u7ec7\u6807\u51c6\u5316","title":"\u566a\u58f0"},{"location":"Forensics/image/#_15","text":"\u53c2\u8003\u8d44\u6599\uff1a https://zhuanlan.zhihu.com/p/23868867 \u3010\u7279\u70b9\u3011\uff1a\u3010\u566a\u58f0\u6765\u6e90\u3011+\u3010\u8868\u73b0\u3011+\u3010\u5bf9\u753b\u9762\u7684\u5f71\u54cd\u3011 \u975e\u5747\u5300\u54cd\u5e94\u566a\u58f0 \u8fd9\u79cd\u566a\u58f0\u662f\u4e0e\u4eae\u5ea6\u6210\u6b63\u6bd4 \u5728\u4fe1\u566a\u6bd4\u66f2\u7ebf\u4e0a\uff0c\u66f2\u7ebf\u662f\u4e00\u6761\u6c34\u5e73\u7ebf \u968f\u673a\u566a\u58f0 \u8fd9\u79cd\u566a\u58f0\u662f\u4e0e\u4eae\u5ea6\u7684\u5e73\u65b9\u6839\u6210\u6b63\u6bd4 \u5728\u4fe1\u566a\u6bd4\u66f2\u7ebf\u4e0a\u662f\u4e00\u6761\u659c\u7387\u4e3a 10dB/dec \u7684\u76f4\u7ebf \u56fa\u5b9a\u566a\u58f0 \u8fd9\u7c7b\u566a\u58f0\u662f\u4e0d\u968f\u4eae\u5ea6\u53d8\u5316 \u5728\u4fe1\u566a\u6bd4\u66f2\u7ebf\u4e0a\u662f\u4e00\u6761\u659c\u7387\u4e3a 20dB/dec \u7684\u76f4\u7ebf","title":"\u6570\u7801\u76f8\u673a\u7684\u566a\u58f0\u7c7b\u578b"},{"location":"Forensics/image/#image-denoising","text":"\u53ef\u8c03\u7814\u6700\u65b0\u9488\u5bf9\u771f\u5b9e\u7167\u7247\u56fe\u50cf\u7684\u56fe\u50cf\u53bb\u566a\u7b97\u6cd5\uff0c\u662f\u4e0d\u662f\u66f4\u6709\u5229\u4e8e\u63d0\u524d\u56fe\u50cf\u4e2d\u7684\u6307\u7eb9\u4fe1\u606f","title":"\u53bb\u566a\u7b97\u6cd5 Image Denoising"},{"location":"Forensics/image/#recent-trends-in-denoising","text":"Two notable denoising algorithms: NLM & BM3D \u7531\u4e8e\u5377\u79ef\u795e\u7ecf\u7f51\u7edcCNN\u7684\u666e\u53ca\uff0cDnCNN & IrCNN","title":"Recent trends in Denoising"},{"location":"Forensics/image/#_16","text":"\u76f2\u964d\u566a&\u975e\u76f2\u964d\u566a \u63d0\u9ad8\u53bb\u566a\u901f\u5ea6 \u4e0d\u540c\u7c7b\u578b\u7684\u566a\u58f0\uff1a\u52a0\u6027\u767d\u566a\u58f0\uff08\u9ad8\u65af\u566a\u58f0\uff09\u3001\u76f2\u566a\u58f0\u3001\u771f\u5b9e\u566a\u58f0\u3001\u6df7\u5408\u566a\u58f0 \u601d\u8def\uff1a\u7279\u5f81\u63d0\u53d6 \u2192 \u2192 \u6b8b\u5dee\u5b66\u4e60","title":"\u6df1\u5ea6\u5b66\u4e60\u5728\u56fe\u50cf\u53bb\u566a\u9886\u57df"},{"location":"Forensics/image/#fundamental-frameworks","text":"Machine learning methods for image denoising \u7528\u4e8e\u56fe\u50cf\u53bb\u566a\u7684\u673a\u5668\u5b66\u4e60 Neural networks for image denoising \u7528\u4e8e\u56fe\u50cf\u53bb\u566a\u7684\u795e\u7ecf\u7f51\u7edc CNNs for image denoising","title":"\u57fa\u7840\u6846\u67b6 fundamental frameworks"},{"location":"Forensics/image/#deep-learning-techniques","text":"\u7565 \u8bc4\u4f30\uff1a \u5b9a\u91cf PSNR \u56fe\u50cf\u53bb\u566a\u7684\u8fd0\u884c\u65f6\u95f4 \u5b9a\u6027 \u4f7f\u7528\u89c6\u89c9\u56fe\u5f62\u663e\u793a\u6062\u590d\u7684\u5e72\u51c0\u56fe\u50cf \u8bbe\u8ba1\u635f\u5931\u51fd\u6570 \u6316\u6398\u8fb9\u7f18\u4fe1\u606f","title":"\u6df1\u5ea6\u5b66\u4e60\u6280\u672f deep learning techniques"},{"location":"Forensics/image/#forensics","text":"","title":"\u53d6\u8bc1 Forensics"},{"location":"Forensics/image/#forensic-similarity","text":"\u4ece\u566a\u58f0\u6b8b\u5dee\u4e2d\u63d0\u53d6\u7279\u5f81","title":"Forensic Similarity"},{"location":"Forensics/image/#_17","text":"\u201cReal Image Denoising with Feature Attention\u201d https://blog.csdn.net/liujiuxiaoshitou/article/details/106171150 https://blog.csdn.net/weixin_42096202/article/details/103234140 \u201cDeep Learning on Image Denoising: An Overview\u201d deep learning software challenges https://zhuanlan.zhihu.com/p/107635056?utm_source=qq \u201cForensic Similarity for Digital Images\u201d forensic similarity \u201cMedia Forensics and DeepFakes: an overview\u201d \u201cNoiseprint: a CNN-based camera model fingerprint\u201d \u76f8\u673a\u6307\u7eb9 \u201cOn Addressing the Impact of ISO Speed Upon PRNU and Forgery Detection\u201d","title":"\u53c2\u8003\u8d44\u6599"},{"location":"Linux/Linux/","text":"csb-\u5d4c\u5165\u5f0f\u8ba1\u7b97\u673a\u7cfb\u7edf\u5b9e\u9a8c\u81ea\u6551\u624b\u518c \u00b6 Step 1 \u00b6 \u5728C:\u76d8\u4e0b\u65b0\u5efa\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199\u4e3a\u540d\u79f0\u7684\u865a\u62df\u673a\u5e76\u5b89\u88c5\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199+centos\u4e3a\u540d\u79f0\u7684centos\u7cfb\u7edf Environment \u00b6 vmware version \u672a\u77e5 centos 8 Request \u00b6 \u8001\u5e08\u63d0\u4f9bcentos 8\u56fe\u5f62\u5316\u754c\u9762\u7684\u955c\u50cfiso\u6587\u4ef6 Experiment \u00b6 1 - \u65b0\u5efa\u865a\u62df\u673a \u00b6 \u3010\u5178\u578b\u3011\u7684\u65b9\u6cd5 - \u63a8\u8350 \u6587\u4ef6 > \u65b0\u5efa\u865a\u62df\u673a > \u5178\u578b > \u4e0b\u4e00\u6b65 > \u7a0d\u540e\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \u5ba2\u6237\u673a\u64cd\u4f5c\u7cfb\u7edf\u9009\u62e9 Linux \uff0c\u7248\u672c\u9009\u62e9centos7(\u7531\u4e8e\u5b66\u751f\u673a\u5668\u53ea\u6709centos7\u53ef\u4f9b\u9009\u62e9) \u865a\u62df\u673a\u540d\u79f0\u6539\u4e3a\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199+centos \u5904\u7406\u5668\u914d\u7f6e\u3001\u6b64\u865a\u62df\u673a\u7684\u5185\u5b58\u3001\u7f51\u7edc\u7c7b\u578b\u3001\u9009\u62e9\u78c1\u76d8\u3001\u6307\u5b9a\u78c1\u76d8\u5bb9\u91cf\u3001\u6307\u5b9a\u78c1\u76d8\u6587\u4ef6\u76ee\u524d\u65e0\u9700\u4fee\u6539\uff0c\u53ef\u7a0d\u540e\u518d\u8c03\u6574 \u3010\u81ea\u5b9a\u4e49\u3011\u7684\u65b9\u6cd5 \u6587\u4ef6 > \u65b0\u5efa\u865a\u62df\u673a > \u81ea\u5b9a\u4e49(\u9ad8\u7ea7) > \u4e0b\u4e00\u6b65 > \u7a0d\u540e\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \u5ba2\u6237\u673a\u64cd\u4f5c\u7cfb\u7edf\u9009\u62e9 Linux \uff0c\u7248\u672c\u9009\u62e9centos7(\u7531\u4e8e\u5b66\u751f\u673a\u5668\u53ea\u6709centos7\u53ef\u4f9b\u9009\u62e9) \u865a\u62df\u673a\u540d\u79f0\u6539\u4e3a\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199+centos \u5904\u7406\u5668\u914d\u7f6e\u3001\u6b64\u865a\u62df\u673a\u7684\u5185\u5b58\u3001\u7f51\u7edc\u7c7b\u578b\u3001\u9009\u62e9I/O\u63a7\u5236\u5668\u7c7b\u578b\u3001\u9009\u62e9\u78c1\u76d8\u7c7b\u578b\u3001\u9009\u62e9\u78c1\u76d8\u3001\u6307\u5b9a\u78c1\u76d8\u5bb9\u91cf\u3001\u6307\u5b9a\u78c1\u76d8\u6587\u4ef6\u76ee\u524d\u65e0\u9700\u4fee\u6539\uff0c\u53ef\u7a0d\u540e\u518d\u8c03\u6574 2 - \u4fee\u6539\u914d\u7f6e \u00b6 \u7f16\u8f91\u865a\u62df\u673a\u8bbe\u7f6e\uff0c\u9009\u62e9CD/DVD\uff0c\u4f7f\u7528ISO\u6620\u50cf\u6587\u4ef6 \u7f51\u7edc\u9002\u914d\u5668\uff1aNAT \u6a21\u5f0f \u548c \u6865\u63a5\u6a21\u5f0f\u90fd\u53ef\uff0c\u4eb2\u6d4bNAT\u5728\u5b66\u751f\u673a\u4e0a\u53ef\u80fd\u65e0\u6cd5\u6210\u529f\uff0c\u6865\u63a5\u53ef\uff0c\u4e24\u8005\u7075\u6d3b\u5207\u6362 \u5185\u5b58\u53ef\u7075\u6d3b\u8c03\u5927 3 - \u5b89\u88c5\u7cfb\u7edf \u00b6 \u9009install centos linux 8(\u7b2c\u4e00\u4e2a)\uff0c\u4e0d\u9009test \u82e5\u51fa\u73b0 end Kernel panic - not syncing:Fatal exception Vmware \uff0c\u5219\u5728\u865a\u62df\u673a\u8bbe\u7f6e\u4e2d \u79fb\u9664\u6253\u5370\u673a \u8f6f\u4ef6\u9009\u62e9 \u6587\u4ef6\u53ca\u5b58\u50a8\u670d\u52a1\u5668(\u5305\u542bnfs) FTP\u670d\u52a1\u5668 \u57fa\u672c\u7f51\u9875\u670d\u52a1\u5668 \u5f00\u53d1\u5de5\u5177 RPM\u5f00\u53d1\u5de5\u5177 \u5b89\u88c5\u76ee\u7684\u5730\uff1a\u70b9\u51fb\u9009\u62e9 \u672c\u5730\u6807\u51c6\u78c1\u76d8 \uff0c\u8981\u8fde\u7eed\u786e\u8ba4 \u4e24\u6b21 \u624d\u53ef\u6210\u529f \u5f00\u59cb\u5b89\u88c5ing... 2020.10.25 23:05 - 2020.10.25 23:31 \u5386\u65f626\u5206\u949f \u6b64\u65f6\u53ef\u4ee5\u8fdb\u884cRoot\u5bc6\u7801\u7684\u521b\u5efa\uff1a123456789 & \u4e5f\u53ef\u521b\u5efa\u7528\u6237(\u4e0d\u521b\u5efa\u7684\u8bdd\uff0c\u5c31\u662fRoot\u7528\u6237\u767b\u5f55) \u5b89\u88c5\u540e\u91cd\u542f\uff0c\u9700\u8981 \u63a5\u53d7\u8bb8\u53ef\u8bc1 \u624d\u80fd\u6210\u529f\u5f00\u673a ps\uff1a\u5982\u679c\u770b\u7740\u4e0d\u4e60\u60ef\uff0c\u5219\u67e5\u770b > \u81ea\u52a8\u8c03\u6574\u5927\u5c0f > \u81ea\u52a8\u9002\u5e94\u5ba2\u6237\u673a Step 2 \u00b6 \u5728\u65b0\u5efa\u7684centos\u7cfb\u7edf\u4e2d\u65b0\u5efa/test\u6587\u4ef6\u5939\uff0c\u914d\u7f6e\u5e76\u5f00\u542fnfs\u670d\u52a1\uff0c\u628a\u81ea\u5df1\u7684/test\u6587\u4ef6\u5939\u6302\u8f7d\u5230/var/www\u6587\u4ef6\u5939\u4e0b \u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u6d3b\u52a8\u201d\uff0c\u9009\u62e9 \u7ec8\u7aef \uff0c\u5207\u6362\u5230Root\u7528\u6237 1 su root \u6d4b\u8bd5\u7f51\u7edc\u8fde\u901a\u6027 1 2 3 4 5 6 7 # \u67e5\u770b\u7f51\u7edc\u72b6\u6001 ifconfig # \u914d\u7f6e\u672c\u673aipv4\u5730\u5740 # \u5728\u81ea\u5df1windows\u672c\u673a\u7684ipv4\u5730\u5740\u4e0a+100 # ens33\u662fifconfig\u67e5\u770b\u7684\u7f51\u5361\u540d\u79f0\uff0c\u9664\u4e86lo\u548cvirbr0\u4e4b\u5916 ifconfig ens33:1 192 .168.1.104 \u65b0\u5efa/test\u6587\u4ef6\u5939 1 2 3 4 5 6 7 8 9 10 11 # pwd \u663e\u793a\u5f53\u524d\u8def\u5f84 /home/csb ls # \u51fa\u73b0 \u684c\u9762 \u97f3\u4e50 \u4e0b\u8f7d # \u65b0\u5efatest\u5171\u4eab\u6587\u4ef6\u5939 mkdir test # \u4fee\u6539\u6743\u9650 - \u4e0d\u77e5\u9053\u7528\u4e8e\u5565 chmod -R 777 /home/csb/test \u914d\u7f6e\u5e76\u5f00\u542fnfs\u670d\u52a1 1 2 3 4 5 6 service nfs-server start # https://blog.csdn.net/qq_33559992/article/details/51866043 # \u67e5\u770b\u72b6\u6001 systemctl status nfs-server systemctl status rpcbind \u628a\u81ea\u5df1\u7684/test\u6587\u4ef6\u5939\u6302\u8f7d\u5230/var/www\u6587\u4ef6\u5939\u4e0b\u3010\u5f85\u786e\u8ba4\u3011 1 2 3 4 5 6 7 8 9 mount --bind /home/csb/test /var/www # \u540c\uff1amount -o bind /home/csb/test/ /var/www/ # \u540c\uff1amount -B /home/csb/test/ /var/www/ # \u53d6\u6d88\u6302\u8f7d unmount /home/csb/test/ # \u67e5\u770b\u5e2e\u52a9\u6587\u6863 mount -h Linux\u4e2d\u6302\u8f7d\u8be6\u89e3 Linux\u4e2d\u7684\u6839\u76ee\u5f55\u4ee5\u5916\u7684\u6587\u4ef6\u8981\u60f3\u88ab\u8bbf\u95ee\uff0c\u9700\u8981\u5c06\u5176\u201c\u5173\u8054\u201d\u5230\u6839\u76ee\u5f55\u4e0b\u7684\u67d0\u4e2a\u76ee\u5f55\u6765\u5b9e\u73b0\uff0c\u8fd9\u79cd\u5173\u8054\u64cd\u4f5c\u5c31\u662f\u201c\u6302\u8f7d\u201d\uff0c\u6839\u76ee\u5f55\u4e0b\u7684\u67d0\u4e2a\u76ee\u5f55\u5c31\u662f\u201c\u6302\u8f7d\u70b9\u201d\u3002\u89e3\u9664\u5173\u8054\u5173\u7cfb\u7684\u8fc7\u7a0b\u79f0\u201c\u5378\u8f7d\u201d \u201c\u6302\u8f7d\u70b9\u201d\u8981\u6c42 \u6302\u8f7d\u70b9\u76ee\u5f55\u4e0d\u53ef\u88ab\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528 \u6302\u8f7d\u70b9\u4e0b\u539f\u6709\u6587\u4ef6\u5c06\u88ab\u9690\u85cf linux nfs\u8fdc\u7a0b\u6302\u8f7d\u6587\u4ef6\u76ee\u5f55 - \u5927\u6982\u4e86\u89e3\u8fc7\u7a0b / \u5177\u4f53\u6ca1\u5b9e\u8df5 https://www.cnblogs.com/fooller/p/11511380.html https://www.cnblogs.com/merely/p/10793877.html https://www.cnblogs.com/ylnic/p/10044271.html Step 3 \u00b6 \u7f16\u5199hello.c\u7a0b\u5e8f\uff0c\u6253\u5370\u8f93\u51fa\u81ea\u5df1\u7684\u59d3\u540d\u62fc\u97f3\u53ca\u5b66\u53f7 1 2 3 4 # \u8fdb\u5165test\u6587\u4ef6\u5939 cd ./test/ # \u65b0\u5efa vi hello.c \u5199\u5165\u5982\u4e0b\u5185\u5bb9(\u9996\u5148\u6309insert\uff0c\u624d\u53ef\u7f16\u8f91) 1 2 3 4 5 6 #include <stdio.h> int main (){ printf ( \"chensibo201710513054 \\n \" ); return 0 ; } \u6309esc\u9000\u51fa\u540e\uff0c :wq \u4fdd\u5b58 Step 4\u3010delete\u3011 \u00b6 \u4e0b\u8f7d\u89e3\u538b\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u5230/test\u6587\u4ef6\u5939\u4e0b\uff0c\u6dfb\u52a0\u7cfb\u7edf\u8def\u5f84 \u4ea4\u53c9\u7f16\u8bd1\uff1a\u5728\u5f53\u524d\u7f16\u8bd1\u5e73\u53f0\u4e0b\uff0c\u7f16\u8bd1\u51fa\u6765\u7684\u7a0b\u5e8f\u80fd\u8fd0\u884c\u5728\u4f53\u7cfb\u7ed3\u6784\u4e0d\u540c\u7684\u53e6\u4e00\u79cd\u76ee\u6807\u5e73\u53f0\u4e0a\uff0c\u4f46\u662f\u7f16\u8bd1\u5e73\u53f0\u672c\u8eab\u5374\u4e0d\u80fd\u8fd0\u884c\u8be5\u7a0b\u5e8f\u3002\u6bd4\u5982\uff0c\u5728 x86 \u5e73\u53f0\u4e0a\uff0c\u7f16\u5199\u7a0b\u5e8f\u5e76\u7f16\u8bd1\u6210\u80fd\u8fd0\u884c\u5728 ARM \u5e73\u53f0\u7684\u7a0b\u5e8f\uff0c\u7f16\u8bd1\u5f97\u5230\u7684\u7a0b\u5e8f\u5728 x86 \u5e73\u53f0\u4e0a\u662f\u4e0d\u80fd\u8fd0\u884c\u7684\uff0c\u5fc5\u987b\u653e\u5230 ARM \u5e73\u53f0\u4e0a\u624d\u80fd\u8fd0\u884c \u4e2a\u4eba\u7406\u89e3\u601d\u8def - \u672a\u5b9e\u8df5 1. \u9996\u5148\u5b89\u88c5Linux\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u4e0b\u8f7d\u540e\u89e3\u538b(tar\u547d\u4ee4) - https://blog.csdn.net/baidu_37973494/article/details/82949963 2. \u5c06\u8be5\u5de5\u5177\u94fe\u5bfc\u51fa\u5230\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u5f97\u7ec8\u7aef\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u547d\u4ee4 - https://blog.csdn.net/zy_heu/article/details/80062806 - https://blog.csdn.net/lhh_qrsly/article/details/109193284 Step 5 \u00b6 \u7f16\u5199makefile\u6587\u4ef6\uff0c\u901a\u8fc7make\u5b9e\u73b0hello.c\u4ea4\u53c9\u7f16\u8bd1 \u7f16\u5199makefile\u6587\u4ef6\uff0c\u5728\u547d\u4ee4\u884c\u4e0b 1 2 gedit makefile1 # \u6216\u8005 vim makefile1 \u5199\u5165\u5982\u4e0b\u5185\u5bb9\uff1a \u6cd5\u2460 1 2 3 4 all : gcc hello.c -o hello clean : rm -rf hello hello.o \u4e0a\u8ff0\u4fee\u6539\u4e3a makefile \u81ea\u52a8\u53d8\u91cf \u5199\u6cd5 1 2 3 4 5 6 7 8 .PHONY : clean CC = gcc OBJ = hello.c hello : $( OBJ ) #hello:hello.c $( CC ) $^ -o $@ clean : rm -f *.o hello \u89e3\u6790\uff1a 1 2 3 4 5 6 7 8 9 10 .PHONY : clean CC = gcc OBJ = hello.c hello : $( OBJ ) $( CC ) $^ -o $@ # $^ \u6307\u7684\u662f\u5192\u53f7\u540e\u7684\u503c # $@ \u6307\u7684\u662f\u5192\u53f7\u524d\u9762\u7684hello # \u76f8\u5f53\u4e8egcc hello.c -o hello clean : rm -f *.o hello \u5173\u4e8e\u81ea\u52a8\u53d8\u91cf\u7684\u4e00\u4e9btips \u9009\u9879\u540d \u4f5c\u7528 $@ \u89c4\u5219\u7684\u76ee\u6807\u6587\u4ef6\u540d $< \u89c4\u5219\u7684\u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6\u540d $^ \u89c4\u5219\u7684\u6240\u6709\u4f9d\u8d56\u6587\u4ef6\u5217\u8868 reference: - https://blog.csdn.net/men_wen/article/details/75272585 - https://blog.csdn.net/u010299133/article/details/88761179 \u6216\u8005\u6cd5\u2461 [\u7a0d\u590d\u6742\uff0c\u5206\u4e3a\u4e24\u4e2a\u8fc7\u7a0b] 1 2 3 4 5 6 hello : hello . o gcc hello.o -o hello hello.o : hello . c gcc -c hello.c clean : rm -rf hello.o hello \u5bf9\u5e94\u7684\u81ea\u52a8\u53d8\u91cf\u5199\u6cd5 1 2 3 4 5 6 7 8 9 .PHONY : clean CC = gcc hello : hello . o $( CC ) $^ -o $@ hello.o : hello . c $( CC ) -c $^ -o $@ clean : rm -f *.o hello all \uff1a\u5176\u529f\u80fd\u4e00\u822c\u662f\u7f16\u8bd1\u6240\u6709\u7684\u76ee\u6807 clean \uff1a\u529f\u80fd\u662f\u5220\u9664\u6240\u6709\u88abmake\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u6b64\u60c5\u666f\u4e0b\u5220\u9664\u7684\u65f6\u4e2d\u95f4.o\u6587\u4ef6 \u901a\u8fc7gcc\u4e0d\u52a0\u53c2\u6570\u53ef\u4ee5 \u4e00\u6b65\u76f4\u63a5\u7f16\u8bd1 \u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 -o <file> \u8868\u793a\u5c06\u8f93\u51fa\u653e\u5165<\u6587\u4ef6> -c \u8868\u793a\u7f16\u8bd1\u548c\u6c47\u7f16\uff0c\u4f46\u4e0d\u8981\u94fe\u63a5\uff0c\u751f\u6210.o\u6587\u4ef6\uff0c gcc hello.o \u5373gcc\u81ea\u52a8\u94fe\u63a5\u4e0a\u4e00\u6b65\u751f\u6210\u7684hello.o\u6765\u751f\u6210\u6700\u7ec8\u53ef\u6267\u884c\u6587\u4ef6hello \u901a\u8fc7make\u5c06\u6e90\u6587\u4ef6hello.c\u7f16\u8bd1\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 1 2 # \u5728\u547d\u4ee4\u884c\u4e0b\u8f93\u5165 make -f makefile1 \u51fa\u73b0\u9057\u6f0f\u5206\u9694\u7b26\u62a5\u9519\uff1a https://blog.csdn.net/yiranant/article/details/46582059 \u8fd0\u884c 1 2 # \u7ec8\u7aef - ls - \u7eff\u8272 ./hello Reference\uff1a https://blog.csdn.net/songshuai0223/article/details/88207566 Step 6 \u00b6 \u5728\u4e3b\u673a\u7aef\u7f16\u8bd1boa Request \u00b6 \u8001\u5e08\u63d0\u4f9bboa \u6216\u8005\u3010\u8fde\u7f51\u3011 http://www.boa.org/boa-0.94.13.tar.gz Experiment \u00b6 \u5b89\u88c5boa 1 2 3 4 5 6 7 8 9 10 # \u5b89\u88c5\u5f00\u53d1\u5de5\u5177\u53ca\u5e93 yum install flex bison # \u89e3\u538b tar -xzvf boa-0.94.13.tar.gz cd boa-0.94.13/src # \u68c0\u6d4b\u73af\u5883\uff0c\u751f\u4ea7makefile ./configure \u4fee\u6539boa\u76f8\u5173\u6587\u4ef6 Boa\u9700\u8981\u5728/etc\u76ee\u5f55\u4e0b\u5efa\u7acb\u4e00\u4e2aboa\u76ee\u5f55\uff0c\u91cc\u9762\u653e\u5165Boa\u7684\u4e3b\u8981\u914d\u7f6e\u6587\u4ef6boa.conf 1 2 3 4 5 6 7 8 9 10 11 12 # \u65b0\u5efa\u76ee\u5f55 mkdir /etc/boa # \u590d\u5236 boa.conf\u4f4d\u4e8e\u89e3\u538b\u7684\u538b\u7f29\u5305\u4e0b cp boa.conf /etc/boa # \u4fee\u6539/etc/boa/boa.conf gedit /etc/boa/boa.conf # 1.User 0 # 2.Group 0 # 3.ScriptAlias /cgi-bin/ /var/www/cgi-bin/ # 4.ServerName www.your.org.here \u53bb\u6389# # 5.\u6ce8\u91ca\u6389AccessLog\u547d\u4ee4 # AccessLog /var/log/boa/access_log \u4fee\u6539src/compat.h 1 2 # \u4fee\u6539 define TIMEZONE_OFFSET(foo) foo##->tm_gmtoff \u4e3a #define TIMEZONE_OFFSET(foo) foo->tm_gmtoff \u4fee\u6539 src/log.c 1 2 3 4 5 6 7 8 9 if ( dup2 ( error_log, STDERR_FILENO ) == -1 ) { DIE ( \"unable to dup2 the error log\" ) ; } \u4fee\u6539\u4e3a ( \u5373\u6ce8\u91ca\u6389 ) /*if ( dup2 ( error_log, STDERR_FILENO ) == -1 ) { DIE ( \"unable to dup2 the error log\" ) ; } */ \u4fee\u6539src/boa.c 1 2 3 4 5 6 7 8 9 10 11 12 13 if ( setuid ( 0 ) ! = -1 ) { DIE ( \u201dicky Linux kernel bug!\u201d ) ; } \u4fee\u6539\u4e3a #if 0 if ( setuid ( 0 ) ! = -1 ) { DIE ( \u201dicky Linux kernel bug!\u201d ) ; } #endif \u521b\u5efalog\u76ee\u5f55 1 2 3 4 5 6 7 8 9 mkdir /var/log/boa mkdir /var/log/boa/error_log mkdir /var/log/boa/access_log # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/log/boa # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/log/boa/error_log # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/log/boa/access_log \u521b\u5efaCGI\u76ee\u5f55 1 2 3 4 # \u521b\u5efacgi\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c\u5df2\u7ecf\u6709\u4e86\u53ef\u4ee5\u4e0d\u5efa mkdir /var/www/cgi-bin # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/www/cgi-bin \u5728src\u76ee\u5f55\u4e0b\u7f16\u8bd1 1 2 # \u7f16\u8bd1 make \u5728src\u76ee\u5f55\u4e0b\u8fd0\u884cboa 1 ./boa Reference\uff1a \u9996\u63a8\u6559\u7a0b- https://blog.csdn.net/wangjingnbamvp/article/details/8701257 https://zhuanlan.zhihu.com/p/115112314?from_voters_page=true vmware\u5171\u4eab\u6587\u4ef6\u5939 Step 7 \u00b6 \u7f16\u5199\u7f51\u9875\u6587\u4ef6\uff0c\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95eeboa\u670d\u52a1\u5668\u7f51\u9875 \u5728boa\u5df2\u542f\u52a8\u7684\u524d\u63d0\u4e0b\uff0c\u5728/var/www/html\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaindex.html / \u5982\u679c\u5df2\u7ecf\u6709\u4e86\u5c31\u7528\u81ea\u5df1\u7684\u5185\u5bb9\u8986\u76d6\u4ed6 \u5728firefox\u8f93\u5165 127.0.0.1\uff0c\u5373\u53ef\u663e\u793a\u81ea\u5df1\u7f16\u5199\u7684\u7f51\u9875 1 2 3 4 5 6 7 < html > < body > < h1 > Welcome to xxx's Website! </ h1 > </ body > </ html > \u5728firefox\u8f93\u5165 127.0.0.1\uff0c\u5373\u53ef\u663e\u793a\u81ea\u5df1\u7f16\u5199\u7684\u7f51\u9875 \u4e0a\u8ff0Step6\u548cStep7\u7684boa\u6362\u6210apache\u3010boa\u8dd1\u4e0d\u8d77\u6765\u7528apache\u3011 1 2 3 4 # \u542f\u52a8apache systemctl start httpd # \u505c\u6b62apache start -> stop \u5176\u4f59\u8bbf\u95ee\u6b65\u9aa4\u540c\u4e0a Step 8 \u00b6 \u7f16\u5199shell\u7a0b\u5e8f\uff0c\u68c0\u6d4b/test\u6587\u4ef6\u5939\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\u663e\u793a\u91cc\u8fb9 \u9996\u5148\u51fa/test\u76ee\u5f55(\u5373\u548ctest\u76ee\u5f55\u5e76\u884c)\uff0c\u65b0\u5efashell\u811a\u672c 1 vi a.sh \u5185\u5bb9\u5982\u4e0b\u3010\u5783\u573e\u4ee3\u7801\uff0c\u5efa\u8bae\u81ea\u884c\u767e\u5ea6\u3011 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #! /bin/bash for file in ` ls ` #\u6ce8\u610f\u6b64\u5904\u8fd9\u662f\u4e24\u4e2a\u53cd\u5f15\u53f7\uff0c\u8868\u793a\u8fd0\u884c\u7cfb\u7edf\u547d\u4ee4 do # -d directory \u5224\u65ad\u6587\u4ef6\u5939test\u662f\u5426\u5b58\u5728 if [[ ! -d \"test\" ]] ; then pass else echo \"test exists, showing inside...\" for file in \"./test\" /* do echo \"file: ${ file } \" done break fi done \u6267\u884cshell 1 bash ./a.sh","title":"\u5d4c\u5165\u5f0f\u8ba1\u7b97\u673a\u7cfb\u7edf\u5b9e\u9a8c\u81ea\u6551\u624b\u518c"},{"location":"Linux/Linux/#csb-","text":"","title":"csb-\u5d4c\u5165\u5f0f\u8ba1\u7b97\u673a\u7cfb\u7edf\u5b9e\u9a8c\u81ea\u6551\u624b\u518c"},{"location":"Linux/Linux/#step-1","text":"\u5728C:\u76d8\u4e0b\u65b0\u5efa\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199\u4e3a\u540d\u79f0\u7684\u865a\u62df\u673a\u5e76\u5b89\u88c5\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199+centos\u4e3a\u540d\u79f0\u7684centos\u7cfb\u7edf","title":"Step 1"},{"location":"Linux/Linux/#environment","text":"vmware version \u672a\u77e5 centos 8","title":"Environment"},{"location":"Linux/Linux/#request","text":"\u8001\u5e08\u63d0\u4f9bcentos 8\u56fe\u5f62\u5316\u754c\u9762\u7684\u955c\u50cfiso\u6587\u4ef6","title":"Request"},{"location":"Linux/Linux/#experiment","text":"","title":"Experiment"},{"location":"Linux/Linux/#1-","text":"\u3010\u5178\u578b\u3011\u7684\u65b9\u6cd5 - \u63a8\u8350 \u6587\u4ef6 > \u65b0\u5efa\u865a\u62df\u673a > \u5178\u578b > \u4e0b\u4e00\u6b65 > \u7a0d\u540e\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \u5ba2\u6237\u673a\u64cd\u4f5c\u7cfb\u7edf\u9009\u62e9 Linux \uff0c\u7248\u672c\u9009\u62e9centos7(\u7531\u4e8e\u5b66\u751f\u673a\u5668\u53ea\u6709centos7\u53ef\u4f9b\u9009\u62e9) \u865a\u62df\u673a\u540d\u79f0\u6539\u4e3a\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199+centos \u5904\u7406\u5668\u914d\u7f6e\u3001\u6b64\u865a\u62df\u673a\u7684\u5185\u5b58\u3001\u7f51\u7edc\u7c7b\u578b\u3001\u9009\u62e9\u78c1\u76d8\u3001\u6307\u5b9a\u78c1\u76d8\u5bb9\u91cf\u3001\u6307\u5b9a\u78c1\u76d8\u6587\u4ef6\u76ee\u524d\u65e0\u9700\u4fee\u6539\uff0c\u53ef\u7a0d\u540e\u518d\u8c03\u6574 \u3010\u81ea\u5b9a\u4e49\u3011\u7684\u65b9\u6cd5 \u6587\u4ef6 > \u65b0\u5efa\u865a\u62df\u673a > \u81ea\u5b9a\u4e49(\u9ad8\u7ea7) > \u4e0b\u4e00\u6b65 > \u7a0d\u540e\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \u5ba2\u6237\u673a\u64cd\u4f5c\u7cfb\u7edf\u9009\u62e9 Linux \uff0c\u7248\u672c\u9009\u62e9centos7(\u7531\u4e8e\u5b66\u751f\u673a\u5668\u53ea\u6709centos7\u53ef\u4f9b\u9009\u62e9) \u865a\u62df\u673a\u540d\u79f0\u6539\u4e3a\u4ee5\u81ea\u5df1\u540d\u5b57\u5b57\u6bcd\u7b80\u5199+centos \u5904\u7406\u5668\u914d\u7f6e\u3001\u6b64\u865a\u62df\u673a\u7684\u5185\u5b58\u3001\u7f51\u7edc\u7c7b\u578b\u3001\u9009\u62e9I/O\u63a7\u5236\u5668\u7c7b\u578b\u3001\u9009\u62e9\u78c1\u76d8\u7c7b\u578b\u3001\u9009\u62e9\u78c1\u76d8\u3001\u6307\u5b9a\u78c1\u76d8\u5bb9\u91cf\u3001\u6307\u5b9a\u78c1\u76d8\u6587\u4ef6\u76ee\u524d\u65e0\u9700\u4fee\u6539\uff0c\u53ef\u7a0d\u540e\u518d\u8c03\u6574","title":"1 - \u65b0\u5efa\u865a\u62df\u673a"},{"location":"Linux/Linux/#2-","text":"\u7f16\u8f91\u865a\u62df\u673a\u8bbe\u7f6e\uff0c\u9009\u62e9CD/DVD\uff0c\u4f7f\u7528ISO\u6620\u50cf\u6587\u4ef6 \u7f51\u7edc\u9002\u914d\u5668\uff1aNAT \u6a21\u5f0f \u548c \u6865\u63a5\u6a21\u5f0f\u90fd\u53ef\uff0c\u4eb2\u6d4bNAT\u5728\u5b66\u751f\u673a\u4e0a\u53ef\u80fd\u65e0\u6cd5\u6210\u529f\uff0c\u6865\u63a5\u53ef\uff0c\u4e24\u8005\u7075\u6d3b\u5207\u6362 \u5185\u5b58\u53ef\u7075\u6d3b\u8c03\u5927","title":"2 - \u4fee\u6539\u914d\u7f6e"},{"location":"Linux/Linux/#3-","text":"\u9009install centos linux 8(\u7b2c\u4e00\u4e2a)\uff0c\u4e0d\u9009test \u82e5\u51fa\u73b0 end Kernel panic - not syncing:Fatal exception Vmware \uff0c\u5219\u5728\u865a\u62df\u673a\u8bbe\u7f6e\u4e2d \u79fb\u9664\u6253\u5370\u673a \u8f6f\u4ef6\u9009\u62e9 \u6587\u4ef6\u53ca\u5b58\u50a8\u670d\u52a1\u5668(\u5305\u542bnfs) FTP\u670d\u52a1\u5668 \u57fa\u672c\u7f51\u9875\u670d\u52a1\u5668 \u5f00\u53d1\u5de5\u5177 RPM\u5f00\u53d1\u5de5\u5177 \u5b89\u88c5\u76ee\u7684\u5730\uff1a\u70b9\u51fb\u9009\u62e9 \u672c\u5730\u6807\u51c6\u78c1\u76d8 \uff0c\u8981\u8fde\u7eed\u786e\u8ba4 \u4e24\u6b21 \u624d\u53ef\u6210\u529f \u5f00\u59cb\u5b89\u88c5ing... 2020.10.25 23:05 - 2020.10.25 23:31 \u5386\u65f626\u5206\u949f \u6b64\u65f6\u53ef\u4ee5\u8fdb\u884cRoot\u5bc6\u7801\u7684\u521b\u5efa\uff1a123456789 & \u4e5f\u53ef\u521b\u5efa\u7528\u6237(\u4e0d\u521b\u5efa\u7684\u8bdd\uff0c\u5c31\u662fRoot\u7528\u6237\u767b\u5f55) \u5b89\u88c5\u540e\u91cd\u542f\uff0c\u9700\u8981 \u63a5\u53d7\u8bb8\u53ef\u8bc1 \u624d\u80fd\u6210\u529f\u5f00\u673a ps\uff1a\u5982\u679c\u770b\u7740\u4e0d\u4e60\u60ef\uff0c\u5219\u67e5\u770b > \u81ea\u52a8\u8c03\u6574\u5927\u5c0f > \u81ea\u52a8\u9002\u5e94\u5ba2\u6237\u673a","title":"3 - \u5b89\u88c5\u7cfb\u7edf"},{"location":"Linux/Linux/#step-2","text":"\u5728\u65b0\u5efa\u7684centos\u7cfb\u7edf\u4e2d\u65b0\u5efa/test\u6587\u4ef6\u5939\uff0c\u914d\u7f6e\u5e76\u5f00\u542fnfs\u670d\u52a1\uff0c\u628a\u81ea\u5df1\u7684/test\u6587\u4ef6\u5939\u6302\u8f7d\u5230/var/www\u6587\u4ef6\u5939\u4e0b \u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u6d3b\u52a8\u201d\uff0c\u9009\u62e9 \u7ec8\u7aef \uff0c\u5207\u6362\u5230Root\u7528\u6237 1 su root \u6d4b\u8bd5\u7f51\u7edc\u8fde\u901a\u6027 1 2 3 4 5 6 7 # \u67e5\u770b\u7f51\u7edc\u72b6\u6001 ifconfig # \u914d\u7f6e\u672c\u673aipv4\u5730\u5740 # \u5728\u81ea\u5df1windows\u672c\u673a\u7684ipv4\u5730\u5740\u4e0a+100 # ens33\u662fifconfig\u67e5\u770b\u7684\u7f51\u5361\u540d\u79f0\uff0c\u9664\u4e86lo\u548cvirbr0\u4e4b\u5916 ifconfig ens33:1 192 .168.1.104 \u65b0\u5efa/test\u6587\u4ef6\u5939 1 2 3 4 5 6 7 8 9 10 11 # pwd \u663e\u793a\u5f53\u524d\u8def\u5f84 /home/csb ls # \u51fa\u73b0 \u684c\u9762 \u97f3\u4e50 \u4e0b\u8f7d # \u65b0\u5efatest\u5171\u4eab\u6587\u4ef6\u5939 mkdir test # \u4fee\u6539\u6743\u9650 - \u4e0d\u77e5\u9053\u7528\u4e8e\u5565 chmod -R 777 /home/csb/test \u914d\u7f6e\u5e76\u5f00\u542fnfs\u670d\u52a1 1 2 3 4 5 6 service nfs-server start # https://blog.csdn.net/qq_33559992/article/details/51866043 # \u67e5\u770b\u72b6\u6001 systemctl status nfs-server systemctl status rpcbind \u628a\u81ea\u5df1\u7684/test\u6587\u4ef6\u5939\u6302\u8f7d\u5230/var/www\u6587\u4ef6\u5939\u4e0b\u3010\u5f85\u786e\u8ba4\u3011 1 2 3 4 5 6 7 8 9 mount --bind /home/csb/test /var/www # \u540c\uff1amount -o bind /home/csb/test/ /var/www/ # \u540c\uff1amount -B /home/csb/test/ /var/www/ # \u53d6\u6d88\u6302\u8f7d unmount /home/csb/test/ # \u67e5\u770b\u5e2e\u52a9\u6587\u6863 mount -h Linux\u4e2d\u6302\u8f7d\u8be6\u89e3 Linux\u4e2d\u7684\u6839\u76ee\u5f55\u4ee5\u5916\u7684\u6587\u4ef6\u8981\u60f3\u88ab\u8bbf\u95ee\uff0c\u9700\u8981\u5c06\u5176\u201c\u5173\u8054\u201d\u5230\u6839\u76ee\u5f55\u4e0b\u7684\u67d0\u4e2a\u76ee\u5f55\u6765\u5b9e\u73b0\uff0c\u8fd9\u79cd\u5173\u8054\u64cd\u4f5c\u5c31\u662f\u201c\u6302\u8f7d\u201d\uff0c\u6839\u76ee\u5f55\u4e0b\u7684\u67d0\u4e2a\u76ee\u5f55\u5c31\u662f\u201c\u6302\u8f7d\u70b9\u201d\u3002\u89e3\u9664\u5173\u8054\u5173\u7cfb\u7684\u8fc7\u7a0b\u79f0\u201c\u5378\u8f7d\u201d \u201c\u6302\u8f7d\u70b9\u201d\u8981\u6c42 \u6302\u8f7d\u70b9\u76ee\u5f55\u4e0d\u53ef\u88ab\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528 \u6302\u8f7d\u70b9\u4e0b\u539f\u6709\u6587\u4ef6\u5c06\u88ab\u9690\u85cf linux nfs\u8fdc\u7a0b\u6302\u8f7d\u6587\u4ef6\u76ee\u5f55 - \u5927\u6982\u4e86\u89e3\u8fc7\u7a0b / \u5177\u4f53\u6ca1\u5b9e\u8df5 https://www.cnblogs.com/fooller/p/11511380.html https://www.cnblogs.com/merely/p/10793877.html https://www.cnblogs.com/ylnic/p/10044271.html","title":"Step 2"},{"location":"Linux/Linux/#step-3","text":"\u7f16\u5199hello.c\u7a0b\u5e8f\uff0c\u6253\u5370\u8f93\u51fa\u81ea\u5df1\u7684\u59d3\u540d\u62fc\u97f3\u53ca\u5b66\u53f7 1 2 3 4 # \u8fdb\u5165test\u6587\u4ef6\u5939 cd ./test/ # \u65b0\u5efa vi hello.c \u5199\u5165\u5982\u4e0b\u5185\u5bb9(\u9996\u5148\u6309insert\uff0c\u624d\u53ef\u7f16\u8f91) 1 2 3 4 5 6 #include <stdio.h> int main (){ printf ( \"chensibo201710513054 \\n \" ); return 0 ; } \u6309esc\u9000\u51fa\u540e\uff0c :wq \u4fdd\u5b58","title":"Step 3"},{"location":"Linux/Linux/#step-4delete","text":"\u4e0b\u8f7d\u89e3\u538b\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u5230/test\u6587\u4ef6\u5939\u4e0b\uff0c\u6dfb\u52a0\u7cfb\u7edf\u8def\u5f84 \u4ea4\u53c9\u7f16\u8bd1\uff1a\u5728\u5f53\u524d\u7f16\u8bd1\u5e73\u53f0\u4e0b\uff0c\u7f16\u8bd1\u51fa\u6765\u7684\u7a0b\u5e8f\u80fd\u8fd0\u884c\u5728\u4f53\u7cfb\u7ed3\u6784\u4e0d\u540c\u7684\u53e6\u4e00\u79cd\u76ee\u6807\u5e73\u53f0\u4e0a\uff0c\u4f46\u662f\u7f16\u8bd1\u5e73\u53f0\u672c\u8eab\u5374\u4e0d\u80fd\u8fd0\u884c\u8be5\u7a0b\u5e8f\u3002\u6bd4\u5982\uff0c\u5728 x86 \u5e73\u53f0\u4e0a\uff0c\u7f16\u5199\u7a0b\u5e8f\u5e76\u7f16\u8bd1\u6210\u80fd\u8fd0\u884c\u5728 ARM \u5e73\u53f0\u7684\u7a0b\u5e8f\uff0c\u7f16\u8bd1\u5f97\u5230\u7684\u7a0b\u5e8f\u5728 x86 \u5e73\u53f0\u4e0a\u662f\u4e0d\u80fd\u8fd0\u884c\u7684\uff0c\u5fc5\u987b\u653e\u5230 ARM \u5e73\u53f0\u4e0a\u624d\u80fd\u8fd0\u884c \u4e2a\u4eba\u7406\u89e3\u601d\u8def - \u672a\u5b9e\u8df5 1. \u9996\u5148\u5b89\u88c5Linux\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u4e0b\u8f7d\u540e\u89e3\u538b(tar\u547d\u4ee4) - https://blog.csdn.net/baidu_37973494/article/details/82949963 2. \u5c06\u8be5\u5de5\u5177\u94fe\u5bfc\u51fa\u5230\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u5f97\u7ec8\u7aef\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u547d\u4ee4 - https://blog.csdn.net/zy_heu/article/details/80062806 - https://blog.csdn.net/lhh_qrsly/article/details/109193284","title":"Step 4\u3010delete\u3011"},{"location":"Linux/Linux/#step-5","text":"\u7f16\u5199makefile\u6587\u4ef6\uff0c\u901a\u8fc7make\u5b9e\u73b0hello.c\u4ea4\u53c9\u7f16\u8bd1 \u7f16\u5199makefile\u6587\u4ef6\uff0c\u5728\u547d\u4ee4\u884c\u4e0b 1 2 gedit makefile1 # \u6216\u8005 vim makefile1 \u5199\u5165\u5982\u4e0b\u5185\u5bb9\uff1a \u6cd5\u2460 1 2 3 4 all : gcc hello.c -o hello clean : rm -rf hello hello.o \u4e0a\u8ff0\u4fee\u6539\u4e3a makefile \u81ea\u52a8\u53d8\u91cf \u5199\u6cd5 1 2 3 4 5 6 7 8 .PHONY : clean CC = gcc OBJ = hello.c hello : $( OBJ ) #hello:hello.c $( CC ) $^ -o $@ clean : rm -f *.o hello \u89e3\u6790\uff1a 1 2 3 4 5 6 7 8 9 10 .PHONY : clean CC = gcc OBJ = hello.c hello : $( OBJ ) $( CC ) $^ -o $@ # $^ \u6307\u7684\u662f\u5192\u53f7\u540e\u7684\u503c # $@ \u6307\u7684\u662f\u5192\u53f7\u524d\u9762\u7684hello # \u76f8\u5f53\u4e8egcc hello.c -o hello clean : rm -f *.o hello \u5173\u4e8e\u81ea\u52a8\u53d8\u91cf\u7684\u4e00\u4e9btips \u9009\u9879\u540d \u4f5c\u7528 $@ \u89c4\u5219\u7684\u76ee\u6807\u6587\u4ef6\u540d $< \u89c4\u5219\u7684\u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6\u540d $^ \u89c4\u5219\u7684\u6240\u6709\u4f9d\u8d56\u6587\u4ef6\u5217\u8868 reference: - https://blog.csdn.net/men_wen/article/details/75272585 - https://blog.csdn.net/u010299133/article/details/88761179 \u6216\u8005\u6cd5\u2461 [\u7a0d\u590d\u6742\uff0c\u5206\u4e3a\u4e24\u4e2a\u8fc7\u7a0b] 1 2 3 4 5 6 hello : hello . o gcc hello.o -o hello hello.o : hello . c gcc -c hello.c clean : rm -rf hello.o hello \u5bf9\u5e94\u7684\u81ea\u52a8\u53d8\u91cf\u5199\u6cd5 1 2 3 4 5 6 7 8 9 .PHONY : clean CC = gcc hello : hello . o $( CC ) $^ -o $@ hello.o : hello . c $( CC ) -c $^ -o $@ clean : rm -f *.o hello all \uff1a\u5176\u529f\u80fd\u4e00\u822c\u662f\u7f16\u8bd1\u6240\u6709\u7684\u76ee\u6807 clean \uff1a\u529f\u80fd\u662f\u5220\u9664\u6240\u6709\u88abmake\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u6b64\u60c5\u666f\u4e0b\u5220\u9664\u7684\u65f6\u4e2d\u95f4.o\u6587\u4ef6 \u901a\u8fc7gcc\u4e0d\u52a0\u53c2\u6570\u53ef\u4ee5 \u4e00\u6b65\u76f4\u63a5\u7f16\u8bd1 \u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 -o <file> \u8868\u793a\u5c06\u8f93\u51fa\u653e\u5165<\u6587\u4ef6> -c \u8868\u793a\u7f16\u8bd1\u548c\u6c47\u7f16\uff0c\u4f46\u4e0d\u8981\u94fe\u63a5\uff0c\u751f\u6210.o\u6587\u4ef6\uff0c gcc hello.o \u5373gcc\u81ea\u52a8\u94fe\u63a5\u4e0a\u4e00\u6b65\u751f\u6210\u7684hello.o\u6765\u751f\u6210\u6700\u7ec8\u53ef\u6267\u884c\u6587\u4ef6hello \u901a\u8fc7make\u5c06\u6e90\u6587\u4ef6hello.c\u7f16\u8bd1\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 1 2 # \u5728\u547d\u4ee4\u884c\u4e0b\u8f93\u5165 make -f makefile1 \u51fa\u73b0\u9057\u6f0f\u5206\u9694\u7b26\u62a5\u9519\uff1a https://blog.csdn.net/yiranant/article/details/46582059 \u8fd0\u884c 1 2 # \u7ec8\u7aef - ls - \u7eff\u8272 ./hello Reference\uff1a https://blog.csdn.net/songshuai0223/article/details/88207566","title":"Step 5"},{"location":"Linux/Linux/#step-6","text":"\u5728\u4e3b\u673a\u7aef\u7f16\u8bd1boa","title":"Step 6"},{"location":"Linux/Linux/#request_1","text":"\u8001\u5e08\u63d0\u4f9bboa \u6216\u8005\u3010\u8fde\u7f51\u3011 http://www.boa.org/boa-0.94.13.tar.gz","title":"Request"},{"location":"Linux/Linux/#experiment_1","text":"\u5b89\u88c5boa 1 2 3 4 5 6 7 8 9 10 # \u5b89\u88c5\u5f00\u53d1\u5de5\u5177\u53ca\u5e93 yum install flex bison # \u89e3\u538b tar -xzvf boa-0.94.13.tar.gz cd boa-0.94.13/src # \u68c0\u6d4b\u73af\u5883\uff0c\u751f\u4ea7makefile ./configure \u4fee\u6539boa\u76f8\u5173\u6587\u4ef6 Boa\u9700\u8981\u5728/etc\u76ee\u5f55\u4e0b\u5efa\u7acb\u4e00\u4e2aboa\u76ee\u5f55\uff0c\u91cc\u9762\u653e\u5165Boa\u7684\u4e3b\u8981\u914d\u7f6e\u6587\u4ef6boa.conf 1 2 3 4 5 6 7 8 9 10 11 12 # \u65b0\u5efa\u76ee\u5f55 mkdir /etc/boa # \u590d\u5236 boa.conf\u4f4d\u4e8e\u89e3\u538b\u7684\u538b\u7f29\u5305\u4e0b cp boa.conf /etc/boa # \u4fee\u6539/etc/boa/boa.conf gedit /etc/boa/boa.conf # 1.User 0 # 2.Group 0 # 3.ScriptAlias /cgi-bin/ /var/www/cgi-bin/ # 4.ServerName www.your.org.here \u53bb\u6389# # 5.\u6ce8\u91ca\u6389AccessLog\u547d\u4ee4 # AccessLog /var/log/boa/access_log \u4fee\u6539src/compat.h 1 2 # \u4fee\u6539 define TIMEZONE_OFFSET(foo) foo##->tm_gmtoff \u4e3a #define TIMEZONE_OFFSET(foo) foo->tm_gmtoff \u4fee\u6539 src/log.c 1 2 3 4 5 6 7 8 9 if ( dup2 ( error_log, STDERR_FILENO ) == -1 ) { DIE ( \"unable to dup2 the error log\" ) ; } \u4fee\u6539\u4e3a ( \u5373\u6ce8\u91ca\u6389 ) /*if ( dup2 ( error_log, STDERR_FILENO ) == -1 ) { DIE ( \"unable to dup2 the error log\" ) ; } */ \u4fee\u6539src/boa.c 1 2 3 4 5 6 7 8 9 10 11 12 13 if ( setuid ( 0 ) ! = -1 ) { DIE ( \u201dicky Linux kernel bug!\u201d ) ; } \u4fee\u6539\u4e3a #if 0 if ( setuid ( 0 ) ! = -1 ) { DIE ( \u201dicky Linux kernel bug!\u201d ) ; } #endif \u521b\u5efalog\u76ee\u5f55 1 2 3 4 5 6 7 8 9 mkdir /var/log/boa mkdir /var/log/boa/error_log mkdir /var/log/boa/access_log # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/log/boa # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/log/boa/error_log # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/log/boa/access_log \u521b\u5efaCGI\u76ee\u5f55 1 2 3 4 # \u521b\u5efacgi\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c\u5df2\u7ecf\u6709\u4e86\u53ef\u4ee5\u4e0d\u5efa mkdir /var/www/cgi-bin # \u4fee\u6539\u6743\u9650 chmod -R 777 /var/www/cgi-bin \u5728src\u76ee\u5f55\u4e0b\u7f16\u8bd1 1 2 # \u7f16\u8bd1 make \u5728src\u76ee\u5f55\u4e0b\u8fd0\u884cboa 1 ./boa Reference\uff1a \u9996\u63a8\u6559\u7a0b- https://blog.csdn.net/wangjingnbamvp/article/details/8701257 https://zhuanlan.zhihu.com/p/115112314?from_voters_page=true vmware\u5171\u4eab\u6587\u4ef6\u5939","title":"Experiment"},{"location":"Linux/Linux/#step-7","text":"\u7f16\u5199\u7f51\u9875\u6587\u4ef6\uff0c\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95eeboa\u670d\u52a1\u5668\u7f51\u9875 \u5728boa\u5df2\u542f\u52a8\u7684\u524d\u63d0\u4e0b\uff0c\u5728/var/www/html\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaindex.html / \u5982\u679c\u5df2\u7ecf\u6709\u4e86\u5c31\u7528\u81ea\u5df1\u7684\u5185\u5bb9\u8986\u76d6\u4ed6 \u5728firefox\u8f93\u5165 127.0.0.1\uff0c\u5373\u53ef\u663e\u793a\u81ea\u5df1\u7f16\u5199\u7684\u7f51\u9875 1 2 3 4 5 6 7 < html > < body > < h1 > Welcome to xxx's Website! </ h1 > </ body > </ html > \u5728firefox\u8f93\u5165 127.0.0.1\uff0c\u5373\u53ef\u663e\u793a\u81ea\u5df1\u7f16\u5199\u7684\u7f51\u9875 \u4e0a\u8ff0Step6\u548cStep7\u7684boa\u6362\u6210apache\u3010boa\u8dd1\u4e0d\u8d77\u6765\u7528apache\u3011 1 2 3 4 # \u542f\u52a8apache systemctl start httpd # \u505c\u6b62apache start -> stop \u5176\u4f59\u8bbf\u95ee\u6b65\u9aa4\u540c\u4e0a","title":"Step 7"},{"location":"Linux/Linux/#step-8","text":"\u7f16\u5199shell\u7a0b\u5e8f\uff0c\u68c0\u6d4b/test\u6587\u4ef6\u5939\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\u663e\u793a\u91cc\u8fb9 \u9996\u5148\u51fa/test\u76ee\u5f55(\u5373\u548ctest\u76ee\u5f55\u5e76\u884c)\uff0c\u65b0\u5efashell\u811a\u672c 1 vi a.sh \u5185\u5bb9\u5982\u4e0b\u3010\u5783\u573e\u4ee3\u7801\uff0c\u5efa\u8bae\u81ea\u884c\u767e\u5ea6\u3011 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #! /bin/bash for file in ` ls ` #\u6ce8\u610f\u6b64\u5904\u8fd9\u662f\u4e24\u4e2a\u53cd\u5f15\u53f7\uff0c\u8868\u793a\u8fd0\u884c\u7cfb\u7edf\u547d\u4ee4 do # -d directory \u5224\u65ad\u6587\u4ef6\u5939test\u662f\u5426\u5b58\u5728 if [[ ! -d \"test\" ]] ; then pass else echo \"test exists, showing inside...\" for file in \"./test\" /* do echo \"file: ${ file } \" done break fi done \u6267\u884cshell 1 bash ./a.sh","title":"Step 8"},{"location":"Linux/Linux_Corresponence_Windows/","text":"\u4e91\u4e3b\u673a Linux \u4e0e Windows \u7684\u6587\u4ef6\u4ea4\u4e92 \u00b6 \u73af\u5883\uff1a \u672c\u673a\uff1a win10 \u4e91\u4e3b\u673a\uff1a \u817e\u8baf\u4e91\u4e3b\u673a ubuntu 18.04.4 LTS 1 \u8fde\u63a5\u4e91\u4e3b\u673a \u00b6 \u6253\u5f00 windows powershell \u7528 ssh \u8fdb\u884c\u8fdc\u7a0b\u8fde\u63a5\uff1a ssh ID@Public_IP ,\u8f93\u5165\u5bc6\u7801 \u5207\u6362 user : su - username , \u8f93\u5165\u5bc6\u7801 2 \u91c7\u7528 ftp \u670d\u52a1\u5668\u8fdb\u884c\u6587\u4ef6\u4ea4\u4e92 \u00b6 2.1 \u4e91\u4e3b\u673a\u642d\u5efa ftp \u670d\u52a1\u5668 \u00b6 \u4e0d\u540c\u7684 Linux \u7cfb\u7edf\u91c7\u7528\u7684\u642d\u5efa\u65b9\u5f0f\u6709\u6240\u5dee\u5f02\uff0c\u53ef\u6839\u636e\u5bf9\u5e94\u7684\u76f8\u5173\u6559\u7a0b\uff0c\u672c\u6587\u4ee5 unbuntu \u4e3a\u4f8b \u66f4\u65b0\uff1a sudo apt-get update \u5b89\u88c5\uff1a sudo apt-get install vsftpd \u542f\u52a8\uff1a sudo service vsftpd start \u67e5\u770b\u72b6\u6001\uff1a sudo service vsftpd status \u5173\u95ed: sudo service vsftpd stop 2.2 \u914d\u7f6e\u670d\u52a1\u6587\u4ef6 \u00b6 \u914d\u7f6e\u6587\u4ef6\uff1a sudo vim /etc/vsftpd.conf \u8ffd\u52a0\uff08 GG \u53ef\u4ee5\u5b9a\u4f4d\u5230\u6700\u540e\u4e00\u884c\uff09\uff1a 1 2 3 4 5 userlist_deny=NO userlist_enable=YES userlist_file=/etc/allow_users seccomp_sandbox=NO local_enable=YES \u82e5\u540e\u9762\u51fa\u73b0\u4e86 550 Peimission Denied \u7684\u9519\u8bef \u9700\u8981\u5728 conf \u6587\u4ef6\u53cd\u6ce8\u91ca\u6389\u4ee5\u4e0b\u8fd9\u884c\uff1a write_enable=YES \uff08\u5728 vim \u4e2d\u53ef\u4ee5\u901a\u8fc7 /wri \u7b49\u547d\u4ee4\u5339\u914d\u5b9a\u4f4d\uff09 \u65b0\u5efa\u6587\u4ef6\uff1a sudo vim /etc/allow_users \uff0c\u52a0\u5165\u81ea\u5df1\u7684 username \u68c0\u67e5\u6587\u4ef6\uff1a sudo vim /etc/ftpushers ,\u8fd9\u91cc\u8bb0\u5f55\u7684\u662f\u4e0d\u80fd\u8bbf\u95ee ftp \u670d\u52a1\u5668\u7684\u540d\u5355\uff0c\u82e5\u6709\u81ea\u5df1\u7684\u7528\u6237\u540d\u5219\u5220\u6389 2.3 \u9a8c\u8bc1\u670d\u52a1\u5668\u662f\u5426\u642d\u5efa\u6210\u529f \u00b6 (1) \u5728 cmd \u8f93\u5165 ftp Public_IP (2) \u5728 windows \u8d44\u6e90\u7ba1\u7406\u5668 \u7684\u5730\u5740\u680f\u8f93\u5165 ftp://Public_IP \u82e5\u51fa\u73b0\u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u754c\u9762\uff0c\u5219\u642d\u5efa\u6210\u529f \u8e29\u5751\u8bb0\u5f55 \uff1a \u82e5\u51fa\u73b0\u6743\u9650\u4e0d\u591f\u7684\u60c5\u51b5\uff0c\u6253\u5f00\uff1a \u63a7\u5236\u9762\u677f -> Internet \u9009\u9879 -> \u9ad8\u7ea7 -> \u53bb\u6389\u201c\u4f7f\u7528\u88ab\u52a8 ftp \u201d\u7684\u52fe -> \u91cd\u542f ftp \u670d\u52a1\u5668 2.4 windows \u672c\u5730\u7aef\u4f7f\u7528 ftp \u8fdb\u884c\u901a\u4fe1 \u00b6 \u5728 windows \u672c\u5730\u7aef\u4e2d\uff0c\u53ef\u4ee5\u4e0b\u8f7d\u5e76\u4f7f\u7528\u5de5\u5177 FileZilla \u5373\u53ef \u4e0a\u4f20\u6587\u4ef6\uff1a \u4e0b\u8f7d\u6587\u4ef6\uff1a 3 \u91c7\u7528 scp \u8fdb\u884c\u6587\u4ef6\u4ea4\u4e92 \u00b6 scp \u547d\u4ee4\u4e00\u822c\u662f\u7528\u5728 linux \u4f20 linux \u7684\u60c5\u51b5\u4e0b \u82e5\u662f windows \uff0c\u53ea\u9700\u8981\u5728 powershell \u4e2d\u4f7f\u7528\u5373\u53ef,\u8def\u5f84\u5c3d\u53ef\u80fd\u7528\u684c\u9762 desktop/ ,\u7528\u5176\u4ed6\u7684\u53ef\u80fd\u4f1a\u62a5\u9519 \u4e0a\u4f20\u6587\u4ef6\uff1a scp \u672c\u5730\u6587\u4ef6\u5730\u5740 \u4e91\u670d\u52a1\u5668\u5e10\u53f7@\u4e91\u670d\u52a1\u5668\u5b9e\u4f8b\u516c\u7f51 IP/\u57df\u540d:\u4e91\u670d\u52a1\u5668\u6587\u4ef6\u5730\u5740 \u4f8b\u5982\uff0c\u60a8\u9700\u8981\u5c06\u672c\u5730\u6587\u4ef6 /home/lnmp0.4.tar.gz \u4e0a\u4f20\u81f3 IP \u5730\u5740\u4e3a 129.20.0.2 \u7684\u4e91\u670d\u52a1\u5668\u5bf9\u5e94\u76ee\u5f55\u4e0b\uff0c\u5219\u6267\u884c\u7684\u547d\u4ee4\u5982\u4e0b\uff1a scp /home/Inmp0.4.tar.gz root@129.20.0.2:/home/Inmp0.4.tar.gz \u4e0b\u8f7d\u6587\u4ef6 scp \u4e91\u670d\u52a1\u5668\u5e10\u53f7@\u4e91\u670d\u52a1\u5668\u5b9e\u4f8b\u516c\u7f51 IP/\u57df\u540d:\u4e91\u670d\u52a1\u5668\u6587\u4ef6\u5730\u5740 \u672c\u5730\u6587\u4ef6\u5730\u5740 \u4f8b\u5982\uff0c\u60a8\u9700\u8981\u5c06 IP \u5730\u5740\u4e3a 129.20.0.2 \u7684\u4e91\u670d\u52a1\u5668\u6587\u4ef6 /home/lnmp0.4.tar.gz \u4e0b\u8f7d\u81f3\u672c\u5730\u5bf9\u5e94\u76ee\u5f55\u4e0b\uff0c\u5219\u6267\u884c\u7684\u547d\u4ee4\u5982\u4e0b\uff1a scp root@129.20.0.2:/home/Inmp0.4.tar.gz /home/Inmp0.4.tar.gz","title":"Linux\u4e0eWindows\u6587\u4ef6\u4ea4\u4e92"},{"location":"Linux/Linux_Corresponence_Windows/#linux-windows","text":"\u73af\u5883\uff1a \u672c\u673a\uff1a win10 \u4e91\u4e3b\u673a\uff1a \u817e\u8baf\u4e91\u4e3b\u673a ubuntu 18.04.4 LTS","title":"\u4e91\u4e3b\u673a Linux \u4e0e Windows \u7684\u6587\u4ef6\u4ea4\u4e92"},{"location":"Linux/Linux_Corresponence_Windows/#1","text":"\u6253\u5f00 windows powershell \u7528 ssh \u8fdb\u884c\u8fdc\u7a0b\u8fde\u63a5\uff1a ssh ID@Public_IP ,\u8f93\u5165\u5bc6\u7801 \u5207\u6362 user : su - username , \u8f93\u5165\u5bc6\u7801","title":"1 \u8fde\u63a5\u4e91\u4e3b\u673a"},{"location":"Linux/Linux_Corresponence_Windows/#2-ftp","text":"","title":"2 \u91c7\u7528 ftp \u670d\u52a1\u5668\u8fdb\u884c\u6587\u4ef6\u4ea4\u4e92"},{"location":"Linux/Linux_Corresponence_Windows/#21-ftp","text":"\u4e0d\u540c\u7684 Linux \u7cfb\u7edf\u91c7\u7528\u7684\u642d\u5efa\u65b9\u5f0f\u6709\u6240\u5dee\u5f02\uff0c\u53ef\u6839\u636e\u5bf9\u5e94\u7684\u76f8\u5173\u6559\u7a0b\uff0c\u672c\u6587\u4ee5 unbuntu \u4e3a\u4f8b \u66f4\u65b0\uff1a sudo apt-get update \u5b89\u88c5\uff1a sudo apt-get install vsftpd \u542f\u52a8\uff1a sudo service vsftpd start \u67e5\u770b\u72b6\u6001\uff1a sudo service vsftpd status \u5173\u95ed: sudo service vsftpd stop","title":"2.1 \u4e91\u4e3b\u673a\u642d\u5efa ftp \u670d\u52a1\u5668"},{"location":"Linux/Linux_Corresponence_Windows/#22","text":"\u914d\u7f6e\u6587\u4ef6\uff1a sudo vim /etc/vsftpd.conf \u8ffd\u52a0\uff08 GG \u53ef\u4ee5\u5b9a\u4f4d\u5230\u6700\u540e\u4e00\u884c\uff09\uff1a 1 2 3 4 5 userlist_deny=NO userlist_enable=YES userlist_file=/etc/allow_users seccomp_sandbox=NO local_enable=YES \u82e5\u540e\u9762\u51fa\u73b0\u4e86 550 Peimission Denied \u7684\u9519\u8bef \u9700\u8981\u5728 conf \u6587\u4ef6\u53cd\u6ce8\u91ca\u6389\u4ee5\u4e0b\u8fd9\u884c\uff1a write_enable=YES \uff08\u5728 vim \u4e2d\u53ef\u4ee5\u901a\u8fc7 /wri \u7b49\u547d\u4ee4\u5339\u914d\u5b9a\u4f4d\uff09 \u65b0\u5efa\u6587\u4ef6\uff1a sudo vim /etc/allow_users \uff0c\u52a0\u5165\u81ea\u5df1\u7684 username \u68c0\u67e5\u6587\u4ef6\uff1a sudo vim /etc/ftpushers ,\u8fd9\u91cc\u8bb0\u5f55\u7684\u662f\u4e0d\u80fd\u8bbf\u95ee ftp \u670d\u52a1\u5668\u7684\u540d\u5355\uff0c\u82e5\u6709\u81ea\u5df1\u7684\u7528\u6237\u540d\u5219\u5220\u6389","title":"2.2 \u914d\u7f6e\u670d\u52a1\u6587\u4ef6"},{"location":"Linux/Linux_Corresponence_Windows/#23","text":"(1) \u5728 cmd \u8f93\u5165 ftp Public_IP (2) \u5728 windows \u8d44\u6e90\u7ba1\u7406\u5668 \u7684\u5730\u5740\u680f\u8f93\u5165 ftp://Public_IP \u82e5\u51fa\u73b0\u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u754c\u9762\uff0c\u5219\u642d\u5efa\u6210\u529f \u8e29\u5751\u8bb0\u5f55 \uff1a \u82e5\u51fa\u73b0\u6743\u9650\u4e0d\u591f\u7684\u60c5\u51b5\uff0c\u6253\u5f00\uff1a \u63a7\u5236\u9762\u677f -> Internet \u9009\u9879 -> \u9ad8\u7ea7 -> \u53bb\u6389\u201c\u4f7f\u7528\u88ab\u52a8 ftp \u201d\u7684\u52fe -> \u91cd\u542f ftp \u670d\u52a1\u5668","title":"2.3 \u9a8c\u8bc1\u670d\u52a1\u5668\u662f\u5426\u642d\u5efa\u6210\u529f"},{"location":"Linux/Linux_Corresponence_Windows/#24-windows-ftp","text":"\u5728 windows \u672c\u5730\u7aef\u4e2d\uff0c\u53ef\u4ee5\u4e0b\u8f7d\u5e76\u4f7f\u7528\u5de5\u5177 FileZilla \u5373\u53ef \u4e0a\u4f20\u6587\u4ef6\uff1a \u4e0b\u8f7d\u6587\u4ef6\uff1a","title":"2.4 windows \u672c\u5730\u7aef\u4f7f\u7528 ftp \u8fdb\u884c\u901a\u4fe1"},{"location":"Linux/Linux_Corresponence_Windows/#3-scp","text":"scp \u547d\u4ee4\u4e00\u822c\u662f\u7528\u5728 linux \u4f20 linux \u7684\u60c5\u51b5\u4e0b \u82e5\u662f windows \uff0c\u53ea\u9700\u8981\u5728 powershell \u4e2d\u4f7f\u7528\u5373\u53ef,\u8def\u5f84\u5c3d\u53ef\u80fd\u7528\u684c\u9762 desktop/ ,\u7528\u5176\u4ed6\u7684\u53ef\u80fd\u4f1a\u62a5\u9519 \u4e0a\u4f20\u6587\u4ef6\uff1a scp \u672c\u5730\u6587\u4ef6\u5730\u5740 \u4e91\u670d\u52a1\u5668\u5e10\u53f7@\u4e91\u670d\u52a1\u5668\u5b9e\u4f8b\u516c\u7f51 IP/\u57df\u540d:\u4e91\u670d\u52a1\u5668\u6587\u4ef6\u5730\u5740 \u4f8b\u5982\uff0c\u60a8\u9700\u8981\u5c06\u672c\u5730\u6587\u4ef6 /home/lnmp0.4.tar.gz \u4e0a\u4f20\u81f3 IP \u5730\u5740\u4e3a 129.20.0.2 \u7684\u4e91\u670d\u52a1\u5668\u5bf9\u5e94\u76ee\u5f55\u4e0b\uff0c\u5219\u6267\u884c\u7684\u547d\u4ee4\u5982\u4e0b\uff1a scp /home/Inmp0.4.tar.gz root@129.20.0.2:/home/Inmp0.4.tar.gz \u4e0b\u8f7d\u6587\u4ef6 scp \u4e91\u670d\u52a1\u5668\u5e10\u53f7@\u4e91\u670d\u52a1\u5668\u5b9e\u4f8b\u516c\u7f51 IP/\u57df\u540d:\u4e91\u670d\u52a1\u5668\u6587\u4ef6\u5730\u5740 \u672c\u5730\u6587\u4ef6\u5730\u5740 \u4f8b\u5982\uff0c\u60a8\u9700\u8981\u5c06 IP \u5730\u5740\u4e3a 129.20.0.2 \u7684\u4e91\u670d\u52a1\u5668\u6587\u4ef6 /home/lnmp0.4.tar.gz \u4e0b\u8f7d\u81f3\u672c\u5730\u5bf9\u5e94\u76ee\u5f55\u4e0b\uff0c\u5219\u6267\u884c\u7684\u547d\u4ee4\u5982\u4e0b\uff1a scp root@129.20.0.2:/home/Inmp0.4.tar.gz /home/Inmp0.4.tar.gz","title":"3 \u91c7\u7528 scp \u8fdb\u884c\u6587\u4ef6\u4ea4\u4e92"},{"location":"Network/ComputerNetwork/","text":"\u3010\u8003\u7814\u5411\u3011\u8ba1\u7b97\u673a\u7f51\u7edc \u00b6 GBN\u3001 SR\u3001GDN \u00b6 \u7f51\u7edc\u5c42 \u00b6 \u8def\u7531\u8868\u548c\u8f6c\u53d1\u8868\u7684\u533a\u522b \u8def\u7531\u8868\u662f\u7f51\u7edc\u8bbe\u5907 \u6839\u636e\u8def\u7531\u534f\u8bae\u751f\u6210 \u7684\u8868\uff0c\u8f6c\u53d1\u8868\u662f\u7f51\u7edc\u8bbe\u5907 \u6839\u636e\u8def\u7531\u8868\u751f\u6210 \u7684 \u8def\u7531\u8868\u66f4 \u62bd\u8c61 \uff0c\u8f6c\u53d1\u8868\u66f4 \u5177\u4f53 \u8def\u7531\u8868\u5b58\u50a8\u4e09\u5143\u7ec4\uff1a\u7f51\u7edc\u76ee\u6807Destination\u3001\u7f51\u7edc\u63a9\u7801Mask\u3001\u4e0b\u4e00\u8df3NextHop\u7b49\u4fe1\u606f\uff0c\u53ea\u63cf\u8ff0\u7f51\u7edc\u94fe\u8def\u72b6\u6001\u548c\u65b9\u5411 \u8f6c\u53d1\u8868\u5fc5\u987b\u5305\u542b\u5b8c\u6210\u8f6c\u53d1\u529f\u80fd\u6240\u5fc5\u9700\u7684\u4fe1\u606f\uff0c\u5982\u4e3b\u673a\u65b9\u9762\u7684\u4fe1\u606f\u548c\u67d0\u4e9bMAC\u5730\u5740\u4fe1\u606f\u7b49\uff0c\u6bd4\u8def\u7531\u8868\u66f4 \u8be6\u7ec6 \u56e0\u4e3a\u6570\u636e\u5305 \u5230\u8fbe\u8def\u7531\u5668 \u7684\u65f6\u5019\uff0c\u8981\u6839\u636e\u8f6c\u53d1\u8868\u4e2d\u7684\u201c\u6307\u793a\u201d\u524d\u5f80\u7279\u5b9a\u7684 \u7aef\u53e3 \uff0c\u5373\u8f6c\u53d1\u8868\u7c7b\u4f3c\u4ea4\u6362\u673a\u7684\u5730\u5740\u4fe1\u606f\u8868 \u5373\u8f6c\u53d1\u8868\u5c06\u4ece\u8def\u7531\u5668\u7684\u67d0\u4e2a\u8f93\u5165\u7aef\u53e3\u8fdb\u5165\u7684\u6570\u636e\u5305\u4ece\u4e00\u4e2a\u8def\u7531\u5668\u7684\u5408\u9002\u7684\u8f93\u5165\u7aef\u53e3\u8f6c\u53d1\u51fa\u53bb [??]\u8f6c\u53d1\u8868\u7684\u7ed3\u6784\u5e94\u5f53\u4f7f\u67e5\u627e\u8fc7\u7a0b\u6700\u4f18\u5316\uff0c\u8def\u7531\u8868\u5219\u9700\u8981\u5bf9\u7f51\u7edc\u62d3\u6251\u53d8\u5316\u7684\u8ba1\u7b97\u6700\u4f18\u5316 [??]\u8def\u7531\u8868\u603b\u662f\u7531\u8f6f\u4ef6\u5b9e\u73b0\u7684\uff0c\u800c\u8f6c\u53d1\u8868\u53ef\u7531\u7279\u6b8a\u7684\u786c\u4ef6\u5b9e\u73b0 \u53c2\u8003\u8d44\u6599 https://www.cnblogs.com/qinyongzhu/p/4929833.html https://blog.csdn.net/qq_43030940/article/details/105037830 https://www.sohu.com/a/342616410_99906077 \u67d0\u5929\u5728\u6821\u56ed\u7f51\u8fdb\u884c\u6d4b\u8bd5\uff0c\u53d1\u73b0\u7528 tracert \u7684\u7b2c\u4e00\u8df3\u548c\u9ed8\u8ba4\u7f51\u5173\u7684\u5730\u5740\u4e0d\u4e00\u6837\uff0c\u8fd8\u4e0d\u77e5\u9053\u662f\u4e3a\u5565 \u8fd9\u96be\u9053\u662f\u8def\u7531\u8868\u66f4\u65b0\u4e86\u7684\u8bc1\u660e","title":"\u5de5\u5927\u8ba1\u7f51"},{"location":"Network/ComputerNetwork/#_1","text":"","title":"\u3010\u8003\u7814\u5411\u3011\u8ba1\u7b97\u673a\u7f51\u7edc"},{"location":"Network/ComputerNetwork/#gbn-srgdn","text":"","title":"GBN\u3001 SR\u3001GDN"},{"location":"Network/ComputerNetwork/#_2","text":"\u8def\u7531\u8868\u548c\u8f6c\u53d1\u8868\u7684\u533a\u522b \u8def\u7531\u8868\u662f\u7f51\u7edc\u8bbe\u5907 \u6839\u636e\u8def\u7531\u534f\u8bae\u751f\u6210 \u7684\u8868\uff0c\u8f6c\u53d1\u8868\u662f\u7f51\u7edc\u8bbe\u5907 \u6839\u636e\u8def\u7531\u8868\u751f\u6210 \u7684 \u8def\u7531\u8868\u66f4 \u62bd\u8c61 \uff0c\u8f6c\u53d1\u8868\u66f4 \u5177\u4f53 \u8def\u7531\u8868\u5b58\u50a8\u4e09\u5143\u7ec4\uff1a\u7f51\u7edc\u76ee\u6807Destination\u3001\u7f51\u7edc\u63a9\u7801Mask\u3001\u4e0b\u4e00\u8df3NextHop\u7b49\u4fe1\u606f\uff0c\u53ea\u63cf\u8ff0\u7f51\u7edc\u94fe\u8def\u72b6\u6001\u548c\u65b9\u5411 \u8f6c\u53d1\u8868\u5fc5\u987b\u5305\u542b\u5b8c\u6210\u8f6c\u53d1\u529f\u80fd\u6240\u5fc5\u9700\u7684\u4fe1\u606f\uff0c\u5982\u4e3b\u673a\u65b9\u9762\u7684\u4fe1\u606f\u548c\u67d0\u4e9bMAC\u5730\u5740\u4fe1\u606f\u7b49\uff0c\u6bd4\u8def\u7531\u8868\u66f4 \u8be6\u7ec6 \u56e0\u4e3a\u6570\u636e\u5305 \u5230\u8fbe\u8def\u7531\u5668 \u7684\u65f6\u5019\uff0c\u8981\u6839\u636e\u8f6c\u53d1\u8868\u4e2d\u7684\u201c\u6307\u793a\u201d\u524d\u5f80\u7279\u5b9a\u7684 \u7aef\u53e3 \uff0c\u5373\u8f6c\u53d1\u8868\u7c7b\u4f3c\u4ea4\u6362\u673a\u7684\u5730\u5740\u4fe1\u606f\u8868 \u5373\u8f6c\u53d1\u8868\u5c06\u4ece\u8def\u7531\u5668\u7684\u67d0\u4e2a\u8f93\u5165\u7aef\u53e3\u8fdb\u5165\u7684\u6570\u636e\u5305\u4ece\u4e00\u4e2a\u8def\u7531\u5668\u7684\u5408\u9002\u7684\u8f93\u5165\u7aef\u53e3\u8f6c\u53d1\u51fa\u53bb [??]\u8f6c\u53d1\u8868\u7684\u7ed3\u6784\u5e94\u5f53\u4f7f\u67e5\u627e\u8fc7\u7a0b\u6700\u4f18\u5316\uff0c\u8def\u7531\u8868\u5219\u9700\u8981\u5bf9\u7f51\u7edc\u62d3\u6251\u53d8\u5316\u7684\u8ba1\u7b97\u6700\u4f18\u5316 [??]\u8def\u7531\u8868\u603b\u662f\u7531\u8f6f\u4ef6\u5b9e\u73b0\u7684\uff0c\u800c\u8f6c\u53d1\u8868\u53ef\u7531\u7279\u6b8a\u7684\u786c\u4ef6\u5b9e\u73b0 \u53c2\u8003\u8d44\u6599 https://www.cnblogs.com/qinyongzhu/p/4929833.html https://blog.csdn.net/qq_43030940/article/details/105037830 https://www.sohu.com/a/342616410_99906077 \u67d0\u5929\u5728\u6821\u56ed\u7f51\u8fdb\u884c\u6d4b\u8bd5\uff0c\u53d1\u73b0\u7528 tracert \u7684\u7b2c\u4e00\u8df3\u548c\u9ed8\u8ba4\u7f51\u5173\u7684\u5730\u5740\u4e0d\u4e00\u6837\uff0c\u8fd8\u4e0d\u77e5\u9053\u662f\u4e3a\u5565 \u8fd9\u96be\u9053\u662f\u8def\u7531\u8868\u66f4\u65b0\u4e86\u7684\u8bc1\u660e","title":"\u7f51\u7edc\u5c42"},{"location":"Skill/DramaticProgramme/","text":"\u52a8\u6001\u89c4\u5212 \u00b6 1 \u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c \u00b6 \u8f93\u5165\u4e00\u4e2a\u6574\u578b\u6570\u7ec4\uff0c\u6570\u7ec4\u91cc\u6709\u6b63\u6570\u4e5f\u6709\u8d1f\u6570\u3002\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u6216\u8fde\u7eed\u591a\u4e2a\u6574\u6570\u7ec4\u6210\u4e00\u4e2a\u5b50\u6570\u7ec4\u3002\u6c42\u6240\u6709\u5b50\u6570\u7ec4\u7684\u548c\u7684\u6700\u5927\u503c\u3002\u8981\u6c42\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n). input: [1,-2,3,10,-4,7,2,-5] output: 18 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 int FindGreatestSumOfSubArray ( vector < int > array ) { int len = array . size (); if ( len == 0 ) { return 0 ; } int dp [ len + 1 ]; dp [ 0 ] = array [ 0 ]; int ans = dp [ 0 ]; for ( int i = 1 ; i < len ; i ++ ) { if ( dp [ i -1 ] > 0 ) { dp [ i ] = dp [ i -1 ] + array [ i ]; } else { dp [ i ] = array [ i ]; } if ( dp [ i ] > ans ) { ans = dp [ i ]; } } return ans ; } 2.\u526a\u7ef3\u5b50 \u00b6 \u7ed9\u4f60\u4e00\u6839\u957f\u5ea6\u4e3an\u7684\u7ef3\u5b50\uff0c\u8bf7\u628a\u7ef3\u5b50\u526a\u6210\u6574\u6570\u957f\u7684m\u6bb5\uff08m\u3001n\u90fd\u662f\u6574\u6570\uff0cn>1\u5e76\u4e14m>1\uff0cm<=n\uff09\uff0c\u6bcf\u6bb5\u7ef3\u5b50\u7684\u957f\u5ea6\u8bb0\u4e3ak[1],...,k[m]\u3002\u8bf7\u95eek[1]x...xk[m]\u53ef\u80fd\u7684\u6700\u5927\u4e58\u79ef\u662f\u591a\u5c11\uff1f\u4f8b\u5982\uff0c\u5f53\u7ef3\u5b50\u7684\u957f\u5ea6\u662f8\u65f6\uff0c\u6211\u4eec\u628a\u5b83\u526a\u6210\u957f\u5ea6\u5206\u522b\u4e3a2\u30013\u30013\u7684\u4e09\u6bb5\uff0c\u6b64\u65f6\u5f97\u5230\u7684\u6700\u5927\u4e58\u79ef\u662f18\u3002 input: 8 output: 18 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Solution { public : int cutRope ( int number ) { int ans [ 10005 ]; for ( int i = 0 ; i <= 4 ; i ++ ) { ans [ i ] = i ; } for ( int i = 5 ; i <= number ; i ++ ) { ans [ i ] = i ; for ( int j = 0 ; j < i ; j ++ ) { ans [ i ] = max ( ans [ i ], ans [ j ] * ans [ i - j ]); } } return ans [ number ]; } };","title":"\u52a8\u6001\u89c4\u5212"},{"location":"Skill/DramaticProgramme/#_1","text":"","title":"\u52a8\u6001\u89c4\u5212"},{"location":"Skill/DramaticProgramme/#1","text":"\u8f93\u5165\u4e00\u4e2a\u6574\u578b\u6570\u7ec4\uff0c\u6570\u7ec4\u91cc\u6709\u6b63\u6570\u4e5f\u6709\u8d1f\u6570\u3002\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u6216\u8fde\u7eed\u591a\u4e2a\u6574\u6570\u7ec4\u6210\u4e00\u4e2a\u5b50\u6570\u7ec4\u3002\u6c42\u6240\u6709\u5b50\u6570\u7ec4\u7684\u548c\u7684\u6700\u5927\u503c\u3002\u8981\u6c42\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n). input: [1,-2,3,10,-4,7,2,-5] output: 18 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 int FindGreatestSumOfSubArray ( vector < int > array ) { int len = array . size (); if ( len == 0 ) { return 0 ; } int dp [ len + 1 ]; dp [ 0 ] = array [ 0 ]; int ans = dp [ 0 ]; for ( int i = 1 ; i < len ; i ++ ) { if ( dp [ i -1 ] > 0 ) { dp [ i ] = dp [ i -1 ] + array [ i ]; } else { dp [ i ] = array [ i ]; } if ( dp [ i ] > ans ) { ans = dp [ i ]; } } return ans ; }","title":"1 \u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c"},{"location":"Skill/DramaticProgramme/#2","text":"\u7ed9\u4f60\u4e00\u6839\u957f\u5ea6\u4e3an\u7684\u7ef3\u5b50\uff0c\u8bf7\u628a\u7ef3\u5b50\u526a\u6210\u6574\u6570\u957f\u7684m\u6bb5\uff08m\u3001n\u90fd\u662f\u6574\u6570\uff0cn>1\u5e76\u4e14m>1\uff0cm<=n\uff09\uff0c\u6bcf\u6bb5\u7ef3\u5b50\u7684\u957f\u5ea6\u8bb0\u4e3ak[1],...,k[m]\u3002\u8bf7\u95eek[1]x...xk[m]\u53ef\u80fd\u7684\u6700\u5927\u4e58\u79ef\u662f\u591a\u5c11\uff1f\u4f8b\u5982\uff0c\u5f53\u7ef3\u5b50\u7684\u957f\u5ea6\u662f8\u65f6\uff0c\u6211\u4eec\u628a\u5b83\u526a\u6210\u957f\u5ea6\u5206\u522b\u4e3a2\u30013\u30013\u7684\u4e09\u6bb5\uff0c\u6b64\u65f6\u5f97\u5230\u7684\u6700\u5927\u4e58\u79ef\u662f18\u3002 input: 8 output: 18 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Solution { public : int cutRope ( int number ) { int ans [ 10005 ]; for ( int i = 0 ; i <= 4 ; i ++ ) { ans [ i ] = i ; } for ( int i = 5 ; i <= number ; i ++ ) { ans [ i ] = i ; for ( int j = 0 ; j < i ; j ++ ) { ans [ i ] = max ( ans [ i ], ans [ j ] * ans [ i - j ]); } } return ans [ number ]; } };","title":"2.\u526a\u7ef3\u5b50"},{"location":"Skill/common_thougt/","text":"\u5e38\u7528\u601d\u7ef4 \u00b6 1 \u987a\u5c40\u9006\u5168 \u00b6 \u5982\u8fde\u7eed\u6570\u636e\u7684\u63d2\u5165\u64cd\u4f5c\uff0c\u987a\u7740\u505a\u4f1a\u5bfc\u81f4\u91cd\u590d\u79fb\u52a8\u8f83\u591a \u82e5\u77e5\u9053\u63d2\u5165\u662f\u5168\u5c40\u6027\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u53cd\u7740\u64cd\u4f5c\u8fdb\u884c\u66f4\u5feb\u901f\u7684\u539f\u5730\u64cd\u4f5c 1.1 url \u4e2d\u7684\u5b57\u7b26\u4e32\u66ff\u6362 \u00b6 input: we are happy. output: we%20are%20happy. requrements: \u539f\u5730\u64cd\u4f5c\uff0c\u4e0d\u80fd\u7528\u65b0\u6570\u7ec4 code\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 void ReplaceBlank ( char str [], int len ) { if ( str == NULL || len <= 0 ) // \u9632\u7a7a { return ; } int num = 0 ; for ( int i = 0 ; str [ i ] != '\\0' ; i ++ ) { if ( str [ i ] == ' ' ) { num ++ ; } } // \u4f18\u5316\uff1a\u53ef\u7528\u53d8\u91cf\u5728\u5faa\u73af\u8ba1\u7b97\u957f\u5ea6\uff0c\u800c\u51cf\u5c11strlen\u7684\u6b21\u6570 int p = strlen ( str ) + num * 2 , q = strlen ( str ); if ( p > len ) // \u9632\u6ea2 { return ; } while ( q >= 0 && p > q ) // \u4f18\u5316\uff1apq\u91cd\u5408\u5373\u53ef\u63d0\u65e9\u5faa\u73af\u7ed3\u675f { if ( str [ q ] == ' ' ) { str [ p -- ] = '0' ; str [ p -- ] = '2' ; str [ p -- ] = '%' ; } else { str [ p -- ] = str [ q ]; } q -- ; } } 1.2 \u4e00\u4e2a\u6709\u5e8f\u6570\u7ec4\u63d2\u5165\u53e6\u4e00\u4e2a\u6709\u5e8f\u6570\u7ec4\u7684\u539f\u5730\u64cd\u4f5c\u540c\u7406 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 void InsertArray ( int a [], int lena , int b [], int lenb , int total ) //\u628a\u6709\u5e8f\u7684b\u6570\u7ec4\u63d2\u5165\u6709\u5e8f\u7684a\u6570\u7ec4\u4e2d { if ( a == NULL || b == NULL || ! lena || ! lenb || ! total ) { return ; } if ( lena + lenb > total ) { return ; } int p = lena + lenb -1 , q = lena - 1 , r = lenb - 1 ; while ( p >= 0 && p > q ) { if ( a [ q ] > b [ r ]) { a [ p -- ] = a [ q -- ]; } else { a [ p -- ] = b [ r -- ]; } } } 2 \u67e5\u627e \u00b6 2.1 \u4e8c\u5206\u67e5\u627e \u00b6 \u4e8c\u5206\u67e5\u627e\u89e3\u51b3\u7684\u5bf9\u8c61\u4f4d\u4f4d\u6709\u5e8f\u6570\u5217\uff0c\u6d41\u7a0b\u4e3a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 while ( l <= r ) { mid = ( l + r ) >> 1 ; if ( check the mid ) { update ( ans ); l = mid ; or l = mid - 1 ; } if () { update ( ans ); r = mid ; or r = mid + 1 ; } } \u4e8c\u5206\u7684\u5de6\u53f3\u9488\u9700\u89c6\u60c5\u51b5\u51b3\u5b9a\u903c\u8fd1\u65b9\u5f0f\u548c\u8df3\u51fa\u65b9\u5f0f \u521d\u59cb\u5b9a\u9488\u5c3d\u53ef\u80fd\u7f29\u77ed\u5934\u5c3e\u957f\u5ea6(-inf ~ inf) \u5e38\u7528\u4e8e\u6c42\u201c\u4f7f\u2026\u2026\u6700\u5927\u503c\u5c3d\u53ef\u80fd\u5c0f\u201d \u7ed9\u5b9a\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u6570\u7ec4 nums \u548c\u4e00\u4e2a\u6574\u6570 m \uff0c\u4f60\u9700\u8981\u5c06\u8fd9\u4e2a\u6570\u7ec4\u5206\u6210 m \u4e2a\u975e\u7a7a\u7684\u8fde\u7eed\u5b50\u6570\u7ec4\u3002\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u4f7f\u5f97\u8fd9 m \u4e2a\u5b50\u6570\u7ec4\u5404\u81ea\u548c\u7684\u6700\u5927\u503c\u6700\u5c0f\u3002 \u8f93\u5165\uff1anums = [7,2,5,10,8], m = 2 \u8f93\u51fa\uff1a18 \u89e3\u91ca\uff1a \u4e00\u5171\u6709\u56db\u79cd\u65b9\u6cd5\u5c06 nums \u5206\u5272\u4e3a 2 \u4e2a\u5b50\u6570\u7ec4\u3002 \u5176\u4e2d\u6700\u597d\u7684\u65b9\u5f0f\u662f\u5c06\u5176\u5206\u4e3a [7,2,5] \u548c [10,8] \u3002 \u56e0\u4e3a\u6b64\u65f6\u8fd9\u4e24\u4e2a\u5b50\u6570\u7ec4\u5404\u81ea\u7684\u548c\u7684\u6700\u5927\u503c\u4e3a18\uff0c\u5728\u6240\u6709\u60c5\u51b5\u4e2d\u6700\u5c0f\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 int n , m , a [ 1000005 ]; int sum , maxn ; bool check ( int x ) { int cnt = 0 ; int tmp = 0 ; for ( int i = 0 ; i < n ; i ++ ) { tmp += a [ i ]; if ( tmp > x ) { cnt ++ ; tmp = a [ i ]; } else { tmp += a [ i ]; } } if ( cnt <= m ) { return true ; } else { return false ; } } int main () { scanf ( \"%d%d\" , & n , & m ); for ( int i = 0 ; i < n ; i ++ ) { scanf ( \"%d\" , & a [ i ]); sum += a [ i ]; maxn = max ( maxn , a [ i ]); } int l = maxn , r = sum , ans = -1 ; while ( l <= r ) { int mid = ( l + r ) >> 1 ; if ( check ( mid )) { r = mid - 1 ; ans = mid ; } else { l = mid + 1 ; } } printf ( \"%d \\n \" , ans ); return 0 ; } 2.2 \u5feb\u6162\u9488\u67e5\u627e\uff08\u53ef\u53c2\u8003\u94fe\u8868\u7684\u67e5\u627e\u5012\u6570\u7b2c k \u4e2a\u3001\u5224\u73af\uff09 \u00b6 2.2.1 \u4e11\u6570 \u00b6 \u628a\u53ea\u5305\u542b\u8d28\u56e0\u5b502\u30013\u548c5\u7684\u6570\u79f0\u4f5c\u4e11\u6570\uff08Ugly Number\uff09\u3002\u4f8b\u59826\u30018\u90fd\u662f\u4e11\u6570\uff0c\u4f4614\u4e0d\u662f\uff0c\u56e0\u4e3a\u5b83\u5305\u542b\u8d28\u56e0\u5b507\u3002 \u4e60\u60ef\u4e0a\u6211\u4eec\u628a1\u5f53\u505a\u662f\u7b2c\u4e00\u4e2a\u4e11\u6570\u3002\u6c42\u6309\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u7684\u7b2cN\u4e2a\u4e11\u6570\u3002 input: 7 output: 8 \u901a\u8fc7\u4e09\u4e2a\u79fb\u9488\u4fdd\u8bc1\u6700\u5c0f\u7684\u4e11\u6570\u80fd\u591f\u52a0\u5165 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 int GetUglyNumber_Solution ( int index ) { if ( index <= 0 ) return 0 ; int * ugly = new int [ index ]; ugly [ 0 ] = 1 ; int i = 1 ; int * p2 = ugly ; int * p3 = ugly ; int * p5 = ugly ; while ( i < index ) { int tmp = min (( * p2 ) * 2 , min (( * p3 ) * 3 ,( * p5 ) * 5 )); ugly [ i ] = tmp ; while (( * p2 ) * 2 <= tmp ) { p2 ++ ; } while (( * p3 ) * 3 <= tmp ) { p3 ++ ; } while (( * p5 ) * 5 <= tmp ) { p5 ++ ; } i ++ ; } return ugly [ index - 1 ]; } 2.3 \u94fe\u8868\u67e5\u627e \u00b6 2.3.1 \u94fe\u8868\u73af\u7684\u5165\u53e3\u8282\u70b9 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 class Solution { public : ListNode * EntryNodeOfLoop ( ListNode * pHead ) { ListNode * p = pHead , * q = pHead ; if ( ! pHead ) { return NULL ; } while ( q && q -> next ) { p = p -> next ; q = q -> next -> next ; if ( p == q ) { break ; } } if ( ! p || ! p -> next ) return NULL ; q = pHead ; while ( p != q ) { p = p -> next ; q = q -> next ; } return q ; } }; 2.4 \u73af\u67e5\u627e \u00b6 2.4.1 \u7ea6\u745f\u592b\u73af \u00b6 N \u4eba\u6210\u73af\uff0c\u9694 m \u6740\u4eba\uff0c\u6700\u540e\u5e78\u5b58 \u9012\u63a8\u516c\u5f0f\uff1a f(n,m) = (f(n-1,m) + m) \\% n f(n,m) = (f(n-1,m) + m) \\% n 1 2 3 4 5 6 7 8 9 10 11 12 13 int LastRemaining ( int n , int m ) { if ( n < 1 || m < 1 ) { return -1 ; } int last = 0 ; for ( int i = 2 ; i <= n ; i ++ ) { last = ( last + m ) % i ; } return last ; } 2.5 \u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u67e5\u627e(dfs) \u00b6 2.5.1 \u77e9\u9635\u641c\u7d22 \u00b6 \u8bf7\u8bbe\u8ba1\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u6765\u5224\u65ad\u5728\u4e00\u4e2a\u77e9\u9635\u4e2d\u662f\u5426\u5b58\u5728\u4e00\u6761\u5305\u542b\u67d0\u5b57\u7b26\u4e32\u6240\u6709\u5b57\u7b26\u7684\u8def\u5f84\u3002\u8def\u5f84\u53ef\u4ee5\u4ece\u77e9\u9635\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u683c\u5b50\u5f00\u59cb\uff0c\u6bcf\u4e00\u6b65\u53ef\u4ee5\u5728\u77e9\u9635\u4e2d\u5411\u5de6\uff0c\u5411\u53f3\uff0c\u5411\u4e0a\uff0c\u5411\u4e0b\u79fb\u52a8\u4e00\u4e2a\u683c\u5b50\u3002\u5982\u679c\u4e00\u6761\u8def\u5f84\u7ecf\u8fc7\u4e86\u77e9\u9635\u4e2d\u7684\u67d0\u4e00\u4e2a\u683c\u5b50\uff0c\u5219\u8be5\u8def\u5f84\u4e0d\u80fd\u518d\u8fdb\u5165\u8be5\u683c\u5b50\u3002 \u77e9\u9635\u4e2d\u5305\u542b\u4e00\u6761\u5b57\u7b26\u4e32\"bcced\"\u7684\u8def\u5f84\uff0c\u4f46\u662f\u77e9\u9635\u4e2d\u4e0d\u5305\u542b\"abcb\"\u8def\u5f84\uff0c\u56e0\u4e3a\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26b\u5360\u636e\u4e86\u77e9\u9635\u4e2d\u7684\u7b2c\u4e00\u884c\u7b2c\u4e8c\u4e2a\u683c\u5b50\u4e4b\u540e\uff0c\u8def\u5f84\u4e0d\u80fd\u518d\u6b21\u8fdb\u5165\u8be5\u683c\u5b50\u3002 input: [[a,b,c,e],[s,f,c,s],[a,d,e,e]],\"abcced\" output: true 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 class Solution { public : /** * \u4ee3\u7801\u4e2d\u7684\u7c7b\u540d\u3001\u65b9\u6cd5\u540d\u3001\u53c2\u6570\u540d\u5df2\u7ecf\u6307\u5b9a\uff0c\u8bf7\u52ff\u4fee\u6539\uff0c\u76f4\u63a5\u8fd4\u56de\u65b9\u6cd5\u89c4\u5b9a\u7684\u503c\u5373\u53ef * * * @param matrix char\u5b57\u7b26\u578bvector<vector<>> * @param word string\u5b57\u7b26\u4e32 * @return bool\u5e03\u5c14\u578b */ int ans = false ; int vis [ 205 ][ 205 ] = { 0 }; int dir [ 4 ][ 2 ] = {{ 0 , 1 },{ 1 , 0 },{ -1 , 0 },{ 0 , -1 }}; void dfs ( vector < vector < char >>& m , int r , int c , string w , int index ) { int rnum = m . size (); int cnum = m [ 0 ]. size (); if ( w [ index ] == '\\0' ) { ans = true ; } for ( int i = 0 ; i < 4 ; i ++ ) { int nxtr = r + dir [ i ][ 0 ]; int nxtc = c + dir [ i ][ 1 ]; if ( nxtr >= 0 && nxtr < rnum && nxtc >= 0 && nxtc < cnum ) { if ( m [ nxtr ][ nxtc ] == w [ index ] && vis [ nxtr ][ nxtc ] == 0 ) { vis [ nxtr ][ nxtc ] = 1 ; dfs ( m , nxtr , nxtc , w , index + 1 ); vis [ nxtr ][ nxtc ] = 0 ; } } } } bool hasPath ( vector < vector < char > >& matrix , string word ) { int rnum = matrix . size (); int cnum = matrix [ 0 ]. size (); if ( word . length () == 0 || rnum <= 0 || cnum <= 0 ) { return false ; } int index = 0 ; for ( int i = 0 ; i < rnum ; i ++ ) { for ( int j = 0 ; j < cnum ; j ++ ) { if ( matrix [ i ][ j ] == word [ index ] && vis [ i ][ j ] == 0 ) { vis [ i ][ j ] = 1 ; dfs ( matrix , i , j , word , index + 1 ); vis [ i ][ j ] = 0 ; } } } return ans ; } }; 2.5.2 \u5168\u6392\u5217 \u00b6 \u8f93\u5165: [1,2,3] \u8f93\u51fa: [ [1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], [3,2,1] ] \u666e\u901a dfs \uff1a\u8f83\u6162 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Solution { public : vector < vector < int >> ans ; vector < int > tmp ; int vis [ 1000005 ] = { 0 }; void dfs ( vector < int >& nums ) { if ( tmp . size () == nums . size ()) { ans . push_back ( tmp ); return ; } int len = nums . size (); for ( int i = 0 ; i < len ; i ++ ) { if ( ! vis [ i ]) { vis [ i ] = 1 ; tmp . push_back ( nums [ i ]); dfs ( nums ); tmp . pop_back (); vis [ i ] = 0 ; } } } vector < vector < int >> permute ( vector < int >& nums ) { dfs ( nums ); return ans ; } }; \u91c7\u7528\u5185\u7f6e\u54c8\u51fd\u6570 next_permutation/prev_permutation : \u8fd4\u56de\u4e0b/\u4e0a\u4e00\u4e2a\u6309\u5b57\u5178\u5e8f\u6392\u5217\u7684\u5168\u6392\u5217\uff08\u6bd4\u81ea\u5df1\u5199\u7684\u5feb\u5f88\u591a\uff09 next_permutation(a,a+len) a \u53ef\u4e3a\u6574\u578b\u6216\u5b57\u7b26\u6570\u7ec4 next_premutation(vec.begin(),vec.end()) vec \u4e3a vector 1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public : vector < vector < int >> permute ( vector < int >& nums ) { vector < vector < int >> ans ; sort ( nums . begin (), nums . end ()); ans . push_back ( nums ); while ( next_permutation ( nums . begin (), nums . end ())) { ans . push_back ( nums ); } return ans ; } }; 3 \u6570\u5b66\u6280\u5de7 \u00b6 3.1 \u5feb\u901f\u5e42\u53d6\u6a21 \u00b6 \u5e95\u500d\u6307\u8870\uff0c\u6307\u5355\u4e58\u5e95 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int pow_mod ( int a , int n , int p ) { int ans = 1 ; int base = a % p ; while ( n ) { if ( n & 1 ) { ans = ( ans * base ) % p ; } base = ( base * base ) % p ; n >>= 1 ; } return ans ; } 4 \u4f4d\u8fd0\u7b97\u6280\u5de7 \u00b6 4.1 \u8ba1\u7b97\u4e00\u4e2a\u6570\u4e8c\u8fdb\u5236\u4e2d 1 \u7684\u4e2a\u6570 \u00b6 1 2 3 4 5 6 7 8 9 int NumberOf1 ( int n ) { int ans = 0 ; while ( n ) { n &= n -1 ; ans ++ ; } return ans ; } 5 \u82b1\u5f0f\u6253\u5370 \u00b6 5.1 \u987a\u65f6\u9488\u4ece\u5916\u5230\u5185\u6253\u5370\u77e9\u9635 \u00b6 input: [[1,2],[3,4]] output: [1,2,4,3] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 vector < int > printMatrix ( vector < vector < int > > matrix ) { int row = matrix . size (), col = matrix [ 0 ]. size (); vector < int > ans ; int start = 0 ; // \u6bcf\u4e00\u5708\u7684\u8d77\u70b9(1,1)(2,2)\u2026\u2026 while ( col > 2 * start && row > 2 * start ) // \u5faa\u73af\u8df3\u51fa\u6761\u4ef6 { int endX = col - 1 - start ; int endY = row - 1 - start ; for ( int i = start ; i <= endX ; i ++ ) { ans . push_back ( matrix [ start ][ i ]); } if ( endY > start ) { for ( int i = start + 1 ; i <= endY ; i ++ ) { ans . push_back ( matrix [ i ][ endX ]); } } if ( start < endX && endY > start ) { for ( int i = endX - 1 ; i >= start ; i -- ) { ans . push_back ( matrix [ endY ][ i ]); } } if ( start < endX && start < endY - 1 ) { for ( int i = endY - 1 ; i >= start + 1 ; i -- ) { ans . push_back ( matrix [ i ][ start ]); } } start ++ ; } return ans ; } 5.2 \u201c\u4e4b\u201d\u5b57\u6253\u5370\u4e8c\u53c9\u6811 \u00b6 \u8bf7\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u6309\u7167\u4e4b\u5b57\u5f62\u6253\u5370\u4e8c\u53c9\u6811\uff0c\u5373\u7b2c\u4e00\u884c\u6309\u7167\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u6253\u5370\uff0c\u7b2c\u4e8c\u5c42\u6309\u7167\u4ece\u53f3\u81f3\u5de6\u7684\u987a\u5e8f\u6253\u5370\uff0c\u7b2c\u4e09\u884c\u6309\u7167\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u6253\u5370\uff0c\u5176\u4ed6\u884c\u4ee5\u6b64\u7c7b\u63a8 input: {8,6,10,5,7,9,11} output: [[8],[10,6],[5,7,9,11]] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 /* struct TreeNode { int val; struct TreeNode *left; struct TreeNode *right; TreeNode(int x) : val(x), left(NULL), right(NULL) { } }; */ class Solution { public : vector < vector < int > > Print ( TreeNode * pRoot ) { vector < vector < int >> ans ; if ( pRoot == NULL ) { return ans ; } vector < int > tmp ; queue < TreeNode *> q [ 2 ]; stack < int > s ; int flag = 0 , layer = 0 ; q [ 0 ]. push ( pRoot ); while ( ! q [ 0 ]. empty () || ! q [ 1 ]. empty ()) { tmp . clear (); if ( q [ flag ]. empty ()) flag = 1 - flag ; while ( ! q [ flag ]. empty ()) { TreeNode * p = q [ flag ]. front (); q [ flag ]. pop (); if ( ! ( layer & 1 )) { tmp . push_back ( p -> val ); } else { s . push ( p -> val ); } if ( p -> left ) { q [ 1 - flag ]. push ( p -> left ); } if ( p -> right ) { q [ 1 - flag ]. push ( p -> right ); } } while ( ! s . empty ()) { int k = s . top (); s . pop (); tmp . push_back ( k ); } ans . push_back ( tmp ); layer = 1 - layer ; } return ans ; } }; 6.\u8f85\u52a9\u7a7a\u95f4 \u00b6 \u7b80\u5355\u8f85\u52a9\uff1a \u5f53\u8fb9\u754c\u5904\u7406\u60c5\u51b5\u8fc7\u591a\u65f6\uff0c\u8003\u8651\u80fd\u5426\u901a\u8fc7\u589e\u52a0\u8282\u70b9\u6765\u4fdd\u8bc1\u4ee3\u7801\u901a\u7528 \u6837\u4f8b\u53c2\u8003 \u4e0d\u4fdd\u7559\u91cd\u590d\u503c\u5220\u9664\u94fe\u8868\u7684\u91cd\u590d\u8282\u70b9\uff08\u589e\u52a0\u65b0\u5934\uff09 6.1 \u8f85\u52a9\u6808 \u00b6 6.1.1 \u6808\u4e2d\u6700\u5c0f\u5143\u7d20 \u00b6 \u5f53\u8981 O(1) \u67e5\u627e\u6808\u4e2d\u6700\u5c0f\u5143\u7d20\uff0c\u7528\u4e00\u4e2a\u8f85\u52a9\u6808\u7ef4\u62a4\u5373\u53ef(\u9632\u6b62\u6700\u5c0f\u5143\u7d20\u5f39\u51fa\u627e\u4e0d\u5230) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 stack < int > s , m ; void push ( int value ) { s . push ( value ); if ( m . empty ()) { m . push ( value ); } else { if ( value < m . top ()) { m . push ( value ); } else { m . push ( m . top ()); } } } void pop () { s . pop (); m . pop (); } int top () { return s . top (); } int min () { return m . top (); } 6.1.2 \u6808\u7684\u538b\u5165\u548c\u5f39\u51fa\u5e8f\u5217 \u00b6 \u8f93\u5165\u4e24\u4e2a\u6574\u6570\u5e8f\u5217\uff0c\u7b2c\u4e00\u4e2a\u5e8f\u5217\u8868\u793a\u6808\u7684\u538b\u5165\u987a\u5e8f\uff0c\u8bf7\u5224\u65ad\u7b2c\u4e8c\u4e2a\u5e8f\u5217\u662f\u5426\u53ef\u80fd\u4e3a\u8be5\u6808\u7684\u5f39\u51fa\u987a\u5e8f\u3002\u5047\u8bbe\u538b\u5165\u6808\u7684\u6240\u6709\u6570\u5b57\u5747\u4e0d\u76f8\u7b49\u3002\u4f8b\u5982\u5e8f\u52171,2,3,4,5\u662f\u67d0\u6808\u7684\u538b\u5165\u987a\u5e8f\uff0c\u5e8f\u52174,5,3,2,1\u662f\u8be5\u538b\u6808\u5e8f\u5217\u5bf9\u5e94\u7684\u4e00\u4e2a\u5f39\u51fa\u5e8f\u5217\uff0c\u4f464,3,5,1,2\u5c31\u4e0d\u53ef\u80fd\u662f\u8be5\u538b\u6808\u5e8f\u5217\u7684\u5f39\u51fa\u5e8f\u5217\u3002\uff08\u6ce8\u610f\uff1a\u8fd9\u4e24\u4e2a\u5e8f\u5217\u7684\u957f\u5ea6\u662f\u76f8\u7b49\u7684\uff09 input: [1,2,3,4,5],[4,3,5,1,2] output: false 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 bool IsPopOrder ( vector < int > pushV , vector < int > popV ) { if ( ! pushV . empty () && ! popV . empty ()) { stack < int > spop ; int len = pushV . size (), index = 0 , i = 0 ; for ( i = 0 ; i < len ; i ++ ) { while ( spop . empty () || spop . top () != popV [ i ]) { if ( index == len ) { return false ; } spop . push ( pushV [ index ++ ]); } spop . pop (); } if ( i == len ) { return true ; } } return false ; } 6.2 \u54c8\u5e0c\u8868(map) \u00b6 6.2.1 \u590d\u6742\u94fe\u8868\u7684\u6df1\u62f7\u8d1d \u00b6 \u8f93\u5165\u4e00\u4e2a\u590d\u6742\u94fe\u8868\uff08\u6bcf\u4e2a\u8282\u70b9\u4e2d\u6709\u8282\u70b9\u503c\uff0c\u4ee5\u53ca\u4e24\u4e2a\u6307\u9488\uff0c\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u4e2a\u8282\u70b9\uff0c\u53e6\u4e00\u4e2a\u7279\u6b8a\u6307\u9488random\u6307\u5411\u4e00\u4e2a\u968f\u673a\u8282\u70b9\uff09\uff0c\u8bf7\u5bf9\u6b64\u94fe\u8868\u8fdb\u884c\u6df1\u62f7\u8d1d\uff0c\u5e76\u8fd4\u56de\u62f7\u8d1d\u540e\u7684\u5934\u7ed3\u70b9\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 struct RandomListNode { int label ; struct RandomListNode * next , * random ; RandomListNode ( int x ) : label ( x ), next ( NULL ), random ( NULL ) { } }; map < RandomListNode * , RandomListNode *> mp ; RandomListNode * Clone ( RandomListNode * pHead ) { RandomListNode * ans = NULL , * p = NULL , * q = NULL , * pre = NULL ; q = pHead ; while ( q ) { p = ( RandomListNode * ) malloc ( sizeof ( RandomListNode )); p -> label = q -> label ; p -> next = q -> next ; p -> random = NULL ; if ( q == pHead ) { ans = p ; } mp [ q ] = p ; q = q -> next ; if ( pre ) { pre -> next = p ; } pre = p ; p = NULL ; } q = pHead ; p = ans ; while ( q ) { p -> random = mp [ q -> random ]; q = q -> next ; p = p -> next ; } return ans ; } \u91c7\u7528\u54c8\u5e0c\u8868\u7684\u65b9\u5f0f\u662f\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\uff0c\u590d\u6742\u5ea6\u4e3a O(n) \u82e5\u4e0d\u91c7\u7528\u989d\u5916\u7a7a\u95f4\uff0c\u601d\u8def\u4e3a\uff1a \u6839\u636e\u539f\u59cb\u94fe\u8868\u7684\u6bcf\u4e2a\u7ed3\u70b9 N \u521b\u5efa\u5bf9\u5e94\u7684 N' \u628a N' \u8fde\u63a5\u5230\u5bf9\u5e94\u7684 N \u540e\u9762 \u8bbe\u7f6e\u590d\u5236\u51fa\u6765\u7684\u7ed3\u70b9\u7684 random \uff0c \u5373 N \u7684\u6307\u5411 S,\u5219 N' \u7684\u6307\u5411 S' \u628a\u8be5\u957f\u94fe\u8868\u91cd\u65b0\u62c6\u5206\u6210\u4e24\u4e2a\u94fe\u8868\uff0c\u5076\u6570\u4f4d\u7f6e\u8282\u70b9\u62fc\u63a5\u8d77\u6765\u5373\u4e3a\u7b54\u6848 6.3 \u7ea2\u9ed1\u6811\u548c\u5806 \u00b6 c++\u8bed\u8a00\u4e2d\uff0cmultiset \u662f \u5e93\u4e2d\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u7c7b\u578b\uff0c\u5b83\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u5e8f\u5217\uff0c\u63d2\u5165\u4e00\u4e2a\u6570\uff0c\u5220\u9664\u4e00\u4e2a\u6570\u90fd\u80fd\u591f\u5728 O(logn) \u7684\u65f6\u95f4\u5185\u5b8c\u6210\uff0c\u800c\u4e14\u4ed6\u80fd\u65f6\u523b\u4fdd\u8bc1\u5e8f\u5217\u4e2d\u7684\u6570\u662f\u6709\u5e8f\u7684\uff0c\u800c\u4e14\u5e8f\u5217\u4e2d\u53ef\u4ee5\u5b58\u5728\u91cd\u590d\u7684\u6570\u3002 \u7ed9\u5b9a\u4e00\u4e2a\u6570\u7ec4\uff0c\u627e\u51fa\u5176\u4e2d\u6700\u5c0f\u7684K\u4e2a\u6570\u3002\u4f8b\u5982\u6570\u7ec4\u5143\u7d20\u662f4,5,1,6,2,7,3,8\u8fd98\u4e2a\u6570\u5b57\uff0c\u5219\u6700\u5c0f\u76844\u4e2a\u6570\u5b57\u662f1,2,3,4\u3002\u5982\u679cK>\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u90a3\u4e48\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684\u6570\u7ec4 input: [4,5,1,6,2,7,3,8],4 output: [1,2,3,4] \u91c7\u7528\u7ea2\u9ed1\u6811\u7ef4\u62a4\u53ef\u4ee5\u51cf\u5c11\u6392\u5e8f\u5e26\u6765\u7684\u65f6\u95f4\u590d\u6742\u5ea6 \u524d k \u5c0f\u7528\u5927\u6839\u5806\uff0c\u524d k \u5927\u7528\u5c0f\u6839\u5806 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 multiset < int \uff0c greater < int >> ms ; vector < int > GetLeastNumbers_Solution ( vector < int > input , int k ) { ms . clear (); vector < int > ans ; if ( k < 1 || input . empty () || k > input . size ()) { return ans ; } auto iter = input . begin (); for (; iter != input . end (); iter ++ ) { if ( ms . size () < k ) { ms . insert ( * iter ); } else { auto ms_iter = ms . begin (); if ( * iter < * ms_iter ) { ms . erase ( ms_iter ); ms . insert ( * iter ); } } } auto ms_iter = ms . begin (); for (; ms_iter != ms . end (); ms_iter ++ ) { ans . push_back ( * ms_iter ); } reverse ( ans . begin (), ans . end ()); return ans ; } \u4f18\u5148\u961f\u5217\u5219\u4e3a\u53e6\u4e00\u79cd\u57fa\u4e8e\u5806\u7684\u6570\u636e\u7ed3\u6784(heap) \u6570\u636e\u6d41\u4e2d\u7684\u4e2d\u4f4d\u6570 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Solution { public : #define SCD static_cast<double> priority_queue < int > min_q ; // \u5927\u9876\u63a8 priority_queue < int , vector < int > , greater < int >> max_q ; // \u5c0f\u9876\u5806 void Insert ( int num ) { min_q . push ( num ); // \u8bd5\u56fe\u52a0\u5165\u5230\u5927\u9876\u63a8 // \u5e73\u8861\u4e00\u4e2a\u4e24\u4e2a\u5806 max_q . push ( min_q . top ()); min_q . pop (); if ( min_q . size () < max_q . size ) { min_q . push ( max_q . top ()); max_q . pop (); } } double GetMedian () { return min_q . size () > max_q . size () ? SCD ( min_q . top ()) : SCD ( min_q . top () + max_q . top ()) / 2 ; } }; multiset \u9ed8\u8ba4\u5c0f\u9876\u5806\uff0c\u5927\u9876\u5806\u4e3a multiset<int, greater<int>> ms; priority_queue \u9ed8\u8ba4\u5927\u9876\u5806\uff0c\u5c0f\u9876\u5806\u4e3a priority_queue<int, vector<int>, greater<int>> pq; 6.4 \u53cc\u7aef\u961f\u5217 \u00b6 \u53cc\u7aef\u961f\u5217\u662f\u5bf9\u5934\u548c\u5c3e\u90fd\u80fd\u64cd\u4f5c\uff0c\u9002\u5408\u4e8e\u7a97\u53e3\u6ed1\u52a8\u95ee\u9898 \u7ed9\u5b9a\u4e00\u4e2a\u6570\u7ec4\u548c\u6ed1\u52a8\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u627e\u51fa\u6240\u6709\u6ed1\u52a8\u7a97\u53e3\u91cc\u6570\u503c\u7684\u6700\u5927\u503c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8f93\u5165\u6570\u7ec4{2,3,4,2,6,2,5,1}\u53ca\u6ed1\u52a8\u7a97\u53e3\u7684\u5927\u5c0f3\uff0c\u90a3\u4e48\u4e00\u5171\u5b58\u57286\u4e2a\u6ed1\u52a8\u7a97\u53e3\uff0c\u4ed6\u4eec\u7684\u6700\u5927\u503c\u5206\u522b\u4e3a{4,4,6,6,6,5}\uff1b \u9488\u5bf9\u6570\u7ec4{2,3,4,2,6,2,5,1}\u7684\u6ed1\u52a8\u7a97\u53e3\u6709\u4ee5\u4e0b6\u4e2a\uff1a {[2,3,4],2,6,2,5,1}\uff0c {2,[3,4,2],6,2,5,1}\uff0c {2,3,[4,2,6],2,5,1}\uff0c {2,3,4,[2,6,2],5,1}\uff0c {2,3,4,2,[6,2,5],1}\uff0c {2,3,4,2,6,[2,5,1]}\u3002 \u7a97\u53e3\u5927\u4e8e\u6570\u7ec4\u957f\u5ea6\u7684\u65f6\u5019\uff0c\u8fd4\u56de\u7a7a input: [2,3,4,2,6,2,5,1],3 output: [4,4,6,6,6,5] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Solution { public : vector < int > maxInWindows ( const vector < int >& num , unsigned int size ) { vector < int > ans ; int len = num . size (); if ( num . size () == 0 || size < 1 || size > num . size ()) { return ans ; } deque < int > dq ; for ( int i = 0 ; i < len ; i ++ ) { while ( ! dq . empty () && num [ i ] > num [ dq . back ()]) { dq . pop_back (); } dq . push_back ( i ); if ( dq . front () + size <= i ) { dq . pop_front (); } if ( i + 1 >= size ) { ans . push_back ( num [ dq . front ()]); } } return ans ; } }; 7.\u6df1\u5ea6\u4f18\u5148\u641c\u7d22 \u00b6 7.1 \u6c42\u5b57\u7b26\u7684\u5168\u6392\u5217 \u00b6 \u8f93\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32,\u957f\u5ea6\u4e0d\u8d85\u8fc79(\u53ef\u80fd\u6709\u5b57\u7b26\u91cd\u590d),\u5b57\u7b26\u53ea\u5305\u62ec\u5927\u5c0f\u5199\u5b57\u6bcd input: \"ab\" output: [\"ab\",\"ba\"] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 vector < string > ans ; bool vis [ 10 ] = { false }; string rel = {}; vector < string > Permutation ( string str ) { int len = str . length (); if ( rel . length () == len ) { ans . push_back ( rel ); return ans ; } for ( int i = 0 ; i < len ; i ++ ) { if ( ! vis [ i ]) { vis [ i ] = true ; rel . push_back ( str [ i ]); Permutation ( str ); rel . pop_back (); vis [ i ] = false ; } } sort ( ans . begin (), ans . end ()); ans . erase ( unique ( ans . begin (), ans . end ()), ans . end ()); return ans ; } \u62d3\u5c55\uff1a \u6c42\u5b57\u7b26\u4e32\u7684\u6240\u6709\u7ec4\u5408 input: \"abc\" output: [\"a\",\"b\",\"c\",\"ab\",\"ac\",\"bc\",\"abc\"] \u601d\u8def\uff1a \u628a n \u4e2a\u5b57\u7b26\u5206\u6210\u4e24\u90e8\u5206 * \u5982\u679c\u7ec4\u5408\u91cc\u5305\u542b\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5219\u4e0b\u4e00\u6b65\u6c42\u5269\u4f59\u7684 n-1 \u4e2a\u5b57\u7b26\u4e2d\u957f\u5ea6\u4e3a m-1 \u7684\u7ec4\u5408 * \u5982\u679c\u7ec4\u5408\u91cc\u4e0d\u5305\u542b\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5219\u4e0b\u4e00\u6b65\u6c42\u5269\u4f59\u7684 n-1 \u4e2a\u5b57\u7b26\u4e2d\u957f\u5ea6\u4e3a m \u7684\u7ec4\u5408 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 public static void stringCombination ( String s ){ List < String > list = new ArrayList <> (); //\u6c42\u6bcf\u4e00\u79cd\u957f\u5ea6\u7684\u7ec4\u5408 for ( int i = 1 ; i <= s . length (); i ++ ){ stringCombination ( s , 0 , i , list ); } } public static void stringCombination ( String s , int index , int num , List < String > result ){ //\u7ec4\u5408\u957f\u5ea6\u4e3a0\uff0c\u9012\u5f52\u7ed3\u675f\uff0c\u8f93\u51fa\u5f53\u524d\u7ed3\u679c if ( num == 0 ){ for ( String s1 : result ) { System . out . print ( s1 ); } System . out . println (); return ; } //\u9700\u8981\u6c42\u7684\u5b57\u7b26\u4e32\u4e3a\u7a7a\uff0c\u9012\u5f52\u7ed3\u675f if ( index == s . length ()) return ; //1.1 \u9009\u62e9\u5f53\u524d\u4e0b\u6807\u7684\u5b57\u7b26 result . add ( s . charAt ( index ) + \"\" ); //1.2 \u5728\u540e\u9762\u5b57\u7b26\u4e32\u4e2d\u9009\u62e9num - 1\u4e2a\u5b57\u7b26 stringCombination ( s , index + 1 , num - 1 , result ); //1.3 \u6e05\u9664\u7f13\u5b58 result . remove ( result . size () - 1 ); //2 \u4e0d\u9009\u62e9\u5f53\u524d\u4e0b\u6807\u7684\u5b57\u7b26\uff0c\u5728\u540e\u9762\u5b57\u7b26\u4e2d\u9009\u62e9num\u4e2a\u5b57\u7b26 stringCombination ( s , index + 1 , num , result ); } 7.2 \u516b\u7687\u540e\u95ee\u9898 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 int x [ 8 ], tot = 0 ; bool B ( int x [], int k ) { int i ; for ( i = 0 ; i < k ; i ++ ) { if ( x [ i ] == x [ k ] || x [ i ] - x [ k ] == i - k ) { return false ; } } return true ; } int queen ( int i ) { if ( i >= 8 ) { tot ++ ; for ( i = 0 ; i < 8 ; i ++ ) { cout << x [ i ] << \" \" ; } cout << endl ; } for ( int k = 0 ; k < 8 ; k ++ ) { x [ i ] = k ; if ( B ( x . i )) { queen ( i + 1 ); } } } 8 \u8ba1\u6570\u95ee\u9898 \u00b6 8.1 1 \u7684\u6b21\u6570 \u00b6 \u6c42\u51fa1~13\u7684\u6574\u6570\u4e2d1\u51fa\u73b0\u7684\u6b21\u6570,\u5e76\u7b97\u51fa100~1300\u7684\u6574\u6570\u4e2d1\u51fa\u73b0\u7684\u6b21\u6570\uff1f\u4e3a\u6b64\u4ed6\u7279\u522b\u6570\u4e86\u4e00\u4e0b1~13\u4e2d\u5305\u542b1\u7684\u6570\u5b57\u67091\u300110\u300111\u300112\u300113\u56e0\u6b64\u5171\u51fa\u73b06\u6b21,\u4f46\u662f\u5bf9\u4e8e\u540e\u9762\u95ee\u9898\u4ed6\u5c31\u6ca1\u8f99\u4e86\u3002ACMer\u5e0c\u671b\u4f60\u4eec\u5e2e\u5e2e\u4ed6,\u5e76\u628a\u95ee\u9898\u66f4\u52a0\u666e\u904d\u5316,\u53ef\u4ee5\u5f88\u5feb\u7684\u6c42\u51fa\u4efb\u610f\u975e\u8d1f\u6574\u6570\u533a\u95f4\u4e2d1\u51fa\u73b0\u7684\u6b21\u6570\uff08\u4ece1 \u5230 n \u4e2d1\u51fa\u73b0\u7684\u6b21\u6570\uff09\u3002 input: 13 output: 6 \u601d\u8def\uff1a\u5224\u65ad\u6bcf\u4e00\u4f4d\u4e3a 1 \u51fa\u73b0\u7684\u6b21\u6570\uff0c\u5747\u4e3a a * b + c \u7684\u5f62\u5f0f\uff0c\u5176\u4e2d a \u4e3a\u9ad8\u4f4d\u7684\u8ba1\u6570\uff0c b \u4e3a\u4f4e\u4f4d\u5404\u53d6 0-9 \uff0cc \u4e3a\u7279\u6b8a\u5904\u7406\u7684\u5c3e\u5df4 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 int NumberOf1Between1AndN_Solution ( int n ) { int x = 10 ; int now = n , dnum = 0 , ans = 0 ; while ( now ) { dnum ++ ; now /= 10 ; } for ( int i = 0 ; i < dnum ; i ++ ) { int highcnt = n / x ; now = n % x ; int currentdigit = now * 10 / x ; if ( currentdigit == 0 ) { ans += highcnt * x / 10 ; } else if ( currentdigit > 1 ) { ans += ( highcnt + 1 ) * x / 10 ; } else { ans += highcnt * x / 10 + now % ( x / 10 ) + 1 ; } x *= 10 ; } return ans ; }","title":"\u5e38\u7528\u601d\u7ef4"},{"location":"Skill/common_thougt/#_1","text":"","title":"\u5e38\u7528\u601d\u7ef4"},{"location":"Skill/common_thougt/#1","text":"\u5982\u8fde\u7eed\u6570\u636e\u7684\u63d2\u5165\u64cd\u4f5c\uff0c\u987a\u7740\u505a\u4f1a\u5bfc\u81f4\u91cd\u590d\u79fb\u52a8\u8f83\u591a \u82e5\u77e5\u9053\u63d2\u5165\u662f\u5168\u5c40\u6027\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u53cd\u7740\u64cd\u4f5c\u8fdb\u884c\u66f4\u5feb\u901f\u7684\u539f\u5730\u64cd\u4f5c","title":"1 \u987a\u5c40\u9006\u5168"},{"location":"Skill/common_thougt/#11-url","text":"input: we are happy. output: we%20are%20happy. requrements: \u539f\u5730\u64cd\u4f5c\uff0c\u4e0d\u80fd\u7528\u65b0\u6570\u7ec4 code\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 void ReplaceBlank ( char str [], int len ) { if ( str == NULL || len <= 0 ) // \u9632\u7a7a { return ; } int num = 0 ; for ( int i = 0 ; str [ i ] != '\\0' ; i ++ ) { if ( str [ i ] == ' ' ) { num ++ ; } } // \u4f18\u5316\uff1a\u53ef\u7528\u53d8\u91cf\u5728\u5faa\u73af\u8ba1\u7b97\u957f\u5ea6\uff0c\u800c\u51cf\u5c11strlen\u7684\u6b21\u6570 int p = strlen ( str ) + num * 2 , q = strlen ( str ); if ( p > len ) // \u9632\u6ea2 { return ; } while ( q >= 0 && p > q ) // \u4f18\u5316\uff1apq\u91cd\u5408\u5373\u53ef\u63d0\u65e9\u5faa\u73af\u7ed3\u675f { if ( str [ q ] == ' ' ) { str [ p -- ] = '0' ; str [ p -- ] = '2' ; str [ p -- ] = '%' ; } else { str [ p -- ] = str [ q ]; } q -- ; } }","title":"1.1 url \u4e2d\u7684\u5b57\u7b26\u4e32\u66ff\u6362"},{"location":"Skill/common_thougt/#12","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 void InsertArray ( int a [], int lena , int b [], int lenb , int total ) //\u628a\u6709\u5e8f\u7684b\u6570\u7ec4\u63d2\u5165\u6709\u5e8f\u7684a\u6570\u7ec4\u4e2d { if ( a == NULL || b == NULL || ! lena || ! lenb || ! total ) { return ; } if ( lena + lenb > total ) { return ; } int p = lena + lenb -1 , q = lena - 1 , r = lenb - 1 ; while ( p >= 0 && p > q ) { if ( a [ q ] > b [ r ]) { a [ p -- ] = a [ q -- ]; } else { a [ p -- ] = b [ r -- ]; } } }","title":"1.2 \u4e00\u4e2a\u6709\u5e8f\u6570\u7ec4\u63d2\u5165\u53e6\u4e00\u4e2a\u6709\u5e8f\u6570\u7ec4\u7684\u539f\u5730\u64cd\u4f5c\u540c\u7406"},{"location":"Skill/common_thougt/#2","text":"","title":"2 \u67e5\u627e"},{"location":"Skill/common_thougt/#21","text":"\u4e8c\u5206\u67e5\u627e\u89e3\u51b3\u7684\u5bf9\u8c61\u4f4d\u4f4d\u6709\u5e8f\u6570\u5217\uff0c\u6d41\u7a0b\u4e3a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 while ( l <= r ) { mid = ( l + r ) >> 1 ; if ( check the mid ) { update ( ans ); l = mid ; or l = mid - 1 ; } if () { update ( ans ); r = mid ; or r = mid + 1 ; } } \u4e8c\u5206\u7684\u5de6\u53f3\u9488\u9700\u89c6\u60c5\u51b5\u51b3\u5b9a\u903c\u8fd1\u65b9\u5f0f\u548c\u8df3\u51fa\u65b9\u5f0f \u521d\u59cb\u5b9a\u9488\u5c3d\u53ef\u80fd\u7f29\u77ed\u5934\u5c3e\u957f\u5ea6(-inf ~ inf) \u5e38\u7528\u4e8e\u6c42\u201c\u4f7f\u2026\u2026\u6700\u5927\u503c\u5c3d\u53ef\u80fd\u5c0f\u201d \u7ed9\u5b9a\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u6570\u7ec4 nums \u548c\u4e00\u4e2a\u6574\u6570 m \uff0c\u4f60\u9700\u8981\u5c06\u8fd9\u4e2a\u6570\u7ec4\u5206\u6210 m \u4e2a\u975e\u7a7a\u7684\u8fde\u7eed\u5b50\u6570\u7ec4\u3002\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u4f7f\u5f97\u8fd9 m \u4e2a\u5b50\u6570\u7ec4\u5404\u81ea\u548c\u7684\u6700\u5927\u503c\u6700\u5c0f\u3002 \u8f93\u5165\uff1anums = [7,2,5,10,8], m = 2 \u8f93\u51fa\uff1a18 \u89e3\u91ca\uff1a \u4e00\u5171\u6709\u56db\u79cd\u65b9\u6cd5\u5c06 nums \u5206\u5272\u4e3a 2 \u4e2a\u5b50\u6570\u7ec4\u3002 \u5176\u4e2d\u6700\u597d\u7684\u65b9\u5f0f\u662f\u5c06\u5176\u5206\u4e3a [7,2,5] \u548c [10,8] \u3002 \u56e0\u4e3a\u6b64\u65f6\u8fd9\u4e24\u4e2a\u5b50\u6570\u7ec4\u5404\u81ea\u7684\u548c\u7684\u6700\u5927\u503c\u4e3a18\uff0c\u5728\u6240\u6709\u60c5\u51b5\u4e2d\u6700\u5c0f\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 int n , m , a [ 1000005 ]; int sum , maxn ; bool check ( int x ) { int cnt = 0 ; int tmp = 0 ; for ( int i = 0 ; i < n ; i ++ ) { tmp += a [ i ]; if ( tmp > x ) { cnt ++ ; tmp = a [ i ]; } else { tmp += a [ i ]; } } if ( cnt <= m ) { return true ; } else { return false ; } } int main () { scanf ( \"%d%d\" , & n , & m ); for ( int i = 0 ; i < n ; i ++ ) { scanf ( \"%d\" , & a [ i ]); sum += a [ i ]; maxn = max ( maxn , a [ i ]); } int l = maxn , r = sum , ans = -1 ; while ( l <= r ) { int mid = ( l + r ) >> 1 ; if ( check ( mid )) { r = mid - 1 ; ans = mid ; } else { l = mid + 1 ; } } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"2.1 \u4e8c\u5206\u67e5\u627e"},{"location":"Skill/common_thougt/#22-k","text":"","title":"2.2 \u5feb\u6162\u9488\u67e5\u627e\uff08\u53ef\u53c2\u8003\u94fe\u8868\u7684\u67e5\u627e\u5012\u6570\u7b2c k \u4e2a\u3001\u5224\u73af\uff09"},{"location":"Skill/common_thougt/#221","text":"\u628a\u53ea\u5305\u542b\u8d28\u56e0\u5b502\u30013\u548c5\u7684\u6570\u79f0\u4f5c\u4e11\u6570\uff08Ugly Number\uff09\u3002\u4f8b\u59826\u30018\u90fd\u662f\u4e11\u6570\uff0c\u4f4614\u4e0d\u662f\uff0c\u56e0\u4e3a\u5b83\u5305\u542b\u8d28\u56e0\u5b507\u3002 \u4e60\u60ef\u4e0a\u6211\u4eec\u628a1\u5f53\u505a\u662f\u7b2c\u4e00\u4e2a\u4e11\u6570\u3002\u6c42\u6309\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u7684\u7b2cN\u4e2a\u4e11\u6570\u3002 input: 7 output: 8 \u901a\u8fc7\u4e09\u4e2a\u79fb\u9488\u4fdd\u8bc1\u6700\u5c0f\u7684\u4e11\u6570\u80fd\u591f\u52a0\u5165 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 int GetUglyNumber_Solution ( int index ) { if ( index <= 0 ) return 0 ; int * ugly = new int [ index ]; ugly [ 0 ] = 1 ; int i = 1 ; int * p2 = ugly ; int * p3 = ugly ; int * p5 = ugly ; while ( i < index ) { int tmp = min (( * p2 ) * 2 , min (( * p3 ) * 3 ,( * p5 ) * 5 )); ugly [ i ] = tmp ; while (( * p2 ) * 2 <= tmp ) { p2 ++ ; } while (( * p3 ) * 3 <= tmp ) { p3 ++ ; } while (( * p5 ) * 5 <= tmp ) { p5 ++ ; } i ++ ; } return ugly [ index - 1 ]; }","title":"2.2.1 \u4e11\u6570"},{"location":"Skill/common_thougt/#23","text":"","title":"2.3 \u94fe\u8868\u67e5\u627e"},{"location":"Skill/common_thougt/#231","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 class Solution { public : ListNode * EntryNodeOfLoop ( ListNode * pHead ) { ListNode * p = pHead , * q = pHead ; if ( ! pHead ) { return NULL ; } while ( q && q -> next ) { p = p -> next ; q = q -> next -> next ; if ( p == q ) { break ; } } if ( ! p || ! p -> next ) return NULL ; q = pHead ; while ( p != q ) { p = p -> next ; q = q -> next ; } return q ; } };","title":"2.3.1 \u94fe\u8868\u73af\u7684\u5165\u53e3\u8282\u70b9"},{"location":"Skill/common_thougt/#24","text":"","title":"2.4 \u73af\u67e5\u627e"},{"location":"Skill/common_thougt/#241","text":"N \u4eba\u6210\u73af\uff0c\u9694 m \u6740\u4eba\uff0c\u6700\u540e\u5e78\u5b58 \u9012\u63a8\u516c\u5f0f\uff1a f(n,m) = (f(n-1,m) + m) \\% n f(n,m) = (f(n-1,m) + m) \\% n 1 2 3 4 5 6 7 8 9 10 11 12 13 int LastRemaining ( int n , int m ) { if ( n < 1 || m < 1 ) { return -1 ; } int last = 0 ; for ( int i = 2 ; i <= n ; i ++ ) { last = ( last + m ) % i ; } return last ; }","title":"2.4.1 \u7ea6\u745f\u592b\u73af"},{"location":"Skill/common_thougt/#25-dfs","text":"","title":"2.5 \u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u67e5\u627e(dfs)"},{"location":"Skill/common_thougt/#251","text":"\u8bf7\u8bbe\u8ba1\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u6765\u5224\u65ad\u5728\u4e00\u4e2a\u77e9\u9635\u4e2d\u662f\u5426\u5b58\u5728\u4e00\u6761\u5305\u542b\u67d0\u5b57\u7b26\u4e32\u6240\u6709\u5b57\u7b26\u7684\u8def\u5f84\u3002\u8def\u5f84\u53ef\u4ee5\u4ece\u77e9\u9635\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u683c\u5b50\u5f00\u59cb\uff0c\u6bcf\u4e00\u6b65\u53ef\u4ee5\u5728\u77e9\u9635\u4e2d\u5411\u5de6\uff0c\u5411\u53f3\uff0c\u5411\u4e0a\uff0c\u5411\u4e0b\u79fb\u52a8\u4e00\u4e2a\u683c\u5b50\u3002\u5982\u679c\u4e00\u6761\u8def\u5f84\u7ecf\u8fc7\u4e86\u77e9\u9635\u4e2d\u7684\u67d0\u4e00\u4e2a\u683c\u5b50\uff0c\u5219\u8be5\u8def\u5f84\u4e0d\u80fd\u518d\u8fdb\u5165\u8be5\u683c\u5b50\u3002 \u77e9\u9635\u4e2d\u5305\u542b\u4e00\u6761\u5b57\u7b26\u4e32\"bcced\"\u7684\u8def\u5f84\uff0c\u4f46\u662f\u77e9\u9635\u4e2d\u4e0d\u5305\u542b\"abcb\"\u8def\u5f84\uff0c\u56e0\u4e3a\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26b\u5360\u636e\u4e86\u77e9\u9635\u4e2d\u7684\u7b2c\u4e00\u884c\u7b2c\u4e8c\u4e2a\u683c\u5b50\u4e4b\u540e\uff0c\u8def\u5f84\u4e0d\u80fd\u518d\u6b21\u8fdb\u5165\u8be5\u683c\u5b50\u3002 input: [[a,b,c,e],[s,f,c,s],[a,d,e,e]],\"abcced\" output: true 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 class Solution { public : /** * \u4ee3\u7801\u4e2d\u7684\u7c7b\u540d\u3001\u65b9\u6cd5\u540d\u3001\u53c2\u6570\u540d\u5df2\u7ecf\u6307\u5b9a\uff0c\u8bf7\u52ff\u4fee\u6539\uff0c\u76f4\u63a5\u8fd4\u56de\u65b9\u6cd5\u89c4\u5b9a\u7684\u503c\u5373\u53ef * * * @param matrix char\u5b57\u7b26\u578bvector<vector<>> * @param word string\u5b57\u7b26\u4e32 * @return bool\u5e03\u5c14\u578b */ int ans = false ; int vis [ 205 ][ 205 ] = { 0 }; int dir [ 4 ][ 2 ] = {{ 0 , 1 },{ 1 , 0 },{ -1 , 0 },{ 0 , -1 }}; void dfs ( vector < vector < char >>& m , int r , int c , string w , int index ) { int rnum = m . size (); int cnum = m [ 0 ]. size (); if ( w [ index ] == '\\0' ) { ans = true ; } for ( int i = 0 ; i < 4 ; i ++ ) { int nxtr = r + dir [ i ][ 0 ]; int nxtc = c + dir [ i ][ 1 ]; if ( nxtr >= 0 && nxtr < rnum && nxtc >= 0 && nxtc < cnum ) { if ( m [ nxtr ][ nxtc ] == w [ index ] && vis [ nxtr ][ nxtc ] == 0 ) { vis [ nxtr ][ nxtc ] = 1 ; dfs ( m , nxtr , nxtc , w , index + 1 ); vis [ nxtr ][ nxtc ] = 0 ; } } } } bool hasPath ( vector < vector < char > >& matrix , string word ) { int rnum = matrix . size (); int cnum = matrix [ 0 ]. size (); if ( word . length () == 0 || rnum <= 0 || cnum <= 0 ) { return false ; } int index = 0 ; for ( int i = 0 ; i < rnum ; i ++ ) { for ( int j = 0 ; j < cnum ; j ++ ) { if ( matrix [ i ][ j ] == word [ index ] && vis [ i ][ j ] == 0 ) { vis [ i ][ j ] = 1 ; dfs ( matrix , i , j , word , index + 1 ); vis [ i ][ j ] = 0 ; } } } return ans ; } };","title":"2.5.1 \u77e9\u9635\u641c\u7d22"},{"location":"Skill/common_thougt/#252","text":"\u8f93\u5165: [1,2,3] \u8f93\u51fa: [ [1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], [3,2,1] ] \u666e\u901a dfs \uff1a\u8f83\u6162 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Solution { public : vector < vector < int >> ans ; vector < int > tmp ; int vis [ 1000005 ] = { 0 }; void dfs ( vector < int >& nums ) { if ( tmp . size () == nums . size ()) { ans . push_back ( tmp ); return ; } int len = nums . size (); for ( int i = 0 ; i < len ; i ++ ) { if ( ! vis [ i ]) { vis [ i ] = 1 ; tmp . push_back ( nums [ i ]); dfs ( nums ); tmp . pop_back (); vis [ i ] = 0 ; } } } vector < vector < int >> permute ( vector < int >& nums ) { dfs ( nums ); return ans ; } }; \u91c7\u7528\u5185\u7f6e\u54c8\u51fd\u6570 next_permutation/prev_permutation : \u8fd4\u56de\u4e0b/\u4e0a\u4e00\u4e2a\u6309\u5b57\u5178\u5e8f\u6392\u5217\u7684\u5168\u6392\u5217\uff08\u6bd4\u81ea\u5df1\u5199\u7684\u5feb\u5f88\u591a\uff09 next_permutation(a,a+len) a \u53ef\u4e3a\u6574\u578b\u6216\u5b57\u7b26\u6570\u7ec4 next_premutation(vec.begin(),vec.end()) vec \u4e3a vector 1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public : vector < vector < int >> permute ( vector < int >& nums ) { vector < vector < int >> ans ; sort ( nums . begin (), nums . end ()); ans . push_back ( nums ); while ( next_permutation ( nums . begin (), nums . end ())) { ans . push_back ( nums ); } return ans ; } };","title":"2.5.2 \u5168\u6392\u5217"},{"location":"Skill/common_thougt/#3","text":"","title":"3 \u6570\u5b66\u6280\u5de7"},{"location":"Skill/common_thougt/#31","text":"\u5e95\u500d\u6307\u8870\uff0c\u6307\u5355\u4e58\u5e95 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int pow_mod ( int a , int n , int p ) { int ans = 1 ; int base = a % p ; while ( n ) { if ( n & 1 ) { ans = ( ans * base ) % p ; } base = ( base * base ) % p ; n >>= 1 ; } return ans ; }","title":"3.1 \u5feb\u901f\u5e42\u53d6\u6a21"},{"location":"Skill/common_thougt/#4","text":"","title":"4 \u4f4d\u8fd0\u7b97\u6280\u5de7"},{"location":"Skill/common_thougt/#41-1","text":"1 2 3 4 5 6 7 8 9 int NumberOf1 ( int n ) { int ans = 0 ; while ( n ) { n &= n -1 ; ans ++ ; } return ans ; }","title":"4.1 \u8ba1\u7b97\u4e00\u4e2a\u6570\u4e8c\u8fdb\u5236\u4e2d 1 \u7684\u4e2a\u6570"},{"location":"Skill/common_thougt/#5","text":"","title":"5 \u82b1\u5f0f\u6253\u5370"},{"location":"Skill/common_thougt/#51","text":"input: [[1,2],[3,4]] output: [1,2,4,3] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 vector < int > printMatrix ( vector < vector < int > > matrix ) { int row = matrix . size (), col = matrix [ 0 ]. size (); vector < int > ans ; int start = 0 ; // \u6bcf\u4e00\u5708\u7684\u8d77\u70b9(1,1)(2,2)\u2026\u2026 while ( col > 2 * start && row > 2 * start ) // \u5faa\u73af\u8df3\u51fa\u6761\u4ef6 { int endX = col - 1 - start ; int endY = row - 1 - start ; for ( int i = start ; i <= endX ; i ++ ) { ans . push_back ( matrix [ start ][ i ]); } if ( endY > start ) { for ( int i = start + 1 ; i <= endY ; i ++ ) { ans . push_back ( matrix [ i ][ endX ]); } } if ( start < endX && endY > start ) { for ( int i = endX - 1 ; i >= start ; i -- ) { ans . push_back ( matrix [ endY ][ i ]); } } if ( start < endX && start < endY - 1 ) { for ( int i = endY - 1 ; i >= start + 1 ; i -- ) { ans . push_back ( matrix [ i ][ start ]); } } start ++ ; } return ans ; }","title":"5.1 \u987a\u65f6\u9488\u4ece\u5916\u5230\u5185\u6253\u5370\u77e9\u9635"},{"location":"Skill/common_thougt/#52","text":"\u8bf7\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u6309\u7167\u4e4b\u5b57\u5f62\u6253\u5370\u4e8c\u53c9\u6811\uff0c\u5373\u7b2c\u4e00\u884c\u6309\u7167\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u6253\u5370\uff0c\u7b2c\u4e8c\u5c42\u6309\u7167\u4ece\u53f3\u81f3\u5de6\u7684\u987a\u5e8f\u6253\u5370\uff0c\u7b2c\u4e09\u884c\u6309\u7167\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u6253\u5370\uff0c\u5176\u4ed6\u884c\u4ee5\u6b64\u7c7b\u63a8 input: {8,6,10,5,7,9,11} output: [[8],[10,6],[5,7,9,11]] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 /* struct TreeNode { int val; struct TreeNode *left; struct TreeNode *right; TreeNode(int x) : val(x), left(NULL), right(NULL) { } }; */ class Solution { public : vector < vector < int > > Print ( TreeNode * pRoot ) { vector < vector < int >> ans ; if ( pRoot == NULL ) { return ans ; } vector < int > tmp ; queue < TreeNode *> q [ 2 ]; stack < int > s ; int flag = 0 , layer = 0 ; q [ 0 ]. push ( pRoot ); while ( ! q [ 0 ]. empty () || ! q [ 1 ]. empty ()) { tmp . clear (); if ( q [ flag ]. empty ()) flag = 1 - flag ; while ( ! q [ flag ]. empty ()) { TreeNode * p = q [ flag ]. front (); q [ flag ]. pop (); if ( ! ( layer & 1 )) { tmp . push_back ( p -> val ); } else { s . push ( p -> val ); } if ( p -> left ) { q [ 1 - flag ]. push ( p -> left ); } if ( p -> right ) { q [ 1 - flag ]. push ( p -> right ); } } while ( ! s . empty ()) { int k = s . top (); s . pop (); tmp . push_back ( k ); } ans . push_back ( tmp ); layer = 1 - layer ; } return ans ; } };","title":"5.2 \u201c\u4e4b\u201d\u5b57\u6253\u5370\u4e8c\u53c9\u6811"},{"location":"Skill/common_thougt/#6","text":"\u7b80\u5355\u8f85\u52a9\uff1a \u5f53\u8fb9\u754c\u5904\u7406\u60c5\u51b5\u8fc7\u591a\u65f6\uff0c\u8003\u8651\u80fd\u5426\u901a\u8fc7\u589e\u52a0\u8282\u70b9\u6765\u4fdd\u8bc1\u4ee3\u7801\u901a\u7528 \u6837\u4f8b\u53c2\u8003 \u4e0d\u4fdd\u7559\u91cd\u590d\u503c\u5220\u9664\u94fe\u8868\u7684\u91cd\u590d\u8282\u70b9\uff08\u589e\u52a0\u65b0\u5934\uff09","title":"6.\u8f85\u52a9\u7a7a\u95f4"},{"location":"Skill/common_thougt/#61","text":"","title":"6.1 \u8f85\u52a9\u6808"},{"location":"Skill/common_thougt/#611","text":"\u5f53\u8981 O(1) \u67e5\u627e\u6808\u4e2d\u6700\u5c0f\u5143\u7d20\uff0c\u7528\u4e00\u4e2a\u8f85\u52a9\u6808\u7ef4\u62a4\u5373\u53ef(\u9632\u6b62\u6700\u5c0f\u5143\u7d20\u5f39\u51fa\u627e\u4e0d\u5230) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 stack < int > s , m ; void push ( int value ) { s . push ( value ); if ( m . empty ()) { m . push ( value ); } else { if ( value < m . top ()) { m . push ( value ); } else { m . push ( m . top ()); } } } void pop () { s . pop (); m . pop (); } int top () { return s . top (); } int min () { return m . top (); }","title":"6.1.1 \u6808\u4e2d\u6700\u5c0f\u5143\u7d20"},{"location":"Skill/common_thougt/#612","text":"\u8f93\u5165\u4e24\u4e2a\u6574\u6570\u5e8f\u5217\uff0c\u7b2c\u4e00\u4e2a\u5e8f\u5217\u8868\u793a\u6808\u7684\u538b\u5165\u987a\u5e8f\uff0c\u8bf7\u5224\u65ad\u7b2c\u4e8c\u4e2a\u5e8f\u5217\u662f\u5426\u53ef\u80fd\u4e3a\u8be5\u6808\u7684\u5f39\u51fa\u987a\u5e8f\u3002\u5047\u8bbe\u538b\u5165\u6808\u7684\u6240\u6709\u6570\u5b57\u5747\u4e0d\u76f8\u7b49\u3002\u4f8b\u5982\u5e8f\u52171,2,3,4,5\u662f\u67d0\u6808\u7684\u538b\u5165\u987a\u5e8f\uff0c\u5e8f\u52174,5,3,2,1\u662f\u8be5\u538b\u6808\u5e8f\u5217\u5bf9\u5e94\u7684\u4e00\u4e2a\u5f39\u51fa\u5e8f\u5217\uff0c\u4f464,3,5,1,2\u5c31\u4e0d\u53ef\u80fd\u662f\u8be5\u538b\u6808\u5e8f\u5217\u7684\u5f39\u51fa\u5e8f\u5217\u3002\uff08\u6ce8\u610f\uff1a\u8fd9\u4e24\u4e2a\u5e8f\u5217\u7684\u957f\u5ea6\u662f\u76f8\u7b49\u7684\uff09 input: [1,2,3,4,5],[4,3,5,1,2] output: false 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 bool IsPopOrder ( vector < int > pushV , vector < int > popV ) { if ( ! pushV . empty () && ! popV . empty ()) { stack < int > spop ; int len = pushV . size (), index = 0 , i = 0 ; for ( i = 0 ; i < len ; i ++ ) { while ( spop . empty () || spop . top () != popV [ i ]) { if ( index == len ) { return false ; } spop . push ( pushV [ index ++ ]); } spop . pop (); } if ( i == len ) { return true ; } } return false ; }","title":"6.1.2 \u6808\u7684\u538b\u5165\u548c\u5f39\u51fa\u5e8f\u5217"},{"location":"Skill/common_thougt/#62-map","text":"","title":"6.2 \u54c8\u5e0c\u8868(map)"},{"location":"Skill/common_thougt/#621","text":"\u8f93\u5165\u4e00\u4e2a\u590d\u6742\u94fe\u8868\uff08\u6bcf\u4e2a\u8282\u70b9\u4e2d\u6709\u8282\u70b9\u503c\uff0c\u4ee5\u53ca\u4e24\u4e2a\u6307\u9488\uff0c\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u4e2a\u8282\u70b9\uff0c\u53e6\u4e00\u4e2a\u7279\u6b8a\u6307\u9488random\u6307\u5411\u4e00\u4e2a\u968f\u673a\u8282\u70b9\uff09\uff0c\u8bf7\u5bf9\u6b64\u94fe\u8868\u8fdb\u884c\u6df1\u62f7\u8d1d\uff0c\u5e76\u8fd4\u56de\u62f7\u8d1d\u540e\u7684\u5934\u7ed3\u70b9\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 struct RandomListNode { int label ; struct RandomListNode * next , * random ; RandomListNode ( int x ) : label ( x ), next ( NULL ), random ( NULL ) { } }; map < RandomListNode * , RandomListNode *> mp ; RandomListNode * Clone ( RandomListNode * pHead ) { RandomListNode * ans = NULL , * p = NULL , * q = NULL , * pre = NULL ; q = pHead ; while ( q ) { p = ( RandomListNode * ) malloc ( sizeof ( RandomListNode )); p -> label = q -> label ; p -> next = q -> next ; p -> random = NULL ; if ( q == pHead ) { ans = p ; } mp [ q ] = p ; q = q -> next ; if ( pre ) { pre -> next = p ; } pre = p ; p = NULL ; } q = pHead ; p = ans ; while ( q ) { p -> random = mp [ q -> random ]; q = q -> next ; p = p -> next ; } return ans ; } \u91c7\u7528\u54c8\u5e0c\u8868\u7684\u65b9\u5f0f\u662f\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\uff0c\u590d\u6742\u5ea6\u4e3a O(n) \u82e5\u4e0d\u91c7\u7528\u989d\u5916\u7a7a\u95f4\uff0c\u601d\u8def\u4e3a\uff1a \u6839\u636e\u539f\u59cb\u94fe\u8868\u7684\u6bcf\u4e2a\u7ed3\u70b9 N \u521b\u5efa\u5bf9\u5e94\u7684 N' \u628a N' \u8fde\u63a5\u5230\u5bf9\u5e94\u7684 N \u540e\u9762 \u8bbe\u7f6e\u590d\u5236\u51fa\u6765\u7684\u7ed3\u70b9\u7684 random \uff0c \u5373 N \u7684\u6307\u5411 S,\u5219 N' \u7684\u6307\u5411 S' \u628a\u8be5\u957f\u94fe\u8868\u91cd\u65b0\u62c6\u5206\u6210\u4e24\u4e2a\u94fe\u8868\uff0c\u5076\u6570\u4f4d\u7f6e\u8282\u70b9\u62fc\u63a5\u8d77\u6765\u5373\u4e3a\u7b54\u6848","title":"6.2.1 \u590d\u6742\u94fe\u8868\u7684\u6df1\u62f7\u8d1d"},{"location":"Skill/common_thougt/#63","text":"c++\u8bed\u8a00\u4e2d\uff0cmultiset \u662f \u5e93\u4e2d\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u7c7b\u578b\uff0c\u5b83\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u5e8f\u5217\uff0c\u63d2\u5165\u4e00\u4e2a\u6570\uff0c\u5220\u9664\u4e00\u4e2a\u6570\u90fd\u80fd\u591f\u5728 O(logn) \u7684\u65f6\u95f4\u5185\u5b8c\u6210\uff0c\u800c\u4e14\u4ed6\u80fd\u65f6\u523b\u4fdd\u8bc1\u5e8f\u5217\u4e2d\u7684\u6570\u662f\u6709\u5e8f\u7684\uff0c\u800c\u4e14\u5e8f\u5217\u4e2d\u53ef\u4ee5\u5b58\u5728\u91cd\u590d\u7684\u6570\u3002 \u7ed9\u5b9a\u4e00\u4e2a\u6570\u7ec4\uff0c\u627e\u51fa\u5176\u4e2d\u6700\u5c0f\u7684K\u4e2a\u6570\u3002\u4f8b\u5982\u6570\u7ec4\u5143\u7d20\u662f4,5,1,6,2,7,3,8\u8fd98\u4e2a\u6570\u5b57\uff0c\u5219\u6700\u5c0f\u76844\u4e2a\u6570\u5b57\u662f1,2,3,4\u3002\u5982\u679cK>\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u90a3\u4e48\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684\u6570\u7ec4 input: [4,5,1,6,2,7,3,8],4 output: [1,2,3,4] \u91c7\u7528\u7ea2\u9ed1\u6811\u7ef4\u62a4\u53ef\u4ee5\u51cf\u5c11\u6392\u5e8f\u5e26\u6765\u7684\u65f6\u95f4\u590d\u6742\u5ea6 \u524d k \u5c0f\u7528\u5927\u6839\u5806\uff0c\u524d k \u5927\u7528\u5c0f\u6839\u5806 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 multiset < int \uff0c greater < int >> ms ; vector < int > GetLeastNumbers_Solution ( vector < int > input , int k ) { ms . clear (); vector < int > ans ; if ( k < 1 || input . empty () || k > input . size ()) { return ans ; } auto iter = input . begin (); for (; iter != input . end (); iter ++ ) { if ( ms . size () < k ) { ms . insert ( * iter ); } else { auto ms_iter = ms . begin (); if ( * iter < * ms_iter ) { ms . erase ( ms_iter ); ms . insert ( * iter ); } } } auto ms_iter = ms . begin (); for (; ms_iter != ms . end (); ms_iter ++ ) { ans . push_back ( * ms_iter ); } reverse ( ans . begin (), ans . end ()); return ans ; } \u4f18\u5148\u961f\u5217\u5219\u4e3a\u53e6\u4e00\u79cd\u57fa\u4e8e\u5806\u7684\u6570\u636e\u7ed3\u6784(heap) \u6570\u636e\u6d41\u4e2d\u7684\u4e2d\u4f4d\u6570 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Solution { public : #define SCD static_cast<double> priority_queue < int > min_q ; // \u5927\u9876\u63a8 priority_queue < int , vector < int > , greater < int >> max_q ; // \u5c0f\u9876\u5806 void Insert ( int num ) { min_q . push ( num ); // \u8bd5\u56fe\u52a0\u5165\u5230\u5927\u9876\u63a8 // \u5e73\u8861\u4e00\u4e2a\u4e24\u4e2a\u5806 max_q . push ( min_q . top ()); min_q . pop (); if ( min_q . size () < max_q . size ) { min_q . push ( max_q . top ()); max_q . pop (); } } double GetMedian () { return min_q . size () > max_q . size () ? SCD ( min_q . top ()) : SCD ( min_q . top () + max_q . top ()) / 2 ; } }; multiset \u9ed8\u8ba4\u5c0f\u9876\u5806\uff0c\u5927\u9876\u5806\u4e3a multiset<int, greater<int>> ms; priority_queue \u9ed8\u8ba4\u5927\u9876\u5806\uff0c\u5c0f\u9876\u5806\u4e3a priority_queue<int, vector<int>, greater<int>> pq;","title":"6.3 \u7ea2\u9ed1\u6811\u548c\u5806"},{"location":"Skill/common_thougt/#64","text":"\u53cc\u7aef\u961f\u5217\u662f\u5bf9\u5934\u548c\u5c3e\u90fd\u80fd\u64cd\u4f5c\uff0c\u9002\u5408\u4e8e\u7a97\u53e3\u6ed1\u52a8\u95ee\u9898 \u7ed9\u5b9a\u4e00\u4e2a\u6570\u7ec4\u548c\u6ed1\u52a8\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u627e\u51fa\u6240\u6709\u6ed1\u52a8\u7a97\u53e3\u91cc\u6570\u503c\u7684\u6700\u5927\u503c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8f93\u5165\u6570\u7ec4{2,3,4,2,6,2,5,1}\u53ca\u6ed1\u52a8\u7a97\u53e3\u7684\u5927\u5c0f3\uff0c\u90a3\u4e48\u4e00\u5171\u5b58\u57286\u4e2a\u6ed1\u52a8\u7a97\u53e3\uff0c\u4ed6\u4eec\u7684\u6700\u5927\u503c\u5206\u522b\u4e3a{4,4,6,6,6,5}\uff1b \u9488\u5bf9\u6570\u7ec4{2,3,4,2,6,2,5,1}\u7684\u6ed1\u52a8\u7a97\u53e3\u6709\u4ee5\u4e0b6\u4e2a\uff1a {[2,3,4],2,6,2,5,1}\uff0c {2,[3,4,2],6,2,5,1}\uff0c {2,3,[4,2,6],2,5,1}\uff0c {2,3,4,[2,6,2],5,1}\uff0c {2,3,4,2,[6,2,5],1}\uff0c {2,3,4,2,6,[2,5,1]}\u3002 \u7a97\u53e3\u5927\u4e8e\u6570\u7ec4\u957f\u5ea6\u7684\u65f6\u5019\uff0c\u8fd4\u56de\u7a7a input: [2,3,4,2,6,2,5,1],3 output: [4,4,6,6,6,5] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Solution { public : vector < int > maxInWindows ( const vector < int >& num , unsigned int size ) { vector < int > ans ; int len = num . size (); if ( num . size () == 0 || size < 1 || size > num . size ()) { return ans ; } deque < int > dq ; for ( int i = 0 ; i < len ; i ++ ) { while ( ! dq . empty () && num [ i ] > num [ dq . back ()]) { dq . pop_back (); } dq . push_back ( i ); if ( dq . front () + size <= i ) { dq . pop_front (); } if ( i + 1 >= size ) { ans . push_back ( num [ dq . front ()]); } } return ans ; } };","title":"6.4 \u53cc\u7aef\u961f\u5217"},{"location":"Skill/common_thougt/#7","text":"","title":"7.\u6df1\u5ea6\u4f18\u5148\u641c\u7d22"},{"location":"Skill/common_thougt/#71","text":"\u8f93\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32,\u957f\u5ea6\u4e0d\u8d85\u8fc79(\u53ef\u80fd\u6709\u5b57\u7b26\u91cd\u590d),\u5b57\u7b26\u53ea\u5305\u62ec\u5927\u5c0f\u5199\u5b57\u6bcd input: \"ab\" output: [\"ab\",\"ba\"] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 vector < string > ans ; bool vis [ 10 ] = { false }; string rel = {}; vector < string > Permutation ( string str ) { int len = str . length (); if ( rel . length () == len ) { ans . push_back ( rel ); return ans ; } for ( int i = 0 ; i < len ; i ++ ) { if ( ! vis [ i ]) { vis [ i ] = true ; rel . push_back ( str [ i ]); Permutation ( str ); rel . pop_back (); vis [ i ] = false ; } } sort ( ans . begin (), ans . end ()); ans . erase ( unique ( ans . begin (), ans . end ()), ans . end ()); return ans ; } \u62d3\u5c55\uff1a \u6c42\u5b57\u7b26\u4e32\u7684\u6240\u6709\u7ec4\u5408 input: \"abc\" output: [\"a\",\"b\",\"c\",\"ab\",\"ac\",\"bc\",\"abc\"] \u601d\u8def\uff1a \u628a n \u4e2a\u5b57\u7b26\u5206\u6210\u4e24\u90e8\u5206 * \u5982\u679c\u7ec4\u5408\u91cc\u5305\u542b\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5219\u4e0b\u4e00\u6b65\u6c42\u5269\u4f59\u7684 n-1 \u4e2a\u5b57\u7b26\u4e2d\u957f\u5ea6\u4e3a m-1 \u7684\u7ec4\u5408 * \u5982\u679c\u7ec4\u5408\u91cc\u4e0d\u5305\u542b\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5219\u4e0b\u4e00\u6b65\u6c42\u5269\u4f59\u7684 n-1 \u4e2a\u5b57\u7b26\u4e2d\u957f\u5ea6\u4e3a m \u7684\u7ec4\u5408 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 public static void stringCombination ( String s ){ List < String > list = new ArrayList <> (); //\u6c42\u6bcf\u4e00\u79cd\u957f\u5ea6\u7684\u7ec4\u5408 for ( int i = 1 ; i <= s . length (); i ++ ){ stringCombination ( s , 0 , i , list ); } } public static void stringCombination ( String s , int index , int num , List < String > result ){ //\u7ec4\u5408\u957f\u5ea6\u4e3a0\uff0c\u9012\u5f52\u7ed3\u675f\uff0c\u8f93\u51fa\u5f53\u524d\u7ed3\u679c if ( num == 0 ){ for ( String s1 : result ) { System . out . print ( s1 ); } System . out . println (); return ; } //\u9700\u8981\u6c42\u7684\u5b57\u7b26\u4e32\u4e3a\u7a7a\uff0c\u9012\u5f52\u7ed3\u675f if ( index == s . length ()) return ; //1.1 \u9009\u62e9\u5f53\u524d\u4e0b\u6807\u7684\u5b57\u7b26 result . add ( s . charAt ( index ) + \"\" ); //1.2 \u5728\u540e\u9762\u5b57\u7b26\u4e32\u4e2d\u9009\u62e9num - 1\u4e2a\u5b57\u7b26 stringCombination ( s , index + 1 , num - 1 , result ); //1.3 \u6e05\u9664\u7f13\u5b58 result . remove ( result . size () - 1 ); //2 \u4e0d\u9009\u62e9\u5f53\u524d\u4e0b\u6807\u7684\u5b57\u7b26\uff0c\u5728\u540e\u9762\u5b57\u7b26\u4e2d\u9009\u62e9num\u4e2a\u5b57\u7b26 stringCombination ( s , index + 1 , num , result ); }","title":"7.1 \u6c42\u5b57\u7b26\u7684\u5168\u6392\u5217"},{"location":"Skill/common_thougt/#72","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 int x [ 8 ], tot = 0 ; bool B ( int x [], int k ) { int i ; for ( i = 0 ; i < k ; i ++ ) { if ( x [ i ] == x [ k ] || x [ i ] - x [ k ] == i - k ) { return false ; } } return true ; } int queen ( int i ) { if ( i >= 8 ) { tot ++ ; for ( i = 0 ; i < 8 ; i ++ ) { cout << x [ i ] << \" \" ; } cout << endl ; } for ( int k = 0 ; k < 8 ; k ++ ) { x [ i ] = k ; if ( B ( x . i )) { queen ( i + 1 ); } } }","title":"7.2 \u516b\u7687\u540e\u95ee\u9898"},{"location":"Skill/common_thougt/#8","text":"","title":"8 \u8ba1\u6570\u95ee\u9898"},{"location":"Skill/common_thougt/#81-1","text":"\u6c42\u51fa1~13\u7684\u6574\u6570\u4e2d1\u51fa\u73b0\u7684\u6b21\u6570,\u5e76\u7b97\u51fa100~1300\u7684\u6574\u6570\u4e2d1\u51fa\u73b0\u7684\u6b21\u6570\uff1f\u4e3a\u6b64\u4ed6\u7279\u522b\u6570\u4e86\u4e00\u4e0b1~13\u4e2d\u5305\u542b1\u7684\u6570\u5b57\u67091\u300110\u300111\u300112\u300113\u56e0\u6b64\u5171\u51fa\u73b06\u6b21,\u4f46\u662f\u5bf9\u4e8e\u540e\u9762\u95ee\u9898\u4ed6\u5c31\u6ca1\u8f99\u4e86\u3002ACMer\u5e0c\u671b\u4f60\u4eec\u5e2e\u5e2e\u4ed6,\u5e76\u628a\u95ee\u9898\u66f4\u52a0\u666e\u904d\u5316,\u53ef\u4ee5\u5f88\u5feb\u7684\u6c42\u51fa\u4efb\u610f\u975e\u8d1f\u6574\u6570\u533a\u95f4\u4e2d1\u51fa\u73b0\u7684\u6b21\u6570\uff08\u4ece1 \u5230 n \u4e2d1\u51fa\u73b0\u7684\u6b21\u6570\uff09\u3002 input: 13 output: 6 \u601d\u8def\uff1a\u5224\u65ad\u6bcf\u4e00\u4f4d\u4e3a 1 \u51fa\u73b0\u7684\u6b21\u6570\uff0c\u5747\u4e3a a * b + c \u7684\u5f62\u5f0f\uff0c\u5176\u4e2d a \u4e3a\u9ad8\u4f4d\u7684\u8ba1\u6570\uff0c b \u4e3a\u4f4e\u4f4d\u5404\u53d6 0-9 \uff0cc \u4e3a\u7279\u6b8a\u5904\u7406\u7684\u5c3e\u5df4 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 int NumberOf1Between1AndN_Solution ( int n ) { int x = 10 ; int now = n , dnum = 0 , ans = 0 ; while ( now ) { dnum ++ ; now /= 10 ; } for ( int i = 0 ; i < dnum ; i ++ ) { int highcnt = n / x ; now = n % x ; int currentdigit = now * 10 / x ; if ( currentdigit == 0 ) { ans += highcnt * x / 10 ; } else if ( currentdigit > 1 ) { ans += ( highcnt + 1 ) * x / 10 ; } else { ans += highcnt * x / 10 + now % ( x / 10 ) + 1 ; } x *= 10 ; } return ans ; }","title":"8.1 1 \u7684\u6b21\u6570"},{"location":"Skill/sort/","text":"\u6392\u5e8f\u7b97\u6cd5 \u00b6 1 \u5feb\u901f\u6392\u5e8f(\u4e0d\u7a33\u5b9a) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 // \u968f\u673a\u751f\u6210start-end\u7684\u4efb\u610f\u6574\u6570 int RandomInRange ( const int start , const int end ) { int rand_num = 0 ; rand_num = rand () % ( end - start + 1 ) + start ; return rand_num ; } // \u4efb\u610f\u5b9a\u4f4d\uff0c\u5c0f\u7684\u653e\u5de6\uff0c\u5927\u7684\u653e\u53f3 int Partition ( int data [], int length , int start , int end ) { if ( data == NULL || length < 0 || start < 0 || end >= length ) { printf ( \"Error \\n \" ); } int index = RandomInRange ( start , end ); // \u5148\u950b\u9488 int small = start - 1 ; // \u5b9a\u5c0f\u9488 swap ( data [ index ], data [ end ]); // \u5728<algorithm>\u91cc for ( index = start ; index < end ; index ++ ) { if ( data [ index ] < data [ end ]) // \u4e24\u9488\u4e0d\u5408\u505a\u4ea4\u6362 { small ++ ; if ( small != index ) { swap ( data [ small ], data [ index ]); } } } small ++ ; // \u6700\u7ec8\u5b9a\u4f4d swap ( data [ small ], data [ end ]); return small ; } void QuickSort ( int data [], int length , int start , int end ) // \u4f20\u53c2 0,n-1 { if ( start == end ) { return ; } int index = Partition ( data , length , start , end ); if ( index > start ) { QuickSort ( data , length , start , index - 1 ); } if ( index < end - 1 ) { QuickSort ( data , length , index + 1 , end ); } } \u5feb\u6392\u4e0d\u662f\u4efb\u4f55\u65f6\u5019\u90fd\u662f\u6700\u4f18\u7684\u7b97\u6cd5\uff0c\u5982\u679c\u5e8f\u5217\u5df2\u7ecf\u6392\u597d\u4e14\u6bcf\u6b21\u90fd\u7528\u6700\u540e\u4e00\u4e2a\u6570\u5b57\u4f5c\u4e3a\u6807\u51c6\uff0c\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u8fbe\u5230 O(n^2) O(n^2) \u5176\u4e2d Partiton \u51fd\u6570\u53ef\u4ee5\u4fdd\u8bc1\u5728 O(n) \u7b97\u6cd5\u5f97\u5230\u6570\u7ec4\u4e2d\u7b2c k \u5927\u7684\u6570\u5b57 \u4f8b\u5982\u6c42\u4e00\u4e2a\u6570\u7ec4\u4e2d\u51fa\u73b0\u6b21\u6570\u6700\u591a\u7684\u6570\uff08\u4fdd\u8bc1\u8be5\u6570\u51fa\u73b0\u8d85\u8fc7\u6570\u7ec4\u7684\u4e00\u534a\uff09\uff08\u5373\u6392\u5e8f\u540e\u7684\u4e2d\u4f4d\u6570\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 int MoreThanHalfNum_Solution ( vector < int > numbers ) { int len = numbers . size (); int mid = len >> 1 , start = 0 , end = len - 1 ; int index = Partiton ( numbers , len , 0 , len - 1 ); while ( index != mid ) { if ( index < mid ) { start = index + 1 ; index = Partiton ( numbers , len , start , end ); } else { end = index - 1 ; index = Partiton ( numbers , len , start , end ); } } int result = numbers [ index ]; int cnt = 0 ; for ( int i = 0 ; i < len ; i ++ ) { if ( numbers [ i ] == result ) { cnt ++ ; } } if ( cnt > ( len >> 1 )) { return result ; } else { return 0 ; } } 2 \u8ba1\u6570\u6392\u5e8f \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 int * countSort ( int * arr , int len ) { int max = arr [ 0 ]; // \u8bb0\u5f55\u6570\u5217\u7684\u6700\u5927\u503c int min = arr [ 0 ]; // \u8bb0\u5f55\u6570\u5217\u7684\u6700\u5c0f\u503c for ( int i = 0 ; i < len -1 ; i ++ ) { if ( arr [ i ] > max ) { max = arr [ i ]; } if ( arr [ i ] < min ) { min = arr [ i ]; } } int l = max - min ; //\u8ba1\u7b97\u51fa\u6570\u5217\u6700\u5927\u6700\u5c0f\u503c\u5f97\u5dee\u503c int * couarr = new int [ l + 1 ]; for ( int i = 0 ; i < len ; i ++ ) { couarr [ arr [ i ] - min ] ++ ; //\u7edf\u8ba1\u5143\u7d20\u4e2a\u6570 } int sum = 0 ; for ( int i = 0 ; i < l + 1 ; i ++ ) //\u7edf\u8ba1\u6570\u7ec4\u505a\u53d8\u5f62\uff0c\u540e\u9762\u7684\u5143\u7d20\u7b49\u4e8e\u524d\u9762\u5143\u7d20\u7684\u548c { sum += couarr [ i ]; couarr [ i ] = sum ; } int * sortarr = new int [ len ]; for ( int i = len -1 ; i >= 0 ; i -- ) //\u5012\u5e8f\u904d\u5386\u539f\u59cb\u6570\u7ec4\uff0c\u4ece\u7edf\u8ba1\u6570\u7ec4\u4e2d\u627e\u5230\u6b63\u786e\u4f4d\u7f6e { sortarr [ couarr [ arr [ i ] - min ] -1 ] = arr [ i ]; couarr [ arr [ i ] - min ] -- ; } delete couarr ; return sortarr ; } \u8ba1\u6570\u6392\u5e8f\u9002\u7528\u4e8e\u91cd\u590d\u503c\u591a\uff0c\u8303\u56f4\u5c0f\uff0c\u53ef\u4ee5\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u573a\u5408 3 \u5f52\u5e76\u6392\u5e8f\uff08\u7a33\u5b9a\uff09 \u00b6 \u5f52\u5e76\u6392\u5e8f\uff0c\u662f\u521b\u5efa\u5728\u5f52\u5e76\u64cd\u4f5c\u4e0a\u7684\u4e00\u79cd\u6709\u6548\u7684\u6392\u5e8f\u7b97\u6cd5\u3002\u7b97\u6cd5\u662f\u91c7\u7528\u5206\u6cbb\u6cd5\uff08Divide and Conquer\uff09\u7684\u4e00\u4e2a\u975e\u5e38\u5178\u578b\u7684\u5e94\u7528\uff0c\u4e14\u5404\u5c42\u5206\u6cbb\u9012\u5f52\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u3002\u5f52\u5e76\u6392\u5e8f\u601d\u8def\u7b80\u5355\uff0c\u901f\u5ea6\u4ec5\u6b21\u4e8e\u5feb\u901f\u6392\u5e8f\uff0c\u4e3a\u7a33\u5b9a\u6392\u5e8f\u7b97\u6cd5\uff0c\u4e00\u822c\u7528\u4e8e\u5bf9\u603b\u4f53\u65e0\u5e8f\uff0c\u4f46\u662f\u5404\u5b50\u9879\u76f8\u5bf9\u6709\u5e8f\u7684\u6570\u5217\u3002 \u8fed\u4ee3\u7248 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 void merge_sort ( int data [], int len ) { if ( data == NULL || len <= 0 ) { printf ( \"Error \\n \" ); } int * a = data ; int * b = ( int * ) malloc ( len * sizeof ( int )); int seg , start ; for ( seg = 1 ; seg < len ; seg += seg ) { for ( start = 0 ; start < len ; start += seg + seg ) { int low = start , mid = min ( start + seg , len ), high = min ( start + seg + seg , len ); int start1 = low , end1 = mid - 1 , start2 = mid , end2 = high - 1 ; // start2\u548cend2\u8981\u6ce8\u610f\uff0cstrat2\u4e0d\u8981\u53d6min\u4ee5\u5728end2<start2\u53ef\u4ee5\u9000\u51fa\u5faa\u73af int index = low ; while ( start1 <= end1 && start2 <= end2 ) { b [ index ++ ] = a [ start1 ] <= a [ start2 ] ? a [ start1 ++ ] : a [ start2 ++ ]; } while ( start1 <= end1 ) { b [ index ++ ] = a [ start1 ++ ]; } while ( start2 <= end2 ) { b [ index ++ ] = a [ start2 ++ ]; } } int * temp = a ; a = b ; b = temp ; } if ( a != data ) { for ( int i = 0 ; i < len ; i ++ ) { b [ i ] = a [ i ]; } b = a ; } free ( b ); } \u9012\u5f52\u7248 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 void merge_sort_recursive ( int data [], int ans [], int start , int end ) { if ( data == NULL ) { printf ( \"Error \\n \" ); } if ( start >= end ) { return ; } int start1 = start , end1 = start + (( end - start ) >> 1 ); int start2 = end1 + 1 , end2 = end ; merge_sort_recursive ( data , ans , start1 , end1 ); merge_sort_recursive ( data , ans , start2 , end2 ); int index = start ; while ( start1 <= end1 && start2 <= end2 ) { ans [ index ++ ] = data [ start1 ] <= data [ start2 ] ? data [ start1 ++ ] : data [ start2 ++ ]; } while ( start1 <= end1 ) { ans [ index ++ ] = data [ start1 ++ ]; } while ( start2 <= end2 ) { ans [ index ++ ] = data [ start2 ++ ]; } for ( int i = start ; i <= end ; i ++ ) { data [ i ] = ans [ i ]; } } \u5f52\u5e76\u6392\u5e8f\u6838\u5fc3\u662f\u5206\u6cbb\uff0c\u800c\u5176\u4e09 while \u4e5f\u662f\u5e38\u7528\u7684\u5408\u5e76\u6a21\u677f\uff0c\u5982\u5408\u5e76\u4e24\u4e2a\u9012\u589e\u94fe\u8868 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 ListNode * Merge ( ListNode * pHead1 , ListNode * pHead2 ) { ListNode * ans = NULL , * index = NULL , * p = pHead1 , * q = pHead2 ; if ( p == NULL ) return q ; if ( q == NULL ) return p ; if ( pHead1 -> val < pHead2 -> val ) { ans = pHead1 ; p = p -> next ; } else { ans = pHead2 ; q = q -> next ; } index = ans ; while ( p && q ) { if ( p -> val <= q -> val ) { index -> next = p ; p = p -> next ; } else { index -> next = q ; q = q -> next ; } index = index -> next ; } while ( p ) { index -> next = p ; p = p -> next ; index = index -> next ; } while ( q ) { index -> next = q ; q = q -> next ; index = index -> next ; } return ans ; } 3.1 \u9006\u5e8f\u5bf9 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 class Solution { public : int p = 1000000007 ; int InversePairs ( vector < int > data ) { int cnt = 0 , len = data . size (); vector < int > ans ( data ); for ( int seg = 1 ; seg < len ; seg += seg ) { for ( int i = 0 ; i < len ; i += seg + seg ) { int start1 = i , end1 = min ( start1 + seg - 1 , len - 1 ); int start2 = end1 + 1 , end2 = min ( start2 + seg - 1 , len - 1 ); int index = end2 ; while ( end1 >= start1 && end2 >= start2 ) { if ( data [ end1 ] > data [ end2 ]) { ans [ index -- ] = data [ end1 -- ]; cnt = ( cnt + end2 - start2 + 1 ) % p ; } else if ( data [ end1 ] <= data [ end2 ]) { ans [ index -- ] = data [ end2 -- ]; } } while ( end1 >= start1 ) { ans [ index -- ] = data [ end1 -- ]; } while ( end2 >= start2 ) { ans [ index -- ] = data [ end2 -- ]; } } vector < int > tmp ; tmp = ans ; ans = data ; data = tmp ; } return cnt ; } }; \u4f7f\u7528\u5faa\u73af\u7684\u8017\u65f6\u6bd4\u9012\u5f52\u5c11 4. \u63d2\u5165\u6392\u5e8f\uff08\u7a33\u5b9a\uff09 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(n^2) O(n^2) 1 2 3 4 5 6 7 8 9 10 11 12 13 void InsertionSort ( int arr [], int len ) { int i , j ; for ( i = 1 ; i < len ; i ++ ) { int tmp = arr [ i ]; for ( j = i ; j > 0 && arr [ j - 1 ] > tmp ; j -- ) { arr [ j ] = arr [ j - 1 ]; } arr [ j ] = tmp ; } } 5. \u5e0c\u5c14\u6392\u5e8f\uff08\u4e0d\u7a33\u5b9a\uff09 \u00b6 \u4e0d\u540c\u6b65\u957f\u8fdb\u884c\u63d2\u5165\u6392\u5e8f \u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u6bd4 O(n^2) O(n^2) \u7a0d\u5fae\u597d 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int shellSort ( int arr [], int n ) { for ( int gap = n / 2 ; gap > 0 ; gap /= 2 ) { for ( int i = gap ; i < n ; i += 1 ) { int temp = arr [ i ]; int j ; for ( j = i ; j >= gap && arr [ j - gap ] > temp ; j -= gap ) arr [ j ] = arr [ j - gap ]; arr [ j ] = temp ; } } return 0 ; } 6. \u9009\u62e9\u6392\u5e8f\uff08\u4e0d\u7a33\u5b9a\uff09 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(n^2) O(n^2) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void SelectionSort ( int arr [], int len ) { for ( int i = 0 ; i < len - 1 ; i ++ ) { int index = i ; for ( int j = i ; j < len ; j ++ ) { if ( arr [ j ] < arr [ index ]) { index = j ; } } swap ( arr [ i ], arr [ index ]); } } 7. \u5192\u6ce1\u6392\u5e8f\uff08\u7a33\u5b9a\uff09 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(n^2) O(n^2) 1 2 3 4 5 6 7 8 9 10 11 12 13 void BubbleSort ( int arr [], int len ) { for ( int i = 0 ; i < len ; i ++ ) { for ( int j = 1 ; j < len - i ; j ++ ) { if ( arr [ j - 1 ] > arr [ j ]) { swap ( arr [ j - 1 ], arr [ j ]); } } } } 8. \u6876\u6392\u5e8f\uff08\u7a33\u5b9a\uff09 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6O(N)\uff0c\u989d\u5916\u7a7a\u95f4\u590d\u6742\u5ea6O(N) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 void bucketSort ( float arr [], int n ) { // 1) Create n empty buckets vector < float > b [ n ]; // 2) Put array elements in different buckets for ( int i = 0 ; i < n ; i ++ ) { int bi = n * arr [ i ]; // Index in bucket b [ bi ]. push_back ( arr [ i ]); } // 3) Sort individual buckets for ( int i = 0 ; i < n ; i ++ ) sort ( b [ i ]. begin (), b [ i ]. end ()); // 4) Concatenate all buckets into arr[] int index = 0 ; for ( int i = 0 ; i < n ; i ++ ) for ( int j = 0 ; j < b [ i ]. size (); j ++ ) arr [ index ++ ] = b [ i ][ j ]; } 9. \u57fa\u6570\u6392\u5e8f\uff08\u7a33\u5b9a\uff09 \u00b6 \u57fa\u6570\u6392\u5e8f\u662f\u4e00\u79cd\u975e\u6bd4\u8f83\u578b\u6574\u6570\u6392\u5e8f\u7b97\u6cd5\uff0c\u5176\u539f\u7406\u662f\u5c06\u6574\u6570\u6309\u4f4d\u6570\u5207\u5272\u6210\u4e0d\u540c\u7684\u6570\u5b57\uff0c\u7136\u540e\u6309\u6bcf\u4e2a\u4f4d\u6570\u5206\u522b\u6bd4\u8f83\u3002\u6392\u5e8f\u8fc7\u7a0b\u662f\u5c06\u6240\u6709\u5f85\u6bd4\u8f83\u6570\u503c\u7edf\u4e00\u4e3a\u540c\u6837\u7684\u6570\u4f4d\u957f\u5ea6\uff0c\u6570\u4f4d\u8f83\u77ed\u7684\u6570\u524d\u9762\u8865\u96f6\uff0c\u7136\u540e\u4ece\u6700\u4f4e\u4f4d\u5f00\u59cb\uff0c\u4f9d\u6b21\u8fdb\u884c\u4e00\u6b21\u6392\u5e8f\u3002\u8fd9\u6837\u4ece\u6700\u4f4e\u4f4d\u6392\u5e8f\u4e00\u76f4\u5230\u6700\u9ad8\u4f4d\u6392\u5e8f\u5b8c\u6210\u4ee5\u540e, \u6570\u5217\u5c31\u53d8\u6210\u4e00\u4e2a\u6709\u5e8f\u5e8f\u5217\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 /* * \u83b7\u53d6\u6570\u7ec4a\u4e2d\u6700\u5927\u503c * * \u53c2\u6570\u8bf4\u660e\uff1a * a -- \u6570\u7ec4 * n -- \u6570\u7ec4\u957f\u5ea6 */ int get_max ( int a [], int n ) { int i , max ; max = a [ 0 ]; for ( i = 1 ; i < n ; i ++ ) if ( a [ i ] > max ) max = a [ i ]; return max ; } /* * \u5bf9\u6570\u7ec4\u6309\u7167\"\u67d0\u4e2a\u4f4d\u6570\"\u8fdb\u884c\u6392\u5e8f(\u6876\u6392\u5e8f) * * \u53c2\u6570\u8bf4\u660e\uff1a * a -- \u6570\u7ec4 * n -- \u6570\u7ec4\u957f\u5ea6 * exp -- \u6307\u6570\u3002\u5bf9\u6570\u7ec4a\u6309\u7167\u8be5\u6307\u6570\u8fdb\u884c\u6392\u5e8f\u3002 * * \u4f8b\u5982\uff0c\u5bf9\u4e8e\u6570\u7ec4a={50, 3, 542, 745, 2014, 154, 63, 616}\uff1b * (01) \u5f53exp=1\u8868\u793a\u6309\u7167\"\u4e2a\u4f4d\"\u5bf9\u6570\u7ec4a\u8fdb\u884c\u6392\u5e8f * (02) \u5f53exp=10\u8868\u793a\u6309\u7167\"\u5341\u4f4d\"\u5bf9\u6570\u7ec4a\u8fdb\u884c\u6392\u5e8f * (03) \u5f53exp=100\u8868\u793a\u6309\u7167\"\u767e\u4f4d\"\u5bf9\u6570\u7ec4a\u8fdb\u884c\u6392\u5e8f * ... */ void count_sort ( int a [], int n , int exp ) { int output [ n ]; // \u5b58\u50a8\"\u88ab\u6392\u5e8f\u6570\u636e\"\u7684\u4e34\u65f6\u6570\u7ec4 int i , buckets [ 10 ] = { 0 }; // \u5c06\u6570\u636e\u51fa\u73b0\u7684\u6b21\u6570\u5b58\u50a8\u5728buckets[]\u4e2d for ( i = 0 ; i < n ; i ++ ) buckets [ ( a [ i ] / exp ) % 10 ] ++ ; // \u66f4\u6539buckets[i]\u3002\u76ee\u7684\u662f\u8ba9\u66f4\u6539\u540e\u7684buckets[i]\u7684\u503c\uff0c\u662f\u8be5\u6570\u636e\u5728output[]\u4e2d\u7684\u4f4d\u7f6e\u3002 for ( i = 1 ; i < 10 ; i ++ ) buckets [ i ] += buckets [ i - 1 ]; // \u5c06\u6570\u636e\u5b58\u50a8\u5230\u4e34\u65f6\u6570\u7ec4output[]\u4e2d for ( i = n - 1 ; i >= 0 ; i -- ) { output [ buckets [ ( a [ i ] / exp ) % 10 ] - 1 ] = a [ i ]; buckets [ ( a [ i ] / exp ) % 10 ] -- ; } // \u5c06\u6392\u5e8f\u597d\u7684\u6570\u636e\u8d4b\u503c\u7ed9a[] for ( i = 0 ; i < n ; i ++ ) a [ i ] = output [ i ]; } /* * \u57fa\u6570\u6392\u5e8f * * \u53c2\u6570\u8bf4\u660e\uff1a * a -- \u6570\u7ec4 * n -- \u6570\u7ec4\u957f\u5ea6 */ void radix_sort ( int a [], int n ) { int exp ; // \u6307\u6570\u3002\u5f53\u5bf9\u6570\u7ec4\u6309\u5404\u4f4d\u8fdb\u884c\u6392\u5e8f\u65f6\uff0cexp=1\uff1b\u6309\u5341\u4f4d\u8fdb\u884c\u6392\u5e8f\u65f6\uff0cexp=10\uff1b... int max = get_max ( a , n ); // \u6570\u7ec4a\u4e2d\u7684\u6700\u5927\u503c // \u4ece\u4e2a\u4f4d\u5f00\u59cb\uff0c\u5bf9\u6570\u7ec4a\u6309\"\u6307\u6570\"\u8fdb\u884c\u6392\u5e8f for ( exp = 1 ; max / exp > 0 ; exp *= 10 ) count_sort ( a , n , exp ); } 10. \u5806\u6392\u5e8f\uff08\u4e0d\u7a33\u5b9a\uff09 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6 O(nlogn) O(nlogn) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 void heapify ( int arr [], int n , int i ) { int largest = i ; // \u5c06\u6700\u5927\u5143\u7d20\u8bbe\u7f6e\u4e3a\u5806\u9876\u5143\u7d20 int l = 2 * i + 1 ; // left = 2*i + 1 int r = 2 * i + 2 ; // right = 2*i + 2 // \u5982\u679c left \u6bd4 root \u5927\u7684\u8bdd if ( l < n && arr [ l ] > arr [ largest ]) largest = l ; // I\u5982\u679c right \u6bd4 root \u5927\u7684\u8bdd if ( r < n && arr [ r ] > arr [ largest ]) largest = r ; if ( largest != i ) { swap ( arr [ i ], arr [ largest ]); // \u9012\u5f52\u5730\u5b9a\u4e49\u5b50\u5806 heapify ( arr , n , largest ); } } void heapSort ( int arr [], int n ) { // \u5efa\u7acb\u5806 for ( int i = n / 2 - 1 ; i >= 0 ; i -- ) heapify ( arr , n , i ); // \u4e00\u4e2a\u4e2a\u4ece\u5806\u9876\u53d6\u51fa\u5143\u7d20 for ( int i = n -1 ; i >= 0 ; i -- ) { swap ( arr [ 0 ], arr [ i ]); heapify ( arr , i , 0 ); } }","title":"\u6392\u5e8f"},{"location":"Skill/sort/#_1","text":"","title":"\u6392\u5e8f\u7b97\u6cd5"},{"location":"Skill/sort/#1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 // \u968f\u673a\u751f\u6210start-end\u7684\u4efb\u610f\u6574\u6570 int RandomInRange ( const int start , const int end ) { int rand_num = 0 ; rand_num = rand () % ( end - start + 1 ) + start ; return rand_num ; } // \u4efb\u610f\u5b9a\u4f4d\uff0c\u5c0f\u7684\u653e\u5de6\uff0c\u5927\u7684\u653e\u53f3 int Partition ( int data [], int length , int start , int end ) { if ( data == NULL || length < 0 || start < 0 || end >= length ) { printf ( \"Error \\n \" ); } int index = RandomInRange ( start , end ); // \u5148\u950b\u9488 int small = start - 1 ; // \u5b9a\u5c0f\u9488 swap ( data [ index ], data [ end ]); // \u5728<algorithm>\u91cc for ( index = start ; index < end ; index ++ ) { if ( data [ index ] < data [ end ]) // \u4e24\u9488\u4e0d\u5408\u505a\u4ea4\u6362 { small ++ ; if ( small != index ) { swap ( data [ small ], data [ index ]); } } } small ++ ; // \u6700\u7ec8\u5b9a\u4f4d swap ( data [ small ], data [ end ]); return small ; } void QuickSort ( int data [], int length , int start , int end ) // \u4f20\u53c2 0,n-1 { if ( start == end ) { return ; } int index = Partition ( data , length , start , end ); if ( index > start ) { QuickSort ( data , length , start , index - 1 ); } if ( index < end - 1 ) { QuickSort ( data , length , index + 1 , end ); } } \u5feb\u6392\u4e0d\u662f\u4efb\u4f55\u65f6\u5019\u90fd\u662f\u6700\u4f18\u7684\u7b97\u6cd5\uff0c\u5982\u679c\u5e8f\u5217\u5df2\u7ecf\u6392\u597d\u4e14\u6bcf\u6b21\u90fd\u7528\u6700\u540e\u4e00\u4e2a\u6570\u5b57\u4f5c\u4e3a\u6807\u51c6\uff0c\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u8fbe\u5230 O(n^2) O(n^2) \u5176\u4e2d Partiton \u51fd\u6570\u53ef\u4ee5\u4fdd\u8bc1\u5728 O(n) \u7b97\u6cd5\u5f97\u5230\u6570\u7ec4\u4e2d\u7b2c k \u5927\u7684\u6570\u5b57 \u4f8b\u5982\u6c42\u4e00\u4e2a\u6570\u7ec4\u4e2d\u51fa\u73b0\u6b21\u6570\u6700\u591a\u7684\u6570\uff08\u4fdd\u8bc1\u8be5\u6570\u51fa\u73b0\u8d85\u8fc7\u6570\u7ec4\u7684\u4e00\u534a\uff09\uff08\u5373\u6392\u5e8f\u540e\u7684\u4e2d\u4f4d\u6570\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 int MoreThanHalfNum_Solution ( vector < int > numbers ) { int len = numbers . size (); int mid = len >> 1 , start = 0 , end = len - 1 ; int index = Partiton ( numbers , len , 0 , len - 1 ); while ( index != mid ) { if ( index < mid ) { start = index + 1 ; index = Partiton ( numbers , len , start , end ); } else { end = index - 1 ; index = Partiton ( numbers , len , start , end ); } } int result = numbers [ index ]; int cnt = 0 ; for ( int i = 0 ; i < len ; i ++ ) { if ( numbers [ i ] == result ) { cnt ++ ; } } if ( cnt > ( len >> 1 )) { return result ; } else { return 0 ; } }","title":"1 \u5feb\u901f\u6392\u5e8f(\u4e0d\u7a33\u5b9a)"},{"location":"Skill/sort/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 int * countSort ( int * arr , int len ) { int max = arr [ 0 ]; // \u8bb0\u5f55\u6570\u5217\u7684\u6700\u5927\u503c int min = arr [ 0 ]; // \u8bb0\u5f55\u6570\u5217\u7684\u6700\u5c0f\u503c for ( int i = 0 ; i < len -1 ; i ++ ) { if ( arr [ i ] > max ) { max = arr [ i ]; } if ( arr [ i ] < min ) { min = arr [ i ]; } } int l = max - min ; //\u8ba1\u7b97\u51fa\u6570\u5217\u6700\u5927\u6700\u5c0f\u503c\u5f97\u5dee\u503c int * couarr = new int [ l + 1 ]; for ( int i = 0 ; i < len ; i ++ ) { couarr [ arr [ i ] - min ] ++ ; //\u7edf\u8ba1\u5143\u7d20\u4e2a\u6570 } int sum = 0 ; for ( int i = 0 ; i < l + 1 ; i ++ ) //\u7edf\u8ba1\u6570\u7ec4\u505a\u53d8\u5f62\uff0c\u540e\u9762\u7684\u5143\u7d20\u7b49\u4e8e\u524d\u9762\u5143\u7d20\u7684\u548c { sum += couarr [ i ]; couarr [ i ] = sum ; } int * sortarr = new int [ len ]; for ( int i = len -1 ; i >= 0 ; i -- ) //\u5012\u5e8f\u904d\u5386\u539f\u59cb\u6570\u7ec4\uff0c\u4ece\u7edf\u8ba1\u6570\u7ec4\u4e2d\u627e\u5230\u6b63\u786e\u4f4d\u7f6e { sortarr [ couarr [ arr [ i ] - min ] -1 ] = arr [ i ]; couarr [ arr [ i ] - min ] -- ; } delete couarr ; return sortarr ; } \u8ba1\u6570\u6392\u5e8f\u9002\u7528\u4e8e\u91cd\u590d\u503c\u591a\uff0c\u8303\u56f4\u5c0f\uff0c\u53ef\u4ee5\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u573a\u5408","title":"2 \u8ba1\u6570\u6392\u5e8f"},{"location":"Skill/sort/#3","text":"\u5f52\u5e76\u6392\u5e8f\uff0c\u662f\u521b\u5efa\u5728\u5f52\u5e76\u64cd\u4f5c\u4e0a\u7684\u4e00\u79cd\u6709\u6548\u7684\u6392\u5e8f\u7b97\u6cd5\u3002\u7b97\u6cd5\u662f\u91c7\u7528\u5206\u6cbb\u6cd5\uff08Divide and Conquer\uff09\u7684\u4e00\u4e2a\u975e\u5e38\u5178\u578b\u7684\u5e94\u7528\uff0c\u4e14\u5404\u5c42\u5206\u6cbb\u9012\u5f52\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u3002\u5f52\u5e76\u6392\u5e8f\u601d\u8def\u7b80\u5355\uff0c\u901f\u5ea6\u4ec5\u6b21\u4e8e\u5feb\u901f\u6392\u5e8f\uff0c\u4e3a\u7a33\u5b9a\u6392\u5e8f\u7b97\u6cd5\uff0c\u4e00\u822c\u7528\u4e8e\u5bf9\u603b\u4f53\u65e0\u5e8f\uff0c\u4f46\u662f\u5404\u5b50\u9879\u76f8\u5bf9\u6709\u5e8f\u7684\u6570\u5217\u3002 \u8fed\u4ee3\u7248 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 void merge_sort ( int data [], int len ) { if ( data == NULL || len <= 0 ) { printf ( \"Error \\n \" ); } int * a = data ; int * b = ( int * ) malloc ( len * sizeof ( int )); int seg , start ; for ( seg = 1 ; seg < len ; seg += seg ) { for ( start = 0 ; start < len ; start += seg + seg ) { int low = start , mid = min ( start + seg , len ), high = min ( start + seg + seg , len ); int start1 = low , end1 = mid - 1 , start2 = mid , end2 = high - 1 ; // start2\u548cend2\u8981\u6ce8\u610f\uff0cstrat2\u4e0d\u8981\u53d6min\u4ee5\u5728end2<start2\u53ef\u4ee5\u9000\u51fa\u5faa\u73af int index = low ; while ( start1 <= end1 && start2 <= end2 ) { b [ index ++ ] = a [ start1 ] <= a [ start2 ] ? a [ start1 ++ ] : a [ start2 ++ ]; } while ( start1 <= end1 ) { b [ index ++ ] = a [ start1 ++ ]; } while ( start2 <= end2 ) { b [ index ++ ] = a [ start2 ++ ]; } } int * temp = a ; a = b ; b = temp ; } if ( a != data ) { for ( int i = 0 ; i < len ; i ++ ) { b [ i ] = a [ i ]; } b = a ; } free ( b ); } \u9012\u5f52\u7248 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 void merge_sort_recursive ( int data [], int ans [], int start , int end ) { if ( data == NULL ) { printf ( \"Error \\n \" ); } if ( start >= end ) { return ; } int start1 = start , end1 = start + (( end - start ) >> 1 ); int start2 = end1 + 1 , end2 = end ; merge_sort_recursive ( data , ans , start1 , end1 ); merge_sort_recursive ( data , ans , start2 , end2 ); int index = start ; while ( start1 <= end1 && start2 <= end2 ) { ans [ index ++ ] = data [ start1 ] <= data [ start2 ] ? data [ start1 ++ ] : data [ start2 ++ ]; } while ( start1 <= end1 ) { ans [ index ++ ] = data [ start1 ++ ]; } while ( start2 <= end2 ) { ans [ index ++ ] = data [ start2 ++ ]; } for ( int i = start ; i <= end ; i ++ ) { data [ i ] = ans [ i ]; } } \u5f52\u5e76\u6392\u5e8f\u6838\u5fc3\u662f\u5206\u6cbb\uff0c\u800c\u5176\u4e09 while \u4e5f\u662f\u5e38\u7528\u7684\u5408\u5e76\u6a21\u677f\uff0c\u5982\u5408\u5e76\u4e24\u4e2a\u9012\u589e\u94fe\u8868 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 ListNode * Merge ( ListNode * pHead1 , ListNode * pHead2 ) { ListNode * ans = NULL , * index = NULL , * p = pHead1 , * q = pHead2 ; if ( p == NULL ) return q ; if ( q == NULL ) return p ; if ( pHead1 -> val < pHead2 -> val ) { ans = pHead1 ; p = p -> next ; } else { ans = pHead2 ; q = q -> next ; } index = ans ; while ( p && q ) { if ( p -> val <= q -> val ) { index -> next = p ; p = p -> next ; } else { index -> next = q ; q = q -> next ; } index = index -> next ; } while ( p ) { index -> next = p ; p = p -> next ; index = index -> next ; } while ( q ) { index -> next = q ; q = q -> next ; index = index -> next ; } return ans ; }","title":"3 \u5f52\u5e76\u6392\u5e8f\uff08\u7a33\u5b9a\uff09"},{"location":"Skill/sort/#31","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 class Solution { public : int p = 1000000007 ; int InversePairs ( vector < int > data ) { int cnt = 0 , len = data . size (); vector < int > ans ( data ); for ( int seg = 1 ; seg < len ; seg += seg ) { for ( int i = 0 ; i < len ; i += seg + seg ) { int start1 = i , end1 = min ( start1 + seg - 1 , len - 1 ); int start2 = end1 + 1 , end2 = min ( start2 + seg - 1 , len - 1 ); int index = end2 ; while ( end1 >= start1 && end2 >= start2 ) { if ( data [ end1 ] > data [ end2 ]) { ans [ index -- ] = data [ end1 -- ]; cnt = ( cnt + end2 - start2 + 1 ) % p ; } else if ( data [ end1 ] <= data [ end2 ]) { ans [ index -- ] = data [ end2 -- ]; } } while ( end1 >= start1 ) { ans [ index -- ] = data [ end1 -- ]; } while ( end2 >= start2 ) { ans [ index -- ] = data [ end2 -- ]; } } vector < int > tmp ; tmp = ans ; ans = data ; data = tmp ; } return cnt ; } }; \u4f7f\u7528\u5faa\u73af\u7684\u8017\u65f6\u6bd4\u9012\u5f52\u5c11","title":"3.1 \u9006\u5e8f\u5bf9"},{"location":"Skill/sort/#4","text":"\u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(n^2) O(n^2) 1 2 3 4 5 6 7 8 9 10 11 12 13 void InsertionSort ( int arr [], int len ) { int i , j ; for ( i = 1 ; i < len ; i ++ ) { int tmp = arr [ i ]; for ( j = i ; j > 0 && arr [ j - 1 ] > tmp ; j -- ) { arr [ j ] = arr [ j - 1 ]; } arr [ j ] = tmp ; } }","title":"4. \u63d2\u5165\u6392\u5e8f\uff08\u7a33\u5b9a\uff09"},{"location":"Skill/sort/#5","text":"\u4e0d\u540c\u6b65\u957f\u8fdb\u884c\u63d2\u5165\u6392\u5e8f \u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u6bd4 O(n^2) O(n^2) \u7a0d\u5fae\u597d 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int shellSort ( int arr [], int n ) { for ( int gap = n / 2 ; gap > 0 ; gap /= 2 ) { for ( int i = gap ; i < n ; i += 1 ) { int temp = arr [ i ]; int j ; for ( j = i ; j >= gap && arr [ j - gap ] > temp ; j -= gap ) arr [ j ] = arr [ j - gap ]; arr [ j ] = temp ; } } return 0 ; }","title":"5. \u5e0c\u5c14\u6392\u5e8f\uff08\u4e0d\u7a33\u5b9a\uff09"},{"location":"Skill/sort/#6","text":"\u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(n^2) O(n^2) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void SelectionSort ( int arr [], int len ) { for ( int i = 0 ; i < len - 1 ; i ++ ) { int index = i ; for ( int j = i ; j < len ; j ++ ) { if ( arr [ j ] < arr [ index ]) { index = j ; } } swap ( arr [ i ], arr [ index ]); } }","title":"6. \u9009\u62e9\u6392\u5e8f\uff08\u4e0d\u7a33\u5b9a\uff09"},{"location":"Skill/sort/#7","text":"\u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(n^2) O(n^2) 1 2 3 4 5 6 7 8 9 10 11 12 13 void BubbleSort ( int arr [], int len ) { for ( int i = 0 ; i < len ; i ++ ) { for ( int j = 1 ; j < len - i ; j ++ ) { if ( arr [ j - 1 ] > arr [ j ]) { swap ( arr [ j - 1 ], arr [ j ]); } } } }","title":"7. \u5192\u6ce1\u6392\u5e8f\uff08\u7a33\u5b9a\uff09"},{"location":"Skill/sort/#8","text":"\u65f6\u95f4\u590d\u6742\u5ea6O(N)\uff0c\u989d\u5916\u7a7a\u95f4\u590d\u6742\u5ea6O(N) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 void bucketSort ( float arr [], int n ) { // 1) Create n empty buckets vector < float > b [ n ]; // 2) Put array elements in different buckets for ( int i = 0 ; i < n ; i ++ ) { int bi = n * arr [ i ]; // Index in bucket b [ bi ]. push_back ( arr [ i ]); } // 3) Sort individual buckets for ( int i = 0 ; i < n ; i ++ ) sort ( b [ i ]. begin (), b [ i ]. end ()); // 4) Concatenate all buckets into arr[] int index = 0 ; for ( int i = 0 ; i < n ; i ++ ) for ( int j = 0 ; j < b [ i ]. size (); j ++ ) arr [ index ++ ] = b [ i ][ j ]; }","title":"8. \u6876\u6392\u5e8f\uff08\u7a33\u5b9a\uff09"},{"location":"Skill/sort/#9","text":"\u57fa\u6570\u6392\u5e8f\u662f\u4e00\u79cd\u975e\u6bd4\u8f83\u578b\u6574\u6570\u6392\u5e8f\u7b97\u6cd5\uff0c\u5176\u539f\u7406\u662f\u5c06\u6574\u6570\u6309\u4f4d\u6570\u5207\u5272\u6210\u4e0d\u540c\u7684\u6570\u5b57\uff0c\u7136\u540e\u6309\u6bcf\u4e2a\u4f4d\u6570\u5206\u522b\u6bd4\u8f83\u3002\u6392\u5e8f\u8fc7\u7a0b\u662f\u5c06\u6240\u6709\u5f85\u6bd4\u8f83\u6570\u503c\u7edf\u4e00\u4e3a\u540c\u6837\u7684\u6570\u4f4d\u957f\u5ea6\uff0c\u6570\u4f4d\u8f83\u77ed\u7684\u6570\u524d\u9762\u8865\u96f6\uff0c\u7136\u540e\u4ece\u6700\u4f4e\u4f4d\u5f00\u59cb\uff0c\u4f9d\u6b21\u8fdb\u884c\u4e00\u6b21\u6392\u5e8f\u3002\u8fd9\u6837\u4ece\u6700\u4f4e\u4f4d\u6392\u5e8f\u4e00\u76f4\u5230\u6700\u9ad8\u4f4d\u6392\u5e8f\u5b8c\u6210\u4ee5\u540e, \u6570\u5217\u5c31\u53d8\u6210\u4e00\u4e2a\u6709\u5e8f\u5e8f\u5217\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 /* * \u83b7\u53d6\u6570\u7ec4a\u4e2d\u6700\u5927\u503c * * \u53c2\u6570\u8bf4\u660e\uff1a * a -- \u6570\u7ec4 * n -- \u6570\u7ec4\u957f\u5ea6 */ int get_max ( int a [], int n ) { int i , max ; max = a [ 0 ]; for ( i = 1 ; i < n ; i ++ ) if ( a [ i ] > max ) max = a [ i ]; return max ; } /* * \u5bf9\u6570\u7ec4\u6309\u7167\"\u67d0\u4e2a\u4f4d\u6570\"\u8fdb\u884c\u6392\u5e8f(\u6876\u6392\u5e8f) * * \u53c2\u6570\u8bf4\u660e\uff1a * a -- \u6570\u7ec4 * n -- \u6570\u7ec4\u957f\u5ea6 * exp -- \u6307\u6570\u3002\u5bf9\u6570\u7ec4a\u6309\u7167\u8be5\u6307\u6570\u8fdb\u884c\u6392\u5e8f\u3002 * * \u4f8b\u5982\uff0c\u5bf9\u4e8e\u6570\u7ec4a={50, 3, 542, 745, 2014, 154, 63, 616}\uff1b * (01) \u5f53exp=1\u8868\u793a\u6309\u7167\"\u4e2a\u4f4d\"\u5bf9\u6570\u7ec4a\u8fdb\u884c\u6392\u5e8f * (02) \u5f53exp=10\u8868\u793a\u6309\u7167\"\u5341\u4f4d\"\u5bf9\u6570\u7ec4a\u8fdb\u884c\u6392\u5e8f * (03) \u5f53exp=100\u8868\u793a\u6309\u7167\"\u767e\u4f4d\"\u5bf9\u6570\u7ec4a\u8fdb\u884c\u6392\u5e8f * ... */ void count_sort ( int a [], int n , int exp ) { int output [ n ]; // \u5b58\u50a8\"\u88ab\u6392\u5e8f\u6570\u636e\"\u7684\u4e34\u65f6\u6570\u7ec4 int i , buckets [ 10 ] = { 0 }; // \u5c06\u6570\u636e\u51fa\u73b0\u7684\u6b21\u6570\u5b58\u50a8\u5728buckets[]\u4e2d for ( i = 0 ; i < n ; i ++ ) buckets [ ( a [ i ] / exp ) % 10 ] ++ ; // \u66f4\u6539buckets[i]\u3002\u76ee\u7684\u662f\u8ba9\u66f4\u6539\u540e\u7684buckets[i]\u7684\u503c\uff0c\u662f\u8be5\u6570\u636e\u5728output[]\u4e2d\u7684\u4f4d\u7f6e\u3002 for ( i = 1 ; i < 10 ; i ++ ) buckets [ i ] += buckets [ i - 1 ]; // \u5c06\u6570\u636e\u5b58\u50a8\u5230\u4e34\u65f6\u6570\u7ec4output[]\u4e2d for ( i = n - 1 ; i >= 0 ; i -- ) { output [ buckets [ ( a [ i ] / exp ) % 10 ] - 1 ] = a [ i ]; buckets [ ( a [ i ] / exp ) % 10 ] -- ; } // \u5c06\u6392\u5e8f\u597d\u7684\u6570\u636e\u8d4b\u503c\u7ed9a[] for ( i = 0 ; i < n ; i ++ ) a [ i ] = output [ i ]; } /* * \u57fa\u6570\u6392\u5e8f * * \u53c2\u6570\u8bf4\u660e\uff1a * a -- \u6570\u7ec4 * n -- \u6570\u7ec4\u957f\u5ea6 */ void radix_sort ( int a [], int n ) { int exp ; // \u6307\u6570\u3002\u5f53\u5bf9\u6570\u7ec4\u6309\u5404\u4f4d\u8fdb\u884c\u6392\u5e8f\u65f6\uff0cexp=1\uff1b\u6309\u5341\u4f4d\u8fdb\u884c\u6392\u5e8f\u65f6\uff0cexp=10\uff1b... int max = get_max ( a , n ); // \u6570\u7ec4a\u4e2d\u7684\u6700\u5927\u503c // \u4ece\u4e2a\u4f4d\u5f00\u59cb\uff0c\u5bf9\u6570\u7ec4a\u6309\"\u6307\u6570\"\u8fdb\u884c\u6392\u5e8f for ( exp = 1 ; max / exp > 0 ; exp *= 10 ) count_sort ( a , n , exp ); }","title":"9. \u57fa\u6570\u6392\u5e8f\uff08\u7a33\u5b9a\uff09"},{"location":"Skill/sort/#10","text":"\u65f6\u95f4\u590d\u6742\u5ea6 O(nlogn) O(nlogn) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 void heapify ( int arr [], int n , int i ) { int largest = i ; // \u5c06\u6700\u5927\u5143\u7d20\u8bbe\u7f6e\u4e3a\u5806\u9876\u5143\u7d20 int l = 2 * i + 1 ; // left = 2*i + 1 int r = 2 * i + 2 ; // right = 2*i + 2 // \u5982\u679c left \u6bd4 root \u5927\u7684\u8bdd if ( l < n && arr [ l ] > arr [ largest ]) largest = l ; // I\u5982\u679c right \u6bd4 root \u5927\u7684\u8bdd if ( r < n && arr [ r ] > arr [ largest ]) largest = r ; if ( largest != i ) { swap ( arr [ i ], arr [ largest ]); // \u9012\u5f52\u5730\u5b9a\u4e49\u5b50\u5806 heapify ( arr , n , largest ); } } void heapSort ( int arr [], int n ) { // \u5efa\u7acb\u5806 for ( int i = n / 2 - 1 ; i >= 0 ; i -- ) heapify ( arr , n , i ); // \u4e00\u4e2a\u4e2a\u4ece\u5806\u9876\u53d6\u51fa\u5143\u7d20 for ( int i = n -1 ; i >= 0 ; i -- ) { swap ( arr [ 0 ], arr [ i ]); heapify ( arr , i , 0 ); } }","title":"10. \u5806\u6392\u5e8f\uff08\u4e0d\u7a33\u5b9a\uff09"},{"location":"Skill/string/","text":"\u5b57\u7b26\u4e32 \u00b6 1 STD::string \u00b6 string \u5e38\u7528\u6210\u5458\u51fd\u6570 1 2 3 4 5 6 7 8 9 10 11 12 13 14 string str ; str . length (); // \u957f\u5ea6 str . push_back ( '.' ); // \u8ffd\u52a0\u5b57\u7b26 str += str2 ; // \u8ffd\u52a0\u5b57\u7b26\u4e32 str . substr ( 1 ); // \u4ece 1 \u5f00\u59cb\u7684\u5b50\u4e32 str . find ( str1 ); str . find_first_of ( ',' ); // \u627e\u5230\u7b2c\u4e00\u4e2a\u4e3a ',' \u7684\u4e0b\u6807 // \u5b57\u7b26\u4e32\u548c\u6570\u5b57 str = to_string ( num ); num = atoi ( s . c_str ()); // \u5148\u8f6c\u5e38\u5b57\u7b26\u4e32\u518d\u8f6c\u6570\u5b57 1.1 \u4e8c\u53c9\u6811\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316 \u00b6 \u5c42\u6b21\u904d\u5386\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 /* struct TreeNode { int val; struct TreeNode *left; struct TreeNode *right; TreeNode(int x) : val(x), left(NULL), right(NULL) { } }; */ class Solution { public : char * Serialize ( TreeNode * root ) { string s ; queue < TreeNode *> qt ; qt . push ( root ); while ( ! qt . empty ()) { TreeNode * node = qt . front (); qt . pop (); if ( node == nullptr ) { s . push_back ( '#' ); s . push_back ( ',' ); continue ; } // process not null node s += to_string ( node -> val ); s . push_back ( ',' ); // push operator qt . push ( node -> left ); qt . push ( node -> right ); } char * ret = new char [ s . length () + 1 ]; strcpy ( ret , s . c_str ()); return ret ; } TreeNode * Deserialize ( char * str ) { if ( str == nullptr ) { return nullptr ; } // \u53ef\u7528string\u6210\u5458\u51fd\u6570 string s ( str ); if ( str [ 0 ] == '#' ) { return nullptr ; } // \u6784\u9020\u5934\u7ed3\u70b9 queue < TreeNode *> nodes ; TreeNode * ret = new TreeNode ( atoi ( s . c_str ())); s = s . substr ( s . find_first_of ( ',' ) + 1 ); nodes . push ( ret ); // \u6839\u636e\u5e8f\u5217\u5316\u5b57\u7b26\u4e32\u518d\u5c42\u6b21\u904d\u5386\u4e00\u904d\uff0c\u6765\u6784\u9020\u6811 while ( ! nodes . empty () && ! s . empty ()) { TreeNode * node = nodes . front (); nodes . pop (); if ( s [ 0 ] == '#' ) { node -> left = nullptr ; s = s . substr ( 2 ); } else { node -> left = new TreeNode ( atoi ( s . c_str ())); nodes . push ( node -> left ); s = s . substr ( s . find_first_of ( ',' ) + 1 ); } if ( s [ 0 ] == '#' ) { node -> right = nullptr ; s = s . substr ( 2 ); } else { node -> right = new TreeNode ( atoi ( s . c_str ())); nodes . push ( node -> right ); s = s . substr ( s . find_first_of ( ',' ) + 1 ); } } return ret ; } }; 2 kmp \u7b97\u6cd5 \u00b6 \u6838\u5fc3\uff1a \u901a\u8fc7\u6a21\u5f0f\u4e32\u7684\u516c\u5171\u524d\u540e\u7f00\u751f\u6210 nxt \u6570\u7ec4\u51cf\u5c11\u5339\u914d\u79fb\u52a8\u6b21\u6570 \u8d1f\u540c\u5219\u589e 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 int nxt []; void GetNxtVal ( char * p , int nxt []) { int pLen = strlen ( p ); nxt [ 0 ] = -1 ; int k = -1 , j = 0 ; // \u56de\u6eaf\u9488\u4e0e\u5148\u950b\u9488 while ( j < len ) { if ( k == -1 || p [ j ] == p [ k ]) { j ++ ; k ++ ; if ( p [ j ] != p [ k ]) { nxt [ j ] = k ; } else { nxt [ j ] = nxt [ k ]; } } else { k = nxt [ k ]; } } } int KMPSearch ( char * s , char * p ) { int pLen = strlen ( p ), sLen = strlen ( s ); int i = 0 , j = 0 ; while ( i < sLen && j < pLen ) { if ( j == -1 || s [ i ] == p [ j ]) { i ++ ; j ++ ; } else { j = nxt [ j ]; } } if ( j == pLen ) { return i - j ; } else { return -1 ; } } 3 \u5b57\u7b26\u4e32\u6392\u5e8f\u95ee\u9898 \u00b6 3.1 \u628a\u6570\u7ec4\u6392\u6210\u6700\u5c0f\u7684\u6570 \u00b6 \u8f93\u5165\u4e00\u4e2a\u6b63\u6574\u6570\u6570\u7ec4\uff0c\u628a\u6570\u7ec4\u91cc\u6240\u6709\u6570\u5b57\u62fc\u63a5\u8d77\u6765\u6392\u6210\u4e00\u4e2a\u6570\uff0c\u6253\u5370\u80fd\u62fc\u63a5\u51fa\u7684\u6240\u6709\u6570\u5b57\u4e2d\u6700\u5c0f\u7684\u4e00\u4e2a\u3002\u4f8b\u5982\u8f93\u5165\u6570\u7ec4{3\uff0c32\uff0c321}\uff0c\u5219\u6253\u5370\u51fa\u8fd9\u4e09\u4e2a\u6570\u5b57\u80fd\u6392\u6210\u7684\u6700\u5c0f\u6570\u5b57\u4e3a321323\u3002 input: [3,32,321] output: \"321323\" \u601d\u8def\uff1a\u6570\u5b57\u8f6c\u5b57\u7b26\u4e32\u518d\u81ea\u5b9a\u4e49\u6392\u5e8f\uff08ab\u548cba\u7684\u5927\u5c0f\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 int cmp ( string str1 , string str2 ) { string s1 = str1 + str2 ; string s2 = str2 + str1 ; return s1 < s2 ; } string PrintMinNumber ( vector < int > numbers ) { int len = numbers . size (); string ans ; if ( len <= 0 ) { return ans ; } string s [ 105 ]; for ( int i = 0 ; i < len ; i ++ ) { s [ i ] = to_string ( numbers [ i ]); } sort ( s , s + len , cmp ); for ( int i = 0 ; i < len ; i ++ ) { ans += s [ i ]; } return ans ; } char \u578b\u5199\u6cd5\uff1a 3 \u901a\u8fc7\u7ffb\u8f6c\u51fd\u6570\u5b9e\u73b0\u5b57\u7b26\u4e32\u7684\u5de6\u65cb\u3001\u5012\u7f6e\u7b49\u529f\u80fd \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 void Reverse ( char * pBeigin , char * pEnd ) { if ( pBegin == NULL || pEnd == NULL ) { return ; } while ( pBegin < pEnd ) { char temp = * pBegin ; * pBegin = * pEnd ; * pEnd = temp ; pBegin ++ , pEnd -- ; } } \u5b57\u7b26\u4e32\u7684\u5de6\u65cb\uff1a abcdefg 2 -> cdefgab \u6b65\u9aa4\uff1a abcdefg -> ba gfedc -> cdefgab 4 \u5b57\u7b26\u4e32\u4e2d\u7684\u52a8\u6001\u89c4\u5212 \u00b6 \u5b57\u7b26\u4e32\u7684\u52a8\u6001\u89c4\u5212\u5e38\u7528\u4e8e\u5b57\u7b26\u4e32\u7684\u5339\u914d\u95ee\u9898 4.1 \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d \u00b6 \u8bf7\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u7528\u6765\u5339\u914d\u5305\u62ec'.'\u548c' '\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u6a21\u5f0f\u4e2d\u7684\u5b57\u7b26'.'\u8868\u793a\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff0c\u800c' '\u8868\u793a\u5b83\u524d\u9762\u7684\u5b57\u7b26\u53ef\u4ee5\u51fa\u73b0\u4efb\u610f\u6b21\uff08\u5305\u542b0\u6b21\uff09\u3002 \u5728\u672c\u9898\u4e2d\uff0c\u5339\u914d\u662f\u6307\u5b57\u7b26\u4e32\u7684\u6240\u6709\u5b57\u7b26\u5339\u914d\u6574\u4e2a\u6a21\u5f0f\u3002\u4f8b\u5982\uff0c\u5b57\u7b26\u4e32\"aaa\"\u4e0e\u6a21\u5f0f\"a.a\"\u548c\"ab ac a\"\u5339\u914d\uff0c\u4f46\u662f\u4e0e\"aa.a\"\u548c\"ab*a\"\u5747\u4e0d\u5339\u914d input: \"aaa\",\"a*a\" output: true \u601d\u8def\uff1a\u4e3b\u8981\u662f\u5728\u51fa\u73b0 * \u5224\u65ad\u524d\u9762\u5b57\u7b26\u51fa\u73b0\u4efb\u610f\u6b21\u7684\u5339\u914d\u60c5\u51b5 \u9012\u5f52\u5f0f\u5199\u6cd5\uff08\u590d\u6742\u5ea6\u9ad8\uff09\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 class Solution { public : bool match ( string str , string pattern ) { bool ans = false ; if ( str . length () == 0 && pattern . length () == 0 ) { ans = true ; } if ( str [ 0 ] == '\\0' && pattern [ 0 ] == '\\0' ) { ans = true ; return ans ; } if ( str [ 0 ] != '\\0' && pattern [ 0 ] == '\\0' ) { return ans ; } if ( pattern [ 1 ] == '*' ) { if ( str [ 0 ] == pattern [ 0 ] || ( str [ 0 ] != '\\0' && pattern [ 0 ] == '.' )) { if ( match ( str , pattern . substr ( 2 )) || match ( str . substr ( 1 ), pattern ) || match ( str . substr ( 1 ), pattern . substr ( 2 ))) { ans = true ; } } else { if ( match ( str , pattern . substr ( 2 ))) ans = true ; } } else { if ( pattern [ 0 ] == str [ 0 ] || ( pattern [ 0 ] == '.' && str [ 0 ] != '\\0' )) { if ( match ( str . substr ( 1 ), pattern . substr ( 1 ))) { ans = true ; } } } return ans ; } }; \u52a8\u6001\u89c4\u5212\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 class Solution { public : bool match ( string str , string pattern ) { int s = str . length (); int p = pattern . length (); bool dp [ s + 1 ][ p + 1 ]; //00 \u7528\u4e8e\u5b58\u653e\u4e24\u4e2a\u7a7a\u5b57\u7b26\u4e32\u7684\u7ed3\u679c dp[i][j] \u8868\u793a\u6a21\u5f0f\u4e32\u524dj\u4e2a\u662f\u5426\u4e0e\u5b57\u7b26\u4e32\u524di\u4e2a\u5339\u914d memset ( dp , 0 , sizeof ( dp )); for ( int i = 0 ; i <= s ; i ++ ){ //\u5b9e\u9645\u4e0a\u6a21\u5f0f\u4e32\u548c\u5b57\u7b26\u4e32\u7684\u8d77\u70b9\u4e3a1(\u6240\u4ee5\u540e\u9762\u7684\u4e0b\u6807\u90fd\u662fi-1 j-1) for ( int j = 0 ; j <= p ; j ++ ){ if ( j == 0 ){ dp [ i ][ j ] = ( i == 0 ); //\u53ea\u6709\u5b57\u7b26\u4e32\u548c\u6a21\u5f0f\u4e32\u90fd\u4e3a\u7a7a\u7684\u65f6\u5019\u624d\u5339\u914d\uff0c\u5f53\u6a21\u5f0f\u4e32\u4e3a\u7a7a\uff0c\u5b57\u7b26\u4e32\u4e0d\u4e3a\u7a7a\u5219\u8fd4\u56defalse } else { if ( pattern [ j -1 ] != '*' ){ //\u5982\u679c\u7b2cj-1\u4e2a\u5b57\u7b26\u4e0d\u662f* if ( i > 0 && ( str [ i -1 ] == pattern [ j -1 ] || pattern [ j -1 ] == '.' )){ //\u6b63\u5e38\u5339\u914d dp [ i ][ j ] = dp [ i -1 ][ j -1 ]; } } else { //\u5982\u679c\u7b2cj\u4e2a\u662f* \u90a3\u4e48\u5206\u4e24\u79cd\u60c5\u51b5\uff0c\u6709\u4e00\u79cd\u6210\u7acb\u5373\u53ef //case 1 \u53ef\u4ee5\u76f4\u63a5\u5ffd\u7565*\u524d\u6a21\u5f0f\u7684\u90a3\u4e2a\u5143\u7d20\uff08*\u4ee3\u8868\u51fa\u73b00\u6b21 \u6bd4\u5982a* \u8fd9\u4e24\u4e2a\u5143\u7d20\u505a\u7a7a\u5b57\u7b26\u4e32\uff09 // \u90a3\u4e48dp[i][j]==true \u53ea\u9700\u6ee1\u8db3 dp[i][j-2]==true\u5373\u53ef if ( j >= 2 ){ dp [ i ][ j ] = dp [ i ][ j -2 ]; } //case 2 \u5982\u679cdp[i][j-2]\u4e0d\u7b49\u4e8etrue\u90a3\u4e48\u8981\u6ee1\u8db3\u7b2cj-1\u4e2a\u5b57\u7b26(\u8fd9\u4e2a\u5b57\u7b26\u4e5f\u53ef\u4ee5\u4e3a\u2018.\u2019)\u4e0e\u7b2ci\u4e2a\u5b57\u7b26\u5339\u914d\u5373\u53ef //\u4e0b\u6807\u591a\u51cf1\u662f\u56e0\u4e3adp\u662f\u4ece1\u5f00\u59cb\u8bb0\u5f55\u7684 if ( i > 0 && j >= 2 && ( str [ i -1 ] == pattern [ j -2 ] || pattern [ j -2 ] == '.' )){ dp [ i ][ j ] |= dp [ i -1 ][ j ]; //\u4f7f\u7528\u6216\u7b49\u4e8e \u4e24\u79cd\u60c5\u51b5\u6709\u4e00\u79cd\u7b26\u5408\u5c31\u884c } } } } } return dp [ str . length ()][ pattern . length ()]; } }; \u5f53 j \u4e3a * \u65f6\u7684\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u5373 dp[i-1][j] \u7684\u610f\u4e49\u662f j-1 \u5bf9\u5e94\u7684\u5b57\u7b26\u53ef\u4ee5\u91cd\u590d\u65e0\u9650\u6b21\uff0c\u6545\u53ea\u8981\u5339\u914d i-1 \u548c j-1 \uff0c\u5219 i \u548c j-1 \u76f8\u7b49\u65f6\u4fbf\u53ef\u5339\u914d\uff0c \u800c dp[i-1][j-1] \u7684\u7ed3\u679c\u5305\u542b\u5728 dp[i-1][j] \u4e2d 4.2 \u6700\u957f\u56de\u6587\u5b50\u4e32 \u00b6 \u5bf9\u4e8e\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8bf7\u8bbe\u8ba1\u4e00\u4e2a\u9ad8\u6548\u7b97\u6cd5\uff0c\u8ba1\u7b97\u5176\u4e2d\u6700\u957f\u56de\u6587\u5b50\u4e32\u7684\u957f\u5ea6\u3002\u7ed9\u5b9a\u5b57\u7b26\u4e32A\u4ee5\u53ca\u5b83\u7684\u957f\u5ea6n\uff0c\u8bf7\u8fd4\u56de\u6700\u957f\u56de\u6587\u5b50\u4e32\u7684\u957f\u5ea6\u3002 input: \"abc1234321ab\",12 ouput: 7 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Solution { public : int getLongestPalindrome ( string A , int n ) { int ans = 0 ; bool dp [ n ][ n ]; memset ( dp , 0 , sizeof ( dp )); for ( int l = 0 ; l < n ; l ++ ) { for ( int i = 0 ; i + l < n ; i ++ ) { int j = i + l ; if ( ! l ) { dp [ i ][ j ] = 1 ; } else if ( l == 1 ) { dp [ i ][ j ] = ( A [ i ] == A [ j ]); } else { dp [ i ][ j ] = ( A [ i ] == A [ j ] && dp [ i + 1 ][ j -1 ]) ? 1 : 0 ; } if ( dp [ i ][ j ]) { ans = max ( ans , l + 1 ); } } } return ans ; } }; 5.\u6574\u578b\u4e0e\u5b57\u7b26\u4e32 \u00b6 5.1 ip\u5730\u5740\u8f6c\u6362\u4e3a\u6574\u6570 \u00b6 \u53ef\u4ee5\u91c7\u7528\u5171\u7528\u4f53\u7b80\u5316\uff08union\uff09 \u5e38\u7528\u8f93\u5165\u8f93\u51fa\u51fd\u6570\uff1a\u6587\u4ef6\uff08fscanf,fprintf\uff09,\u5b57\u7b26\u4e32\uff08sscanf,sprintf\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 union IP { struct { unsigned char a1 ; unsigned char a2 ; unsigned char a3 ; unsigned char a4 ; } ip ; unsigned int num ; } int main () { union IP p ; char str [ 100 ] = { 0 }; int arr [ 4 ] = 0 ; while ( ~ scanf ( \"%s\" , str )) { sscanf ( str , \"%d.%d.%d.%d\" , arr , arr + 1 , arr + 2 , arr + 3 ); p . ip . a1 = arr [ 0 ]; p . ip . a2 = arr [ 1 ]; p . ip . a3 = arr [ 2 ]; p . ip . a4 = arr [ 3 ]; printf ( \"%u \\n \" , p . num ); } return 0 ; } tips: \u8bbe\u8ba1\u5185\u5b58\u5b58\u50a8\u65f6\u8981\u8003\u8651\u5927\u5c0f\u7aef\u5b58\u50a8\u65b9\u5f0f \u76ee\u524d\u8ba1\u7b97\u673a\u4e00\u822c\u90fd\u7528\u5c0f\u7aef\u5b58\u50a8\u65b9\u5f0f\uff08\u6570\u636e\u4f4e\u4f4d\u5b58\u50a8\u5230\u4f4e\u5730\u5740\uff09 1 2 3 4 5 bool is_little () { int num = 1 ; return (( char * )( & num ))[ 0 ]; } \u6545\u4e0a\u8ff0\u7684 ip \u5730\u5740\u8f6c\u6362\u4ee3\u7801\u5b9e\u9645\u4e0a\u5b58\u50a8\u7684 num \u5bf9\u5e94\u4e3a 1.0.168.192 \u987b\u5728 arr \u8d4b\u503c\u5904\u5012\u7740\u5b58","title":"\u5b57\u7b26\u4e32"},{"location":"Skill/string/#_1","text":"","title":"\u5b57\u7b26\u4e32"},{"location":"Skill/string/#1-stdstring","text":"string \u5e38\u7528\u6210\u5458\u51fd\u6570 1 2 3 4 5 6 7 8 9 10 11 12 13 14 string str ; str . length (); // \u957f\u5ea6 str . push_back ( '.' ); // \u8ffd\u52a0\u5b57\u7b26 str += str2 ; // \u8ffd\u52a0\u5b57\u7b26\u4e32 str . substr ( 1 ); // \u4ece 1 \u5f00\u59cb\u7684\u5b50\u4e32 str . find ( str1 ); str . find_first_of ( ',' ); // \u627e\u5230\u7b2c\u4e00\u4e2a\u4e3a ',' \u7684\u4e0b\u6807 // \u5b57\u7b26\u4e32\u548c\u6570\u5b57 str = to_string ( num ); num = atoi ( s . c_str ()); // \u5148\u8f6c\u5e38\u5b57\u7b26\u4e32\u518d\u8f6c\u6570\u5b57","title":"1 STD::string"},{"location":"Skill/string/#11","text":"\u5c42\u6b21\u904d\u5386\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 /* struct TreeNode { int val; struct TreeNode *left; struct TreeNode *right; TreeNode(int x) : val(x), left(NULL), right(NULL) { } }; */ class Solution { public : char * Serialize ( TreeNode * root ) { string s ; queue < TreeNode *> qt ; qt . push ( root ); while ( ! qt . empty ()) { TreeNode * node = qt . front (); qt . pop (); if ( node == nullptr ) { s . push_back ( '#' ); s . push_back ( ',' ); continue ; } // process not null node s += to_string ( node -> val ); s . push_back ( ',' ); // push operator qt . push ( node -> left ); qt . push ( node -> right ); } char * ret = new char [ s . length () + 1 ]; strcpy ( ret , s . c_str ()); return ret ; } TreeNode * Deserialize ( char * str ) { if ( str == nullptr ) { return nullptr ; } // \u53ef\u7528string\u6210\u5458\u51fd\u6570 string s ( str ); if ( str [ 0 ] == '#' ) { return nullptr ; } // \u6784\u9020\u5934\u7ed3\u70b9 queue < TreeNode *> nodes ; TreeNode * ret = new TreeNode ( atoi ( s . c_str ())); s = s . substr ( s . find_first_of ( ',' ) + 1 ); nodes . push ( ret ); // \u6839\u636e\u5e8f\u5217\u5316\u5b57\u7b26\u4e32\u518d\u5c42\u6b21\u904d\u5386\u4e00\u904d\uff0c\u6765\u6784\u9020\u6811 while ( ! nodes . empty () && ! s . empty ()) { TreeNode * node = nodes . front (); nodes . pop (); if ( s [ 0 ] == '#' ) { node -> left = nullptr ; s = s . substr ( 2 ); } else { node -> left = new TreeNode ( atoi ( s . c_str ())); nodes . push ( node -> left ); s = s . substr ( s . find_first_of ( ',' ) + 1 ); } if ( s [ 0 ] == '#' ) { node -> right = nullptr ; s = s . substr ( 2 ); } else { node -> right = new TreeNode ( atoi ( s . c_str ())); nodes . push ( node -> right ); s = s . substr ( s . find_first_of ( ',' ) + 1 ); } } return ret ; } };","title":"1.1 \u4e8c\u53c9\u6811\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316"},{"location":"Skill/string/#2-kmp","text":"\u6838\u5fc3\uff1a \u901a\u8fc7\u6a21\u5f0f\u4e32\u7684\u516c\u5171\u524d\u540e\u7f00\u751f\u6210 nxt \u6570\u7ec4\u51cf\u5c11\u5339\u914d\u79fb\u52a8\u6b21\u6570 \u8d1f\u540c\u5219\u589e 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 int nxt []; void GetNxtVal ( char * p , int nxt []) { int pLen = strlen ( p ); nxt [ 0 ] = -1 ; int k = -1 , j = 0 ; // \u56de\u6eaf\u9488\u4e0e\u5148\u950b\u9488 while ( j < len ) { if ( k == -1 || p [ j ] == p [ k ]) { j ++ ; k ++ ; if ( p [ j ] != p [ k ]) { nxt [ j ] = k ; } else { nxt [ j ] = nxt [ k ]; } } else { k = nxt [ k ]; } } } int KMPSearch ( char * s , char * p ) { int pLen = strlen ( p ), sLen = strlen ( s ); int i = 0 , j = 0 ; while ( i < sLen && j < pLen ) { if ( j == -1 || s [ i ] == p [ j ]) { i ++ ; j ++ ; } else { j = nxt [ j ]; } } if ( j == pLen ) { return i - j ; } else { return -1 ; } }","title":"2 kmp \u7b97\u6cd5"},{"location":"Skill/string/#3","text":"","title":"3 \u5b57\u7b26\u4e32\u6392\u5e8f\u95ee\u9898"},{"location":"Skill/string/#31","text":"\u8f93\u5165\u4e00\u4e2a\u6b63\u6574\u6570\u6570\u7ec4\uff0c\u628a\u6570\u7ec4\u91cc\u6240\u6709\u6570\u5b57\u62fc\u63a5\u8d77\u6765\u6392\u6210\u4e00\u4e2a\u6570\uff0c\u6253\u5370\u80fd\u62fc\u63a5\u51fa\u7684\u6240\u6709\u6570\u5b57\u4e2d\u6700\u5c0f\u7684\u4e00\u4e2a\u3002\u4f8b\u5982\u8f93\u5165\u6570\u7ec4{3\uff0c32\uff0c321}\uff0c\u5219\u6253\u5370\u51fa\u8fd9\u4e09\u4e2a\u6570\u5b57\u80fd\u6392\u6210\u7684\u6700\u5c0f\u6570\u5b57\u4e3a321323\u3002 input: [3,32,321] output: \"321323\" \u601d\u8def\uff1a\u6570\u5b57\u8f6c\u5b57\u7b26\u4e32\u518d\u81ea\u5b9a\u4e49\u6392\u5e8f\uff08ab\u548cba\u7684\u5927\u5c0f\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 int cmp ( string str1 , string str2 ) { string s1 = str1 + str2 ; string s2 = str2 + str1 ; return s1 < s2 ; } string PrintMinNumber ( vector < int > numbers ) { int len = numbers . size (); string ans ; if ( len <= 0 ) { return ans ; } string s [ 105 ]; for ( int i = 0 ; i < len ; i ++ ) { s [ i ] = to_string ( numbers [ i ]); } sort ( s , s + len , cmp ); for ( int i = 0 ; i < len ; i ++ ) { ans += s [ i ]; } return ans ; } char \u578b\u5199\u6cd5\uff1a","title":"3.1 \u628a\u6570\u7ec4\u6392\u6210\u6700\u5c0f\u7684\u6570"},{"location":"Skill/string/#3_1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 void Reverse ( char * pBeigin , char * pEnd ) { if ( pBegin == NULL || pEnd == NULL ) { return ; } while ( pBegin < pEnd ) { char temp = * pBegin ; * pBegin = * pEnd ; * pEnd = temp ; pBegin ++ , pEnd -- ; } } \u5b57\u7b26\u4e32\u7684\u5de6\u65cb\uff1a abcdefg 2 -> cdefgab \u6b65\u9aa4\uff1a abcdefg -> ba gfedc -> cdefgab","title":"3 \u901a\u8fc7\u7ffb\u8f6c\u51fd\u6570\u5b9e\u73b0\u5b57\u7b26\u4e32\u7684\u5de6\u65cb\u3001\u5012\u7f6e\u7b49\u529f\u80fd"},{"location":"Skill/string/#4","text":"\u5b57\u7b26\u4e32\u7684\u52a8\u6001\u89c4\u5212\u5e38\u7528\u4e8e\u5b57\u7b26\u4e32\u7684\u5339\u914d\u95ee\u9898","title":"4 \u5b57\u7b26\u4e32\u4e2d\u7684\u52a8\u6001\u89c4\u5212"},{"location":"Skill/string/#41","text":"\u8bf7\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u7528\u6765\u5339\u914d\u5305\u62ec'.'\u548c' '\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u6a21\u5f0f\u4e2d\u7684\u5b57\u7b26'.'\u8868\u793a\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff0c\u800c' '\u8868\u793a\u5b83\u524d\u9762\u7684\u5b57\u7b26\u53ef\u4ee5\u51fa\u73b0\u4efb\u610f\u6b21\uff08\u5305\u542b0\u6b21\uff09\u3002 \u5728\u672c\u9898\u4e2d\uff0c\u5339\u914d\u662f\u6307\u5b57\u7b26\u4e32\u7684\u6240\u6709\u5b57\u7b26\u5339\u914d\u6574\u4e2a\u6a21\u5f0f\u3002\u4f8b\u5982\uff0c\u5b57\u7b26\u4e32\"aaa\"\u4e0e\u6a21\u5f0f\"a.a\"\u548c\"ab ac a\"\u5339\u914d\uff0c\u4f46\u662f\u4e0e\"aa.a\"\u548c\"ab*a\"\u5747\u4e0d\u5339\u914d input: \"aaa\",\"a*a\" output: true \u601d\u8def\uff1a\u4e3b\u8981\u662f\u5728\u51fa\u73b0 * \u5224\u65ad\u524d\u9762\u5b57\u7b26\u51fa\u73b0\u4efb\u610f\u6b21\u7684\u5339\u914d\u60c5\u51b5 \u9012\u5f52\u5f0f\u5199\u6cd5\uff08\u590d\u6742\u5ea6\u9ad8\uff09\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 class Solution { public : bool match ( string str , string pattern ) { bool ans = false ; if ( str . length () == 0 && pattern . length () == 0 ) { ans = true ; } if ( str [ 0 ] == '\\0' && pattern [ 0 ] == '\\0' ) { ans = true ; return ans ; } if ( str [ 0 ] != '\\0' && pattern [ 0 ] == '\\0' ) { return ans ; } if ( pattern [ 1 ] == '*' ) { if ( str [ 0 ] == pattern [ 0 ] || ( str [ 0 ] != '\\0' && pattern [ 0 ] == '.' )) { if ( match ( str , pattern . substr ( 2 )) || match ( str . substr ( 1 ), pattern ) || match ( str . substr ( 1 ), pattern . substr ( 2 ))) { ans = true ; } } else { if ( match ( str , pattern . substr ( 2 ))) ans = true ; } } else { if ( pattern [ 0 ] == str [ 0 ] || ( pattern [ 0 ] == '.' && str [ 0 ] != '\\0' )) { if ( match ( str . substr ( 1 ), pattern . substr ( 1 ))) { ans = true ; } } } return ans ; } }; \u52a8\u6001\u89c4\u5212\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 class Solution { public : bool match ( string str , string pattern ) { int s = str . length (); int p = pattern . length (); bool dp [ s + 1 ][ p + 1 ]; //00 \u7528\u4e8e\u5b58\u653e\u4e24\u4e2a\u7a7a\u5b57\u7b26\u4e32\u7684\u7ed3\u679c dp[i][j] \u8868\u793a\u6a21\u5f0f\u4e32\u524dj\u4e2a\u662f\u5426\u4e0e\u5b57\u7b26\u4e32\u524di\u4e2a\u5339\u914d memset ( dp , 0 , sizeof ( dp )); for ( int i = 0 ; i <= s ; i ++ ){ //\u5b9e\u9645\u4e0a\u6a21\u5f0f\u4e32\u548c\u5b57\u7b26\u4e32\u7684\u8d77\u70b9\u4e3a1(\u6240\u4ee5\u540e\u9762\u7684\u4e0b\u6807\u90fd\u662fi-1 j-1) for ( int j = 0 ; j <= p ; j ++ ){ if ( j == 0 ){ dp [ i ][ j ] = ( i == 0 ); //\u53ea\u6709\u5b57\u7b26\u4e32\u548c\u6a21\u5f0f\u4e32\u90fd\u4e3a\u7a7a\u7684\u65f6\u5019\u624d\u5339\u914d\uff0c\u5f53\u6a21\u5f0f\u4e32\u4e3a\u7a7a\uff0c\u5b57\u7b26\u4e32\u4e0d\u4e3a\u7a7a\u5219\u8fd4\u56defalse } else { if ( pattern [ j -1 ] != '*' ){ //\u5982\u679c\u7b2cj-1\u4e2a\u5b57\u7b26\u4e0d\u662f* if ( i > 0 && ( str [ i -1 ] == pattern [ j -1 ] || pattern [ j -1 ] == '.' )){ //\u6b63\u5e38\u5339\u914d dp [ i ][ j ] = dp [ i -1 ][ j -1 ]; } } else { //\u5982\u679c\u7b2cj\u4e2a\u662f* \u90a3\u4e48\u5206\u4e24\u79cd\u60c5\u51b5\uff0c\u6709\u4e00\u79cd\u6210\u7acb\u5373\u53ef //case 1 \u53ef\u4ee5\u76f4\u63a5\u5ffd\u7565*\u524d\u6a21\u5f0f\u7684\u90a3\u4e2a\u5143\u7d20\uff08*\u4ee3\u8868\u51fa\u73b00\u6b21 \u6bd4\u5982a* \u8fd9\u4e24\u4e2a\u5143\u7d20\u505a\u7a7a\u5b57\u7b26\u4e32\uff09 // \u90a3\u4e48dp[i][j]==true \u53ea\u9700\u6ee1\u8db3 dp[i][j-2]==true\u5373\u53ef if ( j >= 2 ){ dp [ i ][ j ] = dp [ i ][ j -2 ]; } //case 2 \u5982\u679cdp[i][j-2]\u4e0d\u7b49\u4e8etrue\u90a3\u4e48\u8981\u6ee1\u8db3\u7b2cj-1\u4e2a\u5b57\u7b26(\u8fd9\u4e2a\u5b57\u7b26\u4e5f\u53ef\u4ee5\u4e3a\u2018.\u2019)\u4e0e\u7b2ci\u4e2a\u5b57\u7b26\u5339\u914d\u5373\u53ef //\u4e0b\u6807\u591a\u51cf1\u662f\u56e0\u4e3adp\u662f\u4ece1\u5f00\u59cb\u8bb0\u5f55\u7684 if ( i > 0 && j >= 2 && ( str [ i -1 ] == pattern [ j -2 ] || pattern [ j -2 ] == '.' )){ dp [ i ][ j ] |= dp [ i -1 ][ j ]; //\u4f7f\u7528\u6216\u7b49\u4e8e \u4e24\u79cd\u60c5\u51b5\u6709\u4e00\u79cd\u7b26\u5408\u5c31\u884c } } } } } return dp [ str . length ()][ pattern . length ()]; } }; \u5f53 j \u4e3a * \u65f6\u7684\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u5373 dp[i-1][j] \u7684\u610f\u4e49\u662f j-1 \u5bf9\u5e94\u7684\u5b57\u7b26\u53ef\u4ee5\u91cd\u590d\u65e0\u9650\u6b21\uff0c\u6545\u53ea\u8981\u5339\u914d i-1 \u548c j-1 \uff0c\u5219 i \u548c j-1 \u76f8\u7b49\u65f6\u4fbf\u53ef\u5339\u914d\uff0c \u800c dp[i-1][j-1] \u7684\u7ed3\u679c\u5305\u542b\u5728 dp[i-1][j] \u4e2d","title":"4.1 \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d"},{"location":"Skill/string/#42","text":"\u5bf9\u4e8e\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8bf7\u8bbe\u8ba1\u4e00\u4e2a\u9ad8\u6548\u7b97\u6cd5\uff0c\u8ba1\u7b97\u5176\u4e2d\u6700\u957f\u56de\u6587\u5b50\u4e32\u7684\u957f\u5ea6\u3002\u7ed9\u5b9a\u5b57\u7b26\u4e32A\u4ee5\u53ca\u5b83\u7684\u957f\u5ea6n\uff0c\u8bf7\u8fd4\u56de\u6700\u957f\u56de\u6587\u5b50\u4e32\u7684\u957f\u5ea6\u3002 input: \"abc1234321ab\",12 ouput: 7 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Solution { public : int getLongestPalindrome ( string A , int n ) { int ans = 0 ; bool dp [ n ][ n ]; memset ( dp , 0 , sizeof ( dp )); for ( int l = 0 ; l < n ; l ++ ) { for ( int i = 0 ; i + l < n ; i ++ ) { int j = i + l ; if ( ! l ) { dp [ i ][ j ] = 1 ; } else if ( l == 1 ) { dp [ i ][ j ] = ( A [ i ] == A [ j ]); } else { dp [ i ][ j ] = ( A [ i ] == A [ j ] && dp [ i + 1 ][ j -1 ]) ? 1 : 0 ; } if ( dp [ i ][ j ]) { ans = max ( ans , l + 1 ); } } } return ans ; } };","title":"4.2 \u6700\u957f\u56de\u6587\u5b50\u4e32"},{"location":"Skill/string/#5","text":"","title":"5.\u6574\u578b\u4e0e\u5b57\u7b26\u4e32"},{"location":"Skill/string/#51-ip","text":"\u53ef\u4ee5\u91c7\u7528\u5171\u7528\u4f53\u7b80\u5316\uff08union\uff09 \u5e38\u7528\u8f93\u5165\u8f93\u51fa\u51fd\u6570\uff1a\u6587\u4ef6\uff08fscanf,fprintf\uff09,\u5b57\u7b26\u4e32\uff08sscanf,sprintf\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 union IP { struct { unsigned char a1 ; unsigned char a2 ; unsigned char a3 ; unsigned char a4 ; } ip ; unsigned int num ; } int main () { union IP p ; char str [ 100 ] = { 0 }; int arr [ 4 ] = 0 ; while ( ~ scanf ( \"%s\" , str )) { sscanf ( str , \"%d.%d.%d.%d\" , arr , arr + 1 , arr + 2 , arr + 3 ); p . ip . a1 = arr [ 0 ]; p . ip . a2 = arr [ 1 ]; p . ip . a3 = arr [ 2 ]; p . ip . a4 = arr [ 3 ]; printf ( \"%u \\n \" , p . num ); } return 0 ; } tips: \u8bbe\u8ba1\u5185\u5b58\u5b58\u50a8\u65f6\u8981\u8003\u8651\u5927\u5c0f\u7aef\u5b58\u50a8\u65b9\u5f0f \u76ee\u524d\u8ba1\u7b97\u673a\u4e00\u822c\u90fd\u7528\u5c0f\u7aef\u5b58\u50a8\u65b9\u5f0f\uff08\u6570\u636e\u4f4e\u4f4d\u5b58\u50a8\u5230\u4f4e\u5730\u5740\uff09 1 2 3 4 5 bool is_little () { int num = 1 ; return (( char * )( & num ))[ 0 ]; } \u6545\u4e0a\u8ff0\u7684 ip \u5730\u5740\u8f6c\u6362\u4ee3\u7801\u5b9e\u9645\u4e0a\u5b58\u50a8\u7684 num \u5bf9\u5e94\u4e3a 1.0.168.192 \u987b\u5728 arr \u8d4b\u503c\u5904\u5012\u7740\u5b58","title":"5.1 ip\u5730\u5740\u8f6c\u6362\u4e3a\u6574\u6570"},{"location":"Socket/socket/","text":"Socket\u7f16\u7a0b \u00b6 0 TCP \u539f\u7406\uff08\u4e09\u6b21\u63e1\u624b\u4e0e\u56db\u6b21\u6325\u624b\uff09 \u00b6 0.1 TCP \u62a5\u6587\u683c\u5f0f \u00b6 0.2 \u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5 \u00b6 \u7b2c\u4e00\u6b21\u63e1\u624b\uff1a\u5ba2\u6237\u7aef\u8981\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42\uff0c\u9996\u5148\u5ba2\u6237\u7aef\u968f\u673a\u751f\u6210\u4e00\u4e2a\u8d77\u59cb\u5e8f\u5217\u53f7ISN(\u6bd4\u5982\u662f100)\uff0c\u90a3\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u9001\u7684\u62a5\u6587\u6bb5\u5305\u542bSYN\u6807\u5fd7\u4f4d(\u4e5f\u5c31\u662fSYN=1)\uff0c\u5e8f\u5217\u53f7seq=100\u3002 \u7b2c\u4e8c\u6b21\u63e1\u624b\uff1a\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684\u62a5\u6587\u540e\uff0c\u53d1\u73b0SYN=1\uff0c\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a\u8fde\u63a5\u8bf7\u6c42\uff0c\u4e8e\u662f\u5c06\u5ba2\u6237\u7aef\u7684\u8d77\u59cb\u5e8f\u5217\u53f7100\u5b58\u8d77\u6765\uff0c\u5e76\u4e14\u968f\u673a\u751f\u6210\u4e00\u4e2a\u670d\u52a1\u7aef\u7684\u8d77\u59cb\u5e8f\u5217\u53f7(\u6bd4\u5982\u662f300)\u3002\u7136\u540e\u7ed9\u5ba2\u6237\u7aef\u56de\u590d\u4e00\u6bb5\u62a5\u6587\uff0c\u56de\u590d\u62a5\u6587\u5305\u542bSYN\u548cACK\u6807\u5fd7(\u4e5f\u5c31\u662fSYN=1,ACK=1)\u3001\u5e8f\u5217\u53f7seq=300\u3001\u786e\u8ba4\u53f7ack=101(\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684\u5e8f\u5217\u53f7+1)\u3002 \u7b2c\u4e09\u6b21\u63e1\u624b\uff1a\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u7aef\u7684\u56de\u590d\u540e\u53d1\u73b0ACK=1\u5e76\u4e14ack=101,\u4e8e\u662f\u77e5\u9053\u670d\u52a1\u7aef\u5df2\u7ecf\u6536\u5230\u4e86\u5e8f\u5217\u53f7\u4e3a100\u7684\u90a3\u6bb5\u62a5\u6587\uff1b\u540c\u65f6\u53d1\u73b0SYN=1\uff0c\u77e5\u9053\u4e86\u670d\u52a1\u7aef\u540c\u610f\u4e86\u8fd9\u6b21\u8fde\u63a5\uff0c\u4e8e\u662f\u5c31\u5c06\u670d\u52a1\u7aef\u7684\u5e8f\u5217\u53f7300\u7ed9\u5b58\u4e0b\u6765\u3002\u7136\u540e\u5ba2\u6237\u7aef\u518d\u56de\u590d\u4e00\u6bb5\u62a5\u6587\u7ed9\u670d\u52a1\u7aef\uff0c\u62a5\u6587\u5305\u542bACK\u6807\u5fd7\u4f4d(ACK=1)\u3001ack=301(\u670d\u52a1\u7aef\u5e8f\u5217\u53f7+1)\u3001seq=101(\u7b2c\u4e00\u6b21\u63e1\u624b\u65f6\u53d1\u9001\u62a5\u6587\u662f\u5360\u636e\u4e00\u4e2a\u5e8f\u5217\u53f7\u7684\uff0c\u6240\u4ee5\u8fd9\u6b21seq\u5c31\u4ece101\u5f00\u59cb\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e0d\u643a\u5e26\u6570\u636e\u7684ACK\u62a5\u6587\u662f\u4e0d\u5360\u636e\u5e8f\u5217\u53f7\u7684\uff0c\u6240\u4ee5\u540e\u9762\u7b2c\u4e00\u6b21\u6b63\u5f0f\u53d1\u9001\u6570\u636e\u65f6seq\u8fd8\u662f101)\u3002\u5f53\u670d\u52a1\u7aef\u6536\u5230\u62a5\u6587\u540e\u53d1\u73b0ACK=1\u5e76\u4e14ack=301\uff0c\u5c31\u77e5\u9053\u5ba2\u6237\u7aef\u6536\u5230\u5e8f\u5217\u53f7\u4e3a300\u7684\u62a5\u6587\u4e86\uff0c\u5c31\u8fd9\u6837\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u901a\u8fc7TCP\u5efa\u7acb\u4e86\u8fde\u63a5\u3002 0.3 \u56db\u6b21\u6325\u624b\u5173\u95ed\u8fde\u63a5\uff1a \u00b6 \u7b2c\u4e00\u6b21\u6325\u624b\uff1a\u5f53\u5ba2\u6237\u7aef\u7684\u6570\u636e\u90fd\u4f20\u8f93\u5b8c\u6210\u540e\uff0c\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u51fa\u8fde\u63a5\u91ca\u653e\u62a5\u6587(\u5f53\u7136\u6570\u636e\u6ca1\u53d1\u5b8c\u65f6\u4e5f\u53ef\u4ee5\u53d1\u9001\u8fde\u63a5\u91ca\u653e\u62a5\u6587\u5e76\u505c\u6b62\u53d1\u9001\u6570\u636e)\uff0c\u91ca\u653e\u8fde\u63a5\u62a5\u6587\u5305\u542bFIN\u6807\u5fd7\u4f4d(FIN=1)\u3001\u5e8f\u5217\u53f7seq=1101(100+1+1000\uff0c\u5176\u4e2d\u76841\u662f\u5efa\u7acb\u8fde\u63a5\u65f6\u5360\u7684\u4e00\u4e2a\u5e8f\u5217\u53f7)\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u5ba2\u6237\u7aef\u53d1\u51faFIN\u62a5\u6587\u6bb5\u540e\u53ea\u662f\u4e0d\u80fd\u53d1\u6570\u636e\u4e86\uff0c\u4f46\u662f\u8fd8\u53ef\u4ee5\u6b63\u5e38\u6536\u6570\u636e\uff1b\u53e6\u5916FIN\u62a5\u6587\u6bb5\u5373\u4f7f\u4e0d\u643a\u5e26\u6570\u636e\u4e5f\u8981\u5360\u636e\u4e00\u4e2a\u5e8f\u5217\u53f7\u3002 \u7b2c\u4e8c\u6b21\u6325\u624b\uff1a\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u7684FIN\u62a5\u6587\u540e\u7ed9\u5ba2\u6237\u7aef\u56de\u590d\u786e\u8ba4\u62a5\u6587\uff0c\u786e\u8ba4\u62a5\u6587\u5305\u542bACK\u6807\u5fd7\u4f4d(ACK=1)\u3001\u786e\u8ba4\u53f7ack=1102(\u5ba2\u6237\u7aefFIN\u62a5\u6587\u5e8f\u5217\u53f71101+1)\u3001\u5e8f\u5217\u53f7seq=2300(300+2000)\u3002\u6b64\u65f6\u670d\u52a1\u7aef\u5904\u4e8e\u5173\u95ed\u7b49\u5f85\u72b6\u6001\uff0c\u800c\u4e0d\u662f\u7acb\u9a6c\u7ed9\u5ba2\u6237\u7aef\u53d1FIN\u62a5\u6587\uff0c\u8fd9\u4e2a\u72b6\u6001\u8fd8\u8981\u6301\u7eed\u4e00\u6bb5\u65f6\u95f4\uff0c\u56e0\u4e3a\u670d\u52a1\u7aef\u53ef\u80fd\u8fd8\u6709\u6570\u636e\u6ca1\u53d1\u5b8c\u3002 \u7b2c\u4e09\u6b21\u6325\u624b\uff1a\u670d\u52a1\u7aef\u5c06\u6700\u540e\u6570\u636e(\u6bd4\u598250\u4e2a\u5b57\u8282)\u53d1\u9001\u5b8c\u6bd5\u540e\u5c31\u5411\u5ba2\u6237\u7aef\u53d1\u51fa\u8fde\u63a5\u91ca\u653e\u62a5\u6587\uff0c\u62a5\u6587\u5305\u542bFIN\u548cACK\u6807\u5fd7\u4f4d(FIN=1,ACK=1)\u3001\u786e\u8ba4\u53f7\u548c\u7b2c\u4e8c\u6b21\u6325\u624b\u4e00\u6837ack=1102\u3001\u5e8f\u5217\u53f7seq=2350(2300+50)\u3002 \u7b2c\u56db\u6b21\u6325\u624b\uff1a\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u7aef\u53d1\u7684FIN\u62a5\u6587\u540e\uff0c\u5411\u670d\u52a1\u7aef\u53d1\u51fa\u786e\u8ba4\u62a5\u6587\uff0c\u786e\u8ba4\u62a5\u6587\u5305\u542bACK\u6807\u5fd7\u4f4d(ACK=1)\u3001\u786e\u8ba4\u53f7ack=2351\u3001\u5e8f\u5217\u53f7seq=1102\u3002\u6ce8\u610f\u5ba2\u6237\u7aef\u53d1\u51fa\u786e\u8ba4\u62a5\u6587\u540e\u4e0d\u662f\u7acb\u9a6c\u91ca\u653eTCP\u8fde\u63a5\uff0c\u800c\u662f\u8981\u7ecf\u8fc72MSL(\u6700\u957f\u62a5\u6587\u6bb5\u5bff\u547d\u76842\u500d\u65f6\u957f)\u540e\u624d\u91ca\u653eTCP\u8fde\u63a5\u3002\u800c\u670d\u52a1\u7aef\u4e00\u65e6\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u786e\u8ba4\u62a5\u6587\u5c31\u4f1a\u7acb\u9a6c\u91ca\u653eTCP\u8fde\u63a5\uff0c\u6240\u4ee5\u670d\u52a1\u7aef\u7ed3\u675fTCP\u8fde\u63a5\u7684\u65f6\u95f4\u8981\u6bd4\u5ba2\u6237\u7aef\u65e9\u4e00\u4e9b\u3002 1 \u5de5\u4f5c\u6d41\u7a0b \u00b6 1.1 \u57fa\u672c\u6d41\u7a0b \u00b6 \u6301\u7eed\u963b\u585e\uff1a while \u5faa\u73af\u662f\u963b\u585e\u5f0f\u901a\u4fe1\uff0c\u4e0d\u80fd\u5904\u7406\u5176\u4ed6\u4e1a\u52a1 \u89e3\u51b3\u65b9\u6848\u4e3a \u52a0\u5165 select \u52a0\u5165 epoll \u52a0\u5165\u591a\u7ebf\u7a0b 1.2 \u5355\u8fdb\u7a0b\u591a\u7aef\u53e3\u6a21\u578b \u00b6 1.3 \u591a\u8fdb\u7a0b\u591a\u7aef\u53e3\u6a21\u578b \u00b6 1.4 \u591a\u7ebf\u7a0b\u5355\u7aef\u53e3\u6a21\u578b \u00b6 1.5 \u591a\u8fdb\u7a0b\u591a\u7ebf\u7a0b\u591a\u7aef\u53e3\u6a21\u578b \u00b6 2 \u5b9a\u4e49\u6d88\u606f\u7ed3\u6784(MessageHeader.hpp) \u00b6 2.1 \u5b9a\u4e49\u679a\u4e3e\u6d88\u606f\uff1a\u5982\u767b\u5f55\u3001\u767b\u5f55\u8fd4\u56de\u3001\u767b\u51fa\u3001\u767b\u51fa\u8fd4\u56de\u3001\u65b0\u7528\u6237\u52a0\u5165\u3001\u9519\u8bef\u7b49 \u00b6 1 2 3 4 5 6 7 8 9 enum CMD { CMD_LOGIN , CMD_LOGIN_RESULT , CMD_LOGOUT , CMD_LOGOUT_RESULT , CMD_NEW_USER_JOIN , CMD_ERROR }; 2.2 \u5b9a\u4e49\u6d88\u606f\u5934/\u62a5\u6587\u5934\uff08\u53ef\u5305\u542b\u547d\u4ee4\u548c\u6570\u636e\u957f\u5ea6\uff09 \u00b6 1 2 3 4 5 struct DataHeader { short dataLength ; // \u6570\u636e\u957f\u5ea6 short cmd ; // \u547d\u4ee4 }; 2.3 \u7ee7\u627f\u6d88\u606f\u5934\u5b9a\u4e49\u5404\u79cd\u6d88\u606f\u4f53 \u00b6 \u5728\u6784\u9020\u51fd\u6570\u79cd\u4fbf\u521d\u59cb\u5316\u6d88\u606f\u5934\u7684\u547d\u4ee4\u548c\u957f\u5ea6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 struct Login : public DataHeader { Login () { dataLength = sizeof ( Login ); cmd = CMD_LOGIN ; } char userName [ 32 ]; char password [ 32 ]; }; struct LoginResult : public DataHeader { LoginResult () { dataLength = sizeof ( LoginResult ); cmd = CMD_LOGIN_RESULT ; } int result = 0 ; }; struct LogOut : public DataHeader { LogOut () { dataLength = sizeof ( LogOut ); cmd = CMD_LOGOUT ; } char userName [ 32 ]; }; struct LogOutResult : public DataHeader { LogOutResult () { dataLength = sizeof ( LogOutResult ); cmd = CMD_LOGOUT_RESULT ; } int result = 0 ; }; struct NewUserJoin : public DataHeader { NewUserJoin () { dataLength = sizeof ( NewUserJoin ); cmd = CMD_NEW_USER_JOIN ; } int nsock = 0 ; }; 3 \u5ba2\u6237\u7aef \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #ifndef _EasyTcpClient_hpp_ #define _EasyTcpClient_hpp_ #define _WINSOCK_DEPRECATED_NO_WARNINGS #ifdef _WIN32 #define WIN32_LEAN_AND_MEAN #include <windows.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 #else #include <unistd.h> // unix std #include <arpa/inet.h> #include <string.h> #define SOCKET int // Linux\u4e0b\u6ca1\u6709\u5305\u88c5SOCKET,\u9700\u8981\u4ecewindows\u67e5\u770b\u91cd\u65b0\u8fdb\u884c\u5b8f\u5b9a\u4e49 #define INVALID_SOCKET (SOCKET)(~0) #define SOCKET_ERROR (-1) #endif #include <cstdio> #include \"MessageHeader.hpp\" ... #endif 3.1 class \u5b9a\u4e49(EasyTcpClient.hpp) \u00b6 3.1.1 \u6210\u5458\u53d8\u91cf \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class EasyTcpClient { SOCKET _sock ; public : EasyTcpClient () { _sock = INVALID_SOCKET ; } // \u865a\u6790\u6784\u51fd\u6570 virtual ~ EasyTcpClient () { Close (); } // \u4ee5\u4e0b\u7686\u4e3a\u6b64\u7c7b\u7684\u6210\u5458\u51fd\u6570 } \u865a\u6790\u6784\u51fd\u6570\u7684\u4f5c\u7528\uff1a\u9632\u6b62\u5185\u5b58\u6cc4\u9732 \u5982\u679c\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u4e0d\u52a0 virtual \u5173\u952e\u5b57 \u5f53\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u4e0d\u58f0\u660e\u6210\u865a\u6790\u6784\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5f53\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\uff0c\u7236\u7c7b\u7684\u6307\u9488\u6307\u5411\u5b50\u7c7b\u65f6\uff0c delete \u6389\u7236\u7c7b\u7684\u6307\u9488\uff0c\u53ea\u8c03\u52a8\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\uff0c\u800c\u4e0d\u8c03\u52a8\u5b50\u7c7b\u7684\u6790\u6784\u51fd\u6570\u3002 \u5982\u679c\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u52a0 virtual \u5173\u952e\u5b57 \u5f53\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u58f0\u660e\u6210\u865a\u6790\u6784\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5f53\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\uff0c\u7236\u7c7b\u7684\u6307\u9488\u6307\u5411\u5b50\u7c7b\u65f6\uff0c delete \u6389\u7236\u7c7b\u7684\u6307\u9488\uff0c \u5148\u8c03\u52a8\u5b50\u7c7b\u7684\u6790\u6784\u51fd\u6570\uff0c\u518d\u8c03\u52a8\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u3002 3.1.2 \u521d\u59cb\u5316 socket \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 void InitSocket () { // \u542f\u52a8 WinSock 2.x\u73af\u5883 #ifdef _WIN32 WORD ver = MAKEWORD ( 2 , 2 ); // \u7248\u672c\u53f7 WSADATA dat ; // \u63a5\u6536winsows socket\u5b9e\u73b0\u7ec6\u8282\u7684\u7ed3\u6784\u4f53 WSAStartup ( ver , & dat ); // \u7ed1\u5b9asocket\u5e93,\u521d\u59cb\u5316\u94fe\u63a5\u5e93 #endif // \u5efa\u7acb\u4e00\u4e2asocket if ( _sock != INVALID_SOCKET ) { printf ( \"<socket = %d>\u5173\u95ed\u65e7\u8fde\u63a5 \\n \" , _sock ); Close (); } _sock = socket ( AF_INET , SOCK_STREAM , IPPROTO_TCP ); // \u540c\u670d\u52a1\u7aef\u4e0d\u540c\uff0c\u8fd9\u91cc\u4e0d\u7528\u6307\u660eTCP\u534f\u8bae if ( INVALID_SOCKET == _sock ) { printf ( \"\u521b\u5efasocket\u5931\u8d25 \\n \" ); } else { printf ( \"\u521b\u5efasocket\u6210\u529f \\n \" ); } } 3.1.3 \u8fde\u63a5\u670d\u52a1\u5668 connect \u00b6 \u4f20\u5165\u8fde\u63a5\u7684 ip \u5730\u5740\u548c\u7aef\u53e3\u53f7 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 int Connect ( const char * ip , unsigned short port ) { if ( INVALID_SOCKET == _sock ) { InitSocket (); } sockaddr_in _sin = {}; _sin . sin_family = AF_INET ; _sin . sin_port = htons ( port ); #ifdef _WIN32 _sin . sin_addr . S_un . S_addr = inet_addr ( ip ); // \u8fd9\u91cc\u66ff\u6362\u76f8\u5e94\u7684ip\u5730\u5740 #else _sin . sin_addr . s_addr = inet_addr ( ip ); #endif int ret = connect ( _sock , ( sockaddr * ) & _sin , sizeof ( sockaddr_in )); if ( SOCKET_ERROR == ret ) { printf ( \"\u8fde\u63a5\u670d\u52a1\u5668\u5931\u8d25 \\n \" ); } else { printf ( \"\u8fde\u63a5\u670d\u52a1\u5668\u6210\u529f \\n \" ); } return ret ; } 3.1.4 \u53d1\u9001\u6570\u636e \u00b6 c++ \u7684\u591a\u6001\u6027\uff1a \u300c\u6d3e\u751f\u7c7b\u7684\u6307\u9488\u300d\u53ef\u4ee5\u8d4b\u7ed9\u300c\u57fa\u7c7b\u6307\u9488\u300d\uff1b \u901a\u8fc7\u57fa\u7c7b\u6307\u9488\u8c03\u7528\u57fa\u7c7b\u548c\u6d3e\u751f\u7c7b\u4e2d\u7684\u540c\u540d\u300c\u865a\u51fd\u6570\u300d\u65f6: * \u82e5\u8be5\u6307\u9488\u6307\u5411\u4e00\u4e2a\u57fa\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8c03\u7528\u662f \u57fa\u7c7b\u7684\u865a\u51fd\u6570\uff1b * \u82e5\u8be5\u6307\u9488\u6307\u5411\u4e00\u4e2a\u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8c03\u7528 \u7684\u662f\u6d3e\u751f\u7c7b\u7684\u865a\u51fd\u6570\u3002 \u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\u53ef\u4ee5\u8d4b\u7ed9\u57fa\u7c7b\u300c\u5f15\u7528\u300d \u901a\u8fc7\u57fa\u7c7b\u5f15\u7528\u8c03\u7528\u57fa\u7c7b\u548c\u6d3e\u751f\u7c7b\u4e2d\u7684\u540c\u540d\u300c\u865a\u51fd\u6570\u300d\u65f6: * \u82e5\u8be5\u5f15\u7528\u5f15\u7528\u7684\u662f\u4e00\u4e2a\u57fa\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8c03 \u7528\u662f\u57fa\u7c7b\u7684\u865a\u51fd\u6570\uff1b * \u82e5\u8be5\u5f15\u7528\u5f15\u7528\u7684\u662f\u4e00\u4e2a\u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab \u8c03\u7528\u7684\u662f\u6d3e\u751f\u7c7b\u7684\u865a\u51fd\u6570\u3002 header \u4e3a\u57fa\u7c7b\u6307\u9488,\u5176\u4ed6\u6d88\u606f\u4e3a\u5176\u6d3e\u751f\u7c7b \u6d3e\u751f\u7c7b\u6307\u9488\u53ef\u4ee5\u8d4b\u4e88\u57fa\u7c7b\u6307\u9488\uff0c\u5982\u53d1\u9001\u6570\u636e\u7684 int SendData(DataHeadr *header) \u57fa\u7c7b\u6307\u9488\u8d4b\u4e88\u6d3e\u751f\u7c7b\u6307\u9488\u8981\u5f3a\u5236\u8f6c\u6362\uff0c\u5982\u4e0b\u9762\u63a5\u6536\u6570\u636e\u7684 Login* login = (Login*)header; 1\uff0c\u76f4\u63a5\u7528\u57fa\u7c7b\u6307\u9488\u5f15\u7528\u57fa\u7c7b\u5bf9\u8c61 2\uff0c\u76f4\u63a5\u7528\u6d3e\u751f\u7c7b\u6307\u9488\u5f15\u7528\u6d3e\u751f\u7c7b\u5bf9\u8c61 3\uff0c\u7528\u57fa\u7c7b\u6307\u9488\u5f15\u7528\u4e00\u4e2a\u6d3e\u751f\u7c7b\u5bf9\u8c61\uff0c\u7531\u4e8e\u6d3e\u751f\u7c7b\u5bf9\u8c61\u4e5f\u662f\u57fa\u7c7b\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u8fd9\u79cd\u5f15\u7528\u662f\u5b89\u5168\u7684\uff0c \u4f46\u662f\u53ea\u80fd\u5f15\u7528\u57fa\u7c7b\u6210\u5458\u3002\u82e5\u8bd5\u56fe\u901a\u8fc7\u57fa\u7c7b\u6307\u9488\u5f15\u7528\u90a3\u4e9b\u53ea\u5728\u6d3e\u751f\u7c7b\u4e2d\u624d\u6709\u7684\u6210\u5458\uff0c\u7f16\u8bd1\u5668\u4f1a\u62a5\u544a\u8bed\u6cd5\u9519\u8bef\u3002\uff08\u89e3\u51b3\u8be5\u95ee\u9898\u7684\u7b54\u6848\u662f\u865a\u51fd\u6570\u548c\u591a\u6001\u6027\uff09 4\uff0c\u7528\u6d3e\u751f\u7c7b\u6307\u9488\u5f15\u7528\u57fa\u7c7b\u7684\u5bf9\u8c61\u3002\u8fd9\u79cd\u5f15\u7528\u65b9\u5f0f\u4f1a\u5bfc\u81f4\u8bed\u6cd5\u9519\u8bef\u3002\u6d3e\u751f\u7c7b\u6307\u9488\u5fc5\u987b\u5148\u5f3a\u5236\u8f6c\u6362\u4e3a\u57fa\u7c7b\u6307\u9488\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u4e0d\u5b89\u5168\u7684\u3002 \u4f20\u5165\u53c2\u6570\u4e3a\u6d88\u606f\u5934\u6307\u9488\uff0c\u5176\u4e2d\u5b50\u6307\u9488\u4e5f\u53ef\u4ee5\u4f20\u5165\uff0c\u5f3a\u5236\u8f6c\u6362\u4e3a\u5e38\u5b57\u7b26\u6307\u9488\u5373\u53ef 1 2 3 4 5 6 7 8 int SendData ( DataHeader * header ) { if ( isRun () && header ) { return send ( _sock , ( const char * ) header , header -> dataLength , 0 ); } return SOCKET_ERROR ; } 3.1.5 \u63a5\u6536\u6570\u636e \u00b6 \u5148\u63a5\u6536\u6d88\u606f\u5934\uff0c\u518d\u63a5\u6536\u6d88\u606f\u4f53\uff0c\u5b57\u7b26\u6570\u7ec4\u6307\u9488\u4e0e\u6d88\u606f\u5934\u6307\u9488\u53ef\u8f6c\u6362\uff0c\u6d88\u606f\u5934\u6307\u9488\u53ef\u8d4b\u4e88\u5b50\u6307\u9488 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int Recv () { // \u7f13\u51b2\u533a char szRecv [ 1024 ] = {}; int nlen = recv ( _sock , szRecv , sizeof ( DataHeader ), 0 ); DataHeader * header = ( DataHeader * ) szRecv ; if ( nlen <= 0 ) { printf ( \"\u670d\u52a1\u5668\u5173\u95ed \\n \" ); return -1 ; } recv ( _sock , szRecv + sizeof ( DataHeader ), header -> dataLength - sizeof ( DataHeader ), 0 ); OnNetMsg ( header ); return 0 ; } 3.1.6 \u54cd\u5e94\u6570\u636e(\u4e3b\u8981\u66f4\u6539\u6a21\u5757) \u00b6 \u5f53\u547d\u4ee4\u4e0d\u540c\u53ea\u9700\u66f4\u6539\u6b64\u6a21\u5757\u5373\u53ef\uff0c\u5b9a\u4e49\u6210 vitual \u5373\u53ef\u4f7f\u5f97\u5176\u5b50\u7c7b\u4fee\u6539\u6b64\u6a21\u5757 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 virtual void OnNetMsg ( DataHeader * header ) { switch ( header -> cmd ) { case CMD_LOGIN_RESULT : { LoginResult * loginret = ( LoginResult * ) header ; printf ( \"\u6536\u5230\u670d\u52a1\u5668\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , \u5e94\u7b54\uff1a %d \\n \" , loginret -> cmd , loginret -> dataLength , loginret -> result ); } break ; case CMD_LOGOUT_RESULT : { LogOutResult * logoutret = ( LogOutResult * ) header ; printf ( \"\u6536\u5230\u670d\u52a1\u5668\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , \u5e94\u7b54\uff1a %d \\n \" , logoutret -> cmd , logoutret -> dataLength , logoutret -> result ); } break ; case CMD_NEW_USER_JOIN : { NewUserJoin * userjoin = ( NewUserJoin * ) header ; printf ( \"\u6536\u5230\u670d\u52a1\u5668\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , \u5e94\u7b54\uff1a \u5ba2\u6237\u7aef%d\u5df2\u52a0\u5165 \\n \" , userjoin -> cmd , userjoin -> dataLength , userjoin -> nsock ); } break ; default : DataHeader header = { 0 , CMD_ERROR }; send ( _sock , ( const char * ) & header , sizeof ( header ), 0 ); break ; } } 3.1.7 \u63a2\u8be2\u7f51\u7edc\u6d88\u606f(select \u6a21\u578b) \u00b6 \u5728 select \u6a21\u578b\u4e0b\uff0c\u5f53\u524d\u7684 socket \u52a0\u5165\u6587\u4ef6\u63cf\u8ff0\u7b26\u96c6\u5408 fdRead \u4e2d \u5f53 time == NULL \uff0c \u5219\u4e3a\u963b\u585e\u5f0f\u7b49\u5f85\uff0c\u5f53 fdRead \u6709\u53ef\u8bfb\u64cd\u4f5c(\u5373\u6536\u5230\u670d\u52a1\u7aef\u6d88\u606f)\u65f6\u624d\u4f1a\u8fd4\u56de\u51fd\u6570 \u5f53 time \u5982\u4e0b\u8bbe\u7f6e\u65f6\uff0c\u5219\u8d85\u65f6\u5373\u8fd4\u56de\uff0c\u4e0d\u4f1a\u963b\u585e\u5ba2\u6237\u7aef\u5904\u7406\u5176\u4ed6\u4e1a\u52a1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 bool OnRun () { if ( isRun ()) { fd_set fdRead ; FD_ZERO ( & fdRead ); FD_SET ( _sock , & fdRead ); timeval t = { 1 , 0 }; int ret = select ( _sock + 1 , & fdRead , 0 , 0 , & t ); if ( ret == -1 ) { printf ( \"<socket = %d>select\u5931\u8d25 \\n \" , _sock ); return false ; } if ( FD_ISSET ( _sock , & fdRead )) { FD_CLR ( _sock , & fdRead ); if ( -1 == Recv ()) { printf ( \"<socket = %d>\u4efb\u52a1\u7ed3\u675f \\n \" , _sock ); return false ; } } return true ; //printf(\"\u7a7a\u95f2\u65f6\u95f4\u5904\u7406\u5176\u4ed6\u4e1a\u52a1\\n\"); } return false ; } 3.1.8 \u5224\u65ad\u662f\u5426\u5de5\u4f5c \u00b6 1 2 3 4 bool isRun () { return _sock != INVALID_SOCKET ; } 3.1.9 \u5173\u95ed socket \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 void Close () { if ( _sock != INVALID_SOCKET ) { #ifdef _WIN32 closesocket ( _sock ); WSACleanup (); #else close ( _sock ); #endif _sock = INVALID_SOCKET ; } } 3.2 \u4e3b\u51fd\u6570(Client.cpp) \u00b6 \u4e3a\u4e86\u4fdd\u8bc1\u7528\u6237\u53ef\u4ee5\u624b\u52a8\u8f93\u5165\u547d\u4ee4\uff0c\u52a0\u5165\u4e86\u4e00\u4e2a\u8f93\u5165\u53d1\u9001\u7ebf\u7a0b\uff0c\u4e3b\u7ebf\u7a0b\u5219\u8d1f\u8d23\u63a5\u53d7\u670d\u52a1\u5668\u6570\u636e 3.2.1 \u7ebf\u7a0b\u51fd\u6570 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include \"EasyTcpClient.hpp\" #include <thread> using namespace std ; void cmdThread ( EasyTcpClient * client ) { while ( true ) { char cmdBuf [ 128 ] = {}; scanf ( \"%s\" , cmdBuf ); if ( 0 == strcmp ( cmdBuf , \"Exit\" )) { client -> Close (); break ; } else if ( 0 == strcmp ( cmdBuf , \"login\" )) { Login login ; strcpy ( login . userName , \"zizi\" ); strcpy ( login . password , \"zizi19991203\" ); client -> SendData ( & login ); } else if ( 0 == strcmp ( cmdBuf , \"logout\" )) { LogOut logout ; strcpy ( logout . userName , \"zizi\" ); client -> SendData ( & logout ); } else { printf ( \"\u4e0d\u652f\u6301\u8be5\u547d\u4ee4,\u8bf7\u91cd\u65b0\u8f93\u5165 \\n \" ); } } } 3.2.2 main \u51fd\u6570\u6d41\u7a0b \u00b6 t.detach \u662f\u7ebf\u7a0b\u5206\u79bb\u51fd\u6570,\u4f7f\u5f97\u5b50\u7ebf\u7a0b\u5728\u540e\u53f0\u8fd0\u884c t.join \u662f\u7b49\u5f85\u5b50\u7ebf\u7a0b\u8fd0\u884c\u7ed3\u675f\u624d\u80fd\u7ee7\u7eed\u4e3b\u7ebf\u7a0b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 int main () { EasyTcpClient client ; client . InitSocket (); client . Connect ( \"127.0.0.1\" , 4567 ); thread t1 ( cmdThread , & client ); t1 . detach (); \u5faa\u73af\u53d1\u9001\u547d\u4ee4\u548c\u63a5\u6536\u670d\u52a1\u5668\u4fe1\u606f while ( client . isRun ()) { client . OnRun (); } client . Close (); //getchar(); return 0 ; } 4 \u670d\u52a1\u7aef \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #ifndef _EasyTcpServer_hpp_ #define _EasyTcpServer_hpp_ #define _WINSOCK_DEPRECATED_NO_WARNINGS #ifdef _WIN32 #define WIN32_LEAN_AND_MEAN #include <windows.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 #else #include <unistd.h> // unix std #include <arpa/inet.h> #include <string.h> #define SOCKET int // Linux\u4e0b\u6ca1\u6709\u5305\u88c5SOCKET,\u9700\u8981\u4ecewindows\u67e5\u770b\u91cd\u65b0\u8fdb\u884c\u5b8f\u5b9a\u4e49 #define INVALID_SOCKET (SOCKET)(~0) #define SOCKET_ERROR (-1) #endif #include <cstdio> #include <vector> #include \"MesaageHeader.hpp\" using namespace std ; ... #endif 4.1 class \u5b9a\u4e49(EasyTcpServer.hpp) \u00b6 4.1.1 \u6210\u5458\u53d8\u91cf \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class EasyTcpServer { SOCKET _sock ; vector < SOCKET > g_clients ; public : EasyTcpServer () { _sock = INVALID_SOCKET ; g_clients . clear (); } virtual ~ EasyTcpServer () { Close (); } // \u4ee5\u4e0b\u7686\u4e3a\u6b64\u7c7b\u7684\u6210\u5458\u51fd\u6570 } 4.1.2 \u5efa\u7acb socket \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 SOCKET InitSocket () { // \u542f\u52a8 WinSock 2.x\u73af\u5883 #ifdef _WIN32 WORD ver = MAKEWORD ( 2 , 2 ); // \u7248\u672c\u53f7 WSADATA dat ; // \u63a5\u6536winsows socket\u5b9e\u73b0\u7ec6\u8282\u7684\u7ed3\u6784\u4f53 WSAStartup ( ver , & dat ); // \u7ed1\u5b9asocket\u5e93,\u521d\u59cb\u5316\u94fe\u63a5\u5e93 #endif if ( _sock != INVALID_SOCKET ) { printf ( \"<socket = %d>\u5173\u95ed\u65e7\u8fde\u63a5 \\n \" , _sock ); Close (); } _sock = socket ( AF_INET , SOCK_STREAM , IPPROTO_TCP ); // \u540c\u670d\u52a1\u7aef\u4e0d\u540c\uff0c\u8fd9\u91cc\u4e0d\u7528\u6307\u660eTCP\u534f\u8bae if ( INVALID_SOCKET == _sock ) { printf ( \"\u670d\u52a1\u5668\u521b\u5efasocket\u5931\u8d25 \\n \" ); } else { printf ( \"\u670d\u52a1\u5668\u521b\u5efasocket\u6210\u529f \\n \" ); } return _sock ; } 4.1.3 \u7ed1\u5b9a\u7aef\u53e3\u548c ip \u5730\u5740 \u00b6 IP \u5730\u5740\u53ef\u624b\u52a8\u8f93\u5165\u4e5f\u53ef\u81ea\u52a8\u9009\u62e9\u4efb\u610f 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 int Bind ( const char * ip , unsigned short port ) { sockaddr_in _sin = {}; // \u4e0d\u76f4\u63a5\u7528sockaddr\u7c7b\u578b\u662f\u56e0\u4e3asockaddr_in\u7c7b\u578b\u66f4\u9002\u5408\u586b\u5199 _sin . sin_family = AF_INET ; _sin . sin_port = htons ( port ); // host to net unsigned short\u4e3b\u673a\u7c7b\u578b\u548c\u7f51\u7edc\u7c7b\u578b\u7684short\u7c7b\u578b\u4e0d\u540c //_sin.sin_addr.S_un.S_addr = INADDR_ANY; // inet_addr(\"127.0.0.1\"),\u4efb\u610fip\u5730\u5740 #ifdef _WIN32 if ( ip ) { _sin . sin_addr . S_un . S_addr = inet_addr ( ip ); // \u8fd9\u91cc\u66ff\u6362\u76f8\u5e94\u7684ip\u5730\u5740 } else { _sin . sin_addr . S_un . S_addr = INADDR_ANY ; } #else if ( ip ) { _sin . sin_addr . s_addr = inet_addr ( ip ); } else { _sin . sin_addr . s_addr = INADDR_ANY ; } #endif int ret = bind ( _sock , ( sockaddr * ) & _sin , sizeof ( _sin )); if ( ret == SOCKET_ERROR ) { printf ( \"\u670d\u52a1\u5668\u7ed1\u5b9a\u7aef\u53e3<%d>\u5931\u8d25 \\n \" , port ); } else { printf ( \"\u670d\u52a1\u5668\u7ed1\u5b9a\u7aef\u53e3<%d>\u6210\u529f \\n \" , port ); } return ret ; } 4.1.4 \u7aef\u53e3\u76d1\u542c listen \u00b6 \u5bf9\u4e8e listen(int fd,int backlog) \u51fd\u6570\uff0c\u5185\u6838\u4f1a\u4e3a\u4e00\u4e2a\u76d1\u542c\u5957\u63a5\u5b57\u7ef4\u62a4\u4e24\u4e2a\u961f\u5217 \u5f53\u6709 TCP \u8bf7\u6c42\u5230\u6765\u65f6,\u5373 3 \u6b21\u63e1\u624b\u4e2d\u7684 syn \u5206\u8282\u53d1\u9001\u6765\u65f6,\u4f1a\u5728 \u672a\u5b8c\u6210\u961f\u5217 \u4e2d\u589e\u52a0\u4e00\u9879 3 \u6b21\u63e1\u624b\u5b8c\u6210\u65f6, \u672a\u5b8c\u6210\u961f\u5217 \u4e2d\u7684\u9879\u5c31\u79fb\u52a8\u5230 \u5df2\u5b8c\u6210\u961f\u5217 \u91cc,accept() \u51fd\u6570\u4f1a\u4ece \u5df2\u8fde\u63a5\u961f\u5217 \u91cc\u53d6\u8d70\u5df2\u5b8c\u6210\u8fde\u63a5. backlog \u53c2\u6570\u5c31\u662f\u63a7\u5236 \u5df2\u8fde\u63a5\u961f\u5217 \u91cc\u7b49\u5f85 accept() \u53d6\u8d70\u7684\u8fde\u63a5\u7684\u6700\u5927\u6570\u76ee \u6ce8\u610f\u4e00\u70b9\uff0cbacklog \u4e0e\u8fd9\u4e2a\u5df2\u6392\u961f\u8fde\u63a5\u7684\u6700\u5927\u6570\u76ee\u672a\u5fc5\u662f\u5b8c\u5168\u76f8\u7b49\u7684,\u4e0d\u540c\u7684\u7cfb\u7edf\u7684\u5b9e\u73b0\u53ef\u80fd\u4e0d\u540c\uff0c\u6bd4\u5982 backlog = 1\uff0c\u7cfb\u7edf\u5141\u8bb8\u7684\u5b9e\u9645\u4e00\u6392\u961f\u6570\u76ee\u53ef\u80fd\u4e3a 2 1 2 3 4 5 6 7 8 9 10 11 12 13 int Listen ( int n ) { int ret = listen ( _sock , n ); if ( SOCKET_ERROR == ret ) // \u6700\u591a\u9700\u8981\u7b49\u5f85\u591a\u5c11\u4eba\u8fdb\u884c\u8fde\u63a5 { printf ( \"<socket = %d>\u670d\u52a1\u5668\u76d1\u542c\u5931\u8d25 \\n \" , _sock ); } else { printf ( \"<socket = %d>\u670d\u52a1\u5668\u76d1\u542c\u6210\u529f \\n \" , _sock ); } return ret ; } 4.1.5 \u53d1\u9001\u6570\u636e \u00b6 4.1.5.1 \u5355\u53d1 \u00b6 1 2 3 4 5 6 7 8 int SendData ( DataHeader * header , SOCKET cSock ) { if ( isRun () && header ) { return send ( cSock , ( const char * ) header , header -> dataLength , 0 ); } return SOCKET_ERROR ; } 4.1.5.2 \u7fa4\u53d1 \u00b6 1 2 3 4 5 6 7 8 9 10 void SendDataToAll ( DataHeader * header ) { if ( isRun () && header ) { for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { SendData ( header , g_clients [ n ]); } } } 4.1.6 \u63a5\u53d7\u65b0\u5ba2\u6237\u7aef\u52a0\u5165 accept \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 SOCKET Accept () { sockaddr_in clientAddr = {}; int nAddrlen = sizeof ( clientAddr ); SOCKET cSock = INVALID_SOCKET ; cSock = accept ( _sock , ( sockaddr * ) & clientAddr , & nAddrlen ); if ( INVALID_SOCKET == cSock ) { printf ( \"\u670d\u52a1\u5668<socket = %d>\u63a5\u53d7\u5230\u65e0\u6548\u5ba2\u6237\u7aef... \\n \" , _sock ); } else { printf ( \"\u670d\u52a1\u5668<socket = %d>\u6536\u5230\u65b0\u5ba2\u6237\u7aef:\" , _sock ); printf ( \"\u5ba2\u6237\u7aefIP = %s,socket = %d \\n \" , inet_ntoa ( clientAddr . sin_addr ), ( int ) cSock ); /*for (int n = g_clients.size() - 1; n >= 0; n--) { NewUserJoin userjoin; userjoin.nsock = (int)cSock; SendData(&userjoin, g_clients[n]); }*/ NewUserJoin userjoin ; userjoin . nsock = ( int ) cSock ; SendDataToAll ( & userjoin ); g_clients . push_back ( cSock ); } return cSock ; } 4.1.7 \u63a5\u6536\u6570\u636e \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int Recv ( SOCKET cSock ) { // \u7f13\u51b2\u533a char szRecv [ 1024 ] = {}; int nlen = recv ( cSock , szRecv , sizeof ( DataHeader ), 0 ); DataHeader * header = ( DataHeader * ) szRecv ; if ( nlen <= 0 ) { printf ( \"\u5ba2\u6237\u7aef%d\u9000\u51fa \\n \" , ( int ) cSock ); return -1 ; } recv ( cSock , szRecv + sizeof ( DataHeader ), header -> dataLength - sizeof ( DataHeader ), 0 ); OnNetMsg ( header , cSock ); return 0 ; } 4.1.8 \u54cd\u5e94\u6570\u636e(\u4e3b\u8981\u66f4\u6539\u6a21\u5757) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 virtual void OnNetMsg ( DataHeader * header , SOCKET cSock ) { switch ( header -> cmd ) { case CMD_LOGIN : { Login * login = ( Login * ) header ; printf ( \"\u6536\u5230\u5ba2\u6237\u7aef%d\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , username = %s userpsw = %s \\n \" , ( int ) cSock , login -> cmd , login -> dataLength , login -> userName , login -> password ); // \u6570\u636e\u5e93\u67e5\u770b\u5bc6\u7801\u662f\u5426\u6b63\u786e LoginResult ret ; SendData ( & ret , cSock ); } break ; case CMD_LOGOUT : { LogOut * logout = ( LogOut * ) header ; printf ( \"\u6536\u5230\u5ba2\u6237\u7aef%d\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , username = %s \\n \" , ( int ) cSock , logout -> cmd , logout -> dataLength , logout -> userName ); // \u6570\u636e\u5e93\u67e5\u770b\u5bc6\u7801\u662f\u5426\u6b63\u786e LogOutResult ret ; SendData ( & ret , cSock ); } break ; default : DataHeader header = { 0 , CMD_ERROR }; SendData ( & header , cSock ); break ; } } 4.1.9 \u63a2\u8be2\u7f51\u7edc\u6d88\u606f(select \u6a21\u578b) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 bool OnRun () { if ( isRun ()) { // \u4f2f\u514b\u5229\u5957\u63a5\u5b57 BSD socket\u63cf\u8ff0\u7b26 fd_set fdRead ; // \u63cf\u8ff0\u7b26\u96c6\u5408 fd_set fdWrite ; fd_set fdExp ; FD_ZERO ( & fdRead ); FD_ZERO ( & fdWrite ); FD_ZERO ( & fdExp ); FD_SET ( _sock , & fdRead ); FD_SET ( _sock , & fdWrite ); FD_SET ( _sock , & fdExp ); for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { FD_SET ( g_clients [ n ], & fdRead ); } timeval t = { 1 , 0 }; // nfds\u662f\u4e00\u4e2a\u6574\u6570\u503c\uff0c\u6307\u4e00\u4e2afd_set\u96c6\u5408\u6240\u6709\u63cf\u8ff0\u7b26(socket)\u7684\u8303\u56f4\u800c\u975e\u6570\u91cf\uff08\u6240\u6709\u63cf\u8ff0\u7b26\u6700\u5927\u503c+1\uff09 // \u5f53 time == NULL\u65f6\uff0c\u5219select\u4f1a\u963b\u585e\u67e5\u8be2\u76f4\u5230\u6709\u6570\u636e\u53ef\u4ee5\u64cd\u4f5c,\u5426\u5219\u8d85\u65f6\u7acb\u5373\u8fd4\u56de int ret = select ( _sock + 1 , & fdRead , & fdWrite , & fdExp , & t ); if ( ret < 0 ) { printf ( \"\u670d\u52a1\u7aef<socket = %d>select\u4efb\u52a1\u5931\u8d25 \\n \" , _sock ); Close (); return false ; } if ( FD_ISSET ( _sock , & fdRead )) { FD_CLR ( _sock , & fdRead ); Accept (); } for ( int n = 0 ; n < fdRead . fd_count ; n ++ ) { if ( -1 == Recv ( fdRead . fd_array [ n ])) { auto iter = find ( g_clients . begin (), g_clients . end (), fdRead . fd_array [ n ]); // std::vector<SOCKET>::iterator if ( iter != g_clients . end ()) { g_clients . erase ( iter ); } } } return true ; } return false ; } 4.1.10 \u5224\u65ad\u662f\u5426\u5de5\u4f5c \u00b6 1 2 3 4 bool isRun () { return _sock != INVALID_SOCKET ; } 4.1.11 \u5173\u95ed socket \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 void Close () { if ( _sock != INVALID_SOCKET ) { #ifdef _WIN32 closesocket ( _sock ); for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { closesocket ( g_clients [ n ]); } WSACleanup (); #else close ( _sock ); for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { close ( g_clients [ n ]); } #endif _sock = INVALID_SOCKET ; } }; 4.2 \u4e3b\u51fd\u6570(server.cpp) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #include \"EasyTcpServer.hpp\" int main () { EasyTcpServer server ; server . InitSocket (); server . Bind ( NULL , 4567 ); server . Listen ( 5 ); while ( server . isRun ()) { server . OnRun (); //printf(\"\u7a7a\u95f2\u65f6\u95f4\u5904\u7406\u5176\u4ed6\u4efb\u52a1\\n\"); } server . Close (); return 0 ; } \u53ef\u4ee5\u6539\u8fdb\u7684\u5730\u65b9\uff1a \u53cc\u7f13\u51b2:\u5b9a\u4e49\u63a5\u53d7\u7f13\u51b2\u533a\u3001\u6d88\u606f\u7f13\u51b2\u533a\uff08\u7b2c\u4e8c\u7f13\u51b2\u533a\uff09\u4ee5\u89e3\u51b3\u7f51\u7edc\u62e5\u585e\u9020\u6210\u7684\u9488\u5bf9\u957f\u8fde\u63a5\u591a\u7ed3\u6784\u7684\u7c98\u5305\u3001\u5c11\u5305\u95ee\u9898 \u591a\u7ebf\u7a0b\uff1athread(\u7ebf\u7a0b),mutex(\u9501),atomic(\u539f\u8bed\u64cd\u4f5c) \u624b\u52a8\u4e0a\u9501\u89e3\u9501\u4e0d\u5982\u81ea\u89e3\u9501\uff1a lock_guard<mutex> lg(m) \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4e0a\u9501\u548c\u6790\u6784\u51fd\u6570\u89e3\u9501\uff0c\u6bd4\u8f83\u5b89\u5168 \u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u578b 5 \u8de8\u5e73\u53f0\u914d\u7f6e \u00b6 5.1 windows\u7684\u914d\u7f6e \u00b6 \u5934\u6587\u4ef6\u5305\u542b\u9700\u8981\u9632\u5b8f\u91cd\u5b9a\u4e49 \u5728 windows \u5e73\u53f0\u4e0b\u9700\u8981\u589e\u52a0\u7ed1\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93\u3001\u7ed1\u5b9a socket \u5e93\u7684\u989d\u5916\u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #define WIN32_LEAN_AND_MEAN #define _WINSOCK_DEPRECATED_NO_WARNINGS #include <windows.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 int main () { #ifdef _WIN32 WORD ver = MAKEWORD ( 2 , 2 ); // \u7248\u672c\u53f7 WSADATA dat ; // \u63a5\u6536winsows socket\u5b9e\u73b0\u7ec6\u8282\u7684\u7ed3\u6784\u4f53 WSAStartup ( ver , & dat ); // \u7ed1\u5b9asocket\u5e93,\u521d\u59cb\u5316\u94fe\u63a5\u5e93 #endif /// \u5728\u6b64\u5904\u7f16\u5199\u901a\u7528\u7684 socket\u7f16\u7a0b\u4ee3\u7801 /// #ifdef _WIN32 WSACleanup (); // \u5bf9\u5e94 startup #endif return 0 ; } 5.1 Linux \u00b6 1 g++ client.cpp -std=c++11 -pthread -o client \u8de8\u5e73\u53f0\u4f7f\u7528\u4e3b\u8981\u7528\u5230\u9884\u5b9a\u4e49\u6761\u4ef6\u5b8f\uff1a \u5934\u6587\u4ef6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #ifdef _WIN32 #include <window.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 #define WIN32_LEAN_AND_MEAN #define _WINSOCK_DEPRECATED_NO_WARNINGS #else #include <unistd.h> // unix std #include <arpa/inet.h> #include <string.h> #define SOCKET int // Linux\u4e0b\u6ca1\u6709\u5305\u88c5SOCKET,\u9700\u8981\u4ecewindows\u67e5\u770b\u91cd\u65b0\u8fdb\u884c\u5b8f\u5b9a\u4e49 #define INVALID_SOCKET (SOCKET)(~0) #define SOCKET_ERROR (-1) #endif \u67e5\u770bip\u5730\u5740\u5e76\u66f4\u6362 Windows: ipconfig Linux/Mac: ifconfig 1 2 3 4 5 6 7 8 9 // 2.\u8fde\u63a5\u670d\u52a1\u5668connect sockaddr_in _sin = {}; _sin . sin_family = AF_INET ; _sin . sin_port = htons ( 4567 ); #ifdef _WIN32 _sin . sin_addr . S_un . S_addr = inet_addr ( \"127.0.0.1\" ); // \u8fd9\u91cc\u66ff\u6362\u76f8\u5e94\u7684ip\u5730\u5740 #else _sin . sin_addr . s_addr = inet_addr ( \"127.0.0.1\" ); #endif \u5173\u95ed\u5957\u63a5\u5b57\uff1a 1 2 3 4 5 #ifdef _WIN32 closesocket ( _sock ); #else close ( _sock ); #endif 5.2 Mac OS(Xcode) \u00b6 \u76f8\u5e94\u7684 windows \u6a21\u5757\u540c\u6837\u5904\u7406 \u6240\u6709\u51fd\u6570\u5fc5\u987b\u6709\u8fd4\u56de\u503c\uff08\u6709\u4e00\u4e9b g++ \u53ef\u4ee5\u81ea\u52a8\u5b8c\u6210\u7684\u6b65\u9aa4\u5728 Mac \u9700\u8981\u624b\u52a8\u6dfb\u52a0\u4ee3\u7801\uff09 \u5bf9\u4e8e\u62a5\u9519\u7684\u51fd\u6570\u8c03\u7528\u67e5\u770b\u51fd\u6570\u7684\u5b9a\u4e49\uff0c\u89c2\u5bdf\u5176\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6839\u636e\u76f8\u5e94\u7684\u9700\u6c42\u8fdb\u884c\u6570\u636e\u5f3a\u5236\u8f6c\u6362\u6216\u91cd\u5199\u51fd\u6570 \u4f8b\u5982\uff1a \u5728 Mac \u4e2d\uff0c fd_set \u6ca1\u6709 fd_count ,\u5219\u4ee3\u7801\u53ef\u505a\u5982\u4e0b\u4fee\u6539 oringinal code: 1 2 3 4 5 6 7 8 9 10 11 for ( int n = 0 ; n < fdRead . fd_count ; n ++ ) { if ( -1 == proccesor ( fdRead . fd_array [ n ])) { auto iter = find ( g_clients . begin (), g_clients . end (), fdRead . fd_array [ n ]); // std::vector<SOCKET>::iterator if ( iter != g_clients . end ()) { g_clients . erase ( iter ); } } } modified code: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 for ( int n = ( int ) g_clients . size () - 1 ; n >= 0 ; n -- ) { if ( FD_ISSET ( g_clients [ n ], & fdRead )) { if ( -1 == processor ( g_clients [ n ])) { auto iter = g_clients . begin () + n ; if ( iter != g_clients . end ()) { g . clients . erase ( iter ); } } } } \u6ce8\u610f \uff1a select \u51fd\u6570\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u540c\uff0c\u4e3b\u8981\u9488\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u4fee\u6539 windows \u4e0b\u4f1a\u81ea\u52a8\u4fee\u6b63\uff0c\u4f46 Linux \u548c Mac \u9700\u8981\u624b\u52a8\u8f93\u5165\u6b63\u786e\u503c:\u6587\u4ef6\u63cf\u8ff0\u7b26\u6700\u5927\u503c + 1 , \u6240\u4ee5\u7edf\u4e00\u7528\u5982\u4e0b\u4ee3\u7801\uff1a client.cpp: 1 select ( _sock + 1 , & fdRead , & fdWrite , & fdExp , & t ); server.cpp: 1 2 3 4 5 6 7 8 9 10 11 SOCKET maxSock = _sock ; for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { FD_SET ( g_clients [ n ], & fdRead ); if ( maxSock < g_clients [ n ]) { maxSock = g_clients [ n ]; } } select ( maxSock + 1 , & fdRead , & fdWrite , & fdExp , & t );","title":"socket\u57fa\u7840"},{"location":"Socket/socket/#socket","text":"","title":"Socket\u7f16\u7a0b"},{"location":"Socket/socket/#0-tcp","text":"","title":"0 TCP \u539f\u7406\uff08\u4e09\u6b21\u63e1\u624b\u4e0e\u56db\u6b21\u6325\u624b\uff09"},{"location":"Socket/socket/#01-tcp","text":"","title":"0.1 TCP \u62a5\u6587\u683c\u5f0f"},{"location":"Socket/socket/#02","text":"\u7b2c\u4e00\u6b21\u63e1\u624b\uff1a\u5ba2\u6237\u7aef\u8981\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42\uff0c\u9996\u5148\u5ba2\u6237\u7aef\u968f\u673a\u751f\u6210\u4e00\u4e2a\u8d77\u59cb\u5e8f\u5217\u53f7ISN(\u6bd4\u5982\u662f100)\uff0c\u90a3\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u9001\u7684\u62a5\u6587\u6bb5\u5305\u542bSYN\u6807\u5fd7\u4f4d(\u4e5f\u5c31\u662fSYN=1)\uff0c\u5e8f\u5217\u53f7seq=100\u3002 \u7b2c\u4e8c\u6b21\u63e1\u624b\uff1a\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684\u62a5\u6587\u540e\uff0c\u53d1\u73b0SYN=1\uff0c\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a\u8fde\u63a5\u8bf7\u6c42\uff0c\u4e8e\u662f\u5c06\u5ba2\u6237\u7aef\u7684\u8d77\u59cb\u5e8f\u5217\u53f7100\u5b58\u8d77\u6765\uff0c\u5e76\u4e14\u968f\u673a\u751f\u6210\u4e00\u4e2a\u670d\u52a1\u7aef\u7684\u8d77\u59cb\u5e8f\u5217\u53f7(\u6bd4\u5982\u662f300)\u3002\u7136\u540e\u7ed9\u5ba2\u6237\u7aef\u56de\u590d\u4e00\u6bb5\u62a5\u6587\uff0c\u56de\u590d\u62a5\u6587\u5305\u542bSYN\u548cACK\u6807\u5fd7(\u4e5f\u5c31\u662fSYN=1,ACK=1)\u3001\u5e8f\u5217\u53f7seq=300\u3001\u786e\u8ba4\u53f7ack=101(\u5ba2\u6237\u7aef\u53d1\u8fc7\u6765\u7684\u5e8f\u5217\u53f7+1)\u3002 \u7b2c\u4e09\u6b21\u63e1\u624b\uff1a\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u7aef\u7684\u56de\u590d\u540e\u53d1\u73b0ACK=1\u5e76\u4e14ack=101,\u4e8e\u662f\u77e5\u9053\u670d\u52a1\u7aef\u5df2\u7ecf\u6536\u5230\u4e86\u5e8f\u5217\u53f7\u4e3a100\u7684\u90a3\u6bb5\u62a5\u6587\uff1b\u540c\u65f6\u53d1\u73b0SYN=1\uff0c\u77e5\u9053\u4e86\u670d\u52a1\u7aef\u540c\u610f\u4e86\u8fd9\u6b21\u8fde\u63a5\uff0c\u4e8e\u662f\u5c31\u5c06\u670d\u52a1\u7aef\u7684\u5e8f\u5217\u53f7300\u7ed9\u5b58\u4e0b\u6765\u3002\u7136\u540e\u5ba2\u6237\u7aef\u518d\u56de\u590d\u4e00\u6bb5\u62a5\u6587\u7ed9\u670d\u52a1\u7aef\uff0c\u62a5\u6587\u5305\u542bACK\u6807\u5fd7\u4f4d(ACK=1)\u3001ack=301(\u670d\u52a1\u7aef\u5e8f\u5217\u53f7+1)\u3001seq=101(\u7b2c\u4e00\u6b21\u63e1\u624b\u65f6\u53d1\u9001\u62a5\u6587\u662f\u5360\u636e\u4e00\u4e2a\u5e8f\u5217\u53f7\u7684\uff0c\u6240\u4ee5\u8fd9\u6b21seq\u5c31\u4ece101\u5f00\u59cb\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e0d\u643a\u5e26\u6570\u636e\u7684ACK\u62a5\u6587\u662f\u4e0d\u5360\u636e\u5e8f\u5217\u53f7\u7684\uff0c\u6240\u4ee5\u540e\u9762\u7b2c\u4e00\u6b21\u6b63\u5f0f\u53d1\u9001\u6570\u636e\u65f6seq\u8fd8\u662f101)\u3002\u5f53\u670d\u52a1\u7aef\u6536\u5230\u62a5\u6587\u540e\u53d1\u73b0ACK=1\u5e76\u4e14ack=301\uff0c\u5c31\u77e5\u9053\u5ba2\u6237\u7aef\u6536\u5230\u5e8f\u5217\u53f7\u4e3a300\u7684\u62a5\u6587\u4e86\uff0c\u5c31\u8fd9\u6837\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u901a\u8fc7TCP\u5efa\u7acb\u4e86\u8fde\u63a5\u3002","title":"0.2 \u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5"},{"location":"Socket/socket/#03","text":"\u7b2c\u4e00\u6b21\u6325\u624b\uff1a\u5f53\u5ba2\u6237\u7aef\u7684\u6570\u636e\u90fd\u4f20\u8f93\u5b8c\u6210\u540e\uff0c\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u51fa\u8fde\u63a5\u91ca\u653e\u62a5\u6587(\u5f53\u7136\u6570\u636e\u6ca1\u53d1\u5b8c\u65f6\u4e5f\u53ef\u4ee5\u53d1\u9001\u8fde\u63a5\u91ca\u653e\u62a5\u6587\u5e76\u505c\u6b62\u53d1\u9001\u6570\u636e)\uff0c\u91ca\u653e\u8fde\u63a5\u62a5\u6587\u5305\u542bFIN\u6807\u5fd7\u4f4d(FIN=1)\u3001\u5e8f\u5217\u53f7seq=1101(100+1+1000\uff0c\u5176\u4e2d\u76841\u662f\u5efa\u7acb\u8fde\u63a5\u65f6\u5360\u7684\u4e00\u4e2a\u5e8f\u5217\u53f7)\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u5ba2\u6237\u7aef\u53d1\u51faFIN\u62a5\u6587\u6bb5\u540e\u53ea\u662f\u4e0d\u80fd\u53d1\u6570\u636e\u4e86\uff0c\u4f46\u662f\u8fd8\u53ef\u4ee5\u6b63\u5e38\u6536\u6570\u636e\uff1b\u53e6\u5916FIN\u62a5\u6587\u6bb5\u5373\u4f7f\u4e0d\u643a\u5e26\u6570\u636e\u4e5f\u8981\u5360\u636e\u4e00\u4e2a\u5e8f\u5217\u53f7\u3002 \u7b2c\u4e8c\u6b21\u6325\u624b\uff1a\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u7684FIN\u62a5\u6587\u540e\u7ed9\u5ba2\u6237\u7aef\u56de\u590d\u786e\u8ba4\u62a5\u6587\uff0c\u786e\u8ba4\u62a5\u6587\u5305\u542bACK\u6807\u5fd7\u4f4d(ACK=1)\u3001\u786e\u8ba4\u53f7ack=1102(\u5ba2\u6237\u7aefFIN\u62a5\u6587\u5e8f\u5217\u53f71101+1)\u3001\u5e8f\u5217\u53f7seq=2300(300+2000)\u3002\u6b64\u65f6\u670d\u52a1\u7aef\u5904\u4e8e\u5173\u95ed\u7b49\u5f85\u72b6\u6001\uff0c\u800c\u4e0d\u662f\u7acb\u9a6c\u7ed9\u5ba2\u6237\u7aef\u53d1FIN\u62a5\u6587\uff0c\u8fd9\u4e2a\u72b6\u6001\u8fd8\u8981\u6301\u7eed\u4e00\u6bb5\u65f6\u95f4\uff0c\u56e0\u4e3a\u670d\u52a1\u7aef\u53ef\u80fd\u8fd8\u6709\u6570\u636e\u6ca1\u53d1\u5b8c\u3002 \u7b2c\u4e09\u6b21\u6325\u624b\uff1a\u670d\u52a1\u7aef\u5c06\u6700\u540e\u6570\u636e(\u6bd4\u598250\u4e2a\u5b57\u8282)\u53d1\u9001\u5b8c\u6bd5\u540e\u5c31\u5411\u5ba2\u6237\u7aef\u53d1\u51fa\u8fde\u63a5\u91ca\u653e\u62a5\u6587\uff0c\u62a5\u6587\u5305\u542bFIN\u548cACK\u6807\u5fd7\u4f4d(FIN=1,ACK=1)\u3001\u786e\u8ba4\u53f7\u548c\u7b2c\u4e8c\u6b21\u6325\u624b\u4e00\u6837ack=1102\u3001\u5e8f\u5217\u53f7seq=2350(2300+50)\u3002 \u7b2c\u56db\u6b21\u6325\u624b\uff1a\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u7aef\u53d1\u7684FIN\u62a5\u6587\u540e\uff0c\u5411\u670d\u52a1\u7aef\u53d1\u51fa\u786e\u8ba4\u62a5\u6587\uff0c\u786e\u8ba4\u62a5\u6587\u5305\u542bACK\u6807\u5fd7\u4f4d(ACK=1)\u3001\u786e\u8ba4\u53f7ack=2351\u3001\u5e8f\u5217\u53f7seq=1102\u3002\u6ce8\u610f\u5ba2\u6237\u7aef\u53d1\u51fa\u786e\u8ba4\u62a5\u6587\u540e\u4e0d\u662f\u7acb\u9a6c\u91ca\u653eTCP\u8fde\u63a5\uff0c\u800c\u662f\u8981\u7ecf\u8fc72MSL(\u6700\u957f\u62a5\u6587\u6bb5\u5bff\u547d\u76842\u500d\u65f6\u957f)\u540e\u624d\u91ca\u653eTCP\u8fde\u63a5\u3002\u800c\u670d\u52a1\u7aef\u4e00\u65e6\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u786e\u8ba4\u62a5\u6587\u5c31\u4f1a\u7acb\u9a6c\u91ca\u653eTCP\u8fde\u63a5\uff0c\u6240\u4ee5\u670d\u52a1\u7aef\u7ed3\u675fTCP\u8fde\u63a5\u7684\u65f6\u95f4\u8981\u6bd4\u5ba2\u6237\u7aef\u65e9\u4e00\u4e9b\u3002","title":"0.3 \u56db\u6b21\u6325\u624b\u5173\u95ed\u8fde\u63a5\uff1a"},{"location":"Socket/socket/#1","text":"","title":"1 \u5de5\u4f5c\u6d41\u7a0b"},{"location":"Socket/socket/#11","text":"\u6301\u7eed\u963b\u585e\uff1a while \u5faa\u73af\u662f\u963b\u585e\u5f0f\u901a\u4fe1\uff0c\u4e0d\u80fd\u5904\u7406\u5176\u4ed6\u4e1a\u52a1 \u89e3\u51b3\u65b9\u6848\u4e3a \u52a0\u5165 select \u52a0\u5165 epoll \u52a0\u5165\u591a\u7ebf\u7a0b","title":"1.1 \u57fa\u672c\u6d41\u7a0b"},{"location":"Socket/socket/#12","text":"","title":"1.2 \u5355\u8fdb\u7a0b\u591a\u7aef\u53e3\u6a21\u578b"},{"location":"Socket/socket/#13","text":"","title":"1.3 \u591a\u8fdb\u7a0b\u591a\u7aef\u53e3\u6a21\u578b"},{"location":"Socket/socket/#14","text":"","title":"1.4 \u591a\u7ebf\u7a0b\u5355\u7aef\u53e3\u6a21\u578b"},{"location":"Socket/socket/#15","text":"","title":"1.5 \u591a\u8fdb\u7a0b\u591a\u7ebf\u7a0b\u591a\u7aef\u53e3\u6a21\u578b"},{"location":"Socket/socket/#2-messageheaderhpp","text":"","title":"2 \u5b9a\u4e49\u6d88\u606f\u7ed3\u6784(MessageHeader.hpp)"},{"location":"Socket/socket/#21","text":"1 2 3 4 5 6 7 8 9 enum CMD { CMD_LOGIN , CMD_LOGIN_RESULT , CMD_LOGOUT , CMD_LOGOUT_RESULT , CMD_NEW_USER_JOIN , CMD_ERROR };","title":"2.1 \u5b9a\u4e49\u679a\u4e3e\u6d88\u606f\uff1a\u5982\u767b\u5f55\u3001\u767b\u5f55\u8fd4\u56de\u3001\u767b\u51fa\u3001\u767b\u51fa\u8fd4\u56de\u3001\u65b0\u7528\u6237\u52a0\u5165\u3001\u9519\u8bef\u7b49"},{"location":"Socket/socket/#22","text":"1 2 3 4 5 struct DataHeader { short dataLength ; // \u6570\u636e\u957f\u5ea6 short cmd ; // \u547d\u4ee4 };","title":"2.2 \u5b9a\u4e49\u6d88\u606f\u5934/\u62a5\u6587\u5934\uff08\u53ef\u5305\u542b\u547d\u4ee4\u548c\u6570\u636e\u957f\u5ea6\uff09"},{"location":"Socket/socket/#23","text":"\u5728\u6784\u9020\u51fd\u6570\u79cd\u4fbf\u521d\u59cb\u5316\u6d88\u606f\u5934\u7684\u547d\u4ee4\u548c\u957f\u5ea6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 struct Login : public DataHeader { Login () { dataLength = sizeof ( Login ); cmd = CMD_LOGIN ; } char userName [ 32 ]; char password [ 32 ]; }; struct LoginResult : public DataHeader { LoginResult () { dataLength = sizeof ( LoginResult ); cmd = CMD_LOGIN_RESULT ; } int result = 0 ; }; struct LogOut : public DataHeader { LogOut () { dataLength = sizeof ( LogOut ); cmd = CMD_LOGOUT ; } char userName [ 32 ]; }; struct LogOutResult : public DataHeader { LogOutResult () { dataLength = sizeof ( LogOutResult ); cmd = CMD_LOGOUT_RESULT ; } int result = 0 ; }; struct NewUserJoin : public DataHeader { NewUserJoin () { dataLength = sizeof ( NewUserJoin ); cmd = CMD_NEW_USER_JOIN ; } int nsock = 0 ; };","title":"2.3 \u7ee7\u627f\u6d88\u606f\u5934\u5b9a\u4e49\u5404\u79cd\u6d88\u606f\u4f53"},{"location":"Socket/socket/#3","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #ifndef _EasyTcpClient_hpp_ #define _EasyTcpClient_hpp_ #define _WINSOCK_DEPRECATED_NO_WARNINGS #ifdef _WIN32 #define WIN32_LEAN_AND_MEAN #include <windows.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 #else #include <unistd.h> // unix std #include <arpa/inet.h> #include <string.h> #define SOCKET int // Linux\u4e0b\u6ca1\u6709\u5305\u88c5SOCKET,\u9700\u8981\u4ecewindows\u67e5\u770b\u91cd\u65b0\u8fdb\u884c\u5b8f\u5b9a\u4e49 #define INVALID_SOCKET (SOCKET)(~0) #define SOCKET_ERROR (-1) #endif #include <cstdio> #include \"MessageHeader.hpp\" ... #endif","title":"3 \u5ba2\u6237\u7aef"},{"location":"Socket/socket/#31-class-easytcpclienthpp","text":"","title":"3.1 class \u5b9a\u4e49(EasyTcpClient.hpp)"},{"location":"Socket/socket/#311","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class EasyTcpClient { SOCKET _sock ; public : EasyTcpClient () { _sock = INVALID_SOCKET ; } // \u865a\u6790\u6784\u51fd\u6570 virtual ~ EasyTcpClient () { Close (); } // \u4ee5\u4e0b\u7686\u4e3a\u6b64\u7c7b\u7684\u6210\u5458\u51fd\u6570 } \u865a\u6790\u6784\u51fd\u6570\u7684\u4f5c\u7528\uff1a\u9632\u6b62\u5185\u5b58\u6cc4\u9732 \u5982\u679c\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u4e0d\u52a0 virtual \u5173\u952e\u5b57 \u5f53\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u4e0d\u58f0\u660e\u6210\u865a\u6790\u6784\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5f53\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\uff0c\u7236\u7c7b\u7684\u6307\u9488\u6307\u5411\u5b50\u7c7b\u65f6\uff0c delete \u6389\u7236\u7c7b\u7684\u6307\u9488\uff0c\u53ea\u8c03\u52a8\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\uff0c\u800c\u4e0d\u8c03\u52a8\u5b50\u7c7b\u7684\u6790\u6784\u51fd\u6570\u3002 \u5982\u679c\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u52a0 virtual \u5173\u952e\u5b57 \u5f53\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u58f0\u660e\u6210\u865a\u6790\u6784\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5f53\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\uff0c\u7236\u7c7b\u7684\u6307\u9488\u6307\u5411\u5b50\u7c7b\u65f6\uff0c delete \u6389\u7236\u7c7b\u7684\u6307\u9488\uff0c \u5148\u8c03\u52a8\u5b50\u7c7b\u7684\u6790\u6784\u51fd\u6570\uff0c\u518d\u8c03\u52a8\u7236\u7c7b\u7684\u6790\u6784\u51fd\u6570\u3002","title":"3.1.1 \u6210\u5458\u53d8\u91cf"},{"location":"Socket/socket/#312-socket","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 void InitSocket () { // \u542f\u52a8 WinSock 2.x\u73af\u5883 #ifdef _WIN32 WORD ver = MAKEWORD ( 2 , 2 ); // \u7248\u672c\u53f7 WSADATA dat ; // \u63a5\u6536winsows socket\u5b9e\u73b0\u7ec6\u8282\u7684\u7ed3\u6784\u4f53 WSAStartup ( ver , & dat ); // \u7ed1\u5b9asocket\u5e93,\u521d\u59cb\u5316\u94fe\u63a5\u5e93 #endif // \u5efa\u7acb\u4e00\u4e2asocket if ( _sock != INVALID_SOCKET ) { printf ( \"<socket = %d>\u5173\u95ed\u65e7\u8fde\u63a5 \\n \" , _sock ); Close (); } _sock = socket ( AF_INET , SOCK_STREAM , IPPROTO_TCP ); // \u540c\u670d\u52a1\u7aef\u4e0d\u540c\uff0c\u8fd9\u91cc\u4e0d\u7528\u6307\u660eTCP\u534f\u8bae if ( INVALID_SOCKET == _sock ) { printf ( \"\u521b\u5efasocket\u5931\u8d25 \\n \" ); } else { printf ( \"\u521b\u5efasocket\u6210\u529f \\n \" ); } }","title":"3.1.2 \u521d\u59cb\u5316 socket"},{"location":"Socket/socket/#313-connect","text":"\u4f20\u5165\u8fde\u63a5\u7684 ip \u5730\u5740\u548c\u7aef\u53e3\u53f7 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 int Connect ( const char * ip , unsigned short port ) { if ( INVALID_SOCKET == _sock ) { InitSocket (); } sockaddr_in _sin = {}; _sin . sin_family = AF_INET ; _sin . sin_port = htons ( port ); #ifdef _WIN32 _sin . sin_addr . S_un . S_addr = inet_addr ( ip ); // \u8fd9\u91cc\u66ff\u6362\u76f8\u5e94\u7684ip\u5730\u5740 #else _sin . sin_addr . s_addr = inet_addr ( ip ); #endif int ret = connect ( _sock , ( sockaddr * ) & _sin , sizeof ( sockaddr_in )); if ( SOCKET_ERROR == ret ) { printf ( \"\u8fde\u63a5\u670d\u52a1\u5668\u5931\u8d25 \\n \" ); } else { printf ( \"\u8fde\u63a5\u670d\u52a1\u5668\u6210\u529f \\n \" ); } return ret ; }","title":"3.1.3 \u8fde\u63a5\u670d\u52a1\u5668 connect"},{"location":"Socket/socket/#314","text":"c++ \u7684\u591a\u6001\u6027\uff1a \u300c\u6d3e\u751f\u7c7b\u7684\u6307\u9488\u300d\u53ef\u4ee5\u8d4b\u7ed9\u300c\u57fa\u7c7b\u6307\u9488\u300d\uff1b \u901a\u8fc7\u57fa\u7c7b\u6307\u9488\u8c03\u7528\u57fa\u7c7b\u548c\u6d3e\u751f\u7c7b\u4e2d\u7684\u540c\u540d\u300c\u865a\u51fd\u6570\u300d\u65f6: * \u82e5\u8be5\u6307\u9488\u6307\u5411\u4e00\u4e2a\u57fa\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8c03\u7528\u662f \u57fa\u7c7b\u7684\u865a\u51fd\u6570\uff1b * \u82e5\u8be5\u6307\u9488\u6307\u5411\u4e00\u4e2a\u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8c03\u7528 \u7684\u662f\u6d3e\u751f\u7c7b\u7684\u865a\u51fd\u6570\u3002 \u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\u53ef\u4ee5\u8d4b\u7ed9\u57fa\u7c7b\u300c\u5f15\u7528\u300d \u901a\u8fc7\u57fa\u7c7b\u5f15\u7528\u8c03\u7528\u57fa\u7c7b\u548c\u6d3e\u751f\u7c7b\u4e2d\u7684\u540c\u540d\u300c\u865a\u51fd\u6570\u300d\u65f6: * \u82e5\u8be5\u5f15\u7528\u5f15\u7528\u7684\u662f\u4e00\u4e2a\u57fa\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8c03 \u7528\u662f\u57fa\u7c7b\u7684\u865a\u51fd\u6570\uff1b * \u82e5\u8be5\u5f15\u7528\u5f15\u7528\u7684\u662f\u4e00\u4e2a\u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab \u8c03\u7528\u7684\u662f\u6d3e\u751f\u7c7b\u7684\u865a\u51fd\u6570\u3002 header \u4e3a\u57fa\u7c7b\u6307\u9488,\u5176\u4ed6\u6d88\u606f\u4e3a\u5176\u6d3e\u751f\u7c7b \u6d3e\u751f\u7c7b\u6307\u9488\u53ef\u4ee5\u8d4b\u4e88\u57fa\u7c7b\u6307\u9488\uff0c\u5982\u53d1\u9001\u6570\u636e\u7684 int SendData(DataHeadr *header) \u57fa\u7c7b\u6307\u9488\u8d4b\u4e88\u6d3e\u751f\u7c7b\u6307\u9488\u8981\u5f3a\u5236\u8f6c\u6362\uff0c\u5982\u4e0b\u9762\u63a5\u6536\u6570\u636e\u7684 Login* login = (Login*)header; 1\uff0c\u76f4\u63a5\u7528\u57fa\u7c7b\u6307\u9488\u5f15\u7528\u57fa\u7c7b\u5bf9\u8c61 2\uff0c\u76f4\u63a5\u7528\u6d3e\u751f\u7c7b\u6307\u9488\u5f15\u7528\u6d3e\u751f\u7c7b\u5bf9\u8c61 3\uff0c\u7528\u57fa\u7c7b\u6307\u9488\u5f15\u7528\u4e00\u4e2a\u6d3e\u751f\u7c7b\u5bf9\u8c61\uff0c\u7531\u4e8e\u6d3e\u751f\u7c7b\u5bf9\u8c61\u4e5f\u662f\u57fa\u7c7b\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u8fd9\u79cd\u5f15\u7528\u662f\u5b89\u5168\u7684\uff0c \u4f46\u662f\u53ea\u80fd\u5f15\u7528\u57fa\u7c7b\u6210\u5458\u3002\u82e5\u8bd5\u56fe\u901a\u8fc7\u57fa\u7c7b\u6307\u9488\u5f15\u7528\u90a3\u4e9b\u53ea\u5728\u6d3e\u751f\u7c7b\u4e2d\u624d\u6709\u7684\u6210\u5458\uff0c\u7f16\u8bd1\u5668\u4f1a\u62a5\u544a\u8bed\u6cd5\u9519\u8bef\u3002\uff08\u89e3\u51b3\u8be5\u95ee\u9898\u7684\u7b54\u6848\u662f\u865a\u51fd\u6570\u548c\u591a\u6001\u6027\uff09 4\uff0c\u7528\u6d3e\u751f\u7c7b\u6307\u9488\u5f15\u7528\u57fa\u7c7b\u7684\u5bf9\u8c61\u3002\u8fd9\u79cd\u5f15\u7528\u65b9\u5f0f\u4f1a\u5bfc\u81f4\u8bed\u6cd5\u9519\u8bef\u3002\u6d3e\u751f\u7c7b\u6307\u9488\u5fc5\u987b\u5148\u5f3a\u5236\u8f6c\u6362\u4e3a\u57fa\u7c7b\u6307\u9488\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u4e0d\u5b89\u5168\u7684\u3002 \u4f20\u5165\u53c2\u6570\u4e3a\u6d88\u606f\u5934\u6307\u9488\uff0c\u5176\u4e2d\u5b50\u6307\u9488\u4e5f\u53ef\u4ee5\u4f20\u5165\uff0c\u5f3a\u5236\u8f6c\u6362\u4e3a\u5e38\u5b57\u7b26\u6307\u9488\u5373\u53ef 1 2 3 4 5 6 7 8 int SendData ( DataHeader * header ) { if ( isRun () && header ) { return send ( _sock , ( const char * ) header , header -> dataLength , 0 ); } return SOCKET_ERROR ; }","title":"3.1.4 \u53d1\u9001\u6570\u636e"},{"location":"Socket/socket/#315","text":"\u5148\u63a5\u6536\u6d88\u606f\u5934\uff0c\u518d\u63a5\u6536\u6d88\u606f\u4f53\uff0c\u5b57\u7b26\u6570\u7ec4\u6307\u9488\u4e0e\u6d88\u606f\u5934\u6307\u9488\u53ef\u8f6c\u6362\uff0c\u6d88\u606f\u5934\u6307\u9488\u53ef\u8d4b\u4e88\u5b50\u6307\u9488 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int Recv () { // \u7f13\u51b2\u533a char szRecv [ 1024 ] = {}; int nlen = recv ( _sock , szRecv , sizeof ( DataHeader ), 0 ); DataHeader * header = ( DataHeader * ) szRecv ; if ( nlen <= 0 ) { printf ( \"\u670d\u52a1\u5668\u5173\u95ed \\n \" ); return -1 ; } recv ( _sock , szRecv + sizeof ( DataHeader ), header -> dataLength - sizeof ( DataHeader ), 0 ); OnNetMsg ( header ); return 0 ; }","title":"3.1.5 \u63a5\u6536\u6570\u636e"},{"location":"Socket/socket/#316","text":"\u5f53\u547d\u4ee4\u4e0d\u540c\u53ea\u9700\u66f4\u6539\u6b64\u6a21\u5757\u5373\u53ef\uff0c\u5b9a\u4e49\u6210 vitual \u5373\u53ef\u4f7f\u5f97\u5176\u5b50\u7c7b\u4fee\u6539\u6b64\u6a21\u5757 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 virtual void OnNetMsg ( DataHeader * header ) { switch ( header -> cmd ) { case CMD_LOGIN_RESULT : { LoginResult * loginret = ( LoginResult * ) header ; printf ( \"\u6536\u5230\u670d\u52a1\u5668\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , \u5e94\u7b54\uff1a %d \\n \" , loginret -> cmd , loginret -> dataLength , loginret -> result ); } break ; case CMD_LOGOUT_RESULT : { LogOutResult * logoutret = ( LogOutResult * ) header ; printf ( \"\u6536\u5230\u670d\u52a1\u5668\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , \u5e94\u7b54\uff1a %d \\n \" , logoutret -> cmd , logoutret -> dataLength , logoutret -> result ); } break ; case CMD_NEW_USER_JOIN : { NewUserJoin * userjoin = ( NewUserJoin * ) header ; printf ( \"\u6536\u5230\u670d\u52a1\u5668\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , \u5e94\u7b54\uff1a \u5ba2\u6237\u7aef%d\u5df2\u52a0\u5165 \\n \" , userjoin -> cmd , userjoin -> dataLength , userjoin -> nsock ); } break ; default : DataHeader header = { 0 , CMD_ERROR }; send ( _sock , ( const char * ) & header , sizeof ( header ), 0 ); break ; } }","title":"3.1.6 \u54cd\u5e94\u6570\u636e(\u4e3b\u8981\u66f4\u6539\u6a21\u5757)"},{"location":"Socket/socket/#317-select","text":"\u5728 select \u6a21\u578b\u4e0b\uff0c\u5f53\u524d\u7684 socket \u52a0\u5165\u6587\u4ef6\u63cf\u8ff0\u7b26\u96c6\u5408 fdRead \u4e2d \u5f53 time == NULL \uff0c \u5219\u4e3a\u963b\u585e\u5f0f\u7b49\u5f85\uff0c\u5f53 fdRead \u6709\u53ef\u8bfb\u64cd\u4f5c(\u5373\u6536\u5230\u670d\u52a1\u7aef\u6d88\u606f)\u65f6\u624d\u4f1a\u8fd4\u56de\u51fd\u6570 \u5f53 time \u5982\u4e0b\u8bbe\u7f6e\u65f6\uff0c\u5219\u8d85\u65f6\u5373\u8fd4\u56de\uff0c\u4e0d\u4f1a\u963b\u585e\u5ba2\u6237\u7aef\u5904\u7406\u5176\u4ed6\u4e1a\u52a1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 bool OnRun () { if ( isRun ()) { fd_set fdRead ; FD_ZERO ( & fdRead ); FD_SET ( _sock , & fdRead ); timeval t = { 1 , 0 }; int ret = select ( _sock + 1 , & fdRead , 0 , 0 , & t ); if ( ret == -1 ) { printf ( \"<socket = %d>select\u5931\u8d25 \\n \" , _sock ); return false ; } if ( FD_ISSET ( _sock , & fdRead )) { FD_CLR ( _sock , & fdRead ); if ( -1 == Recv ()) { printf ( \"<socket = %d>\u4efb\u52a1\u7ed3\u675f \\n \" , _sock ); return false ; } } return true ; //printf(\"\u7a7a\u95f2\u65f6\u95f4\u5904\u7406\u5176\u4ed6\u4e1a\u52a1\\n\"); } return false ; }","title":"3.1.7 \u63a2\u8be2\u7f51\u7edc\u6d88\u606f(select \u6a21\u578b)"},{"location":"Socket/socket/#318","text":"1 2 3 4 bool isRun () { return _sock != INVALID_SOCKET ; }","title":"3.1.8 \u5224\u65ad\u662f\u5426\u5de5\u4f5c"},{"location":"Socket/socket/#319-socket","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 void Close () { if ( _sock != INVALID_SOCKET ) { #ifdef _WIN32 closesocket ( _sock ); WSACleanup (); #else close ( _sock ); #endif _sock = INVALID_SOCKET ; } }","title":"3.1.9 \u5173\u95ed socket"},{"location":"Socket/socket/#32-clientcpp","text":"\u4e3a\u4e86\u4fdd\u8bc1\u7528\u6237\u53ef\u4ee5\u624b\u52a8\u8f93\u5165\u547d\u4ee4\uff0c\u52a0\u5165\u4e86\u4e00\u4e2a\u8f93\u5165\u53d1\u9001\u7ebf\u7a0b\uff0c\u4e3b\u7ebf\u7a0b\u5219\u8d1f\u8d23\u63a5\u53d7\u670d\u52a1\u5668\u6570\u636e","title":"3.2 \u4e3b\u51fd\u6570(Client.cpp)"},{"location":"Socket/socket/#321","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include \"EasyTcpClient.hpp\" #include <thread> using namespace std ; void cmdThread ( EasyTcpClient * client ) { while ( true ) { char cmdBuf [ 128 ] = {}; scanf ( \"%s\" , cmdBuf ); if ( 0 == strcmp ( cmdBuf , \"Exit\" )) { client -> Close (); break ; } else if ( 0 == strcmp ( cmdBuf , \"login\" )) { Login login ; strcpy ( login . userName , \"zizi\" ); strcpy ( login . password , \"zizi19991203\" ); client -> SendData ( & login ); } else if ( 0 == strcmp ( cmdBuf , \"logout\" )) { LogOut logout ; strcpy ( logout . userName , \"zizi\" ); client -> SendData ( & logout ); } else { printf ( \"\u4e0d\u652f\u6301\u8be5\u547d\u4ee4,\u8bf7\u91cd\u65b0\u8f93\u5165 \\n \" ); } } }","title":"3.2.1 \u7ebf\u7a0b\u51fd\u6570"},{"location":"Socket/socket/#322-main","text":"t.detach \u662f\u7ebf\u7a0b\u5206\u79bb\u51fd\u6570,\u4f7f\u5f97\u5b50\u7ebf\u7a0b\u5728\u540e\u53f0\u8fd0\u884c t.join \u662f\u7b49\u5f85\u5b50\u7ebf\u7a0b\u8fd0\u884c\u7ed3\u675f\u624d\u80fd\u7ee7\u7eed\u4e3b\u7ebf\u7a0b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 int main () { EasyTcpClient client ; client . InitSocket (); client . Connect ( \"127.0.0.1\" , 4567 ); thread t1 ( cmdThread , & client ); t1 . detach (); \u5faa\u73af\u53d1\u9001\u547d\u4ee4\u548c\u63a5\u6536\u670d\u52a1\u5668\u4fe1\u606f while ( client . isRun ()) { client . OnRun (); } client . Close (); //getchar(); return 0 ; }","title":"3.2.2 main \u51fd\u6570\u6d41\u7a0b"},{"location":"Socket/socket/#4","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #ifndef _EasyTcpServer_hpp_ #define _EasyTcpServer_hpp_ #define _WINSOCK_DEPRECATED_NO_WARNINGS #ifdef _WIN32 #define WIN32_LEAN_AND_MEAN #include <windows.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 #else #include <unistd.h> // unix std #include <arpa/inet.h> #include <string.h> #define SOCKET int // Linux\u4e0b\u6ca1\u6709\u5305\u88c5SOCKET,\u9700\u8981\u4ecewindows\u67e5\u770b\u91cd\u65b0\u8fdb\u884c\u5b8f\u5b9a\u4e49 #define INVALID_SOCKET (SOCKET)(~0) #define SOCKET_ERROR (-1) #endif #include <cstdio> #include <vector> #include \"MesaageHeader.hpp\" using namespace std ; ... #endif","title":"4 \u670d\u52a1\u7aef"},{"location":"Socket/socket/#41-class-easytcpserverhpp","text":"","title":"4.1 class \u5b9a\u4e49(EasyTcpServer.hpp)"},{"location":"Socket/socket/#411","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class EasyTcpServer { SOCKET _sock ; vector < SOCKET > g_clients ; public : EasyTcpServer () { _sock = INVALID_SOCKET ; g_clients . clear (); } virtual ~ EasyTcpServer () { Close (); } // \u4ee5\u4e0b\u7686\u4e3a\u6b64\u7c7b\u7684\u6210\u5458\u51fd\u6570 }","title":"4.1.1 \u6210\u5458\u53d8\u91cf"},{"location":"Socket/socket/#412-socket","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 SOCKET InitSocket () { // \u542f\u52a8 WinSock 2.x\u73af\u5883 #ifdef _WIN32 WORD ver = MAKEWORD ( 2 , 2 ); // \u7248\u672c\u53f7 WSADATA dat ; // \u63a5\u6536winsows socket\u5b9e\u73b0\u7ec6\u8282\u7684\u7ed3\u6784\u4f53 WSAStartup ( ver , & dat ); // \u7ed1\u5b9asocket\u5e93,\u521d\u59cb\u5316\u94fe\u63a5\u5e93 #endif if ( _sock != INVALID_SOCKET ) { printf ( \"<socket = %d>\u5173\u95ed\u65e7\u8fde\u63a5 \\n \" , _sock ); Close (); } _sock = socket ( AF_INET , SOCK_STREAM , IPPROTO_TCP ); // \u540c\u670d\u52a1\u7aef\u4e0d\u540c\uff0c\u8fd9\u91cc\u4e0d\u7528\u6307\u660eTCP\u534f\u8bae if ( INVALID_SOCKET == _sock ) { printf ( \"\u670d\u52a1\u5668\u521b\u5efasocket\u5931\u8d25 \\n \" ); } else { printf ( \"\u670d\u52a1\u5668\u521b\u5efasocket\u6210\u529f \\n \" ); } return _sock ; }","title":"4.1.2 \u5efa\u7acb socket"},{"location":"Socket/socket/#413-ip","text":"IP \u5730\u5740\u53ef\u624b\u52a8\u8f93\u5165\u4e5f\u53ef\u81ea\u52a8\u9009\u62e9\u4efb\u610f 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 int Bind ( const char * ip , unsigned short port ) { sockaddr_in _sin = {}; // \u4e0d\u76f4\u63a5\u7528sockaddr\u7c7b\u578b\u662f\u56e0\u4e3asockaddr_in\u7c7b\u578b\u66f4\u9002\u5408\u586b\u5199 _sin . sin_family = AF_INET ; _sin . sin_port = htons ( port ); // host to net unsigned short\u4e3b\u673a\u7c7b\u578b\u548c\u7f51\u7edc\u7c7b\u578b\u7684short\u7c7b\u578b\u4e0d\u540c //_sin.sin_addr.S_un.S_addr = INADDR_ANY; // inet_addr(\"127.0.0.1\"),\u4efb\u610fip\u5730\u5740 #ifdef _WIN32 if ( ip ) { _sin . sin_addr . S_un . S_addr = inet_addr ( ip ); // \u8fd9\u91cc\u66ff\u6362\u76f8\u5e94\u7684ip\u5730\u5740 } else { _sin . sin_addr . S_un . S_addr = INADDR_ANY ; } #else if ( ip ) { _sin . sin_addr . s_addr = inet_addr ( ip ); } else { _sin . sin_addr . s_addr = INADDR_ANY ; } #endif int ret = bind ( _sock , ( sockaddr * ) & _sin , sizeof ( _sin )); if ( ret == SOCKET_ERROR ) { printf ( \"\u670d\u52a1\u5668\u7ed1\u5b9a\u7aef\u53e3<%d>\u5931\u8d25 \\n \" , port ); } else { printf ( \"\u670d\u52a1\u5668\u7ed1\u5b9a\u7aef\u53e3<%d>\u6210\u529f \\n \" , port ); } return ret ; }","title":"4.1.3 \u7ed1\u5b9a\u7aef\u53e3\u548c ip \u5730\u5740"},{"location":"Socket/socket/#414-listen","text":"\u5bf9\u4e8e listen(int fd,int backlog) \u51fd\u6570\uff0c\u5185\u6838\u4f1a\u4e3a\u4e00\u4e2a\u76d1\u542c\u5957\u63a5\u5b57\u7ef4\u62a4\u4e24\u4e2a\u961f\u5217 \u5f53\u6709 TCP \u8bf7\u6c42\u5230\u6765\u65f6,\u5373 3 \u6b21\u63e1\u624b\u4e2d\u7684 syn \u5206\u8282\u53d1\u9001\u6765\u65f6,\u4f1a\u5728 \u672a\u5b8c\u6210\u961f\u5217 \u4e2d\u589e\u52a0\u4e00\u9879 3 \u6b21\u63e1\u624b\u5b8c\u6210\u65f6, \u672a\u5b8c\u6210\u961f\u5217 \u4e2d\u7684\u9879\u5c31\u79fb\u52a8\u5230 \u5df2\u5b8c\u6210\u961f\u5217 \u91cc,accept() \u51fd\u6570\u4f1a\u4ece \u5df2\u8fde\u63a5\u961f\u5217 \u91cc\u53d6\u8d70\u5df2\u5b8c\u6210\u8fde\u63a5. backlog \u53c2\u6570\u5c31\u662f\u63a7\u5236 \u5df2\u8fde\u63a5\u961f\u5217 \u91cc\u7b49\u5f85 accept() \u53d6\u8d70\u7684\u8fde\u63a5\u7684\u6700\u5927\u6570\u76ee \u6ce8\u610f\u4e00\u70b9\uff0cbacklog \u4e0e\u8fd9\u4e2a\u5df2\u6392\u961f\u8fde\u63a5\u7684\u6700\u5927\u6570\u76ee\u672a\u5fc5\u662f\u5b8c\u5168\u76f8\u7b49\u7684,\u4e0d\u540c\u7684\u7cfb\u7edf\u7684\u5b9e\u73b0\u53ef\u80fd\u4e0d\u540c\uff0c\u6bd4\u5982 backlog = 1\uff0c\u7cfb\u7edf\u5141\u8bb8\u7684\u5b9e\u9645\u4e00\u6392\u961f\u6570\u76ee\u53ef\u80fd\u4e3a 2 1 2 3 4 5 6 7 8 9 10 11 12 13 int Listen ( int n ) { int ret = listen ( _sock , n ); if ( SOCKET_ERROR == ret ) // \u6700\u591a\u9700\u8981\u7b49\u5f85\u591a\u5c11\u4eba\u8fdb\u884c\u8fde\u63a5 { printf ( \"<socket = %d>\u670d\u52a1\u5668\u76d1\u542c\u5931\u8d25 \\n \" , _sock ); } else { printf ( \"<socket = %d>\u670d\u52a1\u5668\u76d1\u542c\u6210\u529f \\n \" , _sock ); } return ret ; }","title":"4.1.4 \u7aef\u53e3\u76d1\u542c listen"},{"location":"Socket/socket/#415","text":"","title":"4.1.5 \u53d1\u9001\u6570\u636e"},{"location":"Socket/socket/#4151","text":"1 2 3 4 5 6 7 8 int SendData ( DataHeader * header , SOCKET cSock ) { if ( isRun () && header ) { return send ( cSock , ( const char * ) header , header -> dataLength , 0 ); } return SOCKET_ERROR ; }","title":"4.1.5.1 \u5355\u53d1"},{"location":"Socket/socket/#4152","text":"1 2 3 4 5 6 7 8 9 10 void SendDataToAll ( DataHeader * header ) { if ( isRun () && header ) { for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { SendData ( header , g_clients [ n ]); } } }","title":"4.1.5.2 \u7fa4\u53d1"},{"location":"Socket/socket/#416-accept","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 SOCKET Accept () { sockaddr_in clientAddr = {}; int nAddrlen = sizeof ( clientAddr ); SOCKET cSock = INVALID_SOCKET ; cSock = accept ( _sock , ( sockaddr * ) & clientAddr , & nAddrlen ); if ( INVALID_SOCKET == cSock ) { printf ( \"\u670d\u52a1\u5668<socket = %d>\u63a5\u53d7\u5230\u65e0\u6548\u5ba2\u6237\u7aef... \\n \" , _sock ); } else { printf ( \"\u670d\u52a1\u5668<socket = %d>\u6536\u5230\u65b0\u5ba2\u6237\u7aef:\" , _sock ); printf ( \"\u5ba2\u6237\u7aefIP = %s,socket = %d \\n \" , inet_ntoa ( clientAddr . sin_addr ), ( int ) cSock ); /*for (int n = g_clients.size() - 1; n >= 0; n--) { NewUserJoin userjoin; userjoin.nsock = (int)cSock; SendData(&userjoin, g_clients[n]); }*/ NewUserJoin userjoin ; userjoin . nsock = ( int ) cSock ; SendDataToAll ( & userjoin ); g_clients . push_back ( cSock ); } return cSock ; }","title":"4.1.6 \u63a5\u53d7\u65b0\u5ba2\u6237\u7aef\u52a0\u5165 accept"},{"location":"Socket/socket/#417","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int Recv ( SOCKET cSock ) { // \u7f13\u51b2\u533a char szRecv [ 1024 ] = {}; int nlen = recv ( cSock , szRecv , sizeof ( DataHeader ), 0 ); DataHeader * header = ( DataHeader * ) szRecv ; if ( nlen <= 0 ) { printf ( \"\u5ba2\u6237\u7aef%d\u9000\u51fa \\n \" , ( int ) cSock ); return -1 ; } recv ( cSock , szRecv + sizeof ( DataHeader ), header -> dataLength - sizeof ( DataHeader ), 0 ); OnNetMsg ( header , cSock ); return 0 ; }","title":"4.1.7 \u63a5\u6536\u6570\u636e"},{"location":"Socket/socket/#418","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 virtual void OnNetMsg ( DataHeader * header , SOCKET cSock ) { switch ( header -> cmd ) { case CMD_LOGIN : { Login * login = ( Login * ) header ; printf ( \"\u6536\u5230\u5ba2\u6237\u7aef%d\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , username = %s userpsw = %s \\n \" , ( int ) cSock , login -> cmd , login -> dataLength , login -> userName , login -> password ); // \u6570\u636e\u5e93\u67e5\u770b\u5bc6\u7801\u662f\u5426\u6b63\u786e LoginResult ret ; SendData ( & ret , cSock ); } break ; case CMD_LOGOUT : { LogOut * logout = ( LogOut * ) header ; printf ( \"\u6536\u5230\u5ba2\u6237\u7aef%d\u547d\u4ee4\uff1a%d,\u6570\u636e\u957f\u5ea6\uff1a%d , username = %s \\n \" , ( int ) cSock , logout -> cmd , logout -> dataLength , logout -> userName ); // \u6570\u636e\u5e93\u67e5\u770b\u5bc6\u7801\u662f\u5426\u6b63\u786e LogOutResult ret ; SendData ( & ret , cSock ); } break ; default : DataHeader header = { 0 , CMD_ERROR }; SendData ( & header , cSock ); break ; } }","title":"4.1.8 \u54cd\u5e94\u6570\u636e(\u4e3b\u8981\u66f4\u6539\u6a21\u5757)"},{"location":"Socket/socket/#419-select","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 bool OnRun () { if ( isRun ()) { // \u4f2f\u514b\u5229\u5957\u63a5\u5b57 BSD socket\u63cf\u8ff0\u7b26 fd_set fdRead ; // \u63cf\u8ff0\u7b26\u96c6\u5408 fd_set fdWrite ; fd_set fdExp ; FD_ZERO ( & fdRead ); FD_ZERO ( & fdWrite ); FD_ZERO ( & fdExp ); FD_SET ( _sock , & fdRead ); FD_SET ( _sock , & fdWrite ); FD_SET ( _sock , & fdExp ); for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { FD_SET ( g_clients [ n ], & fdRead ); } timeval t = { 1 , 0 }; // nfds\u662f\u4e00\u4e2a\u6574\u6570\u503c\uff0c\u6307\u4e00\u4e2afd_set\u96c6\u5408\u6240\u6709\u63cf\u8ff0\u7b26(socket)\u7684\u8303\u56f4\u800c\u975e\u6570\u91cf\uff08\u6240\u6709\u63cf\u8ff0\u7b26\u6700\u5927\u503c+1\uff09 // \u5f53 time == NULL\u65f6\uff0c\u5219select\u4f1a\u963b\u585e\u67e5\u8be2\u76f4\u5230\u6709\u6570\u636e\u53ef\u4ee5\u64cd\u4f5c,\u5426\u5219\u8d85\u65f6\u7acb\u5373\u8fd4\u56de int ret = select ( _sock + 1 , & fdRead , & fdWrite , & fdExp , & t ); if ( ret < 0 ) { printf ( \"\u670d\u52a1\u7aef<socket = %d>select\u4efb\u52a1\u5931\u8d25 \\n \" , _sock ); Close (); return false ; } if ( FD_ISSET ( _sock , & fdRead )) { FD_CLR ( _sock , & fdRead ); Accept (); } for ( int n = 0 ; n < fdRead . fd_count ; n ++ ) { if ( -1 == Recv ( fdRead . fd_array [ n ])) { auto iter = find ( g_clients . begin (), g_clients . end (), fdRead . fd_array [ n ]); // std::vector<SOCKET>::iterator if ( iter != g_clients . end ()) { g_clients . erase ( iter ); } } } return true ; } return false ; }","title":"4.1.9 \u63a2\u8be2\u7f51\u7edc\u6d88\u606f(select \u6a21\u578b)"},{"location":"Socket/socket/#4110","text":"1 2 3 4 bool isRun () { return _sock != INVALID_SOCKET ; }","title":"4.1.10 \u5224\u65ad\u662f\u5426\u5de5\u4f5c"},{"location":"Socket/socket/#4111-socket","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 void Close () { if ( _sock != INVALID_SOCKET ) { #ifdef _WIN32 closesocket ( _sock ); for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { closesocket ( g_clients [ n ]); } WSACleanup (); #else close ( _sock ); for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { close ( g_clients [ n ]); } #endif _sock = INVALID_SOCKET ; } };","title":"4.1.11 \u5173\u95ed socket"},{"location":"Socket/socket/#42-servercpp","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #include \"EasyTcpServer.hpp\" int main () { EasyTcpServer server ; server . InitSocket (); server . Bind ( NULL , 4567 ); server . Listen ( 5 ); while ( server . isRun ()) { server . OnRun (); //printf(\"\u7a7a\u95f2\u65f6\u95f4\u5904\u7406\u5176\u4ed6\u4efb\u52a1\\n\"); } server . Close (); return 0 ; } \u53ef\u4ee5\u6539\u8fdb\u7684\u5730\u65b9\uff1a \u53cc\u7f13\u51b2:\u5b9a\u4e49\u63a5\u53d7\u7f13\u51b2\u533a\u3001\u6d88\u606f\u7f13\u51b2\u533a\uff08\u7b2c\u4e8c\u7f13\u51b2\u533a\uff09\u4ee5\u89e3\u51b3\u7f51\u7edc\u62e5\u585e\u9020\u6210\u7684\u9488\u5bf9\u957f\u8fde\u63a5\u591a\u7ed3\u6784\u7684\u7c98\u5305\u3001\u5c11\u5305\u95ee\u9898 \u591a\u7ebf\u7a0b\uff1athread(\u7ebf\u7a0b),mutex(\u9501),atomic(\u539f\u8bed\u64cd\u4f5c) \u624b\u52a8\u4e0a\u9501\u89e3\u9501\u4e0d\u5982\u81ea\u89e3\u9501\uff1a lock_guard<mutex> lg(m) \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4e0a\u9501\u548c\u6790\u6784\u51fd\u6570\u89e3\u9501\uff0c\u6bd4\u8f83\u5b89\u5168 \u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u578b","title":"4.2 \u4e3b\u51fd\u6570(server.cpp)"},{"location":"Socket/socket/#5","text":"","title":"5 \u8de8\u5e73\u53f0\u914d\u7f6e"},{"location":"Socket/socket/#51-windows","text":"\u5934\u6587\u4ef6\u5305\u542b\u9700\u8981\u9632\u5b8f\u91cd\u5b9a\u4e49 \u5728 windows \u5e73\u53f0\u4e0b\u9700\u8981\u589e\u52a0\u7ed1\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93\u3001\u7ed1\u5b9a socket \u5e93\u7684\u989d\u5916\u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #define WIN32_LEAN_AND_MEAN #define _WINSOCK_DEPRECATED_NO_WARNINGS #include <windows.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 int main () { #ifdef _WIN32 WORD ver = MAKEWORD ( 2 , 2 ); // \u7248\u672c\u53f7 WSADATA dat ; // \u63a5\u6536winsows socket\u5b9e\u73b0\u7ec6\u8282\u7684\u7ed3\u6784\u4f53 WSAStartup ( ver , & dat ); // \u7ed1\u5b9asocket\u5e93,\u521d\u59cb\u5316\u94fe\u63a5\u5e93 #endif /// \u5728\u6b64\u5904\u7f16\u5199\u901a\u7528\u7684 socket\u7f16\u7a0b\u4ee3\u7801 /// #ifdef _WIN32 WSACleanup (); // \u5bf9\u5e94 startup #endif return 0 ; }","title":"5.1 windows\u7684\u914d\u7f6e"},{"location":"Socket/socket/#51-linux","text":"1 g++ client.cpp -std=c++11 -pthread -o client \u8de8\u5e73\u53f0\u4f7f\u7528\u4e3b\u8981\u7528\u5230\u9884\u5b9a\u4e49\u6761\u4ef6\u5b8f\uff1a \u5934\u6587\u4ef6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #ifdef _WIN32 #include <window.h> #include <WinSock2.h> #pragma comment(lib,\"ws2_32.lib\") // \u6307\u5b9a\u52a8\u6001\u94fe\u63a5\u5e93 #define WIN32_LEAN_AND_MEAN #define _WINSOCK_DEPRECATED_NO_WARNINGS #else #include <unistd.h> // unix std #include <arpa/inet.h> #include <string.h> #define SOCKET int // Linux\u4e0b\u6ca1\u6709\u5305\u88c5SOCKET,\u9700\u8981\u4ecewindows\u67e5\u770b\u91cd\u65b0\u8fdb\u884c\u5b8f\u5b9a\u4e49 #define INVALID_SOCKET (SOCKET)(~0) #define SOCKET_ERROR (-1) #endif \u67e5\u770bip\u5730\u5740\u5e76\u66f4\u6362 Windows: ipconfig Linux/Mac: ifconfig 1 2 3 4 5 6 7 8 9 // 2.\u8fde\u63a5\u670d\u52a1\u5668connect sockaddr_in _sin = {}; _sin . sin_family = AF_INET ; _sin . sin_port = htons ( 4567 ); #ifdef _WIN32 _sin . sin_addr . S_un . S_addr = inet_addr ( \"127.0.0.1\" ); // \u8fd9\u91cc\u66ff\u6362\u76f8\u5e94\u7684ip\u5730\u5740 #else _sin . sin_addr . s_addr = inet_addr ( \"127.0.0.1\" ); #endif \u5173\u95ed\u5957\u63a5\u5b57\uff1a 1 2 3 4 5 #ifdef _WIN32 closesocket ( _sock ); #else close ( _sock ); #endif","title":"5.1 Linux"},{"location":"Socket/socket/#52-mac-osxcode","text":"\u76f8\u5e94\u7684 windows \u6a21\u5757\u540c\u6837\u5904\u7406 \u6240\u6709\u51fd\u6570\u5fc5\u987b\u6709\u8fd4\u56de\u503c\uff08\u6709\u4e00\u4e9b g++ \u53ef\u4ee5\u81ea\u52a8\u5b8c\u6210\u7684\u6b65\u9aa4\u5728 Mac \u9700\u8981\u624b\u52a8\u6dfb\u52a0\u4ee3\u7801\uff09 \u5bf9\u4e8e\u62a5\u9519\u7684\u51fd\u6570\u8c03\u7528\u67e5\u770b\u51fd\u6570\u7684\u5b9a\u4e49\uff0c\u89c2\u5bdf\u5176\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6839\u636e\u76f8\u5e94\u7684\u9700\u6c42\u8fdb\u884c\u6570\u636e\u5f3a\u5236\u8f6c\u6362\u6216\u91cd\u5199\u51fd\u6570 \u4f8b\u5982\uff1a \u5728 Mac \u4e2d\uff0c fd_set \u6ca1\u6709 fd_count ,\u5219\u4ee3\u7801\u53ef\u505a\u5982\u4e0b\u4fee\u6539 oringinal code: 1 2 3 4 5 6 7 8 9 10 11 for ( int n = 0 ; n < fdRead . fd_count ; n ++ ) { if ( -1 == proccesor ( fdRead . fd_array [ n ])) { auto iter = find ( g_clients . begin (), g_clients . end (), fdRead . fd_array [ n ]); // std::vector<SOCKET>::iterator if ( iter != g_clients . end ()) { g_clients . erase ( iter ); } } } modified code: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 for ( int n = ( int ) g_clients . size () - 1 ; n >= 0 ; n -- ) { if ( FD_ISSET ( g_clients [ n ], & fdRead )) { if ( -1 == processor ( g_clients [ n ])) { auto iter = g_clients . begin () + n ; if ( iter != g_clients . end ()) { g . clients . erase ( iter ); } } } } \u6ce8\u610f \uff1a select \u51fd\u6570\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u540c\uff0c\u4e3b\u8981\u9488\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u4fee\u6539 windows \u4e0b\u4f1a\u81ea\u52a8\u4fee\u6b63\uff0c\u4f46 Linux \u548c Mac \u9700\u8981\u624b\u52a8\u8f93\u5165\u6b63\u786e\u503c:\u6587\u4ef6\u63cf\u8ff0\u7b26\u6700\u5927\u503c + 1 , \u6240\u4ee5\u7edf\u4e00\u7528\u5982\u4e0b\u4ee3\u7801\uff1a client.cpp: 1 select ( _sock + 1 , & fdRead , & fdWrite , & fdExp , & t ); server.cpp: 1 2 3 4 5 6 7 8 9 10 11 SOCKET maxSock = _sock ; for ( int n = g_clients . size () - 1 ; n >= 0 ; n -- ) { FD_SET ( g_clients [ n ], & fdRead ); if ( maxSock < g_clients [ n ]) { maxSock = g_clients [ n ]; } } select ( maxSock + 1 , & fdRead , & fdWrite , & fdExp , & t );","title":"5.2 Mac OS(Xcode)"},{"location":"YOLO/yolo_spp_code_1/","text":"YOLOSPP\u6e90\u7801\u5b66\u4e60-1 \u603b\u4f53\u67b6\u6784 \u00b6 github\u5730\u5740 1.\u73af\u5883\u914d\u7f6e \u00b6 python 3.6 \u6216\u8005 3.7 pytorch 1.6 \u4ee5\u4e0a\uff08\u9700\u8981\u5b98\u65b9\u63d0\u4f9b\u7684\u6df7\u5408\u7cbe\u5ea6\u8bad\u7ec3\u652f\u6301\uff09 pycocotools 1 2 Linux : pip install pycocotools Windows: pip install pycocotools-windows \u793a\u4f8b\u914d\u7f6e\uff1a numpy==1.17.0 torchvision==0.7.0 opencv_python==4.3.0.36 lxml==4.2.4 torch==1.6.0 scipy==1.4.1 pycocotools==2.0.0 matplotlib==3.2.1 tqdm==4.42.1 tensorboard==2.1.0 PyYAML==5.3.1 2.\u6587\u4ef6\u7ed3\u6784 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 \u251c\u2500\u2500 cfg: \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 \u2502 \u251c\u2500\u2500 hyp.yaml: \u8bad\u7ec3\u7f51\u7edc\u7684\u76f8\u5173\u8d85\u53c2\u6570 \u2502 \u2514\u2500\u2500 yolov3-spp.cfg: yolov3-spp\u7f51\u7edc\u7ed3\u6784\u914d\u7f6e \u2502 \u251c\u2500\u2500 data: \u5b58\u50a8\u8bad\u7ec3\u65f6\u6570\u636e\u96c6\u76f8\u5173\u4fe1\u606f\u7f13\u5b58 \u2502 \u2514\u2500\u2500 pascal_voc_classes.json: pascal voc\u6570\u636e\u96c6\u6807\u7b7e \u2502 \u251c\u2500\u2500 runs: \u4fdd\u5b58\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u6240\u6709tensorboard\u76f8\u5173\u6587\u4ef6(\u8bb0\u5f55\u635f\u5931\u3001mAP\u7b49\u4fe1\u606f) \u251c\u2500\u2500 utils: \u642d\u5efa\u8bad\u7ec3\u7f51\u7edc\u65f6\u4f7f\u7528\u5230\u7684\u5de5\u5177 \u2502 \u251c\u2500\u2500 datasets.py: \u6570\u636e\u8bfb\u53d6\u4ee5\u53ca\u9884\u5904\u7406\u65b9\u6cd5 \u2502 \u251c\u2500\u2500 img_utils.py: \u90e8\u5206\u56fe\u50cf\u5904\u7406\u65b9\u6cd5 \u2502 \u251c\u2500\u2500 layers.py: \u5b9e\u73b0\u7684\u4e00\u4e9b\u57fa\u7840\u5c42\u7ed3\u6784 \u2502 \u251c\u2500\u2500 parse_config.py: \u89e3\u6790yolov3-spp.cfg\u6587\u4ef6 \u2502 \u251c\u2500\u2500 torch_utils.py: \u4f7f\u7528pytorch\u5b9e\u73b0\u7684\u4e00\u4e9b\u5de5\u5177 \u2502 \u2514\u2500\u2500 utils.py: \u8bad\u7ec3\u7f51\u7edc\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u5230\u7684\u4e00\u4e9b\u65b9\u6cd5 \u2502 \u251c\u2500\u2500 train_utils: \u8bad\u7ec3\u9a8c\u8bc1\u7f51\u7edc\u65f6\u4f7f\u7528\u5230\u7684\u5de5\u5177(\u5305\u62ec\u591aGPU\u8bad\u7ec3\u4ee5\u53ca\u4f7f\u7528cocotools) \u251c\u2500\u2500 weights: \u6240\u6709\u76f8\u5173\u9884\u8bad\u7ec3\u6743\u91cd(\u4e0b\u9762\u4f1a\u7ed9\u51fa\u767e\u5ea6\u4e91\u7684\u4e0b\u8f7d\u5730\u5740) \u251c\u2500\u2500 model.py: \u6a21\u578b\u642d\u5efa\u6587\u4ef6 \u251c\u2500\u2500 train.py: \u9488\u5bf9\u5355GPU\u6216\u8005CPU\u7684\u7528\u6237\u4f7f\u7528 \u251c\u2500\u2500 train_multi_GPU.py: \u9488\u5bf9\u4f7f\u7528\u591aGPU\u7684\u7528\u6237\u4f7f\u7528 \u251c\u2500\u2500 trans_voc2yolo.py: \u5c06voc\u6570\u636e\u96c6\u6807\u6ce8\u4fe1\u606f(.xml)\u8f6c\u4e3ayolo\u6807\u6ce8\u683c\u5f0f(.txt) \u251c\u2500\u2500 calculate_dataset.py: 1)\u7edf\u8ba1\u8bad\u7ec3\u96c6\u548c\u9a8c\u8bc1\u96c6\u7684\u6570\u636e\u5e76\u751f\u6210\u76f8\u5e94.txt\u6587\u4ef6 \u2502 2)\u521b\u5efadata.data\u6587\u4ef6 \u2502 3)\u6839\u636eyolov3-spp.cfg\u7ed3\u5408\u6570\u636e\u96c6\u7c7b\u522b\u6570\u521b\u5efamy_yolov3.cfg\u6587\u4ef6 \u2514\u2500\u2500 predict_test.py: \u7b80\u6613\u7684\u9884\u6d4b\u811a\u672c\uff0c\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6743\u91cd\u8fdb\u884c\u9884\u6d4b\u6d4b\u8bd5 3.\u8bad\u7ec3\u6570\u636e\u7684\u51c6\u5907\u4ee5\u53ca\u76ee\u5f55\u7ed3\u6784 \u00b6 \u6570\u636e\u96c6\u51c6\u5907\u6559\u7a0b labelimg\u5de5\u5177 \u53ef\u4ee5\u76f4\u63a5\u751f\u6210 yolo \u683c\u5f0f\u7684\u6807\u7b7e\u6587\u4ef6 .txt \u4e3a\u65b9\u4fbf\u56fe\u50cf\u9884\u5904\u7406\uff0c\u5c06\u81ea\u5df1\u6570\u636e\u96c6\u7684\u56fe\u50cf\u5927\u5c0f\u7f29\u653e\u5230\u4e0e coco \u6570\u636e\u96c6\u4e00\u81f4 \u6d4b\u8bd5\u56fe\u8c61\u65f6\u6700\u597d\u5c06\u56fe\u50cf\u7f29\u653e\u5230 32 \u7684\u6574\u6570\u500d \u6570\u636e\u76ee\u5f55\uff1a 1 2 3 4 5 6 7 \u251c\u2500\u2500 my_yolo_dataset \u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u6839\u76ee\u5f55 \u2502 \u251c\u2500\u2500 train \u8bad\u7ec3\u96c6\u76ee\u5f55 \u2502 \u2502 \u251c\u2500\u2500 images \u8bad\u7ec3\u96c6\u56fe\u50cf\u76ee\u5f55 \u2502 \u2502 \u2514\u2500\u2500 labels \u8bad\u7ec3\u96c6\u6807\u7b7e\u76ee\u5f55 \u2502 \u2514\u2500\u2500 val \u9a8c\u8bc1\u96c6\u76ee\u5f55 \u2502 \u251c\u2500\u2500 images \u9a8c\u8bc1\u96c6\u56fe\u50cf\u76ee\u5f55 \u2502 \u2514\u2500\u2500 labels \u9a8c\u8bc1\u96c6\u6807\u7b7e\u76ee\u5f55 4.\u6807\u6ce8\u6570\u636e\u96c6\u8f6c\u5316\u4e3a\u76f8\u5173\u51c6\u5907\u6587\u4ef6 \u00b6 4.1 \u5c06 VOC \u683c\u5f0f\u6570\u636e\u96c6\u6539\u4e3a YOLO \u683c\u5f0f\u6570\u636e\u96c6\u7684\u811a\u672c\u4e3a trans_voc2yolo.py \u00b6 1.\u5c06voc\u6570\u636e\u96c6\u6807\u6ce8\u4fe1\u606f(.xml)\u8f6c\u4e3ayolo\u6807\u6ce8\u683c\u5f0f(.txt)\uff0c\u5e76\u5c06\u56fe\u50cf\u6587\u4ef6\u590d\u5236\u5230\u76f8\u5e94\u6587\u4ef6\u5939 2.\u6839\u636ejson\u6807\u7b7e\u6587\u4ef6\uff0c\u751f\u6210\u5bf9\u5e94names\u6807\u7b7e(my_data_label.names) \u5728 VOC \u5b98\u65b9\u6570\u636e\u96c6\u4e2d\uff0c\u56fe\u7247\u4fe1\u606f\u5728 JPEGImages/ \u6587\u4ef6\u5939\u4e2d\uff0c\u6807\u6ce8\u4fe1\u606f\uff08 xml \u6587\u4ef6\uff09\u5728 Annotations/ \u6587\u4ef6\u5939\u4e2d\uff0c txt \u76ee\u5f55\u5728\u6587\u4ef6\u5939 ImageSets/Main/ \u4e2d \u751f\u6210\u7684\u6587\u4ef6\u5728\u5f53\u524d\u6587\u4ef6\u5939\u7684 data/my_yolo_dataset \u4e2d\uff0c\u4e3a\u751f\u6210\u4ee5\u4e0b\u7684\u51c6\u5907\u6587\u4ef6\u505a\u8f93\u5165 \u4ee3\u7801\u6ce8\u610f\u4e8b\u9879\uff1a tqdm \u5305\u662f\u7528\u6765\u5c01\u88c5\u8fdb\u5ea6\u6761\u4fe1\u606f\u7684\uff0c lxml \u5305\u662f\u7528\u6765\u89e3\u6790 xml \u6587\u4ef6\u7684 \u4e3b\u8981\u4fee\u6539\u7684\u5730\u65b9\u4e3a voc_root \uff0c\u5c06\u5176\u4fee\u6539\u4e3a\u81ea\u5df1\u8ba1\u7b97\u673a VOC \u6570\u636e\u96c6\u6240\u5728\u8def\u5f84 \u6ce8\u610f\u4fee\u6539\u8def\u5f84\u65f6\u5019\uff0cLinux \u7edf\u4e00\u7528 / ,Windows \u7edf\u4e00\u7528 \\\\ ,\u5982\u679c\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u53ef\u4ee5\u76f4\u63a5\u5199\uff0c\u4e5f\u53ef\u4ee5\u5728\u524d\u9762\u52a0 .\\\\ ,\u5982\u679c\u5728\u4e0a\u4e00\u5c42\u6587\u4ef6\u5939\u5219\u4e3a .. 4.2 \u6839\u636e\u6446\u653e\u597d\u7684\u6570\u636e\u96c6\u4fe1\u606f\u751f\u6210\u4e00\u7cfb\u5217\u76f8\u5173\u51c6\u5907\u6587\u4ef6 \u00b6 1 2 3 4 5 \u251c\u2500\u2500 data \u5229\u7528\u6570\u636e\u96c6\u751f\u6210\u7684\u4e00\u7cfb\u5217\u76f8\u5173\u51c6\u5907\u6587\u4ef6\u76ee\u5f55 \u2502 \u251c\u2500\u2500 my_train_data.txt: \u8be5\u6587\u4ef6\u91cc\u5b58\u50a8\u7684\u662f\u6240\u6709\u8bad\u7ec3\u56fe\u7247\u7684\u8def\u5f84\u5730\u5740 \u2502 \u251c\u2500\u2500 my_val_data.txt: \u8be5\u6587\u4ef6\u91cc\u5b58\u50a8\u7684\u662f\u6240\u6709\u9a8c\u8bc1\u56fe\u7247\u7684\u8def\u5f84\u5730\u5740 \u2502 \u251c\u2500\u2500 my_data_label.names: \u8be5\u6587\u4ef6\u91cc\u5b58\u50a8\u7684\u662f\u6240\u6709\u7c7b\u522b\u7684\u540d\u79f0\uff0c\u4e00\u4e2a\u7c7b\u522b\u5bf9\u5e94\u4e00\u884c(\u8fd9\u91cc\u4f1a\u6839\u636e```.json```\u6587\u4ef6\u81ea\u52a8\u751f\u6210) \u2502 \u2514\u2500\u2500 my_data.data: \u8be5\u6587\u4ef6\u91cc\u8bb0\u5f55\u7684\u662f\u7c7b\u522b\u6570\u7c7b\u522b\u4fe1\u606f\u3001train\u4ee5\u53cavalid\u5bf9\u5e94\u7684txt\u6587\u4ef6 \u811a\u672c: calculate_dataset.py \u751f\u6210\u6587\u4ef6\uff1a my_train_data.txt my_val_data.txt my_data.data \u65b0\u7684my_yolov3.cfg \u8be5\u811a\u672c\u7684\u529f\u80fd\uff1a 1.\u7edf\u8ba1\u8bad\u7ec3\u96c6\u548c\u9a8c\u8bc1\u96c6\u7684\u6570\u636e\u5e76\u751f\u6210\u76f8\u5e94.txt\u6587\u4ef6 2.\u521b\u5efadata.data\u6587\u4ef6\uff0c\u8bb0\u5f55classes\u4e2a\u6570, train\u4ee5\u53caval\u6570\u636e\u96c6\u6587\u4ef6(.txt)\u8def\u5f84\u548clabel.names\u6587\u4ef6\u8def\u5f84 3.\u6839\u636eyolov3-spp.cfg\u521b\u5efamy_yolov3.cfg\u6587\u4ef6\u4fee\u6539\u5176\u4e2d\u7684predictor filters\u4ee5\u53cayolo classes\u53c2\u6570(\u8fd9\u4e24\u4e2a\u53c2\u6570\u662f\u6839\u636e\u7c7b\u522b\u6570\u6539\u53d8\u7684) \u9700\u8981\u4fee\u6539\u7684\u53c2\u6570\uff1a 1 2 3 4 5 6 7 8 # \u8bad\u7ec3\u96c6\u7684 labels \u76ee\u5f55\u8def\u5f84 train_annotation_dir = \"./my_yolo_dataset/train/labels\" # \u9a8c\u8bc1\u96c6\u7684 labels \u76ee\u5f55\u8def\u5f84 val_annotation_dir = \"./my_yolo_dataset/val/labels\" # \u7c7b\u522b\u4fe1\u606f\u5217\u4e3e\u7684.names\u6587\u4ef6\uff08\u53ef\u81ea\u5df1\u5199\uff09 classes_label = \"./data/my_data_label.names\" # \u539f\u59cb yolov3-spp.cfg \u7f51\u7edc\u7ed3\u6784\u914d\u7f6e\u6587\u4ef6\uff08\u9700\u8981\u624b\u52a8\u66f4\u65b0\u9884\u6d4b\u5668\u5377\u79ef\u6838 filter \uff09 cfg_path = \"./cfg/yolov3-spp.cfg\" 5.\u9884\u8bad\u7ec3\u6743\u91cd\u4e0b\u8f7d\u5730\u5740(\u4e0b\u8f7d\u540e\u653e\u5165 weights \u6587\u4ef6\u5939) \u00b6 yolov3-spp-ultralytics-416.pt : \u94fe\u63a5: https://pan.baidu.com/s/1cK3USHKxDx-d5dONij52lA \u5bc6\u7801: r3vm yolov3-spp-ultralytics-512.pt : \u94fe\u63a5: https://pan.baidu.com/s/1k5yeTZZNv8Xqf0uBXnUK-g \u5bc6\u7801: e3k1 yolov3-spp-ultralytics-608.pt : \u94fe\u63a5: https://pan.baidu.com/s/1GI8BA0wxeWMC0cjrC01G7Q \u5bc6\u7801: ma3t yolov3spp-voc-512.pt (\u8fd9\u662f\u6211\u5728\u89c6\u9891\u6f14\u793a\u8bad\u7ec3\u4e2d\u5f97\u5230\u7684\u6743\u91cd) : \u94fe\u63a5: https://pan.baidu.com/s/1aFAtaHlge0ieFtQ9nhmj3w \u5bc6\u7801: 8ph3","title":"yolo_spp_code_\u5b66\u4e60\u7b14\u8bb01"},{"location":"YOLO/yolo_spp_code_1/#yolospp-1","text":"github\u5730\u5740","title":"YOLOSPP\u6e90\u7801\u5b66\u4e60-1 \u603b\u4f53\u67b6\u6784"},{"location":"YOLO/yolo_spp_code_1/#1","text":"python 3.6 \u6216\u8005 3.7 pytorch 1.6 \u4ee5\u4e0a\uff08\u9700\u8981\u5b98\u65b9\u63d0\u4f9b\u7684\u6df7\u5408\u7cbe\u5ea6\u8bad\u7ec3\u652f\u6301\uff09 pycocotools 1 2 Linux : pip install pycocotools Windows: pip install pycocotools-windows \u793a\u4f8b\u914d\u7f6e\uff1a numpy==1.17.0 torchvision==0.7.0 opencv_python==4.3.0.36 lxml==4.2.4 torch==1.6.0 scipy==1.4.1 pycocotools==2.0.0 matplotlib==3.2.1 tqdm==4.42.1 tensorboard==2.1.0 PyYAML==5.3.1","title":"1.\u73af\u5883\u914d\u7f6e"},{"location":"YOLO/yolo_spp_code_1/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 \u251c\u2500\u2500 cfg: \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 \u2502 \u251c\u2500\u2500 hyp.yaml: \u8bad\u7ec3\u7f51\u7edc\u7684\u76f8\u5173\u8d85\u53c2\u6570 \u2502 \u2514\u2500\u2500 yolov3-spp.cfg: yolov3-spp\u7f51\u7edc\u7ed3\u6784\u914d\u7f6e \u2502 \u251c\u2500\u2500 data: \u5b58\u50a8\u8bad\u7ec3\u65f6\u6570\u636e\u96c6\u76f8\u5173\u4fe1\u606f\u7f13\u5b58 \u2502 \u2514\u2500\u2500 pascal_voc_classes.json: pascal voc\u6570\u636e\u96c6\u6807\u7b7e \u2502 \u251c\u2500\u2500 runs: \u4fdd\u5b58\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u6240\u6709tensorboard\u76f8\u5173\u6587\u4ef6(\u8bb0\u5f55\u635f\u5931\u3001mAP\u7b49\u4fe1\u606f) \u251c\u2500\u2500 utils: \u642d\u5efa\u8bad\u7ec3\u7f51\u7edc\u65f6\u4f7f\u7528\u5230\u7684\u5de5\u5177 \u2502 \u251c\u2500\u2500 datasets.py: \u6570\u636e\u8bfb\u53d6\u4ee5\u53ca\u9884\u5904\u7406\u65b9\u6cd5 \u2502 \u251c\u2500\u2500 img_utils.py: \u90e8\u5206\u56fe\u50cf\u5904\u7406\u65b9\u6cd5 \u2502 \u251c\u2500\u2500 layers.py: \u5b9e\u73b0\u7684\u4e00\u4e9b\u57fa\u7840\u5c42\u7ed3\u6784 \u2502 \u251c\u2500\u2500 parse_config.py: \u89e3\u6790yolov3-spp.cfg\u6587\u4ef6 \u2502 \u251c\u2500\u2500 torch_utils.py: \u4f7f\u7528pytorch\u5b9e\u73b0\u7684\u4e00\u4e9b\u5de5\u5177 \u2502 \u2514\u2500\u2500 utils.py: \u8bad\u7ec3\u7f51\u7edc\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u5230\u7684\u4e00\u4e9b\u65b9\u6cd5 \u2502 \u251c\u2500\u2500 train_utils: \u8bad\u7ec3\u9a8c\u8bc1\u7f51\u7edc\u65f6\u4f7f\u7528\u5230\u7684\u5de5\u5177(\u5305\u62ec\u591aGPU\u8bad\u7ec3\u4ee5\u53ca\u4f7f\u7528cocotools) \u251c\u2500\u2500 weights: \u6240\u6709\u76f8\u5173\u9884\u8bad\u7ec3\u6743\u91cd(\u4e0b\u9762\u4f1a\u7ed9\u51fa\u767e\u5ea6\u4e91\u7684\u4e0b\u8f7d\u5730\u5740) \u251c\u2500\u2500 model.py: \u6a21\u578b\u642d\u5efa\u6587\u4ef6 \u251c\u2500\u2500 train.py: \u9488\u5bf9\u5355GPU\u6216\u8005CPU\u7684\u7528\u6237\u4f7f\u7528 \u251c\u2500\u2500 train_multi_GPU.py: \u9488\u5bf9\u4f7f\u7528\u591aGPU\u7684\u7528\u6237\u4f7f\u7528 \u251c\u2500\u2500 trans_voc2yolo.py: \u5c06voc\u6570\u636e\u96c6\u6807\u6ce8\u4fe1\u606f(.xml)\u8f6c\u4e3ayolo\u6807\u6ce8\u683c\u5f0f(.txt) \u251c\u2500\u2500 calculate_dataset.py: 1)\u7edf\u8ba1\u8bad\u7ec3\u96c6\u548c\u9a8c\u8bc1\u96c6\u7684\u6570\u636e\u5e76\u751f\u6210\u76f8\u5e94.txt\u6587\u4ef6 \u2502 2)\u521b\u5efadata.data\u6587\u4ef6 \u2502 3)\u6839\u636eyolov3-spp.cfg\u7ed3\u5408\u6570\u636e\u96c6\u7c7b\u522b\u6570\u521b\u5efamy_yolov3.cfg\u6587\u4ef6 \u2514\u2500\u2500 predict_test.py: \u7b80\u6613\u7684\u9884\u6d4b\u811a\u672c\uff0c\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6743\u91cd\u8fdb\u884c\u9884\u6d4b\u6d4b\u8bd5","title":"2.\u6587\u4ef6\u7ed3\u6784"},{"location":"YOLO/yolo_spp_code_1/#3","text":"\u6570\u636e\u96c6\u51c6\u5907\u6559\u7a0b labelimg\u5de5\u5177 \u53ef\u4ee5\u76f4\u63a5\u751f\u6210 yolo \u683c\u5f0f\u7684\u6807\u7b7e\u6587\u4ef6 .txt \u4e3a\u65b9\u4fbf\u56fe\u50cf\u9884\u5904\u7406\uff0c\u5c06\u81ea\u5df1\u6570\u636e\u96c6\u7684\u56fe\u50cf\u5927\u5c0f\u7f29\u653e\u5230\u4e0e coco \u6570\u636e\u96c6\u4e00\u81f4 \u6d4b\u8bd5\u56fe\u8c61\u65f6\u6700\u597d\u5c06\u56fe\u50cf\u7f29\u653e\u5230 32 \u7684\u6574\u6570\u500d \u6570\u636e\u76ee\u5f55\uff1a 1 2 3 4 5 6 7 \u251c\u2500\u2500 my_yolo_dataset \u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u6839\u76ee\u5f55 \u2502 \u251c\u2500\u2500 train \u8bad\u7ec3\u96c6\u76ee\u5f55 \u2502 \u2502 \u251c\u2500\u2500 images \u8bad\u7ec3\u96c6\u56fe\u50cf\u76ee\u5f55 \u2502 \u2502 \u2514\u2500\u2500 labels \u8bad\u7ec3\u96c6\u6807\u7b7e\u76ee\u5f55 \u2502 \u2514\u2500\u2500 val \u9a8c\u8bc1\u96c6\u76ee\u5f55 \u2502 \u251c\u2500\u2500 images \u9a8c\u8bc1\u96c6\u56fe\u50cf\u76ee\u5f55 \u2502 \u2514\u2500\u2500 labels \u9a8c\u8bc1\u96c6\u6807\u7b7e\u76ee\u5f55","title":"3.\u8bad\u7ec3\u6570\u636e\u7684\u51c6\u5907\u4ee5\u53ca\u76ee\u5f55\u7ed3\u6784"},{"location":"YOLO/yolo_spp_code_1/#4","text":"","title":"4.\u6807\u6ce8\u6570\u636e\u96c6\u8f6c\u5316\u4e3a\u76f8\u5173\u51c6\u5907\u6587\u4ef6"},{"location":"YOLO/yolo_spp_code_1/#41-voc-yolo-trans_voc2yolopy","text":"1.\u5c06voc\u6570\u636e\u96c6\u6807\u6ce8\u4fe1\u606f(.xml)\u8f6c\u4e3ayolo\u6807\u6ce8\u683c\u5f0f(.txt)\uff0c\u5e76\u5c06\u56fe\u50cf\u6587\u4ef6\u590d\u5236\u5230\u76f8\u5e94\u6587\u4ef6\u5939 2.\u6839\u636ejson\u6807\u7b7e\u6587\u4ef6\uff0c\u751f\u6210\u5bf9\u5e94names\u6807\u7b7e(my_data_label.names) \u5728 VOC \u5b98\u65b9\u6570\u636e\u96c6\u4e2d\uff0c\u56fe\u7247\u4fe1\u606f\u5728 JPEGImages/ \u6587\u4ef6\u5939\u4e2d\uff0c\u6807\u6ce8\u4fe1\u606f\uff08 xml \u6587\u4ef6\uff09\u5728 Annotations/ \u6587\u4ef6\u5939\u4e2d\uff0c txt \u76ee\u5f55\u5728\u6587\u4ef6\u5939 ImageSets/Main/ \u4e2d \u751f\u6210\u7684\u6587\u4ef6\u5728\u5f53\u524d\u6587\u4ef6\u5939\u7684 data/my_yolo_dataset \u4e2d\uff0c\u4e3a\u751f\u6210\u4ee5\u4e0b\u7684\u51c6\u5907\u6587\u4ef6\u505a\u8f93\u5165 \u4ee3\u7801\u6ce8\u610f\u4e8b\u9879\uff1a tqdm \u5305\u662f\u7528\u6765\u5c01\u88c5\u8fdb\u5ea6\u6761\u4fe1\u606f\u7684\uff0c lxml \u5305\u662f\u7528\u6765\u89e3\u6790 xml \u6587\u4ef6\u7684 \u4e3b\u8981\u4fee\u6539\u7684\u5730\u65b9\u4e3a voc_root \uff0c\u5c06\u5176\u4fee\u6539\u4e3a\u81ea\u5df1\u8ba1\u7b97\u673a VOC \u6570\u636e\u96c6\u6240\u5728\u8def\u5f84 \u6ce8\u610f\u4fee\u6539\u8def\u5f84\u65f6\u5019\uff0cLinux \u7edf\u4e00\u7528 / ,Windows \u7edf\u4e00\u7528 \\\\ ,\u5982\u679c\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u53ef\u4ee5\u76f4\u63a5\u5199\uff0c\u4e5f\u53ef\u4ee5\u5728\u524d\u9762\u52a0 .\\\\ ,\u5982\u679c\u5728\u4e0a\u4e00\u5c42\u6587\u4ef6\u5939\u5219\u4e3a ..","title":"4.1 \u5c06 VOC \u683c\u5f0f\u6570\u636e\u96c6\u6539\u4e3a YOLO \u683c\u5f0f\u6570\u636e\u96c6\u7684\u811a\u672c\u4e3a trans_voc2yolo.py"},{"location":"YOLO/yolo_spp_code_1/#42","text":"1 2 3 4 5 \u251c\u2500\u2500 data \u5229\u7528\u6570\u636e\u96c6\u751f\u6210\u7684\u4e00\u7cfb\u5217\u76f8\u5173\u51c6\u5907\u6587\u4ef6\u76ee\u5f55 \u2502 \u251c\u2500\u2500 my_train_data.txt: \u8be5\u6587\u4ef6\u91cc\u5b58\u50a8\u7684\u662f\u6240\u6709\u8bad\u7ec3\u56fe\u7247\u7684\u8def\u5f84\u5730\u5740 \u2502 \u251c\u2500\u2500 my_val_data.txt: \u8be5\u6587\u4ef6\u91cc\u5b58\u50a8\u7684\u662f\u6240\u6709\u9a8c\u8bc1\u56fe\u7247\u7684\u8def\u5f84\u5730\u5740 \u2502 \u251c\u2500\u2500 my_data_label.names: \u8be5\u6587\u4ef6\u91cc\u5b58\u50a8\u7684\u662f\u6240\u6709\u7c7b\u522b\u7684\u540d\u79f0\uff0c\u4e00\u4e2a\u7c7b\u522b\u5bf9\u5e94\u4e00\u884c(\u8fd9\u91cc\u4f1a\u6839\u636e```.json```\u6587\u4ef6\u81ea\u52a8\u751f\u6210) \u2502 \u2514\u2500\u2500 my_data.data: \u8be5\u6587\u4ef6\u91cc\u8bb0\u5f55\u7684\u662f\u7c7b\u522b\u6570\u7c7b\u522b\u4fe1\u606f\u3001train\u4ee5\u53cavalid\u5bf9\u5e94\u7684txt\u6587\u4ef6 \u811a\u672c: calculate_dataset.py \u751f\u6210\u6587\u4ef6\uff1a my_train_data.txt my_val_data.txt my_data.data \u65b0\u7684my_yolov3.cfg \u8be5\u811a\u672c\u7684\u529f\u80fd\uff1a 1.\u7edf\u8ba1\u8bad\u7ec3\u96c6\u548c\u9a8c\u8bc1\u96c6\u7684\u6570\u636e\u5e76\u751f\u6210\u76f8\u5e94.txt\u6587\u4ef6 2.\u521b\u5efadata.data\u6587\u4ef6\uff0c\u8bb0\u5f55classes\u4e2a\u6570, train\u4ee5\u53caval\u6570\u636e\u96c6\u6587\u4ef6(.txt)\u8def\u5f84\u548clabel.names\u6587\u4ef6\u8def\u5f84 3.\u6839\u636eyolov3-spp.cfg\u521b\u5efamy_yolov3.cfg\u6587\u4ef6\u4fee\u6539\u5176\u4e2d\u7684predictor filters\u4ee5\u53cayolo classes\u53c2\u6570(\u8fd9\u4e24\u4e2a\u53c2\u6570\u662f\u6839\u636e\u7c7b\u522b\u6570\u6539\u53d8\u7684) \u9700\u8981\u4fee\u6539\u7684\u53c2\u6570\uff1a 1 2 3 4 5 6 7 8 # \u8bad\u7ec3\u96c6\u7684 labels \u76ee\u5f55\u8def\u5f84 train_annotation_dir = \"./my_yolo_dataset/train/labels\" # \u9a8c\u8bc1\u96c6\u7684 labels \u76ee\u5f55\u8def\u5f84 val_annotation_dir = \"./my_yolo_dataset/val/labels\" # \u7c7b\u522b\u4fe1\u606f\u5217\u4e3e\u7684.names\u6587\u4ef6\uff08\u53ef\u81ea\u5df1\u5199\uff09 classes_label = \"./data/my_data_label.names\" # \u539f\u59cb yolov3-spp.cfg \u7f51\u7edc\u7ed3\u6784\u914d\u7f6e\u6587\u4ef6\uff08\u9700\u8981\u624b\u52a8\u66f4\u65b0\u9884\u6d4b\u5668\u5377\u79ef\u6838 filter \uff09 cfg_path = \"./cfg/yolov3-spp.cfg\"","title":"4.2 \u6839\u636e\u6446\u653e\u597d\u7684\u6570\u636e\u96c6\u4fe1\u606f\u751f\u6210\u4e00\u7cfb\u5217\u76f8\u5173\u51c6\u5907\u6587\u4ef6"},{"location":"YOLO/yolo_spp_code_1/#5-weights","text":"yolov3-spp-ultralytics-416.pt : \u94fe\u63a5: https://pan.baidu.com/s/1cK3USHKxDx-d5dONij52lA \u5bc6\u7801: r3vm yolov3-spp-ultralytics-512.pt : \u94fe\u63a5: https://pan.baidu.com/s/1k5yeTZZNv8Xqf0uBXnUK-g \u5bc6\u7801: e3k1 yolov3-spp-ultralytics-608.pt : \u94fe\u63a5: https://pan.baidu.com/s/1GI8BA0wxeWMC0cjrC01G7Q \u5bc6\u7801: ma3t yolov3spp-voc-512.pt (\u8fd9\u662f\u6211\u5728\u89c6\u9891\u6f14\u793a\u8bad\u7ec3\u4e2d\u5f97\u5230\u7684\u6743\u91cd) : \u94fe\u63a5: https://pan.baidu.com/s/1aFAtaHlge0ieFtQ9nhmj3w \u5bc6\u7801: 8ph3","title":"5.\u9884\u8bad\u7ec3\u6743\u91cd\u4e0b\u8f7d\u5730\u5740(\u4e0b\u8f7d\u540e\u653e\u5165 weights \u6587\u4ef6\u5939)"},{"location":"YOLO/yolo_spp_code_2/","text":"YOLOSPP\u6e90\u7801\u5b66\u4e60-2 cfg\u6587\u4ef6\u89e3\u6790\u4e0e\u6a21\u578b\u642d\u5efa \u00b6 github\u5730\u5740 6. cfg \u6587\u4ef6\u89e3\u6790 \u00b6 6.1 convolutional \u00b6 \u5377\u79ef + BN + \u6fc0\u6d3b\u51fd\u6570 1 2 3 4 5 6 7 [ convolutional ] batch_normalize = 1 # BN\u5c42\uff0c0\u8868\u793a\u672a\u4f7f\u7528\uff0c1\u8868\u793a\u4f7f\u7528\uff08\u5377\u79ef\u5c42\u504f\u7f6ebias\u8981\u8bbe\u7f6e\u6210Dalse\uff09 filters = 32 # \u5377\u79ef\u5c42\u5377\u79ef\u6838\u4e2a\u6570 size = 3 # \u5377\u79ef\u6838\u7684\u5c3a\u5bf8 stride = 1 # \u5377\u79ef\u6838\u7684\u6b65\u8ddd pad = 1 # 1\u542f\u7528padding,padding=kernel_size//2(\u5411\u4e0b\u53d6\u6574)\uff0c0\u4e0d\u542f\u7528 activation = leaky #\u4f7f\u7528LeakyReLU\u6fc0\u6d3b\u51fd\u6570 6.2 shortcut \u00b6 \u6b8b\u5dee\u7ed3\u6784\u7684\u6377\u5f84\u5206\u652f\uff1a\u8f93\u5165\u4e0e\u4e3b\u5206\u652f\u7684\u77e9\u9635\u8fdb\u884c \u76f8\u52a0 1 2 3 [ shortcut ] from =- 3 # \u4e0e\u524d\u9762\u54ea\u4e00\u5c42\u7684\u8f93\u51fa\u8fdb\u884c\u878d\u5408 activation = linear # \u7ebf\u6027\u6fc0\u6d3b\uff08\u5bf9\u8f93\u51fa\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff09 6.3 maxpool \u00b6 \u6700\u5927\u6c60\u5316\u4e0b\u91c7\u6837\u5c42\uff08\u53ea\u5728 SPP \u7ed3\u6784\u4e2d\u4f7f\u7528\u5230\uff09 1 2 3 [ maxpool ] stride = 1 # \u6c60\u5316\u5c42\u7684\u6b65\u8ddd size = 5 # \u6c60\u5316\u6838\u7684\u5c3a\u5bf8\uff08\u9ed8\u8ba4padding=(size-1)//2\uff09 6.4 route \u00b6 1 2 [ route ] layers =- 4 # \u8fd4\u56de\u5230\u67d0\u4e00\u5c42\u7684\u8f93\u51fa\uff0c\u5728\u5206\u652f\u7ed3\u6784\u4f5c\u6eaf\u56de 1 2 [ route ] layers =- 1 , - 3 , - 5 , - 6 # \u6df1\u5ea6\u65b9\u5411\u62fc\u63a5\u591a\u5c42\u8f93\u51fa\uff08concatenate\uff09 6.5 upsample \u00b6 \u4e0a\u91c7\u6837\u5c42\uff0c\u5b58\u5728\u4e8e\u7279\u5f81\u91d1\u5b57\u5854\u4e2d\u7684 FPN \u5c42 1 2 [ upsample ] stride = 2 # \u4e0a\u91c7\u6837\u500d\u7387 6.6 yolo \u00b6 \u6307\u9884\u6d4b\u5c42\u4e4b\u540e\u7684\u7ed3\u6784 1 2 3 4 5 6 7 8 9 [ yolo ] mask = 3 , 4 , 5 # mask\u5bf9\u5e94\u7684\u5219\u662f\u4e0b\u97629\u4e2aanchor\u7684\u7d22\u5f15 anchors = 10 , 13 , 16 , 30 , 33 , 23 , 30 , 61 , 62 , 45 , 59 , 119 , 116 , 90 , 156 , 198 , 373 , 326 # w,h\u4e24\u4e24\u4e00\u7ec4\uff0c\u524d\u4e09\u7ec4\u68c0\u6d4b\u5c0f\u76ee\u6807\uff0c\u4e2d\u95f4\u4e09\u7ec4\u68c0\u6d4b\u4e2d\u95f4\u76ee\u6807\uff0c\u540e\u4e09\u7ec4\u68c0\u6d4b\u5927\u76ee\u6807 classes = 80 # coco\u6570\u636e\u96c6\u7684\u7c7b\u522b\u53c2\u6570 num = 9 jitter = .3 ignore_thresh = .7 truth_thresh = 1 random = 1 6.7 parse_model_cfg \u00b6 \u89e3\u6790 cfg \u6587\u4ef6\u7684 py \u6587\u4ef6\u4e3a utils \u6587\u4ef6\u5939\u4e0b\u7684 parse_config.py \u5176\u5c06 cfg \u6587\u4ef6\u7684\u76f8\u5173\u53c2\u6570\u5b58\u50a8\u5230\u53d8\u91cf mdefs \u4e2d(module definitions) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 def parse_model_cfg ( path : str ): # \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5b58\u5728 if not path . endswith ( \".cfg\" ) or not os . path . exists ( path ): raise FileNotFoundError ( \"the cfg file not exist...\" ) # \u8bfb\u53d6\u6587\u4ef6\u4fe1\u606f with open ( path , \"r\" ) as f : lines = f . read () . split ( \" \\n \" ) # \u53bb\u9664\u7a7a\u884c\u548c\u6ce8\u91ca\u884c lines = [ x for x in lines if x and not x . startswith ( \"#\" )] # \u53bb\u9664\u6bcf\u884c\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u683c\u7b26 lines = [ x . strip () for x in lines ] mdefs = [] # module definitions for line in lines : if line . startswith ( \"[\" ): # this marks the start of a new block mdefs . append ({}) mdefs [ - 1 ][ \"type\" ] = line [ 1 : - 1 ] . strip () # \u8bb0\u5f55module\u7c7b\u578b # \u5982\u679c\u662f\u5377\u79ef\u6a21\u5757\uff0c\u8bbe\u7f6e\u9ed8\u8ba4\u4e0d\u4f7f\u7528BN if mdefs [ - 1 ][ \"type\" ] == \"convolutional\" : mdefs [ - 1 ][ \"batch_normalize\" ] = 0 else : key , val = line . split ( \"=\" ) key = key . strip () val = val . strip () if key == \"anchors\" : # anchors = 10,13, 16,30, 33,23, 30,61, 62,45, 59,119, 116,90, 156,198, 373,326 val = val . replace ( \" \" , \"\" ) # \u5c06\u7a7a\u683c\u53bb\u9664 mdefs [ - 1 ][ key ] = np . array ([ float ( x ) for x in val . split ( \",\" )]) . reshape (( - 1 , 2 )) # np anchors elif ( key in [ \"from\" , \"layers\" , \"mask\" ]) or ( key == \"size\" and \",\" in val ): mdefs [ - 1 ][ key ] = [ int ( x ) for x in val . split ( \",\" )] else : # TODO: .isnumeric() actually fails to get the float case if val . isnumeric (): # return int or float \u5982\u679c\u662f\u6570\u503c\u7684\u60c5\u51b5 mdefs [ - 1 ][ key ] = int ( val ) if ( int ( val ) - float ( val )) == 0 else float ( val ) else : mdefs [ - 1 ][ key ] = val # return string \u662f\u5b57\u7b26\u7684\u60c5\u51b5 # check all fields are supported supported = [ 'type' , 'batch_normalize' , 'filters' , 'size' , 'stride' , 'pad' , 'activation' , 'layers' , 'groups' , 'from' , 'mask' , 'anchors' , 'classes' , 'num' , 'jitter' , 'ignore_thresh' , 'truth_thresh' , 'random' , 'stride_x' , 'stride_y' , 'weights_type' , 'weights_normalization' , 'scale_x_y' , 'beta_nms' , 'nms_kind' , 'iou_loss' , 'iou_normalizer' , 'cls_normalizer' , 'iou_thresh' , 'probability' ] # \u904d\u5386\u68c0\u67e5\u6bcf\u4e2a\u6a21\u578b\u7684\u914d\u7f6e for x in mdefs [ 1 :]: # 0\u5bf9\u5e94net\u914d\u7f6e # \u904d\u5386\u6bcf\u4e2a\u914d\u7f6e\u5b57\u5178\u4e2d\u7684key\u503c for k in x : if k not in supported : raise ValueError ( \"Unsupported fields: {} in cfg\" . format ( k )) return mdefs 7.\u6a21\u578b\u642d\u5efa \u00b6 \u6a21\u578b\u642d\u5efa\u4ee3\u7801\u518d\u6587\u4ef6 models.py \u4e2d Darknet model: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 class Darknet ( nn . Module ): \"\"\" YOLOv3 spp object detection model \"\"\" def __init__ ( self , cfg , img_size = ( 416 , 416 ), verbose = False ): super ( Darknet , self ) . __init__ () # \u8fd9\u91cc\u4f20\u5165\u7684img_size\u53ea\u5728\u5bfc\u51faONNX\u6a21\u578b\u65f6\u8d77\u4f5c\u7528 self . input_size = [ img_size ] * 2 if isinstance ( img_size , int ) else img_size # \u89e3\u6790\u7f51\u7edc\u5bf9\u5e94\u7684.cfg\u6587\u4ef6 self . module_defs = parse_model_cfg ( cfg ) # \u6839\u636e\u89e3\u6790\u7684\u7f51\u7edc\u7ed3\u6784\u4e00\u5c42\u4e00\u5c42\u53bb\u642d\u5efa self . module_list , self . routs = create_modules ( self . module_defs , img_size ) # \u83b7\u53d6\u6240\u6709YOLOLayer\u5c42\u7684\u7d22\u5f15 self . yolo_layers = get_yolo_layers ( self ) # \u6253\u5370\u4e0b\u6a21\u578b\u7684\u4fe1\u606f\uff0c\u5982\u679cverbose\u4e3aTrue\u5219\u6253\u5370\u8be6\u7ec6\u4fe1\u606f self . info ( verbose ) if not ONNX_EXPORT else None # print model description def forward ( self , x , verbose = False ): return self . forward_once ( x , verbose = verbose ) def forward_once ( self , x , verbose = False ): # yolo_out\u6536\u96c6\u6bcf\u4e2ayolo_layer\u5c42\u7684\u8f93\u51fa # out\u6536\u96c6\u6bcf\u4e2a\u6a21\u5757\u7684\u8f93\u51fa yolo_out , out = [], [] if verbose : print ( '0' , x . shape ) str = \"\" for i , module in enumerate ( self . module_list ): name = module . __class__ . __name__ if name in [ \"WeightedFeatureFusion\" , \"FeatureConcat\" ]: # sum, concat if verbose : l = [ i - 1 ] + module . layers # layers sh = [ list ( x . shape )] + [ list ( out [ i ] . shape ) for i in module . layers ] # shapes str = ' >> ' + ' + ' . join ([ 'layer %g %s ' % x for x in zip ( l , sh )]) x = module ( x , out ) # WeightedFeatureFusion(), FeatureConcat() elif name == \"YOLOLayer\" : yolo_out . append ( module ( x )) else : # run module directly, i.e. mtype = 'convolutional', 'upsample', 'maxpool', 'batchnorm2d' etc. x = module ( x ) out . append ( x if self . routs [ i ] else []) if verbose : print ( ' %g / %g %s -' % ( i , len ( self . module_list ), name ), list ( x . shape ), str ) str = '' if self . training : # train return yolo_out elif ONNX_EXPORT : # export # x = [torch.cat(x, 0) for x in zip(*yolo_out)] # return x[0], torch.cat(x[1:3], 1) # scores, boxes: 3780x80, 3780x4 p = torch . cat ( yolo_out , dim = 0 ) # # \u6839\u636eobjectness\u8651\u9664\u4f4e\u6982\u7387\u76ee\u6807 # mask = torch.nonzero(torch.gt(p[:, 4], 0.1), as_tuple=False).squeeze(1) # # onnx\u4e0d\u652f\u6301\u8d85\u8fc7\u4e00\u7ef4\u7684\u7d22\u5f15\uff08pytorch\u592a\u7075\u6d3b\u4e86\uff09 # # p = p[mask] # p = torch.index_select(p, dim=0, index=mask) # # # \u8651\u9664\u5c0f\u9762\u79ef\u76ee\u6807\uff0cw > 2 and h > 2 pixel # # ONNX\u6682\u4e0d\u652f\u6301bitwise_and\u548call\u64cd\u4f5c # mask_s = torch.gt(p[:, 2], 2./self.input_size[0]) & torch.gt(p[:, 3], 2./self.input_size[1]) # mask_s = torch.nonzero(mask_s, as_tuple=False).squeeze(1) # p = torch.index_select(p, dim=0, index=mask_s) # width-height \u8651\u9664\u5c0f\u76ee\u6807 # # if mask_s.numel() == 0: # return torch.empty([0, 85]) return p else : # inference or test x , p = zip ( * yolo_out ) # inference output, training output x = torch . cat ( x , 1 ) # cat yolo outputs return x , p def info ( self , verbose = False ): \"\"\" \u6253\u5370\u6a21\u578b\u7684\u4fe1\u606f :param verbose: :return: \"\"\" torch_utils . model_info ( self , verbose ) def create_modules ( modules_defs : list , img_size ): \"\"\" Constructs module list of layer blocks from module configuration in module_defs :param modules_defs: \u901a\u8fc7.cfg\u6587\u4ef6\u89e3\u6790\u5f97\u5230\u7684\u6bcf\u4e2a\u5c42\u7ed3\u6784\u7684\u5217\u8868 :param img_size: :param cfg: .cfg\u6587\u4ef6\u7684\u8def\u5f84 :return: \"\"\" img_size = [ img_size ] * 2 if isinstance ( img_size , int ) else img_size # \u5220\u9664\u89e3\u6790cfg\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u914d\u7f6e(\u5bf9\u5e94[net]\u7684\u914d\u7f6e) modules_defs . pop ( 0 ) # cfg training hyperparams (unused) output_filters = [ 3 ] # input channels module_list = nn . ModuleList () # \u7edf\u8ba1\u54ea\u4e9b\u7279\u5f81\u5c42\u7684\u8f93\u51fa\u4f1a\u88ab\u540e\u7eed\u7684\u5c42\u4f7f\u7528\u5230(\u53ef\u80fd\u662f\u7279\u5f81\u878d\u5408\uff0c\u4e5f\u53ef\u80fd\u662f\u62fc\u63a5) routs = [] # list of layers which rout to deeper layers yolo_index = - 1 # \u904d\u5386\u642d\u5efa\u6bcf\u4e2a\u5c42\u7ed3\u6784 for i , mdef in enumerate ( modules_defs ): modules = nn . Sequential () # \u5b58\u50a8\u591a\u5c42\u7ed3\u6784 if mdef [ \"type\" ] == \"convolutional\" : bn = mdef [ \"batch_normalize\" ] # 1 or 0 / use or not filters = mdef [ \"filters\" ] k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] if \"stride\" in mdef else ( mdef [ 'stride_y' ], mdef [ \"stride_x\" ]) if isinstance ( k , int ): modules . add_module ( \"Conv2d\" , nn . Conv2d ( in_channels = output_filters [ - 1 ], out_channels = filters , kernel_size = k , stride = stride , padding = k // 2 if mdef [ \"pad\" ] else 0 , bias = not bn )) else : raise TypeError ( \"conv2d filter size must be int type.\" ) if bn : modules . add_module ( \"BatchNorm2d\" , nn . BatchNorm2d ( filters )) else : # \u5982\u679c\u8be5\u5377\u79ef\u64cd\u4f5c\u6ca1\u6709bn\u5c42\uff0c\u610f\u5473\u7740\u8be5\u5c42\u4e3ayolo\u7684predictor routs . append ( i ) # detection output (goes into yolo layer) if mdef [ \"activation\" ] == \"leaky\" : modules . add_module ( \"activation\" , nn . LeakyReLU ( 0.1 , inplace = True )) else : pass elif mdef [ \"type\" ] == \"BatchNorm2d\" : pass elif mdef [ \"type\" ] == \"maxpool\" : k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] modules = nn . MaxPool2d ( kernel_size = k , stride = stride , padding = ( k - 1 ) // 2 ) elif mdef [ \"type\" ] == \"upsample\" : if ONNX_EXPORT : # explicitly state size, avoid scale_factor g = ( yolo_index + 1 ) * 2 / 32 # gain modules = nn . Upsample ( size = tuple ( int ( x * g ) for x in img_size )) else : modules = nn . Upsample ( scale_factor = mdef [ \"stride\" ]) elif mdef [ \"type\" ] == \"route\" : # [-2], [-1,-3,-5,-6], [-1, 61] layers = mdef [ \"layers\" ] filters = sum ([ output_filters [ l + 1 if l > 0 else l ] for l in layers ]) routs . extend ([ i + l if l < 0 else l for l in layers ]) modules = FeatureConcat ( layers = layers ) elif mdef [ \"type\" ] == \"shortcut\" : layers = mdef [ \"from\" ] filters = output_filters [ - 1 ] # routs.extend([i + l if l < 0 else l for l in layers]) routs . append ( i + layers [ 0 ]) modules = WeightedFeatureFusion ( layers = layers , weight = \"weights_type\" in mdef ) elif mdef [ \"type\" ] == \"yolo\" : yolo_index += 1 # \u8bb0\u5f55\u662f\u7b2c\u51e0\u4e2ayolo_layer [0, 1, 2] stride = [ 32 , 16 , 8 ] # \u9884\u6d4b\u7279\u5f81\u5c42\u5bf9\u5e94\u539f\u56fe\u7684\u7f29\u653e\u6bd4\u4f8b modules = YOLOLayer ( anchors = mdef [ \"anchors\" ][ mdef [ \"mask\" ]], # anchor list nc = mdef [ \"classes\" ], # number of classes img_size = img_size , stride = stride [ yolo_index ]) # Initialize preceding Conv2d() bias (https://arxiv.org/pdf/1708.02002.pdf section 3.3) try : j = - 1 bias_ = module_list [ j ][ 0 ] . bias # shape(255,) \u7d22\u5f150\u5bf9\u5e94Sequential\u4e2d\u7684Conv2d bias = bias_ . view ( modules . na , - 1 ) # shape(3, 85) bias [:, 4 ] += - 4.5 # obj bias [:, 5 :] += math . log ( 0.6 / ( modules . nc - 0.99 )) # cls (sigmoid(p) = 1/nc) module_list [ j ][ 0 ] . bias = torch . nn . Parameter ( bias_ , requires_grad = bias_ . requires_grad ) except Exception as e : print ( 'WARNING: smart bias initialization failure.' , e ) else : print ( \"Warning: Unrecognized Layer Type: \" + mdef [ \"type\" ]) # Register module list and number of output filters module_list . append ( modules ) output_filters . append ( filters ) routs_binary = [ False ] * len ( modules_defs ) for i in routs : routs_binary [ i ] = True return module_list , routs_binary def create_modules ( modules_defs : list , img_size ): \"\"\" Constructs module list of layer blocks from module configuration in module_defs :param modules_defs: \u901a\u8fc7.cfg\u6587\u4ef6\u89e3\u6790\u5f97\u5230\u7684\u6bcf\u4e2a\u5c42\u7ed3\u6784\u7684\u5217\u8868 :param img_size: :param cfg: .cfg\u6587\u4ef6\u7684\u8def\u5f84 :return: \"\"\" img_size = [ img_size ] * 2 if isinstance ( img_size , int ) else img_size # \u5220\u9664\u89e3\u6790cfg\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u914d\u7f6e(\u5bf9\u5e94[net]\u7684\u914d\u7f6e) modules_defs . pop ( 0 ) # cfg training hyperparams (unused) output_filters = [ 3 ] # input channels module_list = nn . ModuleList () # \u7edf\u8ba1\u54ea\u4e9b\u7279\u5f81\u5c42\u7684\u8f93\u51fa\u4f1a\u88ab\u540e\u7eed\u7684\u5c42\u4f7f\u7528\u5230(\u53ef\u80fd\u662f\u7279\u5f81\u878d\u5408\uff0c\u4e5f\u53ef\u80fd\u662f\u62fc\u63a5) routs = [] # list of layers which rout to deeper layers yolo_index = - 1 # \u904d\u5386\u642d\u5efa\u6bcf\u4e2a\u5c42\u7ed3\u6784 for i , mdef in enumerate ( modules_defs ): modules = nn . Sequential () if mdef [ \"type\" ] == \"convolutional\" : bn = mdef [ \"batch_normalize\" ] # 1 or 0 / use or not filters = mdef [ \"filters\" ] k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] if \"stride\" in mdef else ( mdef [ 'stride_y' ], mdef [ \"stride_x\" ]) if isinstance ( k , int ): modules . add_module ( \"Conv2d\" , nn . Conv2d ( in_channels = output_filters [ - 1 ], out_channels = filters , kernel_size = k , stride = stride , padding = k // 2 if mdef [ \"pad\" ] else 0 , bias = not bn )) else : raise TypeError ( \"conv2d filter size must be int type.\" ) if bn : # bn\u5c42\u8f93\u5165\u5373\u4e3a\u4e0a\u5c42\u7684\u8f93\u51fafilters modules . add_module ( \"BatchNorm2d\" , nn . BatchNorm2d ( filters )) else : # \u5982\u679c\u8be5\u5377\u79ef\u64cd\u4f5c\u6ca1\u6709bn\u5c42\uff0c\u610f\u5473\u7740\u8be5\u5c42\u4e3ayolo\u7684predictor routs . append ( i ) # detection output (goes into yolo layer) if mdef [ \"activation\" ] == \"leaky\" : modules . add_module ( \"activation\" , nn . LeakyReLU ( 0.1 , inplace = True )) else : pass elif mdef [ \"type\" ] == \"BatchNorm2d\" : pass elif mdef [ \"type\" ] == \"maxpool\" : k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] modules = nn . MaxPool2d ( kernel_size = k , stride = stride , padding = ( k - 1 ) // 2 ) elif mdef [ \"type\" ] == \"upsample\" : if ONNX_EXPORT : # explicitly state size, avoid scale_factor g = ( yolo_index + 1 ) * 2 / 32 # gain modules = nn . Upsample ( size = tuple ( int ( x * g ) for x in img_size )) else : modules = nn . Upsample ( scale_factor = mdef [ \"stride\" ]) elif mdef [ \"type\" ] == \"route\" : # [-2], [-1,-3,-5,-6], [-1, 61] layers = mdef [ \"layers\" ] filters = sum ([ output_filters [ l + 1 if l > 0 else l ] for l in layers ]) # l+1\u662f\u56e0\u4e3aoutput_filters\u5728\u521d\u59cb\u5316\u5148\u52a0\u5165\u56fe\u50cf\u7684channel[3]\uff0c\u6240\u4ee5\u540e\u9762\u8ba1\u7b97\u987a\u5e8f\u8981\u5f80\u540e\u79fb\u4e00\u4f4d routs . extend ([ i + l if l < 0 else l for l in layers ]) modules = FeatureConcat ( layers = layers ) elif mdef [ \"type\" ] == \"shortcut\" : layers = mdef [ \"from\" ] filters = output_filters [ - 1 ] # routs.extend([i + l if l < 0 else l for l in layers]) routs . append ( i + layers [ 0 ]) modules = WeightedFeatureFusion ( layers = layers , weight = \"weights_type\" in mdef ) elif mdef [ \"type\" ] == \"yolo\" : yolo_index += 1 # \u8bb0\u5f55\u662f\u7b2c\u51e0\u4e2ayolo_layer [0, 1, 2] stride = [ 32 , 16 , 8 ] # \u9884\u6d4b\u7279\u5f81\u5c42\u5bf9\u5e94\u539f\u56fe\u7684\u7f29\u653e\u6bd4\u4f8b modules = YOLOLayer ( anchors = mdef [ \"anchors\" ][ mdef [ \"mask\" ]], # anchor list nc = mdef [ \"classes\" ], # number of classes img_size = img_size , stride = stride [ yolo_index ]) # Initialize preceding Conv2d() bias (https://arxiv.org/pdf/1708.02002.pdf section 3.3) try : j = - 1 bias_ = module_list [ j ][ 0 ] . bias # shape(255,) \u7d22\u5f150\u5bf9\u5e94Sequential\u4e2d\u7684Conv2d bias = bias_ . view ( modules . na , - 1 ) # shape(3, 85) bias [:, 4 ] += - 4.5 # obj bias [:, 5 :] += math . log ( 0.6 / ( modules . nc - 0.99 )) # cls (sigmoid(p) = 1/nc) module_list [ j ][ 0 ] . bias = torch . nn . Parameter ( bias_ , requires_grad = bias_ . requires_grad ) except Exception as e : print ( 'WARNING: smart bias initialization failure.' , e ) else : print ( \"Warning: Unrecognized Layer Type: \" + mdef [ \"type\" ]) # Register module list and number of output filters module_list . append ( modules ) output_filters . append ( filters ) routs_binary = [ False ] * len ( modules_defs ) for i in routs : routs_binary [ i ] = True return module_list , routs_binary","title":"yolo_spp_code_\u5b66\u4e60\u7b14\u8bb02"},{"location":"YOLO/yolo_spp_code_2/#yolospp-2-cfg","text":"github\u5730\u5740","title":"YOLOSPP\u6e90\u7801\u5b66\u4e60-2 cfg\u6587\u4ef6\u89e3\u6790\u4e0e\u6a21\u578b\u642d\u5efa"},{"location":"YOLO/yolo_spp_code_2/#6-cfg","text":"","title":"6. cfg \u6587\u4ef6\u89e3\u6790"},{"location":"YOLO/yolo_spp_code_2/#61-convolutional","text":"\u5377\u79ef + BN + \u6fc0\u6d3b\u51fd\u6570 1 2 3 4 5 6 7 [ convolutional ] batch_normalize = 1 # BN\u5c42\uff0c0\u8868\u793a\u672a\u4f7f\u7528\uff0c1\u8868\u793a\u4f7f\u7528\uff08\u5377\u79ef\u5c42\u504f\u7f6ebias\u8981\u8bbe\u7f6e\u6210Dalse\uff09 filters = 32 # \u5377\u79ef\u5c42\u5377\u79ef\u6838\u4e2a\u6570 size = 3 # \u5377\u79ef\u6838\u7684\u5c3a\u5bf8 stride = 1 # \u5377\u79ef\u6838\u7684\u6b65\u8ddd pad = 1 # 1\u542f\u7528padding,padding=kernel_size//2(\u5411\u4e0b\u53d6\u6574)\uff0c0\u4e0d\u542f\u7528 activation = leaky #\u4f7f\u7528LeakyReLU\u6fc0\u6d3b\u51fd\u6570","title":"6.1 convolutional"},{"location":"YOLO/yolo_spp_code_2/#62-shortcut","text":"\u6b8b\u5dee\u7ed3\u6784\u7684\u6377\u5f84\u5206\u652f\uff1a\u8f93\u5165\u4e0e\u4e3b\u5206\u652f\u7684\u77e9\u9635\u8fdb\u884c \u76f8\u52a0 1 2 3 [ shortcut ] from =- 3 # \u4e0e\u524d\u9762\u54ea\u4e00\u5c42\u7684\u8f93\u51fa\u8fdb\u884c\u878d\u5408 activation = linear # \u7ebf\u6027\u6fc0\u6d3b\uff08\u5bf9\u8f93\u51fa\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff09","title":"6.2 shortcut"},{"location":"YOLO/yolo_spp_code_2/#63-maxpool","text":"\u6700\u5927\u6c60\u5316\u4e0b\u91c7\u6837\u5c42\uff08\u53ea\u5728 SPP \u7ed3\u6784\u4e2d\u4f7f\u7528\u5230\uff09 1 2 3 [ maxpool ] stride = 1 # \u6c60\u5316\u5c42\u7684\u6b65\u8ddd size = 5 # \u6c60\u5316\u6838\u7684\u5c3a\u5bf8\uff08\u9ed8\u8ba4padding=(size-1)//2\uff09","title":"6.3 maxpool"},{"location":"YOLO/yolo_spp_code_2/#64-route","text":"1 2 [ route ] layers =- 4 # \u8fd4\u56de\u5230\u67d0\u4e00\u5c42\u7684\u8f93\u51fa\uff0c\u5728\u5206\u652f\u7ed3\u6784\u4f5c\u6eaf\u56de 1 2 [ route ] layers =- 1 , - 3 , - 5 , - 6 # \u6df1\u5ea6\u65b9\u5411\u62fc\u63a5\u591a\u5c42\u8f93\u51fa\uff08concatenate\uff09","title":"6.4 route"},{"location":"YOLO/yolo_spp_code_2/#65-upsample","text":"\u4e0a\u91c7\u6837\u5c42\uff0c\u5b58\u5728\u4e8e\u7279\u5f81\u91d1\u5b57\u5854\u4e2d\u7684 FPN \u5c42 1 2 [ upsample ] stride = 2 # \u4e0a\u91c7\u6837\u500d\u7387","title":"6.5 upsample"},{"location":"YOLO/yolo_spp_code_2/#66-yolo","text":"\u6307\u9884\u6d4b\u5c42\u4e4b\u540e\u7684\u7ed3\u6784 1 2 3 4 5 6 7 8 9 [ yolo ] mask = 3 , 4 , 5 # mask\u5bf9\u5e94\u7684\u5219\u662f\u4e0b\u97629\u4e2aanchor\u7684\u7d22\u5f15 anchors = 10 , 13 , 16 , 30 , 33 , 23 , 30 , 61 , 62 , 45 , 59 , 119 , 116 , 90 , 156 , 198 , 373 , 326 # w,h\u4e24\u4e24\u4e00\u7ec4\uff0c\u524d\u4e09\u7ec4\u68c0\u6d4b\u5c0f\u76ee\u6807\uff0c\u4e2d\u95f4\u4e09\u7ec4\u68c0\u6d4b\u4e2d\u95f4\u76ee\u6807\uff0c\u540e\u4e09\u7ec4\u68c0\u6d4b\u5927\u76ee\u6807 classes = 80 # coco\u6570\u636e\u96c6\u7684\u7c7b\u522b\u53c2\u6570 num = 9 jitter = .3 ignore_thresh = .7 truth_thresh = 1 random = 1","title":"6.6 yolo"},{"location":"YOLO/yolo_spp_code_2/#67-parse_model_cfg","text":"\u89e3\u6790 cfg \u6587\u4ef6\u7684 py \u6587\u4ef6\u4e3a utils \u6587\u4ef6\u5939\u4e0b\u7684 parse_config.py \u5176\u5c06 cfg \u6587\u4ef6\u7684\u76f8\u5173\u53c2\u6570\u5b58\u50a8\u5230\u53d8\u91cf mdefs \u4e2d(module definitions) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 def parse_model_cfg ( path : str ): # \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5b58\u5728 if not path . endswith ( \".cfg\" ) or not os . path . exists ( path ): raise FileNotFoundError ( \"the cfg file not exist...\" ) # \u8bfb\u53d6\u6587\u4ef6\u4fe1\u606f with open ( path , \"r\" ) as f : lines = f . read () . split ( \" \\n \" ) # \u53bb\u9664\u7a7a\u884c\u548c\u6ce8\u91ca\u884c lines = [ x for x in lines if x and not x . startswith ( \"#\" )] # \u53bb\u9664\u6bcf\u884c\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u683c\u7b26 lines = [ x . strip () for x in lines ] mdefs = [] # module definitions for line in lines : if line . startswith ( \"[\" ): # this marks the start of a new block mdefs . append ({}) mdefs [ - 1 ][ \"type\" ] = line [ 1 : - 1 ] . strip () # \u8bb0\u5f55module\u7c7b\u578b # \u5982\u679c\u662f\u5377\u79ef\u6a21\u5757\uff0c\u8bbe\u7f6e\u9ed8\u8ba4\u4e0d\u4f7f\u7528BN if mdefs [ - 1 ][ \"type\" ] == \"convolutional\" : mdefs [ - 1 ][ \"batch_normalize\" ] = 0 else : key , val = line . split ( \"=\" ) key = key . strip () val = val . strip () if key == \"anchors\" : # anchors = 10,13, 16,30, 33,23, 30,61, 62,45, 59,119, 116,90, 156,198, 373,326 val = val . replace ( \" \" , \"\" ) # \u5c06\u7a7a\u683c\u53bb\u9664 mdefs [ - 1 ][ key ] = np . array ([ float ( x ) for x in val . split ( \",\" )]) . reshape (( - 1 , 2 )) # np anchors elif ( key in [ \"from\" , \"layers\" , \"mask\" ]) or ( key == \"size\" and \",\" in val ): mdefs [ - 1 ][ key ] = [ int ( x ) for x in val . split ( \",\" )] else : # TODO: .isnumeric() actually fails to get the float case if val . isnumeric (): # return int or float \u5982\u679c\u662f\u6570\u503c\u7684\u60c5\u51b5 mdefs [ - 1 ][ key ] = int ( val ) if ( int ( val ) - float ( val )) == 0 else float ( val ) else : mdefs [ - 1 ][ key ] = val # return string \u662f\u5b57\u7b26\u7684\u60c5\u51b5 # check all fields are supported supported = [ 'type' , 'batch_normalize' , 'filters' , 'size' , 'stride' , 'pad' , 'activation' , 'layers' , 'groups' , 'from' , 'mask' , 'anchors' , 'classes' , 'num' , 'jitter' , 'ignore_thresh' , 'truth_thresh' , 'random' , 'stride_x' , 'stride_y' , 'weights_type' , 'weights_normalization' , 'scale_x_y' , 'beta_nms' , 'nms_kind' , 'iou_loss' , 'iou_normalizer' , 'cls_normalizer' , 'iou_thresh' , 'probability' ] # \u904d\u5386\u68c0\u67e5\u6bcf\u4e2a\u6a21\u578b\u7684\u914d\u7f6e for x in mdefs [ 1 :]: # 0\u5bf9\u5e94net\u914d\u7f6e # \u904d\u5386\u6bcf\u4e2a\u914d\u7f6e\u5b57\u5178\u4e2d\u7684key\u503c for k in x : if k not in supported : raise ValueError ( \"Unsupported fields: {} in cfg\" . format ( k )) return mdefs","title":"6.7 parse_model_cfg"},{"location":"YOLO/yolo_spp_code_2/#7","text":"\u6a21\u578b\u642d\u5efa\u4ee3\u7801\u518d\u6587\u4ef6 models.py \u4e2d Darknet model: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 class Darknet ( nn . Module ): \"\"\" YOLOv3 spp object detection model \"\"\" def __init__ ( self , cfg , img_size = ( 416 , 416 ), verbose = False ): super ( Darknet , self ) . __init__ () # \u8fd9\u91cc\u4f20\u5165\u7684img_size\u53ea\u5728\u5bfc\u51faONNX\u6a21\u578b\u65f6\u8d77\u4f5c\u7528 self . input_size = [ img_size ] * 2 if isinstance ( img_size , int ) else img_size # \u89e3\u6790\u7f51\u7edc\u5bf9\u5e94\u7684.cfg\u6587\u4ef6 self . module_defs = parse_model_cfg ( cfg ) # \u6839\u636e\u89e3\u6790\u7684\u7f51\u7edc\u7ed3\u6784\u4e00\u5c42\u4e00\u5c42\u53bb\u642d\u5efa self . module_list , self . routs = create_modules ( self . module_defs , img_size ) # \u83b7\u53d6\u6240\u6709YOLOLayer\u5c42\u7684\u7d22\u5f15 self . yolo_layers = get_yolo_layers ( self ) # \u6253\u5370\u4e0b\u6a21\u578b\u7684\u4fe1\u606f\uff0c\u5982\u679cverbose\u4e3aTrue\u5219\u6253\u5370\u8be6\u7ec6\u4fe1\u606f self . info ( verbose ) if not ONNX_EXPORT else None # print model description def forward ( self , x , verbose = False ): return self . forward_once ( x , verbose = verbose ) def forward_once ( self , x , verbose = False ): # yolo_out\u6536\u96c6\u6bcf\u4e2ayolo_layer\u5c42\u7684\u8f93\u51fa # out\u6536\u96c6\u6bcf\u4e2a\u6a21\u5757\u7684\u8f93\u51fa yolo_out , out = [], [] if verbose : print ( '0' , x . shape ) str = \"\" for i , module in enumerate ( self . module_list ): name = module . __class__ . __name__ if name in [ \"WeightedFeatureFusion\" , \"FeatureConcat\" ]: # sum, concat if verbose : l = [ i - 1 ] + module . layers # layers sh = [ list ( x . shape )] + [ list ( out [ i ] . shape ) for i in module . layers ] # shapes str = ' >> ' + ' + ' . join ([ 'layer %g %s ' % x for x in zip ( l , sh )]) x = module ( x , out ) # WeightedFeatureFusion(), FeatureConcat() elif name == \"YOLOLayer\" : yolo_out . append ( module ( x )) else : # run module directly, i.e. mtype = 'convolutional', 'upsample', 'maxpool', 'batchnorm2d' etc. x = module ( x ) out . append ( x if self . routs [ i ] else []) if verbose : print ( ' %g / %g %s -' % ( i , len ( self . module_list ), name ), list ( x . shape ), str ) str = '' if self . training : # train return yolo_out elif ONNX_EXPORT : # export # x = [torch.cat(x, 0) for x in zip(*yolo_out)] # return x[0], torch.cat(x[1:3], 1) # scores, boxes: 3780x80, 3780x4 p = torch . cat ( yolo_out , dim = 0 ) # # \u6839\u636eobjectness\u8651\u9664\u4f4e\u6982\u7387\u76ee\u6807 # mask = torch.nonzero(torch.gt(p[:, 4], 0.1), as_tuple=False).squeeze(1) # # onnx\u4e0d\u652f\u6301\u8d85\u8fc7\u4e00\u7ef4\u7684\u7d22\u5f15\uff08pytorch\u592a\u7075\u6d3b\u4e86\uff09 # # p = p[mask] # p = torch.index_select(p, dim=0, index=mask) # # # \u8651\u9664\u5c0f\u9762\u79ef\u76ee\u6807\uff0cw > 2 and h > 2 pixel # # ONNX\u6682\u4e0d\u652f\u6301bitwise_and\u548call\u64cd\u4f5c # mask_s = torch.gt(p[:, 2], 2./self.input_size[0]) & torch.gt(p[:, 3], 2./self.input_size[1]) # mask_s = torch.nonzero(mask_s, as_tuple=False).squeeze(1) # p = torch.index_select(p, dim=0, index=mask_s) # width-height \u8651\u9664\u5c0f\u76ee\u6807 # # if mask_s.numel() == 0: # return torch.empty([0, 85]) return p else : # inference or test x , p = zip ( * yolo_out ) # inference output, training output x = torch . cat ( x , 1 ) # cat yolo outputs return x , p def info ( self , verbose = False ): \"\"\" \u6253\u5370\u6a21\u578b\u7684\u4fe1\u606f :param verbose: :return: \"\"\" torch_utils . model_info ( self , verbose ) def create_modules ( modules_defs : list , img_size ): \"\"\" Constructs module list of layer blocks from module configuration in module_defs :param modules_defs: \u901a\u8fc7.cfg\u6587\u4ef6\u89e3\u6790\u5f97\u5230\u7684\u6bcf\u4e2a\u5c42\u7ed3\u6784\u7684\u5217\u8868 :param img_size: :param cfg: .cfg\u6587\u4ef6\u7684\u8def\u5f84 :return: \"\"\" img_size = [ img_size ] * 2 if isinstance ( img_size , int ) else img_size # \u5220\u9664\u89e3\u6790cfg\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u914d\u7f6e(\u5bf9\u5e94[net]\u7684\u914d\u7f6e) modules_defs . pop ( 0 ) # cfg training hyperparams (unused) output_filters = [ 3 ] # input channels module_list = nn . ModuleList () # \u7edf\u8ba1\u54ea\u4e9b\u7279\u5f81\u5c42\u7684\u8f93\u51fa\u4f1a\u88ab\u540e\u7eed\u7684\u5c42\u4f7f\u7528\u5230(\u53ef\u80fd\u662f\u7279\u5f81\u878d\u5408\uff0c\u4e5f\u53ef\u80fd\u662f\u62fc\u63a5) routs = [] # list of layers which rout to deeper layers yolo_index = - 1 # \u904d\u5386\u642d\u5efa\u6bcf\u4e2a\u5c42\u7ed3\u6784 for i , mdef in enumerate ( modules_defs ): modules = nn . Sequential () # \u5b58\u50a8\u591a\u5c42\u7ed3\u6784 if mdef [ \"type\" ] == \"convolutional\" : bn = mdef [ \"batch_normalize\" ] # 1 or 0 / use or not filters = mdef [ \"filters\" ] k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] if \"stride\" in mdef else ( mdef [ 'stride_y' ], mdef [ \"stride_x\" ]) if isinstance ( k , int ): modules . add_module ( \"Conv2d\" , nn . Conv2d ( in_channels = output_filters [ - 1 ], out_channels = filters , kernel_size = k , stride = stride , padding = k // 2 if mdef [ \"pad\" ] else 0 , bias = not bn )) else : raise TypeError ( \"conv2d filter size must be int type.\" ) if bn : modules . add_module ( \"BatchNorm2d\" , nn . BatchNorm2d ( filters )) else : # \u5982\u679c\u8be5\u5377\u79ef\u64cd\u4f5c\u6ca1\u6709bn\u5c42\uff0c\u610f\u5473\u7740\u8be5\u5c42\u4e3ayolo\u7684predictor routs . append ( i ) # detection output (goes into yolo layer) if mdef [ \"activation\" ] == \"leaky\" : modules . add_module ( \"activation\" , nn . LeakyReLU ( 0.1 , inplace = True )) else : pass elif mdef [ \"type\" ] == \"BatchNorm2d\" : pass elif mdef [ \"type\" ] == \"maxpool\" : k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] modules = nn . MaxPool2d ( kernel_size = k , stride = stride , padding = ( k - 1 ) // 2 ) elif mdef [ \"type\" ] == \"upsample\" : if ONNX_EXPORT : # explicitly state size, avoid scale_factor g = ( yolo_index + 1 ) * 2 / 32 # gain modules = nn . Upsample ( size = tuple ( int ( x * g ) for x in img_size )) else : modules = nn . Upsample ( scale_factor = mdef [ \"stride\" ]) elif mdef [ \"type\" ] == \"route\" : # [-2], [-1,-3,-5,-6], [-1, 61] layers = mdef [ \"layers\" ] filters = sum ([ output_filters [ l + 1 if l > 0 else l ] for l in layers ]) routs . extend ([ i + l if l < 0 else l for l in layers ]) modules = FeatureConcat ( layers = layers ) elif mdef [ \"type\" ] == \"shortcut\" : layers = mdef [ \"from\" ] filters = output_filters [ - 1 ] # routs.extend([i + l if l < 0 else l for l in layers]) routs . append ( i + layers [ 0 ]) modules = WeightedFeatureFusion ( layers = layers , weight = \"weights_type\" in mdef ) elif mdef [ \"type\" ] == \"yolo\" : yolo_index += 1 # \u8bb0\u5f55\u662f\u7b2c\u51e0\u4e2ayolo_layer [0, 1, 2] stride = [ 32 , 16 , 8 ] # \u9884\u6d4b\u7279\u5f81\u5c42\u5bf9\u5e94\u539f\u56fe\u7684\u7f29\u653e\u6bd4\u4f8b modules = YOLOLayer ( anchors = mdef [ \"anchors\" ][ mdef [ \"mask\" ]], # anchor list nc = mdef [ \"classes\" ], # number of classes img_size = img_size , stride = stride [ yolo_index ]) # Initialize preceding Conv2d() bias (https://arxiv.org/pdf/1708.02002.pdf section 3.3) try : j = - 1 bias_ = module_list [ j ][ 0 ] . bias # shape(255,) \u7d22\u5f150\u5bf9\u5e94Sequential\u4e2d\u7684Conv2d bias = bias_ . view ( modules . na , - 1 ) # shape(3, 85) bias [:, 4 ] += - 4.5 # obj bias [:, 5 :] += math . log ( 0.6 / ( modules . nc - 0.99 )) # cls (sigmoid(p) = 1/nc) module_list [ j ][ 0 ] . bias = torch . nn . Parameter ( bias_ , requires_grad = bias_ . requires_grad ) except Exception as e : print ( 'WARNING: smart bias initialization failure.' , e ) else : print ( \"Warning: Unrecognized Layer Type: \" + mdef [ \"type\" ]) # Register module list and number of output filters module_list . append ( modules ) output_filters . append ( filters ) routs_binary = [ False ] * len ( modules_defs ) for i in routs : routs_binary [ i ] = True return module_list , routs_binary def create_modules ( modules_defs : list , img_size ): \"\"\" Constructs module list of layer blocks from module configuration in module_defs :param modules_defs: \u901a\u8fc7.cfg\u6587\u4ef6\u89e3\u6790\u5f97\u5230\u7684\u6bcf\u4e2a\u5c42\u7ed3\u6784\u7684\u5217\u8868 :param img_size: :param cfg: .cfg\u6587\u4ef6\u7684\u8def\u5f84 :return: \"\"\" img_size = [ img_size ] * 2 if isinstance ( img_size , int ) else img_size # \u5220\u9664\u89e3\u6790cfg\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u914d\u7f6e(\u5bf9\u5e94[net]\u7684\u914d\u7f6e) modules_defs . pop ( 0 ) # cfg training hyperparams (unused) output_filters = [ 3 ] # input channels module_list = nn . ModuleList () # \u7edf\u8ba1\u54ea\u4e9b\u7279\u5f81\u5c42\u7684\u8f93\u51fa\u4f1a\u88ab\u540e\u7eed\u7684\u5c42\u4f7f\u7528\u5230(\u53ef\u80fd\u662f\u7279\u5f81\u878d\u5408\uff0c\u4e5f\u53ef\u80fd\u662f\u62fc\u63a5) routs = [] # list of layers which rout to deeper layers yolo_index = - 1 # \u904d\u5386\u642d\u5efa\u6bcf\u4e2a\u5c42\u7ed3\u6784 for i , mdef in enumerate ( modules_defs ): modules = nn . Sequential () if mdef [ \"type\" ] == \"convolutional\" : bn = mdef [ \"batch_normalize\" ] # 1 or 0 / use or not filters = mdef [ \"filters\" ] k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] if \"stride\" in mdef else ( mdef [ 'stride_y' ], mdef [ \"stride_x\" ]) if isinstance ( k , int ): modules . add_module ( \"Conv2d\" , nn . Conv2d ( in_channels = output_filters [ - 1 ], out_channels = filters , kernel_size = k , stride = stride , padding = k // 2 if mdef [ \"pad\" ] else 0 , bias = not bn )) else : raise TypeError ( \"conv2d filter size must be int type.\" ) if bn : # bn\u5c42\u8f93\u5165\u5373\u4e3a\u4e0a\u5c42\u7684\u8f93\u51fafilters modules . add_module ( \"BatchNorm2d\" , nn . BatchNorm2d ( filters )) else : # \u5982\u679c\u8be5\u5377\u79ef\u64cd\u4f5c\u6ca1\u6709bn\u5c42\uff0c\u610f\u5473\u7740\u8be5\u5c42\u4e3ayolo\u7684predictor routs . append ( i ) # detection output (goes into yolo layer) if mdef [ \"activation\" ] == \"leaky\" : modules . add_module ( \"activation\" , nn . LeakyReLU ( 0.1 , inplace = True )) else : pass elif mdef [ \"type\" ] == \"BatchNorm2d\" : pass elif mdef [ \"type\" ] == \"maxpool\" : k = mdef [ \"size\" ] # kernel size stride = mdef [ \"stride\" ] modules = nn . MaxPool2d ( kernel_size = k , stride = stride , padding = ( k - 1 ) // 2 ) elif mdef [ \"type\" ] == \"upsample\" : if ONNX_EXPORT : # explicitly state size, avoid scale_factor g = ( yolo_index + 1 ) * 2 / 32 # gain modules = nn . Upsample ( size = tuple ( int ( x * g ) for x in img_size )) else : modules = nn . Upsample ( scale_factor = mdef [ \"stride\" ]) elif mdef [ \"type\" ] == \"route\" : # [-2], [-1,-3,-5,-6], [-1, 61] layers = mdef [ \"layers\" ] filters = sum ([ output_filters [ l + 1 if l > 0 else l ] for l in layers ]) # l+1\u662f\u56e0\u4e3aoutput_filters\u5728\u521d\u59cb\u5316\u5148\u52a0\u5165\u56fe\u50cf\u7684channel[3]\uff0c\u6240\u4ee5\u540e\u9762\u8ba1\u7b97\u987a\u5e8f\u8981\u5f80\u540e\u79fb\u4e00\u4f4d routs . extend ([ i + l if l < 0 else l for l in layers ]) modules = FeatureConcat ( layers = layers ) elif mdef [ \"type\" ] == \"shortcut\" : layers = mdef [ \"from\" ] filters = output_filters [ - 1 ] # routs.extend([i + l if l < 0 else l for l in layers]) routs . append ( i + layers [ 0 ]) modules = WeightedFeatureFusion ( layers = layers , weight = \"weights_type\" in mdef ) elif mdef [ \"type\" ] == \"yolo\" : yolo_index += 1 # \u8bb0\u5f55\u662f\u7b2c\u51e0\u4e2ayolo_layer [0, 1, 2] stride = [ 32 , 16 , 8 ] # \u9884\u6d4b\u7279\u5f81\u5c42\u5bf9\u5e94\u539f\u56fe\u7684\u7f29\u653e\u6bd4\u4f8b modules = YOLOLayer ( anchors = mdef [ \"anchors\" ][ mdef [ \"mask\" ]], # anchor list nc = mdef [ \"classes\" ], # number of classes img_size = img_size , stride = stride [ yolo_index ]) # Initialize preceding Conv2d() bias (https://arxiv.org/pdf/1708.02002.pdf section 3.3) try : j = - 1 bias_ = module_list [ j ][ 0 ] . bias # shape(255,) \u7d22\u5f150\u5bf9\u5e94Sequential\u4e2d\u7684Conv2d bias = bias_ . view ( modules . na , - 1 ) # shape(3, 85) bias [:, 4 ] += - 4.5 # obj bias [:, 5 :] += math . log ( 0.6 / ( modules . nc - 0.99 )) # cls (sigmoid(p) = 1/nc) module_list [ j ][ 0 ] . bias = torch . nn . Parameter ( bias_ , requires_grad = bias_ . requires_grad ) except Exception as e : print ( 'WARNING: smart bias initialization failure.' , e ) else : print ( \"Warning: Unrecognized Layer Type: \" + mdef [ \"type\" ]) # Register module list and number of output filters module_list . append ( modules ) output_filters . append ( filters ) routs_binary = [ False ] * len ( modules_defs ) for i in routs : routs_binary [ i ] = True return module_list , routs_binary","title":"7.\u6a21\u578b\u642d\u5efa"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/","text":"YOLO\u5b66\u4e60\u7b14\u8bb0 \u00b6 1.yolo v1 \u00b6 \u8bba\u6587\u6765\u6e90\uff1a2016CVPR You Only Look Once:Unified,Real-Time Object Detection \u53c2\u8003\u7f51\u7ad9 1.1 \u57fa\u672c\u601d\u60f3\uff1a \u00b6 (1)\u5c06\u4e00\u5e45\u56fe\u50cf\u5206\u6210 S \\times S S \\times S \u4e2a\u7f51\u683c(grid cell)\uff0c\u5982\u679c\u67d0\u4e2a object \u7684\u4e2d\u5fc3\u843d\u5728\u7f51\u683c\u4e4b\u4e2d\uff0c\u5219\u8fd9\u4e2a\u7f51\u683c\u5c31\u8d1f\u8d23\u9884\u6d4b\u8fd9\u4e2a object \u3002 (2)\u6bcf\u4e2a\u7f51\u683c\u9884\u6d4b B \u4e2a bounding box \uff0c\u6bcf\u4e2a bouding box \u9664\u4e86\u8981\u9884\u6d4b\u4f4d\u7f6e (x,y,w,h) \u5916\uff0c\u8fd8\u8981\u9644\u5e26\u4e00\u4e2a confidence \u503c\uff08 yolo \u72ec\u6709\uff0c Faster-RCNN \u548c SSD \u6ca1\u6709\uff09\uff0c\u540c\u65f6\u8fd8\u8981\u9884\u6d4b C \u4e2a\u7c7b\u522b\u7684\u5206\u6570\u3002 eg.Pascal VOC:Our Fianl Prediction is a 7 * 7 * 30 tensor. S = 7 ( grid cell \u4e3a 7 * 7 ) B = 2 ( 2 \u4e2a bounding box ,\u6bcf\u4e2a\u5305\u542b x , y , w , h , confidence ) C = 20 ( classes_num = 20 ) 7 * 7 * (2 * 5 + 20) -> 7 * 7 * 30 \u6bcf\u4e2a bouding box \u7684\u5750\u6807\u662f\u76f8\u5bf9\u503c\uff0c\u53d6\u503c\u5728[0,1] x,y : the center of the box relative to the bounds of the grid cell w,h : the width and height relative to the whole image confidence : Pr(Object) \\times IOU_{pred}^{truth} Pr(Object) \\times IOU_{pred}^{truth} ,\u524d\u8005\u4e3a 0 \u6216 1 \uff0c\u540e\u8005\u4e3a\u9884\u6d4b\u6846\u548c\u5b9e\u9645\u6846\u7684\u4ea4\u5e76\u6bd4 (3)\u7f51\u7edc\u7ed3\u6784\uff1a ImageNet yolov1 \u7684\u7f51\u7edc\u7ed3\u6784\u5e76\u4e0d\u590d\u6742\uff0c\u5982\u4e0b\u56fe\u6240\u793a \u5176\u4e2d s \u4e3a\u6b65\u8ddd stride \u7684\u7b80\u5199\uff0c\u672a\u5199\u7684\u9ed8\u8ba4\u4e3a 1 \u6700\u540e\u4e24\u5c42\uff1a 4096 -> 1470 ->( reshape \u5904\u7406) 7 * 7 * 30 \uff08\u5373\u4e0a\u8ff0\u7684 cell \u7ed3\u6784\uff09 (4) \u6fc0\u6d3b\u51fd\u6570\uff1a leaky ReLU PReLu \u7684 a_i a_i \u662f\u6839\u636e\u6570\u636e\u53d8\u5316\u7684 LeakyReLu \u7684 a_i a_i \u662f\u56fa\u5b9a\u7684 RReLu \u7684 a_{ji} a_{ji} \u662f\u4e00\u4e2a\u7ed9\u5b9a\u8303\u56f4\u968f\u673a\u62bd\u53d6\u7684\u503c 1.2 \u635f\u5931\u51fd\u6570 \u00b6 yolov1 \u7684\u635f\u5931\u51fd\u6570\u7531\u4e09\u90e8\u5206\u7ec4\u6210,\u6240\u7528\u65b9\u6cd5\u4e3a\u8bef\u5dee\u5e73\u65b9\u548c (1) bouding box loss (2) confidence loss (3) classes loss tips: (1) bouding box \u635f\u5931\u4e2d\u7684\u5bbd\u9ad8\u635f\u5931\u8ba1\u7b97\u9700\u8981 \u5f00\u6839\u53f7 \uff0c\u76ee\u7684\u662f \u9632\u6b62\u4e0d\u540c\u5c3a\u5bf8\u7684\u76ee\u6807\u6846\u504f\u79fb\u76f8\u540c\u8ddd\u79bb\u65f6\u7684 loss \u503c\u4e00\u6837 \uff08\u504f\u79fb\u76f8\u540c\u7684\u8ddd\u79bb\uff0c\u5bf9\u4e8e\u5927\u76ee\u6807\u800c\u8a00\uff0c IoU \u8f83\u5927\uff0c\u5219loss\u503c\u5e94\u8be5\u76f8\u5bf9\u8f83\u4f4e\uff1b\u5bf9\u4e8e\u5c0f\u76ee\u6807\u800c\u8a00\uff0c IoU \u8f83\u5c0f\uff0c\u5219loss\u503c\u5e94\u8be5\u76f8\u5bf9\u8f83\u9ad8\uff0c\u6545\u91c7\u7528\u5f00\u6839\u53ef\u4ee5\u8d77\u5230\u5982\u6b64\u6548\u679c\uff09 (2) confidence \u635f\u5931\u8ba1\u7b97\u4e2d\u5206\u4e3a\u6b63\u6837\u672c\u548c\u8d1f\u6837\u672c\u7684\u8ba1\u7b97\uff0c\u6839\u636e\u6b63\u8d1f\u6837\u672c\u771f\u5b9e\u503c {C_i} {C_i} \u53d6 1 \u6216 0 (3) \\lambda \\lambda \u4e3a\u635f\u5931\u51fd\u6570\u7684\u6743\u91cd loss weight * 8 \u7ef4\u7684 localization error \u548c 20 \u7ef4\u7684 classes error \u76f8\u6bd4\uff0c\u524d\u8005\u7684\u6743\u91cd\u9700\u8981\u5927\u4e9b\u624d\u5408\u7406\uff0c\u5373\u5bf9\u5750\u6807\u8d4b\u4e88\u66f4\u5927\u7684 loss weight * \u5982\u679c\u4e00\u4e2a\u7f51\u683c\u4e2d\u6ca1\u6709 object\uff08\u4e00\u5e45\u56fe\u4e2d\u8fd9\u79cd\u7f51\u683c\u5f88\u591a\uff09\uff0c\u90a3\u4e48\u5c31\u4f1a\u5c06\u8fd9\u4e9b\u7f51\u683c\u4e2d\u7684 box \u7684 confidence push\u52300\uff0c\u76f8\u6bd4\u4e8e\u8f83\u5c11\u7684\u6709 object \u7684\u7f51\u683c\uff0c\u8fd9\u79cd\u505a\u6cd5\u662f overpowering \u7684\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7f51\u7edc\u4e0d\u7a33\u5b9a\u751a\u81f3\u53d1\u6563\u3002\u5bf9\u6ca1\u6709 object \u7684 box \u7684 confidence loss\uff0c\u8d4b\u4e88\u5c0f\u7684 loss weight * \u6709 object \u7684 box \u7684 confidence loss \u548c\u7c7b\u522b\u7684 loss \u7684loss weight\u6b63\u5e38\u53d6 1 (4) \u53ea\u6709\u5f53\u67d0\u4e2a\u7f51\u683c\u4e2d\u6709 object \u7684\u65f6\u5019\u624d\u5bf9 classification error \u8fdb\u884c\u60e9\u7f5a;\u53ea\u6709\u5f53\u67d0\u4e2a box predictor \u5bf9\u67d0\u4e2a ground truth box \u8d1f\u8d23\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u5bf9 box \u7684 coordinate error \u8fdb\u884c\u60e9\u7f5a\uff0c\u800c\u5bf9\u54ea\u4e2a ground truth box \u8d1f\u8d23\u5c31\u770b\u5176\u9884\u6d4b\u503c\u548c ground truth box \u7684 IoU \u662f\u4e0d\u662f\u5728\u90a3\u4e2a cell \u7684\u6240\u6709 box \u4e2d\u6700\u5927(NMS)\u3002 1.3 \u5c40\u9650\u6027 \u00b6 (1) \u7fa4\u4f53\u6027\u76ee\u6807\u96be\u9884\u6d4b\uff0c\u4f8b\u5982\u4e00\u7fa4\u98de\u9e1f\uff0c\u4e0d\u9002\u5408\u5bc6\u96c6\u6027\u5bf9\u8c61\uff08\u4e00\u4e2a grid \u4e00\u4e2a\u7c7b\uff09 (2) \u5f53\u76ee\u6807\u51fa\u73b0\u65b0\u7684\u5c3a\u5bf8\u6216\u914d\u7f6e\u65f6\uff0c\u9884\u6d4b\u6027\u80fd\u8f83\u5dee (3) \u5b9a\u4f4d\u4e0d\u51c6\u786e\u662f\u4e3b\u8981\u95ee\u9898\uff08\u7f3a\u5c11 anchor \u5148\u9a8c\u6846 \uff09 2.yolo v2(YOLO9000) \u00b6 \u8bba\u6587\u6765\u6e90\uff1a2017CVPR YOLO9000:Better,Faster,Stronger \u53c2\u8003\u7f51\u7ad9 2.1 \u6539\u8fdb \u00b6 (1) Batch Normalization : \u5728\u6bcf\u4e2a\u5377\u79ef\u5c42\u540e\u90fd\u589e\u52a0\u4e86BN\u5c42 \u66f4\u597d\u6536\u655b\uff08\u6bcf\u5c42\u8f93\u5165\u6570\u636e\u5206\u5e03\u7a33\u5b9a\u5728\u68af\u5ea6\u975e\u9971\u548c\u533a\uff0c\u52a0\u5feb\u5b66\u4e60\u901f\u5ea6\uff0c\u9632\u6b62\u68af\u5ea6\u6d88\u5931\uff09 \u51cf\u5c11\u5176\u4ed6\u5f62\u5f0f\u7684\u6b63\u5219\u5316\u5904\u7406 \u53ef\u4ee5\u66ff\u4ee3 dropout \u64cd\u4f5c\uff08\u9632\u6b62\u8fc7\u62df\u5408\uff09 (2) High Resolution Classifier : 224 * 224 -> 448 * 448 (3) Convolutinal With Anchor Boxes \uff1a\u5c0f\u5e45\u5ea6\u964d\u4f4e\u4e86 mAP \uff0c\u4f46\u5927\u5e45\u63d0\u5347\u4e86\u53ec\u56de\u7387\uff08\u67e5\u5168\u7387\uff09 \u9884\u6d4b\u504f\u79fb\u91cf\u6bd4\u9884\u6d4b\u5750\u6807\u503c(yolov1)\u66f4\u80fd\u7b80\u5316\u5de5\u4f5c (4) Dimention Cluster : \u57fa\u4e8e\u8bad\u7ec3\u96c6\u91c7\u7528 k-means \u805a\u7c7b\u7684\u65b9\u6cd5\u5f97\u5230 anchor(priors) (5) Direct Location prediction : \u4f7f\u6bcf\u4e2a anchor(prior) \u53bb\u9884\u6d4b\u76ee\u6807\u4e2d\u5fc3\u843d\u5728\u67d0\u4e2a grid cell \u533a\u57df\u5185\u7684\u76ee\u6807(\u9632\u6b62\u52a0\u4e0a\u9884\u6d4b\u504f\u79fb\u91cf\u4f1a\u5bfc\u81f4\u5efa\u8bae\u6846\u51fa\u73b0\u5728\u56fe\u7247\u4efb\u610f\u4e00\u4e2a\u5730\u65b9)\uff0c\u7f51\u7edc\u66f4\u6613\u4e8e\u5b66\u4e60\u548c\u66f4\u52a0\u7a33\u5b9a b_x,b_y,b_w,b_h b_x,b_y,b_w,b_h \u662f\u9884\u6d4b\u6846\u7684\u4e2d\u5fc3\u548c\u5bbd\u9ad8\uff0c Pr(object)*IOU(b,object) Pr(object)*IOU(b,object) \u662f\u9884\u6d4b\u6846\u7684\u7f6e\u4fe1\u5ea6\uff0c\u8fd9\u91cc\u5bf9\u9884\u6d4b\u53c2\u6570 t_o t_o \u8fdb\u884c \\sigma \\sigma \u53d8\u6362\u540e\u4f5c\u4e3a\u7f6e\u4fe1\u5ea6\u7684\u503c c_x,c_y c_x,c_y \u662f\u5f53\u524d\u7f51\u683c\u5de6\u4e0a\u89d2\u5230\u56fe\u50cf\u5de6\u4e0a\u89d2\u7684\u8ddd\u79bb\uff0c\u8981\u5148\u5bf9\u4e00\u4e2a\u7f51\u683c\u5927\u5c0f\u5f52\u4e00\u5316 p_w,p_h p_w,p_h \u662f\u5148\u9a8c\u6846\u7684\u5bbd\u548c\u9ad8 \\sigma \\sigma \u662f sigmoid \u51fd\u6570 t_x,t_y,t_w,t_h,t_o t_x,t_y,t_w,t_h,t_o \u662f\u8981\u5b66\u4e60\u7684\u53c2\u6570\uff0c\u5206\u522b\u7528\u4e8e\u9884\u6d4b\u8fb9\u6846\u7684\u4e2d\u5fc3\u5bbd\u9ad8\u548c\u7f6e\u4fe1\u5ea6 (6) Fine-Grained Features : \u5bf9\u4e8e\u5c0f\u76ee\u6807\u7684\u9884\u6d4b\uff0c\u540c\u65f6\u878d\u5408\u4e86\u9ad8\u5c42\u548c\u4f4e\u5c42\u7684\u7279\u5f81\u5c42\uff0c\u589e\u52a0\u4e86 passthrough layer \u7684\u5904\u7406 (7) Multi-Scale Training \uff1a\u6bcf\u8fed\u4ee3 10 \u4e2a batch \uff0c\u5c31\u6539\u53d8\u8f93\u5165\u5c3a\u5bf8\u7684\u5927\u5c0f\uff0c\u5c3a\u5bf8\u5747\u4e3a 32 \u7684\u6574\u6570\u500d\uff0c\u8303\u56f4\u5728{320,352\uff0c\u2026\u2026,608} 2.2 \u7f51\u7edc\u7ed3\u6784 \u00b6 \u56fe\u4e2d\u7684\u6bcf\u4e2a convolutional \u90fd\u662f\u7531 \u5377\u79ef\u5c42(Conv2D)\u3001 BN \u5c42\u3001\u6fc0\u6d3b\u51fd\u6570(LeakyReLU) \u7ec4\u6210\uff0c\u6700\u540e\u4e00\u5c42\u53ea\u6709\u4e00\u4e2a\u5355\u5377\u79ef\u5c42\u4f5c\u4e3a\u9884\u6d4b\u5668 Size \u4e2d\u672a\u6807\u6b65\u8ddd\u7684\u9ed8\u8ba4\u4e3a 1 backbone \u4e2d\u7684 Darknet19 (\u7531 19 \u4e2a\u5377\u79ef\u5c42) \u79fb\u9664\u4e86\u6700\u540e\u4e00\u5c42\u5377\u79ef\u5c42\u53ca\u5176\u4e4b\u540e\u7684\u5c42\uff0c\u540e\u9762\u6dfb\u52a0\u4e86 3 \u4e2a 3 * 3 \u7684 1024 \u6838\u5377\u79ef\u5c42 \u6700\u540e\u9884\u6d4b\u7684 125 \u4e2a\u53c2\u6570\u5373\u4e3a 5 \u4e2a boundingbox \uff0c\u5176\u4e2d\u5305\u62ec x , y , w , h , confidence ,\u4ee5\u53ca 20 \u4e2a\u7c7b\u522b PassThrough Layer \u4f5c\u4e3a\u9ad8\u4f4e\u5c42\u7684\u7279\u5f81\u5c42\u878d\u5408\u9014\u5f84\uff08\u9632\u6b62\u5c0f\u76ee\u6807\u5728\u9ad8\u5c42\u6ca1\u88ab\u63d0\u53d6\u51fa\u6765\uff09\uff0c\u5176\u4e2d 26 * 26 * 64 \u53d8\u6210 13 * 13 * 256 \u7684\u539f\u7406\u5982\u4e0b\u56fe\u6240\u793a 3.yolo v3 \u00b6 \u8bba\u6587\u6765\u6e90\uff1a 2018CVPR YOLOv3: An Incremental Improvement 3.1 backbone \u7ed3\u6784( darknet53 ) \u00b6 53\u4e2a\u5377\u79ef\u5c42\uff08\u5305\u62ec\u6700\u540e\u7684 Connnected \uff09\uff0c\u5176\u4e2d convolutianl \u5747\u7531 \u5377\u79ef\u5c42\uff0c BN \u5c42\uff0c\u6fc0\u6d3b\u51fd\u6570(LeakyRelu) \u7ec4\u6210\uff0c\u6b8b\u5dee\u7ed3\u6784\u5747\u4e3a \u4e3b\u5206\u652f\u548c\u6377\u5f84\u5206\u652f \u7684\u76f8\u52a0\u7ed3\u6784 \u6ca1\u6709 maxpolling \u5c42\uff0c\u4e0b\u91c7\u6837\u5747\u7531\u5377\u79ef\u5c42\u5904\u7406( size \u4e3a 2 ) 3.2 \u6a21\u578b\u7ed3\u6784 \u00b6 yolov3 \u5728 3 \u4e2a\u7279\u5f81\u5c42\u8fdb\u884c\u9884\u6d4b\uff0c\u6bcf\u4e2a\u7279\u5f81\u5c42\u91c7\u7528 3 \u79cd\u5c3a\u5ea6\u7684 bounding box priors (\u5373 anchor ,\u540c\u6837\u57fa\u4e8e k-means \u805a\u7c7b),\u53c2\u6570\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6bcf\u4e2a\u7279\u5f81\u5c42\u7684\u9884\u6d4b\u53c2\u6570\u4e2a\u6570\u4e3a N \\times N \\times [3 * (4 + 1 + 80)] N \\times N \\times [3 * (4 + 1 + 80)] ,\u5176\u4e2d 80 \u4e3a\u79cd\u7c7b\u6570\uff08 CoCo \u6570\u636e\u96c6\uff09 Up Sampling \u4e3a\u4e0a\u91c7\u6837\u5c42\uff0c\u9ad8\u548c\u5bbd\u4f1a\u6269\u5927\u4e3a\u539f\u6765\u7684 2 \u500d\uff0c\u6269\u5927\u540e\u4fbf\u53ef\u4e0e\u539f\u6765\u4f4e\u5c42\u7684\u8f93\u51fa\u8fdb\u884c concatenate \uff0c\u5373\u8fdb\u884c\u6df1\u5ea6\u4e0a\u7684\u62fc\u63a5\uff08 13 -> 26 -> 52 \uff09 \u7279\u5f81\u56fe 1 \u5c3a\u5bf8\u4e3a 13 * 13,\u7528\u6765\u9884\u6d4b\u76f8\u5bf9\u8f83\u5927\u7684\u76ee\u6807\uff1b\u7279\u5f81\u56fe 2 \u5c3a\u5bf8\u4e3a 26 * 26,\u7528\u6765\u9884\u6d4b\u5927\u5c0f\u4e2d\u7b49\u7684\u76ee\u6807\uff1b\u7279\u5f81\u56fe 3 \u5c3a\u5bf8\u4e3a 52 * 52\uff0c\u7528\u6765\u9884\u6d4b\u76f8\u5bf9\u8f83\u5c0f\u7684\u76ee\u6807 3.3 \u76ee\u6807\u8fb9\u754c\u6846\u7684\u9884\u6d4b\u4e0e\u6b63\u8d1f\u6837\u672c\u5339\u914d \u00b6 \\sigma \\sigma \u51fd\u6570\u5373\u4e3a sigmoid \u51fd\u6570\uff0c\u5c06\u9884\u6d4b\u7684\u589e\u91cf\u9650\u5236\u5728\u4e00\u5b9a\u8303\u56f4\u4f7f anchor \u4e0d\u4f1a\u8d85\u51fa\u5bf9\u5e94\u7684 grid cell \u4e0e ground truth \u7684 \u91cd\u5408\u5ea6\u6700\u5927\u7684 bounding box \u5b9a\u4e3a\u6b63\u6837\u672c\uff0c\u91cd\u5408\u5ea6\u4e0d\u662f\u6700\u5927\u4f46\u5927\u4e8e\u9608\u503c\u7684\u5219\u5ffd\u89c6\uff08\u4e0d\u4f5c\u4e3a\u6837\u672c\uff0c\u5373\u4e0d\u8ba1\u7b97\u76ee\u6807\u6846\u635f\u5931 loss for coordinate prediction \u548c\u7c7b\u522b\u635f\u5931 loss for class prediction ,\u4ec5\u8ba1\u7b97\u7f6e\u4fe1\u5ea6 objectness \uff09\uff0c\u5176\u4f59\u7684\u5219\u4e3a\u8d1f\u6837\u672c 3.4 \u635f\u5931\u51fd\u6570 \u00b6 YOLOv3 \u7684\u635f\u5931\u51fd\u6570\u4e3b\u8981\u5206\u4e3a 3 \u4e2a\u90e8\u5206\uff1a\u76ee\u6807\u7f6e\u4fe1\u5ea6\u635f\u5931 L_{conf}(o,c) L_{conf}(o,c) ,\u76ee\u6807\u5206\u7c7b\u635f\u5931 L_{cla}(O,C) L_{cla}(O,C) \u548c\u76ee\u6807\u5b9a\u4f4d\u504f\u79fb\u91cf\u635f\u5931 L_{loc}(l,g) L_{loc}(l,g) , \\lambda_1,\\lambda_2,\\lambda_3 \\lambda_1,\\lambda_2,\\lambda_3 \u4e3a\u5e73\u8861\u7cfb\u6570 L(O,o,C,c,l,g) = \\lambda_1 L_{conf}(o,c) + \\lambda_2 L_{cla}(O,C) + \\lambda_3 L_{loc}(l,g) L(O,o,C,c,l,g) = \\lambda_1 L_{conf}(o,c) + \\lambda_2 L_{cla}(O,C) + \\lambda_3 L_{loc}(l,g) 3.4.1 \u76ee\u6807\u7f6e\u4fe1\u5ea6\u635f\u5931\uff08\u4e8c\u503c\u4ea4\u53c9\u71b5\uff09 \u00b6 L_{conf}(o,c)=- \\frac{\\sum_i(o_i ln(\\hat{c_i})+(1-o_i) ln(1-\\hat{c_i}))}{N} L_{conf}(o,c)=- \\frac{\\sum_i(o_i ln(\\hat{c_i})+(1-o_i) ln(1-\\hat{c_i}))}{N} \\hat{c_i}=sigmoid(c_i) \\hat{c_i}=sigmoid(c_i) o_i \\in [0,1] o_i \\in [0,1] ,\u8868\u793a\u76ee\u6807\u8fb9\u754c\u4e0e\u771f\u5b9e\u8fb9\u754c(ground truth)\u7684 IoU ,c \u4e3a\u9884\u6d4b\u503c\uff0c \\hat{c_i} \\hat{c_i} \u4e3a c \u901a\u8fc7 sigmoid \u51fd\u6570\u5f97\u5230\u7684\u9884\u6d4b\u7f6e\u4fe1\u5ea6\uff0c N \u4e3a\u6b63\u8d1f\u6837\u672c\u4e2a\u6570 3.4.2 \u76ee\u6807\u7c7b\u522b\u635f\u5931\uff08\u4e8c\u503c\u4ea4\u53c9\u71b5\uff09 \u00b6 L_{cla}(O,C) = - \\frac{ \\sum_{i \\in pos} \\sum_{j \\in cla} (O_{ij} ln(\\hat{C_{ij}}) + (1-O_{ij}) ln(1- \\hat{C_{ij}}))}{N_{pos}} L_{cla}(O,C) = - \\frac{ \\sum_{i \\in pos} \\sum_{j \\in cla} (O_{ij} ln(\\hat{C_{ij}}) + (1-O_{ij}) ln(1- \\hat{C_{ij}}))}{N_{pos}} \\hat{C_{ij}}=sigmoid(C_{ij}) \\hat{C_{ij}}=sigmoid(C_{ij}) O_{ij} \\in {\\{0,1\\}} O_{ij} \\in {\\{0,1\\}} \uff0c\u8868\u793a\u76ee\u6807\u8fb9\u754c\u6846 i \u4e2d\u662f\u5426\u5b58\u5728\u7b2c j \u7c7b\u76ee\u6807\uff0c C_{ij} C_{ij} \u4e3a\u76ee\u6807\u503c, \\hat {C_{ij}} \\hat {C_{ij}} \u4e3a C_{ij} C_{ij} \u901a\u8fc7 sigmoid \u51fd\u6570\u5f97\u5230\u7684\u76ee\u6807\u6982\u7387\uff0c N_{pos} N_{pos} \u4e3a\u6b63\u6837\u672c\u4e2a\u6570 3.4.3 \u76ee\u6807\u5b9a\u4f4d\u635f\u5931 \u00b6 L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h) \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h) 3.5 yolov3 SPP \u00b6 yolov3-SPP-ultralytics \u4e2d\u6709\u8bb8\u591a\u63d0\u5347\u6548\u80fd\u7684 tricks 3.5.1 Mosaic \u56fe\u50cf\u589e\u5f3a \u00b6 \u5c06\u82e5\u5e72\u4e2a\u539f\u56fe\u50cf\u8fdb\u884c\u62fc\u63a5\u5f62\u6210\u65b0\u56fe\u50cf\uff0c\u589e\u5f3a\u540e\u4e00\u5f20\u56fe\u50cf\u7684\u4fe1\u606f\u5c31\u5305\u542b\u539f\u672c\u591a\u5f20\u56fe\u50cf\u7684\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e \uff081\uff09 \u589e\u52a0\u6570\u636e\u7684\u591a\u6837\u6027 \uff082\uff09 \u589e\u52a0\u76ee\u6807\u4e2a\u6570 \uff083\uff09 BN \u80fd\u4e00\u6b21\u6027\u7edf\u8ba1\u591a\u5f20\u56fe\u7247\u7684\u53c2\u6570 3.5.2 SPP\u6a21\u5757 \u00b6 \u76f8\u6bd4\u4e8e\u539f\u7f51\u7edc\u589e\u52a0\u4e86 SPP \u6a21\u5757 \uff08\u5728\u539f\u7f51\u7edc\u4e2d\u7684 convolutianal set \u63d2\u5165\uff09\uff0c\u5305\u542b 3 \u8def\u6700\u5927\u6c60\u5316\u5c42\uff0c\u5c06 4 \u8def\u7279\u5f81\u8fdb\u884c concatenate \u62fc\u63a5(512->2048) 3.5.3 \u635f\u5931\u51fd\u6570\u7684\u8fdb\u5316\uff1aGIoU Loss \u00b6 (1) l2 :\u539f yolov3 \u91c7\u7528\u7684\u76ee\u6807\u5b9a\u4f4d\u635f\u5931\u4e3a l2 \u635f\u5931 L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h) \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h) \u4f1a\u51fa\u73b0\u635f\u5931\u76f8\u540c\u4f46 IoU \u5dee\u8ddd\u660e\u663e\u7684\u7684\u60c5\u51b5 (2) IoU Loss = -ln IoU \u6216\u8005 IoU Loss = 1 - IoU \u80fd\u591f\u66f4\u597d\u5730\u53cd\u5e94\u91cd\u5408\u7a0b\u5ea6\uff0c\u5177\u6709\u5c3a\u5ea6\u4e0d\u53d8\u6027\uff0c\u4f46\u5f53\u4e0d\u76f8\u4ea4\u65f6 loss \u4e3a 0 \uff0c\u4e0d\u7b26\u5408\u5b9e\u9645\u60c5\u51b5 (3) GIoU Loss = 1 - GIoU GIoU = IoU - \\frac{A^c-U}{A^c} GIoU = IoU - \\frac{A^c-U}{A^c} -1 \\leq GIoU \\leq 1 -1 \\leq GIoU \\leq 1 0 \\leq GIoU Loss \\leq 2 0 \\leq GIoU Loss \\leq 2 \u5176\u4e2d\uff0c\u7eff\u8272\u77e9\u5f62\u6846\u4e3a ground truth ,\u7ea2\u8272\u77e9\u5f62\u6846\u9884\u6d4b\u6846\uff0c\u84dd\u8272\u77e9\u5f62\u6846\u4e3a\u540c\u65f6\u5305\u542b\u5b83\u4eec\u7684\u6700\u5c0f\u77e9\u5f62\u6846\uff0c A^c A^c \u5219\u4e3a\u84dd\u8272\u77e9\u5f62\u6846\u9762\u79ef\u3002 \u5f53\u5176\u91cd\u5408\u65f6\uff0c GIoU = 1 \uff1b\u5f53\u5176\u76f8\u8ddd\u65e0\u7a77\u8fdc\u65f6\uff0c GIoU = -1 (4) DIoU Loss = 1 - DIoU DIoU = IoU -\\frac{\\rho^2(b,b^{gt})}{c^2} = IoU - \\frac{d^2}{c^2} DIoU = IoU -\\frac{\\rho^2(b,b^{gt})}{c^2} = IoU - \\frac{d^2}{c^2} $-1 \\leq DIoU \\leq 1 $ 0 \\leq DIoU Loss \\leq 2 0 \\leq DIoU Loss \\leq 2 \u5176\u4e2d\uff0c \\rho^2(b,b^{gt}) \\rho^2(b,b^{gt}) \u5373\u4e3a\u9884\u6d4b\u6846\u548c grounding box \u4e2d\u5fc3\u70b9\u7684\u6b27\u6c0f\u8ddd\u79bb d , c \u5219\u4e3a\u5305\u542b\u8fd9\u4e24\u4e2a\u6846\u7684\u6700\u5c0f\u77e9\u5f62\u6846\u7684\u5bf9\u89d2\u7ebf\u957f\u5ea6\u3002 DIoU\u635f\u5931\u80fd\u591f\u76f4\u63a5\u6700\u5c0f\u5316\u4e24\u4e2a boxes \u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u56e0\u6b64\u6536\u655b\u901f\u5ea6\u66f4\u5feb (5) CIoU Loss = 1 - CIoU CIoU = IoU - (\\frac{\\rho^2(b,b^{gt})}{c^2}+\\alpha \\upsilon) CIoU = IoU - (\\frac{\\rho^2(b,b^{gt})}{c^2}+\\alpha \\upsilon) \\upsilon = \\frac{4}{\\pi^2}(\\arctan \\frac{w^{gt}}{h^{gt}}-\\arctan \\frac{w}{h})^2 \\upsilon = \\frac{4}{\\pi^2}(\\arctan \\frac{w^{gt}}{h^{gt}}-\\arctan \\frac{w}{h})^2 \\alpha = \\frac{\\upsilon}{(1-IoU)+\\upsilon} \\alpha = \\frac{\\upsilon}{(1-IoU)+\\upsilon} \u4e00\u4e2a\u4f18\u79c0\u7684\u56de\u5f52\u5b9a\u4f4d\u635f\u5931\u5e94\u8be5\u8003\u8651\u5230 3 \u79cd\u51e0\u4f55\u53c2\u6570\uff1a \u91cd\u53e0\u9762\u79ef \u4e2d\u5fc3\u70b9\u8ddd\u79bb \u957f\u5bbd\u6bd4 3.5.4 \u5e94\u5bf9\u6b63\u8d1f\u6837\u672c\u6570\u91cf\u4e0d\u5e73\u8861\uff1a Focal Loss \u00b6 (1) \u5bf9\u4e8e\u666e\u901a\u7684\u4ea4\u53c9\u71b5\u635f\u5931\uff08\u4e8c\u5206\u7c7b\uff09CE (cross entropy) \u800c\u8a00\uff1a CE(p,y) =\\begin{cases} -ln(p) & y = 1 \\\\ -ln(1-p) & otherwise \\\\ \\end{cases} CE(p,y) =\\begin{cases} -ln(p) & y = 1 \\\\ -ln(1-p) & otherwise \\\\ \\end{cases} \u6216 p_t = \\begin{cases} p & y =1 \\\\ 1 - p & otherwise \\\\ \\end{cases} p_t = \\begin{cases} p & y =1 \\\\ 1 - p & otherwise \\\\ \\end{cases} CE(p,y)=CE(p_t)=-ln(p_t) CE(p,y)=CE(p_t)=-ln(p_t) (2) \u5f15\u5165\u5e73\u8861\u56e0\u5b50(Balanced Cross Entropy) CE(p_t)=-\\alpha_t ln(p_t) CE(p_t)=-\\alpha_t ln(p_t) \\alpha \\alpha \u4e3a\u7528\u4e8e\u5e73\u8861\u6b63\u8d1f\u6837\u672c\u7684\u8d85\u53c2\u6570 (3) \u52a0\u5165\u53ef\u4ee5\u533a\u5206\u96be\u6613\u6837\u672c\u7684\u53c2\u6570 FL(p_t)=-(1-p_t)^\\gamma log(p_t) FL(p_t)=-(1-p_t)^\\gamma log(p_t) (1-p_t)^\\gamma (1-p_t)^\\gamma \u80fd\u591f\u964d\u4f4e\u6613\u5206\u6837\u672c\u7684\u635f\u5931\u8d21\u732e\uff0c\u4f7f\u5f97\u6a21\u578b\u4e13\u6ce8\u8bad\u7ec3\u590d\u6742\u6837\u672c (4) \u7ed3\u5408\u8d85\u53c2\u6570 FL(p_t) = -\\alpha_t(1-p_t)^\\gamma ln(p_t) FL(p_t) = -\\alpha_t(1-p_t)^\\gamma ln(p_t) \u5373 FL(p)=\\begin{cases} -\\alpha (1-p)^\\gamma ln(p) & y = 1 \\\\ -(1-\\alpha)p^\\gamma ln(1-p) & otherwise \\\\ \\end{cases} FL(p)=\\begin{cases} -\\alpha (1-p)^\\gamma ln(p) & y = 1 \\\\ -(1-\\alpha)p^\\gamma ln(1-p) & otherwise \\\\ \\end{cases} \u7531\u6570\u636e\u53ef\u77e5\uff0c\u5bf9\u4e8e\u7b80\u5355\u6837\u672c Focal Loss \u76f8\u6bd4\u4e8e CE \u964d\u4f4e\u4e86\u7b80\u5355\u6837\u672c\u7684\u635f\u5931\u8d21\u732e\u7387\uff0c\u4f7f\u5f97\u6a21\u578b\u66f4\u597d\u5730\u8bad\u7ec3\u96be\u5b66\u4e60\u6837\u672c FocalLoss \u6613\u53d7\u566a\u58f0\u5e72\u6270\uff0c\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u9700\u8981\u8fdb\u884c\u8c03\u53c2\uff0c\u540c\u65f6\u4e5f\u8981\u4fdd\u8bc1\u6570\u636e\u96c6\u7684\u6807\u6ce8\u7cbe\u51c6\u5ea6\uff0c\u5426\u5219\u4e5f\u4f1a\u4f7f\u6548\u679c\u4e0b\u964d 4.yolov4 \u00b6 Yolov4: Optimal Speed and Accuracy of Object Detection 4.1 \u7f51\u7edc\u7ed3\u6784 \u00b6 \u57fa\u7840\u4ecd\u662f yolov3 \u7f51\u7edc\uff0cbackbone \u4e3a CSPDarknet53 \uff0cResblock \u4e3a\u6b8b\u5dee\u7ed3\u6784 SPP \u901a\u8fc7 4 \u4e2a\u4e0d\u540c\u5c3a\u5ea6\u7684\u6700\u5927\u6c60\u5316\u5bf9\u8f93\u5165\u7684\u7279\u5f81\u5c42\u8fdb\u884c\u6c60\u5316\u540e\u62fc\u63a5\uff0c\u5927\u5c0f\u5206\u522b\u4e3a 13 * 13 9 * 9 5 * 5 1 * 1 PA Net \u4e0e yolov3 \u7684\u589e\u5f3a\u7f51\u7edc\u7c7b\u4f3c\uff08\u7279\u5f81\u91d1\u5b57\u5854\u7ed3\u6784\uff1a FPN + PAN\uff09\uff0c\u901a\u8fc7\u5377\u79ef\u548c\u4e0a\u91c7\u6837(FPN:13->26->52)\u8fdb\u884c\u5bf9\u5e94\u5c42\u7684\u62fc\u63a5\uff0c\u4e4b\u540e\u518d\u8fdb\u884c\u5377\u79ef\u548c\u4e0b\u91c7\u6837(PAN\uff1a52->26->13)\u8fdb\u884c\u5bf9\u5e94\u5c42\u62fc\u63a5 \u4e0d\u65ad\u4e0a\u4e0b\u91c7\u6837\u901a\u9053\u5806\u53e0\u5f97\u5230\u66f4\u597d\u7684\u7279\u5f81\uff0c\u5bf9 3 \u4e2a\u6709\u6548\u7279\u5f81\u5c42\u8fdb\u884c\u7279\u5f81\u7684\u53cd\u590d\u63d0\u53d6 YOLO Head \u548c yolov3 \u7684\u4e09\u4e2a\u9884\u6d4b\u5c42\u76f8\u540c(N * N * 3 * (5 + 70)) 4.2 backbone \u7f51\u7edc(CSPDarknet53) \u00b6 \u76f8\u6bd4\u4e8e yolov3 ,\u5176\u6539\u8fdb\u7684\u5730\u65b9\u6709\uff1a (1) \u6fc0\u6d3b\u51fd\u6570\uff1a LeakyReLU -> Mish convolutional \u7ed3\u6784\u53d8\u4e3a darknetConv2D BN Mish Mish \u51fd\u6570\uff1a Mish = x \\times tanh(ln(1+e^x)) Mish = x \\times tanh(ln(1+e^x)) \u5176\u56fe\u50cf\u4e3a\uff1a (2) \u6b8b\u5dee\u7ed3\u6784\u4f7f\u7528\u4e86 CSPnet \u7ed3\u6784 CSP net \u5c06\u539f\u6765\u6b8b\u5dee\u5feb\u7684\u5806\u53e0\u8fdb\u884c\u4e86\u4e00\u4e2a\u62c6\u5206\uff0c\u4e3b\u5e72\u90e8\u5206\u4e0d\u53d8\uff0c\u53e6\u4e00\u4e2a\u90e8\u5206\u7ecf\u8fc7\u5c11\u91cf\u5904\u7406\u8fde\u63a5\u5230\u6700\u540e\uff0c\u5373\u591a\u4e86\u4e00\u6761\u7ed5\u8fc7\u4e86\u5f88\u591a\u6b8b\u5dee\u7ed3\u6784\u7684\u5927\u6b8b\u5dee\u8fb9 4.3 tricks \u00b6 (1) \u5728\u9884\u6d4b\u7ed3\u6784\u4e2d\uff0cyolov4 \u7684\u65b9\u6cd5\u662f\uff1a * \u53d6\u51fa\u6bcf\u4e00\u7c7b\u5f97\u5206\u5927\u4e8e\u9608\u503c\u7684\u76ee\u6807\u6846\u548c\u5f97\u5206 * \u5229\u7528\u6846\u7684\u4f4d\u7f6e\u548c\u5f97\u5206\u8fdb\u884c\u975e\u6781\u5927\u503c\u6291\u5236 (2) Mosaic \u6570\u636e\u589e\u5f3a \u540c yolov3_SPP \u5904\u7406\uff0c\u4e00\u6b21\u5bf9 4 \u5f20\u56fe\u7247\u7684\u4fe1\u606f\u8fdb\u884c\u7ec4\u5408 (3) Label Smoothing \u5e73\u6ed1 new_onehot_labels = onehot_labels * (1 - label_smoothing) + label_smoothing / num_classes \u6807\u7b7e(0,1) -> \u5e73\u6ed1(0.005,0.995) (4) \u635f\u5931\u51fd\u6570\u5f15\u5165 CIoU \uff0c\u540c yolov3_SPP (5) \u5b66\u4e60\u7387\u4f59\u5f26\u9000\u706b\u8870\u51cf 5.yolov5 \u00b6 5.1 \u7f51\u7edc\u7ed3\u6784 \u00b6 5.2 Focus \u7ed3\u6784 \u00b6 4 * 4 * 3 -> 2 * 2 * 12 5.3 \u4e24\u79cd CSP \u7ed3\u6784 \u00b6","title":"yolo\u539f\u7406"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#yolo","text":"","title":"YOLO\u5b66\u4e60\u7b14\u8bb0"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#1yolo-v1","text":"\u8bba\u6587\u6765\u6e90\uff1a2016CVPR You Only Look Once:Unified,Real-Time Object Detection \u53c2\u8003\u7f51\u7ad9","title":"1.yolo v1"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#11","text":"(1)\u5c06\u4e00\u5e45\u56fe\u50cf\u5206\u6210 S \\times S S \\times S \u4e2a\u7f51\u683c(grid cell)\uff0c\u5982\u679c\u67d0\u4e2a object \u7684\u4e2d\u5fc3\u843d\u5728\u7f51\u683c\u4e4b\u4e2d\uff0c\u5219\u8fd9\u4e2a\u7f51\u683c\u5c31\u8d1f\u8d23\u9884\u6d4b\u8fd9\u4e2a object \u3002 (2)\u6bcf\u4e2a\u7f51\u683c\u9884\u6d4b B \u4e2a bounding box \uff0c\u6bcf\u4e2a bouding box \u9664\u4e86\u8981\u9884\u6d4b\u4f4d\u7f6e (x,y,w,h) \u5916\uff0c\u8fd8\u8981\u9644\u5e26\u4e00\u4e2a confidence \u503c\uff08 yolo \u72ec\u6709\uff0c Faster-RCNN \u548c SSD \u6ca1\u6709\uff09\uff0c\u540c\u65f6\u8fd8\u8981\u9884\u6d4b C \u4e2a\u7c7b\u522b\u7684\u5206\u6570\u3002 eg.Pascal VOC:Our Fianl Prediction is a 7 * 7 * 30 tensor. S = 7 ( grid cell \u4e3a 7 * 7 ) B = 2 ( 2 \u4e2a bounding box ,\u6bcf\u4e2a\u5305\u542b x , y , w , h , confidence ) C = 20 ( classes_num = 20 ) 7 * 7 * (2 * 5 + 20) -> 7 * 7 * 30 \u6bcf\u4e2a bouding box \u7684\u5750\u6807\u662f\u76f8\u5bf9\u503c\uff0c\u53d6\u503c\u5728[0,1] x,y : the center of the box relative to the bounds of the grid cell w,h : the width and height relative to the whole image confidence : Pr(Object) \\times IOU_{pred}^{truth} Pr(Object) \\times IOU_{pred}^{truth} ,\u524d\u8005\u4e3a 0 \u6216 1 \uff0c\u540e\u8005\u4e3a\u9884\u6d4b\u6846\u548c\u5b9e\u9645\u6846\u7684\u4ea4\u5e76\u6bd4 (3)\u7f51\u7edc\u7ed3\u6784\uff1a ImageNet yolov1 \u7684\u7f51\u7edc\u7ed3\u6784\u5e76\u4e0d\u590d\u6742\uff0c\u5982\u4e0b\u56fe\u6240\u793a \u5176\u4e2d s \u4e3a\u6b65\u8ddd stride \u7684\u7b80\u5199\uff0c\u672a\u5199\u7684\u9ed8\u8ba4\u4e3a 1 \u6700\u540e\u4e24\u5c42\uff1a 4096 -> 1470 ->( reshape \u5904\u7406) 7 * 7 * 30 \uff08\u5373\u4e0a\u8ff0\u7684 cell \u7ed3\u6784\uff09 (4) \u6fc0\u6d3b\u51fd\u6570\uff1a leaky ReLU PReLu \u7684 a_i a_i \u662f\u6839\u636e\u6570\u636e\u53d8\u5316\u7684 LeakyReLu \u7684 a_i a_i \u662f\u56fa\u5b9a\u7684 RReLu \u7684 a_{ji} a_{ji} \u662f\u4e00\u4e2a\u7ed9\u5b9a\u8303\u56f4\u968f\u673a\u62bd\u53d6\u7684\u503c","title":"1.1 \u57fa\u672c\u601d\u60f3\uff1a"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#12","text":"yolov1 \u7684\u635f\u5931\u51fd\u6570\u7531\u4e09\u90e8\u5206\u7ec4\u6210,\u6240\u7528\u65b9\u6cd5\u4e3a\u8bef\u5dee\u5e73\u65b9\u548c (1) bouding box loss (2) confidence loss (3) classes loss tips: (1) bouding box \u635f\u5931\u4e2d\u7684\u5bbd\u9ad8\u635f\u5931\u8ba1\u7b97\u9700\u8981 \u5f00\u6839\u53f7 \uff0c\u76ee\u7684\u662f \u9632\u6b62\u4e0d\u540c\u5c3a\u5bf8\u7684\u76ee\u6807\u6846\u504f\u79fb\u76f8\u540c\u8ddd\u79bb\u65f6\u7684 loss \u503c\u4e00\u6837 \uff08\u504f\u79fb\u76f8\u540c\u7684\u8ddd\u79bb\uff0c\u5bf9\u4e8e\u5927\u76ee\u6807\u800c\u8a00\uff0c IoU \u8f83\u5927\uff0c\u5219loss\u503c\u5e94\u8be5\u76f8\u5bf9\u8f83\u4f4e\uff1b\u5bf9\u4e8e\u5c0f\u76ee\u6807\u800c\u8a00\uff0c IoU \u8f83\u5c0f\uff0c\u5219loss\u503c\u5e94\u8be5\u76f8\u5bf9\u8f83\u9ad8\uff0c\u6545\u91c7\u7528\u5f00\u6839\u53ef\u4ee5\u8d77\u5230\u5982\u6b64\u6548\u679c\uff09 (2) confidence \u635f\u5931\u8ba1\u7b97\u4e2d\u5206\u4e3a\u6b63\u6837\u672c\u548c\u8d1f\u6837\u672c\u7684\u8ba1\u7b97\uff0c\u6839\u636e\u6b63\u8d1f\u6837\u672c\u771f\u5b9e\u503c {C_i} {C_i} \u53d6 1 \u6216 0 (3) \\lambda \\lambda \u4e3a\u635f\u5931\u51fd\u6570\u7684\u6743\u91cd loss weight * 8 \u7ef4\u7684 localization error \u548c 20 \u7ef4\u7684 classes error \u76f8\u6bd4\uff0c\u524d\u8005\u7684\u6743\u91cd\u9700\u8981\u5927\u4e9b\u624d\u5408\u7406\uff0c\u5373\u5bf9\u5750\u6807\u8d4b\u4e88\u66f4\u5927\u7684 loss weight * \u5982\u679c\u4e00\u4e2a\u7f51\u683c\u4e2d\u6ca1\u6709 object\uff08\u4e00\u5e45\u56fe\u4e2d\u8fd9\u79cd\u7f51\u683c\u5f88\u591a\uff09\uff0c\u90a3\u4e48\u5c31\u4f1a\u5c06\u8fd9\u4e9b\u7f51\u683c\u4e2d\u7684 box \u7684 confidence push\u52300\uff0c\u76f8\u6bd4\u4e8e\u8f83\u5c11\u7684\u6709 object \u7684\u7f51\u683c\uff0c\u8fd9\u79cd\u505a\u6cd5\u662f overpowering \u7684\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7f51\u7edc\u4e0d\u7a33\u5b9a\u751a\u81f3\u53d1\u6563\u3002\u5bf9\u6ca1\u6709 object \u7684 box \u7684 confidence loss\uff0c\u8d4b\u4e88\u5c0f\u7684 loss weight * \u6709 object \u7684 box \u7684 confidence loss \u548c\u7c7b\u522b\u7684 loss \u7684loss weight\u6b63\u5e38\u53d6 1 (4) \u53ea\u6709\u5f53\u67d0\u4e2a\u7f51\u683c\u4e2d\u6709 object \u7684\u65f6\u5019\u624d\u5bf9 classification error \u8fdb\u884c\u60e9\u7f5a;\u53ea\u6709\u5f53\u67d0\u4e2a box predictor \u5bf9\u67d0\u4e2a ground truth box \u8d1f\u8d23\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u5bf9 box \u7684 coordinate error \u8fdb\u884c\u60e9\u7f5a\uff0c\u800c\u5bf9\u54ea\u4e2a ground truth box \u8d1f\u8d23\u5c31\u770b\u5176\u9884\u6d4b\u503c\u548c ground truth box \u7684 IoU \u662f\u4e0d\u662f\u5728\u90a3\u4e2a cell \u7684\u6240\u6709 box \u4e2d\u6700\u5927(NMS)\u3002","title":"1.2 \u635f\u5931\u51fd\u6570"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#13","text":"(1) \u7fa4\u4f53\u6027\u76ee\u6807\u96be\u9884\u6d4b\uff0c\u4f8b\u5982\u4e00\u7fa4\u98de\u9e1f\uff0c\u4e0d\u9002\u5408\u5bc6\u96c6\u6027\u5bf9\u8c61\uff08\u4e00\u4e2a grid \u4e00\u4e2a\u7c7b\uff09 (2) \u5f53\u76ee\u6807\u51fa\u73b0\u65b0\u7684\u5c3a\u5bf8\u6216\u914d\u7f6e\u65f6\uff0c\u9884\u6d4b\u6027\u80fd\u8f83\u5dee (3) \u5b9a\u4f4d\u4e0d\u51c6\u786e\u662f\u4e3b\u8981\u95ee\u9898\uff08\u7f3a\u5c11 anchor \u5148\u9a8c\u6846 \uff09","title":"1.3 \u5c40\u9650\u6027"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#2yolo-v2yolo9000","text":"\u8bba\u6587\u6765\u6e90\uff1a2017CVPR YOLO9000:Better,Faster,Stronger \u53c2\u8003\u7f51\u7ad9","title":"2.yolo v2(YOLO9000)"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#21","text":"(1) Batch Normalization : \u5728\u6bcf\u4e2a\u5377\u79ef\u5c42\u540e\u90fd\u589e\u52a0\u4e86BN\u5c42 \u66f4\u597d\u6536\u655b\uff08\u6bcf\u5c42\u8f93\u5165\u6570\u636e\u5206\u5e03\u7a33\u5b9a\u5728\u68af\u5ea6\u975e\u9971\u548c\u533a\uff0c\u52a0\u5feb\u5b66\u4e60\u901f\u5ea6\uff0c\u9632\u6b62\u68af\u5ea6\u6d88\u5931\uff09 \u51cf\u5c11\u5176\u4ed6\u5f62\u5f0f\u7684\u6b63\u5219\u5316\u5904\u7406 \u53ef\u4ee5\u66ff\u4ee3 dropout \u64cd\u4f5c\uff08\u9632\u6b62\u8fc7\u62df\u5408\uff09 (2) High Resolution Classifier : 224 * 224 -> 448 * 448 (3) Convolutinal With Anchor Boxes \uff1a\u5c0f\u5e45\u5ea6\u964d\u4f4e\u4e86 mAP \uff0c\u4f46\u5927\u5e45\u63d0\u5347\u4e86\u53ec\u56de\u7387\uff08\u67e5\u5168\u7387\uff09 \u9884\u6d4b\u504f\u79fb\u91cf\u6bd4\u9884\u6d4b\u5750\u6807\u503c(yolov1)\u66f4\u80fd\u7b80\u5316\u5de5\u4f5c (4) Dimention Cluster : \u57fa\u4e8e\u8bad\u7ec3\u96c6\u91c7\u7528 k-means \u805a\u7c7b\u7684\u65b9\u6cd5\u5f97\u5230 anchor(priors) (5) Direct Location prediction : \u4f7f\u6bcf\u4e2a anchor(prior) \u53bb\u9884\u6d4b\u76ee\u6807\u4e2d\u5fc3\u843d\u5728\u67d0\u4e2a grid cell \u533a\u57df\u5185\u7684\u76ee\u6807(\u9632\u6b62\u52a0\u4e0a\u9884\u6d4b\u504f\u79fb\u91cf\u4f1a\u5bfc\u81f4\u5efa\u8bae\u6846\u51fa\u73b0\u5728\u56fe\u7247\u4efb\u610f\u4e00\u4e2a\u5730\u65b9)\uff0c\u7f51\u7edc\u66f4\u6613\u4e8e\u5b66\u4e60\u548c\u66f4\u52a0\u7a33\u5b9a b_x,b_y,b_w,b_h b_x,b_y,b_w,b_h \u662f\u9884\u6d4b\u6846\u7684\u4e2d\u5fc3\u548c\u5bbd\u9ad8\uff0c Pr(object)*IOU(b,object) Pr(object)*IOU(b,object) \u662f\u9884\u6d4b\u6846\u7684\u7f6e\u4fe1\u5ea6\uff0c\u8fd9\u91cc\u5bf9\u9884\u6d4b\u53c2\u6570 t_o t_o \u8fdb\u884c \\sigma \\sigma \u53d8\u6362\u540e\u4f5c\u4e3a\u7f6e\u4fe1\u5ea6\u7684\u503c c_x,c_y c_x,c_y \u662f\u5f53\u524d\u7f51\u683c\u5de6\u4e0a\u89d2\u5230\u56fe\u50cf\u5de6\u4e0a\u89d2\u7684\u8ddd\u79bb\uff0c\u8981\u5148\u5bf9\u4e00\u4e2a\u7f51\u683c\u5927\u5c0f\u5f52\u4e00\u5316 p_w,p_h p_w,p_h \u662f\u5148\u9a8c\u6846\u7684\u5bbd\u548c\u9ad8 \\sigma \\sigma \u662f sigmoid \u51fd\u6570 t_x,t_y,t_w,t_h,t_o t_x,t_y,t_w,t_h,t_o \u662f\u8981\u5b66\u4e60\u7684\u53c2\u6570\uff0c\u5206\u522b\u7528\u4e8e\u9884\u6d4b\u8fb9\u6846\u7684\u4e2d\u5fc3\u5bbd\u9ad8\u548c\u7f6e\u4fe1\u5ea6 (6) Fine-Grained Features : \u5bf9\u4e8e\u5c0f\u76ee\u6807\u7684\u9884\u6d4b\uff0c\u540c\u65f6\u878d\u5408\u4e86\u9ad8\u5c42\u548c\u4f4e\u5c42\u7684\u7279\u5f81\u5c42\uff0c\u589e\u52a0\u4e86 passthrough layer \u7684\u5904\u7406 (7) Multi-Scale Training \uff1a\u6bcf\u8fed\u4ee3 10 \u4e2a batch \uff0c\u5c31\u6539\u53d8\u8f93\u5165\u5c3a\u5bf8\u7684\u5927\u5c0f\uff0c\u5c3a\u5bf8\u5747\u4e3a 32 \u7684\u6574\u6570\u500d\uff0c\u8303\u56f4\u5728{320,352\uff0c\u2026\u2026,608}","title":"2.1 \u6539\u8fdb"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#22","text":"\u56fe\u4e2d\u7684\u6bcf\u4e2a convolutional \u90fd\u662f\u7531 \u5377\u79ef\u5c42(Conv2D)\u3001 BN \u5c42\u3001\u6fc0\u6d3b\u51fd\u6570(LeakyReLU) \u7ec4\u6210\uff0c\u6700\u540e\u4e00\u5c42\u53ea\u6709\u4e00\u4e2a\u5355\u5377\u79ef\u5c42\u4f5c\u4e3a\u9884\u6d4b\u5668 Size \u4e2d\u672a\u6807\u6b65\u8ddd\u7684\u9ed8\u8ba4\u4e3a 1 backbone \u4e2d\u7684 Darknet19 (\u7531 19 \u4e2a\u5377\u79ef\u5c42) \u79fb\u9664\u4e86\u6700\u540e\u4e00\u5c42\u5377\u79ef\u5c42\u53ca\u5176\u4e4b\u540e\u7684\u5c42\uff0c\u540e\u9762\u6dfb\u52a0\u4e86 3 \u4e2a 3 * 3 \u7684 1024 \u6838\u5377\u79ef\u5c42 \u6700\u540e\u9884\u6d4b\u7684 125 \u4e2a\u53c2\u6570\u5373\u4e3a 5 \u4e2a boundingbox \uff0c\u5176\u4e2d\u5305\u62ec x , y , w , h , confidence ,\u4ee5\u53ca 20 \u4e2a\u7c7b\u522b PassThrough Layer \u4f5c\u4e3a\u9ad8\u4f4e\u5c42\u7684\u7279\u5f81\u5c42\u878d\u5408\u9014\u5f84\uff08\u9632\u6b62\u5c0f\u76ee\u6807\u5728\u9ad8\u5c42\u6ca1\u88ab\u63d0\u53d6\u51fa\u6765\uff09\uff0c\u5176\u4e2d 26 * 26 * 64 \u53d8\u6210 13 * 13 * 256 \u7684\u539f\u7406\u5982\u4e0b\u56fe\u6240\u793a","title":"2.2 \u7f51\u7edc\u7ed3\u6784"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#3yolo-v3","text":"\u8bba\u6587\u6765\u6e90\uff1a 2018CVPR YOLOv3: An Incremental Improvement","title":"3.yolo v3"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#31-backbone-darknet53","text":"53\u4e2a\u5377\u79ef\u5c42\uff08\u5305\u62ec\u6700\u540e\u7684 Connnected \uff09\uff0c\u5176\u4e2d convolutianl \u5747\u7531 \u5377\u79ef\u5c42\uff0c BN \u5c42\uff0c\u6fc0\u6d3b\u51fd\u6570(LeakyRelu) \u7ec4\u6210\uff0c\u6b8b\u5dee\u7ed3\u6784\u5747\u4e3a \u4e3b\u5206\u652f\u548c\u6377\u5f84\u5206\u652f \u7684\u76f8\u52a0\u7ed3\u6784 \u6ca1\u6709 maxpolling \u5c42\uff0c\u4e0b\u91c7\u6837\u5747\u7531\u5377\u79ef\u5c42\u5904\u7406( size \u4e3a 2 )","title":"3.1  backbone \u7ed3\u6784( darknet53 )"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#32","text":"yolov3 \u5728 3 \u4e2a\u7279\u5f81\u5c42\u8fdb\u884c\u9884\u6d4b\uff0c\u6bcf\u4e2a\u7279\u5f81\u5c42\u91c7\u7528 3 \u79cd\u5c3a\u5ea6\u7684 bounding box priors (\u5373 anchor ,\u540c\u6837\u57fa\u4e8e k-means \u805a\u7c7b),\u53c2\u6570\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6bcf\u4e2a\u7279\u5f81\u5c42\u7684\u9884\u6d4b\u53c2\u6570\u4e2a\u6570\u4e3a N \\times N \\times [3 * (4 + 1 + 80)] N \\times N \\times [3 * (4 + 1 + 80)] ,\u5176\u4e2d 80 \u4e3a\u79cd\u7c7b\u6570\uff08 CoCo \u6570\u636e\u96c6\uff09 Up Sampling \u4e3a\u4e0a\u91c7\u6837\u5c42\uff0c\u9ad8\u548c\u5bbd\u4f1a\u6269\u5927\u4e3a\u539f\u6765\u7684 2 \u500d\uff0c\u6269\u5927\u540e\u4fbf\u53ef\u4e0e\u539f\u6765\u4f4e\u5c42\u7684\u8f93\u51fa\u8fdb\u884c concatenate \uff0c\u5373\u8fdb\u884c\u6df1\u5ea6\u4e0a\u7684\u62fc\u63a5\uff08 13 -> 26 -> 52 \uff09 \u7279\u5f81\u56fe 1 \u5c3a\u5bf8\u4e3a 13 * 13,\u7528\u6765\u9884\u6d4b\u76f8\u5bf9\u8f83\u5927\u7684\u76ee\u6807\uff1b\u7279\u5f81\u56fe 2 \u5c3a\u5bf8\u4e3a 26 * 26,\u7528\u6765\u9884\u6d4b\u5927\u5c0f\u4e2d\u7b49\u7684\u76ee\u6807\uff1b\u7279\u5f81\u56fe 3 \u5c3a\u5bf8\u4e3a 52 * 52\uff0c\u7528\u6765\u9884\u6d4b\u76f8\u5bf9\u8f83\u5c0f\u7684\u76ee\u6807","title":"3.2 \u6a21\u578b\u7ed3\u6784"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#33","text":"\\sigma \\sigma \u51fd\u6570\u5373\u4e3a sigmoid \u51fd\u6570\uff0c\u5c06\u9884\u6d4b\u7684\u589e\u91cf\u9650\u5236\u5728\u4e00\u5b9a\u8303\u56f4\u4f7f anchor \u4e0d\u4f1a\u8d85\u51fa\u5bf9\u5e94\u7684 grid cell \u4e0e ground truth \u7684 \u91cd\u5408\u5ea6\u6700\u5927\u7684 bounding box \u5b9a\u4e3a\u6b63\u6837\u672c\uff0c\u91cd\u5408\u5ea6\u4e0d\u662f\u6700\u5927\u4f46\u5927\u4e8e\u9608\u503c\u7684\u5219\u5ffd\u89c6\uff08\u4e0d\u4f5c\u4e3a\u6837\u672c\uff0c\u5373\u4e0d\u8ba1\u7b97\u76ee\u6807\u6846\u635f\u5931 loss for coordinate prediction \u548c\u7c7b\u522b\u635f\u5931 loss for class prediction ,\u4ec5\u8ba1\u7b97\u7f6e\u4fe1\u5ea6 objectness \uff09\uff0c\u5176\u4f59\u7684\u5219\u4e3a\u8d1f\u6837\u672c","title":"3.3 \u76ee\u6807\u8fb9\u754c\u6846\u7684\u9884\u6d4b\u4e0e\u6b63\u8d1f\u6837\u672c\u5339\u914d"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#34","text":"YOLOv3 \u7684\u635f\u5931\u51fd\u6570\u4e3b\u8981\u5206\u4e3a 3 \u4e2a\u90e8\u5206\uff1a\u76ee\u6807\u7f6e\u4fe1\u5ea6\u635f\u5931 L_{conf}(o,c) L_{conf}(o,c) ,\u76ee\u6807\u5206\u7c7b\u635f\u5931 L_{cla}(O,C) L_{cla}(O,C) \u548c\u76ee\u6807\u5b9a\u4f4d\u504f\u79fb\u91cf\u635f\u5931 L_{loc}(l,g) L_{loc}(l,g) , \\lambda_1,\\lambda_2,\\lambda_3 \\lambda_1,\\lambda_2,\\lambda_3 \u4e3a\u5e73\u8861\u7cfb\u6570 L(O,o,C,c,l,g) = \\lambda_1 L_{conf}(o,c) + \\lambda_2 L_{cla}(O,C) + \\lambda_3 L_{loc}(l,g) L(O,o,C,c,l,g) = \\lambda_1 L_{conf}(o,c) + \\lambda_2 L_{cla}(O,C) + \\lambda_3 L_{loc}(l,g)","title":"3.4 \u635f\u5931\u51fd\u6570"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#341","text":"L_{conf}(o,c)=- \\frac{\\sum_i(o_i ln(\\hat{c_i})+(1-o_i) ln(1-\\hat{c_i}))}{N} L_{conf}(o,c)=- \\frac{\\sum_i(o_i ln(\\hat{c_i})+(1-o_i) ln(1-\\hat{c_i}))}{N} \\hat{c_i}=sigmoid(c_i) \\hat{c_i}=sigmoid(c_i) o_i \\in [0,1] o_i \\in [0,1] ,\u8868\u793a\u76ee\u6807\u8fb9\u754c\u4e0e\u771f\u5b9e\u8fb9\u754c(ground truth)\u7684 IoU ,c \u4e3a\u9884\u6d4b\u503c\uff0c \\hat{c_i} \\hat{c_i} \u4e3a c \u901a\u8fc7 sigmoid \u51fd\u6570\u5f97\u5230\u7684\u9884\u6d4b\u7f6e\u4fe1\u5ea6\uff0c N \u4e3a\u6b63\u8d1f\u6837\u672c\u4e2a\u6570","title":"3.4.1 \u76ee\u6807\u7f6e\u4fe1\u5ea6\u635f\u5931\uff08\u4e8c\u503c\u4ea4\u53c9\u71b5\uff09"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#342","text":"L_{cla}(O,C) = - \\frac{ \\sum_{i \\in pos} \\sum_{j \\in cla} (O_{ij} ln(\\hat{C_{ij}}) + (1-O_{ij}) ln(1- \\hat{C_{ij}}))}{N_{pos}} L_{cla}(O,C) = - \\frac{ \\sum_{i \\in pos} \\sum_{j \\in cla} (O_{ij} ln(\\hat{C_{ij}}) + (1-O_{ij}) ln(1- \\hat{C_{ij}}))}{N_{pos}} \\hat{C_{ij}}=sigmoid(C_{ij}) \\hat{C_{ij}}=sigmoid(C_{ij}) O_{ij} \\in {\\{0,1\\}} O_{ij} \\in {\\{0,1\\}} \uff0c\u8868\u793a\u76ee\u6807\u8fb9\u754c\u6846 i \u4e2d\u662f\u5426\u5b58\u5728\u7b2c j \u7c7b\u76ee\u6807\uff0c C_{ij} C_{ij} \u4e3a\u76ee\u6807\u503c, \\hat {C_{ij}} \\hat {C_{ij}} \u4e3a C_{ij} C_{ij} \u901a\u8fc7 sigmoid \u51fd\u6570\u5f97\u5230\u7684\u76ee\u6807\u6982\u7387\uff0c N_{pos} N_{pos} \u4e3a\u6b63\u6837\u672c\u4e2a\u6570","title":"3.4.2 \u76ee\u6807\u7c7b\u522b\u635f\u5931\uff08\u4e8c\u503c\u4ea4\u53c9\u71b5\uff09"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#343","text":"L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h) \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h)","title":"3.4.3 \u76ee\u6807\u5b9a\u4f4d\u635f\u5931"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#35-yolov3-spp","text":"yolov3-SPP-ultralytics \u4e2d\u6709\u8bb8\u591a\u63d0\u5347\u6548\u80fd\u7684 tricks","title":"3.5 yolov3 SPP"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#351-mosaic","text":"\u5c06\u82e5\u5e72\u4e2a\u539f\u56fe\u50cf\u8fdb\u884c\u62fc\u63a5\u5f62\u6210\u65b0\u56fe\u50cf\uff0c\u589e\u5f3a\u540e\u4e00\u5f20\u56fe\u50cf\u7684\u4fe1\u606f\u5c31\u5305\u542b\u539f\u672c\u591a\u5f20\u56fe\u50cf\u7684\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e \uff081\uff09 \u589e\u52a0\u6570\u636e\u7684\u591a\u6837\u6027 \uff082\uff09 \u589e\u52a0\u76ee\u6807\u4e2a\u6570 \uff083\uff09 BN \u80fd\u4e00\u6b21\u6027\u7edf\u8ba1\u591a\u5f20\u56fe\u7247\u7684\u53c2\u6570","title":"3.5.1 Mosaic \u56fe\u50cf\u589e\u5f3a"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#352-spp","text":"\u76f8\u6bd4\u4e8e\u539f\u7f51\u7edc\u589e\u52a0\u4e86 SPP \u6a21\u5757 \uff08\u5728\u539f\u7f51\u7edc\u4e2d\u7684 convolutianal set \u63d2\u5165\uff09\uff0c\u5305\u542b 3 \u8def\u6700\u5927\u6c60\u5316\u5c42\uff0c\u5c06 4 \u8def\u7279\u5f81\u8fdb\u884c concatenate \u62fc\u63a5(512->2048)","title":"3.5.2 SPP\u6a21\u5757"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#353-giou-loss","text":"(1) l2 :\u539f yolov3 \u91c7\u7528\u7684\u76ee\u6807\u5b9a\u4f4d\u635f\u5931\u4e3a l2 \u635f\u5931 L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} L_{loc}(l,g) = \\frac{ \\sum_{i \\in pos} \\sum_{m \\in \\{x,y,w,h\\}} (\\hat{l_i^m}-\\hat{g_i^m})^2}{N_{pos}} \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^x}=Sigmoid(t_x),\\hat{l_i^y}=Sigmoid(t_y) \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{l_i^w}=t_w,\\hat{l_i^h}=t_h \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^x}=g_i^x-c_i^x,\\hat{g_i^y}=g_i^y-c_i^y \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h) \\hat{g_i^w}=ln(g_i^w/p_i^w),\\hat{g_i^h}=ln(g_i^h/p_i^h) \u4f1a\u51fa\u73b0\u635f\u5931\u76f8\u540c\u4f46 IoU \u5dee\u8ddd\u660e\u663e\u7684\u7684\u60c5\u51b5 (2) IoU Loss = -ln IoU \u6216\u8005 IoU Loss = 1 - IoU \u80fd\u591f\u66f4\u597d\u5730\u53cd\u5e94\u91cd\u5408\u7a0b\u5ea6\uff0c\u5177\u6709\u5c3a\u5ea6\u4e0d\u53d8\u6027\uff0c\u4f46\u5f53\u4e0d\u76f8\u4ea4\u65f6 loss \u4e3a 0 \uff0c\u4e0d\u7b26\u5408\u5b9e\u9645\u60c5\u51b5 (3) GIoU Loss = 1 - GIoU GIoU = IoU - \\frac{A^c-U}{A^c} GIoU = IoU - \\frac{A^c-U}{A^c} -1 \\leq GIoU \\leq 1 -1 \\leq GIoU \\leq 1 0 \\leq GIoU Loss \\leq 2 0 \\leq GIoU Loss \\leq 2 \u5176\u4e2d\uff0c\u7eff\u8272\u77e9\u5f62\u6846\u4e3a ground truth ,\u7ea2\u8272\u77e9\u5f62\u6846\u9884\u6d4b\u6846\uff0c\u84dd\u8272\u77e9\u5f62\u6846\u4e3a\u540c\u65f6\u5305\u542b\u5b83\u4eec\u7684\u6700\u5c0f\u77e9\u5f62\u6846\uff0c A^c A^c \u5219\u4e3a\u84dd\u8272\u77e9\u5f62\u6846\u9762\u79ef\u3002 \u5f53\u5176\u91cd\u5408\u65f6\uff0c GIoU = 1 \uff1b\u5f53\u5176\u76f8\u8ddd\u65e0\u7a77\u8fdc\u65f6\uff0c GIoU = -1 (4) DIoU Loss = 1 - DIoU DIoU = IoU -\\frac{\\rho^2(b,b^{gt})}{c^2} = IoU - \\frac{d^2}{c^2} DIoU = IoU -\\frac{\\rho^2(b,b^{gt})}{c^2} = IoU - \\frac{d^2}{c^2} $-1 \\leq DIoU \\leq 1 $ 0 \\leq DIoU Loss \\leq 2 0 \\leq DIoU Loss \\leq 2 \u5176\u4e2d\uff0c \\rho^2(b,b^{gt}) \\rho^2(b,b^{gt}) \u5373\u4e3a\u9884\u6d4b\u6846\u548c grounding box \u4e2d\u5fc3\u70b9\u7684\u6b27\u6c0f\u8ddd\u79bb d , c \u5219\u4e3a\u5305\u542b\u8fd9\u4e24\u4e2a\u6846\u7684\u6700\u5c0f\u77e9\u5f62\u6846\u7684\u5bf9\u89d2\u7ebf\u957f\u5ea6\u3002 DIoU\u635f\u5931\u80fd\u591f\u76f4\u63a5\u6700\u5c0f\u5316\u4e24\u4e2a boxes \u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u56e0\u6b64\u6536\u655b\u901f\u5ea6\u66f4\u5feb (5) CIoU Loss = 1 - CIoU CIoU = IoU - (\\frac{\\rho^2(b,b^{gt})}{c^2}+\\alpha \\upsilon) CIoU = IoU - (\\frac{\\rho^2(b,b^{gt})}{c^2}+\\alpha \\upsilon) \\upsilon = \\frac{4}{\\pi^2}(\\arctan \\frac{w^{gt}}{h^{gt}}-\\arctan \\frac{w}{h})^2 \\upsilon = \\frac{4}{\\pi^2}(\\arctan \\frac{w^{gt}}{h^{gt}}-\\arctan \\frac{w}{h})^2 \\alpha = \\frac{\\upsilon}{(1-IoU)+\\upsilon} \\alpha = \\frac{\\upsilon}{(1-IoU)+\\upsilon} \u4e00\u4e2a\u4f18\u79c0\u7684\u56de\u5f52\u5b9a\u4f4d\u635f\u5931\u5e94\u8be5\u8003\u8651\u5230 3 \u79cd\u51e0\u4f55\u53c2\u6570\uff1a \u91cd\u53e0\u9762\u79ef \u4e2d\u5fc3\u70b9\u8ddd\u79bb \u957f\u5bbd\u6bd4","title":"3.5.3 \u635f\u5931\u51fd\u6570\u7684\u8fdb\u5316\uff1aGIoU Loss"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#354-focal-loss","text":"(1) \u5bf9\u4e8e\u666e\u901a\u7684\u4ea4\u53c9\u71b5\u635f\u5931\uff08\u4e8c\u5206\u7c7b\uff09CE (cross entropy) \u800c\u8a00\uff1a CE(p,y) =\\begin{cases} -ln(p) & y = 1 \\\\ -ln(1-p) & otherwise \\\\ \\end{cases} CE(p,y) =\\begin{cases} -ln(p) & y = 1 \\\\ -ln(1-p) & otherwise \\\\ \\end{cases} \u6216 p_t = \\begin{cases} p & y =1 \\\\ 1 - p & otherwise \\\\ \\end{cases} p_t = \\begin{cases} p & y =1 \\\\ 1 - p & otherwise \\\\ \\end{cases} CE(p,y)=CE(p_t)=-ln(p_t) CE(p,y)=CE(p_t)=-ln(p_t) (2) \u5f15\u5165\u5e73\u8861\u56e0\u5b50(Balanced Cross Entropy) CE(p_t)=-\\alpha_t ln(p_t) CE(p_t)=-\\alpha_t ln(p_t) \\alpha \\alpha \u4e3a\u7528\u4e8e\u5e73\u8861\u6b63\u8d1f\u6837\u672c\u7684\u8d85\u53c2\u6570 (3) \u52a0\u5165\u53ef\u4ee5\u533a\u5206\u96be\u6613\u6837\u672c\u7684\u53c2\u6570 FL(p_t)=-(1-p_t)^\\gamma log(p_t) FL(p_t)=-(1-p_t)^\\gamma log(p_t) (1-p_t)^\\gamma (1-p_t)^\\gamma \u80fd\u591f\u964d\u4f4e\u6613\u5206\u6837\u672c\u7684\u635f\u5931\u8d21\u732e\uff0c\u4f7f\u5f97\u6a21\u578b\u4e13\u6ce8\u8bad\u7ec3\u590d\u6742\u6837\u672c (4) \u7ed3\u5408\u8d85\u53c2\u6570 FL(p_t) = -\\alpha_t(1-p_t)^\\gamma ln(p_t) FL(p_t) = -\\alpha_t(1-p_t)^\\gamma ln(p_t) \u5373 FL(p)=\\begin{cases} -\\alpha (1-p)^\\gamma ln(p) & y = 1 \\\\ -(1-\\alpha)p^\\gamma ln(1-p) & otherwise \\\\ \\end{cases} FL(p)=\\begin{cases} -\\alpha (1-p)^\\gamma ln(p) & y = 1 \\\\ -(1-\\alpha)p^\\gamma ln(1-p) & otherwise \\\\ \\end{cases} \u7531\u6570\u636e\u53ef\u77e5\uff0c\u5bf9\u4e8e\u7b80\u5355\u6837\u672c Focal Loss \u76f8\u6bd4\u4e8e CE \u964d\u4f4e\u4e86\u7b80\u5355\u6837\u672c\u7684\u635f\u5931\u8d21\u732e\u7387\uff0c\u4f7f\u5f97\u6a21\u578b\u66f4\u597d\u5730\u8bad\u7ec3\u96be\u5b66\u4e60\u6837\u672c FocalLoss \u6613\u53d7\u566a\u58f0\u5e72\u6270\uff0c\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u9700\u8981\u8fdb\u884c\u8c03\u53c2\uff0c\u540c\u65f6\u4e5f\u8981\u4fdd\u8bc1\u6570\u636e\u96c6\u7684\u6807\u6ce8\u7cbe\u51c6\u5ea6\uff0c\u5426\u5219\u4e5f\u4f1a\u4f7f\u6548\u679c\u4e0b\u964d","title":"3.5.4 \u5e94\u5bf9\u6b63\u8d1f\u6837\u672c\u6570\u91cf\u4e0d\u5e73\u8861\uff1a Focal Loss"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#4yolov4","text":"Yolov4: Optimal Speed and Accuracy of Object Detection","title":"4.yolov4"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#41","text":"\u57fa\u7840\u4ecd\u662f yolov3 \u7f51\u7edc\uff0cbackbone \u4e3a CSPDarknet53 \uff0cResblock \u4e3a\u6b8b\u5dee\u7ed3\u6784 SPP \u901a\u8fc7 4 \u4e2a\u4e0d\u540c\u5c3a\u5ea6\u7684\u6700\u5927\u6c60\u5316\u5bf9\u8f93\u5165\u7684\u7279\u5f81\u5c42\u8fdb\u884c\u6c60\u5316\u540e\u62fc\u63a5\uff0c\u5927\u5c0f\u5206\u522b\u4e3a 13 * 13 9 * 9 5 * 5 1 * 1 PA Net \u4e0e yolov3 \u7684\u589e\u5f3a\u7f51\u7edc\u7c7b\u4f3c\uff08\u7279\u5f81\u91d1\u5b57\u5854\u7ed3\u6784\uff1a FPN + PAN\uff09\uff0c\u901a\u8fc7\u5377\u79ef\u548c\u4e0a\u91c7\u6837(FPN:13->26->52)\u8fdb\u884c\u5bf9\u5e94\u5c42\u7684\u62fc\u63a5\uff0c\u4e4b\u540e\u518d\u8fdb\u884c\u5377\u79ef\u548c\u4e0b\u91c7\u6837(PAN\uff1a52->26->13)\u8fdb\u884c\u5bf9\u5e94\u5c42\u62fc\u63a5 \u4e0d\u65ad\u4e0a\u4e0b\u91c7\u6837\u901a\u9053\u5806\u53e0\u5f97\u5230\u66f4\u597d\u7684\u7279\u5f81\uff0c\u5bf9 3 \u4e2a\u6709\u6548\u7279\u5f81\u5c42\u8fdb\u884c\u7279\u5f81\u7684\u53cd\u590d\u63d0\u53d6 YOLO Head \u548c yolov3 \u7684\u4e09\u4e2a\u9884\u6d4b\u5c42\u76f8\u540c(N * N * 3 * (5 + 70))","title":"4.1 \u7f51\u7edc\u7ed3\u6784"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#42-backbone-cspdarknet53","text":"\u76f8\u6bd4\u4e8e yolov3 ,\u5176\u6539\u8fdb\u7684\u5730\u65b9\u6709\uff1a (1) \u6fc0\u6d3b\u51fd\u6570\uff1a LeakyReLU -> Mish convolutional \u7ed3\u6784\u53d8\u4e3a darknetConv2D BN Mish Mish \u51fd\u6570\uff1a Mish = x \\times tanh(ln(1+e^x)) Mish = x \\times tanh(ln(1+e^x)) \u5176\u56fe\u50cf\u4e3a\uff1a (2) \u6b8b\u5dee\u7ed3\u6784\u4f7f\u7528\u4e86 CSPnet \u7ed3\u6784 CSP net \u5c06\u539f\u6765\u6b8b\u5dee\u5feb\u7684\u5806\u53e0\u8fdb\u884c\u4e86\u4e00\u4e2a\u62c6\u5206\uff0c\u4e3b\u5e72\u90e8\u5206\u4e0d\u53d8\uff0c\u53e6\u4e00\u4e2a\u90e8\u5206\u7ecf\u8fc7\u5c11\u91cf\u5904\u7406\u8fde\u63a5\u5230\u6700\u540e\uff0c\u5373\u591a\u4e86\u4e00\u6761\u7ed5\u8fc7\u4e86\u5f88\u591a\u6b8b\u5dee\u7ed3\u6784\u7684\u5927\u6b8b\u5dee\u8fb9","title":"4.2 backbone \u7f51\u7edc(CSPDarknet53)"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#43-tricks","text":"(1) \u5728\u9884\u6d4b\u7ed3\u6784\u4e2d\uff0cyolov4 \u7684\u65b9\u6cd5\u662f\uff1a * \u53d6\u51fa\u6bcf\u4e00\u7c7b\u5f97\u5206\u5927\u4e8e\u9608\u503c\u7684\u76ee\u6807\u6846\u548c\u5f97\u5206 * \u5229\u7528\u6846\u7684\u4f4d\u7f6e\u548c\u5f97\u5206\u8fdb\u884c\u975e\u6781\u5927\u503c\u6291\u5236 (2) Mosaic \u6570\u636e\u589e\u5f3a \u540c yolov3_SPP \u5904\u7406\uff0c\u4e00\u6b21\u5bf9 4 \u5f20\u56fe\u7247\u7684\u4fe1\u606f\u8fdb\u884c\u7ec4\u5408 (3) Label Smoothing \u5e73\u6ed1 new_onehot_labels = onehot_labels * (1 - label_smoothing) + label_smoothing / num_classes \u6807\u7b7e(0,1) -> \u5e73\u6ed1(0.005,0.995) (4) \u635f\u5931\u51fd\u6570\u5f15\u5165 CIoU \uff0c\u540c yolov3_SPP (5) \u5b66\u4e60\u7387\u4f59\u5f26\u9000\u706b\u8870\u51cf","title":"4.3 tricks"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#5yolov5","text":"","title":"5.yolov5"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#51","text":"","title":"5.1 \u7f51\u7edc\u7ed3\u6784"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#52-focus","text":"4 * 4 * 3 -> 2 * 2 * 12","title":"5.2 Focus \u7ed3\u6784"},{"location":"YOLO/yolo%E5%8E%9F%E7%90%86/#53-csp","text":"","title":"5.3 \u4e24\u79cd CSP \u7ed3\u6784"}]}